{"version":3,"sources":["webpack:///./node_modules/highlight.js/lib/core.js","webpack:///./node_modules/es6-promise/dist/es6-promise.js","webpack:///./node_modules/leaflet-draw/dist/leaflet.draw.js","webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///./node_modules/xmldom/dom-parser.js","webpack:///./node_modules/vue/dist/vue.runtime.esm.js","webpack:///./node_modules/wellknown/index.js","webpack:///./node_modules/dataobject-parser/lib/utils/dataobject-parser.js","webpack:///./node_modules/csv2geojson/index.js","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./node_modules/@highlightjs/vue-plugin/src/lib/utils.js","webpack:///./node_modules/@highlightjs/vue-plugin/src/vue.js","webpack:///./node_modules/sexagesimal/index.js","webpack:///./node_modules/highlight.js/lib/languages/javascript.js","webpack:///./node_modules/sortablejs/Sortable.js","webpack:///./node_modules/loglevel/lib/loglevel.js","webpack:///./node_modules/polyline/src/polyline.js","webpack:///./node_modules/xmldom/dom.js","webpack:///./node_modules/vuejs-logger/dist/enum/log-levels.js","webpack:///./node_modules/vuejs-logger/dist/index.js","webpack:///./node_modules/topojson/build/topojson.js","webpack:///./node_modules/vuejs-logger/dist/vue-logger.js","webpack:///./node_modules/vue-router/dist/vue-router.esm.js","webpack:///./node_modules/proj4leaflet/src/proj4leaflet.js","webpack:///./node_modules/es6-object-assign/index.js","webpack:///./node_modules/node-fetch/browser.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/Config.js","webpack:///./node_modules/proj4/lib/global.js","webpack:///./node_modules/proj4/lib/constants/values.js","webpack:///./node_modules/proj4/lib/constants/PrimeMeridian.js","webpack:///./node_modules/proj4/lib/constants/units.js","webpack:///./node_modules/proj4/lib/match.js","webpack:///./node_modules/proj4/lib/projString.js","webpack:///./node_modules/wkt-parser/parser.js","webpack:///./node_modules/wkt-parser/process.js","webpack:///./node_modules/wkt-parser/index.js","webpack:///./node_modules/proj4/lib/defs.js","webpack:///./node_modules/proj4/lib/parseCode.js","webpack:///./node_modules/proj4/lib/extend.js","webpack:///./node_modules/proj4/lib/common/msfnz.js","webpack:///./node_modules/proj4/lib/common/sign.js","webpack:///./node_modules/proj4/lib/common/adjust_lon.js","webpack:///./node_modules/proj4/lib/common/tsfnz.js","webpack:///./node_modules/proj4/lib/common/phi2z.js","webpack:///./node_modules/proj4/lib/projections/merc.js","webpack:///./node_modules/proj4/lib/projections/longlat.js","webpack:///./node_modules/proj4/lib/projections.js","webpack:///./node_modules/proj4/lib/constants/Ellipsoid.js","webpack:///./node_modules/proj4/lib/deriveConstants.js","webpack:///./node_modules/proj4/lib/constants/Datum.js","webpack:///./node_modules/proj4/lib/datum.js","webpack:///./node_modules/proj4/lib/nadgrid.js","webpack:///./node_modules/proj4/lib/Proj.js","webpack:///./node_modules/proj4/lib/datumUtils.js","webpack:///./node_modules/proj4/lib/datum_transform.js","webpack:///./node_modules/proj4/lib/adjust_axis.js","webpack:///./node_modules/proj4/lib/common/toPoint.js","webpack:///./node_modules/proj4/lib/checkSanity.js","webpack:///./node_modules/proj4/lib/transform.js","webpack:///./node_modules/proj4/lib/core.js","webpack:///./node_modules/mgrs/mgrs.js","webpack:///./node_modules/proj4/lib/Point.js","webpack:///./node_modules/proj4/lib/common/pj_enfn.js","webpack:///./node_modules/proj4/lib/common/pj_mlfn.js","webpack:///./node_modules/proj4/lib/common/pj_inv_mlfn.js","webpack:///./node_modules/proj4/lib/projections/tmerc.js","webpack:///./node_modules/proj4/lib/common/sinh.js","webpack:///./node_modules/proj4/lib/common/hypot.js","webpack:///./node_modules/proj4/lib/common/log1py.js","webpack:///./node_modules/proj4/lib/common/asinhy.js","webpack:///./node_modules/proj4/lib/common/gatg.js","webpack:///./node_modules/proj4/lib/common/clens.js","webpack:///./node_modules/proj4/lib/common/cosh.js","webpack:///./node_modules/proj4/lib/common/clens_cmplx.js","webpack:///./node_modules/proj4/lib/projections/etmerc.js","webpack:///./node_modules/proj4/lib/common/adjust_zone.js","webpack:///./node_modules/proj4/lib/projections/utm.js","webpack:///./node_modules/proj4/lib/common/srat.js","webpack:///./node_modules/proj4/lib/projections/gauss.js","webpack:///./node_modules/proj4/lib/projections/sterea.js","webpack:///./node_modules/proj4/lib/projections/stere.js","webpack:///./node_modules/proj4/lib/projections/somerc.js","webpack:///./node_modules/proj4/lib/projections/omerc.js","webpack:///./node_modules/proj4/lib/projections/lcc.js","webpack:///./node_modules/proj4/lib/projections/krovak.js","webpack:///./node_modules/proj4/lib/common/mlfn.js","webpack:///./node_modules/proj4/lib/common/e0fn.js","webpack:///./node_modules/proj4/lib/common/e1fn.js","webpack:///./node_modules/proj4/lib/common/e2fn.js","webpack:///./node_modules/proj4/lib/common/e3fn.js","webpack:///./node_modules/proj4/lib/common/gN.js","webpack:///./node_modules/proj4/lib/common/adjust_lat.js","webpack:///./node_modules/proj4/lib/common/imlfn.js","webpack:///./node_modules/proj4/lib/projections/cass.js","webpack:///./node_modules/proj4/lib/common/qsfnz.js","webpack:///./node_modules/proj4/lib/projections/laea.js","webpack:///./node_modules/proj4/lib/common/asinz.js","webpack:///./node_modules/proj4/lib/projections/aea.js","webpack:///./node_modules/proj4/lib/projections/gnom.js","webpack:///./node_modules/proj4/lib/common/iqsfnz.js","webpack:///./node_modules/proj4/lib/projections/cea.js","webpack:///./node_modules/proj4/lib/projections/eqc.js","webpack:///./node_modules/proj4/lib/projections/poly.js","webpack:///./node_modules/proj4/lib/projections/nzmg.js","webpack:///./node_modules/proj4/lib/projections/mill.js","webpack:///./node_modules/proj4/lib/projections/sinu.js","webpack:///./node_modules/proj4/lib/projections/moll.js","webpack:///./node_modules/proj4/lib/projections/eqdc.js","webpack:///./node_modules/proj4/lib/projections/vandg.js","webpack:///./node_modules/proj4/lib/projections/aeqd.js","webpack:///./node_modules/proj4/lib/projections/ortho.js","webpack:///./node_modules/proj4/lib/projections/qsc.js","webpack:///./node_modules/proj4/lib/projections/robin.js","webpack:///./node_modules/proj4/lib/projections/geocent.js","webpack:///./node_modules/proj4/lib/projections/tpers.js","webpack:///./node_modules/proj4/projs.js","webpack:///./node_modules/proj4/lib/index.js","webpack:///./node_modules/togeojson/togeojson.js","webpack:///./node_modules/@mapbox/leaflet-omnivore/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/xmldom/sax.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/SelectorID.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/LayerSwitcherDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/LayerSwitcher.js","webpack:///./node_modules/geoportal-access-lib/src/Utils/LoggerByDefault.js","webpack:///./node_modules/geoportal-access-lib/src/Utils/MessagesResources.js","webpack:///./node_modules/geoportal-access-lib/src/Exceptions/ErrorService.js","webpack:///./node_modules/geoportal-access-lib/src/Utils/Helper.js","webpack:///./node_modules/geoportal-access-lib/src/Protocols/XHR.js","webpack:///./node_modules/geoportal-access-lib/src/Protocols/JSONP.js","webpack:///./node_modules/geoportal-access-lib/src/Protocols/Protocol.js","webpack:///./node_modules/geoportal-access-lib/src/Services/DefaultUrlService.js","webpack:///./node_modules/geoportal-access-lib/src/Services/CommonService.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiElevationRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiProfilRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestREST.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/WPS.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestWPS.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XML.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/AltiResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/Elevation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Formats/AltiResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Response/AltiResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Alti/Alti.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/AutoConfResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Constraint.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Format.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Layer.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Legend.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Metadata.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Originator.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Service.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Style.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Territory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/Thematic.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/TileMatrixSet.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/TileMatrix.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/model/TileMatrixLimit.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Formats/AutoConfResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/Response/AutoConfResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoConf/AutoConf.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/RequestHeader.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/Request.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/AbstractService.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/model/Address.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/GeocodeFilterExtension.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/GeocodeRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/model/Position.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/model/Preference.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService/ReverseGeocodeRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Formats/XLS/LocationUtilityService.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/GeocodeLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/StreetAddress.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/PositionOfInterest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/CadastralParcel.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/Administratif.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/DirectGeocodeRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodeResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/DirectGeocodedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Formats/DirectGeocodeResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/DirectGeocodeResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Geocode.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Request/ReverseGeocodeRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/ReverseGeocodedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Formats/ReverseGeocodeResponseReader.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/Response/ReverseGeocodeResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Geocode/ReverseGeocode.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/AutoCompleteResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/SuggestedLocation.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/AutoCompleteResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/AutoComplete/AutoComplete.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Request/model/RouteParamREST.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestREST.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteInstruction.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Response/RouteResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Route/Route.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/model/ProcessIsoCurveParam.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/ProcessIsoCurveRequest.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/ProcessIsoCurveResponseFactory.js","webpack:///./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/ProcessIsoCurve.js","webpack:///./node_modules/geoportal-access-lib/src/Services/Services.js","webpack:///./node_modules/geoportal-access-lib/src/Gp.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/CheckRightManagement.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/LocationSelectorDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/Utils/PositionFormater.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/Utils/IconDefault.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/LocationSelector.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/IsoDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/Isocurve.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/MathUtils.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/MousePositionDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/Register.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/CRS/EPSG2154.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/CRS/EPSG27572.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/CRS/EPSG4326.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/CRS/CRS.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/MousePosition.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/ReverseGeocodingDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/ReverseGeocoding.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/RouteDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/Route.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/SearchEngineUtils.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/SearchEngineDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/SearchEngine.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/ElevationPathDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Controls/ProfileElevationPathDOM.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/ElevationPath.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/Logo.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Controls/Controls.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/LayerUtils.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Layers/LayerConfig.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Layers/LayerEvent.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Layers/WMS.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Layers/WMTS.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/Layers/Layers.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/AutoLoadConfig.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/ProxyUtils.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Leaflet/index.js","webpack:///./node_modules/geoportal-extensions-leaflet/src/Common/Utils/LoggerByDefault.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/leaflet/dist/leaflet-src.js","webpack:///./node_modules/common-tags/es/TemplateTag/TemplateTag.js","webpack:///./node_modules/common-tags/es/trimResultTransformer/trimResultTransformer.js","webpack:///./node_modules/common-tags/es/stripIndentTransformer/stripIndentTransformer.js","webpack:///./node_modules/common-tags/es/replaceResultTransformer/replaceResultTransformer.js","webpack:///./node_modules/common-tags/es/replaceSubstitutionTransformer/replaceSubstitutionTransformer.js","webpack:///./node_modules/common-tags/es/inlineArrayTransformer/inlineArrayTransformer.js","webpack:///./node_modules/common-tags/es/splitStringTransformer/splitStringTransformer.js","webpack:///./node_modules/common-tags/es/removeNonPrintingValuesTransformer/removeNonPrintingValuesTransformer.js","webpack:///./node_modules/common-tags/es/html/html.js","webpack:///./node_modules/common-tags/es/commaLists/commaLists.js","webpack:///./node_modules/common-tags/es/commaListsAnd/commaListsAnd.js","webpack:///./node_modules/common-tags/es/commaListsOr/commaListsOr.js","webpack:///./node_modules/common-tags/es/stripIndents/stripIndents.js","webpack:///./node_modules/common-tags/es/safeHtml/safeHtml.js","webpack:///./node_modules/common-tags/es/oneLine/oneLine.js","webpack:///./node_modules/common-tags/es/oneLineTrim/oneLineTrim.js","webpack:///./node_modules/common-tags/es/oneLineCommaLists/oneLineCommaLists.js","webpack:///./node_modules/common-tags/es/oneLineCommaListsOr/oneLineCommaListsOr.js","webpack:///./node_modules/common-tags/es/oneLineCommaListsAnd/oneLineCommaListsAnd.js","webpack:///./node_modules/common-tags/es/inlineLists/inlineLists.js","webpack:///./node_modules/common-tags/es/oneLineInlineLists/oneLineInlineLists.js","webpack:///./node_modules/common-tags/es/stripIndent/stripIndent.js","webpack:///./node_modules/corslite/corslite.js","webpack:///./node_modules/d3-dsv/src/dsv.js","webpack:///./node_modules/d3-dsv/src/csv.js","webpack:///./node_modules/d3-dsv/src/tsv.js"],"names":["deepFreeze","obj","Map","clear","delete","set","Error","Set","add","Object","freeze","getOwnPropertyNames","forEach","name","prop","isFrozen","deepFreezeEs6","_default","default","Response","mode","undefined","data","this","isMatchIgnored","escapeHTML","value","replace","inherit","original","objects","result","create","key","SPAN_CLOSE","emitsWrappingTags","node","kind","HTMLRenderer","parseTree","options","buffer","classPrefix","walk","text","className","sublanguage","span","TokenTree","rootNode","children","stack","length","top","push","pop","closeNode","JSON","stringify","builder","constructor","_walk","addText","openNode","child","every","el","join","_collapse","TokenTreeEmitter","super","emitter","root","renderer","escape","RegExp","source","re","concat","args","joined","map","x","either","countMatchGroups","toString","exec","startsWith","lexeme","match","index","BACKREF_RE","regexps","separator","numCaptures","regex","offset","out","substring","String","Number","MATCH_NOTHING_RE","IDENT_RE","UNDERSCORE_IDENT_RE","NUMBER_RE","C_NUMBER_RE","BINARY_NUMBER_RE","RE_STARTERS_RE","SHEBANG","opts","beginShebang","binary","begin","end","relevance","m","resp","ignoreMatch","BACKSLASH_ESCAPE","APOS_STRING_MODE","illegal","contains","QUOTE_STRING_MODE","PHRASAL_WORDS_MODE","COMMENT","modeOptions","C_LINE_COMMENT_MODE","C_BLOCK_COMMENT_MODE","HASH_COMMENT_MODE","NUMBER_MODE","C_NUMBER_MODE","BINARY_NUMBER_MODE","CSS_NUMBER_MODE","REGEXP_MODE","TITLE_MODE","UNDERSCORE_TITLE_MODE","METHOD_GUARD","END_SAME_AS_BEGIN","assign","_beginMatch","MODES","__proto__","skipIfhasPrecedingDot","response","before","input","beginKeywords","parent","split","__beforeBegin","keywords","compileIllegal","_parent","Array","isArray","compileMatch","compileRelevance","COMMON_KEYWORDS","DEFAULT_KEYWORD_CLASSNAME","compileKeywords","rawKeywords","caseInsensitive","compiledKeywords","compileList","keys","keywordList","toLowerCase","keyword","pair","scoreForKeyword","providedScore","commonKeyword","includes","compileLanguage","language","plugins","langRe","global","case_insensitive","MultiRegex","matchIndexes","regexes","matchAt","position","terminators","matcherRe","lastIndex","s","i","findIndex","matchData","splice","ResumableMultiRegex","rules","multiRegexes","count","regexIndex","matcher","slice","addRule","compile","type","getMatcher","resumingScanAtSamePosition","m2","considerAll","buildModeRegex","mm","term","rule","terminatorEnd","compileMode","cmode","isCompiled","ext","compilerExtensions","keywordPattern","$pattern","lexemes","keywordPatternRe","beginRe","endSameAsBegin","endsWithParent","endRe","illegalRe","c","expandOrCloneMode","starts","classNameAliases","dependencyOnParent","variants","cachedVariants","variant","version","hasValueOrEmptyAttribute","Boolean","BuildVuePlugin","hljs","Component","props","detectedLanguage","unknownLanguage","computed","autoDetect","getLanguage","console","warn","code","highlightAuto","highlight","ignoreIllegals","autodetect","createElement","class","domProps","innerHTML","highlighted","VuePlugin","Vue","component","mergeHTMLPlugin","originalStream","nodeStream","resultNode","document","mergeStreams","tag","nodeName","_nodeStream","firstChild","nextSibling","nodeType","nodeValue","event","processed","nodeStack","selectStream","open","attributeString","attr","call","attributes","close","render","stream","reverse","substr","seenDeprecations","error","message","log","deprecated","escape$1","inherit$1","NO_MATCH","Symbol","HLJS","languages","aliases","SAFE_MODE","fixMarkupRe","LANGUAGE_NOT_FOUND","PLAINTEXT_LANGUAGE","disableAutodetect","noHighlightRe","languageDetectRe","tabReplace","useBR","__emitter","shouldNotHighlight","languageName","test","blockLanguage","block","classes","parentNode","find","_class","codeOrlanguageName","optionsOrCode","continuation","context","fire","_highlight","codeToHighlight","keywordData","matchText","prototype","hasOwnProperty","processKeywords","modeBuffer","buf","keywordRelevance","cssClass","addKeyword","processSubLanguage","subLanguage","continuations","addSublanguage","processBuffer","startNewMode","endOfMode","matchPlusRemainder","matched","endsParent","doIgnore","resumeScanAtSamePosition","doBeginMatch","newMode","beforeCallbacks","cb","skip","excludeBegin","returnBegin","doEndMatch","endMode","origin","returnEnd","excludeEnd","processContinuations","list","current","unshift","item","lastMatch","processLexeme","textBeforeMatch","err","badRule","iterations","md","beforeMatch","processedCount","closeAllNodes","finalize","toHTML","Math","floor","illegalBy","msg","sofar","errorRaised","justTextHighlightResult","languageSubset","plaintext","results","filter","autoDetection","sorted","sort","a","b","supersetOf","best","secondBest","second_best","fixMarkup","html","updateClassName","element","currentLang","resultLang","classList","brPlugin","TAB_REPLACE_RE","tabReplacePlugin","highlightElement","textContent","relavance","configure","userOptions","initHighlighting","called","blocks","querySelectorAll","initHighlightingOnLoad","wantsHighlight","highlightAll","readyState","boot","registerLanguage","languageDefinition","lang","error$1","rawDefinition","bind","registerAliases","unregisterLanguage","alias","listLanguages","requireLanguage","aliasList","upgradePluginAPI","plugin","addPlugin","deprecateFixMarkup","arg","deprecateHighlightBlock","window","addEventListener","highlightBlock","vuePlugin","debugMode","safeMode","versionString","module","exports","factory","objectOrFunction","isFunction","_isArray","len","vertxNext","customSchedulerFn","asap","callback","queue","flush","scheduleFlush","setScheduler","scheduleFn","setAsap","asapFn","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isNode","self","process","isWorker","Uint8ClampedArray","importScripts","MessageChannel","useNextTick","nextTick","useVertxTimer","useSetTimeout","useMutationObserver","observer","createTextNode","observe","characterData","useMessageChannel","channel","port1","onmessage","port2","postMessage","globalSetTimeout","setTimeout","attemptVertx","vertx","Function","require","runOnLoop","runOnContext","e","then","onFulfillment","onRejection","noop","PROMISE_ID","makePromise","_state","arguments","invokeCallback","_result","subscribe","resolve$1","object","Constructor","promise","resolve","random","PENDING","FULFILLED","REJECTED","selfFulfillment","TypeError","cannotReturnOwn","tryThen","then$$1","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","reject","_label","handleOwnThenable","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","_subscribers","subscribers","settled","detail","hasCallback","succeeded","initializePromise","resolver","id","nextId","validationError","Enumerator","_instanceConstructor","_remaining","_enumerate","_eachEntry","entry","resolve$$1","_then","didError","_settledAt","Promise$1","_willSettleAt","state","enumerator","all","entries","race","_","reject$1","needsResolver","needsNew","Promise","catch","finally","polyfill","local","P","promiseToString","cast","_setScheduler","_setAsap","_asap","t","o","parentElement","L","drawVersion","Draw","drawLocal","draw","toolbar","actions","title","finish","undo","buttons","polyline","polygon","rectangle","circle","marker","circlemarker","handlers","tooltip","start","radius","cont","simpleshape","edit","save","cancel","clearAll","editDisabled","remove","removeDisabled","subtext","Event","CREATED","EDITED","DELETED","DRAWSTART","DRAWSTOP","DRAWVERTEX","EDITSTART","EDITMOVE","EDITRESIZE","EDITVERTEX","EDITSTOP","DELETESTART","DELETESTOP","TOOLBAROPENED","TOOLBARCLOSED","MARKERCONTEXT","Feature","Handler","extend","initialize","_map","_container","_overlayPane","_panes","overlayPane","_popupPane","popupPane","shapeOptions","Util","setOptions","parseInt","include","Evented","Mixin","Events","enable","_enabled","handler","layerType","disable","addHooks","DomUtil","disableTextSelection","getContainer","focus","_tooltip","Tooltip","DomEvent","on","_cancelDrawing","removeHooks","enableTextSelection","dispose","off","_fireCreatedEvent","layer","keyCode","Polyline","statics","TYPE","Poly","allowIntersection","repeatMode","drawError","color","timeout","icon","DivIcon","iconSize","Point","touchIcon","guidelineDistance","maxGuideLineLength","stroke","weight","opacity","fill","clickable","metric","feet","nautic","showLength","zIndexOffset","factor","maxPoints","Browser","touch","_markers","_markerGroup","LayerGroup","addLayer","_poly","updateContent","_getTooltipText","_mouseMarker","getCenter","divIcon","iconAnchor","_onMouseOut","_onMouseMove","_onMouseDown","_onMouseUp","addTo","_onZoomEnd","_onTouch","_clearHideErrorTimeout","_cleanUpShape","removeLayer","_clearGuides","deleteLastVertex","getLatLngs","setLatLngs","_vertexChanged","addVertex","newLatLngIntersects","_showErrorTooltip","_errorShown","_hideErrorTooltip","_createMarker","addLatLng","completeShape","_shapeIsValid","_finishShape","_defaultShape","_updateGuide","mouseEventToLayerPoint","originalEvent","layerPointToLatLng","_currentLatLng","_updateTooltip","setLatLng","preventDefault","layers","_updateFinishHandler","_updateRunningMeasure","_clickHandled","_touchHandled","_disableMarkers","_disableNewMarkers","clientX","clientY","_startPoint","_mouseDownOrigin","point","_endPoint","distanceTo","n","_calculateFinishDistance","latlng","abs","devicePixelRatio","_enableNewMarkers","touches","Polygon","latLngToContainerPoint","getLatLng","Marker","latLngToLayerPoint","_drawGuide","updatePosition","sqrt","pow","y","r","l","_guidesContainer","style","backgroundColor","setPosition","_updateGuideColor","childNodes","removeChild","_getMeasurementString","_measurementRunningTotal","GeometryUtil","isVersion07x","distance","readableDistance","precision","showAsError","setStyle","_hideErrorTimeout","removeError","clearTimeout","showArea","fillColor","fillOpacity","_area","readableArea","geodesicArea","SimpleShape","_endLabelText","_mapDraggable","dragging","enabled","cursor","_initialLabelText","passive","removeEventListener","_shape","_isDrawing","_startLatLng","_drawShape","Rectangle","_isCurrentlyTwoClickDrawing","target","setBounds","LatLngBounds","getBounds","Icon","Default","_onClick","_marker","Touch","CircleMarker","Circle","showRadius","setRadius","getRadius","toFixed","Edit","_onDragEnd","_toggleMarkerHighlight","edited","_icon","display","hasClass","removeClass","_offsetMarker","addClass","marginTop","marginLeft","addInitHook","editing","editable","latlngs","_latlngs","_holes","_updateLatLngs","_flat","_eachVertexHandler","_verticesHandlers","_initHandlers","updateMarkers","PolyVerticesEdit","poly","_path","_initMarkers","clearLayers","_onMarkerClick","_onContextMenu","_createMiddleMarker","_updatePrevNext","draggable","_origLatLng","_index","_onMarkerDragStart","_onMarkerDrag","_fireEdit","_onTouchMove","_spliceLatLngs","apply","_convertLatLngs","redraw","_removeMarker","_updateIndexes","LatLngUtil","cloneLatLng","_latlng","_editTooltip","intersects","_middleLeft","_getMiddleLatLng","_prev","_middleRight","_next","_bounds","_southWest","latLng","_northEast","stopPropagation","eachLayer","setOpacity","lat","lng","project","unproject","_add","_divideBy","moveIcon","resizeIcon","touchMoveIcon","touchResizeIcon","_unbindMarker","_moveMarker","_resizeMarkers","_createMoveMarker","_createResizeMarker","_bindMarker","_onMarkerDragEnd","_onTouchStart","_onTouchEnd","_move","_resize","_getCorners","_cornerIndex","_oppositeCorner","_toggleCornerMarkers","_repositionCornerMarkers","latLngBounds","getNorthWest","getNorthEast","getSouthEast","getSouthWest","_getResizeMarkerPoint","_radius","cos","PI","editTooltip","mergeOptions","touchExtend","TouchExtend","_pane","_detectIE","_onTouchCancel","_onTouchLeave","_touchEvent","pointerType","_filterClick","mouseEventToContainerPoint","layerPoint","containerPoint","pageX","pageY","timeStamp","_lastClick","_simulatedClick","_simulated","stop","_loaded","navigator","userAgent","indexOf","_initInteraction","addInteractiveTarget","_initInteractionLegacy","_onMouseClick","_onKeyPress","_fireMouseEvent","MarkerDrag","cloneLatLngs","km","ha","mi","ac","yd","ft","nm","sin","formattedNumber","parseFloat","format","numeric","delimiters","thousands","decimal","LineUtil","segmentsIntersect","_checkCounterclockwise","_getProjectedPoints","_tooFewPointsForIntersection","_lineSegmentsIntersectsRange","newPointIntersects","_originalPoints","Control","_toolbars","DrawToolbar","_toolbarEnabled","EditToolbar","onAdd","addToolbar","appendChild","onRemove","removeToolbar","setDrawingOptions","drawControlTooltips","drawControl","addControl","Toolbar","Class","_modes","_actionButtons","_activeMode","_toolbarClass","getModeHandlers","_toolbarContainer","_initModeHandler","_lastButtonIndex","_actionsContainer","_disposeButton","button","_handlerActivated","_handlerDeactivated","_createButton","container","buttonIndex","_detectIOS","MSStream","href","_showActionsToolbar","_hideActionsToolbar","_createActions","getActions","offsetTop","_visible","_singleLineLabel","visibility","selectedPathOptions","dashArray","maintainColor","featureGroup","_selectedFeatureCount","Delete","_save","removeAllLayers","_clearAllLayers","_checkDisabled","revertLayers","getLayers","setAttribute","_featureGroup","FeatureGroup","_uneditedLayerProps","_hasAvailableLayers","_enableLayerEdit","_disableLayerEdit","_revertLayer","_backupLayer","stamp","_selectedPathOptions","previousOptions","changedTouches","_deletableLayers","_enableLayerDelete","_disableLayerDelete","_deletedLayers","_removeLayer","autoBom","Blob","d","XMLHttpRequest","responseType","onload","g","onerror","send","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","f","saveAs","HTMLAnchorElement","h","URL","webkitURL","j","download","rel","location","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","body","innerText","HTMLElement","safari","FileReader","k","onloadend","readAsDataURL","normalizeComponent","scriptExports","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","existing","beforeCreate","DOMParser","locator","buildErrorHandler","errorImpl","domBuilder","DOMHandler","errorHandler","isCallback","build","fn","_locator","cdata","lineNumber","columnNumber","systemId","_toString","chars","java","appendElement","hander","currentElement","doc","parseFromString","mimeType","sax","XMLReader","defaultNSMap","xmlns","entityMap","setDocumentLocator","nbsp","copy","xml","parse","startDocument","DOMImplementation","createDocument","documentURI","startElement","namespaceURI","localName","qName","attrs","createElementNS","getURI","getValue","getQName","createAttributeNS","getLocator","setAttributeNode","endElement","tagName","startPrefixMapping","prefix","uri","endPrefixMapping","processingInstruction","ins","createProcessingInstruction","ignorableWhitespace","ch","characters","charNode","createCDATASection","skippedEntity","endDocument","normalize","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","warning","fatalError","XMLSerializer","emptyObject","isUndef","v","isDef","isTrue","isFalse","isPrimitive","isObject","isPlainObject","isRegExp","isValidArrayIndex","val","isFinite","isPromise","toNumber","isNaN","makeMap","str","expectsLowerCase","isReservedAttribute","arr","hasOwn","cached","cache","hit","camelizeRE","camelize","toUpperCase","capitalize","charAt","hyphenateRE","hyphenate","polyfillBind","ctx","boundFn","_length","nativeBind","toArray","ret","to","_from","toObject","res","no","identity","looseEqual","isObjectA","isObjectB","isArrayA","isArrayB","Date","getTime","keysA","keysB","looseIndexOf","once","SSR_ATTR","ASSET_TYPES","LIFECYCLE_HOOKS","config","optionMergeStrategies","silent","productionTip","devtools","performance","warnHandler","ignoredElements","keyCodes","isReservedTag","isReservedAttr","isUnknownElement","getTagNamespace","parsePlatformTagName","mustUseProp","async","_lifecycleHooks","unicodeRegExp","isReserved","charCodeAt","def","enumerable","defineProperty","writable","configurable","bailRE","parsePath","path","segments","_isServer","hasProto","inBrowser","inWeex","WXEnvironment","platform","weexPlatform","UA","isIE","isIE9","isEdge","isIOS","isFF","nativeWatch","watch","supportsPassive","get","isServerRendering","env","VUE_ENV","__VUE_DEVTOOLS_GLOBAL_HOOK__","isNative","Ctor","_Set","hasSymbol","Reflect","ownKeys","has","uid","Dep","subs","addSub","sub","removeSub","depend","addDep","notify","update","targetStack","pushTarget","popTarget","VNode","elm","componentOptions","asyncFactory","ns","fnContext","fnOptions","fnScopeId","componentInstance","raw","isStatic","isRootInsert","isComment","isCloned","isOnce","asyncMeta","isAsyncPlaceholder","prototypeAccessors","defineProperties","createEmptyVNode","createTextVNode","cloneVNode","vnode","cloned","arrayProto","arrayMethods","methodsToPatch","method","inserted","ob","__ob__","observeArray","dep","arrayKeys","shouldObserve","toggleObserving","Observer","vmCount","protoAugment","copyAugment","src","asRootData","isExtensible","_isVue","defineReactive$$1","customSetter","shallow","property","getOwnPropertyDescriptor","getter","setter","childOb","dependArray","newVal","max","del","items","strats","mergeData","from","toVal","fromVal","mergeDataOrFn","parentVal","childVal","vm","instanceData","defaultData","mergeHook","dedupeHooks","hooks","mergeAssets","key$1","methods","inject","provide","defaultStrat","normalizeProps","normalizeInject","normalized","normalizeDirectives","dirs","directives","def$$1","_base","extends","mixins","mergeField","strat","resolveAsset","warnMissing","assets","camelizedId","PascalCaseId","validateProp","propOptions","propsData","absent","booleanIndex","getTypeIndex","stringIndex","getPropDefaultValue","prevShouldObserve","_props","getType","functionTypeCheckRE","isSameType","expectedTypes","handleError","info","cur","$parent","errorCaptured","capture","globalHandleError","invokeWithErrorHandling","_handled","logError","timerFunc","isUsingMicroTask","callbacks","pending","flushCallbacks","copies","p","setImmediate","counter","textNode","_resolve","seenObjects","traverse","_traverse","seen","isA","depId","normalizeEvent","once$$1","createFnInvoker","fns","invoker","arguments$1","updateListeners","oldOn","remove$$1","createOnceHandler","old","params","mergeVNodeHook","hookKey","oldHook","wrappedHook","merged","extractPropsFromVNodeData","altKey","checkProp","hash","preserve","simpleNormalizeChildren","normalizeChildren","normalizeArrayChildren","isTextNode","nestedIndex","last","shift","_isVList","initProvide","_provided","initInjections","resolveInject","provideKey","provideDefault","resolveSlots","slots","slot","name$1","isWhitespace","normalizeScopedSlots","normalSlots","prevSlots","hasNormalSlots","isStable","$stable","$key","_normalized","$hasNormal","normalizeScopedSlot","key$2","proxyNormalSlot","proxy","renderList","iterator","next","done","renderSlot","fallbackRender","bindObject","nodes","scopedSlotFn","$scopedSlots","$slots","$createElement","resolveFilter","isKeyNotMatch","expect","actual","checkKeyCodes","eventKeyCode","builtInKeyCode","eventKeyName","builtInKeyName","mappedKeyCode","bindObjectProps","asProp","isSync","loop","camelizedKey","hyphenatedKey","$event","renderStatic","isInFor","_staticTrees","tree","_renderProxy","markStatic","markOnce","markStaticNode","bindObjectListeners","ours","resolveScopedSlots","hasDynamicKeys","contentHashKey","bindDynamicKeys","baseObj","values","prependModifier","symbol","installRenderHelpers","_o","_n","_s","_l","_t","_q","_i","_m","_f","_k","_b","_v","_e","_u","_g","_d","_p","FunctionalRenderContext","contextVm","this$1","_original","needNormalization","listeners","injections","scopedSlots","_c","createFunctionalComponent","mergeProps","renderContext","cloneAndMarkFunctionalResult","vnodes","clone","componentVNodeHooks","init","hydrating","_isDestroyed","keepAlive","mountedNode","prepatch","createComponentInstanceForVnode","activeInstance","$mount","oldVnode","updateChildComponent","insert","_isMounted","callHook","queueActivatedComponent","activateChildComponent","destroy","deactivateChildComponent","$destroy","hooksToMerge","createComponent","baseCtor","cid","resolveAsyncComponent","createAsyncPlaceholder","resolveConstructorOptions","model","transformModel","nativeOn","abstract","installComponentHooks","_isComponent","_parentVnode","inlineTemplate","toMerge","_merged","mergeHook$1","f1","f2","SIMPLE_NORMALIZE","ALWAYS_NORMALIZE","normalizationType","alwaysNormalize","_createElement","is","pre","applyNS","registerDeepBindings","force","initRender","_vnode","parentVnode","_renderChildren","parentData","_parentListeners","currentRenderingInstance","renderMixin","$nextTick","_render","ref","ensureCtor","comp","base","__esModule","toStringTag","errorComp","resolved","owner","owners","loading","loadingComp","sync","timerLoading","timerTimeout","$on","forceRender","renderCompleted","$forceUpdate","delay","getFirstComponentChild","initEvents","_events","_hasHookEvent","updateComponentListeners","remove$1","$off","_target","onceHandler","oldListeners","eventsMixin","hookRE","$once","i$1","cbs","$emit","setActiveInstance","prevActiveInstance","initLifecycle","$children","$refs","_watcher","_inactive","_directInactive","_isBeingDestroyed","lifecycleMixin","_update","prevEl","$el","prevVnode","restoreActiveInstance","__patch__","__vue__","teardown","_watchers","_data","mountComponent","updateComponent","Watcher","renderChildren","newScopedSlots","oldScopedSlots","hasDynamicScopedSlot","needsForceUpdate","$attrs","$listeners","propKeys","_propKeys","isInInactiveTree","direct","activatedChildren","waiting","flushing","resetSchedulerState","currentFlushTimestamp","getNow","now","flushSchedulerQueue","watcher","run","activatedQueue","updatedQueue","callActivatedHooks","callUpdatedHooks","emit","queueWatcher","uid$2","expOrFn","isRenderWatcher","deep","user","lazy","active","dirty","deps","newDeps","depIds","newDepIds","expression","cleanupDeps","tmp","oldValue","evaluate","sharedPropertyDefinition","sourceKey","initState","initProps","initMethods","initData","initComputed","initWatch","propsOptions","isRoot","getData","computedWatcherOptions","watchers","_computedWatchers","isSSR","userDef","defineComputed","shouldCache","createComputedGetter","createGetterInvoker","createWatcher","$watch","stateMixin","dataDef","propsDef","$set","$delete","immediate","uid$3","initMixin","_init","_uid","initInternalComponent","_self","vnodeComponentOptions","_componentTag","superOptions","cachedSuperOptions","modifiedOptions","resolveModifiedOptions","extendOptions","components","modified","latest","sealedOptions","initUse","use","installedPlugins","_installedPlugins","install","initMixin$1","mixin","initExtend","Super","SuperId","cachedCtors","_Ctor","Sub","initProps$1","initComputed$1","Comp","initAssetRegisters","definition","getComponentName","matches","pattern","pruneCache","keepAliveInstance","pruneCacheEntry","patternTypes","KeepAlive","exclude","cacheVNode","vnodeToCache","keyToCache","created","destroyed","mounted","updated","ref$1","builtInComponents","initGlobalAPI","configDef","util","defineReactive","observable","acceptValue","isEnumeratedAttr","isValidContentEditableValue","convertEnumeratedValue","isFalsyAttrValue","isBooleanAttr","xlinkNS","isXlink","getXlinkProp","genClassForVnode","childNode","mergeClassData","renderClass","staticClass","dynamicClass","stringifyClass","stringifyArray","stringifyObject","stringified","namespaceMap","svg","math","isHTMLTag","isSVG","unknownElementCache","HTMLUnknownElement","isTextInputType","query","selected","querySelector","createElement$1","multiple","namespace","insertBefore","newNode","referenceNode","setTextContent","setStyleScope","nodeOps","registerRef","isRemoval","refs","refInFor","emptyNode","sameVnode","sameInputType","typeA","typeB","createKeyToOldIdx","beginIdx","endIdx","createPatchFunction","backend","modules","emptyNodeAt","createRmCb","childElm","removeNode","createElm","insertedVnodeQueue","parentElm","refElm","nested","ownerArray","setScope","createChildren","invokeCreateHooks","isReactivated","initComponent","reactivateComponent","pendingInsert","isPatchable","innerNode","transition","activate","ref$$1","ancestor","addVnodes","startIdx","invokeDestroyHook","removeVnodes","removeAndInvokeRemoveHook","rm","updateChildren","oldCh","newCh","removeOnly","oldKeyToIdx","idxInOld","vnodeToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","canMove","patchVnode","findIdxInOld","hydrate","postpatch","invokeInsertHook","initial","isRenderedModule","inVPre","hasChildNodes","childrenMatch","fullInvoke","isInitialPatch","isRealElement","hasAttribute","removeAttribute","oldElm","_leaveCb","patchable","i$2","updateDirectives","oldDir","dir","isCreate","isDestroy","oldDirs","normalizeDirectives$1","newDirs","dirsWithInsert","dirsWithPostpatch","oldArg","callHook$1","componentUpdated","callInsert","emptyModifiers","modifiers","getRawDirName","rawName","baseModules","updateAttrs","inheritAttrs","oldAttrs","setAttr","removeAttributeNS","isInPre","baseSetAttr","setAttributeNS","__ieph","blocker","stopImmediatePropagation","updateClass","oldData","cls","transitionClass","_transitionClasses","_prevClass","target$1","klass","RANGE_TOKEN","CHECKBOX_RADIO_TOKEN","normalizeEvents","change","createOnceHandler$1","remove$2","useMicrotaskFix","add$1","attachedTimestamp","_wrapper","currentTarget","ownerDocument","updateDOMListeners","svgContainer","events","updateDOMProps","oldProps","_value","strCur","shouldUpdateValue","checkVal","composing","isNotInFocusAndDirty","isDirtyWithModifiers","notInFocus","activeElement","_vModifiers","number","trim","parseStyleText","cssText","listDelimiter","propertyDelimiter","normalizeStyleData","normalizeStyleBinding","staticStyle","bindingStyle","getStyle","checkChild","styleData","emptyStyle","cssVarRE","importantRE","setProp","setProperty","normalizedName","vendorNames","capName","updateStyle","oldStaticStyle","oldStyleBinding","normalizedStyle","oldStyle","newStyle","whitespaceRE","getAttribute","tar","resolveTransition","css","autoCssTransition","enterClass","enterToClass","enterActiveClass","leaveClass","leaveToClass","leaveActiveClass","hasTransition","TRANSITION","ANIMATION","transitionProp","transitionEndEvent","animationProp","animationEndEvent","ontransitionend","onwebkittransitionend","onanimationend","onwebkitanimationend","raf","requestAnimationFrame","nextFrame","addTransitionClass","transitionClasses","removeTransitionClass","whenTransitionEnds","expectedType","getTransitionInfo","propCount","ended","onEnd","transformRE","styles","getComputedStyle","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","hasTransform","delays","durations","toMs","enter","toggleDisplay","cancelled","_enterCb","appearClass","appearToClass","appearActiveClass","beforeEnter","afterEnter","enterCancelled","beforeAppear","appear","afterAppear","appearCancelled","duration","transitionNode","isAppear","startClass","activeClass","toClass","beforeEnterHook","enterHook","afterEnterHook","enterCancelledHook","explicitEnterDuration","expectsCSS","userWantsControl","getHookArgumentsLength","show","pendingNode","_pending","isValidDuration","leave","beforeLeave","afterLeave","leaveCancelled","delayLeave","explicitLeaveDuration","performLeave","invokerFns","_enter","platformModules","patch","vmodel","trigger","directive","binding","_vOptions","setSelected","onCompositionStart","onCompositionEnd","prevOptions","curOptions","some","needReset","hasNoMatchingOption","actuallySetSelected","isMultiple","option","selectedIndex","initEvent","locateNode","transition$$1","originalDisplay","__vOriginalDisplay","unbind","platformDirectives","transitionProps","getRealChild","compOptions","extractTransitionData","placeholder","rawChild","hasParentTransition","isSameChild","oldChild","isNotTextNode","isVShowDirective","Transition","_leaving","oldRawChild","delayedLeave","moveClass","TransitionGroup","beforeMount","kept","prevChildren","rawChildren","transitionData","removed","c$1","pos","getBoundingClientRect","hasMove","callPendingCbs","recordPosition","applyTranslation","_reflow","offsetHeight","moved","transform","WebkitTransform","transitionDuration","_moveCb","propertyName","_hasMove","cloneNode","newPos","oldPos","dx","left","dy","platformComponents","numberRegexp","tuples","parts","srid","$","crs","properties","white","multicoords","elem","depth","rings","pointer","coords","pt","coordinates","multipoint","newCoordsFormat","multilinestring","linestring","multipolygon","geometrycollection","geometry","geometries","gj","pairWKT","ringWKT","ringsWKT","wrapParens","multiRingsWKT","_isObject","_isString","_isUndefined","_isNumber","_isBoolean","_isDate","DataObjectParser","$data","$path","$value","parentKey","pathList","grandParent","grandParentKey","addObj","$obj","paths","propertyIsEnumerable","transpose","$flat","parser","untranspose","$structured","structuredData","$isIndex","createMapHandler","$name","$item","$i","modifiedName","subArray","subObject","flatArray","flatObj","nextName","dsv","sexagesimal","latRegex","lonRegex","guessHeader","row","regexp","score","guessLatHeader","guessLonHeader","isLat","isLon","keyCount","autoDelimiter","delimiter","dsvFormat","arity","deleteColumns","columns","auto","csv2geojson","latfield","lonfield","features","featurecollection","parsed","errors","noGeometry","lonf","latf","lonk","latk","includeLatLon","toLine","line","reduce","aggregatedProperties","newFeature","toPolygon","csv","csvParse","tsv","tsvParse","arch","execPath","pid","browser","argv","cwd","chdir","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","dims","search","formatPair","lon","dim","dms","coordToDMS","whole","minutes","seconds","fraction","fractionMinutes","one","two","swapdim","KEYWORDS","LITERALS","TYPES","ERROR_TYPES","BUILT_IN_GLOBALS","BUILT_IN_VARIABLES","BUILT_INS","lookahead","javascript","hasClosingTag","after","IDENT_RE$1","FRAGMENT","XML_TAG","isTrulyOpeningTag","afterMatchIndex","nextChar","KEYWORDS$1","literal","built_in","decimalDigits","frac","decimalInteger","NUMBER","SUBST","HTML_TEMPLATE","CSS_TEMPLATE","TEMPLATE_STRING","JSDOC_COMMENT","SUBST_INTERNALS","SUBST_AND_COMMENTS","PARAMS_CONTAINS","PARAMS","label","dragEl","parentEl","ghostEl","cloneEl","rootEl","nextEl","lastDownEl","scrollEl","scrollParentEl","scrollCustomFn","oldIndex","newIndex","activeGroup","putSortable","pointerElemChangedInterval","lastPointerElemX","lastPointerElemY","tapEvt","touchEvt","lastTarget","lastDirection","lastMode","targetMoveDistance","ghostRelativeParent","realDragElRect","autoScrolls","scrolling","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","ghostRelativeParentInitialScroll","R_SPACE","expando","win","jQuery","Zepto","Polymer","captureMode","IE11OrLess","Edge","FireFox","Safari","IOS","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","pointerEvents","_silent","_alignedSilent","min","savedInputChecked","_detectDirection","elCSS","_css","elWidth","width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","child1","_getChild","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginRight","_getRect","secondChildWidth","flexDirection","gridTemplateColumns","float","touchingSideChild2","_detectNearestEmptySortable","_lastChild","rect","threshold","emptyInsertThreshold","insideHorizontally","right","insideVertically","bottom","_isClientInRowColumn","axis","targetRect","targetS1Opp","targetS2Opp","mouseOnOppAxis","_isElInRowColumn","el1","el2","el1Rect","el2Rect","el1S1Opp","el1S2Opp","el1OppLength","height","el2S1Opp","el2S2Opp","el2OppLength","_getParentAutoScrollElement","includeSelf","_getWindowScrollingElement","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","overflowX","overflowY","documentElement","scrollingElement","_scrollBy","scrollLeft","scrollTop","_autoScroll","_throttle","evt","isFallback","scroll","_this","sens","scrollSensitivity","speed","scrollSpeed","winScroller","scrollThisInstance","_clearAutoScrolls","scrollFn","layersOut","currentParent","vx","vy","canScrollX","canScrollY","scrollPosX","scrollPosY","clearInterval","setInterval","Sortable","_emulateDragOver","scrollOffsetY","scrollOffsetX","bubbleScroll","autoScroll","_prepareGroup","toFn","pull","sameGroup","group","otherGroup","originalGroup","checkPull","checkPut","put","revertClone","_checkAlignment","_computeIsAligned","_isTrueParentSortable","trueParent","_artificalBubble","sortable","originalEvt","nextParent","_extend","artificialBubble","_hideGhostForTarget","_unhideGhostForTarget","_throttleTimeout","nearestEmptyInsertDetectEvent","nearest","_onDragOver","defaults","disabled","store","handle","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","animation","easing","setData","dataTransfer","dropBubble","dragoverBubble","dataIdAttr","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","nativeDraggable","_on","_onTapStart","_closest","selector","includeCTX","_matches","_getParentOrHost","host","_globalDragOver","dropEffect","cancelable","_off","_toggleClass","defaultView","currentStyle","_matrix","appliedTransforms","DOMMatrix","WebKitCSSMatrix","CSSMatrix","_find","getElementsByTagName","_dispatchEvent","targetEl","toEl","fromEl","startIndex","onName","CustomEvent","bubbles","pullMode","lastPutMode","_onMove","dragRect","willInsertAfter","retVal","onMoveFn","onMove","dragged","draggedRect","related","relatedRect","_disableDraggable","_unsilent","childNum","currentChild","lastElementChild","previousElementSibling","_ghostIsLast","elRect","mouseOnAxis","targetS2","spacer","_getSwapDirection","isLastTarget","targetLength","targetS1","invert","_getInsertDirection","dragElIndex","targetIndex","_generateId","sum","msMatchesSelector","webkitMatchesSelector","ms","_cancelThrottle","dst","_clone","dom","_saveInputCheckedState","inputs","idx","checked","_nextTick","_cancelNextTick","adjustForTransform","adjustForFixed","innerHeight","innerWidth","containerRect","matrix","scaleX","scaleY","_isScrolledPast","side","elSide","visible","parentSide","_getRelativeScrollOffset","offsetLeft","elementFromPoint","sortableMouseAligned","_getDirection","originalTarget","composedPath","isContentEditable","criteria","_prepareDragStart","_handleAutoScroll","fallback","ogElemScroller","newElem","dragStartFn","_lastX","_lastY","_disableDelayedDragEvents","_triggerDragStart","_onDrop","_disableDelayedDrag","_delayedDragTouchMoveHandler","_dragStartTimer","_onDragStart","selection","empty","getSelection","removeAllRanges","_dragStarted","_appendGhost","_nulling","forAutoScroll","relativeScrollOffset","translate3d","ghostRelativeParentRect","_hideClone","_cloneId","_loopId","effectAllowed","_dragStartId","revert","activeSortable","isOwner","canSort","animated","completed","elLastChild","_showClone","changed","targetBeforeFirstSwap","aligned","differentLevel","side1","scrolledPastTop","scrollBefore","nextElementSibling","moveVector","insertion","_animate","prevRect","currentRect","offsetWidth","_offUpEvents","handleEvent","order","closest","cloneHidden","utils","throttle","toggleClass","cancelNextTick","detectDirection","getChild","undefinedType","logMethods","bindMethod","methodName","traceForIE","trace","realMethod","replaceLoggingMethods","level","loggerName","methodFactory","debug","enableLoggingWhenConsoleArrives","defaultMethodFactory","Logger","defaultLevel","currentLevel","storageKey","persistLevelIfPossible","levelNum","levelName","localStorage","cookie","encodeURIComponent","getPersistedLevel","storedLevel","levels","getLevel","setLevel","persist","SILENT","setDefaultLevel","enableAll","TRACE","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","getLoggers","encode","coordinate","round","output","fromCharCode","flipped","decode","latitude_change","longitude_change","byte","fromGeoJSON","geojson","toGeoJSON","dest","_extends","ppt","htmlns","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","_features","feature","Node","_xmlEncoder","_visitNode","Document","_nsMap","_onUpdateChild","newChild","cs","_removeChild","previous","previousSibling","lastChild","_insertBefore","nextChild","cp","newFirst","newLast","_appendSingleChild","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","nodeSerializeToString","isHtml","nodeFilter","refNode","lookupPrefix","visibleNamespaces","serializeToString","needNamespaceDefine","isHTML","pubid","sysid","internalSubset","importNode","node2","attrs2","_ownerElement","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","versions","qualifiedName","doctype","refChild","replaceChild","appendData","isSupported","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importedNode","getElementById","rtv","createDocumentFragment","createAttribute","specified","createEntityReference","pl","getAttributeNode","removeAttributeNode","setAttributeNodeNS","getAttributeNodeNS","hasAttributeNS","getAttributeNS","getElementsByTagNameNS","substringData","insertData","replaceData","deleteData","splitText","newText","getTextContent","$$length","LogLevels","__importDefault","mod","es6_object_assign_1","vue_logger_1","transformAbsolute","x0","y0","kx","scale","ky","translate","transformRelative","x1","y1","array","bisect","lo","hi","mid","topology","feature$1","absolute","arcs","arc","points","ring","geometryType","MultiPoint","LineString","MultiLineString","MultiPolygon","stitchArcs","stitchedArcs","fragmentByStart","fragmentByEnd","fragments","emptyIndex","ends","p1","p0","dp","fg","gf","mesh","meshArcs","geomsByArc","geom","geoms","cartesianTriangleArea","triangle","area","merge","mergeArcs","polygonsByArc","polygons","register","ring$$","neighbors","ki","indexesByArc","indexes","ij","ik","compareArea","minAreaHeap","heap","size","up","down","presimplify","triangleArea","relative","triangles","maxArea","Infinity","__spreadArrays","il","jl","log_levels_1","VueLogger","errorMessage","logLevels","getDefaultOptions","isValidOptions","$log","initLoggerInstance","logLevel","stringifyArguments","showLogLevel","showConsoleColors","isEnabled","showMethodName","getMethodName","stackTrace","methodNamePrefix","logLevelPrefix","formattedArguments","logMessage","printLogMessage","DEBUG","encodeReserveRE","encodeReserveReplacer","commaRE","decodeURIComponent","resolveQuery","extraQuery","_parseQuery","parsedQuery","parseQuery","castQueryParamValue","param","stringifyQuery","val2","trailingSlashRE","createRoute","record","redirectedFrom","router","route","meta","fullPath","getFullPath","formatMatch","START","_stringifyQuery","isSameRoute","onlyPath","isObjectEqual","aKeys","bKeys","aVal","bKey","bVal","isIncludedRoute","queryIncludes","handleRouteEntered","instances","instance","enteredCbs","View","routerView","$route","_routerViewCache","inactive","_routerRoot","vnodeData","routerViewDepth","cachedData","cachedComponent","configProps","fillPropsinData","registerRouteInstance","propsToPass","resolveProps","resolvePath","append","firstChar","segment","hashIndex","queryIndex","cleanPath","isarray","pathToRegexp_1","pathToRegexp","parse_1","compile_1","tokensToFunction_1","tokensToFunction","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","tokens","defaultDelimiter","escaped","modifier","asterisk","partial","repeat","optional","escapeGroup","escapeString","encodeURIComponentPretty","encodeURI","encodeAsterisk","flags","pretty","token","attachKeys","sensitive","regexpToRegexp","groups","arrayToRegexp","stringToRegexp","strict","endsWithDelimiter","regexpCompileCache","fillParams","routeMsg","filler","pathMatch","normalizeLocation","params$1","rawPath","parsedPath","basePath","_Vue","toTypes","eventTypes","Link","required","custom","exact","exactPath","exactActiveClass","ariaCurrentValue","$router","globalActiveClass","linkActiveClass","globalExactActiveClass","linkExactActiveClass","activeClassFallback","exactActiveClassFallback","compareTarget","guardEvent","click","scopedSlot","navigate","isActive","isExactActive","findAnchor","aData","handler$1","event$1","aAttrs","metaKey","ctrlKey","shiftKey","defaultPrevented","installed","registerInstance","callVal","_router","history","_route","beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate","createRouteMap","routes","oldPathList","oldPathMap","oldNameMap","parentRoute","pathMap","nameMap","addRouteRecord","matchAs","pathToRegexpOptions","normalizedPath","normalizePath","caseSensitive","compileRouteRegex","redirect","childMatchAs","aliasRoute","createMatcher","addRoutes","addRoute","parentOrRoute","getRoutes","currentRoute","_createRoute","paramNames","record$1","matchRoute","originalRedirect","resolveRecordPath","resolvedPath","aliasedPath","aliasedMatch","aliasedRecord","Time","genStateKey","_key","getStateKey","setStateKey","positionStore","setupScroll","scrollRestoration","protocolAndPath","protocol","absolutePath","stateCopy","replaceState","handlePopState","handleScroll","isPop","app","behavior","scrollBehavior","getScrollPosition","shouldScroll","scrollToPosition","saveScrollPosition","pageXOffset","pageYOffset","getElementPosition","docEl","docRect","isValidPosition","isNumber","normalizePosition","normalizeOffset","hashStartsWithNumberRE","scrollTo","supportsPushState","ua","pushState","url","runQueue","step","NavigationFailureType","redirected","aborted","duplicated","createNavigationRedirectedError","createRouterError","stringifyRoute","createNavigationDuplicatedError","createNavigationCancelledError","createNavigationAbortedError","_isRouter","propertiesToLog","isError","isNavigationFailure","errorType","resolveAsyncComponents","hasAsync","flatMapComponents","resolvedDef","isESModule","flatten","History","normalizeBase","ready","readyCbs","readyErrorCbs","errorCbs","baseEl","resolveQueue","activated","deactivated","extractGuards","records","guards","guard","extractGuard","extractLeaveGuards","bindGuard","extractUpdateHooks","extractEnterGuards","bindEnterGuard","listen","onReady","errorCb","onError","transitionTo","onComplete","onAbort","prev","confirmTransition","updateRoute","ensureURL","afterHooks","abort","lastRouteIndex","lastCurrentIndex","beforeHooks","enterGuards","resolveHooks","setupListeners","cleanupListener","HTML5History","_startLocation","getLocation","expectScroll","supportsScroll","handleRoutingEvent","go","fromRoute","getCurrentLocation","pathname","pathLowerCase","baseLowerCase","HashHistory","checkFallback","ensureSlash","getHash","replaceHash","eventType","pushHash","getUrl","AbstractHistory","VueRouter","apps","registerHook","createHref","handleInitialScroll","routeOrError","beforeEach","beforeResolve","afterEach","back","forward","getMatchedComponents","normalizedTo","START_LOCATION","proj4","Proj","_isProj4Obj","inverse","Projection","bounds","isP4","_proj","_projFromCodeDef","unbounded","point2","LatLng","defs","urn","CRS","transformation","Transformation","proj","srsCode","projection","scales","_scales","resolutions","infinite","zoom","baseScale","nextScale","scaleDiff","zDiff","iZoom","nextZoom","downScale","_closestElement","downZoom","Earth","R","low","GeoJSON","_callLevel","addData","coordsToLatLng","geoJson","ImageOverlay","_projectedBounds","_animateZoom","getZoomScale","northWest","_projectedToNewLayerPoint","center","setTransform","_image","_reset","getZoom","pixelOrigin","getPixelOrigin","_transform","_subtract","getSize","viewHalf","newTopLeft","_round","topLeft","_getMapPanePos","imageOverlay","firstSource","nextSource","keysArray","nextIndex","nextKey","desc","getGlobal","fetch","Headers","Request","Config","configuration","isConfigLoaded","scope","Gp","getLayerId","layerName","service","layerId","servicePartsLayer","servicePartsService","getLayerParams","apiKey","layerConf","apiKeys","getServerUrl","getServiceParams","getDefaultStyle","getDefaultFormat","getDefaultProjection","minScale","getMinScaleDenominator","maxScale","getMaxScaleDenominator","extent","getBBOX","legends","getLegends","metadata","getMetadata","originators","getOriginators","getTitle","description","getDescription","quicklookUrl","getQuicklookUrl","wmtsOptions","tileMatrixSetLimits","TMSLink","getTMSID","tmsConf","getTMSConf","matrixOrigin","getTopLeftCorner","nativeResolutions","matrixIds","tileMatrices","resource","keyIndex","getResolutions","getTileMatrix","tmsName","tms","getGlobalConstraints","WGS84","GOOGLE","PJD_3PARAM","PJD_7PARAM","PJD_GRIDSHIFT","PJD_WGS84","PJD_NODATUM","SRS_WGS84_SEMIMAJOR","SRS_WGS84_SEMIMINOR","SRS_WGS84_ESQUARED","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","to_meter","ignoredChar","testkey","processedKey","lkey","paramName","paramVal","paramOutname","paramObj","defData","datum","rf","lat_0","lat0","lat_1","lat1","lat_2","lat2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","alpha","gamma","rectified_grid_angle","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","units","unit","from_greenwich","pm","nadgrids","datumCode","legalAxis","approx","NEUTRAL","KEYWORD","QUOTED","AFTERQUOTE","ENDED","whitespace","latin","endThings","digets","Parser","place","currentObject","parseString","txt","mapit","thing","newObj","sExpr","convert","readCharicter","char","neutral","quoted","afterquote","word","afterItem","newObjects","rename","outName","inName","d2r","cleanWKT","wkt","projName","PROJECTION","AXIS","axisOrder","ii","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","ratio","sphere","ellps","TOWGS84","renamer","lisp","that","EPSG","ESRI","IAU2000","testObj","testDef","codeWords","testWKT","codes","checkMercator","auth","checkProjStr","testProj","maybeProjStr","destination","con","eccent","sinphi","cosphi","sign","com","tan","phi","dphi","eccnth","atan","ts","es","msfnz","adjust_lon","tsfnz","exp","phi2z","names","projs","merc","longlat","projStore","ellipseName","eccentricity","a2","b2","ep2","ellipse","datum_type","grids","wgs84","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","loadedNadgrids","nadgrid","view","DataView","isLittleEndian","detectLittleEndian","header","readHeader","nSubgrids","subgrids","readSubgrids","getNadgrids","parseNadgridString","mandatory","grid","isNull","secondsToRadians","nFields","getInt32","nSubgridFields","shiftType","decodeString","fromSemiMajorAxis","getFloat64","fromSemiMinorAxis","toSemiMajorAxis","toSemiMinorAxis","Uint8Array","gridOffset","subHeader","readGridHeader","readGridNodes","lngColumnCount","upperLongitude","lowerLongitude","longitudeInterval","latColumnCount","upperLatitude","lowerLatitude","latitudeInterval","ll","lim","gridNodeCount","cvs","mapNodes","longitudeShift","latitudeShift","gridHeader","nodesOffset","gridRecordLength","gridShiftRecords","getFloat32","latitudeAccuracy","longitudeAccuracy","json","parseCode","ourProj","projections","datumDef","sphere_","ecc","datumObj","compareDatums","geodeticToGeocentric","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","z","geocentricToGeodetic","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","genau","genau2","maxiter","X","Y","Z","atan2","geocentricToWgs84","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricFromWgs84","x_tmp","y_tmp","z_tmp","checkParams","source_a","source_es","gridShiftCode","applyGridShift","dest_a","dest_b","dest_es","destGridShiftResult","NaN","attemptedGrids","subgrid","epsilon","minX","minY","maxX","maxY","applySubgridShift","pin","ct","tb","nadInterpolate","dif","tol","inx","indx","frct","f00","f10","f11","f01","m11","m10","m00","m01","xin","yin","zin","denorm","checkCoord","num","checkNotWGS","enforceAxis","toPoint","checkSanity","adjust_axis","datum_transform","transformer","transformedArray","checkProj","oProj","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","I","O","accuracy","LLtoUTM","mgrs","bbox","UTMtoLL","degToRad","deg","radToDeg","rad","LongOrigin","eccPrimeSquared","N","T","C","A","M","LongOriginRad","ZoneNumber","Lat","Long","eccSquared","LatRad","LongRad","UTMEasting","UTMNorthing","northing","easting","zoneNumber","zoneLetter","getLetterDesignator","utm","N1","T1","C1","R1","D","mu","phi1Rad","e1","topRight","LetterDesignator","seasting","snorthing","get100kID","setParm","get100kSetForZone","setColumn","setRow","getLetter100kID","column","parm","colOrigin","rowOrigin","colInt","rowInt","rollover","twoLetter","mgrsString","testChar","hunK","sb","east100k","getEastingFromChar","north100k","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","curCol","eastingValue","rewindMarker","curRow","northingValue","fromMGRS","mgrsStr","toMGRS","C00","C02","C04","C06","C08","C22","C44","C46","C48","C66","C68","C88","en","cphi","sphi","MAX_ITER","pj_mlfn","pj_enfn","ml0","delta_lon","sin_phi","cos_phi","al","als","tq","ml","acos","pj_inv_mlfn","tan_phi","ds","temp","asin","log1py","hypot","cos_2B","B","pp","h1","h2","hr","arg_r","hr1","hr2","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","arg_i","cosh_arg_i","cosh","hi1","tmerc","cgb","cbg","utg","gtu","np","Qn","gatg","Zb","clens","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","asinhy","clens_cmplx","dependsOn","adjust_zone","etmerc","esinp","rc","phic0","ratexp","K","srat","DEL_TOL","gauss","sinc0","cosc0","R2","sinc","cosc","cosl","rho","ssfn_","phit","eccen","coslat0","sinlat0","cons","ms1","X0","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phy0","lambda0","sinPhy0","semiMajorAxis","invF","flattening","e2","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","TOL","isTypeA","typeAProjections","projectionName","cosph0","F","H","sinph0","J","gamma0","lamc","lam1","lam2","phi1","phi2","alpha_c","no_off","no_rot","alp","gam","one_es","E","lam0","pi","singam","cosgam","sinrot","cosrot","rB","ArB","BrA","u_0","v_pole_n","v_pole_s","U","V","W","u","Qp","Sp","Tp","Vp","Up","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","f0","rh1","theta","s45","s90","fi0","alfa","uq","u0","n0","s0","ro0","ad","gfi","deltav","eps","ro","czech","fi1","ok","e0","e3","e0fn","e1fn","e2fn","e3fn","mlfn","lam","nl","gN","tl","asq","cl","dd","ml1","imlfn","nl1","rl1","tl1","dl","dsq","adjust_lat","S_POLE","N_POLE","EQUIT","OBLIQ","qp","qsfnz","mmf","apa","authset","rq","xmf","ymf","sinb1","cosb1","coslam","sinlam","q","sinb","cosb","cCe","sCe","ab","cosz","sinz","authlat","P00","P01","P02","P10","P11","P20","APA","beta","sin_po","cos_po","t1","qs1","t2","qs2","t3","qs0","ns0","qs","phi1z","asinz","eccnts","sin_p14","cos_p14","infinity_dist","coslon","ksp","iqsfnz","dlat","bl","tanphi","mln","mlnp","ma","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_re1","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_re1","z_n_im1","delta_x","delta_y","z_n_re","z_n_im","num_re","num_im","den_re","den_im","den2","d_psi_n","C_y","C_x","delta_theta","ml2","sinth","costh","gsq","msq","xx","yy","xys","c1","c2","c3","a1","m1","th1","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","GH","Hs","kp","cos_c","s2","s3","s4","s5","cosAz","Ee","sinpsi","FACE_ENUM","FRONT","RIGHT","BACK","LEFT","TOP","BOTTOM","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","face","one_minus_f","one_minus_f_squared","xy","sinlon","qsc_shift_lon_origin","qsc_fwd_equat_face_theta","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","slon","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","poly3_der","newton_rapshon","f_df","max_err","iters","upd","azi","degrees","tilt","pn1","rp","pfact","omega","cg","sg","cw","sw","yt","ba","bm","bq","sterea","stere","somerc","omerc","lcc","krovak","cass","laea","aea","gnom","cea","eqc","nzmg","mill","sinu","moll","eqdc","vandg","aeqd","ortho","qsc","robin","geocent","tpers","defaultDatum","serializer","removeSpace","trimSpace","splitSpace","okhash","attrf","get1","norm","numarray","clean","nodeVal","coord1","coordPair","ele","heartRate","time","fc","xml2str","kml","styleIndex","geotypes","placemarks","styleMaps","getPlacemark","kmlColor","gxCoord","gxCoords","elems","times","timeElems","getGeometry","geomNode","geomNodes","coordTimes","track","geomsAndTimes","styleUrl","timeSpan","extendedData","lineStyle","polyStyle","styleHash","timespan","linestyles","polystyles","pcolor","popacity","outline","datas","simpleDatas","gpx","tracks","waypoints","getTrack","getRoute","getPoint","getPoints","pointname","pts","heartRates","getProperties","routeObj","sym","xhr","wellknown","topojson","setGeoJSON","geojsonLoad","customLayer","responseText","topojsonLoad","topojsonParse","csvLoad","avoidReady","gpxLoad","gpxParse","responseXML","kmlLoad","kmlParse","wktLoad","wktParse","polylineLoad","polylineParse","onparse","parseXML","nameStartChar","nameChar","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","entityReplacer","appendText","xt","lineEnd","linePattern","lineStart","parseStack","currentNSMap","closeMap","tagStart","localNSMap","endMatch","endIgnoreCaseMach","parseInstruction","parseDCC","ElementAttributes","parseElementStartPart","closed","fixSelfClosed","locator2","copyLocator","parseHtmlSpecialContent","attrName","setTagName","nsp","nsPrefix","_copy","elStartEnd","elEndStart","lastIndexOf","matchs","endDTD","_set_proto_","thiz","reg","getLocalName","SelectorID","generate","timestamp","uuid","LayerSwitcherDOM","_createDraggableElement","elementDraggable","_onDragAndDropLayerClick","_addUID","_createMainContainerElement","_createMainLayersShowElement","_createMainLayersElement","div","_createMainPictoElement","htmlFor","spanOpen","getElementsByClassName","spanClose","_createMainInfoElement","_createContainerLayerElement","_createBasicToolElement","_createAdvancedToolShowElement","_createAdvancedToolElement","_createBasicToolNameElement","_createBasicToolVisibilityElement","_onVisibilityLayerClick","attachEvent","_createAdvancedToolDeleteElement","_createAdvancedToolInformationElement","_createAdvancedToolOpacityElement","_onDropLayerClick","_onOpenLayerInfoClick","divO","_onChangeLayerOpacity","divC","_createContainerLayerInfoElement","quick","refquick","onCloseClick","mtd","mtdtitle","urlmtd","mtdlink","refmtd","lgd","lgdtitle","maxScaleDenominator","minScaleDenominator","urllgd","lgdlink","reflgd","LayerSwitcher","Layers","collapsed","autoZIndex","_hasLayersConfig","_layersConfig","_layers","_lastZIndex","_addLayer","layersMap","layersKeys","setZIndex","addOverlay","hasLayer","_layer","_visibility","_updateVisibilityLayer","_initLayout","_onLayerChange","overlay","_geoportal_id","_leaflet_id","layerConfig","_title","_description","_legends","_metadata","_quicklookUrl","setVisible","divL","_overlaysList","picto","divI","disableClickPropagation","disableScrollPropagation","_onOutOfRangeLayerZoom","getPosition","borderBottomRightRadius","borderBottomLeftRadius","layersId","ia","ib","_addItem","minZoom","maxZoom","_handlingClick","_refocusOnMap","_updateVisibilityDOMLayer","layerIdx","visibilityElement","visibilityValue","_updateOpacityDOMLayer","opacityValue","opacityElement","visibilityOrder","layerElement","layerOrder","opacityId","divId","panel","infoLayer","matchesLayers","cfg","_config","setVisibility","logname","MessagesResources","PARAM_MISSING","PARAM_EMPTY","PARAM_TYPE","PARAM_FORMAT","PARAM_NOT_SUPPORT","PARAM_NOT_SUPPORT_NODEJS","PARAM_UNKNOWN","SERVICE_REQUEST_BUILD","SERVICE_REQUEST_EMPTY","SERVICE_RESPONSE_EXCEPTION","SERVICE_RESPONSE_EXCEPTION_2","SERVICE_RESPONSE_ANALYSE","SERVICE_RESPONSE_ANALYSE_2","SERVICE_RESPONSE_EMPTY","SERVICE_RESPONSE_EMPTY_2","SERVICE_RESPONSE_FORMAT","SERVICE_RESPONSE_FORMAT_2","SERVICE_RESPONSE_FORMAT_3","CLASS_CONSTRUCTOR","getMessage","clef","parametres","ErrorService","TYPE_UNKERR","TYPE_SRVERR","TYPE_USEERR","Helper","normalyzeParameters","myParams","tabParams","normalyzeUrl","myUrl","indent","XHR","settings","timeOut","content","headers","referer","__call","onResponse","onFailure","__callJSON","__callXML","corps","hXHR","nodefetch","Referer","statusText","overrideMimeType","onTimeOutTrigger","setRequestHeader","ontimeout","onreadystatechange","responseURL","data4xhr","XDomainRequest","data4xdr","xmlDoc","ActiveXObject","loadXML","JSONP","callbackId","callbackSuffix","urlHasCallbackKey","urlHasCallbackName","callbackName","HasCallbackName","onTimeOut","_deleteScript","_createScript","scriptu","scripto","script","Protocol","wrap","nocache","HOSTNAME","DefaultUrlService","ssl","_protocol","Alti","wps","ProcessIsoCurve","AutoComplete","ReverseGeocode","AutoConf","aggregate","Geocode","Route","CommonService","opt","proxyURL","httpMethod","rawResponse","onSuccess","serverUrl","bOnSuccess","urlByDefault","CLASSNAME","outputFormat","request","buildRequest","onBuildRequest","callService","onCallService","analyzeResponse","onAnalyzeResponse","success","strUrlProxified","strData","bUrlProxified","contentType","http","onBeforeParse","newResponse","AltiRequest","positions","setPositions","lstPosition","getPositions","addPositions","getLon","lstLon","getLat","lstLat","AltiElevationRequest","zonly","_zonly","AltiProfilRequest","sampling","_sampling","AltiRequestREST","DataObject","requestString","template","profil","post","processRequestString","__addDataInputs","myTemplate","tmpl","WPS","paramservice","paramversion","paramidentifier","identifier","paramrawdataoutput","rawdataoutput","paramrequest","namespaceByDefault","schemaLocationByDefault","__addDataInput","setMethod","getMethod","AltiRequestWPS","rqstWPS","AltiRequestFactory","bOnError","api","myReq","XML","xmlString","reader","__getXMLDOC","setReader","errorMsg","parseError","errorCode","linepos","parsererror","__getRootNode","__readDefault","dataAttributes","__getAttributes","childData","nodeAttributes","attribute","getXMLString","setXMLString","getReader","read","getXMLDoc","setXMLDoc","parserOutput","AltiResponse","elevations","Elevation","AltiResponseReader","READERS","altiResponse","elevation","acc","exceptionreport","exceptionReport","exception","exceptionCode","AltiResponseFactory","JSONResponse","errorMess","lstUrlByDefault","urlFound","extension","AutoConfResponse","generalOptions","defaultGMLGFIStyle","theme","wgs84Resolutions","territories","tileMatrixSets","services","isConfLoaded","getLayersId","getLayersConf","layersIdArray","lyrId","getLayerConf","getTileMatrixSets","tmsID","getTerritories","getTerritoryConf","territoryID","getServices","getServiceConf","serviceID","Constraint","temporalExtent","Format","Layer","getName","defaultProjection","getProjections","additionalProjections","globalConstraint","tileMatrixSetLink","serviceParams","getStyles","getThematics","thematics","formats","getConstraints","constraints","getDimensions","dimensions","getAggregatedLayers","isAggregate","aggregatedLayers","Legend","Metadata","Originator","attribution","logo","Service","Style","Territory","isDefault","defaultCRS","additionalCRS","geoBBOX","geoCenter","defaultOptions","resolution","defaultLayers","Thematic","inspire","TileMatrixSet","getMatrixIds","getProjection","getTileMatrices","topLeftCorner","matrices","TileMatrix","matrixId","matrixHeight","matrixWidth","scaleDenominator","tileHeight","tileWidth","getScaleDenominator","getTileHeight","getTileWidth","getMatrixHeight","getMatrixWidth","TileMatrixLimit","minTileRow","maxTileRow","minTileCol","maxTileCol","AutoConfResponseReader","__getChildNodes","childName","childPrefix","baseName","DEFAULTPREFIX","__getChildValue","__checkServiceAttributes","viewContextNode","xlsAttributes","att","VERSION","NAMESPACES","SCHEMALOCATION","gpp","ows","sld","wmts","xlink","xsi","ViewContext","Title","titleNode","lyr","Abstract","Server","serverId","OnlineResource","LayerList","layerListNode","tmsLink","layerNode","lyrData","hidden","queryable","serviceid","resourceId","Name","SRS","Dimension","visibilityRange","visibilityMode","geometricType","noDataValue","Theme","themeNode","defaultGMLGFIStyleUrl","territoryNode","tid","territory","AdditionalCRS","addCRS","DefaultLayer","BoundingBox","minT","maxT","multiConstraints","newConstraint","Resolution","Resolutions","resNode","more","constraint","InspireThematic","Attribution","originator","Logo","LegendURL","legend","QuickLook","MetadataURL","Key","Identifier","SupportedCRS","tmsData","TMS","MinScaleDenominator","MaxScaleDenominator","TileMatrixSetLimits","limits","TileMatrixLimits","limitId","limit","tm","tileMatrix","ScaleDenominator","TopLeftCorner","TileWidth","TileHeight","MatrixWidth","MatrixHeight","serviceException","AutoConfReponseFactory","isEmpty","mergeConfig","GpConfig","bLocal","AutoConfResponseFactory","RequestHeader","srsName","maximumResponses","guid","AbstractService","strRequest","oRequest","oFilter","addRequest","addFilter","XLS","oService","setService","getService","addNamespace","subst","keyNS","bFound","allNS","bService","oHeader","CLASSTYPE","Address","address","freeFormAddress","streetAddress","building","street","postalCode","envelope","tmplFreeFormAddress","tmplBuilding","tmplStreet","tmplStreetAddress","tmplPostalCode","tmplEnvelope","Places","tmplPlace","filters","tmplPlaceCity","city","GeocodeFilterExtension","addFilterExtensions","oGeocodeLocation","getNames","getFilter","getFilters","getAttributs","attributs","attributesList","setPlaceAttributs","placeAttributes","getPlaceAttributs","places","GeocodeRequest","oAddress","addAddress","filterOptions","mFilter","idxe","matchingKey","serviceAttributes","kplace","Position","gml","tmplGmlPoint","tmplGmlFilter","strPoints","lstPoints","Preference","Preferences","tmplPreference","ReverseGeocodeRequest","oPosition","oPreference","addPosition","addPreferences","LocationUtilityService","oLUSRequest","settingsDirect","returnFreeForm","settingsInv","GeocodeLocation","StreetAddress","PositionOfInterest","CadastralParcel","Administratif","DirectGeocodeRequestFactory","oLUS","oXLS","srs","myRequest","GeocodeResponse","locations","GeocodedLocation","matchType","DirectGeocodedLocation","DirectGeocodeResponseReader","XLSNode","xls","xlsext","geocodeResponse","GeocodedAddress","geocodedLocation","GeocodeMatchCode","countrycode","freeform","Building","Street","cadastralParcel","Place","placeType","placeName","municipality","commune","department","insee","quality","ID","IDTR","importance","nature","sheet","section","absorbedCity","arrondissement","prefecture","inseeRegion","inseeDepartment","PostalCode","srvMess","ExceptionReport","Exception","mess","DirectGeocodeReponseFactory","filtersCouldBeNumberList","DirectGeocodeResponseFactory","ReverseGeocodeRequestFactory","ReverseGeocodedLocation","searchCenterDistance","ReverseGeocodeResponseReader","reverseGeocodeResponse","reverseGeocodedLocation","SearchCentreDistance","ExtendedGeocodeMatchCode","ReverseGeocodeReponseFactory","geoEPSG","ReverseGeocodeResponseFactory","AutoCompleteResponse","suggestedLocations","SuggestedLocation","fullText","classification","poi","AutoCompleteResponseFactory","suggestedLocation","country","fulltext","zipcode","types","terr","RouteParamREST","startPoint","endPoint","intermediates","viaPoints","profile","graph","optimization","routePreference","getSteps","distanceUnit","timeUnit","waysAttributes","getIntermediates","getWaysAttributes","getProfile","getDistanceUnit","getOptimization","constraintArray","getParams","RouteRequestREST","oParams","RouteRequestFactory","RouteResponse","totalTime","totalDistance","routeGeometry","routeInstructions","RouteInstruction","instruction","RouteResponseFactory","legs","legSteps","steps","geometryInInstructions","legList","portions","nom_1_droite","toponyme","constraintTunnel","constraintPont","constraintAutoroute","exclusions","constraintType","operator","provideBbox","expectedStartTime","UrlByDefault","ProcessIsoCurveParam","costType","costValue","getDirection","ProcessIsoCurveRequest","postRequest","ProcessIsoCurveResponse","ProcessIsoCurveResponseFactory","smoothing","holes","oIsoCurve","Services","getConfig","autoconfService","getAltitude","altiService","geocode","geocodeService","reverseGeocode","reverseGeocodeService","autoComplete","autoCompleteService","routeService","isoCurve","processIsoCurveService","servicesVersion","servicesDate","date","Protocols","DefaultUrl","GetConfigResponse","IsoCurveResponse","check","_resources","resources","_services","_rightManagement","_resource","_service","_noRightManagement","LocationSelectorDOM","_createLocationPointElement","_createLocationPointLabelElement","labelOrigin","onLocationClearPointClick","_createLocationAutoCompleteteInputElement","inputOrigin","autocomplete","charCode","which","onAutoCompleteSearchText","curr","_createLocationCoordinateInputElement","inputOriginCoord","_createLocationPointerShowInputElement","inputOriginPointer","_createLocationPointerInputElement","labelOriginPointer","onActivateMapPointClick","_createLocationRemovePointElement","divRm","startID","endID","onLocationRemovePointClick","_createLocationAddPointElement","divAdd","lastStage","nbStages","onLocationAddPointClick","_createLocationAutoCompleteResultElement","onAutoCompletedResultsItemClick","_createLocationAutoCompletedLocationElement","GPdisplayCoordinate","id1","id2","PositionFormater","NORTH","SOUTH","EAST","WEST","digitSecond","digitDecimal","digitRadian","roundToDecimal","inputNum","numPoints","multiplier","decimalToRadian","decimalToGrade","decimalToDMS","hemisphere","minutesFromRemainder","secondsFromRemainder","decimalLatToDMS","decimalLonToDMS","DMSToDecimal","ddVal","IconDefault","images","retina","shadow","blue","orange","red","green","_color","_images","iconUrl","shadowUrl","iconRetinaUrl","shadowRetinaUrl","_getIconUrl","LocationSelector","unique","addOption","removeOption","disableReverse","displayInfo","autocompleteOptions","reverseGeocodeOptions","_activeDragAndDrop","_pressedKeyOnDragAndDrop","_inputsContainer","_inputLabelContainer","_inputAutoCompleteContainer","_inputShowPointerContainer","_inputCoordinateContainer","_coordinate","_suggestedContainer","_suggestedLocations","_currentLocation","_checkRightsManagement","getCoordinate","setCoordinate","_displayResultOfCoordinate","getCoordinateInverse","coordinateInv","setMap","_setCursor","_setMarker","_clearResults","_inputLabel","_inputAutoComplete","_inputCoordinate","_inputShowPointer","_inputPointer","_inputAddStage","_inputRemoveStage","_opts","_res","rightManagementRerverse","rightManagementAutoComplete","_setLabel","_setCoordinate","oLatLng","_setPosition","panTo","information","onMouseDownMarker","onStartDragMarker","onDragMarker","onEndDragMarker","popupContent","fields","bindPopup","_clearSuggestedLocation","_requestAutoComplete","_fillAutoCompletedLocationListContainer","childElementCount","_requestReverseGeocode","_displayResultOfLabel","oLocation","onMouseMapClick","unbindPopup","IsoDOM","_createShowIsoElement","_createShowIsoPictoElement","onShowIsoPanelClick","_createIsoPanelElement","_createIsoPanelHeaderElement","divClose","_createIsoPanelFormElement","form","onIsoComputationSubmit","_createIsoWaitingElement","_createIsoPanelFormTypeChoiceElement","_createIsoPanelFormTypeChoiceChronElement","onIsoTypeChoiceChange","_createIsoPanelFormTypeChoiceDistElement","_createIsoPanelFormValueIsochronElement","input1","onIsoValueChronTimeMinuteChange","onIsoValueChronTimeHourChange","label1","input2","label2","_createIsoPanelFormValueIsodistanceElement","onIsoValueDistChange","_createIsoPanelFormModeChoiceElement","_createIsoPanelFormModeChoiceTransportElement","transports","transport","inputCar","onIsoModeTransportChange","labelCar","inputPedestrian","labelPedestrian","_createIsoPanelFormModeChoiceDirectionElement","directions","select","onIsoModeDirectionChange","departureOption","arrivalOption","_createShowIsoExclusionsElement","_createShowIsoExclusionsPictoElement","_createIsoPanelFormExclusionsElement","_createIsoPanelFormExclusionOptionsElement","inputToll","onIsoExclusionsChange","labelToll","inputTunnel","labelTunnel","inputBridge","labelBridge","_createIsoSubmitFormElement","_createIsoFormResetElement","divReset","onIsoResetClick","Isocurve","graphs","toll","tunnel","bridge","isocurveOptions","_isDesktop","_detectSupport","_waitingContainer","_showContainer","_pictoContainer","_formContainer","_submitContainer","_currentTransport","_currentDirection","_currentComputation","_currentTimeHour","_currentTimeMinute","_currentDistance","_currentExclusions","_initTransport","_initComputation","_initDirection","_initExclusions","_currentPoint","_geojsonIso","_waiting","_timer","_currentIsoResults","serviceOptions","exclusion","rightManagementIsochrone","isDesktop","inputShow","_createIsoPanelFormPointElement","isoChronChecked","isoDistChecked","typeChoice","modeChoice","submit","_clear","_timeHourContainer","_timeMinuteContainer","_distanceContainer","iFound","deepEqual","_displayWaitingContainer","_requestIsoCurve","_drawIsoResults","_hideWaitingContainer","_clearIsoResultsGeometry","_geometry","_style","compute","flyTo","MathUtils","modulo","hemispheres","numDigits","normalizedDegrees","dflPrecision","sec","ceil","toInteger","isInteger","toFloat","MousePositionDOM","_createShowMousePositionElement","_createShowMousePositionPictoElement","mapCenterClass","onShowMousePositionClick","_createMousePositionPanelElement","_createMapCenter","_createMousePositionPanelHeaderElement","divTitle","_createMousePositionPanelBasicElement","displayAltitude","displayCoordinates","editCoordinates","currentProjectionUnits","_createMousePositionPanelBasicCoordinateElement","_createMousePositionPanelEditToolsElement","_createMousePositionPanelBasicAltitudeElement","_createCoordinateElement","coordType","readOnly","onMousePositionEditModeClick","valid","validateExtentCoordinate","_createDMSCoordinateElement","dataset","_checkDMSDegrees","_checkDMSElement","span1","span2","option1","divLat","spanLat","arrayCoords","divLon","spanLon","arrayCoords1","spanLabel","spanAlt","spanUnits","onMousePositionEditModeLocateClick","_createShowMousePositionSettingsElement","onShowMousePositionSettingsClick","_createMousePositionSettingsElement","_createMousePositionSettingsSystemsElement","systems","selectSystem","onMousePositionProjectionSystemChange","onMousePositionProjectionSystemMouseOver","_createMousePositionSettingsUnitsElement","selectUnits","onMousePositionProjectionUnitsChange","_resetLabelElements","currentProjectionType","_resetUnitElements","elts","_resetCoordinateElements","latElt","lonElt","_setEditMode","locateElt","closeEditElt","selects","isFloat","inputMinutes","inputSeconds","GPdisplayCoords","labelLon","labelLat","elt","elLat","elLon","elements","GPdisplayElevation","altitudeTimeoutDelay","noDataValueTolerance","altitudeTimeout","maxThreshold","minThreshold","onRequestAltitude","GPresetElevation","Register","isLoaded","_register","_code","exist","load","Proj4","registers","loadByDefault","2154","27571","27572","27573","27574","84","IGNF","LAMB93","LAMBE","LAMB1","LAMB2","LAMB3","LAMB4","RGF93G","WGS84G","loadByName","4978","3857","3785","4149","4150","4151","4171","4230","4235","4258","4275","4322","4326","4467","4470","4471","4474","4558","4559","4621","4622","4623","4624","4625","4626","4627","4628","4629","4630","4632","4633","4634","4637","4638","4640","4641","4645","4687","4662","4689","4690","4691","4692","4698","4749","4750","4807","2056","2213","2969","2970","2971","2972","2973","2975","2976","2977","2978","2980","2981","2982","2984","2986","2987","2989","2990","2995","3038","3039","3040","3041","3045","3046","3047","3048","3049","3050","3051","3034","3035","3042","3043","3044","25828","25829","25833","25834","25835","25836","25837","25838","3060","3163","3164","3165","3166","3169","3170","3171","3172","3296","3297","3298","3299","3302","3303","3304","3305","3306","3312","3313","3336","3395","3727","21781","25830","25831","25832","27561","27562","27563","27564","27581","27582","27583","27584","27591","27592","27593","27594","32601","32602","32603","32604","32605","32606","32607","32608","32609","32610","32611","32612","32613","32614","32615","32616","32617","32618","32619","32620","32621","32622","32623","32624","32625","32626","32627","32628","32629","32630","32631","32632","32633","32634","32635","32636","32637","32638","32639","32640","32641","32642","32643","32644","32645","32646","32647","32648","32649","32650","32651","32652","32653","32654","32655","32656","32657","32658","32659","32660","32661","32662","32701","32702","32703","32704","32705","32706","32707","32708","32709","32710","32711","32712","32713","32714","32715","32716","32717","32718","32719","32720","32721","32722","32723","32724","32725","32726","32727","32728","32729","32730","32731","32732","32733","32734","32735","32736","32737","32738","32739","32740","32741","32742","32743","32744","32745","32746","32747","32748","32749","32750","32751","32752","32753","32754","32755","32756","32757","32758","32759","32760","32761","310024802","310915814","310486805","310700806","310702807","310706808","310547809","310642810","310032811","310642812","310642801","310642813","310642901","5489","5490","AMST63","CROZ63","CSG67","ED50","ETRS89","GUAD48","GUADFM49","IGN63","IGN72","KERG62CAR","MART38","MAYO50","MOOREA87","NTF","NUKU72","REUN47","RGF93","RGFG95","RGM04","RGNC","RGPF","RGR92","RGSPM06","RGTAAF07","RRAF91","STPL69","STPM50","TAHAA","TAHI79","TERA50","WALL78","WGS72","AMST63GEO","CROZ63GEO","CSG67GEO","ED50G","GUAD48GEO","GUADFM49GEO","IGN63GEO","IGN72GEO","KERG62GEO","MART38GEO","MAYO50GEO","MOOREA87GEO","NTFG","NTFP","NUKU72GEO","REUN47GEO","RGFG95GEO","RGM04GEO","RGNCGEO","RGPFGEO","RGR92GEO","RGSPM06GEO","RGTAAF07G","STPL69GEO","STPM50GEO","TAHAAGEO","TAHI79GEO","TERA50G","WALL78GEO","WGS72G","WGS84RRAFGEO","XGEO","AMST63UTM43S","CROZ63UTM39S","CSG67UTM21","CSG67UTM22","GEOPORTALANF","GEOPORTALASP","GEOPORTALCRZ","GEOPORTALFXX","GEOPORTALGUF","GEOPORTALKER","GEOPORTALMYT","GEOPORTALNCL","GEOPORTALPYF","GEOPORTALREU","GEOPORTALSPM","GEOPORTALWLF","GUAD48UTM20","GUADFM49U20","IGN63UTM7S","IGN72UTM58S","KERG62UTM42S","LAMB1C","LAMB2C","LAMB3C","LAMB4C","RGF93CC42","RGF93CC43","RGF93CC44","RGF93CC45","RGF93CC46","RGF93CC47","RGF93CC48","RGF93CC49","RGF93CC50","MART38UTM20","MAYO50UTM38S","MILLER","MOOREA87U6S","NUKU72U7S","RGM04UTM38S","RGNCUTM57S","RGNCUTM58S","RGNCUTM59S","RGPFUTM5S","RGPFUTM6S","RGPFUTM7S","RGR92UTM40S","RGSPM06U21","STPL69UTM43S","STPM50UTM21","TAHAAUTM05S","TAHI51UTM06S","TAHI79UTM6S","TERA50STEREO","UTM01SW84","UTM20W84GUAD","UTM20W84MART","UTM22RGFG95","UTM39SW84","UTM42SW84","UTM43SW84","WALL78UTM1S","ETRS89GEO","ETRS89LAEA","ETRS89LCC","UTM26ETRS89","UTM27ETRS89","UTM28ETRS89","UTM29ETRS89","UTM30ETRS89","UTM31ETRS89","UTM32ETRS89","UTM33ETRS89","UTM34ETRS89","UTM35ETRS89","UTM36ETRS89","UTM37ETRS89","UTM38ETRS89","EPSG2154","_getResolutions","_getOrigin","EPSG27572","EPSG4326","MousePosition","altitude","triggerDelay","responseDelay","_projectionSystems","_initProjectionSystems","_projectionUnits","_initProjectionUnits","_currentProjectionSystems","_projectionSystemsContainer","_currentProjectionType","_currentProjectionUnits","_projectionUnitsContainer","_panelContainer","_panelHeaderContainer","_isEditing","onMouseMove","onMapMove","addListener","projectionSystemsByDefault","Simple","EPSG3395","geoBBox","sys","found","projectionUnitsByDefault","Geographical","_displayDEC","_displayDMS","_displayRAD","_displayGON","Metric","_displayMeter","_displayKMeter","rightManagement","basic","arraySettings","_setElevationPanel","_setCoordinatePanel","_setSettingsPanel","divPicto","divPanel","_setTypeUnitsPanel","projectionUnits","oXY","formatNum","_project","oPoint","_unproject","oSrs","_setElevation","onMoveStopped","_convertCoordinate","rd","oLatLon","_getCoordinate","inputDegrees","mins","secs","_locateDMSCoordinates","_locateCoordinates","lonYDom","latXDom","_setCurrentSystem","systemCode","systemList","oldProjectionUnits","newProjectionUnits","newProjectionType","moveTo","ReverseGeocodingDOM","_createShowReverseGeocodingElement","_createShowReverseGeocodingPictoElement","onShowReverseGeocodingClick","_createReverseGeocodingWaitingElement","_createReverseGeocodingResultsPanelElement","resultsPanelDiv","_createReverseGeocodingResultsListElement","_createReverseGeocodingResultElement","locationDescription","onReverseGeocodingResultMouseOver","onReverseGeocodingResultMouseOut","onReverseGeocodingResultClick","_createReverseGeocodingPanelElement","_createReverseGeocodingPanelHeaderElement","_createReverseGeocodingPanelReturnPictoElement","divNew","onGPreverseGeocodingReturnPictoClick","_createReverseGeocodingPanelTitleElement","_createReverseGeocodingPanelCloseElement","_createReverseGeocodingPanelFormElement","onReverseGeocodingSubmit","_createReverseGeocodingFormModeChoiceGeocodingTypeElement","onReverseGeocodingTypeChange","POIOption","SAOption","CPOption","adminOption","_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement","delimitations","onReverseGeocodingDelimitationChange","pointOption","circleOption","extentOption","_createReverseGeocodingSubmitFormElement","ReverseGeocoding","_servicesRightManagement","_checkInputOptions","_currentGeocodingType","_initGeocodingType","_currentGeocodingDelimitation","_initGeocodingDelimitation","_showReverseGeocodingContainer","_panelTitleContainer","_returnPictoContainer","_resultsContainer","_resultsListContainer","_inputFeaturesLayer","_inputResultsLayer","_lastIdLayer","_currentIdLayer","_currentFeature","_requestPosition","_requestCircleFilter","_requestBboxFilter","_reverseGeocodingLocations","_activateMapInteraction","_clearLocations","_clearLocationsFeature","_clearInputRequest","_removeMapInteraction","rightManagementGeocode","resourcesList","delimitationsList","noRightsIndexes","reverseGeocodingPanel","panelHeader","returnPicto","panelTitle","closeDiv","reverseGeocodingForm","resultsPanel","reverseGeocodingResultsList","_setFeaturePosition","_setFeatureLayer","_removeFeatureLayer","delimitation","_activatePointInteraction","_activateCircleInteraction","_activateBoxInteraction","markerOptions","circleOptions","rectangleOptions","_reverseGeocodingRequest","_type","_displayGeocodedLocations","_fillGeocodedLocationListContainer","_displayGeocodedLocationsOnMap","fitBounds","_fillGeocodedLocationDescription","_setHighLight","setIcon","scrollIntoView","_resetHighLight","riseOnHover","RouteDOM","_createShowRouteElement","_createShowRoutePictoElement","onShowRoutePanelClick","_createRoutePanelElement","_createRoutePanelHeaderElement","_createRoutePanelFormElement","resultStage","resultStageLabel","resultStageValue","elementCoords","stageCoords","modeComputation","modeTransport","exclusionsElement","onRouteComputationSubmit","computation","_createRoutePanelResultsElement","_createRouteResultsStagesElement","_createRouteResultsElement","divBorderUp","_createRouteShowResultsDetailsElement","labelShow","labelHide","divBorderDown","_createRouteResultsDetailsElement","_createRouteWaitingElement","divValue","divMode","onRouteModeComputationChangeAndRun","computes","onShowRouteResultsNewClick","_addRouteResultsValuesElement","fconvert","containerDistance","labelDistance","distanceLabel","isKm","distanceArrondi","divDistance","containerDuration","labelDuration","divDuration","_addRouteResultsDetailsElement","instructions","distanceCumul","durationCumul","divNum","isCumulKm","divIns","onRouteResultsDetailsMouseOver","onRouteResultsDetailsMouseOut","onRouteResultsDetailsClick","_createRoutePanelFormPointElement","onRouteMapPointClick","_createRoutePanelFormRemoveStageElement","onRouteRemovePointClick","_createRoutePanelFormAddStageElement","onRouteAddPointClick","_createRoutePanelFormAutoCompleteListElement","_createRouteAutoCompletedLocationElement","_createRoutePanelFormModeChoiceElement","_createRoutePanelFormModeChoiceTransportElement","onRouteModeTransportChange","_createRoutePanelFormModeChoiceComputeElement","onRouteModeComputationChange","_createShowRouteExclusionsElement","_createShowRouteExclusionsPictoElement","onShowRouteExclusionsClick","_createRoutePanelFormExclusionsElement","_createRoutePanelFormExclusionOptionsElement","onRouteExclusionsChange","_createRouteSubmitFormElement","_createRouteFormResetElement","onRouteResetClick","routeOptions","_showRouteContainer","_pictoRouteContainer","_formRouteContainer","_resultsRouteContainer","_currentPoints","_geojsonRoute","_geojsonSections","_currentRouteInformations","rightManagementRoute","routePanel","routeHeader","routeForm","_createRoutePanelFormPointsElement","choice","routeResults","_clearRouteResultsDetails","_clearRouteResultsGeometry","_clearRouteResultsFeatureGeometry","_requestRouting","_fillRouteResultsDetails","newInstruction","oldInstruction","_simplifiedInstructions","_fillRouteResultsDetailsContainer","_fillRouteResultsDetailsGeometry","bGeometryInstructions","_fillRouteResultsDetailsFeatureGeometry","padding","_resultsRouteValuesContainer","_convertSecondsToTime","_resultsRouteDetailsContainer","_convertDistance","resetHighlight","resetStyle","highlightFeature","onEachFeature","mouseover","mouseout","divD","divV","newInstructions","hours","divisor4minutes","divisor4seconds","distanceKm","startInput","endInput","stepInput","SearchEngineUtils","advancedSearchFiltersByDefault","zoomToResultsByDefault","1","2","3","4","5","6","7","8","SearchEngineDOM","_createShowSearchEngineElement","_createShowSearchEnginePictoElement","showAdvancedSearch","onShowSearchEngineClick","_createSearchInputElement","onGeocodingSearchSubmit","onSearchResetClick","_createShowAdvancedSearchElement","_createAdvancedSearchPanelElement","_createGeocodeResultsElement","_createGeocodeResultsHeaderElement","_createAutoCompleteElement","_createAutoCompleteListElement","_createAutoCompletedLocationElement","_createAdvancedSearchPanelHeaderElement","_createAdvancedSearchPanelFormElement","advancedSearchCodes","matchesFilters","onGeocodingAdvancedSearchSubmit","_createAdvancedSearchFormCodeElement","onGeocodingAdvancedSearchCodeChange","_createAdvancedSearchFormInputElement","_createAdvancedSearchFormFiltersElement","_createAdvancedSearchFiltersTableElement","_createAdvancedSearchFiltersAttributElement","filterAttributes","_createGeocodeResultsListElement","onGeocodedResultsItemClick","_createGeocodedLocationElement","SearchEngine","zoomTo","displayMarker","markerStyle","displayAdvancedSearch","advancedSearch","geocodeOptions","triggerGeocode","_inputContainer","_geocodedContainer","_geocodedLocations","_filterContainer","_currentGeocodingCode","_currentGeocodingLocation","_advancedSearchFilters","_advancedSearchCodes","_triggerHandler","_initAdvancedSearchCodes","_initAdvancedSearchFilters","_clearGeocodedLocation","advancedShow","advancedPanel","advancedHeader","advancedForm","advancedFormFilters","_setFilter","advancedFormInput","autocompleteList","geocodeList","advancedSearchCodesByDefault","advancedSearchFiltersCustom","codeFound","lstAttributs","divTable","divFilter","_requestGeocoding","_getGeocodeCoordinatesFromFullText","_location","_locationsToBeDisplayed","setZoomAround","_getZoom","getMinZoom","getMaxZoom","_triggerGeocode","_triggerDelay","ilocation","_filterOptions","masked","fillerSlice","setText","KeyboardEvent","ElevationPathDOM","_createShowElevationPathElement","_createShowElevationPathPictoElement","onShowElevationPathClick","_createElevationPathPanelElement","_createElevationPathPanelHeaderElement","divInfo","onOpenElevationPathInfoClick","divReduce","onReduceElevationPathPanelClick","_createElevationPathPanelProfilElement","_createElevationPathWaitingElement","_createElevationPathInformationsElement","_addElevationPathInformationsItem","ProfileElevationPathDOM","_getCssProperty","getPropertyValue","_getTextWidth","font","canvas","getContext","metrics","measureText","_dataZToSvgY","pathHeight","minGraphZ","pxPerMZ","_dataDistToSvgX","dist","svgWidth","pathWidth","pxPerMX","_svgXToDataDist","svgX","_arrayBisect","displayProfileByDefault","margin","_displayProfileOptions","displayProfileOptions","_points","sortedElev","minZ","maxZ","distUnit","widgetDiv","widgetHeigth","widgetWidth","zLabelWidth","zGradWidth","toLocaleString","xLabelHeight","xGradHeight","minZguideHeigth","minXguideWidth","minNumXGuides","elevationSvg","maxNumZguides","gradZ","maxGraphZ","numZguides","axisZ","guidesZ","gradZyOffsetPx","gradZtext","yTextTranslation","yStrokeTranslation","gradZstroke","gradZpath","gradZgrad","axisZLegend","maxNumXguides","gradX","maxGraphX","numXguides","lastGradX","axisX","guidesX","xOffset","gradXxOffsetPx","gradXtext","xTextTranslation","xStrokeTranslation","gradXstroke","gradXpath","gradXgrad","axisXLegend","elevationPathG","pointX","pointY","pathD","pathPath","pathFill","dynamicsG","pathRectangle","sortedDist","focusLineX","focusLineY","focusCircle","tooltipDiv","altiSpan","slopeSpan","coordsSpan","currentSlope","tooltipG","tooltipBubble","tooltipBubbleShadow","__createProfileMarker","__removeProfileMarker","mousePoint","createSVGPoint","svgMousePoint","matrixTransform","getScreenCTM","mouseDist","distIndex","d0","d1","focusX","focusY","__updateProfileMarker","altiSpanTxt","slopeSpanTxt","slope","coordsSpanTxt","tooltipTextWidth","toolTipBubbleD","displayProfileRaw","rows","cols","__customRawProfileMouseOverEvent","displayProfileLibD3","d3","linear","range","xAxis","orient","ticks","yAxis","interpolate","xDomain","domain","yDomain","tickSize","tickFormat","selectAll","bisectDist","bisector","mouse","xc","yc","_message","displayProfileLibAmCharts","ballonText","AmCharts","addInitHandler","coeffArrond","pathToImages","categoryField","autoMarginOffset","startDuration","fontSize","thousandsSeparator","numberFormatter","decimalSeparator","categoryAxis","gridPosition","minHorizontalGap","tickPosition","titleColor","labelOffset","startOnAxis","chartCursor","animationDuration","bulletsEnabled","bulletSize","categoryBalloonEnabled","cursorColor","graphBulletAlpha","graphBulletSize","zoomable","trendLines","balloonColor","balloonText","bullet","bulletAlpha","bulletBorderColor","bulletBorderThickness","bulletColor","fillAlphas","fillColors","lineAlpha","lineColor","lineThickness","valueField","guides","valueAxes","minVerticalGap","balloon","borderColor","borderThickness","showBullet","titles","allLabels","dataProvider","_containerProfile","makeChart","chart","ElevationPath","elevationPathOptions","stylesOptions","greaterSlope","meanSlope","ascendingElevation","descendingElevation","_initDisplayProfileOptions","_profilContainer","_infoContainer","_timerHdlr","_reducePanel","_featuresLayer","_profile","_distance","_profileOpts","displayFunction","DISPLAY_PROFILE_BY_DEFAULT","displayContainer","_protoOpts","getPrototypeOf","_getFeatureGeometry","_addFeatureLayer","_altiRequest","_activatePolyLineInteraction","_shapeOptions","LatLngI","LatLngJ","_computeSampling","_displayProfil","_computeElevationMeasure","_haversineDistance","deltaLatBy2","deltaLonBy2","_unit","_sketchPoints","_currentSection","_previousSectionsLength","_nextSectionBegining","_distanceMinus","_distancePlus","_ascendingElevation","_descendingElevation","_slopes","distances","distanceToStart","za","zb","_altMin","_altMax","_greaterSlope","ji","distancePlus","distanceMinus","altMin","altMax","__customRawProfileOperation","DISPLAY_PROFILE_RAW","DISPLAY_PROFILE_LIB_D3","DISPLAY_PROFILE_LIB_AMCHARTS","bLink","link","bImage","image","Controls","LayerUtils","getZoomLevelFromScaleDenominator","resolutionsNatives","0","9","10","11","12","13","14","15","16","17","18","19","20","21","getAttributions","attributions","drawLogo","kl","minZoomLevel","maxZoomLevel","viewExtent","extent1","extent2","intersectsX","intersectsY","LayerConfig","LayerEvent","_id","_attributions","_originators","isEnable","attributionControl","getVisible","_onRemoveLayer","_onAddLayer","_onMoveEndLayer","updateAttributions","removeAttributions","addAttributions","removeAttribution","bottomRight","arrayBounds","attributionsOriginators","addAttribution","WMS","TileLayer","paramsWms","paramsNative","leafletExtVersion","overlayremove","overlayadd","layerremove","layeradd","moveend","getTileUrl","tilePoint","lstProjEpsgGeographic","tileSize","nwPoint","multiplyBy","sePoint","nw","_crs","se","_wmsVersion","_url","_getSubdomain","getParamString","wmsParams","WMTS","defaultWmtsParams","tilematrixset","_wmtsParams","paramsWmts","_getZoomForUrl","setParams","noRedraw","serviceUrl","_initOptions","_initContext","_initParams","scripts","splitKeys","leafletExtDate","geoportalLayer","geoportalControl","geoportalCRS","LoggerByDefault","loggers","normalizeArray","allowAboveRoot","basename","matchedSlash","xs","resolvedAbsolute","isAbsolute","trailingSlash","fromParts","toParts","samePartsLength","outputParts","dirname","hasRoot","extname","startDot","startPart","preDotState","proto","lastId","lock","wrapperFn","later","wrapNum","includeMax","falseFn","digits","splitWords","existingUrl","uppercase","templateRe","emptyImageUrl","getPrefixed","lastTime","timeoutDefer","timeToCall","requestFn","cancelFn","cancelAnimationFrame","requestAnimFrame","cancelAnimFrame","checkDeprecatedMixinEvents","NewClass","callInitHooks","parentProto","__super__","_initHooks","_initHooksCalled","typeListeners","newListener","_firingCount","propagate","listens","sourceTarget","_propagateEvent","_eventParents","addEventParent","removeEventParent","propagatedFrom","clearAllEventListeners","addOneTimeEventListener","fireEvent","hasEventListeners","trunc","Bounds","toBounds","corner1","corner2","toLatLngBounds","alt","toLatLng","subtract","divideBy","_multiplyBy","scaleBy","unscaleBy","_floor","_ceil","_trunc","equals","getBottomLeft","getTopRight","getTopLeft","getBottomRight","min2","max2","xIntersects","yIntersects","overlaps","xOverlaps","yOverlaps","isValid","sw2","ne2","ne","pad","bufferRatio","heightBuffer","widthBuffer","getNorth","getWest","getSouth","getEast","latIntersects","lngIntersects","latOverlaps","lngOverlaps","toBBoxString","maxMargin","other","wrapLatLng","sizeInMeters","latAccuracy","lngAccuracy","latLngToPoint","projectedPoint","pointToLatLng","untransformedPoint","untransform","LN2","getProjectedBounds","wrapLng","wrapLat","wrapLatLngBounds","newCenter","latShift","lngShift","newSw","newNe","latlng1","latlng2","sinDLat","sinDLon","earthRadius","SphericalMercator","MAX_LATITUDE","_a","toTransformation","EPSG3857","EPSG900913","svgCreate","pointsToPath","len2","style$1","ie","ielt9","edge","webkit","userAgentContains","android","android23","webkitVer","androidStock","opera","chrome","gecko","phantom","opera12","ie3d","webkit3d","gecko3d","any3d","L_DISABLE_3D","mobile","orientation","mobileWebkit","mobileWebkit3d","msPointer","PointerEvent","MSPointerEvent","L_NO_TOUCH","DocumentTouch","mobileOpera","mobileGecko","screen","deviceXDPI","logicalXDPI","passiveEvents","supportsPassiveOption","createSVGRect","vml","shape","adj","POINTER_DOWN","POINTER_MOVE","POINTER_UP","POINTER_CANCEL","_pointers","_pointerDocListener","addPointerListener","_addPointerStart","_addPointerMove","_addPointerEnd","removePointerListener","onDown","MSPOINTER_TYPE_TOUCH","_handlePointer","_globalPointerDown","_globalPointerMove","_globalPointerUp","pointerId","MSPOINTER_TYPE_MOUSE","onUp","_touchstart","_touchend","_pre","addDoubleTapListener","touch$$1","doubleTap","onTouchStart","isPrimary","delta","onTouchEnd","cancelBubble","newTouch","removeDoubleTapListener","touchstart","touchend","dblclick","_userSelect","_outlineElement","_outlineStyle","TRANSFORM","testProp","TRANSITION_END","create$1","toFront","toBack","getClass","setClass","baseVal","correspondingElement","_setOpacityIE","filterName","Enabled","Opacity","_leaflet_pos","userSelectProperty","disableImageDrag","enableImageDrag","preventOutline","tabIndex","restoreOutline","getSizedParentNode","getScale","boundingClientRect","addOne","eventsKey","removeOne","browserFiresNativeDblClick","mouseSubst","mouseenter","mouseleave","wheel","originalHandler","isExternalTarget","detachEvent","_stopped","skipped","fakeStop","returnValue","getMousePosition","clientLeft","clientTop","wheelPxFactor","getWheelDelta","wheelDeltaY","deltaY","deltaMode","deltaX","deltaZ","wheelDelta","skipEvents","relatedTarget","removeListener","PosAnimation","easeLinearity","_el","_inProgress","_duration","_easeOutPower","_startPos","_offset","_startTime","_step","_complete","_animId","elapsed","_runFrame","_easeOut","progress","maxBounds","zoomAnimation","zoomAnimationThreshold","fadeAnimation","markerZoomAnimation","transform3DLimit","zoomSnap","zoomDelta","trackResize","_handlers","_zoomBoundLayers","_sizeChanged","_initContainer","_onResize","_initEvents","setMaxBounds","_zoom","_limitZoom","setView","reset","_zoomAnimated","_createAnimProxy","_proxy","_catchTransitionEnd","_addLayers","_limitCenter","_stop","animate","pan","_tryAnimatedZoom","_tryAnimatedPan","_sizeTimer","_resetView","setZoom","zoomIn","zoomOut","centerOffset","containerPointToLatLng","_getBoundsCenterZoom","paddingTL","paddingTopLeft","paddingBR","paddingBottomRight","getBoundsZoom","paddingOffset","swPoint","nePoint","fitWorld","panBy","_panAnim","_onPanTransitionStep","_onPanTransitionEnd","noMoveStart","_mapPane","_rawPanBy","targetCenter","targetZoom","startZoom","w0","w1","u1","rho2","s1","b1","sq","tanh","r0","w","easeOut","frame","_flyToFrame","getScaleZoom","_moveEnd","_moveStart","flyToBounds","_panInsideMaxBounds","setMinZoom","oldZoom","setMaxZoom","panInsideBounds","_enforcingBounds","panInside","pixelCenter","pixelPoint","pixelBounds","getPixelBounds","halfPixelBounds","paddedBounds","diff","invalidateSize","oldSize","_lastCenter","newSize","oldCenter","debounceMoveend","locate","_locateOptions","_handleGeolocationError","_handleGeolocationResponse","_locationWatchId","geolocation","watchPosition","getCurrentPosition","stopLocate","clearWatch","latitude","longitude","addHandler","HandlerClass","_containerId","_clearControlPos","_resizeRequest","_clearHandlers","_renderer","createPane","pane","_checkIfLoaded","_moved","_getCenterLayerPoint","_layersMinZoom","_layersMaxZoom","inside","boundsSize","snap","scalex","scaley","_size","topLeftPoint","_getTopLeftPoint","_pixelOrigin","getPixelWorldBounds","getPane","getPanes","toZoom","fromZoom","containerPointToLayerPoint","layerPointToContainerPoint","mouseEventToLatLng","_onScroll","_fadeAnimated","_initPanes","_initControlPos","panes","_paneRenderers","markerPane","shadowPane","zoomChanged","_getNewPixelOrigin","pinch","_getZoomSpan","_targets","onOff","_handleDOMEvent","_onMoveEnd","_findEventTargets","targets","isHover","srcElement","_draggableMoved","_fireDOMEvent","_mouseEvents","synth","isMarker","bubblingMouseEvents","boxZoom","whenReady","_latLngToNewLayerPoint","_latLngBoundsToNewLayerBounds","_getCenterOffset","centerPoint","viewBounds","_getBoundsOffset","_limitOffset","newBounds","pxBounds","projectedMaxBounds","minOffset","maxOffset","_rebound","mapPane","_animatingZoom","_onZoomTransitionEnd","_animMoveEnd","_destroyAnimProxy","_nothingToAnimate","startAnim","noUpdate","_animateToCenter","_animateToZoom","createMap","removeControl","corner","_controlCorners","screenX","screenY","control","corners","_controlContainer","createCorner","vSide","hSide","hideSingleBase","sortLayers","sortFunction","layerA","layerB","nameA","nameB","baseLayers","overlays","_layerControlInputs","_checkDisabledLayers","_expandIfNotCollapsed","addBaseLayer","_getLayer","expand","_section","acceptableHeight","collapse","_layersLink","_baseLayersList","_separator","baseLayersPresent","overlaysPresent","baseLayersCount","_createRadioElement","radioHtml","radioFragment","defaultChecked","_onInputClick","holder","addedLayers","removedLayers","_expand","Zoom","zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","zoomName","_zoomInButton","_zoomIn","_zoomOutButton","_zoomOut","_updateDisabled","_disabled","zoomControl","Scale","maxWidth","imperial","_addScales","updateWhenIdle","_mScale","_iScale","maxMeters","_updateScales","_updateMetric","_updateImperial","meters","_getRoundNum","_updateScale","maxMiles","miles","maxFeet","pow10","getAttribution","setPrefix","attribs","prefixAndAttribs","_lastCode","END","mousedown","pointerdown","MSPointerDown","MOVE","Draggable","clickTolerance","dragStartTarget","preventOutline$$1","_element","_dragStartTarget","_preventOutline","_onDown","_dragging","finishDrag","_moving","first","sizedParent","_parentScale","_onUp","_lastTarget","SVGElementInstance","correspondingUseElement","_newPos","_animRequest","_lastEvent","_updatePosition","simplify","tolerance","sqTolerance","_reducePoints","_simplifyDP","pointToSegmentDistance","p2","_sqClosestPointOnSegment","closestPointOnSegment","ArrayConstructor","markers","_simplifyDPStep","newPoints","sqDist","maxSqDist","reducedPoints","_sqDist","clipSegment","useLastCode","codeOut","newCode","codeA","_getBitCode","codeB","_getEdgeIntersection","dot","isFlat","clipPolygon","clippedPoints","edges","PolyUtil","LonLat","Mercator","R_MINOR","removeFrom","_mapToAdd","removeInteractiveTarget","_layerAdd","getEvents","beforeAdd","_addZoomLimit","_updateZoomLevels","_removeZoomLimit","oldZoomSpan","invoke","getLayer","zIndex","layerGroup","bringToFront","bringToBack","popupAnchor","tooltipAnchor","createIcon","oldIcon","_createIcon","createShadow","img","_createImg","_setIconStyles","sizeOption","anchor","shadowAnchor","shadowSize","imagePath","_detectIconPath","_draggable","dragstart","predrag","_onPreDrag","drag","_onDrag","dragend","_adjustPan","autoPanSpeed","autoPanPadding","iconPos","panBounds","movement","_panRequest","_oldLatLng","closePopup","autoPan","_shadow","oldLatLng","interactive","keyboard","riseOffset","_initIcon","_removeIcon","_removeShadow","viewreset","setZIndexOffset","getIcon","_popup","getElement","_setPos","classToAdd","addIcon","_bringToFront","_resetZIndex","newShadow","addShadow","_updateOpacity","_zIndex","_updateZIndex","_getPopupAnchor","_getTooltipAnchor","Path","lineCap","lineJoin","dashOffset","fillRule","getRenderer","_initPath","_addPath","_removePath","_updatePath","_updateStyle","_updateBounds","_bringToBack","_clickTolerance","_point","r2","_radiusY","_pxBounds","_updateCircle","_empty","_containsPoint","circleMarker","legacyOptions","_mRadius","half","latR","lngR","smoothFactor","noClip","_setLatLngs","closestLayerPoint","minDistance","minPoint","jLen","_parts","halfDist","segDist","_rings","flat","_projectLatlngs","_rawPxBounds","projectedBounds","_clipPoints","_simplifyPoints","_updatePoly","part","clipped","geometryToLayer","asFeature","_setLayerStyle","pointToLayer","_coordsToLatLng","_pointToLayer","coordsToLatLngs","pointToLayerFn","markersInheritOptions","levelsDeep","latLngToCoords","latLngsToCoords","getFeature","newGeometry","PointToGeoJSON","geoJSON","multi","toMultiPoint","isGeometryCollection","jsons","crossOrigin","errorOverlayUrl","_initImage","styleOpts","setUrl","zoomanim","wasElementSupplied","onselectstart","onmousemove","_overlayOnError","errorUrl","VideoOverlay","autoplay","keepAspectRatio","muted","vid","onloadeddata","sourceElements","sources","videoOverlay","video","SVGOverlay","svgOverlay","DivOverlay","_source","_removeTimeout","getContent","_content","setContent","_updateContent","_updateLayout","isOpen","_prepareOpen","_contentNode","_getAnchor","_containerBottom","_containerLeft","_containerWidth","Popup","minWidth","maxHeight","autoPanPaddingTopLeft","autoPanPaddingBottomRight","keepInView","closeButton","autoClose","closeOnEscapeKey","openOn","openPopup","popup","closeOnClick","closePopupOnClick","preclick","_close","wrapper","_tipContainer","_tip","_closeButton","_onCloseButtonClick","whiteSpace","scrolledClass","marginBottom","containerHeight","containerWidth","layerPos","containerPos","_popupHandlersAdded","_openPopup","keypress","move","_movePopup","togglePopup","isPopupOpen","setPopupContent","getPopup","permanent","sticky","closeTooltip","subX","subY","tooltipPoint","tooltipWidth","tooltipHeight","openTooltip","bindTooltip","_initTooltipInteractions","unbindTooltip","_tooltipHandlersAdded","_moveTooltip","_openTooltip","mousemove","toggleTooltip","isTooltipOpen","setTooltipContent","getTooltip","bgPos","backgroundPosition","GridLayer","updateWhenZooming","updateInterval","maxNativeZoom","minNativeZoom","noWrap","keepBuffer","_levels","_tiles","_removeAllTiles","_tileZoom","_setAutoZIndex","isLoading","_loading","viewprereset","_invalidateAll","createTile","getTileSize","compare","edgeZIndex","willPrune","tile","loaded","fade","_onOpaqueTile","_noPrune","_pruneTiles","_fadeFrame","_updateLevels","_onUpdateLevel","_removeTilesAtZoom","_onRemoveLevel","_setZoomTransform","_onCreateLevel","_level","retain","_retainParent","_retainChildren","_removeTile","x2","y2","z2","coords2","_tileCoordsToKey","animating","_setView","_clampZoom","noPrune","tileZoom","tileZoomChanged","_abortLoading","_resetGrid","_setZoomTransforms","_tileSize","_globalTileRange","_pxBoundsToTileRange","_wrapX","_wrapY","_getTiledPixelBounds","mapZoom","halfSize","tileRange","tileCenter","noPruneRange","_isValidTile","fragment","_addTile","tileBounds","_tileCoordsToBounds","_keyToBounds","_keyToTileCoords","_tileCoordsToNwSe","bp","_initTile","WebkitBackfaceVisibility","tilePos","_getTilePos","_wrapCoords","_tileReady","_noTilesToLoad","newCoords","gridLayer","subdomains","errorTileUrl","zoomOffset","zoomReverse","detectRetina","_onTileRemove","_tileOnLoad","_tileOnError","invertedY","complete","tileLayer","TileLayerWMS","defaultWmsParams","transparent","realRetina","projectionKey","tileLayerWMS","wms","Renderer","_updatePaths","_destroyContainer","_onZoom","zoomend","_onAnimZoom","ev","_updateTransform","currentCenterPoint","_center","destCenterPoint","topLeftOffset","Canvas","_onViewPreReset","_postponeUpdatePaths","_draw","_handleMouseOut","_ctx","_redrawRequest","_redrawBounds","_redraw","_updateDashArray","_order","_drawLast","_drawFirst","_requestRedraw","_extendRedrawBounds","dashValue","_dashArray","clearRect","restore","beginPath","clip","_drawing","closePath","_fillStroke","globalAlpha","fillStyle","setLineDash","lineWidth","strokeStyle","clickedLayer","_fireEvent","moving","_handleMouseHover","_hoveredLayer","_mouseHoverThrottled","candidateHoveredLayer","canvas$1","vmlCreate","namespaces","vmlMixin","coordsize","_stroke","_fill","stroked","filled","dashStyle","endcap","joinstyle","_setPath","create$2","SVG","zoomstart","_onZoomStart","_rootGroup","_svgSize","svg$1","_getPaneRenderer","_createRenderer","preferCanvas","_boundsToLatLngs","BoxZoom","_resetStateTimeout","_destroy","_resetState","_clearDeferredResetState","contextmenu","mouseup","keydown","_onKeyDown","_box","_finish","boxZoomBounds","doubleClickZoom","DoubleClickZoom","_onDoubleClick","inertia","inertiaDeceleration","inertiaMaxSpeed","worldCopyJump","maxBoundsViscosity","Drag","_onPreDragLimit","_onPreDragWrap","_positions","_times","_offsetLimit","_viscosity","_lastTime","_lastPos","_absPos","_prunePositions","pxCenter","pxWorldCenter","_initialWorldOffset","_worldWidth","_viscousLimit","worldWidth","halfWidth","newX1","newX2","newX","noInertia","ease","speedVector","limitedSpeed","limitedSpeedVector","decelerationDuration","keyboardPanDelta","Keyboard","_setPanDelta","_setZoomDelta","_onFocus","blur","_onBlur","_addHooks","_removeHooks","_focused","panDelta","_panKeys","_zoomKeys","scrollWheelZoom","wheelDebounceTime","wheelPxPerZoomLevel","ScrollWheelZoom","_onWheelScroll","_delta","debounce","_lastMousePos","_performZoom","d2","d4","tap","tapTolerance","Tap","_fireClick","_holdTimeout","_isTapValid","_simulateEvent","touchmove","simulatedEvent","touchZoom","bounceAtZoomLimits","TouchZoom","_zooming","_centerPoint","_pinchStartLatLng","_startDist","_startZoom","moveFn","oldL","_createClass","descriptor","protoProps","staticProps","_templateObject","_taggedTemplateLiteral","strings","_classCallCheck","TemplateTag","_len","transformers","_len2","expressions","_key2","interimTag","transformEndResult","transformString","processSubstitutions","previousTag","_len3","substitutions","_key3","resultSoFar","remainingPart","substitution","transformSubstitution","onString","onSubstitution","endResult","onEndResult","trimResultTransformer","_toConsumableArray","arr2","stripIndentTransformer","replaceResultTransformer","replaceWhat","replaceWith","replaceSubstitutionTransformer","conjunction","serial","inlineArrayTransformer","arrayLength","separatorIndex","splitStringTransformer","splitBy","isValidValue","removeNonPrintingValuesTransformer","stripIndents","corslite","cors","sent","hostname","port","isSuccessful","onprogress","onabort","objectConverter","customConverter","inferColumns","columnSet","reFormat","delimiterCode","parseRows","eol","EOL","EOF","formatValue","formatRows","formatRow","csvParseRows","csvFormat","csvFormatRows","tsvParseRows","tsvFormat","tsvFormatRows"],"mappings":"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O6qB,GAarC,SAASpmB,EAAKtF,EAAGutE,GACfvtE,EAAIA,EAAEi6D,OACN,IAAIkU,EAAMX,EAAOxtE,EAAGutE,GACpB,GAAgB,OAAZY,EAAItnC,IAAc,OAAO,KAC7B,IAAIunC,EAAMZ,EAAOxtE,EAAGutE,EAAMY,EAAIttE,OAC9B,OAAgB,OAAZutE,EAAIvnC,KAEJsnC,EAAIv/B,IAAMw/B,EAAIx/B,MAAQ5uC,EAFG,KAGzBmuE,EAAIR,IACCU,EAAQF,EAAItnC,IAAKunC,EAAIvnC,IAAKsnC,EAAIR,KAE9B,CAACQ,EAAItnC,IAAKunC,EAAIvnC,KAIzB,SAASwnC,EAAQj7D,EAAGC,EAAGs6D,GACrB,MAAY,MAARA,GAAuB,MAARA,EAAoB,CAACv6D,EAAGC,GAC/B,MAARs6D,GAAuB,MAARA,EAAoB,CAACt6D,EAAGD,QAA3C,EA9EFuD,EAAOC,QAAU/C,EACjB8C,EAAOC,QAAQtR,KAAOA,EACtBqR,EAAOC,QAAQohB,OAASA,EACxBrhB,EAAOC,QAAQ62D,WAAaA,EAC5B92D,EAAOC,QAAQi3D,WAAaA,G,qBCJ5B,MAAMzsE,EAAW,2BACXktE,EAAW,CACf,KACA,KACA,KACA,KACA,MACA,QACA,UACA,MACA,MACA,WACA,KACA,SACA,OACA,OACA,QACA,QACA,aACA,OACA,QACA,OACA,UACA,MACA,SACA,WACA,SACA,SACA,MACA,QACA,QACA,QAIA,WACA,QACA,QACA,SACA,SACA,OACA,SACA,WAEIC,EAAW,CACf,OACA,QACA,OACA,YACA,MACA,YAGIC,EAAQ,CACZ,OACA,WACA,SACA,OACA,OACA,SACA,SACA,SACA,WACA,UACA,QACA,SACA,MACA,MACA,UACA,UACA,QACA,UACA,OACA,UACA,eACA,aACA,aACA,YACA,cACA,cACA,eACA,QACA,aACA,oBACA,cACA,gBACA,iBACA,UAGIC,EAAc,CAClB,YACA,gBACA,aACA,iBACA,cACA,YACA,YAGIC,EAAmB,CACvB,cACA,aACA,gBACA,eAEA,UACA,UAEA,OACA,WACA,QACA,aACA,WACA,YACA,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","file":"js/chunk-vendors.ef711330.js","sourcesContent":["function deepFreeze(obj) {\n    if (obj instanceof Map) {\n        obj.clear = obj.delete = obj.set = function () {\n            throw new Error('map is read-only');\n        };\n    } else if (obj instanceof Set) {\n        obj.add = obj.clear = obj.delete = function () {\n            throw new Error('set is read-only');\n        };\n    }\n\n    // Freeze self\n    Object.freeze(obj);\n\n    Object.getOwnPropertyNames(obj).forEach(function (name) {\n        var prop = obj[name];\n\n        // Freeze prop if it is an object\n        if (typeof prop == 'object' && !Object.isFrozen(prop)) {\n            deepFreeze(prop);\n        }\n    });\n\n    return obj;\n}\n\nvar deepFreezeEs6 = deepFreeze;\nvar _default = deepFreeze;\ndeepFreezeEs6.default = _default;\n\n/** @implements CallbackResponse */\nclass Response {\n  /**\n   * @param {CompiledMode} mode\n   */\n  constructor(mode) {\n    // eslint-disable-next-line no-undefined\n    if (mode.data === undefined) mode.data = {};\n\n    this.data = mode.data;\n    this.isMatchIgnored = false;\n  }\n\n  ignoreMatch() {\n    this.isMatchIgnored = true;\n  }\n}\n\n/**\n * @param {string} value\n * @returns {string}\n */\nfunction escapeHTML(value) {\n  return value\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n}\n\n/**\n * performs a shallow merge of multiple objects into one\n *\n * @template T\n * @param {T} original\n * @param {Record<string,any>[]} objects\n * @returns {T} a single new object\n */\nfunction inherit(original, ...objects) {\n  /** @type Record<string,any> */\n  const result = Object.create(null);\n\n  for (const key in original) {\n    result[key] = original[key];\n  }\n  objects.forEach(function(obj) {\n    for (const key in obj) {\n      result[key] = obj[key];\n    }\n  });\n  return /** @type {T} */ (result);\n}\n\n/**\n * @typedef {object} Renderer\n * @property {(text: string) => void} addText\n * @property {(node: Node) => void} openNode\n * @property {(node: Node) => void} closeNode\n * @property {() => string} value\n */\n\n/** @typedef {{kind?: string, sublanguage?: boolean}} Node */\n/** @typedef {{walk: (r: Renderer) => void}} Tree */\n/** */\n\nconst SPAN_CLOSE = '</span>';\n\n/**\n * Determines if a node needs to be wrapped in <span>\n *\n * @param {Node} node */\nconst emitsWrappingTags = (node) => {\n  return !!node.kind;\n};\n\n/** @type {Renderer} */\nclass HTMLRenderer {\n  /**\n   * Creates a new HTMLRenderer\n   *\n   * @param {Tree} parseTree - the parse tree (must support `walk` API)\n   * @param {{classPrefix: string}} options\n   */\n  constructor(parseTree, options) {\n    this.buffer = \"\";\n    this.classPrefix = options.classPrefix;\n    parseTree.walk(this);\n  }\n\n  /**\n   * Adds texts to the output stream\n   *\n   * @param {string} text */\n  addText(text) {\n    this.buffer += escapeHTML(text);\n  }\n\n  /**\n   * Adds a node open to the output stream (if needed)\n   *\n   * @param {Node} node */\n  openNode(node) {\n    if (!emitsWrappingTags(node)) return;\n\n    let className = node.kind;\n    if (!node.sublanguage) {\n      className = `${this.classPrefix}${className}`;\n    }\n    this.span(className);\n  }\n\n  /**\n   * Adds a node close to the output stream (if needed)\n   *\n   * @param {Node} node */\n  closeNode(node) {\n    if (!emitsWrappingTags(node)) return;\n\n    this.buffer += SPAN_CLOSE;\n  }\n\n  /**\n   * returns the accumulated buffer\n  */\n  value() {\n    return this.buffer;\n  }\n\n  // helpers\n\n  /**\n   * Builds a span element\n   *\n   * @param {string} className */\n  span(className) {\n    this.buffer += `<span class=\"${className}\">`;\n  }\n}\n\n/** @typedef {{kind?: string, sublanguage?: boolean, children: Node[]} | string} Node */\n/** @typedef {{kind?: string, sublanguage?: boolean, children: Node[]} } DataNode */\n/**  */\n\nclass TokenTree {\n  constructor() {\n    /** @type DataNode */\n    this.rootNode = { children: [] };\n    this.stack = [this.rootNode];\n  }\n\n  get top() {\n    return this.stack[this.stack.length - 1];\n  }\n\n  get root() { return this.rootNode; }\n\n  /** @param {Node} node */\n  add(node) {\n    this.top.children.push(node);\n  }\n\n  /** @param {string} kind */\n  openNode(kind) {\n    /** @type Node */\n    const node = { kind, children: [] };\n    this.add(node);\n    this.stack.push(node);\n  }\n\n  closeNode() {\n    if (this.stack.length > 1) {\n      return this.stack.pop();\n    }\n    // eslint-disable-next-line no-undefined\n    return undefined;\n  }\n\n  closeAllNodes() {\n    while (this.closeNode());\n  }\n\n  toJSON() {\n    return JSON.stringify(this.rootNode, null, 4);\n  }\n\n  /**\n   * @typedef { import(\"./html_renderer\").Renderer } Renderer\n   * @param {Renderer} builder\n   */\n  walk(builder) {\n    // this does not\n    return this.constructor._walk(builder, this.rootNode);\n    // this works\n    // return TokenTree._walk(builder, this.rootNode);\n  }\n\n  /**\n   * @param {Renderer} builder\n   * @param {Node} node\n   */\n  static _walk(builder, node) {\n    if (typeof node === \"string\") {\n      builder.addText(node);\n    } else if (node.children) {\n      builder.openNode(node);\n      node.children.forEach((child) => this._walk(builder, child));\n      builder.closeNode(node);\n    }\n    return builder;\n  }\n\n  /**\n   * @param {Node} node\n   */\n  static _collapse(node) {\n    if (typeof node === \"string\") return;\n    if (!node.children) return;\n\n    if (node.children.every(el => typeof el === \"string\")) {\n      // node.text = node.children.join(\"\");\n      // delete node.children;\n      node.children = [node.children.join(\"\")];\n    } else {\n      node.children.forEach((child) => {\n        TokenTree._collapse(child);\n      });\n    }\n  }\n}\n\n/**\n  Currently this is all private API, but this is the minimal API necessary\n  that an Emitter must implement to fully support the parser.\n\n  Minimal interface:\n\n  - addKeyword(text, kind)\n  - addText(text)\n  - addSublanguage(emitter, subLanguageName)\n  - finalize()\n  - openNode(kind)\n  - closeNode()\n  - closeAllNodes()\n  - toHTML()\n\n*/\n\n/**\n * @implements {Emitter}\n */\nclass TokenTreeEmitter extends TokenTree {\n  /**\n   * @param {*} options\n   */\n  constructor(options) {\n    super();\n    this.options = options;\n  }\n\n  /**\n   * @param {string} text\n   * @param {string} kind\n   */\n  addKeyword(text, kind) {\n    if (text === \"\") { return; }\n\n    this.openNode(kind);\n    this.addText(text);\n    this.closeNode();\n  }\n\n  /**\n   * @param {string} text\n   */\n  addText(text) {\n    if (text === \"\") { return; }\n\n    this.add(text);\n  }\n\n  /**\n   * @param {Emitter & {root: DataNode}} emitter\n   * @param {string} name\n   */\n  addSublanguage(emitter, name) {\n    /** @type DataNode */\n    const node = emitter.root;\n    node.kind = name;\n    node.sublanguage = true;\n    this.add(node);\n  }\n\n  toHTML() {\n    const renderer = new HTMLRenderer(this, this.options);\n    return renderer.value();\n  }\n\n  finalize() {\n    return true;\n  }\n}\n\n/**\n * @param {string} value\n * @returns {RegExp}\n * */\nfunction escape(value) {\n  return new RegExp(value.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'm');\n}\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction source(re) {\n  if (!re) return null;\n  if (typeof re === \"string\") return re;\n\n  return re.source;\n}\n\n/**\n * @param {...(RegExp | string) } args\n * @returns {string}\n */\nfunction concat(...args) {\n  const joined = args.map((x) => source(x)).join(\"\");\n  return joined;\n}\n\n/**\n * Any of the passed expresssions may match\n *\n * Creates a huge this | this | that | that match\n * @param {(RegExp | string)[] } args\n * @returns {string}\n */\nfunction either(...args) {\n  const joined = '(' + args.map((x) => source(x)).join(\"|\") + \")\";\n  return joined;\n}\n\n/**\n * @param {RegExp} re\n * @returns {number}\n */\nfunction countMatchGroups(re) {\n  return (new RegExp(re.toString() + '|')).exec('').length - 1;\n}\n\n/**\n * Does lexeme start with a regular expression match at the beginning\n * @param {RegExp} re\n * @param {string} lexeme\n */\nfunction startsWith(re, lexeme) {\n  const match = re && re.exec(lexeme);\n  return match && match.index === 0;\n}\n\n// BACKREF_RE matches an open parenthesis or backreference. To avoid\n// an incorrect parse, it additionally matches the following:\n// - [...] elements, where the meaning of parentheses and escapes change\n// - other escape sequences, so we do not misparse escape sequences as\n//   interesting elements\n// - non-matching or lookahead parentheses, which do not capture. These\n//   follow the '(' with a '?'.\nconst BACKREF_RE = /\\[(?:[^\\\\\\]]|\\\\.)*\\]|\\(\\??|\\\\([1-9][0-9]*)|\\\\./;\n\n// join logically computes regexps.join(separator), but fixes the\n// backreferences so they continue to match.\n// it also places each individual regular expression into it's own\n// match group, keeping track of the sequencing of those match groups\n// is currently an exercise for the caller. :-)\n/**\n * @param {(string | RegExp)[]} regexps\n * @param {string} separator\n * @returns {string}\n */\nfunction join(regexps, separator = \"|\") {\n  let numCaptures = 0;\n\n  return regexps.map((regex) => {\n    numCaptures += 1;\n    const offset = numCaptures;\n    let re = source(regex);\n    let out = '';\n\n    while (re.length > 0) {\n      const match = BACKREF_RE.exec(re);\n      if (!match) {\n        out += re;\n        break;\n      }\n      out += re.substring(0, match.index);\n      re = re.substring(match.index + match[0].length);\n      if (match[0][0] === '\\\\' && match[1]) {\n        // Adjust the backreference.\n        out += '\\\\' + String(Number(match[1]) + offset);\n      } else {\n        out += match[0];\n        if (match[0] === '(') {\n          numCaptures++;\n        }\n      }\n    }\n    return out;\n  }).map(re => `(${re})`).join(separator);\n}\n\n// Common regexps\nconst MATCH_NOTHING_RE = /\\b\\B/;\nconst IDENT_RE = '[a-zA-Z]\\\\w*';\nconst UNDERSCORE_IDENT_RE = '[a-zA-Z_]\\\\w*';\nconst NUMBER_RE = '\\\\b\\\\d+(\\\\.\\\\d+)?';\nconst C_NUMBER_RE = '(-?)(\\\\b0[xX][a-fA-F0-9]+|(\\\\b\\\\d+(\\\\.\\\\d*)?|\\\\.\\\\d+)([eE][-+]?\\\\d+)?)'; // 0x..., 0..., decimal, float\nconst BINARY_NUMBER_RE = '\\\\b(0b[01]+)'; // 0b...\nconst RE_STARTERS_RE = '!|!=|!==|%|%=|&|&&|&=|\\\\*|\\\\*=|\\\\+|\\\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\\\?|\\\\[|\\\\{|\\\\(|\\\\^|\\\\^=|\\\\||\\\\|=|\\\\|\\\\||~';\n\n/**\n* @param { Partial<Mode> & {binary?: string | RegExp} } opts\n*/\nconst SHEBANG = (opts = {}) => {\n  const beginShebang = /^#![ ]*\\//;\n  if (opts.binary) {\n    opts.begin = concat(\n      beginShebang,\n      /.*\\b/,\n      opts.binary,\n      /\\b.*/);\n  }\n  return inherit({\n    className: 'meta',\n    begin: beginShebang,\n    end: /$/,\n    relevance: 0,\n    /** @type {ModeCallback} */\n    \"on:begin\": (m, resp) => {\n      if (m.index !== 0) resp.ignoreMatch();\n    }\n  }, opts);\n};\n\n// Common modes\nconst BACKSLASH_ESCAPE = {\n  begin: '\\\\\\\\[\\\\s\\\\S]', relevance: 0\n};\nconst APOS_STRING_MODE = {\n  className: 'string',\n  begin: '\\'',\n  end: '\\'',\n  illegal: '\\\\n',\n  contains: [BACKSLASH_ESCAPE]\n};\nconst QUOTE_STRING_MODE = {\n  className: 'string',\n  begin: '\"',\n  end: '\"',\n  illegal: '\\\\n',\n  contains: [BACKSLASH_ESCAPE]\n};\nconst PHRASAL_WORDS_MODE = {\n  begin: /\\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\\b/\n};\n/**\n * Creates a comment mode\n *\n * @param {string | RegExp} begin\n * @param {string | RegExp} end\n * @param {Mode | {}} [modeOptions]\n * @returns {Partial<Mode>}\n */\nconst COMMENT = function(begin, end, modeOptions = {}) {\n  const mode = inherit(\n    {\n      className: 'comment',\n      begin,\n      end,\n      contains: []\n    },\n    modeOptions\n  );\n  mode.contains.push(PHRASAL_WORDS_MODE);\n  mode.contains.push({\n    className: 'doctag',\n    begin: '(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):',\n    relevance: 0\n  });\n  return mode;\n};\nconst C_LINE_COMMENT_MODE = COMMENT('//', '$');\nconst C_BLOCK_COMMENT_MODE = COMMENT('/\\\\*', '\\\\*/');\nconst HASH_COMMENT_MODE = COMMENT('#', '$');\nconst NUMBER_MODE = {\n  className: 'number',\n  begin: NUMBER_RE,\n  relevance: 0\n};\nconst C_NUMBER_MODE = {\n  className: 'number',\n  begin: C_NUMBER_RE,\n  relevance: 0\n};\nconst BINARY_NUMBER_MODE = {\n  className: 'number',\n  begin: BINARY_NUMBER_RE,\n  relevance: 0\n};\nconst CSS_NUMBER_MODE = {\n  className: 'number',\n  begin: NUMBER_RE + '(' +\n    '%|em|ex|ch|rem' +\n    '|vw|vh|vmin|vmax' +\n    '|cm|mm|in|pt|pc|px' +\n    '|deg|grad|rad|turn' +\n    '|s|ms' +\n    '|Hz|kHz' +\n    '|dpi|dpcm|dppx' +\n    ')?',\n  relevance: 0\n};\nconst REGEXP_MODE = {\n  // this outer rule makes sure we actually have a WHOLE regex and not simply\n  // an expression such as:\n  //\n  //     3 / something\n  //\n  // (which will then blow up when regex's `illegal` sees the newline)\n  begin: /(?=\\/[^/\\n]*\\/)/,\n  contains: [{\n    className: 'regexp',\n    begin: /\\//,\n    end: /\\/[gimuy]*/,\n    illegal: /\\n/,\n    contains: [\n      BACKSLASH_ESCAPE,\n      {\n        begin: /\\[/,\n        end: /\\]/,\n        relevance: 0,\n        contains: [BACKSLASH_ESCAPE]\n      }\n    ]\n  }]\n};\nconst TITLE_MODE = {\n  className: 'title',\n  begin: IDENT_RE,\n  relevance: 0\n};\nconst UNDERSCORE_TITLE_MODE = {\n  className: 'title',\n  begin: UNDERSCORE_IDENT_RE,\n  relevance: 0\n};\nconst METHOD_GUARD = {\n  // excludes method names from keyword processing\n  begin: '\\\\.\\\\s*' + UNDERSCORE_IDENT_RE,\n  relevance: 0\n};\n\n/**\n * Adds end same as begin mechanics to a mode\n *\n * Your mode must include at least a single () match group as that first match\n * group is what is used for comparison\n * @param {Partial<Mode>} mode\n */\nconst END_SAME_AS_BEGIN = function(mode) {\n  return Object.assign(mode,\n    {\n      /** @type {ModeCallback} */\n      'on:begin': (m, resp) => { resp.data._beginMatch = m[1]; },\n      /** @type {ModeCallback} */\n      'on:end': (m, resp) => { if (resp.data._beginMatch !== m[1]) resp.ignoreMatch(); }\n    });\n};\n\nvar MODES = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    MATCH_NOTHING_RE: MATCH_NOTHING_RE,\n    IDENT_RE: IDENT_RE,\n    UNDERSCORE_IDENT_RE: UNDERSCORE_IDENT_RE,\n    NUMBER_RE: NUMBER_RE,\n    C_NUMBER_RE: C_NUMBER_RE,\n    BINARY_NUMBER_RE: BINARY_NUMBER_RE,\n    RE_STARTERS_RE: RE_STARTERS_RE,\n    SHEBANG: SHEBANG,\n    BACKSLASH_ESCAPE: BACKSLASH_ESCAPE,\n    APOS_STRING_MODE: APOS_STRING_MODE,\n    QUOTE_STRING_MODE: QUOTE_STRING_MODE,\n    PHRASAL_WORDS_MODE: PHRASAL_WORDS_MODE,\n    COMMENT: COMMENT,\n    C_LINE_COMMENT_MODE: C_LINE_COMMENT_MODE,\n    C_BLOCK_COMMENT_MODE: C_BLOCK_COMMENT_MODE,\n    HASH_COMMENT_MODE: HASH_COMMENT_MODE,\n    NUMBER_MODE: NUMBER_MODE,\n    C_NUMBER_MODE: C_NUMBER_MODE,\n    BINARY_NUMBER_MODE: BINARY_NUMBER_MODE,\n    CSS_NUMBER_MODE: CSS_NUMBER_MODE,\n    REGEXP_MODE: REGEXP_MODE,\n    TITLE_MODE: TITLE_MODE,\n    UNDERSCORE_TITLE_MODE: UNDERSCORE_TITLE_MODE,\n    METHOD_GUARD: METHOD_GUARD,\n    END_SAME_AS_BEGIN: END_SAME_AS_BEGIN\n});\n\n// Grammar extensions / plugins\n// See: https://github.com/highlightjs/highlight.js/issues/2833\n\n// Grammar extensions allow \"syntactic sugar\" to be added to the grammar modes\n// without requiring any underlying changes to the compiler internals.\n\n// `compileMatch` being the perfect small example of now allowing a grammar\n// author to write `match` when they desire to match a single expression rather\n// than being forced to use `begin`.  The extension then just moves `match` into\n// `begin` when it runs.  Ie, no features have been added, but we've just made\n// the experience of writing (and reading grammars) a little bit nicer.\n\n// ------\n\n// TODO: We need negative look-behind support to do this properly\n/**\n * Skip a match if it has a preceding dot\n *\n * This is used for `beginKeywords` to prevent matching expressions such as\n * `bob.keyword.do()`. The mode compiler automatically wires this up as a\n * special _internal_ 'on:begin' callback for modes with `beginKeywords`\n * @param {RegExpMatchArray} match\n * @param {CallbackResponse} response\n */\nfunction skipIfhasPrecedingDot(match, response) {\n  const before = match.input[match.index - 1];\n  if (before === \".\") {\n    response.ignoreMatch();\n  }\n}\n\n\n/**\n * `beginKeywords` syntactic sugar\n * @type {CompilerExt}\n */\nfunction beginKeywords(mode, parent) {\n  if (!parent) return;\n  if (!mode.beginKeywords) return;\n\n  // for languages with keywords that include non-word characters checking for\n  // a word boundary is not sufficient, so instead we check for a word boundary\n  // or whitespace - this does no harm in any case since our keyword engine\n  // doesn't allow spaces in keywords anyways and we still check for the boundary\n  // first\n  mode.begin = '\\\\b(' + mode.beginKeywords.split(' ').join('|') + ')(?!\\\\.)(?=\\\\b|\\\\s)';\n  mode.__beforeBegin = skipIfhasPrecedingDot;\n  mode.keywords = mode.keywords || mode.beginKeywords;\n  delete mode.beginKeywords;\n\n  // prevents double relevance, the keywords themselves provide\n  // relevance, the mode doesn't need to double it\n  // eslint-disable-next-line no-undefined\n  if (mode.relevance === undefined) mode.relevance = 0;\n}\n\n/**\n * Allow `illegal` to contain an array of illegal values\n * @type {CompilerExt}\n */\nfunction compileIllegal(mode, _parent) {\n  if (!Array.isArray(mode.illegal)) return;\n\n  mode.illegal = either(...mode.illegal);\n}\n\n/**\n * `match` to match a single expression for readability\n * @type {CompilerExt}\n */\nfunction compileMatch(mode, _parent) {\n  if (!mode.match) return;\n  if (mode.begin || mode.end) throw new Error(\"begin & end are not supported with match\");\n\n  mode.begin = mode.match;\n  delete mode.match;\n}\n\n/**\n * provides the default 1 relevance to all modes\n * @type {CompilerExt}\n */\nfunction compileRelevance(mode, _parent) {\n  // eslint-disable-next-line no-undefined\n  if (mode.relevance === undefined) mode.relevance = 1;\n}\n\n// keywords that should have no default relevance value\nconst COMMON_KEYWORDS = [\n  'of',\n  'and',\n  'for',\n  'in',\n  'not',\n  'or',\n  'if',\n  'then',\n  'parent', // common variable name\n  'list', // common variable name\n  'value' // common variable name\n];\n\nconst DEFAULT_KEYWORD_CLASSNAME = \"keyword\";\n\n/**\n * Given raw keywords from a language definition, compile them.\n *\n * @param {string | Record<string,string|string[]> | Array<string>} rawKeywords\n * @param {boolean} caseInsensitive\n */\nfunction compileKeywords(rawKeywords, caseInsensitive, className = DEFAULT_KEYWORD_CLASSNAME) {\n  /** @type KeywordDict */\n  const compiledKeywords = {};\n\n  // input can be a string of keywords, an array of keywords, or a object with\n  // named keys representing className (which can then point to a string or array)\n  if (typeof rawKeywords === 'string') {\n    compileList(className, rawKeywords.split(\" \"));\n  } else if (Array.isArray(rawKeywords)) {\n    compileList(className, rawKeywords);\n  } else {\n    Object.keys(rawKeywords).forEach(function(className) {\n      // collapse all our objects back into the parent object\n      Object.assign(\n        compiledKeywords,\n        compileKeywords(rawKeywords[className], caseInsensitive, className)\n      );\n    });\n  }\n  return compiledKeywords;\n\n  // ---\n\n  /**\n   * Compiles an individual list of keywords\n   *\n   * Ex: \"for if when while|5\"\n   *\n   * @param {string} className\n   * @param {Array<string>} keywordList\n   */\n  function compileList(className, keywordList) {\n    if (caseInsensitive) {\n      keywordList = keywordList.map(x => x.toLowerCase());\n    }\n    keywordList.forEach(function(keyword) {\n      const pair = keyword.split('|');\n      compiledKeywords[pair[0]] = [className, scoreForKeyword(pair[0], pair[1])];\n    });\n  }\n}\n\n/**\n * Returns the proper score for a given keyword\n *\n * Also takes into account comment keywords, which will be scored 0 UNLESS\n * another score has been manually assigned.\n * @param {string} keyword\n * @param {string} [providedScore]\n */\nfunction scoreForKeyword(keyword, providedScore) {\n  // manual scores always win over common keywords\n  // so you can force a score of 1 if you really insist\n  if (providedScore) {\n    return Number(providedScore);\n  }\n\n  return commonKeyword(keyword) ? 0 : 1;\n}\n\n/**\n * Determines if a given keyword is common or not\n *\n * @param {string} keyword */\nfunction commonKeyword(keyword) {\n  return COMMON_KEYWORDS.includes(keyword.toLowerCase());\n}\n\n// compilation\n\n/**\n * Compiles a language definition result\n *\n * Given the raw result of a language definition (Language), compiles this so\n * that it is ready for highlighting code.\n * @param {Language} language\n * @param {{plugins: HLJSPlugin[]}} opts\n * @returns {CompiledLanguage}\n */\nfunction compileLanguage(language, { plugins }) {\n  /**\n   * Builds a regex with the case sensativility of the current language\n   *\n   * @param {RegExp | string} value\n   * @param {boolean} [global]\n   */\n  function langRe(value, global) {\n    return new RegExp(\n      source(value),\n      'm' + (language.case_insensitive ? 'i' : '') + (global ? 'g' : '')\n    );\n  }\n\n  /**\n    Stores multiple regular expressions and allows you to quickly search for\n    them all in a string simultaneously - returning the first match.  It does\n    this by creating a huge (a|b|c) regex - each individual item wrapped with ()\n    and joined by `|` - using match groups to track position.  When a match is\n    found checking which position in the array has content allows us to figure\n    out which of the original regexes / match groups triggered the match.\n\n    The match object itself (the result of `Regex.exec`) is returned but also\n    enhanced by merging in any meta-data that was registered with the regex.\n    This is how we keep track of which mode matched, and what type of rule\n    (`illegal`, `begin`, end, etc).\n  */\n  class MultiRegex {\n    constructor() {\n      this.matchIndexes = {};\n      // @ts-ignore\n      this.regexes = [];\n      this.matchAt = 1;\n      this.position = 0;\n    }\n\n    // @ts-ignore\n    addRule(re, opts) {\n      opts.position = this.position++;\n      // @ts-ignore\n      this.matchIndexes[this.matchAt] = opts;\n      this.regexes.push([opts, re]);\n      this.matchAt += countMatchGroups(re) + 1;\n    }\n\n    compile() {\n      if (this.regexes.length === 0) {\n        // avoids the need to check length every time exec is called\n        // @ts-ignore\n        this.exec = () => null;\n      }\n      const terminators = this.regexes.map(el => el[1]);\n      this.matcherRe = langRe(join(terminators), true);\n      this.lastIndex = 0;\n    }\n\n    /** @param {string} s */\n    exec(s) {\n      this.matcherRe.lastIndex = this.lastIndex;\n      const match = this.matcherRe.exec(s);\n      if (!match) { return null; }\n\n      // eslint-disable-next-line no-undefined\n      const i = match.findIndex((el, i) => i > 0 && el !== undefined);\n      // @ts-ignore\n      const matchData = this.matchIndexes[i];\n      // trim off any earlier non-relevant match groups (ie, the other regex\n      // match groups that make up the multi-matcher)\n      match.splice(0, i);\n\n      return Object.assign(match, matchData);\n    }\n  }\n\n  /*\n    Created to solve the key deficiently with MultiRegex - there is no way to\n    test for multiple matches at a single location.  Why would we need to do\n    that?  In the future a more dynamic engine will allow certain matches to be\n    ignored.  An example: if we matched say the 3rd regex in a large group but\n    decided to ignore it - we'd need to started testing again at the 4th\n    regex... but MultiRegex itself gives us no real way to do that.\n\n    So what this class creates MultiRegexs on the fly for whatever search\n    position they are needed.\n\n    NOTE: These additional MultiRegex objects are created dynamically.  For most\n    grammars most of the time we will never actually need anything more than the\n    first MultiRegex - so this shouldn't have too much overhead.\n\n    Say this is our search group, and we match regex3, but wish to ignore it.\n\n      regex1 | regex2 | regex3 | regex4 | regex5    ' ie, startAt = 0\n\n    What we need is a new MultiRegex that only includes the remaining\n    possibilities:\n\n      regex4 | regex5                               ' ie, startAt = 3\n\n    This class wraps all that complexity up in a simple API... `startAt` decides\n    where in the array of expressions to start doing the matching. It\n    auto-increments, so if a match is found at position 2, then startAt will be\n    set to 3.  If the end is reached startAt will return to 0.\n\n    MOST of the time the parser will be setting startAt manually to 0.\n  */\n  class ResumableMultiRegex {\n    constructor() {\n      // @ts-ignore\n      this.rules = [];\n      // @ts-ignore\n      this.multiRegexes = [];\n      this.count = 0;\n\n      this.lastIndex = 0;\n      this.regexIndex = 0;\n    }\n\n    // @ts-ignore\n    getMatcher(index) {\n      if (this.multiRegexes[index]) return this.multiRegexes[index];\n\n      const matcher = new MultiRegex();\n      this.rules.slice(index).forEach(([re, opts]) => matcher.addRule(re, opts));\n      matcher.compile();\n      this.multiRegexes[index] = matcher;\n      return matcher;\n    }\n\n    resumingScanAtSamePosition() {\n      return this.regexIndex !== 0;\n    }\n\n    considerAll() {\n      this.regexIndex = 0;\n    }\n\n    // @ts-ignore\n    addRule(re, opts) {\n      this.rules.push([re, opts]);\n      if (opts.type === \"begin\") this.count++;\n    }\n\n    /** @param {string} s */\n    exec(s) {\n      const m = this.getMatcher(this.regexIndex);\n      m.lastIndex = this.lastIndex;\n      let result = m.exec(s);\n\n      // The following is because we have no easy way to say \"resume scanning at the\n      // existing position but also skip the current rule ONLY\". What happens is\n      // all prior rules are also skipped which can result in matching the wrong\n      // thing. Example of matching \"booger\":\n\n      // our matcher is [string, \"booger\", number]\n      //\n      // ....booger....\n\n      // if \"booger\" is ignored then we'd really need a regex to scan from the\n      // SAME position for only: [string, number] but ignoring \"booger\" (if it\n      // was the first match), a simple resume would scan ahead who knows how\n      // far looking only for \"number\", ignoring potential string matches (or\n      // future \"booger\" matches that might be valid.)\n\n      // So what we do: We execute two matchers, one resuming at the same\n      // position, but the second full matcher starting at the position after:\n\n      //     /--- resume first regex match here (for [number])\n      //     |/---- full match here for [string, \"booger\", number]\n      //     vv\n      // ....booger....\n\n      // Which ever results in a match first is then used. So this 3-4 step\n      // process essentially allows us to say \"match at this position, excluding\n      // a prior rule that was ignored\".\n      //\n      // 1. Match \"booger\" first, ignore. Also proves that [string] does non match.\n      // 2. Resume matching for [number]\n      // 3. Match at index + 1 for [string, \"booger\", number]\n      // 4. If #2 and #3 result in matches, which came first?\n      if (this.resumingScanAtSamePosition()) {\n        if (result && result.index === this.lastIndex) ; else { // use the second matcher result\n          const m2 = this.getMatcher(0);\n          m2.lastIndex = this.lastIndex + 1;\n          result = m2.exec(s);\n        }\n      }\n\n      if (result) {\n        this.regexIndex += result.position + 1;\n        if (this.regexIndex === this.count) {\n          // wrap-around to considering all matches again\n          this.considerAll();\n        }\n      }\n\n      return result;\n    }\n  }\n\n  /**\n   * Given a mode, builds a huge ResumableMultiRegex that can be used to walk\n   * the content and find matches.\n   *\n   * @param {CompiledMode} mode\n   * @returns {ResumableMultiRegex}\n   */\n  function buildModeRegex(mode) {\n    const mm = new ResumableMultiRegex();\n\n    mode.contains.forEach(term => mm.addRule(term.begin, { rule: term, type: \"begin\" }));\n\n    if (mode.terminatorEnd) {\n      mm.addRule(mode.terminatorEnd, { type: \"end\" });\n    }\n    if (mode.illegal) {\n      mm.addRule(mode.illegal, { type: \"illegal\" });\n    }\n\n    return mm;\n  }\n\n  /** skip vs abort vs ignore\n   *\n   * @skip   - The mode is still entered and exited normally (and contains rules apply),\n   *           but all content is held and added to the parent buffer rather than being\n   *           output when the mode ends.  Mostly used with `sublanguage` to build up\n   *           a single large buffer than can be parsed by sublanguage.\n   *\n   *             - The mode begin ands ends normally.\n   *             - Content matched is added to the parent mode buffer.\n   *             - The parser cursor is moved forward normally.\n   *\n   * @abort  - A hack placeholder until we have ignore.  Aborts the mode (as if it\n   *           never matched) but DOES NOT continue to match subsequent `contains`\n   *           modes.  Abort is bad/suboptimal because it can result in modes\n   *           farther down not getting applied because an earlier rule eats the\n   *           content but then aborts.\n   *\n   *             - The mode does not begin.\n   *             - Content matched by `begin` is added to the mode buffer.\n   *             - The parser cursor is moved forward accordingly.\n   *\n   * @ignore - Ignores the mode (as if it never matched) and continues to match any\n   *           subsequent `contains` modes.  Ignore isn't technically possible with\n   *           the current parser implementation.\n   *\n   *             - The mode does not begin.\n   *             - Content matched by `begin` is ignored.\n   *             - The parser cursor is not moved forward.\n   */\n\n  /**\n   * Compiles an individual mode\n   *\n   * This can raise an error if the mode contains certain detectable known logic\n   * issues.\n   * @param {Mode} mode\n   * @param {CompiledMode | null} [parent]\n   * @returns {CompiledMode | never}\n   */\n  function compileMode(mode, parent) {\n    const cmode = /** @type CompiledMode */ (mode);\n    if (mode.isCompiled) return cmode;\n\n    [\n      // do this early so compiler extensions generally don't have to worry about\n      // the distinction between match/begin\n      compileMatch\n    ].forEach(ext => ext(mode, parent));\n\n    language.compilerExtensions.forEach(ext => ext(mode, parent));\n\n    // __beforeBegin is considered private API, internal use only\n    mode.__beforeBegin = null;\n\n    [\n      beginKeywords,\n      // do this later so compiler extensions that come earlier have access to the\n      // raw array if they wanted to perhaps manipulate it, etc.\n      compileIllegal,\n      // default to 1 relevance if not specified\n      compileRelevance\n    ].forEach(ext => ext(mode, parent));\n\n    mode.isCompiled = true;\n\n    let keywordPattern = null;\n    if (typeof mode.keywords === \"object\") {\n      keywordPattern = mode.keywords.$pattern;\n      delete mode.keywords.$pattern;\n    }\n\n    if (mode.keywords) {\n      mode.keywords = compileKeywords(mode.keywords, language.case_insensitive);\n    }\n\n    // both are not allowed\n    if (mode.lexemes && keywordPattern) {\n      throw new Error(\"ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) \");\n    }\n\n    // `mode.lexemes` was the old standard before we added and now recommend\n    // using `keywords.$pattern` to pass the keyword pattern\n    keywordPattern = keywordPattern || mode.lexemes || /\\w+/;\n    cmode.keywordPatternRe = langRe(keywordPattern, true);\n\n    if (parent) {\n      if (!mode.begin) mode.begin = /\\B|\\b/;\n      cmode.beginRe = langRe(mode.begin);\n      if (mode.endSameAsBegin) mode.end = mode.begin;\n      if (!mode.end && !mode.endsWithParent) mode.end = /\\B|\\b/;\n      if (mode.end) cmode.endRe = langRe(mode.end);\n      cmode.terminatorEnd = source(mode.end) || '';\n      if (mode.endsWithParent && parent.terminatorEnd) {\n        cmode.terminatorEnd += (mode.end ? '|' : '') + parent.terminatorEnd;\n      }\n    }\n    if (mode.illegal) cmode.illegalRe = langRe(/** @type {RegExp | string} */ (mode.illegal));\n    if (!mode.contains) mode.contains = [];\n\n    mode.contains = [].concat(...mode.contains.map(function(c) {\n      return expandOrCloneMode(c === 'self' ? mode : c);\n    }));\n    mode.contains.forEach(function(c) { compileMode(/** @type Mode */ (c), cmode); });\n\n    if (mode.starts) {\n      compileMode(mode.starts, parent);\n    }\n\n    cmode.matcher = buildModeRegex(cmode);\n    return cmode;\n  }\n\n  if (!language.compilerExtensions) language.compilerExtensions = [];\n\n  // self is not valid at the top-level\n  if (language.contains && language.contains.includes('self')) {\n    throw new Error(\"ERR: contains `self` is not supported at the top-level of a language.  See documentation.\");\n  }\n\n  // we need a null object, which inherit will guarantee\n  language.classNameAliases = inherit(language.classNameAliases || {});\n\n  return compileMode(/** @type Mode */ (language));\n}\n\n/**\n * Determines if a mode has a dependency on it's parent or not\n *\n * If a mode does have a parent dependency then often we need to clone it if\n * it's used in multiple places so that each copy points to the correct parent,\n * where-as modes without a parent can often safely be re-used at the bottom of\n * a mode chain.\n *\n * @param {Mode | null} mode\n * @returns {boolean} - is there a dependency on the parent?\n * */\nfunction dependencyOnParent(mode) {\n  if (!mode) return false;\n\n  return mode.endsWithParent || dependencyOnParent(mode.starts);\n}\n\n/**\n * Expands a mode or clones it if necessary\n *\n * This is necessary for modes with parental dependenceis (see notes on\n * `dependencyOnParent`) and for nodes that have `variants` - which must then be\n * exploded into their own individual modes at compile time.\n *\n * @param {Mode} mode\n * @returns {Mode | Mode[]}\n * */\nfunction expandOrCloneMode(mode) {\n  if (mode.variants && !mode.cachedVariants) {\n    mode.cachedVariants = mode.variants.map(function(variant) {\n      return inherit(mode, { variants: null }, variant);\n    });\n  }\n\n  // EXPAND\n  // if we have variants then essentially \"replace\" the mode with the variants\n  // this happens in compileMode, where this function is called from\n  if (mode.cachedVariants) {\n    return mode.cachedVariants;\n  }\n\n  // CLONE\n  // if we have dependencies on parents then we need a unique\n  // instance of ourselves, so we can be reused with many\n  // different parents without issue\n  if (dependencyOnParent(mode)) {\n    return inherit(mode, { starts: mode.starts ? inherit(mode.starts) : null });\n  }\n\n  if (Object.isFrozen(mode)) {\n    return inherit(mode);\n  }\n\n  // no special dependency issues, just return ourselves\n  return mode;\n}\n\nvar version = \"10.7.3\";\n\n// @ts-nocheck\n\nfunction hasValueOrEmptyAttribute(value) {\n  return Boolean(value || value === \"\");\n}\n\nfunction BuildVuePlugin(hljs) {\n  const Component = {\n    props: [\"language\", \"code\", \"autodetect\"],\n    data: function() {\n      return {\n        detectedLanguage: \"\",\n        unknownLanguage: false\n      };\n    },\n    computed: {\n      className() {\n        if (this.unknownLanguage) return \"\";\n\n        return \"hljs \" + this.detectedLanguage;\n      },\n      highlighted() {\n        // no idea what language to use, return raw code\n        if (!this.autoDetect && !hljs.getLanguage(this.language)) {\n          console.warn(`The language \"${this.language}\" you specified could not be found.`);\n          this.unknownLanguage = true;\n          return escapeHTML(this.code);\n        }\n\n        let result = {};\n        if (this.autoDetect) {\n          result = hljs.highlightAuto(this.code);\n          this.detectedLanguage = result.language;\n        } else {\n          result = hljs.highlight(this.language, this.code, this.ignoreIllegals);\n          this.detectedLanguage = this.language;\n        }\n        return result.value;\n      },\n      autoDetect() {\n        return !this.language || hasValueOrEmptyAttribute(this.autodetect);\n      },\n      ignoreIllegals() {\n        return true;\n      }\n    },\n    // this avoids needing to use a whole Vue compilation pipeline just\n    // to build Highlight.js\n    render(createElement) {\n      return createElement(\"pre\", {}, [\n        createElement(\"code\", {\n          class: this.className,\n          domProps: { innerHTML: this.highlighted }\n        })\n      ]);\n    }\n    // template: `<pre><code :class=\"className\" v-html=\"highlighted\"></code></pre>`\n  };\n\n  const VuePlugin = {\n    install(Vue) {\n      Vue.component('highlightjs', Component);\n    }\n  };\n\n  return { Component, VuePlugin };\n}\n\n/* plugin itself */\n\n/** @type {HLJSPlugin} */\nconst mergeHTMLPlugin = {\n  \"after:highlightElement\": ({ el, result, text }) => {\n    const originalStream = nodeStream(el);\n    if (!originalStream.length) return;\n\n    const resultNode = document.createElement('div');\n    resultNode.innerHTML = result.value;\n    result.value = mergeStreams(originalStream, nodeStream(resultNode), text);\n  }\n};\n\n/* Stream merging support functions */\n\n/**\n * @typedef Event\n * @property {'start'|'stop'} event\n * @property {number} offset\n * @property {Node} node\n */\n\n/**\n * @param {Node} node\n */\nfunction tag(node) {\n  return node.nodeName.toLowerCase();\n}\n\n/**\n * @param {Node} node\n */\nfunction nodeStream(node) {\n  /** @type Event[] */\n  const result = [];\n  (function _nodeStream(node, offset) {\n    for (let child = node.firstChild; child; child = child.nextSibling) {\n      if (child.nodeType === 3) {\n        offset += child.nodeValue.length;\n      } else if (child.nodeType === 1) {\n        result.push({\n          event: 'start',\n          offset: offset,\n          node: child\n        });\n        offset = _nodeStream(child, offset);\n        // Prevent void elements from having an end tag that would actually\n        // double them in the output. There are more void elements in HTML\n        // but we list only those realistically expected in code display.\n        if (!tag(child).match(/br|hr|img|input/)) {\n          result.push({\n            event: 'stop',\n            offset: offset,\n            node: child\n          });\n        }\n      }\n    }\n    return offset;\n  })(node, 0);\n  return result;\n}\n\n/**\n * @param {any} original - the original stream\n * @param {any} highlighted - stream of the highlighted source\n * @param {string} value - the original source itself\n */\nfunction mergeStreams(original, highlighted, value) {\n  let processed = 0;\n  let result = '';\n  const nodeStack = [];\n\n  function selectStream() {\n    if (!original.length || !highlighted.length) {\n      return original.length ? original : highlighted;\n    }\n    if (original[0].offset !== highlighted[0].offset) {\n      return (original[0].offset < highlighted[0].offset) ? original : highlighted;\n    }\n\n    /*\n    To avoid starting the stream just before it should stop the order is\n    ensured that original always starts first and closes last:\n\n    if (event1 == 'start' && event2 == 'start')\n      return original;\n    if (event1 == 'start' && event2 == 'stop')\n      return highlighted;\n    if (event1 == 'stop' && event2 == 'start')\n      return original;\n    if (event1 == 'stop' && event2 == 'stop')\n      return highlighted;\n\n    ... which is collapsed to:\n    */\n    return highlighted[0].event === 'start' ? original : highlighted;\n  }\n\n  /**\n   * @param {Node} node\n   */\n  function open(node) {\n    /** @param {Attr} attr */\n    function attributeString(attr) {\n      return ' ' + attr.nodeName + '=\"' + escapeHTML(attr.value) + '\"';\n    }\n    // @ts-ignore\n    result += '<' + tag(node) + [].map.call(node.attributes, attributeString).join('') + '>';\n  }\n\n  /**\n   * @param {Node} node\n   */\n  function close(node) {\n    result += '</' + tag(node) + '>';\n  }\n\n  /**\n   * @param {Event} event\n   */\n  function render(event) {\n    (event.event === 'start' ? open : close)(event.node);\n  }\n\n  while (original.length || highlighted.length) {\n    let stream = selectStream();\n    result += escapeHTML(value.substring(processed, stream[0].offset));\n    processed = stream[0].offset;\n    if (stream === original) {\n      /*\n      On any opening or closing tag of the original markup we first close\n      the entire highlighted node stack, then render the original tag along\n      with all the following original tags at the same offset and then\n      reopen all the tags on the highlighted stack.\n      */\n      nodeStack.reverse().forEach(close);\n      do {\n        render(stream.splice(0, 1)[0]);\n        stream = selectStream();\n      } while (stream === original && stream.length && stream[0].offset === processed);\n      nodeStack.reverse().forEach(open);\n    } else {\n      if (stream[0].event === 'start') {\n        nodeStack.push(stream[0].node);\n      } else {\n        nodeStack.pop();\n      }\n      render(stream.splice(0, 1)[0]);\n    }\n  }\n  return result + escapeHTML(value.substr(processed));\n}\n\n/*\n\nFor the reasoning behind this please see:\nhttps://github.com/highlightjs/highlight.js/issues/2880#issuecomment-747275419\n\n*/\n\n/**\n * @type {Record<string, boolean>}\n */\nconst seenDeprecations = {};\n\n/**\n * @param {string} message\n */\nconst error = (message) => {\n  console.error(message);\n};\n\n/**\n * @param {string} message\n * @param {any} args\n */\nconst warn = (message, ...args) => {\n  console.log(`WARN: ${message}`, ...args);\n};\n\n/**\n * @param {string} version\n * @param {string} message\n */\nconst deprecated = (version, message) => {\n  if (seenDeprecations[`${version}/${message}`]) return;\n\n  console.log(`Deprecated as of ${version}. ${message}`);\n  seenDeprecations[`${version}/${message}`] = true;\n};\n\n/*\nSyntax highlighting with language autodetection.\nhttps://highlightjs.org/\n*/\n\nconst escape$1 = escapeHTML;\nconst inherit$1 = inherit;\nconst NO_MATCH = Symbol(\"nomatch\");\n\n/**\n * @param {any} hljs - object that is extended (legacy)\n * @returns {HLJSApi}\n */\nconst HLJS = function(hljs) {\n  // Global internal variables used within the highlight.js library.\n  /** @type {Record<string, Language>} */\n  const languages = Object.create(null);\n  /** @type {Record<string, string>} */\n  const aliases = Object.create(null);\n  /** @type {HLJSPlugin[]} */\n  const plugins = [];\n\n  // safe/production mode - swallows more errors, tries to keep running\n  // even if a single syntax or parse hits a fatal error\n  let SAFE_MODE = true;\n  const fixMarkupRe = /(^(<[^>]+>|\\t|)+|\\n)/gm;\n  const LANGUAGE_NOT_FOUND = \"Could not find the language '{}', did you forget to load/include a language module?\";\n  /** @type {Language} */\n  const PLAINTEXT_LANGUAGE = { disableAutodetect: true, name: 'Plain text', contains: [] };\n\n  // Global options used when within external APIs. This is modified when\n  // calling the `hljs.configure` function.\n  /** @type HLJSOptions */\n  let options = {\n    noHighlightRe: /^(no-?highlight)$/i,\n    languageDetectRe: /\\blang(?:uage)?-([\\w-]+)\\b/i,\n    classPrefix: 'hljs-',\n    tabReplace: null,\n    useBR: false,\n    languages: null,\n    // beta configuration options, subject to change, welcome to discuss\n    // https://github.com/highlightjs/highlight.js/issues/1086\n    __emitter: TokenTreeEmitter\n  };\n\n  /* Utility functions */\n\n  /**\n   * Tests a language name to see if highlighting should be skipped\n   * @param {string} languageName\n   */\n  function shouldNotHighlight(languageName) {\n    return options.noHighlightRe.test(languageName);\n  }\n\n  /**\n   * @param {HighlightedHTMLElement} block - the HTML element to determine language for\n   */\n  function blockLanguage(block) {\n    let classes = block.className + ' ';\n\n    classes += block.parentNode ? block.parentNode.className : '';\n\n    // language-* takes precedence over non-prefixed class names.\n    const match = options.languageDetectRe.exec(classes);\n    if (match) {\n      const language = getLanguage(match[1]);\n      if (!language) {\n        warn(LANGUAGE_NOT_FOUND.replace(\"{}\", match[1]));\n        warn(\"Falling back to no-highlight mode for this block.\", block);\n      }\n      return language ? match[1] : 'no-highlight';\n    }\n\n    return classes\n      .split(/\\s+/)\n      .find((_class) => shouldNotHighlight(_class) || getLanguage(_class));\n  }\n\n  /**\n   * Core highlighting function.\n   *\n   * OLD API\n   * highlight(lang, code, ignoreIllegals, continuation)\n   *\n   * NEW API\n   * highlight(code, {lang, ignoreIllegals})\n   *\n   * @param {string} codeOrlanguageName - the language to use for highlighting\n   * @param {string | HighlightOptions} optionsOrCode - the code to highlight\n   * @param {boolean} [ignoreIllegals] - whether to ignore illegal matches, default is to bail\n   * @param {CompiledMode} [continuation] - current continuation mode, if any\n   *\n   * @returns {HighlightResult} Result - an object that represents the result\n   * @property {string} language - the language name\n   * @property {number} relevance - the relevance score\n   * @property {string} value - the highlighted HTML code\n   * @property {string} code - the original raw code\n   * @property {CompiledMode} top - top of the current mode stack\n   * @property {boolean} illegal - indicates whether any illegal matches were found\n  */\n  function highlight(codeOrlanguageName, optionsOrCode, ignoreIllegals, continuation) {\n    let code = \"\";\n    let languageName = \"\";\n    if (typeof optionsOrCode === \"object\") {\n      code = codeOrlanguageName;\n      ignoreIllegals = optionsOrCode.ignoreIllegals;\n      languageName = optionsOrCode.language;\n      // continuation not supported at all via the new API\n      // eslint-disable-next-line no-undefined\n      continuation = undefined;\n    } else {\n      // old API\n      deprecated(\"10.7.0\", \"highlight(lang, code, ...args) has been deprecated.\");\n      deprecated(\"10.7.0\", \"Please use highlight(code, options) instead.\\nhttps://github.com/highlightjs/highlight.js/issues/2277\");\n      languageName = codeOrlanguageName;\n      code = optionsOrCode;\n    }\n\n    /** @type {BeforeHighlightContext} */\n    const context = {\n      code,\n      language: languageName\n    };\n    // the plugin can change the desired language or the code to be highlighted\n    // just be changing the object it was passed\n    fire(\"before:highlight\", context);\n\n    // a before plugin can usurp the result completely by providing it's own\n    // in which case we don't even need to call highlight\n    const result = context.result\n      ? context.result\n      : _highlight(context.language, context.code, ignoreIllegals, continuation);\n\n    result.code = context.code;\n    // the plugin can change anything in result to suite it\n    fire(\"after:highlight\", result);\n\n    return result;\n  }\n\n  /**\n   * private highlight that's used internally and does not fire callbacks\n   *\n   * @param {string} languageName - the language to use for highlighting\n   * @param {string} codeToHighlight - the code to highlight\n   * @param {boolean?} [ignoreIllegals] - whether to ignore illegal matches, default is to bail\n   * @param {CompiledMode?} [continuation] - current continuation mode, if any\n   * @returns {HighlightResult} - result of the highlight operation\n  */\n  function _highlight(languageName, codeToHighlight, ignoreIllegals, continuation) {\n    /**\n     * Return keyword data if a match is a keyword\n     * @param {CompiledMode} mode - current mode\n     * @param {RegExpMatchArray} match - regexp match data\n     * @returns {KeywordData | false}\n     */\n    function keywordData(mode, match) {\n      const matchText = language.case_insensitive ? match[0].toLowerCase() : match[0];\n      return Object.prototype.hasOwnProperty.call(mode.keywords, matchText) && mode.keywords[matchText];\n    }\n\n    function processKeywords() {\n      if (!top.keywords) {\n        emitter.addText(modeBuffer);\n        return;\n      }\n\n      let lastIndex = 0;\n      top.keywordPatternRe.lastIndex = 0;\n      let match = top.keywordPatternRe.exec(modeBuffer);\n      let buf = \"\";\n\n      while (match) {\n        buf += modeBuffer.substring(lastIndex, match.index);\n        const data = keywordData(top, match);\n        if (data) {\n          const [kind, keywordRelevance] = data;\n          emitter.addText(buf);\n          buf = \"\";\n\n          relevance += keywordRelevance;\n          if (kind.startsWith(\"_\")) {\n            // _ implied for relevance only, do not highlight\n            // by applying a class name\n            buf += match[0];\n          } else {\n            const cssClass = language.classNameAliases[kind] || kind;\n            emitter.addKeyword(match[0], cssClass);\n          }\n        } else {\n          buf += match[0];\n        }\n        lastIndex = top.keywordPatternRe.lastIndex;\n        match = top.keywordPatternRe.exec(modeBuffer);\n      }\n      buf += modeBuffer.substr(lastIndex);\n      emitter.addText(buf);\n    }\n\n    function processSubLanguage() {\n      if (modeBuffer === \"\") return;\n      /** @type HighlightResult */\n      let result = null;\n\n      if (typeof top.subLanguage === 'string') {\n        if (!languages[top.subLanguage]) {\n          emitter.addText(modeBuffer);\n          return;\n        }\n        result = _highlight(top.subLanguage, modeBuffer, true, continuations[top.subLanguage]);\n        continuations[top.subLanguage] = /** @type {CompiledMode} */ (result.top);\n      } else {\n        result = highlightAuto(modeBuffer, top.subLanguage.length ? top.subLanguage : null);\n      }\n\n      // Counting embedded language score towards the host language may be disabled\n      // with zeroing the containing mode relevance. Use case in point is Markdown that\n      // allows XML everywhere and makes every XML snippet to have a much larger Markdown\n      // score.\n      if (top.relevance > 0) {\n        relevance += result.relevance;\n      }\n      emitter.addSublanguage(result.emitter, result.language);\n    }\n\n    function processBuffer() {\n      if (top.subLanguage != null) {\n        processSubLanguage();\n      } else {\n        processKeywords();\n      }\n      modeBuffer = '';\n    }\n\n    /**\n     * @param {Mode} mode - new mode to start\n     */\n    function startNewMode(mode) {\n      if (mode.className) {\n        emitter.openNode(language.classNameAliases[mode.className] || mode.className);\n      }\n      top = Object.create(mode, { parent: { value: top } });\n      return top;\n    }\n\n    /**\n     * @param {CompiledMode } mode - the mode to potentially end\n     * @param {RegExpMatchArray} match - the latest match\n     * @param {string} matchPlusRemainder - match plus remainder of content\n     * @returns {CompiledMode | void} - the next mode, or if void continue on in current mode\n     */\n    function endOfMode(mode, match, matchPlusRemainder) {\n      let matched = startsWith(mode.endRe, matchPlusRemainder);\n\n      if (matched) {\n        if (mode[\"on:end\"]) {\n          const resp = new Response(mode);\n          mode[\"on:end\"](match, resp);\n          if (resp.isMatchIgnored) matched = false;\n        }\n\n        if (matched) {\n          while (mode.endsParent && mode.parent) {\n            mode = mode.parent;\n          }\n          return mode;\n        }\n      }\n      // even if on:end fires an `ignore` it's still possible\n      // that we might trigger the end node because of a parent mode\n      if (mode.endsWithParent) {\n        return endOfMode(mode.parent, match, matchPlusRemainder);\n      }\n    }\n\n    /**\n     * Handle matching but then ignoring a sequence of text\n     *\n     * @param {string} lexeme - string containing full match text\n     */\n    function doIgnore(lexeme) {\n      if (top.matcher.regexIndex === 0) {\n        // no more regexs to potentially match here, so we move the cursor forward one\n        // space\n        modeBuffer += lexeme[0];\n        return 1;\n      } else {\n        // no need to move the cursor, we still have additional regexes to try and\n        // match at this very spot\n        resumeScanAtSamePosition = true;\n        return 0;\n      }\n    }\n\n    /**\n     * Handle the start of a new potential mode match\n     *\n     * @param {EnhancedMatch} match - the current match\n     * @returns {number} how far to advance the parse cursor\n     */\n    function doBeginMatch(match) {\n      const lexeme = match[0];\n      const newMode = match.rule;\n\n      const resp = new Response(newMode);\n      // first internal before callbacks, then the public ones\n      const beforeCallbacks = [newMode.__beforeBegin, newMode[\"on:begin\"]];\n      for (const cb of beforeCallbacks) {\n        if (!cb) continue;\n        cb(match, resp);\n        if (resp.isMatchIgnored) return doIgnore(lexeme);\n      }\n\n      if (newMode && newMode.endSameAsBegin) {\n        newMode.endRe = escape(lexeme);\n      }\n\n      if (newMode.skip) {\n        modeBuffer += lexeme;\n      } else {\n        if (newMode.excludeBegin) {\n          modeBuffer += lexeme;\n        }\n        processBuffer();\n        if (!newMode.returnBegin && !newMode.excludeBegin) {\n          modeBuffer = lexeme;\n        }\n      }\n      startNewMode(newMode);\n      // if (mode[\"after:begin\"]) {\n      //   let resp = new Response(mode);\n      //   mode[\"after:begin\"](match, resp);\n      // }\n      return newMode.returnBegin ? 0 : lexeme.length;\n    }\n\n    /**\n     * Handle the potential end of mode\n     *\n     * @param {RegExpMatchArray} match - the current match\n     */\n    function doEndMatch(match) {\n      const lexeme = match[0];\n      const matchPlusRemainder = codeToHighlight.substr(match.index);\n\n      const endMode = endOfMode(top, match, matchPlusRemainder);\n      if (!endMode) { return NO_MATCH; }\n\n      const origin = top;\n      if (origin.skip) {\n        modeBuffer += lexeme;\n      } else {\n        if (!(origin.returnEnd || origin.excludeEnd)) {\n          modeBuffer += lexeme;\n        }\n        processBuffer();\n        if (origin.excludeEnd) {\n          modeBuffer = lexeme;\n        }\n      }\n      do {\n        if (top.className) {\n          emitter.closeNode();\n        }\n        if (!top.skip && !top.subLanguage) {\n          relevance += top.relevance;\n        }\n        top = top.parent;\n      } while (top !== endMode.parent);\n      if (endMode.starts) {\n        if (endMode.endSameAsBegin) {\n          endMode.starts.endRe = endMode.endRe;\n        }\n        startNewMode(endMode.starts);\n      }\n      return origin.returnEnd ? 0 : lexeme.length;\n    }\n\n    function processContinuations() {\n      const list = [];\n      for (let current = top; current !== language; current = current.parent) {\n        if (current.className) {\n          list.unshift(current.className);\n        }\n      }\n      list.forEach(item => emitter.openNode(item));\n    }\n\n    /** @type {{type?: MatchType, index?: number, rule?: Mode}}} */\n    let lastMatch = {};\n\n    /**\n     *  Process an individual match\n     *\n     * @param {string} textBeforeMatch - text preceeding the match (since the last match)\n     * @param {EnhancedMatch} [match] - the match itself\n     */\n    function processLexeme(textBeforeMatch, match) {\n      const lexeme = match && match[0];\n\n      // add non-matched text to the current mode buffer\n      modeBuffer += textBeforeMatch;\n\n      if (lexeme == null) {\n        processBuffer();\n        return 0;\n      }\n\n      // we've found a 0 width match and we're stuck, so we need to advance\n      // this happens when we have badly behaved rules that have optional matchers to the degree that\n      // sometimes they can end up matching nothing at all\n      // Ref: https://github.com/highlightjs/highlight.js/issues/2140\n      if (lastMatch.type === \"begin\" && match.type === \"end\" && lastMatch.index === match.index && lexeme === \"\") {\n        // spit the \"skipped\" character that our regex choked on back into the output sequence\n        modeBuffer += codeToHighlight.slice(match.index, match.index + 1);\n        if (!SAFE_MODE) {\n          /** @type {AnnotatedError} */\n          const err = new Error('0 width match regex');\n          err.languageName = languageName;\n          err.badRule = lastMatch.rule;\n          throw err;\n        }\n        return 1;\n      }\n      lastMatch = match;\n\n      if (match.type === \"begin\") {\n        return doBeginMatch(match);\n      } else if (match.type === \"illegal\" && !ignoreIllegals) {\n        // illegal match, we do not continue processing\n        /** @type {AnnotatedError} */\n        const err = new Error('Illegal lexeme \"' + lexeme + '\" for mode \"' + (top.className || '<unnamed>') + '\"');\n        err.mode = top;\n        throw err;\n      } else if (match.type === \"end\") {\n        const processed = doEndMatch(match);\n        if (processed !== NO_MATCH) {\n          return processed;\n        }\n      }\n\n      // edge case for when illegal matches $ (end of line) which is technically\n      // a 0 width match but not a begin/end match so it's not caught by the\n      // first handler (when ignoreIllegals is true)\n      if (match.type === \"illegal\" && lexeme === \"\") {\n        // advance so we aren't stuck in an infinite loop\n        return 1;\n      }\n\n      // infinite loops are BAD, this is a last ditch catch all. if we have a\n      // decent number of iterations yet our index (cursor position in our\n      // parsing) still 3x behind our index then something is very wrong\n      // so we bail\n      if (iterations > 100000 && iterations > match.index * 3) {\n        const err = new Error('potential infinite loop, way more iterations than matches');\n        throw err;\n      }\n\n      /*\n      Why might be find ourselves here?  Only one occasion now.  An end match that was\n      triggered but could not be completed.  When might this happen?  When an `endSameasBegin`\n      rule sets the end rule to a specific match.  Since the overall mode termination rule that's\n      being used to scan the text isn't recompiled that means that any match that LOOKS like\n      the end (but is not, because it is not an exact match to the beginning) will\n      end up here.  A definite end match, but when `doEndMatch` tries to \"reapply\"\n      the end rule and fails to match, we wind up here, and just silently ignore the end.\n\n      This causes no real harm other than stopping a few times too many.\n      */\n\n      modeBuffer += lexeme;\n      return lexeme.length;\n    }\n\n    const language = getLanguage(languageName);\n    if (!language) {\n      error(LANGUAGE_NOT_FOUND.replace(\"{}\", languageName));\n      throw new Error('Unknown language: \"' + languageName + '\"');\n    }\n\n    const md = compileLanguage(language, { plugins });\n    let result = '';\n    /** @type {CompiledMode} */\n    let top = continuation || md;\n    /** @type Record<string,CompiledMode> */\n    const continuations = {}; // keep continuations for sub-languages\n    const emitter = new options.__emitter(options);\n    processContinuations();\n    let modeBuffer = '';\n    let relevance = 0;\n    let index = 0;\n    let iterations = 0;\n    let resumeScanAtSamePosition = false;\n\n    try {\n      top.matcher.considerAll();\n\n      for (;;) {\n        iterations++;\n        if (resumeScanAtSamePosition) {\n          // only regexes not matched previously will now be\n          // considered for a potential match\n          resumeScanAtSamePosition = false;\n        } else {\n          top.matcher.considerAll();\n        }\n        top.matcher.lastIndex = index;\n\n        const match = top.matcher.exec(codeToHighlight);\n        // console.log(\"match\", match[0], match.rule && match.rule.begin)\n\n        if (!match) break;\n\n        const beforeMatch = codeToHighlight.substring(index, match.index);\n        const processedCount = processLexeme(beforeMatch, match);\n        index = match.index + processedCount;\n      }\n      processLexeme(codeToHighlight.substr(index));\n      emitter.closeAllNodes();\n      emitter.finalize();\n      result = emitter.toHTML();\n\n      return {\n        // avoid possible breakage with v10 clients expecting\n        // this to always be an integer\n        relevance: Math.floor(relevance),\n        value: result,\n        language: languageName,\n        illegal: false,\n        emitter: emitter,\n        top: top\n      };\n    } catch (err) {\n      if (err.message && err.message.includes('Illegal')) {\n        return {\n          illegal: true,\n          illegalBy: {\n            msg: err.message,\n            context: codeToHighlight.slice(index - 100, index + 100),\n            mode: err.mode\n          },\n          sofar: result,\n          relevance: 0,\n          value: escape$1(codeToHighlight),\n          emitter: emitter\n        };\n      } else if (SAFE_MODE) {\n        return {\n          illegal: false,\n          relevance: 0,\n          value: escape$1(codeToHighlight),\n          emitter: emitter,\n          language: languageName,\n          top: top,\n          errorRaised: err\n        };\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  /**\n   * returns a valid highlight result, without actually doing any actual work,\n   * auto highlight starts with this and it's possible for small snippets that\n   * auto-detection may not find a better match\n   * @param {string} code\n   * @returns {HighlightResult}\n   */\n  function justTextHighlightResult(code) {\n    const result = {\n      relevance: 0,\n      emitter: new options.__emitter(options),\n      value: escape$1(code),\n      illegal: false,\n      top: PLAINTEXT_LANGUAGE\n    };\n    result.emitter.addText(code);\n    return result;\n  }\n\n  /**\n  Highlighting with language detection. Accepts a string with the code to\n  highlight. Returns an object with the following properties:\n\n  - language (detected language)\n  - relevance (int)\n  - value (an HTML string with highlighting markup)\n  - second_best (object with the same structure for second-best heuristically\n    detected language, may be absent)\n\n    @param {string} code\n    @param {Array<string>} [languageSubset]\n    @returns {AutoHighlightResult}\n  */\n  function highlightAuto(code, languageSubset) {\n    languageSubset = languageSubset || options.languages || Object.keys(languages);\n    const plaintext = justTextHighlightResult(code);\n\n    const results = languageSubset.filter(getLanguage).filter(autoDetection).map(name =>\n      _highlight(name, code, false)\n    );\n    results.unshift(plaintext); // plaintext is always an option\n\n    const sorted = results.sort((a, b) => {\n      // sort base on relevance\n      if (a.relevance !== b.relevance) return b.relevance - a.relevance;\n\n      // always award the tie to the base language\n      // ie if C++ and Arduino are tied, it's more likely to be C++\n      if (a.language && b.language) {\n        if (getLanguage(a.language).supersetOf === b.language) {\n          return 1;\n        } else if (getLanguage(b.language).supersetOf === a.language) {\n          return -1;\n        }\n      }\n\n      // otherwise say they are equal, which has the effect of sorting on\n      // relevance while preserving the original ordering - which is how ties\n      // have historically been settled, ie the language that comes first always\n      // wins in the case of a tie\n      return 0;\n    });\n\n    const [best, secondBest] = sorted;\n\n    /** @type {AutoHighlightResult} */\n    const result = best;\n    result.second_best = secondBest;\n\n    return result;\n  }\n\n  /**\n  Post-processing of the highlighted markup:\n\n  - replace TABs with something more useful\n  - replace real line-breaks with '<br>' for non-pre containers\n\n    @param {string} html\n    @returns {string}\n  */\n  function fixMarkup(html) {\n    if (!(options.tabReplace || options.useBR)) {\n      return html;\n    }\n\n    return html.replace(fixMarkupRe, match => {\n      if (match === '\\n') {\n        return options.useBR ? '<br>' : match;\n      } else if (options.tabReplace) {\n        return match.replace(/\\t/g, options.tabReplace);\n      }\n      return match;\n    });\n  }\n\n  /**\n   * Builds new class name for block given the language name\n   *\n   * @param {HTMLElement} element\n   * @param {string} [currentLang]\n   * @param {string} [resultLang]\n   */\n  function updateClassName(element, currentLang, resultLang) {\n    const language = currentLang ? aliases[currentLang] : resultLang;\n\n    element.classList.add(\"hljs\");\n    if (language) element.classList.add(language);\n  }\n\n  /** @type {HLJSPlugin} */\n  const brPlugin = {\n    \"before:highlightElement\": ({ el }) => {\n      if (options.useBR) {\n        el.innerHTML = el.innerHTML.replace(/\\n/g, '').replace(/<br[ /]*>/g, '\\n');\n      }\n    },\n    \"after:highlightElement\": ({ result }) => {\n      if (options.useBR) {\n        result.value = result.value.replace(/\\n/g, \"<br>\");\n      }\n    }\n  };\n\n  const TAB_REPLACE_RE = /^(<[^>]+>|\\t)+/gm;\n  /** @type {HLJSPlugin} */\n  const tabReplacePlugin = {\n    \"after:highlightElement\": ({ result }) => {\n      if (options.tabReplace) {\n        result.value = result.value.replace(TAB_REPLACE_RE, (m) =>\n          m.replace(/\\t/g, options.tabReplace)\n        );\n      }\n    }\n  };\n\n  /**\n   * Applies highlighting to a DOM node containing code. Accepts a DOM node and\n   * two optional parameters for fixMarkup.\n   *\n   * @param {HighlightedHTMLElement} element - the HTML element to highlight\n  */\n  function highlightElement(element) {\n    /** @type HTMLElement */\n    let node = null;\n    const language = blockLanguage(element);\n\n    if (shouldNotHighlight(language)) return;\n\n    // support for v10 API\n    fire(\"before:highlightElement\",\n      { el: element, language: language });\n\n    node = element;\n    const text = node.textContent;\n    const result = language ? highlight(text, { language, ignoreIllegals: true }) : highlightAuto(text);\n\n    // support for v10 API\n    fire(\"after:highlightElement\", { el: element, result, text });\n\n    element.innerHTML = result.value;\n    updateClassName(element, language, result.language);\n    element.result = {\n      language: result.language,\n      // TODO: remove with version 11.0\n      re: result.relevance,\n      relavance: result.relevance\n    };\n    if (result.second_best) {\n      element.second_best = {\n        language: result.second_best.language,\n        // TODO: remove with version 11.0\n        re: result.second_best.relevance,\n        relavance: result.second_best.relevance\n      };\n    }\n  }\n\n  /**\n   * Updates highlight.js global options with the passed options\n   *\n   * @param {Partial<HLJSOptions>} userOptions\n   */\n  function configure(userOptions) {\n    if (userOptions.useBR) {\n      deprecated(\"10.3.0\", \"'useBR' will be removed entirely in v11.0\");\n      deprecated(\"10.3.0\", \"Please see https://github.com/highlightjs/highlight.js/issues/2559\");\n    }\n    options = inherit$1(options, userOptions);\n  }\n\n  /**\n   * Highlights to all <pre><code> blocks on a page\n   *\n   * @type {Function & {called?: boolean}}\n   */\n  // TODO: remove v12, deprecated\n  const initHighlighting = () => {\n    if (initHighlighting.called) return;\n    initHighlighting.called = true;\n\n    deprecated(\"10.6.0\", \"initHighlighting() is deprecated.  Use highlightAll() instead.\");\n\n    const blocks = document.querySelectorAll('pre code');\n    blocks.forEach(highlightElement);\n  };\n\n  // Higlights all when DOMContentLoaded fires\n  // TODO: remove v12, deprecated\n  function initHighlightingOnLoad() {\n    deprecated(\"10.6.0\", \"initHighlightingOnLoad() is deprecated.  Use highlightAll() instead.\");\n    wantsHighlight = true;\n  }\n\n  let wantsHighlight = false;\n\n  /**\n   * auto-highlights all pre>code elements on the page\n   */\n  function highlightAll() {\n    // if we are called too early in the loading process\n    if (document.readyState === \"loading\") {\n      wantsHighlight = true;\n      return;\n    }\n\n    const blocks = document.querySelectorAll('pre code');\n    blocks.forEach(highlightElement);\n  }\n\n  function boot() {\n    // if a highlight was requested before DOM was loaded, do now\n    if (wantsHighlight) highlightAll();\n  }\n\n  // make sure we are in the browser environment\n  if (typeof window !== 'undefined' && window.addEventListener) {\n    window.addEventListener('DOMContentLoaded', boot, false);\n  }\n\n  /**\n   * Register a language grammar module\n   *\n   * @param {string} languageName\n   * @param {LanguageFn} languageDefinition\n   */\n  function registerLanguage(languageName, languageDefinition) {\n    let lang = null;\n    try {\n      lang = languageDefinition(hljs);\n    } catch (error$1) {\n      error(\"Language definition for '{}' could not be registered.\".replace(\"{}\", languageName));\n      // hard or soft error\n      if (!SAFE_MODE) { throw error$1; } else { error(error$1); }\n      // languages that have serious errors are replaced with essentially a\n      // \"plaintext\" stand-in so that the code blocks will still get normal\n      // css classes applied to them - and one bad language won't break the\n      // entire highlighter\n      lang = PLAINTEXT_LANGUAGE;\n    }\n    // give it a temporary name if it doesn't have one in the meta-data\n    if (!lang.name) lang.name = languageName;\n    languages[languageName] = lang;\n    lang.rawDefinition = languageDefinition.bind(null, hljs);\n\n    if (lang.aliases) {\n      registerAliases(lang.aliases, { languageName });\n    }\n  }\n\n  /**\n   * Remove a language grammar module\n   *\n   * @param {string} languageName\n   */\n  function unregisterLanguage(languageName) {\n    delete languages[languageName];\n    for (const alias of Object.keys(aliases)) {\n      if (aliases[alias] === languageName) {\n        delete aliases[alias];\n      }\n    }\n  }\n\n  /**\n   * @returns {string[]} List of language internal names\n   */\n  function listLanguages() {\n    return Object.keys(languages);\n  }\n\n  /**\n    intended usage: When one language truly requires another\n\n    Unlike `getLanguage`, this will throw when the requested language\n    is not available.\n\n    @param {string} name - name of the language to fetch/require\n    @returns {Language | never}\n  */\n  function requireLanguage(name) {\n    deprecated(\"10.4.0\", \"requireLanguage will be removed entirely in v11.\");\n    deprecated(\"10.4.0\", \"Please see https://github.com/highlightjs/highlight.js/pull/2844\");\n\n    const lang = getLanguage(name);\n    if (lang) { return lang; }\n\n    const err = new Error('The \\'{}\\' language is required, but not loaded.'.replace('{}', name));\n    throw err;\n  }\n\n  /**\n   * @param {string} name - name of the language to retrieve\n   * @returns {Language | undefined}\n   */\n  function getLanguage(name) {\n    name = (name || '').toLowerCase();\n    return languages[name] || languages[aliases[name]];\n  }\n\n  /**\n   *\n   * @param {string|string[]} aliasList - single alias or list of aliases\n   * @param {{languageName: string}} opts\n   */\n  function registerAliases(aliasList, { languageName }) {\n    if (typeof aliasList === 'string') {\n      aliasList = [aliasList];\n    }\n    aliasList.forEach(alias => { aliases[alias.toLowerCase()] = languageName; });\n  }\n\n  /**\n   * Determines if a given language has auto-detection enabled\n   * @param {string} name - name of the language\n   */\n  function autoDetection(name) {\n    const lang = getLanguage(name);\n    return lang && !lang.disableAutodetect;\n  }\n\n  /**\n   * Upgrades the old highlightBlock plugins to the new\n   * highlightElement API\n   * @param {HLJSPlugin} plugin\n   */\n  function upgradePluginAPI(plugin) {\n    // TODO: remove with v12\n    if (plugin[\"before:highlightBlock\"] && !plugin[\"before:highlightElement\"]) {\n      plugin[\"before:highlightElement\"] = (data) => {\n        plugin[\"before:highlightBlock\"](\n          Object.assign({ block: data.el }, data)\n        );\n      };\n    }\n    if (plugin[\"after:highlightBlock\"] && !plugin[\"after:highlightElement\"]) {\n      plugin[\"after:highlightElement\"] = (data) => {\n        plugin[\"after:highlightBlock\"](\n          Object.assign({ block: data.el }, data)\n        );\n      };\n    }\n  }\n\n  /**\n   * @param {HLJSPlugin} plugin\n   */\n  function addPlugin(plugin) {\n    upgradePluginAPI(plugin);\n    plugins.push(plugin);\n  }\n\n  /**\n   *\n   * @param {PluginEvent} event\n   * @param {any} args\n   */\n  function fire(event, args) {\n    const cb = event;\n    plugins.forEach(function(plugin) {\n      if (plugin[cb]) {\n        plugin[cb](args);\n      }\n    });\n  }\n\n  /**\n  Note: fixMarkup is deprecated and will be removed entirely in v11\n\n  @param {string} arg\n  @returns {string}\n  */\n  function deprecateFixMarkup(arg) {\n    deprecated(\"10.2.0\", \"fixMarkup will be removed entirely in v11.0\");\n    deprecated(\"10.2.0\", \"Please see https://github.com/highlightjs/highlight.js/issues/2534\");\n\n    return fixMarkup(arg);\n  }\n\n  /**\n   *\n   * @param {HighlightedHTMLElement} el\n   */\n  function deprecateHighlightBlock(el) {\n    deprecated(\"10.7.0\", \"highlightBlock will be removed entirely in v12.0\");\n    deprecated(\"10.7.0\", \"Please use highlightElement now.\");\n\n    return highlightElement(el);\n  }\n\n  /* Interface definition */\n  Object.assign(hljs, {\n    highlight,\n    highlightAuto,\n    highlightAll,\n    fixMarkup: deprecateFixMarkup,\n    highlightElement,\n    // TODO: Remove with v12 API\n    highlightBlock: deprecateHighlightBlock,\n    configure,\n    initHighlighting,\n    initHighlightingOnLoad,\n    registerLanguage,\n    unregisterLanguage,\n    listLanguages,\n    getLanguage,\n    registerAliases,\n    requireLanguage,\n    autoDetection,\n    inherit: inherit$1,\n    addPlugin,\n    // plugins for frameworks\n    vuePlugin: BuildVuePlugin(hljs).VuePlugin\n  });\n\n  hljs.debugMode = function() { SAFE_MODE = false; };\n  hljs.safeMode = function() { SAFE_MODE = true; };\n  hljs.versionString = version;\n\n  for (const key in MODES) {\n    // @ts-ignore\n    if (typeof MODES[key] === \"object\") {\n      // @ts-ignore\n      deepFreezeEs6(MODES[key]);\n    }\n  }\n\n  // merge all the modes/regexs into our main object\n  Object.assign(hljs, MODES);\n\n  // built-in plugins, likely to be moved out of core in the future\n  hljs.addPlugin(brPlugin); // slated to be removed in v11\n  hljs.addPlugin(mergeHTMLPlugin);\n  hljs.addPlugin(tabReplacePlugin);\n  return hljs;\n};\n\n// export an \"instance\" of the highlighter\nvar highlight = HLJS({});\n\nmodule.exports = highlight;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","/*\n Leaflet.draw 1.0.4, a plugin that adds drawing and editing tools to Leaflet powered maps.\n (c) 2012-2017, Jacob Toye, Jon West, Smartrak, Leaflet\n\n https://github.com/Leaflet/Leaflet.draw\n http://leafletjs.com\n */\n!function(t,e,i){function o(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}L.drawVersion=\"1.0.4\",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:\"Cancel drawing\",text:\"Cancel\"},finish:{title:\"Finish drawing\",text:\"Finish\"},undo:{title:\"Delete last point drawn\",text:\"Delete last point\"},buttons:{polyline:\"Draw a polyline\",polygon:\"Draw a polygon\",rectangle:\"Draw a rectangle\",circle:\"Draw a circle\",marker:\"Draw a marker\",circlemarker:\"Draw a circlemarker\"}},handlers:{circle:{tooltip:{start:\"Click and drag to draw circle.\"},radius:\"Radius\"},circlemarker:{tooltip:{start:\"Click map to place circle marker.\"}},marker:{tooltip:{start:\"Click map to place marker.\"}},polygon:{tooltip:{start:\"Click to start drawing shape.\",cont:\"Click to continue drawing shape.\",end:\"Click first point to close this shape.\"}},polyline:{error:\"<strong>Error:</strong> shape edges cannot cross!\",tooltip:{start:\"Click to start drawing line.\",cont:\"Click to continue drawing line.\",end:\"Click last point to finish line.\"}},rectangle:{tooltip:{start:\"Click and drag to draw rectangle.\"}},simpleshape:{tooltip:{end:\"Release mouse to finish drawing.\"}}}},edit:{toolbar:{actions:{save:{title:\"Save changes\",text:\"Save\"},cancel:{title:\"Cancel editing, discards all changes\",text:\"Cancel\"},clearAll:{title:\"Clear all layers\",text:\"Clear All\"}},buttons:{edit:\"Edit layers\",editDisabled:\"No layers to edit\",remove:\"Delete layers\",removeDisabled:\"No layers to delete\"}},handlers:{edit:{tooltip:{text:\"Drag handles or markers to edit features.\",subtext:\"Click cancel to undo changes.\"}},remove:{tooltip:{text:\"Click on a feature to remove.\"}}}}},L.Draw.Event={},L.Draw.Event.CREATED=\"draw:created\",L.Draw.Event.EDITED=\"draw:edited\",L.Draw.Event.DELETED=\"draw:deleted\",L.Draw.Event.DRAWSTART=\"draw:drawstart\",L.Draw.Event.DRAWSTOP=\"draw:drawstop\",L.Draw.Event.DRAWVERTEX=\"draw:drawvertex\",L.Draw.Event.EDITSTART=\"draw:editstart\",L.Draw.Event.EDITMOVE=\"draw:editmove\",L.Draw.Event.EDITRESIZE=\"draw:editresize\",L.Draw.Event.EDITVERTEX=\"draw:editvertex\",L.Draw.Event.EDITSTOP=\"draw:editstop\",L.Draw.Event.DELETESTART=\"draw:deletestart\",L.Draw.Event.DELETESTOP=\"draw:deletestop\",L.Draw.Event.TOOLBAROPENED=\"draw:toolbaropened\",L.Draw.Event.TOOLBARCLOSED=\"draw:toolbarclosed\",L.Draw.Event.MARKERCONTEXT=\"draw:markercontext\",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var i=L.version.split(\".\");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire(\"enabled\",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire(\"disabled\",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,\"keyup\",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,\"keyup\",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire(\"draw:canceled\",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:\"polyline\"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:\"#b00b00\",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:\"leaflet-div-icon leaflet-editing-icon\"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:\"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon\"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:\"#3388ff\",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:\"leaflet-mouse-marker\",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on(\"mouseout\",this._onMouseOut,this).on(\"mousemove\",this._onMouseMove,this).on(\"mousedown\",this._onMouseDown,this).on(\"mouseup\",this._onMouseUp,this).addTo(this._map),this._map.on(\"mouseup\",this._onMouseUp,this).on(\"mousemove\",this._onMouseMove,this).on(\"zoomlevelschange\",this._onZoomEnd,this).on(\"touchstart\",this._onTouch,this).on(\"zoomend\",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off(\"mousedown\",this._onMouseDown,this).off(\"mouseout\",this._onMouseOut,this).off(\"mouseup\",this._onMouseUp,this).off(\"mousemove\",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off(\"mouseup\",this._onMouseUp,this).off(\"mousemove\",this._onMouseMove,this).off(\"zoomlevelschange\",this._onZoomEnd,this).off(\"zoomend\",this._onZoomEnd,this).off(\"touchstart\",this._onTouch,this).off(\"click\",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,i=e.getLatLngs(),o=i.splice(-1,1)[0];this._poly.setLatLngs(i),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(o,!1)}},addVertex:function(t){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);if(!this.options.allowIntersection&&e||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);this._currentLatLng=i,this._updateTooltip(i),this._updateGuide(e),this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,i=e.clientX,o=e.clientY;this._startPoint.call(this,i,o)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,i=e.clientX,o=e.clientY;this._endPoint.call(this,i,o,t),this._clickHandled=null},_endPoint:function(e,i,o){if(this._mouseDownOrigin){var a=L.point(e,i).distanceTo(this._mouseDownOrigin),n=this._calculateFinishDistance(o.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(o.latlng),this._finishShape()):n<10&&L.Browser.touch?this._finishShape():Math.abs(a)<9*(t.devicePixelRatio||1)&&this.addVertex(o.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,i,o=t.originalEvent;!o.touches||!o.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=o.touches[0].clientX,i=o.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,i),this._endPoint.call(this,e,i,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var i;if(this.type===L.Draw.Polyline.TYPE)i=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;i=this._markers[0]}var o=this._map.latLngToContainerPoint(i.getLatLng()),a=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),n=this._map.latLngToContainerPoint(a.getLatLng());e=o.distanceTo(n)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on(\"click\",this._finishShape,this),t>2&&this._markers[t-2].off(\"click\",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var i,o,a,n=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),s=this.options.guidelineDistance,r=this.options.maxGuideLineLength,l=n>r?n-r:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create(\"div\",\"leaflet-draw-guides\",this._overlayPane));l<n;l+=this.options.guidelineDistance)i=l/n,o={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},a=L.DomUtil.create(\"div\",\"leaflet-draw-guide-dash\",this._guidesContainer),a.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(a,o)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,i=this._guidesContainer.childNodes.length;e<i;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,i=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=i?this._getMeasurementString():\"\",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var i,o,a=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(i=a-(e?2:1),o=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[i].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[i].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=o*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?i&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(i)*(this.options.factor||1):this._measurementRunningTotal||0:i&&e?this._measurementRunningTotal+this._map.distance(e,i)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off(\"click\",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:\"polygon\"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:\"#3388ff\",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on(\"click\",this._finishShape,this),t>2&&(this._markers[t-1].on(\"dblclick\",this._finishShape,this),t>3&&this._markers[t-2].off(\"dblclick\",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(t=L.drawLocal.draw.handlers.polygon.tooltip.cont,e=this._getMeasurementString()):(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e=\"\";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+=\"<br>\"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var i;!this.options.allowIntersection&&this.options.showArea&&(i=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off(\"click\",this._finishShape,this),t>2&&this._markers[t-1].off(\"dblclick\",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor=\"crosshair\",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on(\"mousedown\",this._onMouseDown,this).on(\"mousemove\",this._onMouseMove,this).on(\"touchstart\",this._onMouseDown,this).on(\"touchmove\",this._onMouseMove,this),e.addEventListener(\"touchstart\",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor=\"\",this._map.off(\"mousedown\",this._onMouseDown,this).off(\"mousemove\",this._onMouseMove,this).off(\"touchstart\",this._onMouseDown,this).off(\"touchmove\",this._onMouseMove,this),L.DomEvent.off(e,\"mouseup\",this._onMouseUp,this),L.DomEvent.off(e,\"touchend\",this._onMouseUp,this),e.removeEventListener(\"touchstart\",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,\"mouseup\",this._onMouseUp,this).on(e,\"touchend\",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:\"rectangle\"},options:{shapeOptions:{stroke:!0,color:\"#3388ff\",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!o(t.target,\"leaflet-pane\")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,i,o=L.Draw.SimpleShape.prototype._getTooltipText.call(this),a=this._shape,n=this.options.showArea;return a&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),i=n?L.GeometryUtil.readableArea(e,this.options.metric):\"\"),{text:o.text,subtext:i}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:\"marker\"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:\"leaflet-mouse-marker\",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on(\"click\",this._onClick,this).addTo(this._map),this._map.on(\"mousemove\",this._onMouseMove,this),this._map.on(\"click\",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off(\"click\",this._onClick,this).off(\"click\",this._onTouch,this),this._marker&&(this._marker.off(\"click\",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off(\"click\",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off(\"mousemove\",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on(\"click\",this._onClick,this),this._map.on(\"click\",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:\"circlemarker\"},options:{stroke:!0,color:\"#3388ff\",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:\"circle\"},options:{shapeOptions:{stroke:!0,color:\"#3388ff\",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else var e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,i=t.latlng,o=this.options.showRadius,a=this.options.metric;if(this._tooltip.updatePosition(i),this._isDrawing){this._drawShape(i),e=this._shape.getRadius().toFixed(1);var n=\"\";o&&(n=L.drawLocal.draw.handlers.circle.radius+\": \"+L.GeometryUtil.readableDistance(e,a,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:n})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on(\"dragend\",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off(\"dragend\",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display=\"none\",L.DomUtil.hasClass(t,\"leaflet-edit-marker-selected\")?(L.DomUtil.removeClass(t,\"leaflet-edit-marker-selected\"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,\"leaflet-edit-marker-selected\"),this._offsetMarker(t,4)),t.style.display=\"\")},_offsetMarker:function(t,e){var i=parseInt(t.style.marginTop,10)-e,o=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=i+\"px\",t.style.marginLeft=o+\"px\"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on(\"revert-edited\",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:\"leaflet-div-icon leaflet-editing-icon\"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:\"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon\"}),drawError:{color:\"#b00b00\",timeout:1e3}},initialize:function(t,e,i){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,i&&i.drawError&&(i.drawError=L.Util.extend({},this.options.drawError,i.drawError)),this._latlngs=e,L.setOptions(this,i)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(\" \").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.editing.className.split(\" \").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing&&t.options.editing.className&&(t.options.editing.className.split(\" \").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.original.className&&t.options.original.className.split(\" \").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,o,a=this._defaultShape();for(t=0,i=a.length;t<i;t++)o=this._createMarker(a[t],t),o.on(\"click\",this._onMarkerClick,this),o.on(\"contextmenu\",this._onContextMenu,this),this._markers.push(o);var n,s;for(t=0,e=i-1;t<i;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(n=this._markers[e],s=this._markers[t],this._createMiddleMarker(n,s),this._updatePrevNext(n,s))},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on(\"dragstart\",this._onMarkerDragStart,this).on(\"drag\",this._onMarkerDrag,this).on(\"dragend\",this._fireEdit,this).on(\"touchmove\",this._onTouchMove,this).on(\"touchend\",this._fireEdit,this).on(\"MSPointerMove\",this._onTouchMove,this).on(\"MSPointerUp\",this._fireEdit,this),this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._poly.fire(\"editstart\")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off(\"dragstart\",this._onMarkerDragStart,this).off(\"drag\",this._onMarkerDrag,this).off(\"dragend\",this._fireEdit,this).off(\"touchmove\",this._onMarkerDrag,this).off(\"touchend\",this._fireEdit,this).off(\"click\",this._onMarkerClick,this).off(\"MSPointerMove\",this._onTouchMove,this).off(\"MSPointerUp\",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire(\"edit\"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,i=this._poly,o=L.LatLngUtil.cloneLatLng(e._origLatLng);if(L.extend(e._origLatLng,e._latlng),i.options.poly){var a=i._map._editTooltip;if(!i.options.poly.allowIntersection&&i.intersects()){L.extend(e._origLatLng,o),e.setLatLng(o);var n=i.options.color;i.setStyle({color:this.options.drawError.color}),a&&a.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){i.setStyle({color:n}),a&&a.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var s=this._poly.getLatLngs();this._poly._convertLatLngs(s,!0),this._poly.redraw(),this._poly.fire(\"editdrag\")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,i=t.target;this._defaultShape().length<e||(this._removeMarker(i),this._updatePrevNext(i._prev,i._next),i._middleLeft&&this._markerGroup.removeLayer(i._middleLeft),i._middleRight&&this._markerGroup.removeLayer(i._middleRight),i._prev&&i._next?this._createMiddleMarker(i._prev,i._next):i._prev?i._next||(i._prev._middleRight=null):i._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly;this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e),o=t.target;L.extend(o._origLatLng,i),o._middleLeft&&o._middleLeft.setLatLng(this._getMiddleLatLng(o._prev,o)),o._middleRight&&o._middleRight.setLatLng(this._getMiddleLatLng(o,o._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,o,a,n=this._getMiddleLatLng(t,e),s=this._createMarker(n);s.setOpacity(.6),t._middleRight=e._middleLeft=s,o=function(){s.off(\"touchmove\",o,this);var a=e._index;s._index=a,s.off(\"click\",i,this).on(\"click\",this._onMarkerClick,this),n.lat=s.getLatLng().lat,n.lng=s.getLatLng().lng,this._spliceLatLngs(a,0,n),this._markers.splice(a,0,s),s.setOpacity(1),this._updateIndexes(a,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e),this._poly.fire(\"editstart\")},a=function(){s.off(\"dragstart\",o,this),s.off(\"dragend\",a,this),s.off(\"touchmove\",o,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},i=function(){o.call(this),a.call(this),this._fireEdit()},s.on(\"click\",i,this).on(\"dragstart\",o,this).on(\"dragend\",a,this).on(\"touchmove\",o,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,o=i.project(t.getLatLng()),a=i.project(e.getLatLng());return i.unproject(o._add(a)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on(\"add\",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on(\"remove\",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:\"leaflet-div-icon leaflet-editing-icon leaflet-edit-move\"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),\nclassName:\"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize\"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:\"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon\"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:\"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon\"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on(\"dragstart\",this._onMarkerDragStart,this).on(\"drag\",this._onMarkerDrag,this).on(\"dragend\",this._onMarkerDragEnd,this).on(\"touchstart\",this._onTouchStart,this).on(\"touchmove\",this._onTouchMove,this).on(\"MSPointerMove\",this._onTouchMove,this).on(\"touchend\",this._onTouchEnd,this).on(\"MSPointerUp\",this._onTouchEnd,this)},_unbindMarker:function(t){t.off(\"dragstart\",this._onMarkerDragStart,this).off(\"drag\",this._onMarkerDrag,this).off(\"dragend\",this._onMarkerDragEnd,this).off(\"touchstart\",this._onTouchStart,this).off(\"touchmove\",this._onTouchMove,this).off(\"MSPointerMove\",this._onTouchMove,this).off(\"touchend\",this._onTouchEnd,this).off(\"MSPointerUp\",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire(\"editstart\")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire(\"edit\")},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),this._shape.fire(\"editdrag\")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),\"function\"==typeof this._getCorners){var e=this._getCorners(),i=t.target,o=i._cornerIndex;i.setOpacity(0),this._oppositeCorner=e[(o+2)%4],this._toggleCornerMarkers(0,o)}this._shape.fire(\"editstart\")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;e<i;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target,o=i._cornerIndex;this._oppositeCorner=e[(o+2)%4],this._toggleCornerMarkers(0,o)},_onMarkerDragEnd:function(t){var e,i,o=t.target;o===this._moveMarker&&(e=this._shape.getBounds(),i=e.getCenter(),o.setLatLng(i)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),o=this._shape.getBounds(),a=o.getCenter(),n=[],s=0,r=i.length;s<r;s++)e=[i[s].lat-a.lat,i[s].lng-a.lng],n.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(n),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on(\"add\",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on(\"remove\",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(t);return this._map.unproject([i.x+e,i.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+\"<br />\"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+\": \"+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,\"touchstart\",this._onTouchStart,this),L.DomEvent.on(this._container,\"touchend\",this._onTouchEnd,this),L.DomEvent.on(this._container,\"touchmove\",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,\"MSPointerDown\",this._onTouchStart,this),L.DomEvent.on(this._container,\"MSPointerUp\",this._onTouchEnd,this),L.DomEvent.on(this._container,\"MSPointerMove\",this._onTouchMove,this),L.DomEvent.on(this._container,\"MSPointerCancel\",this._onTouchCancel,this)):(L.DomEvent.on(this._container,\"touchcancel\",this._onTouchCancel,this),L.DomEvent.on(this._container,\"touchleave\",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,\"touchstart\",this._onTouchStart,this),L.DomEvent.off(this._container,\"touchend\",this._onTouchEnd,this),L.DomEvent.off(this._container,\"touchmove\",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,\"MSPointerDown\",this._onTouchStart,this),L.DomEvent.off(this._container,\"MSPointerUp\",this._onTouchEnd,this),L.DomEvent.off(this._container,\"MSPointerMove\",this._onTouchMove,this),L.DomEvent.off(this._container,\"MSPointerCancel\",this._onTouchCancel,this)):(L.DomEvent.off(this._container,\"touchcancel\",this._onTouchCancel,this),L.DomEvent.off(this._container,\"touchleave\",this._onTouchLeave,this))},_touchEvent:function(t,e){var i={};if(void 0!==t.touches){if(!t.touches.length)return;i=t.touches[0]}else{if(\"touch\"!==t.pointerType)return;if(i=t,!this._filterClick(t))return}var o=this._map.mouseEventToContainerPoint(i),a=this._map.mouseEventToLayerPoint(i),n=this._map.layerPointToLatLng(a);this._map.fire(e,{latlng:n,layerPoint:a,containerPoint:o,pageX:i.pageX,pageY:i.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,i=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){if(this._map._loaded){this._touchEvent(t,\"touchstart\")}},_onTouchEnd:function(t){if(this._map._loaded){this._touchEvent(t,\"touchend\")}},_onTouchCancel:function(t){if(this._map._loaded){var e=\"touchcancel\";this._detectIE()&&(e=\"pointercancel\"),this._touchEvent(t,e)}},_onTouchLeave:function(t){if(this._map._loaded){this._touchEvent(t,\"touchleave\")}},_onTouchMove:function(t){if(this._map._loaded){this._touchEvent(t,\"touchmove\")}},_detectIE:function(){var e=t.navigator.userAgent,i=e.indexOf(\"MSIE \");if(i>0)return parseInt(e.substring(i+5,e.indexOf(\".\",i)),10);if(e.indexOf(\"Trident/\")>0){var o=e.indexOf(\"rv:\");return parseInt(e.substring(o+3,e.indexOf(\".\",o)),10)}var a=e.indexOf(\"Edge/\");return a>0&&parseInt(e.substring(a+5,e.indexOf(\".\",a)),10)}}),L.Map.addInitHook(\"addHandler\",\"touchExtend\",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=[\"dblclick\",\"mousedown\",\"mouseover\",\"mouseout\",\"contextmenu\",\"touchstart\",\"touchend\",\"touchmove\"];this._detectIE?e.concat([\"MSPointerDown\",\"MSPointerUp\",\"MSPointerMove\",\"MSPointerCancel\"]):e.concat([\"touchcancel\"]),L.DomUtil.addClass(t,\"leaflet-clickable\"),L.DomEvent.on(t,\"click\",this._onMouseClick,this),L.DomEvent.on(t,\"keypress\",this._onKeyPress,this);for(var i=0;i<e.length;i++)L.DomEvent.on(t,e[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=t.navigator.userAgent,i=e.indexOf(\"MSIE \");if(i>0)return parseInt(e.substring(i+5,e.indexOf(\".\",i)),10);if(e.indexOf(\"Trident/\")>0){var o=e.indexOf(\"rv:\");return parseInt(e.substring(o+3,e.indexOf(\".\",o)),10)}var a=e.indexOf(\"Edge/\");return a>0&&parseInt(e.substring(a+5,e.indexOf(\".\",a)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],i=0,o=t.length;i<o;i++)Array.isArray(t[i])?e.push(L.LatLngUtil.cloneLatLngs(t[i])):e.push(this.cloneLatLng(t[i]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},function(){var t={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,i,o=t.length,a=0,n=Math.PI/180;if(o>2){for(var s=0;s<o;s++)e=t[s],i=t[(s+1)%o],a+=(i.lng-e.lng)*n*(2+Math.sin(e.lat*n)+Math.sin(i.lat*n));a=6378137*a*6378137/2}return Math.abs(a)},formattedNumber:function(t,e){var i=parseFloat(t).toFixed(e),o=L.drawLocal.format&&L.drawLocal.format.numeric,a=o&&o.delimiters,n=a&&a.thousands,s=a&&a.decimal;if(n||s){var r=i.split(\".\");i=n?r[0].replace(/(\\d)(?=(\\d{3})+(?!\\d))/g,\"$1\"+n):r[0],s=s||\".\",r.length>1&&(i=i+s+r[1])}return i},readableArea:function(e,i,o){var a,n,o=L.Util.extend({},t,o);return i?(n=[\"ha\",\"m\"],type=typeof i,\"string\"===type?n=[i]:\"boolean\"!==type&&(n=i),a=e>=1e6&&-1!==n.indexOf(\"km\")?L.GeometryUtil.formattedNumber(1e-6*e,o.km)+\" km²\":e>=1e4&&-1!==n.indexOf(\"ha\")?L.GeometryUtil.formattedNumber(1e-4*e,o.ha)+\" ha\":L.GeometryUtil.formattedNumber(e,o.m)+\" m²\"):(e/=.836127,a=e>=3097600?L.GeometryUtil.formattedNumber(e/3097600,o.mi)+\" mi²\":e>=4840?L.GeometryUtil.formattedNumber(e/4840,o.ac)+\" acres\":L.GeometryUtil.formattedNumber(e,o.yd)+\" yd²\"),a},readableDistance:function(e,i,o,a,n){var s,n=L.Util.extend({},t,n);switch(i?\"string\"==typeof i?i:\"metric\":o?\"feet\":a?\"nauticalMile\":\"yards\"){case\"metric\":s=e>1e3?L.GeometryUtil.formattedNumber(e/1e3,n.km)+\" km\":L.GeometryUtil.formattedNumber(e,n.m)+\" m\";break;case\"feet\":e*=3.28083,s=L.GeometryUtil.formattedNumber(e,n.ft)+\" ft\";break;case\"nauticalMile\":e*=.53996,s=L.GeometryUtil.formattedNumber(e/1e3,n.nm)+\" nm\";break;case\"yards\":default:e*=1.09361,s=e>1760?L.GeometryUtil.formattedNumber(e/1760,n.mi)+\" miles\":L.GeometryUtil.formattedNumber(e,n.yd)+\" yd\"}return s},isVersion07x:function(){var t=L.version.split(\".\");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,i,o){return this._checkCounterclockwise(t,i,o)!==this._checkCounterclockwise(e,i,o)&&this._checkCounterclockwise(t,e,i)!==this._checkCounterclockwise(t,e,o)},_checkCounterclockwise:function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,i,o=this._getProjectedPoints(),a=o?o.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=a-1;t>=3;t--)if(e=o[t-1],i=o[t],this._lineSegmentsIntersectsRange(e,i,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var i=this._getProjectedPoints(),o=i?i.length:0,a=i?i[o-1]:null,n=o-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(a,t,n,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),i=e?e.length:0;return i+=t||0,!e||i<=3},_lineSegmentsIntersectsRange:function(t,e,i,o){var a,n,s=this._getProjectedPoints();o=o||0;for(var r=i;r>o;r--)if(a=s[r-1],n=s[r],L.LineUtil.segmentsIntersect(t,e,a,n))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),i=0;i<e.length;i++)t.push(this._map.latLngToLayerPoint(e[i]));return t}}),L.Polygon.include({intersects:function(){var t,e,i,o,a=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=a.length,e=a[0],i=a[t-1],o=t-2,this._lineSegmentsIntersectsRange(i,e,o,1)))}}),L.Control.Draw=L.Control.extend({options:{position:\"topleft\",draw:{},edit:!1},initialize:function(t){if(L.version<\"0.7\")throw new Error(\"Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/\");L.Control.prototype.initialize.call(this,t);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on(\"enable\",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on(\"enable\",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,i=L.DomUtil.create(\"div\",\"leaflet-draw\"),o=!1;for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&(e=this._toolbars[a].addToolbar(t))&&(o||(L.DomUtil.hasClass(e,\"leaflet-draw-toolbar-top\")||L.DomUtil.addClass(e.childNodes[0],\"leaflet-draw-toolbar-top\"),o=!0),i.appendChild(e));return i},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var i in this._toolbars)this._toolbars[i]!==e&&this._toolbars[i].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(\".\");1===parseInt(e[0],10)&&parseInt(e[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,i=L.DomUtil.create(\"div\",\"leaflet-draw-section\"),o=0,a=this._toolbarClass||\"\",n=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create(\"div\",\"leaflet-draw-toolbar leaflet-bar\"),this._map=t,e=0;e<n.length;e++)n[e].enabled&&this._initModeHandler(n[e].handler,this._toolbarContainer,o++,a,n[e].title);if(o)return this._lastButtonIndex=--o,this._actionsContainer=L.DomUtil.create(\"ul\",\"leaflet-draw-actions\"),i.appendChild(this._toolbarContainer),i.appendChild(this._actionsContainer),i},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off(\"enabled\",this._handlerActivated,this).off(\"disabled\",this._handlerDeactivated,this));this._modes={};for(var e=0,i=this._actionButtons.length;e<i;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,i,o,a){var n=t.type;this._modes[n]={},this._modes[n].handler=t,this._modes[n].button=this._createButton({type:n,title:a,className:o+\"-\"+n,container:e,callback:this._modes[n].handler.enable,context:this._modes[n].handler}),this._modes[n].buttonIndex=i,this._modes[n].handler.on(\"enabled\",this._handlerActivated,this).on(\"disabled\",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(t){var e=L.DomUtil.create(\"a\",t.className||\"\",t.container),i=L.DomUtil.create(\"span\",\"sr-only\",t.container);e.href=\"#\",e.appendChild(i),t.title&&(e.title=t.title,i.innerHTML=t.title),t.text&&(e.innerHTML=t.text,i.innerHTML=t.text);var o=this._detectIOS()?\"touchstart\":\"click\";return L.DomEvent.on(e,\"click\",L.DomEvent.stopPropagation).on(e,\"mousedown\",L.DomEvent.stopPropagation).on(e,\"dblclick\",L.DomEvent.stopPropagation).on(e,\"touchstart\",L.DomEvent.stopPropagation).on(e,\"click\",L.DomEvent.preventDefault).on(e,o,t.callback,t.context),e},_disposeButton:function(t,e){var i=this._detectIOS()?\"touchstart\":\"click\";L.DomEvent.off(t,\"click\",L.DomEvent.stopPropagation).off(t,\"mousedown\",L.DomEvent.stopPropagation).off(t,\"dblclick\",L.DomEvent.stopPropagation).off(t,\"touchstart\",L.DomEvent.stopPropagation).off(t,\"click\",L.DomEvent.preventDefault).off(t,i,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,\"leaflet-draw-toolbar-button-enabled\"),this._showActionsToolbar(),this.fire(\"enable\")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,\"leaflet-draw-toolbar-button-enabled\"),this._activeMode=null,this.fire(\"disable\")},_createActions:function(t){var e,i,o,a,n=this._actionsContainer,s=this.getActions(t),r=s.length;for(i=0,o=this._actionButtons.length;i<o;i++)this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback);for(this._actionButtons=[];n.firstChild;)n.removeChild(n.firstChild);for(var l=0;l<r;l++)\"enabled\"in s[l]&&!s[l].enabled||(e=L.DomUtil.create(\"li\",\"\",n),a=this._createButton({title:s[l].title,text:s[l].text,container:e,callback:s[l].callback,context:s[l].context}),this._actionButtons.push({button:a,callback:s[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,i=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=i+\"px\",0===t&&(L.DomUtil.addClass(this._toolbarContainer,\"leaflet-draw-toolbar-notop\"),L.DomUtil.addClass(this._actionsContainer,\"leaflet-draw-actions-top\")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,\"leaflet-draw-toolbar-nobottom\"),L.DomUtil.addClass(this._actionsContainer,\"leaflet-draw-actions-bottom\")),this._actionsContainer.style.display=\"block\",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display=\"none\",L.DomUtil.removeClass(this._toolbarContainer,\"leaflet-draw-toolbar-notop\"),L.DomUtil.removeClass(this._toolbarContainer,\"leaflet-draw-toolbar-nobottom\"),L.DomUtil.removeClass(this._actionsContainer,\"leaflet-draw-actions-top\"),L.DomUtil.removeClass(this._actionsContainer,\"leaflet-draw-actions-bottom\"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create(\"div\",\"leaflet-draw-tooltip\",this._popupPane):null,this._singleLineLabel=!1,this._map.on(\"mouseout\",this._onMouseOut,this)},dispose:function(){this._map.off(\"mouseout\",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||\"\",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,\"leaflet-draw-tooltip-single\"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,\"leaflet-draw-tooltip-single\"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class=\"leaflet-draw-tooltip-subtext\">'+t.subtext+\"</span><br />\":\"\")+\"<span>\"+t.text+\"</span>\",t.text||t.subtext?(this._visible=!0,this._container.style.visibility=\"inherit\"):(this._visible=!1,this._container.style.visibility=\"hidden\"),this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;return this._container&&(this._visible&&(i.style.visibility=\"inherit\"),L.DomUtil.setPosition(i,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,\"leaflet-error-draw-tooltip\"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,\"leaflet-error-draw-tooltip\"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility=\"hidden\")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:\"draw\"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass=\"leaflet-draw-draw\",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:\"edit\"},options:{edit:{selectedPathOptions:{dashArray:\"10, 10\",fill:!0,fillColor:\"#fe57a1\",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass=\"leaflet-draw-edit\",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on(\"layeradd layerremove\",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off(\"layeradd layerremove\",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,i=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,i?L.DomUtil.removeClass(t,\"leaflet-disabled\"):L.DomUtil.addClass(t,\"leaflet-disabled\"),t.setAttribute(\"title\",i?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,i?L.DomUtil.removeClass(t,\"leaflet-disabled\"):L.DomUtil.addClass(t,\"leaflet-disabled\"),t.setAttribute(\"title\",i?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:\"edit\"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error(\"options.featureGroup must be a L.FeatureGroup\");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var i=L.version.split(\".\");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire(\"enabled\",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on(\"layeradd\",this._enableLayerEdit,this).on(\"layerremove\",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off(\"layeradd\",this._enableLayerEdit,this).off(\"layerremove\",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire(\"disabled\",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on(\"mousemove\",this._onMouseMove,this).on(\"touchmove\",this._onMouseMove,this).on(\"MSPointerMove\",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off(\"mousemove\",this._onMouseMove,this).off(\"touchmove\",this._onMouseMove,this).off(\"MSPointerMove\",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire(\"revert-edited\",{layer:t}))},_enableLayerEdit:function(t){var e,i,o=t.layer||t.target||t;this._backupLayer(o),this.options.poly&&(i=L.Util.extend({},this.options.poly),o.options.poly=i),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=o.options.color,e.fillColor=o.options.fillColor),o.options.original=L.extend({},o.options),o.options.editing=e),o instanceof L.Marker?(o.editing&&o.editing.enable(),o.dragging.enable(),o.on(\"dragend\",this._onMarkerDragEnd).on(\"touchmove\",this._onTouchMove,this).on(\"MSPointerMove\",this._onTouchMove,this).on(\"touchend\",this._onMarkerDragEnd,this).on(\"MSPointerUp\",this._onMarkerDragEnd,this)):o.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,\nthis._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off(\"dragend\",this._onMarkerDragEnd,this).off(\"touchmove\",this._onTouchMove,this).off(\"MSPointerMove\",this._onTouchMove,this).off(\"touchend\",this._onMarkerDragEnd,this).off(\"MSPointerUp\",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],i=this._map.mouseEventToLayerPoint(e),o=this._map.layerPointToLatLng(i);t.target.setLatLng(o)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:\"remove\"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error(\"options.featureGroup must be a L.FeatureGroup\");this.type=L.EditToolbar.Delete.TYPE;var i=L.version.split(\".\");1===parseInt(i[0],10)&&parseInt(i[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire(\"enabled\",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on(\"layeradd\",this._enableLayerDelete,this).on(\"layerremove\",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off(\"layeradd\",this._enableLayerDelete,this).off(\"layerremove\",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire(\"disabled\",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on(\"mousemove\",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off(\"mousemove\",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire(\"revert-deleted\",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t){this._removeLayer({layer:t})},this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on(\"click\",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off(\"click\",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire(\"deleted\")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document);","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","function DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\t\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax.errorHandler.error(\"invalid doc source\");\r\n\t}\r\n\treturn domBuilder.doc;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.doc.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.doc;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t\tvar tagName = current.tagName;\r\n\t\tthis.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.doc.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\r\n\t\t\t}\r\n\t\t\tif(this.currentElement){\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}else if(/^\\s*$/.test(chars)){\r\n\t\t\t\tthis.doc.appendChild(charNode);\r\n\t\t\t\t//process xml\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.doc.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.doc.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.doc.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.doc.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\n//if(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n//}\r\n","/*!\n * Vue.js v2.6.14\n * (c) 2014-2021 Evan You\n * Released under the MIT License.\n */\n/*  */\n\nvar emptyObject = Object.freeze({});\n\n// These helpers produce better VM code in JS engines due to their\n// explicitness and function inlining.\nfunction isUndef (v) {\n  return v === undefined || v === null\n}\n\nfunction isDef (v) {\n  return v !== undefined && v !== null\n}\n\nfunction isTrue (v) {\n  return v === true\n}\n\nfunction isFalse (v) {\n  return v === false\n}\n\n/**\n * Check if value is primitive.\n */\nfunction isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Get the raw type string of a value, e.g., [object Object].\n */\nvar _toString = Object.prototype.toString;\n\nfunction toRawType (value) {\n  return _toString.call(value).slice(8, -1)\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nfunction isRegExp (v) {\n  return _toString.call(v) === '[object RegExp]'\n}\n\n/**\n * Check if val is a valid array index.\n */\nfunction isValidArrayIndex (val) {\n  var n = parseFloat(String(val));\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nfunction isPromise (val) {\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\n/**\n * Convert a value to a string that is actually rendered.\n */\nfunction toString (val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\n/**\n * Convert an input value to a number for persistence.\n * If the conversion fails, return original string.\n */\nfunction toNumber (val) {\n  var n = parseFloat(val);\n  return isNaN(n) ? val : n\n}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase\n    ? function (val) { return map[val.toLowerCase()]; }\n    : function (val) { return map[val]; }\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nvar isBuiltInTag = makeMap('slot,component', true);\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nvar isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');\n\n/**\n * Remove an item from an array.\n */\nfunction remove (arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nfunction cached (fn) {\n  var cache = Object.create(null);\n  return (function cachedFn (str) {\n    var hit = cache[str];\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nvar camelizeRE = /-(\\w)/g;\nvar camelize = cached(function (str) {\n  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })\n});\n\n/**\n * Capitalize a string.\n */\nvar capitalize = cached(function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n});\n\n/**\n * Hyphenate a camelCase string.\n */\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = cached(function (str) {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n});\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    var l = arguments.length;\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length;\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nvar bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind;\n\n/**\n * Convert an Array-like object to a real Array.\n */\nfunction toArray (list, start) {\n  start = start || 0;\n  var i = list.length - start;\n  var ret = new Array(i);\n  while (i--) {\n    ret[i] = list[i + start];\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nfunction extend (to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nfunction toObject (arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nfunction noop (a, b, c) {}\n\n/**\n * Always return false.\n */\nvar no = function (a, b, c) { return false; };\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nvar identity = function (_) { return _; };\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = Array.isArray(a);\n      var isArrayB = Array.isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nfunction looseIndexOf (arr, val) {\n  for (var i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) { return i }\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nfunction once (fn) {\n  var called = false;\n  return function () {\n    if (!called) {\n      called = true;\n      fn.apply(this, arguments);\n    }\n  }\n}\n\nvar SSR_ATTR = 'data-server-rendered';\n\nvar ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n];\n\nvar LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n];\n\n/*  */\n\n\n\nvar config = ({\n  /**\n   * Option merge strategies (used in core/util/options)\n   */\n  // $flow-disable-line\n  optionMergeStrategies: Object.create(null),\n\n  /**\n   * Whether to suppress warnings.\n   */\n  silent: false,\n\n  /**\n   * Show production mode tip message on boot?\n   */\n  productionTip: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to enable devtools\n   */\n  devtools: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to record perf\n   */\n  performance: false,\n\n  /**\n   * Error handler for watcher errors\n   */\n  errorHandler: null,\n\n  /**\n   * Warn handler for watcher warns\n   */\n  warnHandler: null,\n\n  /**\n   * Ignore certain custom elements\n   */\n  ignoredElements: [],\n\n  /**\n   * Custom user key aliases for v-on\n   */\n  // $flow-disable-line\n  keyCodes: Object.create(null),\n\n  /**\n   * Check if a tag is reserved so that it cannot be registered as a\n   * component. This is platform-dependent and may be overwritten.\n   */\n  isReservedTag: no,\n\n  /**\n   * Check if an attribute is reserved so that it cannot be used as a component\n   * prop. This is platform-dependent and may be overwritten.\n   */\n  isReservedAttr: no,\n\n  /**\n   * Check if a tag is an unknown element.\n   * Platform-dependent.\n   */\n  isUnknownElement: no,\n\n  /**\n   * Get the namespace of an element\n   */\n  getTagNamespace: noop,\n\n  /**\n   * Parse the real tag name for the specific platform.\n   */\n  parsePlatformTagName: identity,\n\n  /**\n   * Check if an attribute must be bound using property, e.g. value\n   * Platform-dependent.\n   */\n  mustUseProp: no,\n\n  /**\n   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n   * This will significantly reduce performance if set to false.\n   */\n  async: true,\n\n  /**\n   * Exposed for legacy reasons\n   */\n  _lifecycleHooks: LIFECYCLE_HOOKS\n});\n\n/*  */\n\n/**\n * unicode letters used for parsing html tags, component names and property paths.\n * using https://www.w3.org/TR/html53/semantics-scripting.html#potentialcustomelementname\n * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n */\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved (str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nfunction def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/**\n * Parse simple path.\n */\nvar bailRE = new RegExp((\"[^\" + (unicodeRegExp.source) + \".$_\\\\d]\"));\nfunction parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  var segments = path.split('.');\n  return function (obj) {\n    for (var i = 0; i < segments.length; i++) {\n      if (!obj) { return }\n      obj = obj[segments[i]];\n    }\n    return obj\n  }\n}\n\n/*  */\n\n// can we use __proto__?\nvar hasProto = '__proto__' in {};\n\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\nvar inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;\nvar weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nvar isEdge = UA && UA.indexOf('edge/') > 0;\nvar isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');\nvar isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// Firefox has a \"watch\" function on Object.prototype...\nvar nativeWatch = ({}).watch;\n\nvar supportsPassive = false;\nif (inBrowser) {\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', ({\n      get: function get () {\n        /* istanbul ignore next */\n        supportsPassive = true;\n      }\n    })); // https://github.com/facebook/flow/issues/285\n    window.addEventListener('test-passive', null, opts);\n  } catch (e) {}\n}\n\n// this needs to be lazy-evaled because vue may be required before\n// vue-server-renderer can set VUE_ENV\nvar _isServer;\nvar isServerRendering = function () {\n  if (_isServer === undefined) {\n    /* istanbul ignore if */\n    if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n      // detect presence of vue-server-renderer and avoid\n      // Webpack shimming the process\n      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server';\n    } else {\n      _isServer = false;\n    }\n  }\n  return _isServer\n};\n\n// detect devtools\nvar devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\n/* istanbul ignore next */\nfunction isNative (Ctor) {\n  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())\n}\n\nvar hasSymbol =\n  typeof Symbol !== 'undefined' && isNative(Symbol) &&\n  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);\n\nvar _Set;\n/* istanbul ignore if */ // $flow-disable-line\nif (typeof Set !== 'undefined' && isNative(Set)) {\n  // use native Set when available.\n  _Set = Set;\n} else {\n  // a non-standard Set polyfill that only works with primitive keys.\n  _Set = /*@__PURE__*/(function () {\n    function Set () {\n      this.set = Object.create(null);\n    }\n    Set.prototype.has = function has (key) {\n      return this.set[key] === true\n    };\n    Set.prototype.add = function add (key) {\n      this.set[key] = true;\n    };\n    Set.prototype.clear = function clear () {\n      this.set = Object.create(null);\n    };\n\n    return Set;\n  }());\n}\n\n/*  */\n\nvar warn = noop;\nvar tip = noop;\nvar generateComponentTrace = (noop); // work around flow check\nvar formatComponentName = (noop);\n\nif (process.env.NODE_ENV !== 'production') {\n  var hasConsole = typeof console !== 'undefined';\n  var classifyRE = /(?:^|[-_])(\\w)/g;\n  var classify = function (str) { return str\n    .replace(classifyRE, function (c) { return c.toUpperCase(); })\n    .replace(/[-_]/g, ''); };\n\n  warn = function (msg, vm) {\n    var trace = vm ? generateComponentTrace(vm) : '';\n\n    if (config.warnHandler) {\n      config.warnHandler.call(null, msg, vm, trace);\n    } else if (hasConsole && (!config.silent)) {\n      console.error((\"[Vue warn]: \" + msg + trace));\n    }\n  };\n\n  tip = function (msg, vm) {\n    if (hasConsole && (!config.silent)) {\n      console.warn(\"[Vue tip]: \" + msg + (\n        vm ? generateComponentTrace(vm) : ''\n      ));\n    }\n  };\n\n  formatComponentName = function (vm, includeFile) {\n    if (vm.$root === vm) {\n      return '<Root>'\n    }\n    var options = typeof vm === 'function' && vm.cid != null\n      ? vm.options\n      : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm;\n    var name = options.name || options._componentTag;\n    var file = options.__file;\n    if (!name && file) {\n      var match = file.match(/([^/\\\\]+)\\.vue$/);\n      name = match && match[1];\n    }\n\n    return (\n      (name ? (\"<\" + (classify(name)) + \">\") : \"<Anonymous>\") +\n      (file && includeFile !== false ? (\" at \" + file) : '')\n    )\n  };\n\n  var repeat = function (str, n) {\n    var res = '';\n    while (n) {\n      if (n % 2 === 1) { res += str; }\n      if (n > 1) { str += str; }\n      n >>= 1;\n    }\n    return res\n  };\n\n  generateComponentTrace = function (vm) {\n    if (vm._isVue && vm.$parent) {\n      var tree = [];\n      var currentRecursiveSequence = 0;\n      while (vm) {\n        if (tree.length > 0) {\n          var last = tree[tree.length - 1];\n          if (last.constructor === vm.constructor) {\n            currentRecursiveSequence++;\n            vm = vm.$parent;\n            continue\n          } else if (currentRecursiveSequence > 0) {\n            tree[tree.length - 1] = [last, currentRecursiveSequence];\n            currentRecursiveSequence = 0;\n          }\n        }\n        tree.push(vm);\n        vm = vm.$parent;\n      }\n      return '\\n\\nfound in\\n\\n' + tree\n        .map(function (vm, i) { return (\"\" + (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) + (Array.isArray(vm)\n            ? ((formatComponentName(vm[0])) + \"... (\" + (vm[1]) + \" recursive calls)\")\n            : formatComponentName(vm))); })\n        .join('\\n')\n    } else {\n      return (\"\\n\\n(found in \" + (formatComponentName(vm)) + \")\")\n    }\n  };\n}\n\n/*  */\n\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n */\nvar Dep = function Dep () {\n  this.id = uid++;\n  this.subs = [];\n};\n\nDep.prototype.addSub = function addSub (sub) {\n  this.subs.push(sub);\n};\n\nDep.prototype.removeSub = function removeSub (sub) {\n  remove(this.subs, sub);\n};\n\nDep.prototype.depend = function depend () {\n  if (Dep.target) {\n    Dep.target.addDep(this);\n  }\n};\n\nDep.prototype.notify = function notify () {\n  // stabilize the subscriber list first\n  var subs = this.subs.slice();\n  if (process.env.NODE_ENV !== 'production' && !config.async) {\n    // subs aren't sorted in scheduler if not running async\n    // we need to sort them now to make sure they fire in correct\n    // order\n    subs.sort(function (a, b) { return a.id - b.id; });\n  }\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update();\n  }\n};\n\n// The current target watcher being evaluated.\n// This is globally unique because only one watcher\n// can be evaluated at a time.\nDep.target = null;\nvar targetStack = [];\n\nfunction pushTarget (target) {\n  targetStack.push(target);\n  Dep.target = target;\n}\n\nfunction popTarget () {\n  targetStack.pop();\n  Dep.target = targetStack[targetStack.length - 1];\n}\n\n/*  */\n\nvar VNode = function VNode (\n  tag,\n  data,\n  children,\n  text,\n  elm,\n  context,\n  componentOptions,\n  asyncFactory\n) {\n  this.tag = tag;\n  this.data = data;\n  this.children = children;\n  this.text = text;\n  this.elm = elm;\n  this.ns = undefined;\n  this.context = context;\n  this.fnContext = undefined;\n  this.fnOptions = undefined;\n  this.fnScopeId = undefined;\n  this.key = data && data.key;\n  this.componentOptions = componentOptions;\n  this.componentInstance = undefined;\n  this.parent = undefined;\n  this.raw = false;\n  this.isStatic = false;\n  this.isRootInsert = true;\n  this.isComment = false;\n  this.isCloned = false;\n  this.isOnce = false;\n  this.asyncFactory = asyncFactory;\n  this.asyncMeta = undefined;\n  this.isAsyncPlaceholder = false;\n};\n\nvar prototypeAccessors = { child: { configurable: true } };\n\n// DEPRECATED: alias for componentInstance for backwards compat.\n/* istanbul ignore next */\nprototypeAccessors.child.get = function () {\n  return this.componentInstance\n};\n\nObject.defineProperties( VNode.prototype, prototypeAccessors );\n\nvar createEmptyVNode = function (text) {\n  if ( text === void 0 ) text = '';\n\n  var node = new VNode();\n  node.text = text;\n  node.isComment = true;\n  return node\n};\n\nfunction createTextVNode (val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n\n// optimized shallow clone\n// used for static nodes and slot nodes because they may be reused across\n// multiple renders, cloning them avoids errors when DOM manipulations rely\n// on their elm reference.\nfunction cloneVNode (vnode) {\n  var cloned = new VNode(\n    vnode.tag,\n    vnode.data,\n    // #7975\n    // clone children array to avoid mutating original in case of cloning\n    // a child.\n    vnode.children && vnode.children.slice(),\n    vnode.text,\n    vnode.elm,\n    vnode.context,\n    vnode.componentOptions,\n    vnode.asyncFactory\n  );\n  cloned.ns = vnode.ns;\n  cloned.isStatic = vnode.isStatic;\n  cloned.key = vnode.key;\n  cloned.isComment = vnode.isComment;\n  cloned.fnContext = vnode.fnContext;\n  cloned.fnOptions = vnode.fnOptions;\n  cloned.fnScopeId = vnode.fnScopeId;\n  cloned.asyncMeta = vnode.asyncMeta;\n  cloned.isCloned = true;\n  return cloned\n}\n\n/*\n * not type checking this file because flow doesn't play well with\n * dynamically accessing methods on Array prototype\n */\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n\nvar methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  var original = arrayProto[method];\n  def(arrayMethods, method, function mutator () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var result = original.apply(this, args);\n    var ob = this.__ob__;\n    var inserted;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2);\n        break\n    }\n    if (inserted) { ob.observeArray(inserted); }\n    // notify change\n    ob.dep.notify();\n    return result\n  });\n});\n\n/*  */\n\nvar arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\n/**\n * In some cases we may want to disable observation inside a component's\n * update computation.\n */\nvar shouldObserve = true;\n\nfunction toggleObserving (value) {\n  shouldObserve = value;\n}\n\n/**\n * Observer class that is attached to each observed\n * object. Once attached, the observer converts the target\n * object's property keys into getter/setters that\n * collect dependencies and dispatch updates.\n */\nvar Observer = function Observer (value) {\n  this.value = value;\n  this.dep = new Dep();\n  this.vmCount = 0;\n  def(value, '__ob__', this);\n  if (Array.isArray(value)) {\n    if (hasProto) {\n      protoAugment(value, arrayMethods);\n    } else {\n      copyAugment(value, arrayMethods, arrayKeys);\n    }\n    this.observeArray(value);\n  } else {\n    this.walk(value);\n  }\n};\n\n/**\n * Walk through all properties and convert them into\n * getter/setters. This method should only be called when\n * value type is Object.\n */\nObserver.prototype.walk = function walk (obj) {\n  var keys = Object.keys(obj);\n  for (var i = 0; i < keys.length; i++) {\n    defineReactive$$1(obj, keys[i]);\n  }\n};\n\n/**\n * Observe a list of Array items.\n */\nObserver.prototype.observeArray = function observeArray (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i]);\n  }\n};\n\n// helpers\n\n/**\n * Augment a target Object or Array by intercepting\n * the prototype chain using __proto__\n */\nfunction protoAugment (target, src) {\n  /* eslint-disable no-proto */\n  target.__proto__ = src;\n  /* eslint-enable no-proto */\n}\n\n/**\n * Augment a target Object or Array by defining\n * hidden properties.\n */\n/* istanbul ignore next */\nfunction copyAugment (target, src, keys) {\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    def(target, key, src[key]);\n  }\n}\n\n/**\n * Attempt to create an observer instance for a value,\n * returns the new observer if successfully observed,\n * or the existing observer if the value already has one.\n */\nfunction observe (value, asRootData) {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  var ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob\n}\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive$$1 (\n  obj,\n  key,\n  val,\n  customSetter,\n  shallow\n) {\n  var dep = new Dep();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n\n  var childOb = !shallow && observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      var value = getter ? getter.call(obj) : val;\n      if (Dep.target) {\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      var value = getter ? getter.call(obj) : val;\n      /* eslint-disable no-self-compare */\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      /* eslint-enable no-self-compare */\n      if (process.env.NODE_ENV !== 'production' && customSetter) {\n        customSetter();\n      }\n      // #7981: for accessor properties without setter\n      if (getter && !setter) { return }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n      childOb = !shallow && observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * Set a property on an object. Adds the new property and\n * triggers change notification if the property doesn't\n * already exist.\n */\nfunction set (target, key, val) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot set reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.length = Math.max(target.length, key);\n    target.splice(key, 1, val);\n    return val\n  }\n  if (key in target && !(key in Object.prototype)) {\n    target[key] = val;\n    return val\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid adding reactive properties to a Vue instance or its root $data ' +\n      'at runtime - declare it upfront in the data option.'\n    );\n    return val\n  }\n  if (!ob) {\n    target[key] = val;\n    return val\n  }\n  defineReactive$$1(ob.value, key, val);\n  ob.dep.notify();\n  return val\n}\n\n/**\n * Delete a property and trigger change if necessary.\n */\nfunction del (target, key) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot delete reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.splice(key, 1);\n    return\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid deleting properties on a Vue instance or its root $data ' +\n      '- just set it to null.'\n    );\n    return\n  }\n  if (!hasOwn(target, key)) {\n    return\n  }\n  delete target[key];\n  if (!ob) {\n    return\n  }\n  ob.dep.notify();\n}\n\n/**\n * Collect dependencies on array elements when the array is touched, since\n * we cannot intercept array element access like property getters.\n */\nfunction dependArray (value) {\n  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {\n    e = value[i];\n    e && e.__ob__ && e.__ob__.dep.depend();\n    if (Array.isArray(e)) {\n      dependArray(e);\n    }\n  }\n}\n\n/*  */\n\n/**\n * Option overwriting strategies are functions that handle\n * how to merge a parent option value and a child option\n * value into the final value.\n */\nvar strats = config.optionMergeStrategies;\n\n/**\n * Options with restrictions\n */\nif (process.env.NODE_ENV !== 'production') {\n  strats.el = strats.propsData = function (parent, child, vm, key) {\n    if (!vm) {\n      warn(\n        \"option \\\"\" + key + \"\\\" can only be used during instance \" +\n        'creation with the `new` keyword.'\n      );\n    }\n    return defaultStrat(parent, child)\n  };\n}\n\n/**\n * Helper that recursively merges two data objects together.\n */\nfunction mergeData (to, from) {\n  if (!from) { return to }\n  var key, toVal, fromVal;\n\n  var keys = hasSymbol\n    ? Reflect.ownKeys(from)\n    : Object.keys(from);\n\n  for (var i = 0; i < keys.length; i++) {\n    key = keys[i];\n    // in case the object is already observed...\n    if (key === '__ob__') { continue }\n    toVal = to[key];\n    fromVal = from[key];\n    if (!hasOwn(to, key)) {\n      set(to, key, fromVal);\n    } else if (\n      toVal !== fromVal &&\n      isPlainObject(toVal) &&\n      isPlainObject(fromVal)\n    ) {\n      mergeData(toVal, fromVal);\n    }\n  }\n  return to\n}\n\n/**\n * Data\n */\nfunction mergeDataOrFn (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    // in a Vue.extend merge, both should be functions\n    if (!childVal) {\n      return parentVal\n    }\n    if (!parentVal) {\n      return childVal\n    }\n    // when parentVal & childVal are both present,\n    // we need to return a function that returns the\n    // merged result of both functions... no need to\n    // check if parentVal is a function here because\n    // it has to be a function to pass previous merges.\n    return function mergedDataFn () {\n      return mergeData(\n        typeof childVal === 'function' ? childVal.call(this, this) : childVal,\n        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal\n      )\n    }\n  } else {\n    return function mergedInstanceDataFn () {\n      // instance merge\n      var instanceData = typeof childVal === 'function'\n        ? childVal.call(vm, vm)\n        : childVal;\n      var defaultData = typeof parentVal === 'function'\n        ? parentVal.call(vm, vm)\n        : parentVal;\n      if (instanceData) {\n        return mergeData(instanceData, defaultData)\n      } else {\n        return defaultData\n      }\n    }\n  }\n}\n\nstrats.data = function (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    if (childVal && typeof childVal !== 'function') {\n      process.env.NODE_ENV !== 'production' && warn(\n        'The \"data\" option should be a function ' +\n        'that returns a per-instance value in component ' +\n        'definitions.',\n        vm\n      );\n\n      return parentVal\n    }\n    return mergeDataOrFn(parentVal, childVal)\n  }\n\n  return mergeDataOrFn(parentVal, childVal, vm)\n};\n\n/**\n * Hooks and props are merged as arrays.\n */\nfunction mergeHook (\n  parentVal,\n  childVal\n) {\n  var res = childVal\n    ? parentVal\n      ? parentVal.concat(childVal)\n      : Array.isArray(childVal)\n        ? childVal\n        : [childVal]\n    : parentVal;\n  return res\n    ? dedupeHooks(res)\n    : res\n}\n\nfunction dedupeHooks (hooks) {\n  var res = [];\n  for (var i = 0; i < hooks.length; i++) {\n    if (res.indexOf(hooks[i]) === -1) {\n      res.push(hooks[i]);\n    }\n  }\n  return res\n}\n\nLIFECYCLE_HOOKS.forEach(function (hook) {\n  strats[hook] = mergeHook;\n});\n\n/**\n * Assets\n *\n * When a vm is present (instance creation), we need to do\n * a three-way merge between constructor options, instance\n * options and parent options.\n */\nfunction mergeAssets (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  var res = Object.create(parentVal || null);\n  if (childVal) {\n    process.env.NODE_ENV !== 'production' && assertObjectType(key, childVal, vm);\n    return extend(res, childVal)\n  } else {\n    return res\n  }\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets;\n});\n\n/**\n * Watchers.\n *\n * Watchers hashes should not overwrite one\n * another, so we merge them as arrays.\n */\nstrats.watch = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  // work around Firefox's Object.prototype.watch...\n  if (parentVal === nativeWatch) { parentVal = undefined; }\n  if (childVal === nativeWatch) { childVal = undefined; }\n  /* istanbul ignore if */\n  if (!childVal) { return Object.create(parentVal || null) }\n  if (process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = {};\n  extend(ret, parentVal);\n  for (var key$1 in childVal) {\n    var parent = ret[key$1];\n    var child = childVal[key$1];\n    if (parent && !Array.isArray(parent)) {\n      parent = [parent];\n    }\n    ret[key$1] = parent\n      ? parent.concat(child)\n      : Array.isArray(child) ? child : [child];\n  }\n  return ret\n};\n\n/**\n * Other object hashes.\n */\nstrats.props =\nstrats.methods =\nstrats.inject =\nstrats.computed = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  if (childVal && process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = Object.create(null);\n  extend(ret, parentVal);\n  if (childVal) { extend(ret, childVal); }\n  return ret\n};\nstrats.provide = mergeDataOrFn;\n\n/**\n * Default strategy.\n */\nvar defaultStrat = function (parentVal, childVal) {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n};\n\n/**\n * Validate component names\n */\nfunction checkComponents (options) {\n  for (var key in options.components) {\n    validateComponentName(key);\n  }\n}\n\nfunction validateComponentName (name) {\n  if (!new RegExp((\"^[a-zA-Z][\\\\-\\\\.0-9_\" + (unicodeRegExp.source) + \"]*$\")).test(name)) {\n    warn(\n      'Invalid component name: \"' + name + '\". Component names ' +\n      'should conform to valid custom element name in html5 specification.'\n    );\n  }\n  if (isBuiltInTag(name) || config.isReservedTag(name)) {\n    warn(\n      'Do not use built-in or reserved HTML elements as component ' +\n      'id: ' + name\n    );\n  }\n}\n\n/**\n * Ensure all props option syntax are normalized into the\n * Object-based format.\n */\nfunction normalizeProps (options, vm) {\n  var props = options.props;\n  if (!props) { return }\n  var res = {};\n  var i, val, name;\n  if (Array.isArray(props)) {\n    i = props.length;\n    while (i--) {\n      val = props[i];\n      if (typeof val === 'string') {\n        name = camelize(val);\n        res[name] = { type: null };\n      } else if (process.env.NODE_ENV !== 'production') {\n        warn('props must be strings when using array syntax.');\n      }\n    }\n  } else if (isPlainObject(props)) {\n    for (var key in props) {\n      val = props[key];\n      name = camelize(key);\n      res[name] = isPlainObject(val)\n        ? val\n        : { type: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"props\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(props)) + \".\",\n      vm\n    );\n  }\n  options.props = res;\n}\n\n/**\n * Normalize all injections into Object-based format\n */\nfunction normalizeInject (options, vm) {\n  var inject = options.inject;\n  if (!inject) { return }\n  var normalized = options.inject = {};\n  if (Array.isArray(inject)) {\n    for (var i = 0; i < inject.length; i++) {\n      normalized[inject[i]] = { from: inject[i] };\n    }\n  } else if (isPlainObject(inject)) {\n    for (var key in inject) {\n      var val = inject[key];\n      normalized[key] = isPlainObject(val)\n        ? extend({ from: key }, val)\n        : { from: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"inject\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(inject)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Normalize raw function directives into object format.\n */\nfunction normalizeDirectives (options) {\n  var dirs = options.directives;\n  if (dirs) {\n    for (var key in dirs) {\n      var def$$1 = dirs[key];\n      if (typeof def$$1 === 'function') {\n        dirs[key] = { bind: def$$1, update: def$$1 };\n      }\n    }\n  }\n}\n\nfunction assertObjectType (name, value, vm) {\n  if (!isPlainObject(value)) {\n    warn(\n      \"Invalid value for option \\\"\" + name + \"\\\": expected an Object, \" +\n      \"but got \" + (toRawType(value)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Merge two option objects into a new one.\n * Core utility used in both instantiation and inheritance.\n */\nfunction mergeOptions (\n  parent,\n  child,\n  vm\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkComponents(child);\n  }\n\n  if (typeof child === 'function') {\n    child = child.options;\n  }\n\n  normalizeProps(child, vm);\n  normalizeInject(child, vm);\n  normalizeDirectives(child);\n\n  // Apply extends and mixins on the child options,\n  // but only if it is a raw options object that isn't\n  // the result of another mergeOptions call.\n  // Only merged options has the _base property.\n  if (!child._base) {\n    if (child.extends) {\n      parent = mergeOptions(parent, child.extends, vm);\n    }\n    if (child.mixins) {\n      for (var i = 0, l = child.mixins.length; i < l; i++) {\n        parent = mergeOptions(parent, child.mixins[i], vm);\n      }\n    }\n  }\n\n  var options = {};\n  var key;\n  for (key in parent) {\n    mergeField(key);\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField (key) {\n    var strat = strats[key] || defaultStrat;\n    options[key] = strat(parent[key], child[key], vm, key);\n  }\n  return options\n}\n\n/**\n * Resolve an asset.\n * This function is used because child instances need access\n * to assets defined in its ancestor chain.\n */\nfunction resolveAsset (\n  options,\n  type,\n  id,\n  warnMissing\n) {\n  /* istanbul ignore if */\n  if (typeof id !== 'string') {\n    return\n  }\n  var assets = options[type];\n  // check local registration variations first\n  if (hasOwn(assets, id)) { return assets[id] }\n  var camelizedId = camelize(id);\n  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }\n  var PascalCaseId = capitalize(camelizedId);\n  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }\n  // fallback to prototype chain\n  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];\n  if (process.env.NODE_ENV !== 'production' && warnMissing && !res) {\n    warn(\n      'Failed to resolve ' + type.slice(0, -1) + ': ' + id,\n      options\n    );\n  }\n  return res\n}\n\n/*  */\n\n\n\nfunction validateProp (\n  key,\n  propOptions,\n  propsData,\n  vm\n) {\n  var prop = propOptions[key];\n  var absent = !hasOwn(propsData, key);\n  var value = propsData[key];\n  // boolean casting\n  var booleanIndex = getTypeIndex(Boolean, prop.type);\n  if (booleanIndex > -1) {\n    if (absent && !hasOwn(prop, 'default')) {\n      value = false;\n    } else if (value === '' || value === hyphenate(key)) {\n      // only cast empty string / same name to boolean if\n      // boolean has higher priority\n      var stringIndex = getTypeIndex(String, prop.type);\n      if (stringIndex < 0 || booleanIndex < stringIndex) {\n        value = true;\n      }\n    }\n  }\n  // check default value\n  if (value === undefined) {\n    value = getPropDefaultValue(vm, prop, key);\n    // since the default value is a fresh copy,\n    // make sure to observe it.\n    var prevShouldObserve = shouldObserve;\n    toggleObserving(true);\n    observe(value);\n    toggleObserving(prevShouldObserve);\n  }\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    // skip validation for weex recycle-list child component props\n    !(false)\n  ) {\n    assertProp(prop, key, value, vm, absent);\n  }\n  return value\n}\n\n/**\n * Get the default value of a prop.\n */\nfunction getPropDefaultValue (vm, prop, key) {\n  // no default, return undefined\n  if (!hasOwn(prop, 'default')) {\n    return undefined\n  }\n  var def = prop.default;\n  // warn against non-factory defaults for Object & Array\n  if (process.env.NODE_ENV !== 'production' && isObject(def)) {\n    warn(\n      'Invalid default value for prop \"' + key + '\": ' +\n      'Props with type Object/Array must use a factory function ' +\n      'to return the default value.',\n      vm\n    );\n  }\n  // the raw prop value was also undefined from previous render,\n  // return previous default value to avoid unnecessary watcher trigger\n  if (vm && vm.$options.propsData &&\n    vm.$options.propsData[key] === undefined &&\n    vm._props[key] !== undefined\n  ) {\n    return vm._props[key]\n  }\n  // call factory function for non-Function types\n  // a value is Function if its prototype is function even across different execution context\n  return typeof def === 'function' && getType(prop.type) !== 'Function'\n    ? def.call(vm)\n    : def\n}\n\n/**\n * Assert whether a prop is valid.\n */\nfunction assertProp (\n  prop,\n  name,\n  value,\n  vm,\n  absent\n) {\n  if (prop.required && absent) {\n    warn(\n      'Missing required prop: \"' + name + '\"',\n      vm\n    );\n    return\n  }\n  if (value == null && !prop.required) {\n    return\n  }\n  var type = prop.type;\n  var valid = !type || type === true;\n  var expectedTypes = [];\n  if (type) {\n    if (!Array.isArray(type)) {\n      type = [type];\n    }\n    for (var i = 0; i < type.length && !valid; i++) {\n      var assertedType = assertType(value, type[i], vm);\n      expectedTypes.push(assertedType.expectedType || '');\n      valid = assertedType.valid;\n    }\n  }\n\n  var haveExpectedTypes = expectedTypes.some(function (t) { return t; });\n  if (!valid && haveExpectedTypes) {\n    warn(\n      getInvalidTypeMessage(name, value, expectedTypes),\n      vm\n    );\n    return\n  }\n  var validator = prop.validator;\n  if (validator) {\n    if (!validator(value)) {\n      warn(\n        'Invalid prop: custom validator check failed for prop \"' + name + '\".',\n        vm\n      );\n    }\n  }\n}\n\nvar simpleCheckRE = /^(String|Number|Boolean|Function|Symbol|BigInt)$/;\n\nfunction assertType (value, type, vm) {\n  var valid;\n  var expectedType = getType(type);\n  if (simpleCheckRE.test(expectedType)) {\n    var t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    // for primitive wrapper objects\n    if (!valid && t === 'object') {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === 'Object') {\n    valid = isPlainObject(value);\n  } else if (expectedType === 'Array') {\n    valid = Array.isArray(value);\n  } else {\n    try {\n      valid = value instanceof type;\n    } catch (e) {\n      warn('Invalid prop type: \"' + String(type) + '\" is not a constructor', vm);\n      valid = false;\n    }\n  }\n  return {\n    valid: valid,\n    expectedType: expectedType\n  }\n}\n\nvar functionTypeCheckRE = /^\\s*function (\\w+)/;\n\n/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */\nfunction getType (fn) {\n  var match = fn && fn.toString().match(functionTypeCheckRE);\n  return match ? match[1] : ''\n}\n\nfunction isSameType (a, b) {\n  return getType(a) === getType(b)\n}\n\nfunction getTypeIndex (type, expectedTypes) {\n  if (!Array.isArray(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1\n  }\n  for (var i = 0, len = expectedTypes.length; i < len; i++) {\n    if (isSameType(expectedTypes[i], type)) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction getInvalidTypeMessage (name, value, expectedTypes) {\n  var message = \"Invalid prop: type check failed for prop \\\"\" + name + \"\\\".\" +\n    \" Expected \" + (expectedTypes.map(capitalize).join(', '));\n  var expectedType = expectedTypes[0];\n  var receivedType = toRawType(value);\n  // check if we need to specify expected value\n  if (\n    expectedTypes.length === 1 &&\n    isExplicable(expectedType) &&\n    isExplicable(typeof value) &&\n    !isBoolean(expectedType, receivedType)\n  ) {\n    message += \" with value \" + (styleValue(value, expectedType));\n  }\n  message += \", got \" + receivedType + \" \";\n  // check if we need to specify received value\n  if (isExplicable(receivedType)) {\n    message += \"with value \" + (styleValue(value, receivedType)) + \".\";\n  }\n  return message\n}\n\nfunction styleValue (value, type) {\n  if (type === 'String') {\n    return (\"\\\"\" + value + \"\\\"\")\n  } else if (type === 'Number') {\n    return (\"\" + (Number(value)))\n  } else {\n    return (\"\" + value)\n  }\n}\n\nvar EXPLICABLE_TYPES = ['string', 'number', 'boolean'];\nfunction isExplicable (value) {\n  return EXPLICABLE_TYPES.some(function (elem) { return value.toLowerCase() === elem; })\n}\n\nfunction isBoolean () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return args.some(function (elem) { return elem.toLowerCase() === 'boolean'; })\n}\n\n/*  */\n\nfunction handleError (err, vm, info) {\n  // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n  // See: https://github.com/vuejs/vuex/issues/1505\n  pushTarget();\n  try {\n    if (vm) {\n      var cur = vm;\n      while ((cur = cur.$parent)) {\n        var hooks = cur.$options.errorCaptured;\n        if (hooks) {\n          for (var i = 0; i < hooks.length; i++) {\n            try {\n              var capture = hooks[i].call(cur, err, vm, info) === false;\n              if (capture) { return }\n            } catch (e) {\n              globalHandleError(e, cur, 'errorCaptured hook');\n            }\n          }\n        }\n      }\n    }\n    globalHandleError(err, vm, info);\n  } finally {\n    popTarget();\n  }\n}\n\nfunction invokeWithErrorHandling (\n  handler,\n  context,\n  args,\n  vm,\n  info\n) {\n  var res;\n  try {\n    res = args ? handler.apply(context, args) : handler.call(context);\n    if (res && !res._isVue && isPromise(res) && !res._handled) {\n      res.catch(function (e) { return handleError(e, vm, info + \" (Promise/async)\"); });\n      // issue #9511\n      // avoid catch triggering multiple times when nested calls\n      res._handled = true;\n    }\n  } catch (e) {\n    handleError(e, vm, info);\n  }\n  return res\n}\n\nfunction globalHandleError (err, vm, info) {\n  if (config.errorHandler) {\n    try {\n      return config.errorHandler.call(null, err, vm, info)\n    } catch (e) {\n      // if the user intentionally throws the original error in the handler,\n      // do not log it twice\n      if (e !== err) {\n        logError(e, null, 'config.errorHandler');\n      }\n    }\n  }\n  logError(err, vm, info);\n}\n\nfunction logError (err, vm, info) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn((\"Error in \" + info + \": \\\"\" + (err.toString()) + \"\\\"\"), vm);\n  }\n  /* istanbul ignore else */\n  if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err\n  }\n}\n\n/*  */\n\nvar isUsingMicroTask = false;\n\nvar callbacks = [];\nvar pending = false;\n\nfunction flushCallbacks () {\n  pending = false;\n  var copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (var i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// Here we have async deferring wrappers using microtasks.\n// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// (e.g. #6813, out-in transitions).\n// Also, using (macro) tasks in event handler would cause some weird behaviors\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n// A major drawback of this tradeoff is that there are some scenarios\n// where microtasks have too high a priority and fire in between supposedly\n// sequential events (e.g. #4521, #6690, which have workarounds)\n// or even between bubbling of the same event (#6566).\nvar timerFunc;\n\n// The nextTick behavior leverages the microtask queue, which can be accessed\n// via either native Promise.then or MutationObserver.\n// MutationObserver has wider support, however it is seriously bugged in\n// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n// completely stops working after triggering a few times... so, if native\n// Promise is available, we will use it:\n/* istanbul ignore next, $flow-disable-line */\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  var p = Promise.resolve();\n  timerFunc = function () {\n    p.then(flushCallbacks);\n    // In problematic UIWebViews, Promise.then doesn't completely break, but\n    // it can get stuck in a weird state where callbacks are pushed into the\n    // microtask queue but the queue isn't being flushed, until the browser\n    // needs to do some other work, e.g. handle a timer. Therefore we can\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\n    if (isIOS) { setTimeout(noop); }\n  };\n  isUsingMicroTask = true;\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  var counter = 1;\n  var observer = new MutationObserver(flushCallbacks);\n  var textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true\n  });\n  timerFunc = function () {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n  isUsingMicroTask = true;\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = function () {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  // Fallback to setTimeout.\n  timerFunc = function () {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nfunction nextTick (cb, ctx) {\n  var _resolve;\n  callbacks.push(function () {\n    if (cb) {\n      try {\n        cb.call(ctx);\n      } catch (e) {\n        handleError(e, ctx, 'nextTick');\n      }\n    } else if (_resolve) {\n      _resolve(ctx);\n    }\n  });\n  if (!pending) {\n    pending = true;\n    timerFunc();\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve) {\n      _resolve = resolve;\n    })\n  }\n}\n\n/*  */\n\n/* not type checking this file because flow doesn't play well with Proxy */\n\nvar initProxy;\n\nif (process.env.NODE_ENV !== 'production') {\n  var allowedGlobals = makeMap(\n    'Infinity,undefined,NaN,isFinite,isNaN,' +\n    'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,' +\n    'require' // for Webpack/Browserify\n  );\n\n  var warnNonPresent = function (target, key) {\n    warn(\n      \"Property or method \\\"\" + key + \"\\\" is not defined on the instance but \" +\n      'referenced during render. Make sure that this property is reactive, ' +\n      'either in the data option, or for class-based components, by ' +\n      'initializing the property. ' +\n      'See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',\n      target\n    );\n  };\n\n  var warnReservedPrefix = function (target, key) {\n    warn(\n      \"Property \\\"\" + key + \"\\\" must be accessed with \\\"$data.\" + key + \"\\\" because \" +\n      'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n      'prevent conflicts with Vue internals. ' +\n      'See: https://vuejs.org/v2/api/#data',\n      target\n    );\n  };\n\n  var hasProxy =\n    typeof Proxy !== 'undefined' && isNative(Proxy);\n\n  if (hasProxy) {\n    var isBuiltInModifier = makeMap('stop,prevent,self,ctrl,shift,alt,meta,exact');\n    config.keyCodes = new Proxy(config.keyCodes, {\n      set: function set (target, key, value) {\n        if (isBuiltInModifier(key)) {\n          warn((\"Avoid overwriting built-in modifier in config.keyCodes: .\" + key));\n          return false\n        } else {\n          target[key] = value;\n          return true\n        }\n      }\n    });\n  }\n\n  var hasHandler = {\n    has: function has (target, key) {\n      var has = key in target;\n      var isAllowed = allowedGlobals(key) ||\n        (typeof key === 'string' && key.charAt(0) === '_' && !(key in target.$data));\n      if (!has && !isAllowed) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return has || !isAllowed\n    }\n  };\n\n  var getHandler = {\n    get: function get (target, key) {\n      if (typeof key === 'string' && !(key in target)) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return target[key]\n    }\n  };\n\n  initProxy = function initProxy (vm) {\n    if (hasProxy) {\n      // determine which proxy handler to use\n      var options = vm.$options;\n      var handlers = options.render && options.render._withStripped\n        ? getHandler\n        : hasHandler;\n      vm._renderProxy = new Proxy(vm, handlers);\n    } else {\n      vm._renderProxy = vm;\n    }\n  };\n}\n\n/*  */\n\nvar seenObjects = new _Set();\n\n/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a \"deep\" dependency.\n */\nfunction traverse (val) {\n  _traverse(val, seenObjects);\n  seenObjects.clear();\n}\n\nfunction _traverse (val, seen) {\n  var i, keys;\n  var isA = Array.isArray(val);\n  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {\n    return\n  }\n  if (val.__ob__) {\n    var depId = val.__ob__.dep.id;\n    if (seen.has(depId)) {\n      return\n    }\n    seen.add(depId);\n  }\n  if (isA) {\n    i = val.length;\n    while (i--) { _traverse(val[i], seen); }\n  } else {\n    keys = Object.keys(val);\n    i = keys.length;\n    while (i--) { _traverse(val[keys[i]], seen); }\n  }\n}\n\nvar mark;\nvar measure;\n\nif (process.env.NODE_ENV !== 'production') {\n  var perf = inBrowser && window.performance;\n  /* istanbul ignore if */\n  if (\n    perf &&\n    perf.mark &&\n    perf.measure &&\n    perf.clearMarks &&\n    perf.clearMeasures\n  ) {\n    mark = function (tag) { return perf.mark(tag); };\n    measure = function (name, startTag, endTag) {\n      perf.measure(name, startTag, endTag);\n      perf.clearMarks(startTag);\n      perf.clearMarks(endTag);\n      // perf.clearMeasures(name)\n    };\n  }\n}\n\n/*  */\n\nvar normalizeEvent = cached(function (name) {\n  var passive = name.charAt(0) === '&';\n  name = passive ? name.slice(1) : name;\n  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first\n  name = once$$1 ? name.slice(1) : name;\n  var capture = name.charAt(0) === '!';\n  name = capture ? name.slice(1) : name;\n  return {\n    name: name,\n    once: once$$1,\n    capture: capture,\n    passive: passive\n  }\n});\n\nfunction createFnInvoker (fns, vm) {\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, \"v-on handler\");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, \"v-on handler\")\n    }\n  }\n  invoker.fns = fns;\n  return invoker\n}\n\nfunction updateListeners (\n  on,\n  oldOn,\n  add,\n  remove$$1,\n  createOnceHandler,\n  vm\n) {\n  var name, def$$1, cur, old, event;\n  for (name in on) {\n    def$$1 = cur = on[name];\n    old = oldOn[name];\n    event = normalizeEvent(name);\n    if (isUndef(cur)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Invalid handler for event \\\"\" + (event.name) + \"\\\": got \" + String(cur),\n        vm\n      );\n    } else if (isUndef(old)) {\n      if (isUndef(cur.fns)) {\n        cur = on[name] = createFnInvoker(cur, vm);\n      }\n      if (isTrue(event.once)) {\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n      }\n      add(event.name, cur, event.capture, event.passive, event.params);\n    } else if (cur !== old) {\n      old.fns = cur;\n      on[name] = old;\n    }\n  }\n  for (name in oldOn) {\n    if (isUndef(on[name])) {\n      event = normalizeEvent(name);\n      remove$$1(event.name, oldOn[name], event.capture);\n    }\n  }\n}\n\n/*  */\n\nfunction mergeVNodeHook (def, hookKey, hook) {\n  if (def instanceof VNode) {\n    def = def.data.hook || (def.data.hook = {});\n  }\n  var invoker;\n  var oldHook = def[hookKey];\n\n  function wrappedHook () {\n    hook.apply(this, arguments);\n    // important: remove merged hook to ensure it's called only once\n    // and prevent memory leak\n    remove(invoker.fns, wrappedHook);\n  }\n\n  if (isUndef(oldHook)) {\n    // no existing hook\n    invoker = createFnInvoker([wrappedHook]);\n  } else {\n    /* istanbul ignore if */\n    if (isDef(oldHook.fns) && isTrue(oldHook.merged)) {\n      // already a merged invoker\n      invoker = oldHook;\n      invoker.fns.push(wrappedHook);\n    } else {\n      // existing plain hook\n      invoker = createFnInvoker([oldHook, wrappedHook]);\n    }\n  }\n\n  invoker.merged = true;\n  def[hookKey] = invoker;\n}\n\n/*  */\n\nfunction extractPropsFromVNodeData (\n  data,\n  Ctor,\n  tag\n) {\n  // we are only extracting raw values here.\n  // validation and default values are handled in the child\n  // component itself.\n  var propOptions = Ctor.options.props;\n  if (isUndef(propOptions)) {\n    return\n  }\n  var res = {};\n  var attrs = data.attrs;\n  var props = data.props;\n  if (isDef(attrs) || isDef(props)) {\n    for (var key in propOptions) {\n      var altKey = hyphenate(key);\n      if (process.env.NODE_ENV !== 'production') {\n        var keyInLowerCase = key.toLowerCase();\n        if (\n          key !== keyInLowerCase &&\n          attrs && hasOwn(attrs, keyInLowerCase)\n        ) {\n          tip(\n            \"Prop \\\"\" + keyInLowerCase + \"\\\" is passed to component \" +\n            (formatComponentName(tag || Ctor)) + \", but the declared prop name is\" +\n            \" \\\"\" + key + \"\\\". \" +\n            \"Note that HTML attributes are case-insensitive and camelCased \" +\n            \"props need to use their kebab-case equivalents when using in-DOM \" +\n            \"templates. You should probably use \\\"\" + altKey + \"\\\" instead of \\\"\" + key + \"\\\".\"\n          );\n        }\n      }\n      checkProp(res, props, key, altKey, true) ||\n      checkProp(res, attrs, key, altKey, false);\n    }\n  }\n  return res\n}\n\nfunction checkProp (\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n) {\n  if (isDef(hash)) {\n    if (hasOwn(hash, key)) {\n      res[key] = hash[key];\n      if (!preserve) {\n        delete hash[key];\n      }\n      return true\n    } else if (hasOwn(hash, altKey)) {\n      res[key] = hash[altKey];\n      if (!preserve) {\n        delete hash[altKey];\n      }\n      return true\n    }\n  }\n  return false\n}\n\n/*  */\n\n// The template compiler attempts to minimize the need for normalization by\n// statically analyzing the template at compile time.\n//\n// For plain HTML markup, normalization can be completely skipped because the\n// generated render function is guaranteed to return Array<VNode>. There are\n// two cases where extra normalization is needed:\n\n// 1. When the children contains components - because a functional component\n// may return an Array instead of a single root. In this case, just a simple\n// normalization is needed - if any child is an Array, we flatten the whole\n// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n// because functional components already normalize their own children.\nfunction simpleNormalizeChildren (children) {\n  for (var i = 0; i < children.length; i++) {\n    if (Array.isArray(children[i])) {\n      return Array.prototype.concat.apply([], children)\n    }\n  }\n  return children\n}\n\n// 2. When the children contains constructs that always generated nested Arrays,\n// e.g. <template>, <slot>, v-for, or when the children is provided by user\n// with hand-written render functions / JSX. In such cases a full normalization\n// is needed to cater to all possible types of children values.\nfunction normalizeChildren (children) {\n  return isPrimitive(children)\n    ? [createTextVNode(children)]\n    : Array.isArray(children)\n      ? normalizeArrayChildren(children)\n      : undefined\n}\n\nfunction isTextNode (node) {\n  return isDef(node) && isDef(node.text) && isFalse(node.isComment)\n}\n\nfunction normalizeArrayChildren (children, nestedIndex) {\n  var res = [];\n  var i, c, lastIndex, last;\n  for (i = 0; i < children.length; i++) {\n    c = children[i];\n    if (isUndef(c) || typeof c === 'boolean') { continue }\n    lastIndex = res.length - 1;\n    last = res[lastIndex];\n    //  nested\n    if (Array.isArray(c)) {\n      if (c.length > 0) {\n        c = normalizeArrayChildren(c, ((nestedIndex || '') + \"_\" + i));\n        // merge adjacent text nodes\n        if (isTextNode(c[0]) && isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.text + (c[0]).text);\n          c.shift();\n        }\n        res.push.apply(res, c);\n      }\n    } else if (isPrimitive(c)) {\n      if (isTextNode(last)) {\n        // merge adjacent text nodes\n        // this is necessary for SSR hydration because text nodes are\n        // essentially merged when rendered to HTML strings\n        res[lastIndex] = createTextVNode(last.text + c);\n      } else if (c !== '') {\n        // convert primitive to vnode\n        res.push(createTextVNode(c));\n      }\n    } else {\n      if (isTextNode(c) && isTextNode(last)) {\n        // merge adjacent text nodes\n        res[lastIndex] = createTextVNode(last.text + c.text);\n      } else {\n        // default key for nested array children (likely generated by v-for)\n        if (isTrue(children._isVList) &&\n          isDef(c.tag) &&\n          isUndef(c.key) &&\n          isDef(nestedIndex)) {\n          c.key = \"__vlist\" + nestedIndex + \"_\" + i + \"__\";\n        }\n        res.push(c);\n      }\n    }\n  }\n  return res\n}\n\n/*  */\n\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n\nfunction resolveInject (inject, vm) {\n  if (inject) {\n    // inject is :any because flow is not smart enough to figure out cached\n    var result = Object.create(null);\n    var keys = hasSymbol\n      ? Reflect.ownKeys(inject)\n      : Object.keys(inject);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      // #6574 in case the inject object is observed...\n      if (key === '__ob__') { continue }\n      var provideKey = inject[key].from;\n      var source = vm;\n      while (source) {\n        if (source._provided && hasOwn(source._provided, provideKey)) {\n          result[key] = source._provided[provideKey];\n          break\n        }\n        source = source.$parent;\n      }\n      if (!source) {\n        if ('default' in inject[key]) {\n          var provideDefault = inject[key].default;\n          result[key] = typeof provideDefault === 'function'\n            ? provideDefault.call(vm)\n            : provideDefault;\n        } else if (process.env.NODE_ENV !== 'production') {\n          warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n        }\n      }\n    }\n    return result\n  }\n}\n\n/*  */\n\n\n\n/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */\nfunction resolveSlots (\n  children,\n  context\n) {\n  if (!children || !children.length) {\n    return {}\n  }\n  var slots = {};\n  for (var i = 0, l = children.length; i < l; i++) {\n    var child = children[i];\n    var data = child.data;\n    // remove slot attribute if the node is resolved as a Vue slot node\n    if (data && data.attrs && data.attrs.slot) {\n      delete data.attrs.slot;\n    }\n    // named slots should only be respected if the vnode was rendered in the\n    // same context.\n    if ((child.context === context || child.fnContext === context) &&\n      data && data.slot != null\n    ) {\n      var name = data.slot;\n      var slot = (slots[name] || (slots[name] = []));\n      if (child.tag === 'template') {\n        slot.push.apply(slot, child.children || []);\n      } else {\n        slot.push(child);\n      }\n    } else {\n      (slots.default || (slots.default = [])).push(child);\n    }\n  }\n  // ignore slots that contains only whitespace\n  for (var name$1 in slots) {\n    if (slots[name$1].every(isWhitespace)) {\n      delete slots[name$1];\n    }\n  }\n  return slots\n}\n\nfunction isWhitespace (node) {\n  return (node.isComment && !node.asyncFactory) || node.text === ' '\n}\n\n/*  */\n\nfunction isAsyncPlaceholder (node) {\n  return node.isComment && node.asyncFactory\n}\n\n/*  */\n\nfunction normalizeScopedSlots (\n  slots,\n  normalSlots,\n  prevSlots\n) {\n  var res;\n  var hasNormalSlots = Object.keys(normalSlots).length > 0;\n  var isStable = slots ? !!slots.$stable : !hasNormalSlots;\n  var key = slots && slots.$key;\n  if (!slots) {\n    res = {};\n  } else if (slots._normalized) {\n    // fast path 1: child component re-render only, parent did not change\n    return slots._normalized\n  } else if (\n    isStable &&\n    prevSlots &&\n    prevSlots !== emptyObject &&\n    key === prevSlots.$key &&\n    !hasNormalSlots &&\n    !prevSlots.$hasNormal\n  ) {\n    // fast path 2: stable scoped slots w/ no normal slots to proxy,\n    // only need to normalize once\n    return prevSlots\n  } else {\n    res = {};\n    for (var key$1 in slots) {\n      if (slots[key$1] && key$1[0] !== '$') {\n        res[key$1] = normalizeScopedSlot(normalSlots, key$1, slots[key$1]);\n      }\n    }\n  }\n  // expose normal slots on scopedSlots\n  for (var key$2 in normalSlots) {\n    if (!(key$2 in res)) {\n      res[key$2] = proxyNormalSlot(normalSlots, key$2);\n    }\n  }\n  // avoriaz seems to mock a non-extensible $scopedSlots object\n  // and when that is passed down this would cause an error\n  if (slots && Object.isExtensible(slots)) {\n    (slots)._normalized = res;\n  }\n  def(res, '$stable', isStable);\n  def(res, '$key', key);\n  def(res, '$hasNormal', hasNormalSlots);\n  return res\n}\n\nfunction normalizeScopedSlot(normalSlots, key, fn) {\n  var normalized = function () {\n    var res = arguments.length ? fn.apply(null, arguments) : fn({});\n    res = res && typeof res === 'object' && !Array.isArray(res)\n      ? [res] // single vnode\n      : normalizeChildren(res);\n    var vnode = res && res[0];\n    return res && (\n      !vnode ||\n      (res.length === 1 && vnode.isComment && !isAsyncPlaceholder(vnode)) // #9658, #10391\n    ) ? undefined\n      : res\n  };\n  // this is a slot using the new v-slot syntax without scope. although it is\n  // compiled as a scoped slot, render fn users would expect it to be present\n  // on this.$slots because the usage is semantically a normal slot.\n  if (fn.proxy) {\n    Object.defineProperty(normalSlots, key, {\n      get: normalized,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  return normalized\n}\n\nfunction proxyNormalSlot(slots, key) {\n  return function () { return slots[key]; }\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering v-for lists.\n */\nfunction renderList (\n  val,\n  render\n) {\n  var ret, i, l, keys, key;\n  if (Array.isArray(val) || typeof val === 'string') {\n    ret = new Array(val.length);\n    for (i = 0, l = val.length; i < l; i++) {\n      ret[i] = render(val[i], i);\n    }\n  } else if (typeof val === 'number') {\n    ret = new Array(val);\n    for (i = 0; i < val; i++) {\n      ret[i] = render(i + 1, i);\n    }\n  } else if (isObject(val)) {\n    if (hasSymbol && val[Symbol.iterator]) {\n      ret = [];\n      var iterator = val[Symbol.iterator]();\n      var result = iterator.next();\n      while (!result.done) {\n        ret.push(render(result.value, ret.length));\n        result = iterator.next();\n      }\n    } else {\n      keys = Object.keys(val);\n      ret = new Array(keys.length);\n      for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n        ret[i] = render(val[key], key, i);\n      }\n    }\n  }\n  if (!isDef(ret)) {\n    ret = [];\n  }\n  (ret)._isVList = true;\n  return ret\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering <slot>\n */\nfunction renderSlot (\n  name,\n  fallbackRender,\n  props,\n  bindObject\n) {\n  var scopedSlotFn = this.$scopedSlots[name];\n  var nodes;\n  if (scopedSlotFn) {\n    // scoped slot\n    props = props || {};\n    if (bindObject) {\n      if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n        warn('slot v-bind without argument expects an Object', this);\n      }\n      props = extend(extend({}, bindObject), props);\n    }\n    nodes =\n      scopedSlotFn(props) ||\n      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender);\n  } else {\n    nodes =\n      this.$slots[name] ||\n      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender);\n  }\n\n  var target = props && props.slot;\n  if (target) {\n    return this.$createElement('template', { slot: target }, nodes)\n  } else {\n    return nodes\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for resolving filters\n */\nfunction resolveFilter (id) {\n  return resolveAsset(this.$options, 'filters', id, true) || identity\n}\n\n/*  */\n\nfunction isKeyNotMatch (expect, actual) {\n  if (Array.isArray(expect)) {\n    return expect.indexOf(actual) === -1\n  } else {\n    return expect !== actual\n  }\n}\n\n/**\n * Runtime helper for checking keyCodes from config.\n * exposed as Vue.prototype._k\n * passing in eventKeyName as last argument separately for backwards compat\n */\nfunction checkKeyCodes (\n  eventKeyCode,\n  key,\n  builtInKeyCode,\n  eventKeyName,\n  builtInKeyName\n) {\n  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;\n  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {\n    return isKeyNotMatch(builtInKeyName, eventKeyName)\n  } else if (mappedKeyCode) {\n    return isKeyNotMatch(mappedKeyCode, eventKeyCode)\n  } else if (eventKeyName) {\n    return hyphenate(eventKeyName) !== key\n  }\n  return eventKeyCode === undefined\n}\n\n/*  */\n\n/**\n * Runtime helper for merging v-bind=\"object\" into a VNode's data.\n */\nfunction bindObjectProps (\n  data,\n  tag,\n  value,\n  asProp,\n  isSync\n) {\n  if (value) {\n    if (!isObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-bind without argument expects an Object or Array value',\n        this\n      );\n    } else {\n      if (Array.isArray(value)) {\n        value = toObject(value);\n      }\n      var hash;\n      var loop = function ( key ) {\n        if (\n          key === 'class' ||\n          key === 'style' ||\n          isReservedAttribute(key)\n        ) {\n          hash = data;\n        } else {\n          var type = data.attrs && data.attrs.type;\n          hash = asProp || config.mustUseProp(tag, type, key)\n            ? data.domProps || (data.domProps = {})\n            : data.attrs || (data.attrs = {});\n        }\n        var camelizedKey = camelize(key);\n        var hyphenatedKey = hyphenate(key);\n        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n          hash[key] = value[key];\n\n          if (isSync) {\n            var on = data.on || (data.on = {});\n            on[(\"update:\" + key)] = function ($event) {\n              value[key] = $event;\n            };\n          }\n        }\n      };\n\n      for (var key in value) loop( key );\n    }\n  }\n  return data\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering static trees.\n */\nfunction renderStatic (\n  index,\n  isInFor\n) {\n  var cached = this._staticTrees || (this._staticTrees = []);\n  var tree = cached[index];\n  // if has already-rendered static tree and not inside v-for,\n  // we can reuse the same tree.\n  if (tree && !isInFor) {\n    return tree\n  }\n  // otherwise, render a fresh tree.\n  tree = cached[index] = this.$options.staticRenderFns[index].call(\n    this._renderProxy,\n    null,\n    this // for render fns generated for functional component templates\n  );\n  markStatic(tree, (\"__static__\" + index), false);\n  return tree\n}\n\n/**\n * Runtime helper for v-once.\n * Effectively it means marking the node as static with a unique key.\n */\nfunction markOnce (\n  tree,\n  index,\n  key\n) {\n  markStatic(tree, (\"__once__\" + index + (key ? (\"_\" + key) : \"\")), true);\n  return tree\n}\n\nfunction markStatic (\n  tree,\n  key,\n  isOnce\n) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i] && typeof tree[i] !== 'string') {\n        markStaticNode(tree[i], (key + \"_\" + i), isOnce);\n      }\n    }\n  } else {\n    markStaticNode(tree, key, isOnce);\n  }\n}\n\nfunction markStaticNode (node, key, isOnce) {\n  node.isStatic = true;\n  node.key = key;\n  node.isOnce = isOnce;\n}\n\n/*  */\n\nfunction bindObjectListeners (data, value) {\n  if (value) {\n    if (!isPlainObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-on without argument expects an Object value',\n        this\n      );\n    } else {\n      var on = data.on = data.on ? extend({}, data.on) : {};\n      for (var key in value) {\n        var existing = on[key];\n        var ours = value[key];\n        on[key] = existing ? [].concat(existing, ours) : ours;\n      }\n    }\n  }\n  return data\n}\n\n/*  */\n\nfunction resolveScopedSlots (\n  fns, // see flow/vnode\n  res,\n  // the following are added in 2.6\n  hasDynamicKeys,\n  contentHashKey\n) {\n  res = res || { $stable: !hasDynamicKeys };\n  for (var i = 0; i < fns.length; i++) {\n    var slot = fns[i];\n    if (Array.isArray(slot)) {\n      resolveScopedSlots(slot, res, hasDynamicKeys);\n    } else if (slot) {\n      // marker for reverse proxying v-slot without scope on this.$slots\n      if (slot.proxy) {\n        slot.fn.proxy = true;\n      }\n      res[slot.key] = slot.fn;\n    }\n  }\n  if (contentHashKey) {\n    (res).$key = contentHashKey;\n  }\n  return res\n}\n\n/*  */\n\nfunction bindDynamicKeys (baseObj, values) {\n  for (var i = 0; i < values.length; i += 2) {\n    var key = values[i];\n    if (typeof key === 'string' && key) {\n      baseObj[values[i]] = values[i + 1];\n    } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n      // null is a special value for explicitly removing a binding\n      warn(\n        (\"Invalid value for dynamic directive argument (expected string or null): \" + key),\n        this\n      );\n    }\n  }\n  return baseObj\n}\n\n// helper to dynamically append modifier runtime markers to event names.\n// ensure only append when value is already string, otherwise it will be cast\n// to string and cause the type check to miss.\nfunction prependModifier (value, symbol) {\n  return typeof value === 'string' ? symbol + value : value\n}\n\n/*  */\n\nfunction installRenderHelpers (target) {\n  target._o = markOnce;\n  target._n = toNumber;\n  target._s = toString;\n  target._l = renderList;\n  target._t = renderSlot;\n  target._q = looseEqual;\n  target._i = looseIndexOf;\n  target._m = renderStatic;\n  target._f = resolveFilter;\n  target._k = checkKeyCodes;\n  target._b = bindObjectProps;\n  target._v = createTextVNode;\n  target._e = createEmptyVNode;\n  target._u = resolveScopedSlots;\n  target._g = bindObjectListeners;\n  target._d = bindDynamicKeys;\n  target._p = prependModifier;\n}\n\n/*  */\n\nfunction FunctionalRenderContext (\n  data,\n  props,\n  children,\n  parent,\n  Ctor\n) {\n  var this$1 = this;\n\n  var options = Ctor.options;\n  // ensure the createElement function in functional components\n  // gets a unique context - this is necessary for correct named slot check\n  var contextVm;\n  if (hasOwn(parent, '_uid')) {\n    contextVm = Object.create(parent);\n    // $flow-disable-line\n    contextVm._original = parent;\n  } else {\n    // the context vm passed in is a functional context as well.\n    // in this case we want to make sure we are able to get a hold to the\n    // real context instance.\n    contextVm = parent;\n    // $flow-disable-line\n    parent = parent._original;\n  }\n  var isCompiled = isTrue(options._compiled);\n  var needNormalization = !isCompiled;\n\n  this.data = data;\n  this.props = props;\n  this.children = children;\n  this.parent = parent;\n  this.listeners = data.on || emptyObject;\n  this.injections = resolveInject(options.inject, parent);\n  this.slots = function () {\n    if (!this$1.$slots) {\n      normalizeScopedSlots(\n        data.scopedSlots,\n        this$1.$slots = resolveSlots(children, parent)\n      );\n    }\n    return this$1.$slots\n  };\n\n  Object.defineProperty(this, 'scopedSlots', ({\n    enumerable: true,\n    get: function get () {\n      return normalizeScopedSlots(data.scopedSlots, this.slots())\n    }\n  }));\n\n  // support for compiled functional template\n  if (isCompiled) {\n    // exposing $options for renderStatic()\n    this.$options = options;\n    // pre-resolve slots for renderSlot()\n    this.$slots = this.slots();\n    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots);\n  }\n\n  if (options._scopeId) {\n    this._c = function (a, b, c, d) {\n      var vnode = createElement(contextVm, a, b, c, d, needNormalization);\n      if (vnode && !Array.isArray(vnode)) {\n        vnode.fnScopeId = options._scopeId;\n        vnode.fnContext = parent;\n      }\n      return vnode\n    };\n  } else {\n    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };\n  }\n}\n\ninstallRenderHelpers(FunctionalRenderContext.prototype);\n\nfunction createFunctionalComponent (\n  Ctor,\n  propsData,\n  data,\n  contextVm,\n  children\n) {\n  var options = Ctor.options;\n  var props = {};\n  var propOptions = options.props;\n  if (isDef(propOptions)) {\n    for (var key in propOptions) {\n      props[key] = validateProp(key, propOptions, propsData || emptyObject);\n    }\n  } else {\n    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }\n    if (isDef(data.props)) { mergeProps(props, data.props); }\n  }\n\n  var renderContext = new FunctionalRenderContext(\n    data,\n    props,\n    children,\n    contextVm,\n    Ctor\n  );\n\n  var vnode = options.render.call(null, renderContext._c, renderContext);\n\n  if (vnode instanceof VNode) {\n    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n  } else if (Array.isArray(vnode)) {\n    var vnodes = normalizeChildren(vnode) || [];\n    var res = new Array(vnodes.length);\n    for (var i = 0; i < vnodes.length; i++) {\n      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext);\n    }\n    return res\n  }\n}\n\nfunction cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n  // #7817 clone node before setting fnContext, otherwise if the node is reused\n  // (e.g. it was from a cached normal slot) the fnContext causes named slots\n  // that should not be matched to match.\n  var clone = cloneVNode(vnode);\n  clone.fnContext = contextVm;\n  clone.fnOptions = options;\n  if (process.env.NODE_ENV !== 'production') {\n    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext;\n  }\n  if (data.slot) {\n    (clone.data || (clone.data = {})).slot = data.slot;\n  }\n  return clone\n}\n\nfunction mergeProps (to, from) {\n  for (var key in from) {\n    to[camelize(key)] = from[key];\n  }\n}\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// inline hooks to be invoked on component VNodes during patch\nvar componentVNodeHooks = {\n  init: function init (vnode, hydrating) {\n    if (\n      vnode.componentInstance &&\n      !vnode.componentInstance._isDestroyed &&\n      vnode.data.keepAlive\n    ) {\n      // kept-alive components, treat as a patch\n      var mountedNode = vnode; // work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode);\n    } else {\n      var child = vnode.componentInstance = createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      );\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n    }\n  },\n\n  prepatch: function prepatch (oldVnode, vnode) {\n    var options = vnode.componentOptions;\n    var child = vnode.componentInstance = oldVnode.componentInstance;\n    updateChildComponent(\n      child,\n      options.propsData, // updated props\n      options.listeners, // updated listeners\n      vnode, // new parent vnode\n      options.children // new children\n    );\n  },\n\n  insert: function insert (vnode) {\n    var context = vnode.context;\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isMounted) {\n      componentInstance._isMounted = true;\n      callHook(componentInstance, 'mounted');\n    }\n    if (vnode.data.keepAlive) {\n      if (context._isMounted) {\n        // vue-router#1212\n        // During updates, a kept-alive component's child components may\n        // change, so directly walking the tree here may call activated hooks\n        // on incorrect children. Instead we push them into a queue which will\n        // be processed after the whole patch process ended.\n        queueActivatedComponent(componentInstance);\n      } else {\n        activateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  },\n\n  destroy: function destroy (vnode) {\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isDestroyed) {\n      if (!vnode.data.keepAlive) {\n        componentInstance.$destroy();\n      } else {\n        deactivateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  }\n};\n\nvar hooksToMerge = Object.keys(componentVNodeHooks);\n\nfunction createComponent (\n  Ctor,\n  data,\n  context,\n  children,\n  tag\n) {\n  if (isUndef(Ctor)) {\n    return\n  }\n\n  var baseCtor = context.$options._base;\n\n  // plain options object: turn it into a constructor\n  if (isObject(Ctor)) {\n    Ctor = baseCtor.extend(Ctor);\n  }\n\n  // if at this stage it's not a constructor or an async component factory,\n  // reject.\n  if (typeof Ctor !== 'function') {\n    if (process.env.NODE_ENV !== 'production') {\n      warn((\"Invalid Component definition: \" + (String(Ctor))), context);\n    }\n    return\n  }\n\n  // async component\n  var asyncFactory;\n  if (isUndef(Ctor.cid)) {\n    asyncFactory = Ctor;\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor);\n    if (Ctor === undefined) {\n      // return a placeholder node for async component, which is rendered\n      // as a comment node but preserves all the raw information for the node.\n      // the information will be used for async server-rendering and hydration.\n      return createAsyncPlaceholder(\n        asyncFactory,\n        data,\n        context,\n        children,\n        tag\n      )\n    }\n  }\n\n  data = data || {};\n\n  // resolve constructor options in case global mixins are applied after\n  // component constructor creation\n  resolveConstructorOptions(Ctor);\n\n  // transform component v-model data into props & events\n  if (isDef(data.model)) {\n    transformModel(Ctor.options, data);\n  }\n\n  // extract props\n  var propsData = extractPropsFromVNodeData(data, Ctor, tag);\n\n  // functional component\n  if (isTrue(Ctor.options.functional)) {\n    return createFunctionalComponent(Ctor, propsData, data, context, children)\n  }\n\n  // extract listeners, since these needs to be treated as\n  // child component listeners instead of DOM listeners\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n\n  if (isTrue(Ctor.options.abstract)) {\n    // abstract components do not keep anything\n    // other than props & listeners & slot\n\n    // work around flow\n    var slot = data.slot;\n    data = {};\n    if (slot) {\n      data.slot = slot;\n    }\n  }\n\n  // install component management hooks onto the placeholder node\n  installComponentHooks(data);\n\n  // return a placeholder vnode\n  var name = Ctor.options.name || tag;\n  var vnode = new VNode(\n    (\"vue-component-\" + (Ctor.cid) + (name ? (\"-\" + name) : '')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}\n\nfunction createComponentInstanceForVnode (\n  // we know it's MountedComponentVNode but flow doesn't\n  vnode,\n  // activeInstance in lifecycle state\n  parent\n) {\n  var options = {\n    _isComponent: true,\n    _parentVnode: vnode,\n    parent: parent\n  };\n  // check inline-template render functions\n  var inlineTemplate = vnode.data.inlineTemplate;\n  if (isDef(inlineTemplate)) {\n    options.render = inlineTemplate.render;\n    options.staticRenderFns = inlineTemplate.staticRenderFns;\n  }\n  return new vnode.componentOptions.Ctor(options)\n}\n\nfunction installComponentHooks (data) {\n  var hooks = data.hook || (data.hook = {});\n  for (var i = 0; i < hooksToMerge.length; i++) {\n    var key = hooksToMerge[i];\n    var existing = hooks[key];\n    var toMerge = componentVNodeHooks[key];\n    if (existing !== toMerge && !(existing && existing._merged)) {\n      hooks[key] = existing ? mergeHook$1(toMerge, existing) : toMerge;\n    }\n  }\n}\n\nfunction mergeHook$1 (f1, f2) {\n  var merged = function (a, b) {\n    // flow complains about extra args which is why we use any\n    f1(a, b);\n    f2(a, b);\n  };\n  merged._merged = true;\n  return merged\n}\n\n// transform component v-model info (value and callback) into\n// prop and event handler respectively.\nfunction transformModel (options, data) {\n  var prop = (options.model && options.model.prop) || 'value';\n  var event = (options.model && options.model.event) || 'input'\n  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value;\n  var on = data.on || (data.on = {});\n  var existing = on[event];\n  var callback = data.model.callback;\n  if (isDef(existing)) {\n    if (\n      Array.isArray(existing)\n        ? existing.indexOf(callback) === -1\n        : existing !== callback\n    ) {\n      on[event] = [callback].concat(existing);\n    }\n  } else {\n    on[event] = callback;\n  }\n}\n\n/*  */\n\nvar SIMPLE_NORMALIZE = 1;\nvar ALWAYS_NORMALIZE = 2;\n\n// wrapper function for providing a more flexible interface\n// without getting yelled at by flow\nfunction createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType,\n  alwaysNormalize\n) {\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  if (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE;\n  }\n  return _createElement(context, tag, data, children, normalizationType)\n}\n\nfunction _createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType\n) {\n  if (isDef(data) && isDef((data).__ob__)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Avoid using observed data object as vnode data: \" + (JSON.stringify(data)) + \"\\n\" +\n      'Always create fresh vnode data objects in each render!',\n      context\n    );\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (isDef(data) && isDef(data.is)) {\n    tag = data.is;\n  }\n  if (!tag) {\n    // in case of component :is set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (process.env.NODE_ENV !== 'production' &&\n    isDef(data) && isDef(data.key) && !isPrimitive(data.key)\n  ) {\n    {\n      warn(\n        'Avoid using non-primitive value as key, ' +\n        'use string/number value instead.',\n        context\n      );\n    }\n  }\n  // support single function children as default scoped slot\n  if (Array.isArray(children) &&\n    typeof children[0] === 'function'\n  ) {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  var vnode, ns;\n  if (typeof tag === 'string') {\n    var Ctor;\n    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);\n    if (config.isReservedTag(tag)) {\n      // platform built-in elements\n      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn) && data.tag !== 'component') {\n        warn(\n          (\"The .native modifier for v-on is only valid on components but it was used on <\" + tag + \">.\"),\n          context\n        );\n      }\n      vnode = new VNode(\n        config.parsePlatformTagName(tag), data, children,\n        undefined, undefined, context\n      );\n    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n      // component\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        tag, data, children,\n        undefined, undefined, context\n      );\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(tag, data, context, children);\n  }\n  if (Array.isArray(vnode)) {\n    return vnode\n  } else if (isDef(vnode)) {\n    if (isDef(ns)) { applyNS(vnode, ns); }\n    if (isDef(data)) { registerDeepBindings(data); }\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n}\n\nfunction applyNS (vnode, ns, force) {\n  vnode.ns = ns;\n  if (vnode.tag === 'foreignObject') {\n    // use default namespace inside foreignObject\n    ns = undefined;\n    force = true;\n  }\n  if (isDef(vnode.children)) {\n    for (var i = 0, l = vnode.children.length; i < l; i++) {\n      var child = vnode.children[i];\n      if (isDef(child.tag) && (\n        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {\n        applyNS(child, ns, force);\n      }\n    }\n  }\n}\n\n// ref #5318\n// necessary to ensure parent re-render when deep bindings like :style and\n// :class are used on slot nodes\nfunction registerDeepBindings (data) {\n  if (isObject(data.style)) {\n    traverse(data.style);\n  }\n  if (isObject(data.class)) {\n    traverse(data.class);\n  }\n}\n\n/*  */\n\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n\nvar currentRenderingInstance = null;\n\nfunction renderMixin (Vue) {\n  // install runtime convenience helpers\n  installRenderHelpers(Vue.prototype);\n\n  Vue.prototype.$nextTick = function (fn) {\n    return nextTick(fn, this)\n  };\n\n  Vue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n      vm.$scopedSlots = normalizeScopedSlots(\n        _parentVnode.data.scopedSlots,\n        vm.$slots,\n        vm.$scopedSlots\n      );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n      // There's no need to maintain a stack because all render fns are called\n      // separately from one another. Nested component's render fns are called\n      // when parent component is patched.\n      currentRenderingInstance = vm;\n      vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n      handleError(e, vm, \"render\");\n      // return error render result,\n      // or previous vnode to prevent render error causing blank component\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n        try {\n          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n        } catch (e) {\n          handleError(e, vm, \"renderError\");\n          vnode = vm._vnode;\n        }\n      } else {\n        vnode = vm._vnode;\n      }\n    } finally {\n      currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n      vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n      if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n        warn(\n          'Multiple root nodes returned from render function. Render function ' +\n          'should return a single root node.',\n          vm\n        );\n      }\n      vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n  };\n}\n\n/*  */\n\nfunction ensureCtor (comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default;\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nfunction createAsyncPlaceholder (\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  var node = createEmptyVNode();\n  node.asyncFactory = factory;\n  node.asyncMeta = { data: data, context: context, children: children, tag: tag };\n  return node\n}\n\nfunction resolveAsyncComponent (\n  factory,\n  baseCtor\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  var owner = currentRenderingInstance;\n  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n    // already pending\n    factory.owners.push(owner);\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (owner && !isDef(factory.owners)) {\n    var owners = factory.owners = [owner];\n    var sync = true;\n    var timerLoading = null;\n    var timerTimeout = null\n\n    ;(owner).$on('hook:destroyed', function () { return remove(owners, owner); });\n\n    var forceRender = function (renderCompleted) {\n      for (var i = 0, l = owners.length; i < l; i++) {\n        (owners[i]).$forceUpdate();\n      }\n\n      if (renderCompleted) {\n        owners.length = 0;\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading);\n          timerLoading = null;\n        }\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout);\n          timerTimeout = null;\n        }\n      }\n    };\n\n    var resolve = once(function (res) {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor);\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true);\n      } else {\n        owners.length = 0;\n      }\n    });\n\n    var reject = once(function (reason) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed to resolve async component: \" + (String(factory)) +\n        (reason ? (\"\\nReason: \" + reason) : '')\n      );\n      if (isDef(factory.errorComp)) {\n        factory.error = true;\n        forceRender(true);\n      }\n    });\n\n    var res = factory(resolve, reject);\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject);\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject);\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor);\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor);\n          if (res.delay === 0) {\n            factory.loading = true;\n          } else {\n            timerLoading = setTimeout(function () {\n              timerLoading = null;\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true;\n                forceRender(false);\n              }\n            }, res.delay || 200);\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(function () {\n            timerTimeout = null;\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? (\"timeout (\" + (res.timeout) + \"ms)\")\n                  : null\n              );\n            }\n          }, res.timeout);\n        }\n      }\n    }\n\n    sync = false;\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n\n/*  */\n\nfunction getFirstComponentChild (children) {\n  if (Array.isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      var c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c\n      }\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n\nvar target;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n}\n\nfunction createOnceHandler (event, fn) {\n  var _target = target;\n  return function onceHandler () {\n    var res = fn.apply(null, arguments);\n    if (res !== null) {\n      _target.$off(event, onceHandler);\n    }\n  }\n}\n\nfunction updateComponentListeners (\n  vm,\n  listeners,\n  oldListeners\n) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}\n\nfunction eventsMixin (Vue) {\n  var hookRE = /^hook:/;\n  Vue.prototype.$on = function (event, fn) {\n    var vm = this;\n    if (Array.isArray(event)) {\n      for (var i = 0, l = event.length; i < l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn);\n      // optimize hook:event cost by using a boolean flag marked at registration\n      // instead of a hash lookup\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$once = function (event, fn) {\n    var vm = this;\n    function on () {\n      vm.$off(event, on);\n      fn.apply(vm, arguments);\n    }\n    on.fn = fn;\n    vm.$on(event, on);\n    return vm\n  };\n\n  Vue.prototype.$off = function (event, fn) {\n    var vm = this;\n    // all\n    if (!arguments.length) {\n      vm._events = Object.create(null);\n      return vm\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n        vm.$off(event[i$1], fn);\n      }\n      return vm\n    }\n    // specific event\n    var cbs = vm._events[event];\n    if (!cbs) {\n      return vm\n    }\n    if (!fn) {\n      vm._events[event] = null;\n      return vm\n    }\n    // specific handler\n    var cb;\n    var i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn || cb.fn === fn) {\n        cbs.splice(i, 1);\n        break\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$emit = function (event) {\n    var vm = this;\n    if (process.env.NODE_ENV !== 'production') {\n      var lowerCaseEvent = event.toLowerCase();\n      if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n        tip(\n          \"Event \\\"\" + lowerCaseEvent + \"\\\" is emitted in component \" +\n          (formatComponentName(vm)) + \" but the handler is registered for \\\"\" + event + \"\\\". \" +\n          \"Note that HTML attributes are case-insensitive and you cannot use \" +\n          \"v-on to listen to camelCase events when using in-DOM templates. \" +\n          \"You should probably use \\\"\" + (hyphenate(event)) + \"\\\" instead of \\\"\" + event + \"\\\".\"\n        );\n      }\n    }\n    var cbs = vm._events[event];\n    if (cbs) {\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n      var args = toArray(arguments, 1);\n      var info = \"event handler for \\\"\" + event + \"\\\"\";\n      for (var i = 0, l = cbs.length; i < l; i++) {\n        invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n      }\n    }\n    return vm\n  };\n}\n\n/*  */\n\nvar activeInstance = null;\nvar isUpdatingChildComponent = false;\n\nfunction setActiveInstance(vm) {\n  var prevActiveInstance = activeInstance;\n  activeInstance = vm;\n  return function () {\n    activeInstance = prevActiveInstance;\n  }\n}\n\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm;\n\n  vm.$children = [];\n  vm.$refs = {};\n\n  vm._watcher = null;\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n\n  Vue.prototype.$forceUpdate = function () {\n    var vm = this;\n    if (vm._watcher) {\n      vm._watcher.update();\n    }\n  };\n\n  Vue.prototype.$destroy = function () {\n    var vm = this;\n    if (vm._isBeingDestroyed) {\n      return\n    }\n    callHook(vm, 'beforeDestroy');\n    vm._isBeingDestroyed = true;\n    // remove self from parent\n    var parent = vm.$parent;\n    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {\n      remove(parent.$children, vm);\n    }\n    // teardown watchers\n    if (vm._watcher) {\n      vm._watcher.teardown();\n    }\n    var i = vm._watchers.length;\n    while (i--) {\n      vm._watchers[i].teardown();\n    }\n    // remove reference from data ob\n    // frozen object may not have observer.\n    if (vm._data.__ob__) {\n      vm._data.__ob__.vmCount--;\n    }\n    // call the last hook...\n    vm._isDestroyed = true;\n    // invoke destroy hooks on current rendered tree\n    vm.__patch__(vm._vnode, null);\n    // fire destroyed hook\n    callHook(vm, 'destroyed');\n    // turn off all instance listeners.\n    vm.$off();\n    // remove __vue__ reference\n    if (vm.$el) {\n      vm.$el.__vue__ = null;\n    }\n    // release circular reference (#6759)\n    if (vm.$vnode) {\n      vm.$vnode.parent = null;\n    }\n  };\n}\n\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n\nfunction updateChildComponent (\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = true;\n  }\n\n  // determine whether component has slot children\n  // we need to do this before overwriting $options._renderChildren.\n\n  // check if there are dynamic scopedSlots (hand-written or compiled but with\n  // dynamic slot names). Static scoped slots compiled from template has the\n  // \"$stable\" marker.\n  var newScopedSlots = parentVnode.data.scopedSlots;\n  var oldScopedSlots = vm.$scopedSlots;\n  var hasDynamicScopedSlot = !!(\n    (newScopedSlots && !newScopedSlots.$stable) ||\n    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key) ||\n    (!newScopedSlots && vm.$scopedSlots.$key)\n  );\n\n  // Any static slot children from the parent may have changed during parent's\n  // update. Dynamic scoped slots may also have changed. In such cases, a forced\n  // update is necessary to ensure correctness.\n  var needsForceUpdate = !!(\n    renderChildren ||               // has new static slots\n    vm.$options._renderChildren ||  // has old static slots\n    hasDynamicScopedSlot\n  );\n\n  vm.$options._parentVnode = parentVnode;\n  vm.$vnode = parentVnode; // update vm's placeholder node without re-render\n\n  if (vm._vnode) { // update child tree's parent\n    vm._vnode.parent = parentVnode;\n  }\n  vm.$options._renderChildren = renderChildren;\n\n  // update $attrs and $listeners hash\n  // these are also reactive so they may trigger child update if the child\n  // used them during render\n  vm.$attrs = parentVnode.data.attrs || emptyObject;\n  vm.$listeners = listeners || emptyObject;\n\n  // update props\n  if (propsData && vm.$options.props) {\n    toggleObserving(false);\n    var props = vm._props;\n    var propKeys = vm.$options._propKeys || [];\n    for (var i = 0; i < propKeys.length; i++) {\n      var key = propKeys[i];\n      var propOptions = vm.$options.props; // wtf flow?\n      props[key] = validateProp(key, propOptions, propsData, vm);\n    }\n    toggleObserving(true);\n    // keep a copy of raw propsData\n    vm.$options.propsData = propsData;\n  }\n\n  // update listeners\n  listeners = listeners || emptyObject;\n  var oldListeners = vm.$options._parentListeners;\n  vm.$options._parentListeners = listeners;\n  updateComponentListeners(vm, listeners, oldListeners);\n\n  // resolve slots + force update if has children\n  if (needsForceUpdate) {\n    vm.$slots = resolveSlots(renderChildren, parentVnode.context);\n    vm.$forceUpdate();\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = false;\n  }\n}\n\nfunction isInInactiveTree (vm) {\n  while (vm && (vm = vm.$parent)) {\n    if (vm._inactive) { return true }\n  }\n  return false\n}\n\nfunction activateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = false;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  } else if (vm._directInactive) {\n    return\n  }\n  if (vm._inactive || vm._inactive === null) {\n    vm._inactive = false;\n    for (var i = 0; i < vm.$children.length; i++) {\n      activateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'activated');\n  }\n}\n\nfunction deactivateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = true;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  }\n  if (!vm._inactive) {\n    vm._inactive = true;\n    for (var i = 0; i < vm.$children.length; i++) {\n      deactivateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'deactivated');\n  }\n}\n\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n\n/*  */\n\nvar MAX_UPDATE_COUNT = 100;\n\nvar queue = [];\nvar activatedChildren = [];\nvar has = {};\nvar circular = {};\nvar waiting = false;\nvar flushing = false;\nvar index = 0;\n\n/**\n * Reset the scheduler's state.\n */\nfunction resetSchedulerState () {\n  index = queue.length = activatedChildren.length = 0;\n  has = {};\n  if (process.env.NODE_ENV !== 'production') {\n    circular = {};\n  }\n  waiting = flushing = false;\n}\n\n// Async edge case #6566 requires saving the timestamp when event listeners are\n// attached. However, calling performance.now() has a perf overhead especially\n// if the page has thousands of event listeners. Instead, we take a timestamp\n// every time the scheduler flushes and use that for all event listeners\n// attached during that flush.\nvar currentFlushTimestamp = 0;\n\n// Async edge case fix requires storing an event listener's attach timestamp.\nvar getNow = Date.now;\n\n// Determine what event timestamp the browser is using. Annoyingly, the\n// timestamp can either be hi-res (relative to page load) or low-res\n// (relative to UNIX epoch), so in order to compare time we have to use the\n// same timestamp type when saving the flush timestamp.\n// All IE versions use low-res event timestamps, and have problematic clock\n// implementations (#9632)\nif (inBrowser && !isIE) {\n  var performance = window.performance;\n  if (\n    performance &&\n    typeof performance.now === 'function' &&\n    getNow() > document.createEvent('Event').timeStamp\n  ) {\n    // if the event timestamp, although evaluated AFTER the Date.now(), is\n    // smaller than it, it means the event is using a hi-res timestamp,\n    // and we need to use the hi-res version for event listener timestamps as\n    // well.\n    getNow = function () { return performance.now(); };\n  }\n}\n\n/**\n * Flush both queues and run the watchers.\n */\nfunction flushSchedulerQueue () {\n  currentFlushTimestamp = getNow();\n  flushing = true;\n  var watcher, id;\n\n  // Sort queue before flush.\n  // This ensures that:\n  // 1. Components are updated from parent to child. (because parent is always\n  //    created before the child)\n  // 2. A component's user watchers are run before its render watcher (because\n  //    user watchers are created before the render watcher)\n  // 3. If a component is destroyed during a parent component's watcher run,\n  //    its watchers can be skipped.\n  queue.sort(function (a, b) { return a.id - b.id; });\n\n  // do not cache length because more watchers might be pushed\n  // as we run existing watchers\n  for (index = 0; index < queue.length; index++) {\n    watcher = queue[index];\n    if (watcher.before) {\n      watcher.before();\n    }\n    id = watcher.id;\n    has[id] = null;\n    watcher.run();\n    // in dev build, check and stop circular updates.\n    if (process.env.NODE_ENV !== 'production' && has[id] != null) {\n      circular[id] = (circular[id] || 0) + 1;\n      if (circular[id] > MAX_UPDATE_COUNT) {\n        warn(\n          'You may have an infinite update loop ' + (\n            watcher.user\n              ? (\"in watcher with expression \\\"\" + (watcher.expression) + \"\\\"\")\n              : \"in a component render function.\"\n          ),\n          watcher.vm\n        );\n        break\n      }\n    }\n  }\n\n  // keep copies of post queues before resetting state\n  var activatedQueue = activatedChildren.slice();\n  var updatedQueue = queue.slice();\n\n  resetSchedulerState();\n\n  // call component updated and activated hooks\n  callActivatedHooks(activatedQueue);\n  callUpdatedHooks(updatedQueue);\n\n  // devtool hook\n  /* istanbul ignore if */\n  if (devtools && config.devtools) {\n    devtools.emit('flush');\n  }\n}\n\nfunction callUpdatedHooks (queue) {\n  var i = queue.length;\n  while (i--) {\n    var watcher = queue[i];\n    var vm = watcher.vm;\n    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n      callHook(vm, 'updated');\n    }\n  }\n}\n\n/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */\nfunction queueActivatedComponent (vm) {\n  // setting _inactive to false here so that a render function can\n  // rely on checking whether it's in an inactive tree (e.g. router-view)\n  vm._inactive = false;\n  activatedChildren.push(vm);\n}\n\nfunction callActivatedHooks (queue) {\n  for (var i = 0; i < queue.length; i++) {\n    queue[i]._inactive = true;\n    activateChildComponent(queue[i], true /* true */);\n  }\n}\n\n/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it's\n * pushed when the queue is being flushed.\n */\nfunction queueWatcher (watcher) {\n  var id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    if (!flushing) {\n      queue.push(watcher);\n    } else {\n      // if already flushing, splice the watcher based on its id\n      // if already past its id, it will be run next immediately.\n      var i = queue.length - 1;\n      while (i > index && queue[i].id > watcher.id) {\n        i--;\n      }\n      queue.splice(i + 1, 0, watcher);\n    }\n    // queue the flush\n    if (!waiting) {\n      waiting = true;\n\n      if (process.env.NODE_ENV !== 'production' && !config.async) {\n        flushSchedulerQueue();\n        return\n      }\n      nextTick(flushSchedulerQueue);\n    }\n  }\n}\n\n/*  */\n\n\n\nvar uid$2 = 0;\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n\n/**\n * Evaluate the getter, and re-collect dependencies.\n */\nWatcher.prototype.get = function get () {\n  pushTarget(this);\n  var value;\n  var vm = this.vm;\n  try {\n    value = this.getter.call(vm, vm);\n  } catch (e) {\n    if (this.user) {\n      handleError(e, vm, (\"getter for watcher \\\"\" + (this.expression) + \"\\\"\"));\n    } else {\n      throw e\n    }\n  } finally {\n    // \"touch\" every property so they are all tracked as\n    // dependencies for deep watching\n    if (this.deep) {\n      traverse(value);\n    }\n    popTarget();\n    this.cleanupDeps();\n  }\n  return value\n};\n\n/**\n * Add a dependency to this directive.\n */\nWatcher.prototype.addDep = function addDep (dep) {\n  var id = dep.id;\n  if (!this.newDepIds.has(id)) {\n    this.newDepIds.add(id);\n    this.newDeps.push(dep);\n    if (!this.depIds.has(id)) {\n      dep.addSub(this);\n    }\n  }\n};\n\n/**\n * Clean up for dependency collection.\n */\nWatcher.prototype.cleanupDeps = function cleanupDeps () {\n  var i = this.deps.length;\n  while (i--) {\n    var dep = this.deps[i];\n    if (!this.newDepIds.has(dep.id)) {\n      dep.removeSub(this);\n    }\n  }\n  var tmp = this.depIds;\n  this.depIds = this.newDepIds;\n  this.newDepIds = tmp;\n  this.newDepIds.clear();\n  tmp = this.deps;\n  this.deps = this.newDeps;\n  this.newDeps = tmp;\n  this.newDeps.length = 0;\n};\n\n/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */\nWatcher.prototype.update = function update () {\n  /* istanbul ignore else */\n  if (this.lazy) {\n    this.dirty = true;\n  } else if (this.sync) {\n    this.run();\n  } else {\n    queueWatcher(this);\n  }\n};\n\n/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */\nWatcher.prototype.run = function run () {\n  if (this.active) {\n    var value = this.get();\n    if (\n      value !== this.value ||\n      // Deep watchers and watchers on Object/Arrays should fire even\n      // when the value is the same, because the value may\n      // have mutated.\n      isObject(value) ||\n      this.deep\n    ) {\n      // set new value\n      var oldValue = this.value;\n      this.value = value;\n      if (this.user) {\n        var info = \"callback for watcher \\\"\" + (this.expression) + \"\\\"\";\n        invokeWithErrorHandling(this.cb, this.vm, [value, oldValue], this.vm, info);\n      } else {\n        this.cb.call(this.vm, value, oldValue);\n      }\n    }\n  }\n};\n\n/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */\nWatcher.prototype.evaluate = function evaluate () {\n  this.value = this.get();\n  this.dirty = false;\n};\n\n/**\n * Depend on all deps collected by this watcher.\n */\nWatcher.prototype.depend = function depend () {\n  var i = this.deps.length;\n  while (i--) {\n    this.deps[i].depend();\n  }\n};\n\n/**\n * Remove self from all dependencies' subscriber list.\n */\nWatcher.prototype.teardown = function teardown () {\n  if (this.active) {\n    // remove self from vm's watcher list\n    // this is a somewhat expensive operation so we skip it\n    // if the vm is being destroyed.\n    if (!this.vm._isBeingDestroyed) {\n      remove(this.vm._watchers, this);\n    }\n    var i = this.deps.length;\n    while (i--) {\n      this.deps[i].removeSub(this);\n    }\n    this.active = false;\n  }\n};\n\n/*  */\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\nfunction proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  };\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\nfunction getData (data, vm) {\n  // #7573 disable dep collection when invoking data getters\n  pushTarget();\n  try {\n    return data.call(vm, vm)\n  } catch (e) {\n    handleError(e, vm, \"data()\");\n    return {}\n  } finally {\n    popTarget();\n  }\n}\n\nvar computedWatcherOptions = { lazy: true };\n\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      } else if (vm.$options.methods && key in vm.$options.methods) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a method.\"), vm);\n      }\n    }\n  }\n}\n\nfunction defineComputed (\n  target,\n  key,\n  userDef\n) {\n  var shouldCache = !isServerRendering();\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : createGetterInvoker(userDef);\n    sharedPropertyDefinition.set = noop;\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : createGetterInvoker(userDef.get)\n      : noop;\n    sharedPropertyDefinition.set = userDef.set || noop;\n  }\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        (\"Computed property \\\"\" + key + \"\\\" was assigned to but it has no setter.\"),\n        this\n      );\n    };\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter () {\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n      if (Dep.target) {\n        watcher.depend();\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction createGetterInvoker(fn) {\n  return function computedGetter () {\n    return fn.call(this, this)\n  }\n}\n\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher (\n  vm,\n  expOrFn,\n  handler,\n  options\n) {\n  if (isPlainObject(handler)) {\n    options = handler;\n    handler = handler.handler;\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler];\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\nfunction stateMixin (Vue) {\n  // flow somehow has problems with directly declared definition object\n  // when using Object.defineProperty, so we have to procedurally build up\n  // the object here.\n  var dataDef = {};\n  dataDef.get = function () { return this._data };\n  var propsDef = {};\n  propsDef.get = function () { return this._props };\n  if (process.env.NODE_ENV !== 'production') {\n    dataDef.set = function () {\n      warn(\n        'Avoid replacing instance root $data. ' +\n        'Use nested data properties instead.',\n        this\n      );\n    };\n    propsDef.set = function () {\n      warn(\"$props is readonly.\", this);\n    };\n  }\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\n\n  Vue.prototype.$set = set;\n  Vue.prototype.$delete = del;\n\n  Vue.prototype.$watch = function (\n    expOrFn,\n    cb,\n    options\n  ) {\n    var vm = this;\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {};\n    options.user = true;\n    var watcher = new Watcher(vm, expOrFn, cb, options);\n    if (options.immediate) {\n      var info = \"callback for immediate watcher \\\"\" + (watcher.expression) + \"\\\"\";\n      pushTarget();\n      invokeWithErrorHandling(cb, vm, [watcher.value], vm, info);\n      popTarget();\n    }\n    return function unwatchFn () {\n      watcher.teardown();\n    }\n  };\n}\n\n/*  */\n\nvar uid$3 = 0;\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    var vm = this;\n    // a uid\n    vm._uid = uid$3++;\n\n    var startTag, endTag;\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      startTag = \"vue-perf-start:\" + (vm._uid);\n      endTag = \"vue-perf-end:\" + (vm._uid);\n      mark(startTag);\n    }\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options);\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      );\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm);\n    } else {\n      vm._renderProxy = vm;\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      vm._name = formatComponentName(vm, false);\n      mark(endTag);\n      measure((\"vue \" + (vm._name) + \" init\"), startTag, endTag);\n    }\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n}\n\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  // doing this because it's faster than dynamic enumeration.\n  var parentVnode = options._parentVnode;\n  opts.parent = options.parent;\n  opts._parentVnode = parentVnode;\n\n  var vnodeComponentOptions = parentVnode.componentOptions;\n  opts.propsData = vnodeComponentOptions.propsData;\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  opts._renderChildren = vnodeComponentOptions.children;\n  opts._componentTag = vnodeComponentOptions.tag;\n\n  if (options.render) {\n    opts.render = options.render;\n    opts.staticRenderFns = options.staticRenderFns;\n  }\n}\n\nfunction resolveConstructorOptions (Ctor) {\n  var options = Ctor.options;\n  if (Ctor.super) {\n    var superOptions = resolveConstructorOptions(Ctor.super);\n    var cachedSuperOptions = Ctor.superOptions;\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed,\n      // need to resolve new options.\n      Ctor.superOptions = superOptions;\n      // check if there are any late-modified/attached options (#4976)\n      var modifiedOptions = resolveModifiedOptions(Ctor);\n      // update base extend options\n      if (modifiedOptions) {\n        extend(Ctor.extendOptions, modifiedOptions);\n      }\n      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);\n      if (options.name) {\n        options.components[options.name] = Ctor;\n      }\n    }\n  }\n  return options\n}\n\nfunction resolveModifiedOptions (Ctor) {\n  var modified;\n  var latest = Ctor.options;\n  var sealed = Ctor.sealedOptions;\n  for (var key in latest) {\n    if (latest[key] !== sealed[key]) {\n      if (!modified) { modified = {}; }\n      modified[key] = latest[key];\n    }\n  }\n  return modified\n}\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n/*  */\n\nfunction initUse (Vue) {\n  Vue.use = function (plugin) {\n    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n\n    // additional parameters\n    var args = toArray(arguments, 1);\n    args.unshift(this);\n    if (typeof plugin.install === 'function') {\n      plugin.install.apply(plugin, args);\n    } else if (typeof plugin === 'function') {\n      plugin.apply(null, args);\n    }\n    installedPlugins.push(plugin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initMixin$1 (Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initExtend (Vue) {\n  /**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped \"child\n   * constructors\" for prototypal inheritance and cache them.\n   */\n  Vue.cid = 0;\n  var cid = 1;\n\n  /**\n   * Class inheritance\n   */\n  Vue.extend = function (extendOptions) {\n    extendOptions = extendOptions || {};\n    var Super = this;\n    var SuperId = Super.cid;\n    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});\n    if (cachedCtors[SuperId]) {\n      return cachedCtors[SuperId]\n    }\n\n    var name = extendOptions.name || Super.options.name;\n    if (process.env.NODE_ENV !== 'production' && name) {\n      validateComponentName(name);\n    }\n\n    var Sub = function VueComponent (options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.cid = cid++;\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    );\n    Sub['super'] = Super;\n\n    // For props and computed properties, we define the proxy getters on\n    // the Vue instances at extension time, on the extended prototype. This\n    // avoids Object.defineProperty calls for each instance created.\n    if (Sub.options.props) {\n      initProps$1(Sub);\n    }\n    if (Sub.options.computed) {\n      initComputed$1(Sub);\n    }\n\n    // allow further extension/mixin/plugin usage\n    Sub.extend = Super.extend;\n    Sub.mixin = Super.mixin;\n    Sub.use = Super.use;\n\n    // create asset registers, so extended classes\n    // can have their private assets too.\n    ASSET_TYPES.forEach(function (type) {\n      Sub[type] = Super[type];\n    });\n    // enable recursive self-lookup\n    if (name) {\n      Sub.options.components[name] = Sub;\n    }\n\n    // keep a reference to the super options at extension time.\n    // later at instantiation we can check if Super's options have\n    // been updated.\n    Sub.superOptions = Super.options;\n    Sub.extendOptions = extendOptions;\n    Sub.sealedOptions = extend({}, Sub.options);\n\n    // cache constructor\n    cachedCtors[SuperId] = Sub;\n    return Sub\n  };\n}\n\nfunction initProps$1 (Comp) {\n  var props = Comp.options.props;\n  for (var key in props) {\n    proxy(Comp.prototype, \"_props\", key);\n  }\n}\n\nfunction initComputed$1 (Comp) {\n  var computed = Comp.options.computed;\n  for (var key in computed) {\n    defineComputed(Comp.prototype, key, computed[key]);\n  }\n}\n\n/*  */\n\nfunction initAssetRegisters (Vue) {\n  /**\n   * Create asset registration methods.\n   */\n  ASSET_TYPES.forEach(function (type) {\n    Vue[type] = function (\n      id,\n      definition\n    ) {\n      if (!definition) {\n        return this.options[type + 's'][id]\n      } else {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV !== 'production' && type === 'component') {\n          validateComponentName(id);\n        }\n        if (type === 'component' && isPlainObject(definition)) {\n          definition.name = definition.name || id;\n          definition = this.options._base.extend(definition);\n        }\n        if (type === 'directive' && typeof definition === 'function') {\n          definition = { bind: definition, update: definition };\n        }\n        this.options[type + 's'][id] = definition;\n        return definition\n      }\n    };\n  });\n}\n\n/*  */\n\n\n\n\n\nfunction getComponentName (opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache (keepAliveInstance, filter) {\n  var cache = keepAliveInstance.cache;\n  var keys = keepAliveInstance.keys;\n  var _vnode = keepAliveInstance._vnode;\n  for (var key in cache) {\n    var entry = cache[key];\n    if (entry) {\n      var name = entry.name;\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode);\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry (\n  cache,\n  key,\n  keys,\n  current\n) {\n  var entry = cache[key];\n  if (entry && (!current || entry.tag !== current.tag)) {\n    entry.componentInstance.$destroy();\n  }\n  cache[key] = null;\n  remove(keys, key);\n}\n\nvar patternTypes = [String, RegExp, Array];\n\nvar KeepAlive = {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  methods: {\n    cacheVNode: function cacheVNode() {\n      var ref = this;\n      var cache = ref.cache;\n      var keys = ref.keys;\n      var vnodeToCache = ref.vnodeToCache;\n      var keyToCache = ref.keyToCache;\n      if (vnodeToCache) {\n        var tag = vnodeToCache.tag;\n        var componentInstance = vnodeToCache.componentInstance;\n        var componentOptions = vnodeToCache.componentOptions;\n        cache[keyToCache] = {\n          name: getComponentName(componentOptions),\n          tag: tag,\n          componentInstance: componentInstance,\n        };\n        keys.push(keyToCache);\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode);\n        }\n        this.vnodeToCache = null;\n      }\n    }\n  },\n\n  created: function created () {\n    this.cache = Object.create(null);\n    this.keys = [];\n  },\n\n  destroyed: function destroyed () {\n    for (var key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys);\n    }\n  },\n\n  mounted: function mounted () {\n    var this$1 = this;\n\n    this.cacheVNode();\n    this.$watch('include', function (val) {\n      pruneCache(this$1, function (name) { return matches(val, name); });\n    });\n    this.$watch('exclude', function (val) {\n      pruneCache(this$1, function (name) { return !matches(val, name); });\n    });\n  },\n\n  updated: function updated () {\n    this.cacheVNode();\n  },\n\n  render: function render () {\n    var slot = this.$slots.default;\n    var vnode = getFirstComponentChild(slot);\n    var componentOptions = vnode && vnode.componentOptions;\n    if (componentOptions) {\n      // check pattern\n      var name = getComponentName(componentOptions);\n      var ref = this;\n      var include = ref.include;\n      var exclude = ref.exclude;\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      var ref$1 = this;\n      var cache = ref$1.cache;\n      var keys = ref$1.keys;\n      var key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? (\"::\" + (componentOptions.tag)) : '')\n        : vnode.key;\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance;\n        // make current key freshest\n        remove(keys, key);\n        keys.push(key);\n      } else {\n        // delay setting the cache until update\n        this.vnodeToCache = vnode;\n        this.keyToCache = key;\n      }\n\n      vnode.data.keepAlive = true;\n    }\n    return vnode || (slot && slot[0])\n  }\n};\n\nvar builtInComponents = {\n  KeepAlive: KeepAlive\n};\n\n/*  */\n\nfunction initGlobalAPI (Vue) {\n  // config\n  var configDef = {};\n  configDef.get = function () { return config; };\n  if (process.env.NODE_ENV !== 'production') {\n    configDef.set = function () {\n      warn(\n        'Do not replace the Vue.config object, set individual fields instead.'\n      );\n    };\n  }\n  Object.defineProperty(Vue, 'config', configDef);\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn: warn,\n    extend: extend,\n    mergeOptions: mergeOptions,\n    defineReactive: defineReactive$$1\n  };\n\n  Vue.set = set;\n  Vue.delete = del;\n  Vue.nextTick = nextTick;\n\n  // 2.6 explicit observable API\n  Vue.observable = function (obj) {\n    observe(obj);\n    return obj\n  };\n\n  Vue.options = Object.create(null);\n  ASSET_TYPES.forEach(function (type) {\n    Vue.options[type + 's'] = Object.create(null);\n  });\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue;\n\n  extend(Vue.options.components, builtInComponents);\n\n  initUse(Vue);\n  initMixin$1(Vue);\n  initExtend(Vue);\n  initAssetRegisters(Vue);\n}\n\ninitGlobalAPI(Vue);\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n});\n\nObject.defineProperty(Vue.prototype, '$ssrContext', {\n  get: function get () {\n    /* istanbul ignore next */\n    return this.$vnode && this.$vnode.ssrContext\n  }\n});\n\n// expose FunctionalRenderContext for ssr runtime helper installation\nObject.defineProperty(Vue, 'FunctionalRenderContext', {\n  value: FunctionalRenderContext\n});\n\nVue.version = '2.6.14';\n\n/*  */\n\n// these are reserved for web because they are directly compiled away\n// during template compilation\nvar isReservedAttr = makeMap('style,class');\n\n// attributes that should be using props for binding\nvar acceptValue = makeMap('input,textarea,option,select,progress');\nvar mustUseProp = function (tag, type, attr) {\n  return (\n    (attr === 'value' && acceptValue(tag)) && type !== 'button' ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n};\n\nvar isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck');\n\nvar isValidContentEditableValue = makeMap('events,caret,typing,plaintext-only');\n\nvar convertEnumeratedValue = function (key, value) {\n  return isFalsyAttrValue(value) || value === 'false'\n    ? 'false'\n    // allow arbitrary string value for contenteditable\n    : key === 'contenteditable' && isValidContentEditableValue(value)\n      ? value\n      : 'true'\n};\n\nvar isBooleanAttr = makeMap(\n  'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +\n  'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n  'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +\n  'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +\n  'required,reversed,scoped,seamless,selected,sortable,' +\n  'truespeed,typemustmatch,visible'\n);\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\n\nvar isXlink = function (name) {\n  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'\n};\n\nvar getXlinkProp = function (name) {\n  return isXlink(name) ? name.slice(6, name.length) : ''\n};\n\nvar isFalsyAttrValue = function (val) {\n  return val == null || val === false\n};\n\n/*  */\n\nfunction genClassForVnode (vnode) {\n  var data = vnode.data;\n  var parentNode = vnode;\n  var childNode = vnode;\n  while (isDef(childNode.componentInstance)) {\n    childNode = childNode.componentInstance._vnode;\n    if (childNode && childNode.data) {\n      data = mergeClassData(childNode.data, data);\n    }\n  }\n  while (isDef(parentNode = parentNode.parent)) {\n    if (parentNode && parentNode.data) {\n      data = mergeClassData(data, parentNode.data);\n    }\n  }\n  return renderClass(data.staticClass, data.class)\n}\n\nfunction mergeClassData (child, parent) {\n  return {\n    staticClass: concat(child.staticClass, parent.staticClass),\n    class: isDef(child.class)\n      ? [child.class, parent.class]\n      : parent.class\n  }\n}\n\nfunction renderClass (\n  staticClass,\n  dynamicClass\n) {\n  if (isDef(staticClass) || isDef(dynamicClass)) {\n    return concat(staticClass, stringifyClass(dynamicClass))\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction concat (a, b) {\n  return a ? b ? (a + ' ' + b) : a : (b || '')\n}\n\nfunction stringifyClass (value) {\n  if (Array.isArray(value)) {\n    return stringifyArray(value)\n  }\n  if (isObject(value)) {\n    return stringifyObject(value)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction stringifyArray (value) {\n  var res = '';\n  var stringified;\n  for (var i = 0, l = value.length; i < l; i++) {\n    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {\n      if (res) { res += ' '; }\n      res += stringified;\n    }\n  }\n  return res\n}\n\nfunction stringifyObject (value) {\n  var res = '';\n  for (var key in value) {\n    if (value[key]) {\n      if (res) { res += ' '; }\n      res += key;\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar namespaceMap = {\n  svg: 'http://www.w3.org/2000/svg',\n  math: 'http://www.w3.org/1998/Math/MathML'\n};\n\nvar isHTMLTag = makeMap(\n  'html,body,base,head,link,meta,style,title,' +\n  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\n  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +\n  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +\n  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +\n  'embed,object,param,source,canvas,script,noscript,del,ins,' +\n  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +\n  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +\n  'output,progress,select,textarea,' +\n  'details,dialog,menu,menuitem,summary,' +\n  'content,element,shadow,template,blockquote,iframe,tfoot'\n);\n\n// this map is intentionally selective, only covering SVG elements that may\n// contain child elements.\nvar isSVG = makeMap(\n  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\n  'foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\n  true\n);\n\nvar isReservedTag = function (tag) {\n  return isHTMLTag(tag) || isSVG(tag)\n};\n\nfunction getTagNamespace (tag) {\n  if (isSVG(tag)) {\n    return 'svg'\n  }\n  // basic support for MathML\n  // note it doesn't support other MathML elements being component roots\n  if (tag === 'math') {\n    return 'math'\n  }\n}\n\nvar unknownElementCache = Object.create(null);\nfunction isUnknownElement (tag) {\n  /* istanbul ignore if */\n  if (!inBrowser) {\n    return true\n  }\n  if (isReservedTag(tag)) {\n    return false\n  }\n  tag = tag.toLowerCase();\n  /* istanbul ignore if */\n  if (unknownElementCache[tag] != null) {\n    return unknownElementCache[tag]\n  }\n  var el = document.createElement(tag);\n  if (tag.indexOf('-') > -1) {\n    // http://stackoverflow.com/a/28210364/1070244\n    return (unknownElementCache[tag] = (\n      el.constructor === window.HTMLUnknownElement ||\n      el.constructor === window.HTMLElement\n    ))\n  } else {\n    return (unknownElementCache[tag] = /HTMLUnknownElement/.test(el.toString()))\n  }\n}\n\nvar isTextInputType = makeMap('text,number,password,search,email,tel,url');\n\n/*  */\n\n/**\n * Query an element selector if it's not an element already.\n */\nfunction query (el) {\n  if (typeof el === 'string') {\n    var selected = document.querySelector(el);\n    if (!selected) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'Cannot find element: ' + el\n      );\n      return document.createElement('div')\n    }\n    return selected\n  } else {\n    return el\n  }\n}\n\n/*  */\n\nfunction createElement$1 (tagName, vnode) {\n  var elm = document.createElement(tagName);\n  if (tagName !== 'select') {\n    return elm\n  }\n  // false or null will remove the attribute but undefined will not\n  if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n    elm.setAttribute('multiple', 'multiple');\n  }\n  return elm\n}\n\nfunction createElementNS (namespace, tagName) {\n  return document.createElementNS(namespaceMap[namespace], tagName)\n}\n\nfunction createTextNode (text) {\n  return document.createTextNode(text)\n}\n\nfunction createComment (text) {\n  return document.createComment(text)\n}\n\nfunction insertBefore (parentNode, newNode, referenceNode) {\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild (node, child) {\n  node.removeChild(child);\n}\n\nfunction appendChild (node, child) {\n  node.appendChild(child);\n}\n\nfunction parentNode (node) {\n  return node.parentNode\n}\n\nfunction nextSibling (node) {\n  return node.nextSibling\n}\n\nfunction tagName (node) {\n  return node.tagName\n}\n\nfunction setTextContent (node, text) {\n  node.textContent = text;\n}\n\nfunction setStyleScope (node, scopeId) {\n  node.setAttribute(scopeId, '');\n}\n\nvar nodeOps = /*#__PURE__*/Object.freeze({\n  createElement: createElement$1,\n  createElementNS: createElementNS,\n  createTextNode: createTextNode,\n  createComment: createComment,\n  insertBefore: insertBefore,\n  removeChild: removeChild,\n  appendChild: appendChild,\n  parentNode: parentNode,\n  nextSibling: nextSibling,\n  tagName: tagName,\n  setTextContent: setTextContent,\n  setStyleScope: setStyleScope\n});\n\n/*  */\n\nvar ref = {\n  create: function create (_, vnode) {\n    registerRef(vnode);\n  },\n  update: function update (oldVnode, vnode) {\n    if (oldVnode.data.ref !== vnode.data.ref) {\n      registerRef(oldVnode, true);\n      registerRef(vnode);\n    }\n  },\n  destroy: function destroy (vnode) {\n    registerRef(vnode, true);\n  }\n};\n\nfunction registerRef (vnode, isRemoval) {\n  var key = vnode.data.ref;\n  if (!isDef(key)) { return }\n\n  var vm = vnode.context;\n  var ref = vnode.componentInstance || vnode.elm;\n  var refs = vm.$refs;\n  if (isRemoval) {\n    if (Array.isArray(refs[key])) {\n      remove(refs[key], ref);\n    } else if (refs[key] === ref) {\n      refs[key] = undefined;\n    }\n  } else {\n    if (vnode.data.refInFor) {\n      if (!Array.isArray(refs[key])) {\n        refs[key] = [ref];\n      } else if (refs[key].indexOf(ref) < 0) {\n        // $flow-disable-line\n        refs[key].push(ref);\n      }\n    } else {\n      refs[key] = ref;\n    }\n  }\n}\n\n/**\n * Virtual DOM patching algorithm based on Snabbdom by\n * Simon Friis Vindum (@paldepind)\n * Licensed under the MIT License\n * https://github.com/paldepind/snabbdom/blob/master/LICENSE\n *\n * modified by Evan You (@yyx990803)\n *\n * Not type-checking this because this file is perf-critical and the cost\n * of making flow understand it is not worth it.\n */\n\nvar emptyNode = new VNode('', {}, []);\n\nvar hooks = ['create', 'activate', 'update', 'remove', 'destroy'];\n\nfunction sameVnode (a, b) {\n  return (\n    a.key === b.key &&\n    a.asyncFactory === b.asyncFactory && (\n      (\n        a.tag === b.tag &&\n        a.isComment === b.isComment &&\n        isDef(a.data) === isDef(b.data) &&\n        sameInputType(a, b)\n      ) || (\n        isTrue(a.isAsyncPlaceholder) &&\n        isUndef(b.asyncFactory.error)\n      )\n    )\n  )\n}\n\nfunction sameInputType (a, b) {\n  if (a.tag !== 'input') { return true }\n  var i;\n  var typeA = isDef(i = a.data) && isDef(i = i.attrs) && i.type;\n  var typeB = isDef(i = b.data) && isDef(i = i.attrs) && i.type;\n  return typeA === typeB || isTextInputType(typeA) && isTextInputType(typeB)\n}\n\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) { map[key] = i; }\n  }\n  return map\n}\n\nfunction createPatchFunction (backend) {\n  var i, j;\n  var cbs = {};\n\n  var modules = backend.modules;\n  var nodeOps = backend.nodeOps;\n\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (isDef(modules[j][hooks[i]])) {\n        cbs[hooks[i]].push(modules[j][hooks[i]]);\n      }\n    }\n  }\n\n  function emptyNodeAt (elm) {\n    return new VNode(nodeOps.tagName(elm).toLowerCase(), {}, [], undefined, elm)\n  }\n\n  function createRmCb (childElm, listeners) {\n    function remove$$1 () {\n      if (--remove$$1.listeners === 0) {\n        removeNode(childElm);\n      }\n    }\n    remove$$1.listeners = listeners;\n    return remove$$1\n  }\n\n  function removeNode (el) {\n    var parent = nodeOps.parentNode(el);\n    // element may have already been removed due to v-html / v-text\n    if (isDef(parent)) {\n      nodeOps.removeChild(parent, el);\n    }\n  }\n\n  function isUnknownElement$$1 (vnode, inVPre) {\n    return (\n      !inVPre &&\n      !vnode.ns &&\n      !(\n        config.ignoredElements.length &&\n        config.ignoredElements.some(function (ignore) {\n          return isRegExp(ignore)\n            ? ignore.test(vnode.tag)\n            : ignore === vnode.tag\n        })\n      ) &&\n      config.isUnknownElement(vnode.tag)\n    )\n  }\n\n  var creatingElmInVPre = 0;\n\n  function createElm (\n    vnode,\n    insertedVnodeQueue,\n    parentElm,\n    refElm,\n    nested,\n    ownerArray,\n    index\n  ) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // This vnode was used in a previous render!\n      // now it's used as a new node, overwriting its elm would cause\n      // potential patch errors down the road when it's used as an insertion\n      // reference node. Instead, we clone the node on-demand before creating\n      // associated DOM element for it.\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n      return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (data && data.pre) {\n          creatingElmInVPre++;\n        }\n        if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n          warn(\n            'Unknown custom element: <' + tag + '> - did you ' +\n            'register the component correctly? For recursive components, ' +\n            'make sure to provide the \"name\" option.',\n            vnode.context\n          );\n        }\n      }\n\n      vnode.elm = vnode.ns\n        ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n      setScope(vnode);\n\n      /* istanbul ignore if */\n      {\n        createChildren(vnode, children, insertedVnodeQueue);\n        if (isDef(data)) {\n          invokeCreateHooks(vnode, insertedVnodeQueue);\n        }\n        insert(parentElm, vnode.elm, refElm);\n      }\n\n      if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n        creatingElmInVPre--;\n      }\n    } else if (isTrue(vnode.isComment)) {\n      vnode.elm = nodeOps.createComment(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    } else {\n      vnode.elm = nodeOps.createTextNode(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    }\n  }\n\n  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n      var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n      if (isDef(i = i.hook) && isDef(i = i.init)) {\n        i(vnode, false /* hydrating */);\n      }\n      // after calling the init hook, if the vnode is a child component\n      // it should've created a child instance and mounted it. the child\n      // component also has set the placeholder vnode's elm.\n      // in that case we can just return the element and be done.\n      if (isDef(vnode.componentInstance)) {\n        initComponent(vnode, insertedVnodeQueue);\n        insert(parentElm, vnode.elm, refElm);\n        if (isTrue(isReactivated)) {\n          reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n        }\n        return true\n      }\n    }\n  }\n\n  function initComponent (vnode, insertedVnodeQueue) {\n    if (isDef(vnode.data.pendingInsert)) {\n      insertedVnodeQueue.push.apply(insertedVnodeQueue, vnode.data.pendingInsert);\n      vnode.data.pendingInsert = null;\n    }\n    vnode.elm = vnode.componentInstance.$el;\n    if (isPatchable(vnode)) {\n      invokeCreateHooks(vnode, insertedVnodeQueue);\n      setScope(vnode);\n    } else {\n      // empty component root.\n      // skip all element-related modules except for ref (#3455)\n      registerRef(vnode);\n      // make sure to invoke the insert hook\n      insertedVnodeQueue.push(vnode);\n    }\n  }\n\n  function reactivateComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i;\n    // hack for #4339: a reactivated component with inner transition\n    // does not trigger because the inner node's created hooks are not called\n    // again. It's not ideal to involve module-specific logic in here but\n    // there doesn't seem to be a better way to do it.\n    var innerNode = vnode;\n    while (innerNode.componentInstance) {\n      innerNode = innerNode.componentInstance._vnode;\n      if (isDef(i = innerNode.data) && isDef(i = i.transition)) {\n        for (i = 0; i < cbs.activate.length; ++i) {\n          cbs.activate[i](emptyNode, innerNode);\n        }\n        insertedVnodeQueue.push(innerNode);\n        break\n      }\n    }\n    // unlike a newly created component,\n    // a reactivated keep-alive component doesn't insert itself\n    insert(parentElm, vnode.elm, refElm);\n  }\n\n  function insert (parent, elm, ref$$1) {\n    if (isDef(parent)) {\n      if (isDef(ref$$1)) {\n        if (nodeOps.parentNode(ref$$1) === parent) {\n          nodeOps.insertBefore(parent, elm, ref$$1);\n        }\n      } else {\n        nodeOps.appendChild(parent, elm);\n      }\n    }\n  }\n\n  function createChildren (vnode, children, insertedVnodeQueue) {\n    if (Array.isArray(children)) {\n      if (process.env.NODE_ENV !== 'production') {\n        checkDuplicateKeys(children);\n      }\n      for (var i = 0; i < children.length; ++i) {\n        createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n      }\n    } else if (isPrimitive(vnode.text)) {\n      nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n    }\n  }\n\n  function isPatchable (vnode) {\n    while (vnode.componentInstance) {\n      vnode = vnode.componentInstance._vnode;\n    }\n    return isDef(vnode.tag)\n  }\n\n  function invokeCreateHooks (vnode, insertedVnodeQueue) {\n    for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n      cbs.create[i$1](emptyNode, vnode);\n    }\n    i = vnode.data.hook; // Reuse variable\n    if (isDef(i)) {\n      if (isDef(i.create)) { i.create(emptyNode, vnode); }\n      if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }\n    }\n  }\n\n  // set scope id attribute for scoped CSS.\n  // this is implemented as a special case to avoid the overhead\n  // of going through the normal attribute patching process.\n  function setScope (vnode) {\n    var i;\n    if (isDef(i = vnode.fnScopeId)) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    } else {\n      var ancestor = vnode;\n      while (ancestor) {\n        if (isDef(i = ancestor.context) && isDef(i = i.$options._scopeId)) {\n          nodeOps.setStyleScope(vnode.elm, i);\n        }\n        ancestor = ancestor.parent;\n      }\n    }\n    // for slot content they should also get the scopeId from the host instance.\n    if (isDef(i = activeInstance) &&\n      i !== vnode.context &&\n      i !== vnode.fnContext &&\n      isDef(i = i.$options._scopeId)\n    ) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    }\n  }\n\n  function addVnodes (parentElm, refElm, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      createElm(vnodes[startIdx], insertedVnodeQueue, parentElm, refElm, false, vnodes, startIdx);\n    }\n  }\n\n  function invokeDestroyHook (vnode) {\n    var i, j;\n    var data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.destroy)) { i(vnode); }\n      for (i = 0; i < cbs.destroy.length; ++i) { cbs.destroy[i](vnode); }\n    }\n    if (isDef(i = vnode.children)) {\n      for (j = 0; j < vnode.children.length; ++j) {\n        invokeDestroyHook(vnode.children[j]);\n      }\n    }\n  }\n\n  function removeVnodes (vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.tag)) {\n          removeAndInvokeRemoveHook(ch);\n          invokeDestroyHook(ch);\n        } else { // Text node\n          removeNode(ch.elm);\n        }\n      }\n    }\n  }\n\n  function removeAndInvokeRemoveHook (vnode, rm) {\n    if (isDef(rm) || isDef(vnode.data)) {\n      var i;\n      var listeners = cbs.remove.length + 1;\n      if (isDef(rm)) {\n        // we have a recursively passed down rm callback\n        // increase the listeners count\n        rm.listeners += listeners;\n      } else {\n        // directly removing\n        rm = createRmCb(vnode.elm, listeners);\n      }\n      // recursively invoke hooks on child component root node\n      if (isDef(i = vnode.componentInstance) && isDef(i = i._vnode) && isDef(i.data)) {\n        removeAndInvokeRemoveHook(i, rm);\n      }\n      for (i = 0; i < cbs.remove.length; ++i) {\n        cbs.remove[i](vnode, rm);\n      }\n      if (isDef(i = vnode.data.hook) && isDef(i = i.remove)) {\n        i(vnode, rm);\n      } else {\n        rm();\n      }\n    } else {\n      removeNode(vnode.elm);\n    }\n  }\n\n  function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, vnodeToMove, refElm;\n\n    // removeOnly is a special flag used only by <transition-group>\n    // to ensure removed elements stay in correct relative positions\n    // during leaving transitions\n    var canMove = !removeOnly;\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkDuplicateKeys(newCh);\n    }\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) { oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); }\n        idxInOld = isDef(newStartVnode.key)\n          ? oldKeyToIdx[newStartVnode.key]\n          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);\n        if (isUndef(idxInOld)) { // New element\n          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n        } else {\n          vnodeToMove = oldCh[idxInOld];\n          if (sameVnode(vnodeToMove, newStartVnode)) {\n            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n            oldCh[idxInOld] = undefined;\n            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);\n          } else {\n            // same key but different element. treat as new element\n            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n          }\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;\n      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function checkDuplicateKeys (children) {\n    var seenKeys = {};\n    for (var i = 0; i < children.length; i++) {\n      var vnode = children[i];\n      var key = vnode.key;\n      if (isDef(key)) {\n        if (seenKeys[key]) {\n          warn(\n            (\"Duplicate keys detected: '\" + key + \"'. This may cause an update error.\"),\n            vnode.context\n          );\n        } else {\n          seenKeys[key] = true;\n        }\n      }\n    }\n  }\n\n  function findIdxInOld (node, oldCh, start, end) {\n    for (var i = start; i < end; i++) {\n      var c = oldCh[i];\n      if (isDef(c) && sameVnode(node, c)) { return i }\n    }\n  }\n\n  function patchVnode (\n    oldVnode,\n    vnode,\n    insertedVnodeQueue,\n    ownerArray,\n    index,\n    removeOnly\n  ) {\n    if (oldVnode === vnode) {\n      return\n    }\n\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // clone reused vnode\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    var elm = vnode.elm = oldVnode.elm;\n\n    if (isTrue(oldVnode.isAsyncPlaceholder)) {\n      if (isDef(vnode.asyncFactory.resolved)) {\n        hydrate(oldVnode.elm, vnode, insertedVnodeQueue);\n      } else {\n        vnode.isAsyncPlaceholder = true;\n      }\n      return\n    }\n\n    // reuse element for static trees.\n    // note we only do this if the vnode is cloned -\n    // if the new node is not cloned it means the render functions have been\n    // reset by the hot-reload-api and we need to do a proper re-render.\n    if (isTrue(vnode.isStatic) &&\n      isTrue(oldVnode.isStatic) &&\n      vnode.key === oldVnode.key &&\n      (isTrue(vnode.isCloned) || isTrue(vnode.isOnce))\n    ) {\n      vnode.componentInstance = oldVnode.componentInstance;\n      return\n    }\n\n    var i;\n    var data = vnode.data;\n    if (isDef(data) && isDef(i = data.hook) && isDef(i = i.prepatch)) {\n      i(oldVnode, vnode);\n    }\n\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (isDef(data) && isPatchable(vnode)) {\n      for (i = 0; i < cbs.update.length; ++i) { cbs.update[i](oldVnode, vnode); }\n      if (isDef(i = data.hook) && isDef(i = i.update)) { i(oldVnode, vnode); }\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) { updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly); }\n      } else if (isDef(ch)) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkDuplicateKeys(ch);\n        }\n        if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        nodeOps.setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      nodeOps.setTextContent(elm, vnode.text);\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.postpatch)) { i(oldVnode, vnode); }\n    }\n  }\n\n  function invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n      vnode.parent.data.pendingInsert = queue;\n    } else {\n      for (var i = 0; i < queue.length; ++i) {\n        queue[i].data.hook.insert(queue[i]);\n      }\n    }\n  }\n\n  var hydrationBailed = false;\n  // list of modules that can skip create hook during hydration because they\n  // are already rendered on the client or has no need for initialization\n  // Note: style is excluded because it relies on initial clone for future\n  // deep updates (#7063).\n  var isRenderedModule = makeMap('attrs,class,staticClass,staticStyle,key');\n\n  // Note: this is a browser-only function so we can assume elms are DOM nodes.\n  function hydrate (elm, vnode, insertedVnodeQueue, inVPre) {\n    var i;\n    var tag = vnode.tag;\n    var data = vnode.data;\n    var children = vnode.children;\n    inVPre = inVPre || (data && data.pre);\n    vnode.elm = elm;\n\n    if (isTrue(vnode.isComment) && isDef(vnode.asyncFactory)) {\n      vnode.isAsyncPlaceholder = true;\n      return true\n    }\n    // assert node match\n    if (process.env.NODE_ENV !== 'production') {\n      if (!assertNodeMatch(elm, vnode, inVPre)) {\n        return false\n      }\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) { i(vnode, true /* hydrating */); }\n      if (isDef(i = vnode.componentInstance)) {\n        // child component. it should have hydrated its own tree.\n        initComponent(vnode, insertedVnodeQueue);\n        return true\n      }\n    }\n    if (isDef(tag)) {\n      if (isDef(children)) {\n        // empty element, allow client to pick up and populate children\n        if (!elm.hasChildNodes()) {\n          createChildren(vnode, children, insertedVnodeQueue);\n        } else {\n          // v-html and domProps: innerHTML\n          if (isDef(i = data) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) {\n            if (i !== elm.innerHTML) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('server innerHTML: ', i);\n                console.warn('client innerHTML: ', elm.innerHTML);\n              }\n              return false\n            }\n          } else {\n            // iterate and compare children lists\n            var childrenMatch = true;\n            var childNode = elm.firstChild;\n            for (var i$1 = 0; i$1 < children.length; i$1++) {\n              if (!childNode || !hydrate(childNode, children[i$1], insertedVnodeQueue, inVPre)) {\n                childrenMatch = false;\n                break\n              }\n              childNode = childNode.nextSibling;\n            }\n            // if childNode is not null, it means the actual childNodes list is\n            // longer than the virtual children list.\n            if (!childrenMatch || childNode) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('Mismatching childNodes vs. VNodes: ', elm.childNodes, children);\n              }\n              return false\n            }\n          }\n        }\n      }\n      if (isDef(data)) {\n        var fullInvoke = false;\n        for (var key in data) {\n          if (!isRenderedModule(key)) {\n            fullInvoke = true;\n            invokeCreateHooks(vnode, insertedVnodeQueue);\n            break\n          }\n        }\n        if (!fullInvoke && data['class']) {\n          // ensure collecting deps for deep class bindings for future updates\n          traverse(data['class']);\n        }\n      }\n    } else if (elm.data !== vnode.text) {\n      elm.data = vnode.text;\n    }\n    return true\n  }\n\n  function assertNodeMatch (node, vnode, inVPre) {\n    if (isDef(vnode.tag)) {\n      return vnode.tag.indexOf('vue-component') === 0 || (\n        !isUnknownElement$$1(vnode, inVPre) &&\n        vnode.tag.toLowerCase() === (node.tagName && node.tagName.toLowerCase())\n      )\n    } else {\n      return node.nodeType === (vnode.isComment ? 8 : 3)\n    }\n  }\n\n  return function patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n      if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n      return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n      // empty mount (likely as component), create new root element\n      isInitialPatch = true;\n      createElm(vnode, insertedVnodeQueue);\n    } else {\n      var isRealElement = isDef(oldVnode.nodeType);\n      if (!isRealElement && sameVnode(oldVnode, vnode)) {\n        // patch existing root node\n        patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n      } else {\n        if (isRealElement) {\n          // mounting to a real element\n          // check if this is server-rendered content and if we can perform\n          // a successful hydration.\n          if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n            oldVnode.removeAttribute(SSR_ATTR);\n            hydrating = true;\n          }\n          if (isTrue(hydrating)) {\n            if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n              invokeInsertHook(vnode, insertedVnodeQueue, true);\n              return oldVnode\n            } else if (process.env.NODE_ENV !== 'production') {\n              warn(\n                'The client-side rendered virtual DOM tree is not matching ' +\n                'server-rendered content. This is likely caused by incorrect ' +\n                'HTML markup, for example nesting block-level elements inside ' +\n                '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                'full client-side render.'\n              );\n            }\n          }\n          // either not server-rendered, or hydration failed.\n          // create an empty node and replace it\n          oldVnode = emptyNodeAt(oldVnode);\n        }\n\n        // replacing existing element\n        var oldElm = oldVnode.elm;\n        var parentElm = nodeOps.parentNode(oldElm);\n\n        // create new node\n        createElm(\n          vnode,\n          insertedVnodeQueue,\n          // extremely rare edge case: do not insert if old element is in a\n          // leaving transition. Only happens when combining transition +\n          // keep-alive + HOCs. (#4590)\n          oldElm._leaveCb ? null : parentElm,\n          nodeOps.nextSibling(oldElm)\n        );\n\n        // update parent placeholder node element, recursively\n        if (isDef(vnode.parent)) {\n          var ancestor = vnode.parent;\n          var patchable = isPatchable(vnode);\n          while (ancestor) {\n            for (var i = 0; i < cbs.destroy.length; ++i) {\n              cbs.destroy[i](ancestor);\n            }\n            ancestor.elm = vnode.elm;\n            if (patchable) {\n              for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                cbs.create[i$1](emptyNode, ancestor);\n              }\n              // #6513\n              // invoke insert hooks that may have been merged by create hooks.\n              // e.g. for directives that uses the \"inserted\" hook.\n              var insert = ancestor.data.hook.insert;\n              if (insert.merged) {\n                // start at index 1 to avoid re-invoking component mounted hook\n                for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                  insert.fns[i$2]();\n                }\n              }\n            } else {\n              registerRef(ancestor);\n            }\n            ancestor = ancestor.parent;\n          }\n        }\n\n        // destroy old node\n        if (isDef(parentElm)) {\n          removeVnodes([oldVnode], 0, 0);\n        } else if (isDef(oldVnode.tag)) {\n          invokeDestroyHook(oldVnode);\n        }\n      }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n  }\n}\n\n/*  */\n\nvar directives = {\n  create: updateDirectives,\n  update: updateDirectives,\n  destroy: function unbindDirectives (vnode) {\n    updateDirectives(vnode, emptyNode);\n  }\n};\n\nfunction updateDirectives (oldVnode, vnode) {\n  if (oldVnode.data.directives || vnode.data.directives) {\n    _update(oldVnode, vnode);\n  }\n}\n\nfunction _update (oldVnode, vnode) {\n  var isCreate = oldVnode === emptyNode;\n  var isDestroy = vnode === emptyNode;\n  var oldDirs = normalizeDirectives$1(oldVnode.data.directives, oldVnode.context);\n  var newDirs = normalizeDirectives$1(vnode.data.directives, vnode.context);\n\n  var dirsWithInsert = [];\n  var dirsWithPostpatch = [];\n\n  var key, oldDir, dir;\n  for (key in newDirs) {\n    oldDir = oldDirs[key];\n    dir = newDirs[key];\n    if (!oldDir) {\n      // new directive, bind\n      callHook$1(dir, 'bind', vnode, oldVnode);\n      if (dir.def && dir.def.inserted) {\n        dirsWithInsert.push(dir);\n      }\n    } else {\n      // existing directive, update\n      dir.oldValue = oldDir.value;\n      dir.oldArg = oldDir.arg;\n      callHook$1(dir, 'update', vnode, oldVnode);\n      if (dir.def && dir.def.componentUpdated) {\n        dirsWithPostpatch.push(dir);\n      }\n    }\n  }\n\n  if (dirsWithInsert.length) {\n    var callInsert = function () {\n      for (var i = 0; i < dirsWithInsert.length; i++) {\n        callHook$1(dirsWithInsert[i], 'inserted', vnode, oldVnode);\n      }\n    };\n    if (isCreate) {\n      mergeVNodeHook(vnode, 'insert', callInsert);\n    } else {\n      callInsert();\n    }\n  }\n\n  if (dirsWithPostpatch.length) {\n    mergeVNodeHook(vnode, 'postpatch', function () {\n      for (var i = 0; i < dirsWithPostpatch.length; i++) {\n        callHook$1(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode);\n      }\n    });\n  }\n\n  if (!isCreate) {\n    for (key in oldDirs) {\n      if (!newDirs[key]) {\n        // no longer present, unbind\n        callHook$1(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy);\n      }\n    }\n  }\n}\n\nvar emptyModifiers = Object.create(null);\n\nfunction normalizeDirectives$1 (\n  dirs,\n  vm\n) {\n  var res = Object.create(null);\n  if (!dirs) {\n    // $flow-disable-line\n    return res\n  }\n  var i, dir;\n  for (i = 0; i < dirs.length; i++) {\n    dir = dirs[i];\n    if (!dir.modifiers) {\n      // $flow-disable-line\n      dir.modifiers = emptyModifiers;\n    }\n    res[getRawDirName(dir)] = dir;\n    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true);\n  }\n  // $flow-disable-line\n  return res\n}\n\nfunction getRawDirName (dir) {\n  return dir.rawName || ((dir.name) + \".\" + (Object.keys(dir.modifiers || {}).join('.')))\n}\n\nfunction callHook$1 (dir, hook, vnode, oldVnode, isDestroy) {\n  var fn = dir.def && dir.def[hook];\n  if (fn) {\n    try {\n      fn(vnode.elm, dir, vnode, oldVnode, isDestroy);\n    } catch (e) {\n      handleError(e, vnode.context, (\"directive \" + (dir.name) + \" \" + hook + \" hook\"));\n    }\n  }\n}\n\nvar baseModules = [\n  ref,\n  directives\n];\n\n/*  */\n\nfunction updateAttrs (oldVnode, vnode) {\n  var opts = vnode.componentOptions;\n  if (isDef(opts) && opts.Ctor.options.inheritAttrs === false) {\n    return\n  }\n  if (isUndef(oldVnode.data.attrs) && isUndef(vnode.data.attrs)) {\n    return\n  }\n  var key, cur, old;\n  var elm = vnode.elm;\n  var oldAttrs = oldVnode.data.attrs || {};\n  var attrs = vnode.data.attrs || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(attrs.__ob__)) {\n    attrs = vnode.data.attrs = extend({}, attrs);\n  }\n\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      setAttr(elm, key, cur, vnode.data.pre);\n    }\n  }\n  // #4391: in IE9, setting type can reset value for input[type=radio]\n  // #6666: IE/Edge forces progress value down to 1 before setting a max\n  /* istanbul ignore if */\n  if ((isIE || isEdge) && attrs.value !== oldAttrs.value) {\n    setAttr(elm, 'value', attrs.value);\n  }\n  for (key in oldAttrs) {\n    if (isUndef(attrs[key])) {\n      if (isXlink(key)) {\n        elm.removeAttributeNS(xlinkNS, getXlinkProp(key));\n      } else if (!isEnumeratedAttr(key)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n}\n\nfunction setAttr (el, key, value, isInPre) {\n  if (isInPre || el.tagName.indexOf('-') > -1) {\n    baseSetAttr(el, key, value);\n  } else if (isBooleanAttr(key)) {\n    // set attribute for blank value\n    // e.g. <option disabled>Select one</option>\n    if (isFalsyAttrValue(value)) {\n      el.removeAttribute(key);\n    } else {\n      // technically allowfullscreen is a boolean attribute for <iframe>,\n      // but Flash expects a value of \"true\" when used on <embed> tag\n      value = key === 'allowfullscreen' && el.tagName === 'EMBED'\n        ? 'true'\n        : key;\n      el.setAttribute(key, value);\n    }\n  } else if (isEnumeratedAttr(key)) {\n    el.setAttribute(key, convertEnumeratedValue(key, value));\n  } else if (isXlink(key)) {\n    if (isFalsyAttrValue(value)) {\n      el.removeAttributeNS(xlinkNS, getXlinkProp(key));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    baseSetAttr(el, key, value);\n  }\n}\n\nfunction baseSetAttr (el, key, value) {\n  if (isFalsyAttrValue(value)) {\n    el.removeAttribute(key);\n  } else {\n    // #7138: IE10 & 11 fires input event when setting placeholder on\n    // <textarea>... block the first input event and remove the blocker\n    // immediately.\n    /* istanbul ignore if */\n    if (\n      isIE && !isIE9 &&\n      el.tagName === 'TEXTAREA' &&\n      key === 'placeholder' && value !== '' && !el.__ieph\n    ) {\n      var blocker = function (e) {\n        e.stopImmediatePropagation();\n        el.removeEventListener('input', blocker);\n      };\n      el.addEventListener('input', blocker);\n      // $flow-disable-line\n      el.__ieph = true; /* IE placeholder patched */\n    }\n    el.setAttribute(key, value);\n  }\n}\n\nvar attrs = {\n  create: updateAttrs,\n  update: updateAttrs\n};\n\n/*  */\n\nfunction updateClass (oldVnode, vnode) {\n  var el = vnode.elm;\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n  if (\n    isUndef(data.staticClass) &&\n    isUndef(data.class) && (\n      isUndef(oldData) || (\n        isUndef(oldData.staticClass) &&\n        isUndef(oldData.class)\n      )\n    )\n  ) {\n    return\n  }\n\n  var cls = genClassForVnode(vnode);\n\n  // handle transition classes\n  var transitionClass = el._transitionClasses;\n  if (isDef(transitionClass)) {\n    cls = concat(cls, stringifyClass(transitionClass));\n  }\n\n  // set the class\n  if (cls !== el._prevClass) {\n    el.setAttribute('class', cls);\n    el._prevClass = cls;\n  }\n}\n\nvar klass = {\n  create: updateClass,\n  update: updateClass\n};\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// in some cases, the event used has to be determined at runtime\n// so we used some reserved tokens during compile.\nvar RANGE_TOKEN = '__r';\nvar CHECKBOX_RADIO_TOKEN = '__c';\n\n/*  */\n\n// normalize v-model event tokens that can only be determined at runtime.\n// it's important to place the event as the first in the array because\n// the whole point is ensuring the v-model callback gets called before\n// user-attached handlers.\nfunction normalizeEvents (on) {\n  /* istanbul ignore if */\n  if (isDef(on[RANGE_TOKEN])) {\n    // IE input[type=range] only supports `change` event\n    var event = isIE ? 'change' : 'input';\n    on[event] = [].concat(on[RANGE_TOKEN], on[event] || []);\n    delete on[RANGE_TOKEN];\n  }\n  // This was originally intended to fix #4521 but no longer necessary\n  // after 2.5. Keeping it for backwards compat with generated code from < 2.4\n  /* istanbul ignore if */\n  if (isDef(on[CHECKBOX_RADIO_TOKEN])) {\n    on.change = [].concat(on[CHECKBOX_RADIO_TOKEN], on.change || []);\n    delete on[CHECKBOX_RADIO_TOKEN];\n  }\n}\n\nvar target$1;\n\nfunction createOnceHandler$1 (event, handler, capture) {\n  var _target = target$1; // save current target element in closure\n  return function onceHandler () {\n    var res = handler.apply(null, arguments);\n    if (res !== null) {\n      remove$2(event, onceHandler, capture, _target);\n    }\n  }\n}\n\n// #9446: Firefox <= 53 (in particular, ESR 52) has incorrect Event.timeStamp\n// implementation and does not fire microtasks in between event propagation, so\n// safe to exclude.\nvar useMicrotaskFix = isUsingMicroTask && !(isFF && Number(isFF[1]) <= 53);\n\nfunction add$1 (\n  name,\n  handler,\n  capture,\n  passive\n) {\n  // async edge case #6566: inner click event triggers patch, event handler\n  // attached to outer element during patch, and triggered again. This\n  // happens because browsers fire microtask ticks between event propagation.\n  // the solution is simple: we save the timestamp when a handler is attached,\n  // and the handler would only fire if the event passed to it was fired\n  // AFTER it was attached.\n  if (useMicrotaskFix) {\n    var attachedTimestamp = currentFlushTimestamp;\n    var original = handler;\n    handler = original._wrapper = function (e) {\n      if (\n        // no bubbling, should always fire.\n        // this is just a safety net in case event.timeStamp is unreliable in\n        // certain weird environments...\n        e.target === e.currentTarget ||\n        // event is fired after handler attachment\n        e.timeStamp >= attachedTimestamp ||\n        // bail for environments that have buggy event.timeStamp implementations\n        // #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\n        // #9681 QtWebEngine event.timeStamp is negative value\n        e.timeStamp <= 0 ||\n        // #9448 bail if event is fired in another document in a multi-page\n        // electron/nw.js app, since event.timeStamp will be using a different\n        // starting reference\n        e.target.ownerDocument !== document\n      ) {\n        return original.apply(this, arguments)\n      }\n    };\n  }\n  target$1.addEventListener(\n    name,\n    handler,\n    supportsPassive\n      ? { capture: capture, passive: passive }\n      : capture\n  );\n}\n\nfunction remove$2 (\n  name,\n  handler,\n  capture,\n  _target\n) {\n  (_target || target$1).removeEventListener(\n    name,\n    handler._wrapper || handler,\n    capture\n  );\n}\n\nfunction updateDOMListeners (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {\n    return\n  }\n  var on = vnode.data.on || {};\n  var oldOn = oldVnode.data.on || {};\n  target$1 = vnode.elm;\n  normalizeEvents(on);\n  updateListeners(on, oldOn, add$1, remove$2, createOnceHandler$1, vnode.context);\n  target$1 = undefined;\n}\n\nvar events = {\n  create: updateDOMListeners,\n  update: updateDOMListeners\n};\n\n/*  */\n\nvar svgContainer;\n\nfunction updateDOMProps (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {\n    return\n  }\n  var key, cur;\n  var elm = vnode.elm;\n  var oldProps = oldVnode.data.domProps || {};\n  var props = vnode.data.domProps || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(props.__ob__)) {\n    props = vnode.data.domProps = extend({}, props);\n  }\n\n  for (key in oldProps) {\n    if (!(key in props)) {\n      elm[key] = '';\n    }\n  }\n\n  for (key in props) {\n    cur = props[key];\n    // ignore children if the node has textContent or innerHTML,\n    // as these will throw away existing DOM nodes and cause removal errors\n    // on subsequent patches (#3360)\n    if (key === 'textContent' || key === 'innerHTML') {\n      if (vnode.children) { vnode.children.length = 0; }\n      if (cur === oldProps[key]) { continue }\n      // #6601 work around Chrome version <= 55 bug where single textNode\n      // replaced by innerHTML/textContent retains its parentNode property\n      if (elm.childNodes.length === 1) {\n        elm.removeChild(elm.childNodes[0]);\n      }\n    }\n\n    if (key === 'value' && elm.tagName !== 'PROGRESS') {\n      // store value as _value as well since\n      // non-string values will be stringified\n      elm._value = cur;\n      // avoid resetting cursor position when value is the same\n      var strCur = isUndef(cur) ? '' : String(cur);\n      if (shouldUpdateValue(elm, strCur)) {\n        elm.value = strCur;\n      }\n    } else if (key === 'innerHTML' && isSVG(elm.tagName) && isUndef(elm.innerHTML)) {\n      // IE doesn't support innerHTML for SVG elements\n      svgContainer = svgContainer || document.createElement('div');\n      svgContainer.innerHTML = \"<svg>\" + cur + \"</svg>\";\n      var svg = svgContainer.firstChild;\n      while (elm.firstChild) {\n        elm.removeChild(elm.firstChild);\n      }\n      while (svg.firstChild) {\n        elm.appendChild(svg.firstChild);\n      }\n    } else if (\n      // skip the update if old and new VDOM state is the same.\n      // `value` is handled separately because the DOM value may be temporarily\n      // out of sync with VDOM state due to focus, composition and modifiers.\n      // This  #4521 by skipping the unnecessary `checked` update.\n      cur !== oldProps[key]\n    ) {\n      // some property updates can throw\n      // e.g. `value` on <progress> w/ non-finite value\n      try {\n        elm[key] = cur;\n      } catch (e) {}\n    }\n  }\n}\n\n// check platforms/web/util/attrs.js acceptValue\n\n\nfunction shouldUpdateValue (elm, checkVal) {\n  return (!elm.composing && (\n    elm.tagName === 'OPTION' ||\n    isNotInFocusAndDirty(elm, checkVal) ||\n    isDirtyWithModifiers(elm, checkVal)\n  ))\n}\n\nfunction isNotInFocusAndDirty (elm, checkVal) {\n  // return true when textbox (.number and .trim) loses focus and its value is\n  // not equal to the updated value\n  var notInFocus = true;\n  // #6157\n  // work around IE bug when accessing document.activeElement in an iframe\n  try { notInFocus = document.activeElement !== elm; } catch (e) {}\n  return notInFocus && elm.value !== checkVal\n}\n\nfunction isDirtyWithModifiers (elm, newVal) {\n  var value = elm.value;\n  var modifiers = elm._vModifiers; // injected by v-model runtime\n  if (isDef(modifiers)) {\n    if (modifiers.number) {\n      return toNumber(value) !== toNumber(newVal)\n    }\n    if (modifiers.trim) {\n      return value.trim() !== newVal.trim()\n    }\n  }\n  return value !== newVal\n}\n\nvar domProps = {\n  create: updateDOMProps,\n  update: updateDOMProps\n};\n\n/*  */\n\nvar parseStyleText = cached(function (cssText) {\n  var res = {};\n  var listDelimiter = /;(?![^(]*\\))/g;\n  var propertyDelimiter = /:(.+)/;\n  cssText.split(listDelimiter).forEach(function (item) {\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return res\n});\n\n// merge static and dynamic style data on the same vnode\nfunction normalizeStyleData (data) {\n  var style = normalizeStyleBinding(data.style);\n  // static style is pre-processed into an object during compilation\n  // and is always a fresh object, so it's safe to merge into it\n  return data.staticStyle\n    ? extend(data.staticStyle, style)\n    : style\n}\n\n// normalize possible array / string values into Object\nfunction normalizeStyleBinding (bindingStyle) {\n  if (Array.isArray(bindingStyle)) {\n    return toObject(bindingStyle)\n  }\n  if (typeof bindingStyle === 'string') {\n    return parseStyleText(bindingStyle)\n  }\n  return bindingStyle\n}\n\n/**\n * parent component style should be after child's\n * so that parent component's style could override it\n */\nfunction getStyle (vnode, checkChild) {\n  var res = {};\n  var styleData;\n\n  if (checkChild) {\n    var childNode = vnode;\n    while (childNode.componentInstance) {\n      childNode = childNode.componentInstance._vnode;\n      if (\n        childNode && childNode.data &&\n        (styleData = normalizeStyleData(childNode.data))\n      ) {\n        extend(res, styleData);\n      }\n    }\n  }\n\n  if ((styleData = normalizeStyleData(vnode.data))) {\n    extend(res, styleData);\n  }\n\n  var parentNode = vnode;\n  while ((parentNode = parentNode.parent)) {\n    if (parentNode.data && (styleData = normalizeStyleData(parentNode.data))) {\n      extend(res, styleData);\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar cssVarRE = /^--/;\nvar importantRE = /\\s*!important$/;\nvar setProp = function (el, name, val) {\n  /* istanbul ignore if */\n  if (cssVarRE.test(name)) {\n    el.style.setProperty(name, val);\n  } else if (importantRE.test(val)) {\n    el.style.setProperty(hyphenate(name), val.replace(importantRE, ''), 'important');\n  } else {\n    var normalizedName = normalize(name);\n    if (Array.isArray(val)) {\n      // Support values array created by autoprefixer, e.g.\n      // {display: [\"-webkit-box\", \"-ms-flexbox\", \"flex\"]}\n      // Set them one by one, and the browser will only set those it can recognize\n      for (var i = 0, len = val.length; i < len; i++) {\n        el.style[normalizedName] = val[i];\n      }\n    } else {\n      el.style[normalizedName] = val;\n    }\n  }\n};\n\nvar vendorNames = ['Webkit', 'Moz', 'ms'];\n\nvar emptyStyle;\nvar normalize = cached(function (prop) {\n  emptyStyle = emptyStyle || document.createElement('div').style;\n  prop = camelize(prop);\n  if (prop !== 'filter' && (prop in emptyStyle)) {\n    return prop\n  }\n  var capName = prop.charAt(0).toUpperCase() + prop.slice(1);\n  for (var i = 0; i < vendorNames.length; i++) {\n    var name = vendorNames[i] + capName;\n    if (name in emptyStyle) {\n      return name\n    }\n  }\n});\n\nfunction updateStyle (oldVnode, vnode) {\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n\n  if (isUndef(data.staticStyle) && isUndef(data.style) &&\n    isUndef(oldData.staticStyle) && isUndef(oldData.style)\n  ) {\n    return\n  }\n\n  var cur, name;\n  var el = vnode.elm;\n  var oldStaticStyle = oldData.staticStyle;\n  var oldStyleBinding = oldData.normalizedStyle || oldData.style || {};\n\n  // if static style exists, stylebinding already merged into it when doing normalizeStyleData\n  var oldStyle = oldStaticStyle || oldStyleBinding;\n\n  var style = normalizeStyleBinding(vnode.data.style) || {};\n\n  // store normalized style under a different key for next diff\n  // make sure to clone it if it's reactive, since the user likely wants\n  // to mutate it.\n  vnode.data.normalizedStyle = isDef(style.__ob__)\n    ? extend({}, style)\n    : style;\n\n  var newStyle = getStyle(vnode, true);\n\n  for (name in oldStyle) {\n    if (isUndef(newStyle[name])) {\n      setProp(el, name, '');\n    }\n  }\n  for (name in newStyle) {\n    cur = newStyle[name];\n    if (cur !== oldStyle[name]) {\n      // ie9 setting to null has no effect, must use empty string\n      setProp(el, name, cur == null ? '' : cur);\n    }\n  }\n}\n\nvar style = {\n  create: updateStyle,\n  update: updateStyle\n};\n\n/*  */\n\nvar whitespaceRE = /\\s+/;\n\n/**\n * Add class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction addClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.add(c); });\n    } else {\n      el.classList.add(cls);\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    if (cur.indexOf(' ' + cls + ' ') < 0) {\n      el.setAttribute('class', (cur + cls).trim());\n    }\n  }\n}\n\n/**\n * Remove class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction removeClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.remove(c); });\n    } else {\n      el.classList.remove(cls);\n    }\n    if (!el.classList.length) {\n      el.removeAttribute('class');\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    var tar = ' ' + cls + ' ';\n    while (cur.indexOf(tar) >= 0) {\n      cur = cur.replace(tar, ' ');\n    }\n    cur = cur.trim();\n    if (cur) {\n      el.setAttribute('class', cur);\n    } else {\n      el.removeAttribute('class');\n    }\n  }\n}\n\n/*  */\n\nfunction resolveTransition (def$$1) {\n  if (!def$$1) {\n    return\n  }\n  /* istanbul ignore else */\n  if (typeof def$$1 === 'object') {\n    var res = {};\n    if (def$$1.css !== false) {\n      extend(res, autoCssTransition(def$$1.name || 'v'));\n    }\n    extend(res, def$$1);\n    return res\n  } else if (typeof def$$1 === 'string') {\n    return autoCssTransition(def$$1)\n  }\n}\n\nvar autoCssTransition = cached(function (name) {\n  return {\n    enterClass: (name + \"-enter\"),\n    enterToClass: (name + \"-enter-to\"),\n    enterActiveClass: (name + \"-enter-active\"),\n    leaveClass: (name + \"-leave\"),\n    leaveToClass: (name + \"-leave-to\"),\n    leaveActiveClass: (name + \"-leave-active\")\n  }\n});\n\nvar hasTransition = inBrowser && !isIE9;\nvar TRANSITION = 'transition';\nvar ANIMATION = 'animation';\n\n// Transition property/event sniffing\nvar transitionProp = 'transition';\nvar transitionEndEvent = 'transitionend';\nvar animationProp = 'animation';\nvar animationEndEvent = 'animationend';\nif (hasTransition) {\n  /* istanbul ignore if */\n  if (window.ontransitionend === undefined &&\n    window.onwebkittransitionend !== undefined\n  ) {\n    transitionProp = 'WebkitTransition';\n    transitionEndEvent = 'webkitTransitionEnd';\n  }\n  if (window.onanimationend === undefined &&\n    window.onwebkitanimationend !== undefined\n  ) {\n    animationProp = 'WebkitAnimation';\n    animationEndEvent = 'webkitAnimationEnd';\n  }\n}\n\n// binding to window is necessary to make hot reload work in IE in strict mode\nvar raf = inBrowser\n  ? window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout\n  : /* istanbul ignore next */ function (fn) { return fn(); };\n\nfunction nextFrame (fn) {\n  raf(function () {\n    raf(fn);\n  });\n}\n\nfunction addTransitionClass (el, cls) {\n  var transitionClasses = el._transitionClasses || (el._transitionClasses = []);\n  if (transitionClasses.indexOf(cls) < 0) {\n    transitionClasses.push(cls);\n    addClass(el, cls);\n  }\n}\n\nfunction removeTransitionClass (el, cls) {\n  if (el._transitionClasses) {\n    remove(el._transitionClasses, cls);\n  }\n  removeClass(el, cls);\n}\n\nfunction whenTransitionEnds (\n  el,\n  expectedType,\n  cb\n) {\n  var ref = getTransitionInfo(el, expectedType);\n  var type = ref.type;\n  var timeout = ref.timeout;\n  var propCount = ref.propCount;\n  if (!type) { return cb() }\n  var event = type === TRANSITION ? transitionEndEvent : animationEndEvent;\n  var ended = 0;\n  var end = function () {\n    el.removeEventListener(event, onEnd);\n    cb();\n  };\n  var onEnd = function (e) {\n    if (e.target === el) {\n      if (++ended >= propCount) {\n        end();\n      }\n    }\n  };\n  setTimeout(function () {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(event, onEnd);\n}\n\nvar transformRE = /\\b(transform|all)(,|$)/;\n\nfunction getTransitionInfo (el, expectedType) {\n  var styles = window.getComputedStyle(el);\n  // JSDOM may return undefined for transition properties\n  var transitionDelays = (styles[transitionProp + 'Delay'] || '').split(', ');\n  var transitionDurations = (styles[transitionProp + 'Duration'] || '').split(', ');\n  var transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  var animationDelays = (styles[animationProp + 'Delay'] || '').split(', ');\n  var animationDurations = (styles[animationProp + 'Duration'] || '').split(', ');\n  var animationTimeout = getTimeout(animationDelays, animationDurations);\n\n  var type;\n  var timeout = 0;\n  var propCount = 0;\n  /* istanbul ignore if */\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0\n      ? transitionTimeout > animationTimeout\n        ? TRANSITION\n        : ANIMATION\n      : null;\n    propCount = type\n      ? type === TRANSITION\n        ? transitionDurations.length\n        : animationDurations.length\n      : 0;\n  }\n  var hasTransform =\n    type === TRANSITION &&\n    transformRE.test(styles[transitionProp + 'Property']);\n  return {\n    type: type,\n    timeout: timeout,\n    propCount: propCount,\n    hasTransform: hasTransform\n  }\n}\n\nfunction getTimeout (delays, durations) {\n  /* istanbul ignore next */\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n\n  return Math.max.apply(null, durations.map(function (d, i) {\n    return toMs(d) + toMs(delays[i])\n  }))\n}\n\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer numbers\n// in a locale-dependent way, using a comma instead of a dot.\n// If comma is not replaced with a dot, the input will be rounded down (i.e. acting\n// as a floor function) causing unexpected behaviors\nfunction toMs (s) {\n  return Number(s.slice(0, -1).replace(',', '.')) * 1000\n}\n\n/*  */\n\nfunction enter (vnode, toggleDisplay) {\n  var el = vnode.elm;\n\n  // call leave callback now\n  if (isDef(el._leaveCb)) {\n    el._leaveCb.cancelled = true;\n    el._leaveCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data)) {\n    return\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._enterCb) || el.nodeType !== 1) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var enterClass = data.enterClass;\n  var enterToClass = data.enterToClass;\n  var enterActiveClass = data.enterActiveClass;\n  var appearClass = data.appearClass;\n  var appearToClass = data.appearToClass;\n  var appearActiveClass = data.appearActiveClass;\n  var beforeEnter = data.beforeEnter;\n  var enter = data.enter;\n  var afterEnter = data.afterEnter;\n  var enterCancelled = data.enterCancelled;\n  var beforeAppear = data.beforeAppear;\n  var appear = data.appear;\n  var afterAppear = data.afterAppear;\n  var appearCancelled = data.appearCancelled;\n  var duration = data.duration;\n\n  // activeInstance will always be the <transition> component managing this\n  // transition. One edge case to check is when the <transition> is placed\n  // as the root node of a child component. In that case we need to check\n  // <transition>'s parent for appear check.\n  var context = activeInstance;\n  var transitionNode = activeInstance.$vnode;\n  while (transitionNode && transitionNode.parent) {\n    context = transitionNode.context;\n    transitionNode = transitionNode.parent;\n  }\n\n  var isAppear = !context._isMounted || !vnode.isRootInsert;\n\n  if (isAppear && !appear && appear !== '') {\n    return\n  }\n\n  var startClass = isAppear && appearClass\n    ? appearClass\n    : enterClass;\n  var activeClass = isAppear && appearActiveClass\n    ? appearActiveClass\n    : enterActiveClass;\n  var toClass = isAppear && appearToClass\n    ? appearToClass\n    : enterToClass;\n\n  var beforeEnterHook = isAppear\n    ? (beforeAppear || beforeEnter)\n    : beforeEnter;\n  var enterHook = isAppear\n    ? (typeof appear === 'function' ? appear : enter)\n    : enter;\n  var afterEnterHook = isAppear\n    ? (afterAppear || afterEnter)\n    : afterEnter;\n  var enterCancelledHook = isAppear\n    ? (appearCancelled || enterCancelled)\n    : enterCancelled;\n\n  var explicitEnterDuration = toNumber(\n    isObject(duration)\n      ? duration.enter\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && explicitEnterDuration != null) {\n    checkDuration(explicitEnterDuration, 'enter', vnode);\n  }\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(enterHook);\n\n  var cb = el._enterCb = once(function () {\n    if (expectsCSS) {\n      removeTransitionClass(el, toClass);\n      removeTransitionClass(el, activeClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, startClass);\n      }\n      enterCancelledHook && enterCancelledHook(el);\n    } else {\n      afterEnterHook && afterEnterHook(el);\n    }\n    el._enterCb = null;\n  });\n\n  if (!vnode.data.show) {\n    // remove pending leave element on enter by injecting an insert hook\n    mergeVNodeHook(vnode, 'insert', function () {\n      var parent = el.parentNode;\n      var pendingNode = parent && parent._pending && parent._pending[vnode.key];\n      if (pendingNode &&\n        pendingNode.tag === vnode.tag &&\n        pendingNode.elm._leaveCb\n      ) {\n        pendingNode.elm._leaveCb();\n      }\n      enterHook && enterHook(el, cb);\n    });\n  }\n\n  // start enter transition\n  beforeEnterHook && beforeEnterHook(el);\n  if (expectsCSS) {\n    addTransitionClass(el, startClass);\n    addTransitionClass(el, activeClass);\n    nextFrame(function () {\n      removeTransitionClass(el, startClass);\n      if (!cb.cancelled) {\n        addTransitionClass(el, toClass);\n        if (!userWantsControl) {\n          if (isValidDuration(explicitEnterDuration)) {\n            setTimeout(cb, explicitEnterDuration);\n          } else {\n            whenTransitionEnds(el, type, cb);\n          }\n        }\n      }\n    });\n  }\n\n  if (vnode.data.show) {\n    toggleDisplay && toggleDisplay();\n    enterHook && enterHook(el, cb);\n  }\n\n  if (!expectsCSS && !userWantsControl) {\n    cb();\n  }\n}\n\nfunction leave (vnode, rm) {\n  var el = vnode.elm;\n\n  // call enter callback now\n  if (isDef(el._enterCb)) {\n    el._enterCb.cancelled = true;\n    el._enterCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data) || el.nodeType !== 1) {\n    return rm()\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._leaveCb)) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var leaveClass = data.leaveClass;\n  var leaveToClass = data.leaveToClass;\n  var leaveActiveClass = data.leaveActiveClass;\n  var beforeLeave = data.beforeLeave;\n  var leave = data.leave;\n  var afterLeave = data.afterLeave;\n  var leaveCancelled = data.leaveCancelled;\n  var delayLeave = data.delayLeave;\n  var duration = data.duration;\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(leave);\n\n  var explicitLeaveDuration = toNumber(\n    isObject(duration)\n      ? duration.leave\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && isDef(explicitLeaveDuration)) {\n    checkDuration(explicitLeaveDuration, 'leave', vnode);\n  }\n\n  var cb = el._leaveCb = once(function () {\n    if (el.parentNode && el.parentNode._pending) {\n      el.parentNode._pending[vnode.key] = null;\n    }\n    if (expectsCSS) {\n      removeTransitionClass(el, leaveToClass);\n      removeTransitionClass(el, leaveActiveClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, leaveClass);\n      }\n      leaveCancelled && leaveCancelled(el);\n    } else {\n      rm();\n      afterLeave && afterLeave(el);\n    }\n    el._leaveCb = null;\n  });\n\n  if (delayLeave) {\n    delayLeave(performLeave);\n  } else {\n    performLeave();\n  }\n\n  function performLeave () {\n    // the delayed leave may have already been cancelled\n    if (cb.cancelled) {\n      return\n    }\n    // record leaving element\n    if (!vnode.data.show && el.parentNode) {\n      (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key)] = vnode;\n    }\n    beforeLeave && beforeLeave(el);\n    if (expectsCSS) {\n      addTransitionClass(el, leaveClass);\n      addTransitionClass(el, leaveActiveClass);\n      nextFrame(function () {\n        removeTransitionClass(el, leaveClass);\n        if (!cb.cancelled) {\n          addTransitionClass(el, leaveToClass);\n          if (!userWantsControl) {\n            if (isValidDuration(explicitLeaveDuration)) {\n              setTimeout(cb, explicitLeaveDuration);\n            } else {\n              whenTransitionEnds(el, type, cb);\n            }\n          }\n        }\n      });\n    }\n    leave && leave(el, cb);\n    if (!expectsCSS && !userWantsControl) {\n      cb();\n    }\n  }\n}\n\n// only used in dev mode\nfunction checkDuration (val, name, vnode) {\n  if (typeof val !== 'number') {\n    warn(\n      \"<transition> explicit \" + name + \" duration is not a valid number - \" +\n      \"got \" + (JSON.stringify(val)) + \".\",\n      vnode.context\n    );\n  } else if (isNaN(val)) {\n    warn(\n      \"<transition> explicit \" + name + \" duration is NaN - \" +\n      'the duration expression might be incorrect.',\n      vnode.context\n    );\n  }\n}\n\nfunction isValidDuration (val) {\n  return typeof val === 'number' && !isNaN(val)\n}\n\n/**\n * Normalize a transition hook's argument length. The hook may be:\n * - a merged hook (invoker) with the original in .fns\n * - a wrapped component method (check ._length)\n * - a plain function (.length)\n */\nfunction getHookArgumentsLength (fn) {\n  if (isUndef(fn)) {\n    return false\n  }\n  var invokerFns = fn.fns;\n  if (isDef(invokerFns)) {\n    // invoker\n    return getHookArgumentsLength(\n      Array.isArray(invokerFns)\n        ? invokerFns[0]\n        : invokerFns\n    )\n  } else {\n    return (fn._length || fn.length) > 1\n  }\n}\n\nfunction _enter (_, vnode) {\n  if (vnode.data.show !== true) {\n    enter(vnode);\n  }\n}\n\nvar transition = inBrowser ? {\n  create: _enter,\n  activate: _enter,\n  remove: function remove$$1 (vnode, rm) {\n    /* istanbul ignore else */\n    if (vnode.data.show !== true) {\n      leave(vnode, rm);\n    } else {\n      rm();\n    }\n  }\n} : {};\n\nvar platformModules = [\n  attrs,\n  klass,\n  events,\n  domProps,\n  style,\n  transition\n];\n\n/*  */\n\n// the directive module should be applied last, after all\n// built-in modules have been applied.\nvar modules = platformModules.concat(baseModules);\n\nvar patch = createPatchFunction({ nodeOps: nodeOps, modules: modules });\n\n/**\n * Not type checking this file because flow doesn't like attaching\n * properties to Elements.\n */\n\n/* istanbul ignore if */\nif (isIE9) {\n  // http://www.matts411.com/post/internet-explorer-9-oninput/\n  document.addEventListener('selectionchange', function () {\n    var el = document.activeElement;\n    if (el && el.vmodel) {\n      trigger(el, 'input');\n    }\n  });\n}\n\nvar directive = {\n  inserted: function inserted (el, binding, vnode, oldVnode) {\n    if (vnode.tag === 'select') {\n      // #6903\n      if (oldVnode.elm && !oldVnode.elm._vOptions) {\n        mergeVNodeHook(vnode, 'postpatch', function () {\n          directive.componentUpdated(el, binding, vnode);\n        });\n      } else {\n        setSelected(el, binding, vnode.context);\n      }\n      el._vOptions = [].map.call(el.options, getValue);\n    } else if (vnode.tag === 'textarea' || isTextInputType(el.type)) {\n      el._vModifiers = binding.modifiers;\n      if (!binding.modifiers.lazy) {\n        el.addEventListener('compositionstart', onCompositionStart);\n        el.addEventListener('compositionend', onCompositionEnd);\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        el.addEventListener('change', onCompositionEnd);\n        /* istanbul ignore if */\n        if (isIE9) {\n          el.vmodel = true;\n        }\n      }\n    }\n  },\n\n  componentUpdated: function componentUpdated (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      setSelected(el, binding, vnode.context);\n      // in case the options rendered by v-for have changed,\n      // it's possible that the value is out-of-sync with the rendered options.\n      // detect such cases and filter out values that no longer has a matching\n      // option in the DOM.\n      var prevOptions = el._vOptions;\n      var curOptions = el._vOptions = [].map.call(el.options, getValue);\n      if (curOptions.some(function (o, i) { return !looseEqual(o, prevOptions[i]); })) {\n        // trigger change event if\n        // no matching option found for at least one value\n        var needReset = el.multiple\n          ? binding.value.some(function (v) { return hasNoMatchingOption(v, curOptions); })\n          : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, curOptions);\n        if (needReset) {\n          trigger(el, 'change');\n        }\n      }\n    }\n  }\n};\n\nfunction setSelected (el, binding, vm) {\n  actuallySetSelected(el, binding, vm);\n  /* istanbul ignore if */\n  if (isIE || isEdge) {\n    setTimeout(function () {\n      actuallySetSelected(el, binding, vm);\n    }, 0);\n  }\n}\n\nfunction actuallySetSelected (el, binding, vm) {\n  var value = binding.value;\n  var isMultiple = el.multiple;\n  if (isMultiple && !Array.isArray(value)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"<select multiple v-model=\\\"\" + (binding.expression) + \"\\\"> \" +\n      \"expects an Array value for its binding, but got \" + (Object.prototype.toString.call(value).slice(8, -1)),\n      vm\n    );\n    return\n  }\n  var selected, option;\n  for (var i = 0, l = el.options.length; i < l; i++) {\n    option = el.options[i];\n    if (isMultiple) {\n      selected = looseIndexOf(value, getValue(option)) > -1;\n      if (option.selected !== selected) {\n        option.selected = selected;\n      }\n    } else {\n      if (looseEqual(getValue(option), value)) {\n        if (el.selectedIndex !== i) {\n          el.selectedIndex = i;\n        }\n        return\n      }\n    }\n  }\n  if (!isMultiple) {\n    el.selectedIndex = -1;\n  }\n}\n\nfunction hasNoMatchingOption (value, options) {\n  return options.every(function (o) { return !looseEqual(o, value); })\n}\n\nfunction getValue (option) {\n  return '_value' in option\n    ? option._value\n    : option.value\n}\n\nfunction onCompositionStart (e) {\n  e.target.composing = true;\n}\n\nfunction onCompositionEnd (e) {\n  // prevent triggering an input event for no reason\n  if (!e.target.composing) { return }\n  e.target.composing = false;\n  trigger(e.target, 'input');\n}\n\nfunction trigger (el, type) {\n  var e = document.createEvent('HTMLEvents');\n  e.initEvent(type, true, true);\n  el.dispatchEvent(e);\n}\n\n/*  */\n\n// recursively search for possible transition defined inside the component root\nfunction locateNode (vnode) {\n  return vnode.componentInstance && (!vnode.data || !vnode.data.transition)\n    ? locateNode(vnode.componentInstance._vnode)\n    : vnode\n}\n\nvar show = {\n  bind: function bind (el, ref, vnode) {\n    var value = ref.value;\n\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    var originalDisplay = el.__vOriginalDisplay =\n      el.style.display === 'none' ? '' : el.style.display;\n    if (value && transition$$1) {\n      vnode.data.show = true;\n      enter(vnode, function () {\n        el.style.display = originalDisplay;\n      });\n    } else {\n      el.style.display = value ? originalDisplay : 'none';\n    }\n  },\n\n  update: function update (el, ref, vnode) {\n    var value = ref.value;\n    var oldValue = ref.oldValue;\n\n    /* istanbul ignore if */\n    if (!value === !oldValue) { return }\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    if (transition$$1) {\n      vnode.data.show = true;\n      if (value) {\n        enter(vnode, function () {\n          el.style.display = el.__vOriginalDisplay;\n        });\n      } else {\n        leave(vnode, function () {\n          el.style.display = 'none';\n        });\n      }\n    } else {\n      el.style.display = value ? el.__vOriginalDisplay : 'none';\n    }\n  },\n\n  unbind: function unbind (\n    el,\n    binding,\n    vnode,\n    oldVnode,\n    isDestroy\n  ) {\n    if (!isDestroy) {\n      el.style.display = el.__vOriginalDisplay;\n    }\n  }\n};\n\nvar platformDirectives = {\n  model: directive,\n  show: show\n};\n\n/*  */\n\nvar transitionProps = {\n  name: String,\n  appear: Boolean,\n  css: Boolean,\n  mode: String,\n  type: String,\n  enterClass: String,\n  leaveClass: String,\n  enterToClass: String,\n  leaveToClass: String,\n  enterActiveClass: String,\n  leaveActiveClass: String,\n  appearClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  duration: [Number, String, Object]\n};\n\n// in case the child is also an abstract component, e.g. <keep-alive>\n// we want to recursively retrieve the real component to be rendered\nfunction getRealChild (vnode) {\n  var compOptions = vnode && vnode.componentOptions;\n  if (compOptions && compOptions.Ctor.options.abstract) {\n    return getRealChild(getFirstComponentChild(compOptions.children))\n  } else {\n    return vnode\n  }\n}\n\nfunction extractTransitionData (comp) {\n  var data = {};\n  var options = comp.$options;\n  // props\n  for (var key in options.propsData) {\n    data[key] = comp[key];\n  }\n  // events.\n  // extract listeners and pass them directly to the transition methods\n  var listeners = options._parentListeners;\n  for (var key$1 in listeners) {\n    data[camelize(key$1)] = listeners[key$1];\n  }\n  return data\n}\n\nfunction placeholder (h, rawChild) {\n  if (/\\d-keep-alive$/.test(rawChild.tag)) {\n    return h('keep-alive', {\n      props: rawChild.componentOptions.propsData\n    })\n  }\n}\n\nfunction hasParentTransition (vnode) {\n  while ((vnode = vnode.parent)) {\n    if (vnode.data.transition) {\n      return true\n    }\n  }\n}\n\nfunction isSameChild (child, oldChild) {\n  return oldChild.key === child.key && oldChild.tag === child.tag\n}\n\nvar isNotTextNode = function (c) { return c.tag || isAsyncPlaceholder(c); };\n\nvar isVShowDirective = function (d) { return d.name === 'show'; };\n\nvar Transition = {\n  name: 'transition',\n  props: transitionProps,\n  abstract: true,\n\n  render: function render (h) {\n    var this$1 = this;\n\n    var children = this.$slots.default;\n    if (!children) {\n      return\n    }\n\n    // filter out text nodes (possible whitespaces)\n    children = children.filter(isNotTextNode);\n    /* istanbul ignore if */\n    if (!children.length) {\n      return\n    }\n\n    // warn multiple elements\n    if (process.env.NODE_ENV !== 'production' && children.length > 1) {\n      warn(\n        '<transition> can only be used on a single element. Use ' +\n        '<transition-group> for lists.',\n        this.$parent\n      );\n    }\n\n    var mode = this.mode;\n\n    // warn invalid mode\n    if (process.env.NODE_ENV !== 'production' &&\n      mode && mode !== 'in-out' && mode !== 'out-in'\n    ) {\n      warn(\n        'invalid <transition> mode: ' + mode,\n        this.$parent\n      );\n    }\n\n    var rawChild = children[0];\n\n    // if this is a component root node and the component's\n    // parent container node also has transition, skip.\n    if (hasParentTransition(this.$vnode)) {\n      return rawChild\n    }\n\n    // apply transition data to child\n    // use getRealChild() to ignore abstract components e.g. keep-alive\n    var child = getRealChild(rawChild);\n    /* istanbul ignore if */\n    if (!child) {\n      return rawChild\n    }\n\n    if (this._leaving) {\n      return placeholder(h, rawChild)\n    }\n\n    // ensure a key that is unique to the vnode type and to this transition\n    // component instance. This key will be used to remove pending leaving nodes\n    // during entering.\n    var id = \"__transition-\" + (this._uid) + \"-\";\n    child.key = child.key == null\n      ? child.isComment\n        ? id + 'comment'\n        : id + child.tag\n      : isPrimitive(child.key)\n        ? (String(child.key).indexOf(id) === 0 ? child.key : id + child.key)\n        : child.key;\n\n    var data = (child.data || (child.data = {})).transition = extractTransitionData(this);\n    var oldRawChild = this._vnode;\n    var oldChild = getRealChild(oldRawChild);\n\n    // mark v-show\n    // so that the transition module can hand over the control to the directive\n    if (child.data.directives && child.data.directives.some(isVShowDirective)) {\n      child.data.show = true;\n    }\n\n    if (\n      oldChild &&\n      oldChild.data &&\n      !isSameChild(child, oldChild) &&\n      !isAsyncPlaceholder(oldChild) &&\n      // #6687 component root is a comment node\n      !(oldChild.componentInstance && oldChild.componentInstance._vnode.isComment)\n    ) {\n      // replace old child transition data with fresh one\n      // important for dynamic transitions!\n      var oldData = oldChild.data.transition = extend({}, data);\n      // handle transition mode\n      if (mode === 'out-in') {\n        // return placeholder node and queue update when leave finishes\n        this._leaving = true;\n        mergeVNodeHook(oldData, 'afterLeave', function () {\n          this$1._leaving = false;\n          this$1.$forceUpdate();\n        });\n        return placeholder(h, rawChild)\n      } else if (mode === 'in-out') {\n        if (isAsyncPlaceholder(child)) {\n          return oldRawChild\n        }\n        var delayedLeave;\n        var performLeave = function () { delayedLeave(); };\n        mergeVNodeHook(data, 'afterEnter', performLeave);\n        mergeVNodeHook(data, 'enterCancelled', performLeave);\n        mergeVNodeHook(oldData, 'delayLeave', function (leave) { delayedLeave = leave; });\n      }\n    }\n\n    return rawChild\n  }\n};\n\n/*  */\n\nvar props = extend({\n  tag: String,\n  moveClass: String\n}, transitionProps);\n\ndelete props.mode;\n\nvar TransitionGroup = {\n  props: props,\n\n  beforeMount: function beforeMount () {\n    var this$1 = this;\n\n    var update = this._update;\n    this._update = function (vnode, hydrating) {\n      var restoreActiveInstance = setActiveInstance(this$1);\n      // force removing pass\n      this$1.__patch__(\n        this$1._vnode,\n        this$1.kept,\n        false, // hydrating\n        true // removeOnly (!important, avoids unnecessary moves)\n      );\n      this$1._vnode = this$1.kept;\n      restoreActiveInstance();\n      update.call(this$1, vnode, hydrating);\n    };\n  },\n\n  render: function render (h) {\n    var tag = this.tag || this.$vnode.data.tag || 'span';\n    var map = Object.create(null);\n    var prevChildren = this.prevChildren = this.children;\n    var rawChildren = this.$slots.default || [];\n    var children = this.children = [];\n    var transitionData = extractTransitionData(this);\n\n    for (var i = 0; i < rawChildren.length; i++) {\n      var c = rawChildren[i];\n      if (c.tag) {\n        if (c.key != null && String(c.key).indexOf('__vlist') !== 0) {\n          children.push(c);\n          map[c.key] = c\n          ;(c.data || (c.data = {})).transition = transitionData;\n        } else if (process.env.NODE_ENV !== 'production') {\n          var opts = c.componentOptions;\n          var name = opts ? (opts.Ctor.options.name || opts.tag || '') : c.tag;\n          warn((\"<transition-group> children must be keyed: <\" + name + \">\"));\n        }\n      }\n    }\n\n    if (prevChildren) {\n      var kept = [];\n      var removed = [];\n      for (var i$1 = 0; i$1 < prevChildren.length; i$1++) {\n        var c$1 = prevChildren[i$1];\n        c$1.data.transition = transitionData;\n        c$1.data.pos = c$1.elm.getBoundingClientRect();\n        if (map[c$1.key]) {\n          kept.push(c$1);\n        } else {\n          removed.push(c$1);\n        }\n      }\n      this.kept = h(tag, null, kept);\n      this.removed = removed;\n    }\n\n    return h(tag, null, children)\n  },\n\n  updated: function updated () {\n    var children = this.prevChildren;\n    var moveClass = this.moveClass || ((this.name || 'v') + '-move');\n    if (!children.length || !this.hasMove(children[0].elm, moveClass)) {\n      return\n    }\n\n    // we divide the work into three loops to avoid mixing DOM reads and writes\n    // in each iteration - which helps prevent layout thrashing.\n    children.forEach(callPendingCbs);\n    children.forEach(recordPosition);\n    children.forEach(applyTranslation);\n\n    // force reflow to put everything in position\n    // assign to this to avoid being removed in tree-shaking\n    // $flow-disable-line\n    this._reflow = document.body.offsetHeight;\n\n    children.forEach(function (c) {\n      if (c.data.moved) {\n        var el = c.elm;\n        var s = el.style;\n        addTransitionClass(el, moveClass);\n        s.transform = s.WebkitTransform = s.transitionDuration = '';\n        el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {\n          if (e && e.target !== el) {\n            return\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(transitionEndEvent, cb);\n            el._moveCb = null;\n            removeTransitionClass(el, moveClass);\n          }\n        });\n      }\n    });\n  },\n\n  methods: {\n    hasMove: function hasMove (el, moveClass) {\n      /* istanbul ignore if */\n      if (!hasTransition) {\n        return false\n      }\n      /* istanbul ignore if */\n      if (this._hasMove) {\n        return this._hasMove\n      }\n      // Detect whether an element with the move class applied has\n      // CSS transitions. Since the element may be inside an entering\n      // transition at this very moment, we make a clone of it and remove\n      // all other transition classes applied to ensure only the move class\n      // is applied.\n      var clone = el.cloneNode();\n      if (el._transitionClasses) {\n        el._transitionClasses.forEach(function (cls) { removeClass(clone, cls); });\n      }\n      addClass(clone, moveClass);\n      clone.style.display = 'none';\n      this.$el.appendChild(clone);\n      var info = getTransitionInfo(clone);\n      this.$el.removeChild(clone);\n      return (this._hasMove = info.hasTransform)\n    }\n  }\n};\n\nfunction callPendingCbs (c) {\n  /* istanbul ignore if */\n  if (c.elm._moveCb) {\n    c.elm._moveCb();\n  }\n  /* istanbul ignore if */\n  if (c.elm._enterCb) {\n    c.elm._enterCb();\n  }\n}\n\nfunction recordPosition (c) {\n  c.data.newPos = c.elm.getBoundingClientRect();\n}\n\nfunction applyTranslation (c) {\n  var oldPos = c.data.pos;\n  var newPos = c.data.newPos;\n  var dx = oldPos.left - newPos.left;\n  var dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    c.data.moved = true;\n    var s = c.elm.style;\n    s.transform = s.WebkitTransform = \"translate(\" + dx + \"px,\" + dy + \"px)\";\n    s.transitionDuration = '0s';\n  }\n}\n\nvar platformComponents = {\n  Transition: Transition,\n  TransitionGroup: TransitionGroup\n};\n\n/*  */\n\n// install platform specific utils\nVue.config.mustUseProp = mustUseProp;\nVue.config.isReservedTag = isReservedTag;\nVue.config.isReservedAttr = isReservedAttr;\nVue.config.getTagNamespace = getTagNamespace;\nVue.config.isUnknownElement = isUnknownElement;\n\n// install platform runtime directives & components\nextend(Vue.options.directives, platformDirectives);\nextend(Vue.options.components, platformComponents);\n\n// install platform patch function\nVue.prototype.__patch__ = inBrowser ? patch : noop;\n\n// public mount method\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && inBrowser ? query(el) : undefined;\n  return mountComponent(this, el, hydrating)\n};\n\n// devtools global hook\n/* istanbul ignore next */\nif (inBrowser) {\n  setTimeout(function () {\n    if (config.devtools) {\n      if (devtools) {\n        devtools.emit('init', Vue);\n      } else if (\n        process.env.NODE_ENV !== 'production' &&\n        process.env.NODE_ENV !== 'test'\n      ) {\n        console[console.info ? 'info' : 'log'](\n          'Download the Vue Devtools extension for a better development experience:\\n' +\n          'https://github.com/vuejs/vue-devtools'\n        );\n      }\n    }\n    if (process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      config.productionTip !== false &&\n      typeof console !== 'undefined'\n    ) {\n      console[console.info ? 'info' : 'log'](\n        \"You are running Vue in development mode.\\n\" +\n        \"Make sure to turn on production mode when deploying for production.\\n\" +\n        \"See more tips at https://vuejs.org/guide/deployment.html\"\n      );\n    }\n  }, 0);\n}\n\n/*  */\n\nexport default Vue;\n","/*eslint-disable no-cond-assign */\nmodule.exports = parse;\nmodule.exports.parse = parse;\nmodule.exports.stringify = stringify;\n\nvar numberRegexp = /[-+]?([0-9]*\\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;\n// Matches sequences like '100 100' or '100 100 100'.\nvar tuples = new RegExp('^' + numberRegexp.source + '(\\\\s' + numberRegexp.source + '){1,}');\n\n/*\n * Parse WKT and return GeoJSON.\n *\n * @param {string} _ A WKT geometry\n * @return {?Object} A GeoJSON geometry object\n */\nfunction parse (input) {\n  var parts = input.split(';');\n  var _ = parts.pop();\n  var srid = (parts.shift() || '').split('=').pop();\n\n  var i = 0;\n\n  function $ (re) {\n    var match = _.substring(i).match(re);\n    if (!match) return null;\n    else {\n      i += match[0].length;\n      return match[0];\n    }\n  }\n\n  function crs (obj) {\n    if (obj && srid.match(/\\d+/)) {\n      obj.crs = {\n        type: 'name',\n        properties: {\n          name: 'urn:ogc:def:crs:EPSG::' + srid\n        }\n      };\n    }\n\n    return obj;\n  }\n\n  function white () { $(/^\\s*/); }\n\n  function multicoords () {\n    white();\n    var depth = 0;\n    var rings = [];\n    var stack = [rings];\n    var pointer = rings;\n    var elem;\n\n    while (elem =\n           $(/^(\\()/) ||\n             $(/^(\\))/) ||\n               $(/^(\\,)/) ||\n                 $(tuples)) {\n      if (elem === '(') {\n        stack.push(pointer);\n        pointer = [];\n        stack[stack.length - 1].push(pointer);\n        depth++;\n      } else if (elem === ')') {\n        // For the case: Polygon(), ...\n        if (pointer.length === 0) return null;\n\n        pointer = stack.pop();\n        // the stack was empty, input was malformed\n        if (!pointer) return null;\n        depth--;\n        if (depth === 0) break;\n      } else if (elem === ',') {\n        pointer = [];\n        stack[stack.length - 1].push(pointer);\n      } else if (!elem.split(/\\s/g).some(isNaN)) {\n        Array.prototype.push.apply(pointer, elem.split(/\\s/g).map(parseFloat));\n      } else {\n        return null;\n      }\n      white();\n    }\n\n    if (depth !== 0) return null;\n\n    return rings;\n  }\n\n  function coords () {\n    var list = [];\n    var item;\n    var pt;\n    while (pt =\n           $(tuples) ||\n             $(/^(\\,)/)) {\n      if (pt === ',') {\n        list.push(item);\n        item = [];\n      } else if (!pt.split(/\\s/g).some(isNaN)) {\n        if (!item) item = [];\n        Array.prototype.push.apply(item, pt.split(/\\s/g).map(parseFloat));\n      }\n      white();\n    }\n\n    if (item) list.push(item);\n    else return null;\n\n    return list.length ? list : null;\n  }\n\n  function point () {\n    if (!$(/^(point)/i)) return null;\n    white();\n    if (!$(/^(\\()/)) return null;\n    var c = coords();\n    if (!c) return null;\n    white();\n    if (!$(/^(\\))/)) return null;\n    return {\n      type: 'Point',\n      coordinates: c[0]\n    };\n  }\n\n  function multipoint () {\n    if (!$(/^(multipoint)/i)) return null;\n    white();\n    var newCoordsFormat = _\n      .substring(_.indexOf('(') + 1, _.length - 1)\n      .replace(/\\(/g, '')\n      .replace(/\\)/g, '');\n    _ = 'MULTIPOINT (' + newCoordsFormat + ')';\n    var c = multicoords();\n    if (!c) return null;\n    white();\n    return {\n      type: 'MultiPoint',\n      coordinates: c\n    };\n  }\n\n  function multilinestring () {\n    if (!$(/^(multilinestring)/i)) return null;\n    white();\n    var c = multicoords();\n    if (!c) return null;\n    white();\n    return {\n      type: 'MultiLineString',\n      coordinates: c\n    };\n  }\n\n  function linestring () {\n    if (!$(/^(linestring)/i)) return null;\n    white();\n    if (!$(/^(\\()/)) return null;\n    var c = coords();\n    if (!c) return null;\n    if (!$(/^(\\))/)) return null;\n    return {\n      type: 'LineString',\n      coordinates: c\n    };\n  }\n\n  function polygon () {\n    if (!$(/^(polygon)/i)) return null;\n    white();\n    var c = multicoords();\n    if (!c) return null;\n    return {\n      type: 'Polygon',\n      coordinates: c\n    };\n  }\n\n  function multipolygon () {\n    if (!$(/^(multipolygon)/i)) return null;\n    white();\n    var c = multicoords();\n    if (!c) return null;\n    return {\n      type: 'MultiPolygon',\n      coordinates: c\n    };\n  }\n\n  function geometrycollection () {\n    var geometries = [];\n    var geometry;\n\n    if (!$(/^(geometrycollection)/i)) return null;\n    white();\n\n    if (!$(/^(\\()/)) return null;\n    while (geometry = root()) {\n      geometries.push(geometry);\n      white();\n      $(/^(\\,)/);\n      white();\n    }\n    if (!$(/^(\\))/)) return null;\n\n    return {\n      type: 'GeometryCollection',\n      geometries: geometries\n    };\n  }\n\n  function root () {\n    return point() ||\n      linestring() ||\n      polygon() ||\n      multipoint() ||\n      multilinestring() ||\n      multipolygon() ||\n      geometrycollection();\n  }\n\n  return crs(root());\n}\n\n/**\n * Stringifies a GeoJSON object into WKT\n */\nfunction stringify (gj) {\n  if (gj.type === 'Feature') {\n    gj = gj.geometry;\n  }\n\n  function pairWKT (c) {\n    return c.join(' ');\n  }\n\n  function ringWKT (r) {\n    return r.map(pairWKT).join(', ');\n  }\n\n  function ringsWKT (r) {\n    return r.map(ringWKT).map(wrapParens).join(', ');\n  }\n\n  function multiRingsWKT (r) {\n    return r.map(ringsWKT).map(wrapParens).join(', ');\n  }\n\n  function wrapParens (s) { return '(' + s + ')'; }\n\n  switch (gj.type) {\n    case 'Point':\n      return 'POINT (' + pairWKT(gj.coordinates) + ')';\n    case 'LineString':\n      return 'LINESTRING (' + ringWKT(gj.coordinates) + ')';\n    case 'Polygon':\n      return 'POLYGON (' + ringsWKT(gj.coordinates) + ')';\n    case 'MultiPoint':\n      return 'MULTIPOINT (' + ringWKT(gj.coordinates) + ')';\n    case 'MultiPolygon':\n      return 'MULTIPOLYGON (' + multiRingsWKT(gj.coordinates) + ')';\n    case 'MultiLineString':\n      return 'MULTILINESTRING (' + ringsWKT(gj.coordinates) + ')';\n    case 'GeometryCollection':\n      return 'GEOMETRYCOLLECTION (' + gj.geometries.map(stringify).join(', ') + ')';\n    default:\n      throw new Error('stringify requires a valid GeoJSON Feature or geometry object as input');\n  }\n}\n","'use strict';\n\n/**\n * Dependencies\n */\n\n// True if Object\nfunction _isObject(value) {\n  return typeof(value) === 'object' && value !== null;\n}\n\n// True if Array\nfunction _isArray(value) {\n  return Array.isArray(value);\n}\n\n/// True if type is string\nfunction _isString(value) {\n  return typeof(value) === 'string';\n}\n\n// True if undefined\nfunction _isUndefined(value) {\n  return typeof(value) === 'undefined';\n}\n\n// True if Number\nfunction _isNumber(value) {\n  return typeof(value) === 'number';\n}\n\n// True if Boolean\nfunction _isBoolean(value) {\n  return typeof(value) === 'boolean';\n}\n\n// True if Date object\nfunction _isDate(value) {\n  return value instanceof Date;\n}\n\nfunction DataObjectParser($data){\n  this._data = $data || {};\n}\n\n/**\n * Given a dot deliminated string set will create an object\n * based on the structure of the string with the desired value\n *\n * @param {[String} $path  path indicating where value should be placed\n * @param {Mixed} $value   the value desired to be set at the location determined by path\n */\nDataObjectParser.prototype.set = function($path, $value) {\n  if(!$path || $path==='') return void 0;\n\n  var _self = this;\n  var re = /[\\$\\w-|]+|\\[\\]|([^\\[[\\w]\\]]|[\"'](.*?)['\"])/g;\n  // parse $path on dots, and brackets\n  var pathList = $path.match(re);\n  var parent = this._data;\n  var parentKey;\n  var grandParent = null;\n  var grandParentKey = null;\n\n  var addObj = function($obj, $key, $data) {\n    if($key === '[]') {\n      $obj.push($data);\n    } else {\n      $obj[$key] = $data;\n    }\n  };\n\n  while(pathList.length > 0) {\n    parentKey = pathList.shift().replace(/[\"']/g, '');\n\n    // Number, treat it as an array\n    if (!isNaN(+parentKey) || parentKey === \"[]\") {\n      if(!_isArray(parent)  /* prevent overwritting */ ) {\n        parent = [];\n        addObj(grandParent, grandParentKey, parent);\n      }\n\n    // String, treat it as a key\n    } else if (_isString(parentKey)) {\n      if(!_isObject(parent)) {\n        parent = {};\n        addObj(grandParent, grandParentKey, parent);\n      }\n    }\n    // Next\n    grandParent = parent;\n    grandParentKey = parentKey;\n    parent = parent[parentKey];\n  }\n\n  addObj(grandParent, grandParentKey, $value);\n  return this;\n};\n\n/**\n * Returns the value defined by the path passed in\n *\n * @param  {String} $path string leading to a desired value\n * @return {Mixed}        a value in an object\n */\nDataObjectParser.prototype.get = function($path) {\n  var data = this._data;\n  var regex = /[\\$\\w-|]+|\\[\\]|([^\\[[\\w]\\]]|[\"'](.*?)['\"])/g;\n  //check if $path is truthy\n  if (!$path) return void 0;\n  //parse $path on dots and brackets\n  var paths = $path.match(regex);\n  //step through data object until all keys in path have been processed\n  while (typeof(data) != 'undefined' && paths.length > 0) {\n    if(data.propertyIsEnumerable(paths[0].replace(/\"/g, ''))){\n      data = data[paths.shift().replace(/\"/g, '')];\n    }\n    else{\n      return undefined;\n    }\n  }\n  return data;\n};\n\nDataObjectParser.prototype.data = function($data) {\n  if(!_isUndefined($data)) {\n    this._data = $data;\n    return this;\n  }\n  return this._data;\n};\n\n/**\n * \"Transposes\" data; receives flat data and returns structured\n *\n * @param  {Object}           $data Structured object\n * @return {DataObjectParser} An instance of a DataObjectParser\n */\nDataObjectParser.transpose = function($flat) {\n  var parser = (new DataObjectParser());\n  for(var n in $flat) {\n    if($flat[n]!==undefined) {\n      parser.set(n, $flat[n]);\n    }\n  }\n  return parser;\n};\n\n/**\n * \"Untransposes\" data object; opposite of transpose\n *\n * @param  {Mixed}  $structured A Object or a DataObjectParser\n * @return {Object}             Flat object\n */\nDataObjectParser.untranspose = function($structured) {\n  //check to see if $structured is passed\n  $structured = $structured || {};\n  //handles if an object or a dataObjectParser is passed in\n  var structuredData = $structured._data || $structured;\n\n  var traverse = function($data, $isIndex) {\n    var result = [];\n\n    var createMapHandler = function($name, $data) {\n      return function($item, $i) {\n        var name = $name;\n        //check if $name is a key of form \"hello.world\"\n        if((/\\./).test($name)) name = '[\"'+name+'\"]';\n        //add name to $item.key\n        $item.key.unshift(name+\".\");\n        //return $item.key with updated key\n        return {\n          key: $item.key,\n          data: $item.data\n        };\n      };\n    };\n\n    for(var name in $data) {\n      var modifiedName;\n      // check if current name is an arrays index\n      if($isIndex) modifiedName = \"[\"+name+\"]\";\n      else modifiedName = name;\n\n      // check if current name is linked to a value\n      if(_isString($data[name]) || _isNumber($data[name]) || $data[name]===null || _isBoolean($data[name]) || _isDate($data[name])) {\n        if((/\\./).test(name)) modifiedName = '[\"'+name+'\"]';\n        result.push({\n          key: [modifiedName],\n          data: $data[name]\n        });\n      }\n\n      // check if current name is an array\n      else if(_isArray($data[name])) {\n        // tell traverse next name is an array's index\n        var subArray = traverse($data[name],true);\n        result = result.concat(subArray.map(createMapHandler(modifiedName, $data)));\n      }\n\n      //check if current name is an object\n      else if(_isObject($data[name])) {\n        var subObject = traverse($data[name],false);\n        result = result.concat(subObject.map(createMapHandler(modifiedName, $data)));\n      }\n    }\n    return result;\n  };\n\n  var flatArray = traverse(structuredData,false);\n  var flatObj = {};\n\n  flatArray.every(function($item) {\n    //check for any dots followed by brackets and remove the dots\n    for(var i = 0;i<$item.key.length-1;i++){\n      var name = $item.key[i];\n      var nextName = $item.key[i+1];\n      if((/^\\[/).test(nextName)){\n        $item.key[i] = name.replace(/\\.$/,\"\");\n      }\n    }\n    //join all the keys in flatArray to form one key\n    flatObj[$item.key.join(\"\")] = $item.data;\n    return true;\n  });\n  return flatObj;\n};\n\nmodule.exports = DataObjectParser;\n","'use strict';\n\nvar dsv = require('d3-dsv'),\n    sexagesimal = require('sexagesimal');\n\nvar latRegex = /(Lat)(itude)?/gi,\n    lonRegex = /(L)(on|ng)(gitude)?/i;\n\nfunction guessHeader(row, regexp) {\n    var name, match, score;\n    for (var f in row) {\n        match = f.match(regexp);\n        if (match && (!name || match[0].length / f.length > score)) {\n            score = match[0].length / f.length;\n            name = f;\n        }\n    }\n    return name;\n}\n\nfunction guessLatHeader(row) { return guessHeader(row, latRegex); }\nfunction guessLonHeader(row) { return guessHeader(row, lonRegex); }\n\nfunction isLat(f) { return !!f.match(latRegex); }\nfunction isLon(f) { return !!f.match(lonRegex); }\n\nfunction keyCount(o) {\n    return (typeof o == 'object') ? Object.keys(o).length : 0;\n}\n\nfunction autoDelimiter(x) {\n    var delimiters = [',', ';', '\\t', '|'];\n    var results = [];\n\n    delimiters.forEach(function (delimiter) {\n        var res = dsv.dsvFormat(delimiter).parse(x);\n        if (res.length >= 1) {\n            var count = keyCount(res[0]);\n            for (var i = 0; i < res.length; i++) {\n                if (keyCount(res[i]) !== count) return;\n            }\n            results.push({\n                delimiter: delimiter,\n                arity: Object.keys(res[0]).length,\n            });\n        }\n    });\n\n    if (results.length) {\n        return results.sort(function (a, b) {\n            return b.arity - a.arity;\n        })[0].delimiter;\n    } else {\n        return null;\n    }\n}\n\n/**\n * Silly stopgap for dsv to d3-dsv upgrade\n *\n * @param {Array} x dsv output\n * @returns {Array} array without columns member\n */\nfunction deleteColumns(x) {\n    delete x.columns;\n    return x;\n}\n\nfunction auto(x) {\n    var delimiter = autoDelimiter(x);\n    if (!delimiter) return null;\n    return deleteColumns(dsv.dsvFormat(delimiter).parse(x));\n}\n\nfunction csv2geojson(x, options, callback) {\n\n    if (!callback) {\n        callback = options;\n        options = {};\n    }\n\n    options.delimiter = options.delimiter || ',';\n\n    var latfield = options.latfield || '',\n        lonfield = options.lonfield || '',\n        crs = options.crs || '';\n\n    var features = [],\n        featurecollection = {type: 'FeatureCollection', features: features};\n\n    if (crs !== '') {\n        featurecollection.crs = {type: 'name', properties: {name: crs}};\n    }\n\n    if (options.delimiter === 'auto' && typeof x == 'string') {\n        options.delimiter = autoDelimiter(x);\n        if (!options.delimiter) {\n            callback({\n                type: 'Error',\n                message: 'Could not autodetect delimiter'\n            });\n            return;\n        }\n    }\n\n    var parsed = (typeof x == 'string') ?\n        dsv.dsvFormat(options.delimiter).parse(x) : x;\n\n    if (!parsed.length) {\n        callback(null, featurecollection);\n        return;\n    }\n\n    var errors = [];\n    var i;\n\n\n    if (!latfield) latfield = guessLatHeader(parsed[0]);\n    if (!lonfield) lonfield = guessLonHeader(parsed[0]);\n    var noGeometry = (!latfield || !lonfield);\n\n    if (noGeometry) {\n        for (i = 0; i < parsed.length; i++) {\n            features.push({\n                type: 'Feature',\n                properties: parsed[i],\n                geometry: null\n            });\n        }\n        callback(errors.length ? errors : null, featurecollection);\n        return;\n    }\n\n    for (i = 0; i < parsed.length; i++) {\n        if (parsed[i][lonfield] !== undefined &&\n            parsed[i][latfield] !== undefined) {\n\n            var lonk = parsed[i][lonfield],\n                latk = parsed[i][latfield],\n                lonf, latf,\n                a;\n\n            a = sexagesimal(lonk, 'EW');\n            if (a) lonk = a;\n            a = sexagesimal(latk, 'NS');\n            if (a) latk = a;\n\n            lonf = parseFloat(lonk);\n            latf = parseFloat(latk);\n\n            if (isNaN(lonf) ||\n                isNaN(latf)) {\n                errors.push({\n                    message: 'A row contained an invalid value for latitude or longitude',\n                    row: parsed[i],\n                    index: i\n                });\n            } else {\n                if (!options.includeLatLon) {\n                    delete parsed[i][lonfield];\n                    delete parsed[i][latfield];\n                }\n\n                features.push({\n                    type: 'Feature',\n                    properties: parsed[i],\n                    geometry: {\n                        type: 'Point',\n                        coordinates: [\n                            parseFloat(lonf),\n                            parseFloat(latf)\n                        ]\n                    }\n                });\n            }\n        }\n    }\n\n    callback(errors.length ? errors : null, featurecollection);\n}\n\nfunction toLine(gj) {\n    var features = gj.features;\n    var line = {\n        type: 'Feature',\n        geometry: {\n            type: 'LineString',\n            coordinates: []\n        }\n    };\n    for (var i = 0; i < features.length; i++) {\n        line.geometry.coordinates.push(features[i].geometry.coordinates);\n    }\n    line.properties = features.reduce(function (aggregatedProperties, newFeature) {\n        for (var key in newFeature.properties) {\n            if (!aggregatedProperties[key]) {\n                aggregatedProperties[key] = [];\n            }\n            aggregatedProperties[key].push(newFeature.properties[key]);\n        }\n        return aggregatedProperties;\n    }, {});\n    return {\n        type: 'FeatureCollection',\n        features: [line]\n    };\n}\n\nfunction toPolygon(gj) {\n    var features = gj.features;\n    var poly = {\n        type: 'Feature',\n        geometry: {\n            type: 'Polygon',\n            coordinates: [[]]\n        }\n    };\n    for (var i = 0; i < features.length; i++) {\n        poly.geometry.coordinates[0].push(features[i].geometry.coordinates);\n    }\n    poly.properties = features.reduce(function (aggregatedProperties, newFeature) {\n        for (var key in newFeature.properties) {\n            if (!aggregatedProperties[key]) {\n                aggregatedProperties[key] = [];\n            }\n            aggregatedProperties[key].push(newFeature.properties[key]);\n        }\n        return aggregatedProperties;\n    }, {});\n    return {\n        type: 'FeatureCollection',\n        features: [poly]\n    };\n}\n\nmodule.exports = {\n    isLon: isLon,\n    isLat: isLat,\n    guessLatHeader: guessLatHeader,\n    guessLonHeader: guessLonHeader,\n    csv: dsv.csvParse,\n    tsv: dsv.tsvParse,\n    dsv: dsv,\n    auto: auto,\n    csv2geojson: csv2geojson,\n    toLine: toLine,\n    toPolygon: toPolygon\n};\n","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","export function escapeHTML(value) {\n  return value\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n}\n","import { escapeHTML } from \"./lib/utils.js\";\nimport hljs from \"highlight.js/lib/core.js\";\n\nfunction hasValueOrEmptyAttribute(value) {\n  return Boolean(value || value === \"\");\n}\n\nconst Component = {\n  props: [\"language\", \"code\", \"autodetect\"],\n  data: function() {\n    return {\n      detectedLanguage: \"\",\n      unknownLanguage: false\n    };\n  },\n  computed: {\n    className() {\n      if (this.unknownLanguage) return \"\";\n\n      return \"hljs \" + this.detectedLanguage;\n    },\n    highlighted() {\n      // no idea what language to use, return raw code\n      if (!this.autoDetect && !hljs.getLanguage(this.language)) {\n        console.warn(`The language \"${this.language}\" you specified could not be found.`);\n        this.unknownLanguage = true;\n        return escapeHTML(this.code);\n      }\n\n      let result = {};\n      if (this.autoDetect) {\n        result = hljs.highlightAuto(this.code);\n        this.detectedLanguage = result.language;\n      } else {\n        result = hljs.highlight(this.language, this.code, this.ignoreIllegals);\n        this.detectedLanguage = this.language;\n      }\n      return result.value;\n    },\n    autoDetect() {\n      return !this.language || hasValueOrEmptyAttribute(this.autodetect);\n    },\n    ignoreIllegals() {\n      return true;\n    }\n  },\n  // this avoids needing to use a whole Vue compilation pipeline just\n  // to build Highlight.js\n  render(createElement) {\n    return createElement(\"pre\", {}, [\n      createElement(\"code\", {\n        class: this.className,\n        domProps: { innerHTML: this.highlighted }\n      })\n    ]);\n  }\n  // template: `<pre><code :class=\"className\" v-html=\"highlighted\"></code></pre>`\n};\n\nexport default {\n  install(Vue) {\n    Vue.component('highlightjs', Component);\n  },\n  component: Component\n};\n\n","module.exports = element;\nmodule.exports.pair = pair;\nmodule.exports.format = format;\nmodule.exports.formatPair = formatPair;\nmodule.exports.coordToDMS = coordToDMS;\n\nfunction element(x, dims) {\n  return search(x, dims).val;\n}\n\nfunction formatPair(x) {\n  return format(x.lat, 'lat') + ' ' + format(x.lon, 'lon');\n}\n\n// Is 0 North or South?\nfunction format(x, dim) {\n  var dms = coordToDMS(x,dim);\n  return dms.whole + '° ' +\n    (dms.minutes ? dms.minutes + '\\' ' : '') +\n    (dms.seconds ? dms.seconds + '\" ' : '') + dms.dir;\n}\n\nfunction coordToDMS(x,dim) {\n  var dirs = {\n    lat: ['N', 'S'],\n    lon: ['E', 'W']\n  }[dim] || '',\n  dir = dirs[x >= 0 ? 0 : 1],\n    abs = Math.abs(x),\n    whole = Math.floor(abs),\n    fraction = abs - whole,\n    fractionMinutes = fraction * 60,\n    minutes = Math.floor(fractionMinutes),\n    seconds = Math.floor((fractionMinutes - minutes) * 60);\n\n  return {\n    whole: whole,\n    minutes: minutes,\n    seconds: seconds,\n    dir: dir\n  };\n}\n\nfunction search(x, dims, r) {\n  if (!dims) dims = 'NSEW';\n  if (typeof x !== 'string') return { val: null, regex: r };\n  r = r || /[\\s\\,]*([\\-|\\—|\\―]?[0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|\"|”|″) *)?([NSEW])?/gi;\n  var m = r.exec(x);\n  if (!m) return { val: null, regex: r };\n  else if (m[4] && dims.indexOf(m[4]) === -1) return { val: null, regex: r };\n  else return {\n    val: (((m[1]) ? parseFloat(m[1]) : 0) +\n          ((m[2] ? parseFloat(m[2]) / 60 : 0)) +\n          ((m[3] ? parseFloat(m[3]) / 3600 : 0))) *\n          ((m[4] && m[4] === 'S' || m[4] === 'W') ? -1 : 1),\n    regex: r,\n    raw: m[0],\n    dim: m[4]\n  };\n}\n\nfunction pair(x, dims) {\n  x = x.trim();\n  var one = search(x, dims);\n  if (one.val === null) return null;\n  var two = search(x, dims, one.regex);\n  if (two.val === null) return null;\n  // null if one/two are not contiguous.\n  if (one.raw + two.raw !== x) return null;\n  if (one.dim) {\n    return swapdim(one.val, two.val, one.dim);\n  } else {\n    return [one.val, two.val];\n  }\n}\n\nfunction swapdim(a, b, dim) {\n  if (dim === 'N' || dim === 'S') return [a, b];\n  if (dim === 'W' || dim === 'E') return [b, a];\n}\n","const IDENT_RE = '[A-Za-z$_][0-9A-Za-z$_]*';\nconst KEYWORDS = [\n  \"as\", // for exports\n  \"in\",\n  \"of\",\n  \"if\",\n  \"for\",\n  \"while\",\n  \"finally\",\n  \"var\",\n  \"new\",\n  \"function\",\n  \"do\",\n  \"return\",\n  \"void\",\n  \"else\",\n  \"break\",\n  \"catch\",\n  \"instanceof\",\n  \"with\",\n  \"throw\",\n  \"case\",\n  \"default\",\n  \"try\",\n  \"switch\",\n  \"continue\",\n  \"typeof\",\n  \"delete\",\n  \"let\",\n  \"yield\",\n  \"const\",\n  \"class\",\n  // JS handles these with a special rule\n  // \"get\",\n  // \"set\",\n  \"debugger\",\n  \"async\",\n  \"await\",\n  \"static\",\n  \"import\",\n  \"from\",\n  \"export\",\n  \"extends\"\n];\nconst LITERALS = [\n  \"true\",\n  \"false\",\n  \"null\",\n  \"undefined\",\n  \"NaN\",\n  \"Infinity\"\n];\n\nconst TYPES = [\n  \"Intl\",\n  \"DataView\",\n  \"Number\",\n  \"Math\",\n  \"Date\",\n  \"String\",\n  \"RegExp\",\n  \"Object\",\n  \"Function\",\n  \"Boolean\",\n  \"Error\",\n  \"Symbol\",\n  \"Set\",\n  \"Map\",\n  \"WeakSet\",\n  \"WeakMap\",\n  \"Proxy\",\n  \"Reflect\",\n  \"JSON\",\n  \"Promise\",\n  \"Float64Array\",\n  \"Int16Array\",\n  \"Int32Array\",\n  \"Int8Array\",\n  \"Uint16Array\",\n  \"Uint32Array\",\n  \"Float32Array\",\n  \"Array\",\n  \"Uint8Array\",\n  \"Uint8ClampedArray\",\n  \"ArrayBuffer\",\n  \"BigInt64Array\",\n  \"BigUint64Array\",\n  \"BigInt\"\n];\n\nconst ERROR_TYPES = [\n  \"EvalError\",\n  \"InternalError\",\n  \"RangeError\",\n  \"ReferenceError\",\n  \"SyntaxError\",\n  \"TypeError\",\n  \"URIError\"\n];\n\nconst BUILT_IN_GLOBALS = [\n  \"setInterval\",\n  \"setTimeout\",\n  \"clearInterval\",\n  \"clearTimeout\",\n\n  \"require\",\n  \"exports\",\n\n  \"eval\",\n  \"isFinite\",\n  \"isNaN\",\n  \"parseFloat\",\n  \"parseInt\",\n  \"decodeURI\",\n  \"decodeURIComponent\",\n  \"encodeURI\",\n  \"encodeURIComponent\",\n  \"escape\",\n  \"unescape\"\n];\n\nconst BUILT_IN_VARIABLES = [\n  \"arguments\",\n  \"this\",\n  \"super\",\n  \"console\",\n  \"window\",\n  \"document\",\n  \"localStorage\",\n  \"module\",\n  \"global\" // Node.js\n];\n\nconst BUILT_INS = [].concat(\n  BUILT_IN_GLOBALS,\n  BUILT_IN_VARIABLES,\n  TYPES,\n  ERROR_TYPES\n);\n\n/**\n * @param {string} value\n * @returns {RegExp}\n * */\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction source(re) {\n  if (!re) return null;\n  if (typeof re === \"string\") return re;\n\n  return re.source;\n}\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction lookahead(re) {\n  return concat('(?=', re, ')');\n}\n\n/**\n * @param {...(RegExp | string) } args\n * @returns {string}\n */\nfunction concat(...args) {\n  const joined = args.map((x) => source(x)).join(\"\");\n  return joined;\n}\n\n/*\nLanguage: JavaScript\nDescription: JavaScript (JS) is a lightweight, interpreted, or just-in-time compiled programming language with first-class functions.\nCategory: common, scripting\nWebsite: https://developer.mozilla.org/en-US/docs/Web/JavaScript\n*/\n\n/** @type LanguageFn */\nfunction javascript(hljs) {\n  /**\n   * Takes a string like \"<Booger\" and checks to see\n   * if we can find a matching \"</Booger\" later in the\n   * content.\n   * @param {RegExpMatchArray} match\n   * @param {{after:number}} param1\n   */\n  const hasClosingTag = (match, { after }) => {\n    const tag = \"</\" + match[0].slice(1);\n    const pos = match.input.indexOf(tag, after);\n    return pos !== -1;\n  };\n\n  const IDENT_RE$1 = IDENT_RE;\n  const FRAGMENT = {\n    begin: '<>',\n    end: '</>'\n  };\n  const XML_TAG = {\n    begin: /<[A-Za-z0-9\\\\._:-]+/,\n    end: /\\/[A-Za-z0-9\\\\._:-]+>|\\/>/,\n    /**\n     * @param {RegExpMatchArray} match\n     * @param {CallbackResponse} response\n     */\n    isTrulyOpeningTag: (match, response) => {\n      const afterMatchIndex = match[0].length + match.index;\n      const nextChar = match.input[afterMatchIndex];\n      // nested type?\n      // HTML should not include another raw `<` inside a tag\n      // But a type might: `<Array<Array<number>>`, etc.\n      if (nextChar === \"<\") {\n        response.ignoreMatch();\n        return;\n      }\n      // <something>\n      // This is now either a tag or a type.\n      if (nextChar === \">\") {\n        // if we cannot find a matching closing tag, then we\n        // will ignore it\n        if (!hasClosingTag(match, { after: afterMatchIndex })) {\n          response.ignoreMatch();\n        }\n      }\n    }\n  };\n  const KEYWORDS$1 = {\n    $pattern: IDENT_RE,\n    keyword: KEYWORDS,\n    literal: LITERALS,\n    built_in: BUILT_INS\n  };\n\n  // https://tc39.es/ecma262/#sec-literals-numeric-literals\n  const decimalDigits = '[0-9](_?[0-9])*';\n  const frac = `\\\\.(${decimalDigits})`;\n  // DecimalIntegerLiteral, including Annex B NonOctalDecimalIntegerLiteral\n  // https://tc39.es/ecma262/#sec-additional-syntax-numeric-literals\n  const decimalInteger = `0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*`;\n  const NUMBER = {\n    className: 'number',\n    variants: [\n      // DecimalLiteral\n      { begin: `(\\\\b(${decimalInteger})((${frac})|\\\\.)?|(${frac}))` +\n        `[eE][+-]?(${decimalDigits})\\\\b` },\n      { begin: `\\\\b(${decimalInteger})\\\\b((${frac})\\\\b|\\\\.)?|(${frac})\\\\b` },\n\n      // DecimalBigIntegerLiteral\n      { begin: `\\\\b(0|[1-9](_?[0-9])*)n\\\\b` },\n\n      // NonDecimalIntegerLiteral\n      { begin: \"\\\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\\\b\" },\n      { begin: \"\\\\b0[bB][0-1](_?[0-1])*n?\\\\b\" },\n      { begin: \"\\\\b0[oO][0-7](_?[0-7])*n?\\\\b\" },\n\n      // LegacyOctalIntegerLiteral (does not include underscore separators)\n      // https://tc39.es/ecma262/#sec-additional-syntax-numeric-literals\n      { begin: \"\\\\b0[0-7]+n?\\\\b\" },\n    ],\n    relevance: 0\n  };\n\n  const SUBST = {\n    className: 'subst',\n    begin: '\\\\$\\\\{',\n    end: '\\\\}',\n    keywords: KEYWORDS$1,\n    contains: [] // defined later\n  };\n  const HTML_TEMPLATE = {\n    begin: 'html`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'xml'\n    }\n  };\n  const CSS_TEMPLATE = {\n    begin: 'css`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'css'\n    }\n  };\n  const TEMPLATE_STRING = {\n    className: 'string',\n    begin: '`',\n    end: '`',\n    contains: [\n      hljs.BACKSLASH_ESCAPE,\n      SUBST\n    ]\n  };\n  const JSDOC_COMMENT = hljs.COMMENT(\n    /\\/\\*\\*(?!\\/)/,\n    '\\\\*/',\n    {\n      relevance: 0,\n      contains: [\n        {\n          className: 'doctag',\n          begin: '@[A-Za-z]+',\n          contains: [\n            {\n              className: 'type',\n              begin: '\\\\{',\n              end: '\\\\}',\n              relevance: 0\n            },\n            {\n              className: 'variable',\n              begin: IDENT_RE$1 + '(?=\\\\s*(-)|$)',\n              endsParent: true,\n              relevance: 0\n            },\n            // eat spaces (not newlines) so we can find\n            // types or variables\n            {\n              begin: /(?=[^\\n])\\s/,\n              relevance: 0\n            }\n          ]\n        }\n      ]\n    }\n  );\n  const COMMENT = {\n    className: \"comment\",\n    variants: [\n      JSDOC_COMMENT,\n      hljs.C_BLOCK_COMMENT_MODE,\n      hljs.C_LINE_COMMENT_MODE\n    ]\n  };\n  const SUBST_INTERNALS = [\n    hljs.APOS_STRING_MODE,\n    hljs.QUOTE_STRING_MODE,\n    HTML_TEMPLATE,\n    CSS_TEMPLATE,\n    TEMPLATE_STRING,\n    NUMBER,\n    hljs.REGEXP_MODE\n  ];\n  SUBST.contains = SUBST_INTERNALS\n    .concat({\n      // we need to pair up {} inside our subst to prevent\n      // it from ending too early by matching another }\n      begin: /\\{/,\n      end: /\\}/,\n      keywords: KEYWORDS$1,\n      contains: [\n        \"self\"\n      ].concat(SUBST_INTERNALS)\n    });\n  const SUBST_AND_COMMENTS = [].concat(COMMENT, SUBST.contains);\n  const PARAMS_CONTAINS = SUBST_AND_COMMENTS.concat([\n    // eat recursive parens in sub expressions\n    {\n      begin: /\\(/,\n      end: /\\)/,\n      keywords: KEYWORDS$1,\n      contains: [\"self\"].concat(SUBST_AND_COMMENTS)\n    }\n  ]);\n  const PARAMS = {\n    className: 'params',\n    begin: /\\(/,\n    end: /\\)/,\n    excludeBegin: true,\n    excludeEnd: true,\n    keywords: KEYWORDS$1,\n    contains: PARAMS_CONTAINS\n  };\n\n  return {\n    name: 'Javascript',\n    aliases: ['js', 'jsx', 'mjs', 'cjs'],\n    keywords: KEYWORDS$1,\n    // this will be extended by TypeScript\n    exports: { PARAMS_CONTAINS },\n    illegal: /#(?![$_A-z])/,\n    contains: [\n      hljs.SHEBANG({\n        label: \"shebang\",\n        binary: \"node\",\n        relevance: 5\n      }),\n      {\n        label: \"use_strict\",\n        className: 'meta',\n        relevance: 10,\n        begin: /^\\s*['\"]use (strict|asm)['\"]/\n      },\n      hljs.APOS_STRING_MODE,\n      hljs.QUOTE_STRING_MODE,\n      HTML_TEMPLATE,\n      CSS_TEMPLATE,\n      TEMPLATE_STRING,\n      COMMENT,\n      NUMBER,\n      { // object attr container\n        begin: concat(/[{,\\n]\\s*/,\n          // we need to look ahead to make sure that we actually have an\n          // attribute coming up so we don't steal a comma from a potential\n          // \"value\" container\n          //\n          // NOTE: this might not work how you think.  We don't actually always\n          // enter this mode and stay.  Instead it might merely match `,\n          // <comments up next>` and then immediately end after the , because it\n          // fails to find any actual attrs. But this still does the job because\n          // it prevents the value contain rule from grabbing this instead and\n          // prevening this rule from firing when we actually DO have keys.\n          lookahead(concat(\n            // we also need to allow for multiple possible comments inbetween\n            // the first key:value pairing\n            /(((\\/\\/.*$)|(\\/\\*(\\*[^/]|[^*])*\\*\\/))\\s*)*/,\n            IDENT_RE$1 + '\\\\s*:'))),\n        relevance: 0,\n        contains: [\n          {\n            className: 'attr',\n            begin: IDENT_RE$1 + lookahead('\\\\s*:'),\n            relevance: 0\n          }\n        ]\n      },\n      { // \"value\" container\n        begin: '(' + hljs.RE_STARTERS_RE + '|\\\\b(case|return|throw)\\\\b)\\\\s*',\n        keywords: 'return throw case',\n        contains: [\n          COMMENT,\n          hljs.REGEXP_MODE,\n          {\n            className: 'function',\n            // we have to count the parens to make sure we actually have the\n            // correct bounding ( ) before the =>.  There could be any number of\n            // sub-expressions inside also surrounded by parens.\n            begin: '(\\\\(' +\n            '[^()]*(\\\\(' +\n            '[^()]*(\\\\(' +\n            '[^()]*' +\n            '\\\\)[^()]*)*' +\n            '\\\\)[^()]*)*' +\n            '\\\\)|' + hljs.UNDERSCORE_IDENT_RE + ')\\\\s*=>',\n            returnBegin: true,\n            end: '\\\\s*=>',\n            contains: [\n              {\n                className: 'params',\n                variants: [\n                  {\n                    begin: hljs.UNDERSCORE_IDENT_RE,\n                    relevance: 0\n                  },\n                  {\n                    className: null,\n                    begin: /\\(\\s*\\)/,\n                    skip: true\n                  },\n                  {\n                    begin: /\\(/,\n                    end: /\\)/,\n                    excludeBegin: true,\n                    excludeEnd: true,\n                    keywords: KEYWORDS$1,\n                    contains: PARAMS_CONTAINS\n                  }\n                ]\n              }\n            ]\n          },\n          { // could be a comma delimited list of params to a function call\n            begin: /,/, relevance: 0\n          },\n          {\n            className: '',\n            begin: /\\s/,\n            end: /\\s*/,\n            skip: true\n          },\n          { // JSX\n            variants: [\n              { begin: FRAGMENT.begin, end: FRAGMENT.end },\n              {\n                begin: XML_TAG.begin,\n                // we carefully check the opening tag to see if it truly\n                // is a tag and not a false positive\n                'on:begin': XML_TAG.isTrulyOpeningTag,\n                end: XML_TAG.end\n              }\n            ],\n            subLanguage: 'xml',\n            contains: [\n              {\n                begin: XML_TAG.begin,\n                end: XML_TAG.end,\n                skip: true,\n                contains: ['self']\n              }\n            ]\n          }\n        ],\n        relevance: 0\n      },\n      {\n        className: 'function',\n        beginKeywords: 'function',\n        end: /[{;]/,\n        excludeEnd: true,\n        keywords: KEYWORDS$1,\n        contains: [\n          'self',\n          hljs.inherit(hljs.TITLE_MODE, { begin: IDENT_RE$1 }),\n          PARAMS\n        ],\n        illegal: /%/\n      },\n      {\n        // prevent this from getting swallowed up by function\n        // since they appear \"function like\"\n        beginKeywords: \"while if switch catch for\"\n      },\n      {\n        className: 'function',\n        // we have to count the parens to make sure we actually have the correct\n        // bounding ( ).  There could be any number of sub-expressions inside\n        // also surrounded by parens.\n        begin: hljs.UNDERSCORE_IDENT_RE +\n          '\\\\(' + // first parens\n          '[^()]*(\\\\(' +\n            '[^()]*(\\\\(' +\n              '[^()]*' +\n            '\\\\)[^()]*)*' +\n          '\\\\)[^()]*)*' +\n          '\\\\)\\\\s*\\\\{', // end parens\n        returnBegin:true,\n        contains: [\n          PARAMS,\n          hljs.inherit(hljs.TITLE_MODE, { begin: IDENT_RE$1 }),\n        ]\n      },\n      // hack: prevents detection of keywords in some circumstances\n      // .keyword()\n      // $keyword = x\n      {\n        variants: [\n          { begin: '\\\\.' + IDENT_RE$1 },\n          { begin: '\\\\$' + IDENT_RE$1 }\n        ],\n        relevance: 0\n      },\n      { // ES6 class\n        className: 'class',\n        beginKeywords: 'class',\n        end: /[{;=]/,\n        excludeEnd: true,\n        illegal: /[:\"[\\]]/,\n        contains: [\n          { beginKeywords: 'extends' },\n          hljs.UNDERSCORE_TITLE_MODE\n        ]\n      },\n      {\n        begin: /\\b(?=constructor)/,\n        end: /[{;]/,\n        excludeEnd: true,\n        contains: [\n          hljs.inherit(hljs.TITLE_MODE, { begin: IDENT_RE$1 }),\n          'self',\n          PARAMS\n        ]\n      },\n      {\n        begin: '(get|set)\\\\s+(?=' + IDENT_RE$1 + '\\\\()',\n        end: /\\{/,\n        keywords: \"get set\",\n        contains: [\n          hljs.inherit(hljs.TITLE_MODE, { begin: IDENT_RE$1 }),\n          { begin: /\\(\\)/ }, // eat to avoid empty params\n          PARAMS\n        ]\n      },\n      {\n        begin: /\\$[(.]/ // relevance booster for a pattern common to JS libs: `$(something)` and `$.something`\n      }\n    ]\n  };\n}\n\nmodule.exports = javascript;\n","/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window === \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScrolls = [],\n\t\tscrolling = false,\n\n\t\tawaitingDragStarted = false,\n\t\tignoreNextClick = false,\n\t\tsortables = [],\n\n\t\tpointerElemChangedInterval,\n\t\tlastPointerElemX,\n\t\tlastPointerElemY,\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\n\t\tlastTarget,\n\t\tlastDirection,\n\t\tpastFirstInvertThresh = false,\n\t\tisCircumstantialInvert = false,\n\t\tlastMode, // 'swap' or 'insert'\n\n\t\ttargetMoveDistance,\n\n\t\t// For positioning ghost absolutely\n\t\tghostRelativeParent,\n\t\tghostRelativeParentInitialScroll = [], // (left, top)\n\n\n\t\tforRepaintDummy,\n\t\trealDragElRect, // dragEl rect after current animation\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\t\tsetTimeout = win.setTimeout,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = {\n\t\t\tcapture: false,\n\t\t\tpassive: false\n\t\t},\n\n\t\tIE11OrLess = !!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\\.|msie|iemobile)/i),\n\t\tEdge = !!navigator.userAgent.match(/Edge/i),\n\t\tFireFox = !!navigator.userAgent.match(/firefox/i),\n\t\tSafari = !!(navigator.userAgent.match(/safari/i) && !navigator.userAgent.match(/chrome/i) && !navigator.userAgent.match(/android/i)),\n\t\tIOS = !!(navigator.userAgent.match(/iP(ad|od|hone)/i)),\n\n\t\tPositionGhostAbsolutely = IOS,\n\n\t\tCSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n\n\t\t// This will not pass for IE9, because IE9 DnD only works on anchors\n\t\tsupportDraggable = ('draggable' in document.createElement('div')),\n\n\t\tsupportCssPointerEvents = (function() {\n\t\t\t// false when <= IE11\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar el = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\t\t_alignedSilent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\t\tmax = Math.max,\n\n\t\tsavedInputChecked = [],\n\n\t\t_detectDirection = function(el, options) {\n\t\t\tvar elCSS = _css(el),\n\t\t\t\telWidth = parseInt(elCSS.width)\n\t\t\t\t\t- parseInt(elCSS.paddingLeft)\n\t\t\t\t\t- parseInt(elCSS.paddingRight)\n\t\t\t\t\t- parseInt(elCSS.borderLeftWidth)\n\t\t\t\t\t- parseInt(elCSS.borderRightWidth),\n\t\t\t\tchild1 = _getChild(el, 0, options),\n\t\t\t\tchild2 = _getChild(el, 1, options),\n\t\t\t\tfirstChildCSS = child1 && _css(child1),\n\t\t\t\tsecondChildCSS = child2 && _css(child2),\n\t\t\t\tfirstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + _getRect(child1).width,\n\t\t\t\tsecondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + _getRect(child2).width;\n\n\t\t\tif (elCSS.display === 'flex') {\n\t\t\t\treturn elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse'\n\t\t\t\t? 'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\tif (elCSS.display === 'grid') {\n\t\t\t\treturn elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\tif (child1 && firstChildCSS.float !== 'none') {\n\t\t\t\tvar touchingSideChild2 = firstChildCSS.float === 'left' ? 'left' : 'right';\n\n\t\t\t\treturn child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ?\n\t\t\t\t\t'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\treturn (child1 &&\n\t\t\t\t(\n\t\t\t\t\tfirstChildCSS.display === 'block' ||\n\t\t\t\t\tfirstChildCSS.display === 'flex' ||\n\t\t\t\t\tfirstChildCSS.display === 'table' ||\n\t\t\t\t\tfirstChildCSS.display === 'grid' ||\n\t\t\t\t\tfirstChildWidth >= elWidth &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' ||\n\t\t\t\t\tchild2 &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' &&\n\t\t\t\t\tfirstChildWidth + secondChildWidth > elWidth\n\t\t\t\t) ?\n\t\t\t\t'vertical' : 'horizontal'\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n\t\t * @param  {Number} x      X position\n\t\t * @param  {Number} y      Y position\n\t\t * @return {HTMLElement}   Element of the first found nearest Sortable\n\t\t */\n\t\t_detectNearestEmptySortable = function(x, y) {\n\t\t\tfor (var i = 0; i < sortables.length; i++) {\n\t\t\t\tif (_lastChild(sortables[i])) continue;\n\n\t\t\t\tvar rect = _getRect(sortables[i]),\n\t\t\t\t\tthreshold = sortables[i][expando].options.emptyInsertThreshold,\n\t\t\t\t\tinsideHorizontally = x >= (rect.left - threshold) && x <= (rect.right + threshold),\n\t\t\t\t\tinsideVertically = y >= (rect.top - threshold) && y <= (rect.bottom + threshold);\n\n\t\t\t\tif (insideHorizontally && insideVertically) {\n\t\t\t\t\treturn sortables[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_isClientInRowColumn = function(x, y, el, axis, options) {\n\t\t\tvar targetRect = _getRect(el),\n\t\t\t\ttargetS1Opp = axis === 'vertical' ? targetRect.left : targetRect.top,\n\t\t\t\ttargetS2Opp = axis === 'vertical' ? targetRect.right : targetRect.bottom,\n\t\t\t\tmouseOnOppAxis = axis === 'vertical' ? x : y;\n\n\t\t\treturn targetS1Opp < mouseOnOppAxis && mouseOnOppAxis < targetS2Opp;\n\t\t},\n\n\t\t_isElInRowColumn = function(el1, el2, axis) {\n\t\t\tvar el1Rect = el1 === dragEl && realDragElRect || _getRect(el1),\n\t\t\t\tel2Rect = el2 === dragEl && realDragElRect || _getRect(el2),\n\t\t\t\tel1S1Opp = axis === 'vertical' ? el1Rect.left : el1Rect.top,\n\t\t\t\tel1S2Opp = axis === 'vertical' ? el1Rect.right : el1Rect.bottom,\n\t\t\t\tel1OppLength = axis === 'vertical' ? el1Rect.width : el1Rect.height,\n\t\t\t\tel2S1Opp = axis === 'vertical' ? el2Rect.left : el2Rect.top,\n\t\t\t\tel2S2Opp = axis === 'vertical' ? el2Rect.right : el2Rect.bottom,\n\t\t\t\tel2OppLength = axis === 'vertical' ? el2Rect.width : el2Rect.height;\n\n\t\t\treturn (\n\t\t\t\tel1S1Opp === el2S1Opp ||\n\t\t\t\tel1S2Opp === el2S2Opp ||\n\t\t\t\t(el1S1Opp + el1OppLength / 2) === (el2S1Opp + el2OppLength / 2)\n\t\t\t);\n\t\t},\n\n\t\t_getParentAutoScrollElement = function(el, includeSelf) {\n\t\t\t// skip to window\n\t\t\tif (!el || !el.getBoundingClientRect) return _getWindowScrollingElement();\n\n\t\t\tvar elem = el;\n\t\t\tvar gotSelf = false;\n\t\t\tdo {\n\t\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\t\t\tvar elemCSS = _css(elem);\n\t\t\t\t\tif (\n\t\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return _getWindowScrollingElement();\n\n\t\t\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\t\t\tgotSelf = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t\t} while (elem = elem.parentNode);\n\n\t\t\treturn _getWindowScrollingElement();\n\t\t},\n\n\t\t_getWindowScrollingElement = function() {\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn document.documentElement;\n\t\t\t} else {\n\t\t\t\treturn document.scrollingElement;\n\t\t\t}\n\t\t},\n\n\t\t_scrollBy = function(el, x, y) {\n\t\t\tel.scrollLeft += x;\n\t\t\tel.scrollTop += y;\n\t\t},\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (options.scroll) {\n\t\t\t\tvar _this = rootEl ? rootEl[expando] : window,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinScroller = _getWindowScrollingElement(),\n\n\t\t\t\t\tscrollThisInstance = false;\n\n\t\t\t\t// Detect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\t_clearAutoScrolls();\n\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\n\t\t\t\t\t\tscrollParentEl = scrollEl;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tvar layersOut = 0;\n\t\t\t\tvar currentParent = scrollEl;\n\t\t\t\tdo {\n\t\t\t\t\tvar\tel = currentParent,\n\t\t\t\t\t\trect = _getRect(el),\n\n\t\t\t\t\t\ttop = rect.top,\n\t\t\t\t\t\tbottom = rect.bottom,\n\t\t\t\t\t\tleft = rect.left,\n\t\t\t\t\t\tright = rect.right,\n\n\t\t\t\t\t\twidth = rect.width,\n\t\t\t\t\t\theight = rect.height,\n\n\t\t\t\t\t\tscrollWidth,\n\t\t\t\t\t\tscrollHeight,\n\n\t\t\t\t\t\tcss,\n\n\t\t\t\t\t\tvx,\n\t\t\t\t\t\tvy,\n\n\t\t\t\t\t\tcanScrollX,\n\t\t\t\t\t\tcanScrollY,\n\n\t\t\t\t\t\tscrollPosX,\n\t\t\t\t\t\tscrollPosY;\n\n\n\t\t\t\t\tscrollWidth = el.scrollWidth;\n\t\t\t\t\tscrollHeight = el.scrollHeight;\n\n\t\t\t\t\tcss = _css(el);\n\n\t\t\t\t\tscrollPosX = el.scrollLeft;\n\t\t\t\t\tscrollPosY = el.scrollTop;\n\n\t\t\t\t\tif (el === winScroller) {\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\n\t\t\t\t\t}\n\n\t\t\t\t\tvx = canScrollX && (abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (abs(left - x) <= sens && !!scrollPosX);\n\n\t\t\t\t\tvy = canScrollY && (abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (abs(top - y) <= sens && !!scrollPosY);\n\n\n\t\t\t\t\tif (!autoScrolls[layersOut]) {\n\t\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\n\t\t\t\t\t\t\tif (!autoScrolls[i]) {\n\t\t\t\t\t\t\t\tautoScrolls[i] = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n\t\t\t\t\t\tautoScrolls[layersOut].el = el;\n\t\t\t\t\t\tautoScrolls[layersOut].vx = vx;\n\t\t\t\t\t\tautoScrolls[layersOut].vy = vy;\n\n\t\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\n\n\t\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\n\t\t\t\t\t\t\tscrollThisInstance = true;\n\t\t\t\t\t\t\t/* jshint loopfunc:true */\n\t\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\n\t\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n\t\t\t\t\t\t\t\tif (isFallback && this.layer === 0) {\n\t\t\t\t\t\t\t\t\tSortable.active._emulateDragOver(true);\n\t\t\t\t\t\t\t\t\tSortable.active._onTouchMove(touchEvt, true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n\t\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n\t\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n\t\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlayersOut++;\n\t\t\t\t} while (options.bubbleScroll && currentParent !== winScroller && (currentParent = _getParentAutoScrollElement(currentParent, false)));\n\t\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n\t\t\t}\n\t\t}, 30),\n\n\t\t_clearAutoScrolls = function () {\n\t\t\tautoScrolls.forEach(function(autoScroll) {\n\t\t\t\tclearInterval(autoScroll.pid);\n\t\t\t});\n\t\t\tautoScrolls = [];\n\t\t},\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\treturn function(to, from, dragEl, evt) {\n\t\t\t\t\tvar sameGroup = to.options.group.name &&\n\t\t\t\t\t\t\t\t\tfrom.options.group.name &&\n\t\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\n\n\t\t\t\t\tif (value == null && (pull || sameGroup)) {\n\t\t\t\t\t\t// Default pull value\n\t\t\t\t\t\t// Default pull and put value if same group\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (pull && value === 'clone') {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t} else if (typeof value === 'function') {\n\t\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar otherGroup = (pull ? to : from).options.group.name;\n\n\t\t\t\t\t\treturn (value === true ||\n\t\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\n\t\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t},\n\n\t\t_checkAlignment = function(evt) {\n\t\t\tif (!dragEl || !dragEl.parentNode) return;\n\t\t\tdragEl.parentNode[expando] && dragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t},\n\n\t\t_isTrueParentSortable = function(el, target) {\n\t\t\tvar trueParent = target;\n\t\t\twhile (!trueParent[expando]) {\n\t\t\t\ttrueParent = trueParent.parentNode;\n\t\t\t}\n\n\t\t\treturn el === trueParent;\n\t\t},\n\n\t\t_artificalBubble = function(sortable, originalEvt, method) {\n\t\t\t// Artificial IE bubbling\n\t\t\tvar nextParent = sortable.parentNode;\n\t\t\twhile (nextParent && !nextParent[expando]) {\n\t\t\t\tnextParent = nextParent.parentNode;\n\t\t\t}\n\n\t\t\tif (nextParent) {\n\t\t\t\tnextParent[expando][method](_extend(originalEvt, {\n\t\t\t\t\tartificialBubble: true\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\n\t\t_hideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t}\n\t\t},\n\n\t\t_unhideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t}\n\t\t};\n\n\n\t// #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\tdocument.addEventListener('click', function(evt) {\n\t\tif (ignoreNextClick) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation && evt.stopPropagation();\n\t\t\tevt.stopImmediatePropagation && evt.stopImmediatePropagation();\n\t\t\tignoreNextClick = false;\n\t\t\treturn false;\n\t\t}\n\t}, true);\n\n\tvar nearestEmptyInsertDetectEvent = function(evt) {\n\t\tevt = evt.touches ? evt.touches[0] : evt;\n\t\tif (dragEl) {\n\t\t\tvar nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n\t\t\tif (nearest) {\n\t\t\t\tnearest[expando]._onDragOver({\n\t\t\t\t\tclientX: evt.clientX,\n\t\t\t\t\tclientY: evt.clientY,\n\t\t\t\t\ttarget: nearest,\n\t\t\t\t\trootEl: nearest\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\t// We do not want this to be triggered if completed (bubbling canceled), so only define it here\n\t_on(document, 'dragover', nearestEmptyInsertDetectEvent);\n\t_on(document, 'mousemove', nearestEmptyInsertDetectEvent);\n\t_on(document, 'touchmove', nearestEmptyInsertDetectEvent);\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: null,\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tbubbleScroll: true,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? '>li' : '>*',\n\t\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\n\t\t\tinvertSwap: false, // invert always\n\t\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\n\t\t\tremoveCloneOnHide: true,\n\t\t\tdirection: function() {\n\t\t\t\treturn _detectDirection(el, this.options);\n\t\t\t},\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\teasing: null,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\ttouchStartThreshold: parseInt(window.devicePixelRatio, 10) || 1,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0},\n\t\t\tsupportPointer: Sortable.supportPointer !== false && (\n\t\t\t\t('PointerEvent' in window) ||\n\t\t\t\twindow.navigator && ('msPointerEnabled' in window.navigator) // microsoft\n\t\t\t),\n\t\t\temptyInsertThreshold: 5\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\tif (this.nativeDraggable) {\n\t\t\t// Touch start threshold cannot be greater than the native dragstart threshold\n\t\t\tthis.options.touchStartThreshold = 1;\n\t\t}\n\n\t\t// Bind events\n\t\tif (options.supportPointer) {\n\t\t\t_on(el, 'pointerdown', this._onTapStart);\n\t\t} else {\n\t\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t}\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\tsortables.push(this.el);\n\n\t\t// Restore sorting\n\t\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\n\t}\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_computeIsAligned: function(evt) {\n\t\t\tvar target;\n\n\t\t\tif (ghostEl && !supportCssPointerEvents) {\n\t\t\t\t_hideGhostForTarget();\n\t\t\t\ttarget = document.elementFromPoint(evt.clientX, evt.clientY);\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t} else {\n\t\t\t\ttarget = evt.target;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, this.options.draggable, this.el, false);\n\t\t\tif (_alignedSilent) return;\n\t\t\tif (!dragEl || dragEl.parentNode !== this.el) return;\n\n\t\t\tvar children = this.el.children;\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t// Don't change for target in case it is changed to aligned before onDragOver is fired\n\t\t\t\tif (_closest(children[i], this.options.draggable, this.el, false) && children[i] !== target) {\n\t\t\t\t\tchildren[i].sortableMouseAligned = _isClientInRowColumn(evt.clientX, evt.clientY, children[i], this._getDirection(evt, null), this.options);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Used for nulling last target when not in element, nothing to do with checking if aligned\n\t\t\tif (!_closest(target, this.options.draggable, this.el, true)) {\n\t\t\t\tlastTarget = null;\n\t\t\t}\n\n\t\t\t_alignedSilent = true;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_alignedSilent = false;\n\t\t\t}, 30);\n\n\t\t},\n\n\t\t_getDirection: function(evt, target) {\n\t\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n\t\t},\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tif (!evt.cancelable) return;\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && ((evt.path && evt.path[0]) || (evt.composedPath && evt.composedPath()[0])) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// IE: Calls events in capture mode if event element is nested. This ensures only correct element's _onTapStart goes through.\n\t\t\t// This process is also done in _onDragOver\n\t\t\tif (IE11OrLess && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button and enabled\n\t\t\t}\n\n\t\t\t// cancel dnd if original target is content editable\n\t\t\tif (originalTarget.isContentEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el, false);\n\n\t\t\tif (!target) {\n\t\t\t\tif (IE11OrLess) {\n\t\t\t\t\t_artificalBubble(el, evt, '_onTapStart');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el, false);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el, false)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\n\t\t_handleAutoScroll: function(evt, fallback) {\n\t\t\tif (!dragEl || !this.options.scroll) return;\n\t\t\tvar x = evt.clientX,\n\t\t\t\ty = evt.clientY,\n\n\t\t\t\telem = document.elementFromPoint(x, y),\n\t\t\t\t_this = this;\n\n\t\t\t// IE does not seem to have native autoscroll,\n\t\t\t// Edge's autoscroll seems too conditional,\n\t\t\t// MACOS Safari does not have autoscroll,\n\t\t\t// Firefox and Chrome are good\n\t\t\tif (fallback || Edge || IE11OrLess || Safari) {\n\t\t\t\t_autoScroll(evt, _this.options, elem, fallback);\n\n\t\t\t\t// Listener for pointer element change\n\t\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\n\t\t\t\tif (\n\t\t\t\t\tscrolling &&\n\t\t\t\t\t(\n\t\t\t\t\t\t!pointerElemChangedInterval ||\n\t\t\t\t\t\tx !== lastPointerElemX ||\n\t\t\t\t\t\ty !== lastPointerElemY\n\t\t\t\t\t)\n\t\t\t\t) {\n\n\t\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\n\t\t\t\t\tpointerElemChangedInterval = setInterval(function() {\n\t\t\t\t\t\tif (!dragEl) return;\n\t\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\n\t\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\t\t\t\t\t\tif (newElem !== ogElemScroller) {\n\t\t\t\t\t\t\togElemScroller = newElem;\n\t\t\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\t\t\t_autoScroll(evt, _this.options, ogElemScroller, fallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t\tlastPointerElemX = x;\n\t\t\t\t\tlastPointerElemY = y;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n\t\t\t\tif (!_this.options.bubbleScroll || _getParentAutoScrollElement(elem, true) === _getWindowScrollingElement()) {\n\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_autoScroll(evt, _this.options, _getParentAutoScrollElement(elem, false), false);\n\t\t\t}\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: (touch || evt).clientX,\n\t\t\t\t\tclientY: (touch || evt).clientY\n\t\t\t\t};\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'all';\n\t\t\t\t// undo animation if needed\n\t\t\t\tdragEl.style.transition = '';\n\t\t\t\tdragEl.style.transform = '';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDragEvents();\n\n\t\t\t\t\tif (!FireFox && _this.nativeDraggable) {\n\t\t\t\t\t\tdragEl.draggable = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, rootEl, oldIndex);\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\tif (options.supportPointer) {\n\t\t\t\t\t_on(ownerDocument, 'pointerup', _this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t}\n\n\t\t\t\t// Make dragEl draggable (must be before delay for FireFox)\n\t\t\t\tif (FireFox && this.nativeDraggable) {\n\t\t\t\t\tthis.options.touchStartThreshold = 4;\n\t\t\t\t\tdragEl.draggable = true;\n\t\t\t\t}\n\n\t\t\t\t// Delay is impossible for native DnD in Edge or IE\n\t\t\t\tif (options.delay && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_delayedDragTouchMoveHandler: function (/** TouchEvent|PointerEvent **/e) {\n\t\t\tvar touch = e.touches ? e.touches[0] : e;\n\t\t\tif (max(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY))\n\t\t\t\t\t>= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))\n\t\t\t) {\n\t\t\t\tthis._disableDelayedDrag();\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tdragEl && _disableDraggable(dragEl);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\tthis._disableDelayedDragEvents();\n\t\t},\n\n\t\t_disableDelayedDragEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (!this.nativeDraggable || touch) {\n\t\t\t\tif (this.options.supportPointer) {\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t} else if (touch) {\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t} else {\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\t_nextTick(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function (fallback, evt) {\n\t\t\tawaitingDragStarted = false;\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t_on(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t\t_on(document, 'dragover', _checkAlignment);\n\t\t\t\t}\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, false);\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\n\t\t\t\t// In case dragging an animated element\n\t\t\t\t_css(dragEl, 'transform', '');\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\tfallback && this._appendGhost();\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, rootEl, oldIndex, undefined, evt);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function (forAutoScroll) {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY && !forAutoScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\t_hideGhostForTarget();\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\tvar parent = target;\n\n\t\t\t\twhile (target && target.shadowRoot) {\n\t\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\t\tparent = target;\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\tvar inserted;\n\n\t\t\t\t\t\t\tinserted = parent[expando]._onDragOver({\n\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (inserted && !this.options.dragoverBubble) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(touchEvt);\n\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt, forAutoScroll) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tmatrix = ghostEl && _matrix(ghostEl),\n\t\t\t\t\tscaleX = ghostEl && matrix && matrix.a,\n\t\t\t\t\tscaleY = ghostEl && matrix && matrix.d,\n\t\t\t\t\trelativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && _getRelativeScrollOffset(ghostRelativeParent),\n\t\t\t\t\tdx = ((touch.clientX - tapEvt.clientX)\n\t\t\t\t\t\t\t+ fallbackOffset.x) / (scaleX || 1)\n\t\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0]) : 0) / (scaleX || 1),\n\t\t\t\t\tdy = ((touch.clientY - tapEvt.clientY)\n\t\t\t\t\t\t\t+ fallbackOffset.y) / (scaleY || 1)\n\t\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1]) : 0) / (scaleY || 1),\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active && !awaitingDragStarted) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDragStart(evt, true);\n\t\t\t\t}\n\n\t\t\t\t!forAutoScroll && this._handleAutoScroll(touch, true);\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\t// Bug if using scale(): https://stackoverflow.com/questions/2637058\n\t\t\t// Not being adjusted for\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar container = this.options.fallbackOnBody ? document.body : rootEl,\n\t\t\t\t\trect = _getRect(dragEl, true, container, !PositionGhostAbsolutely),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options;\n\n\t\t\t\t// Position absolutely\n\t\t\t\tif (PositionGhostAbsolutely) {\n\t\t\t\t\t// Get relatively positioned parent\n\t\t\t\t\tghostRelativeParent = container;\n\n\t\t\t\t\twhile (\n\t\t\t\t\t\t_css(ghostRelativeParent, 'position') === 'static' &&\n\t\t\t\t\t\t_css(ghostRelativeParent, 'transform') === 'none' &&\n\t\t\t\t\t\tghostRelativeParent !== document\n\t\t\t\t\t) {\n\t\t\t\t\t\tghostRelativeParent = ghostRelativeParent.parentNode;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ghostRelativeParent !== document) {\n\t\t\t\t\t\tvar ghostRelativeParentRect = _getRect(ghostRelativeParent, true);\n\n\t\t\t\t\t\trect.top -= ghostRelativeParentRect.top;\n\t\t\t\t\t\trect.left -= ghostRelativeParentRect.left;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n\t\t\t\t\t\tif (ghostRelativeParent === document) ghostRelativeParent = _getWindowScrollingElement();\n\n\t\t\t\t\t\trect.top += ghostRelativeParent.scrollTop;\n\t\t\t\t\t\trect.left += ghostRelativeParent.scrollLeft;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tghostRelativeParent = _getWindowScrollingElement();\n\t\t\t\t\t}\n\t\t\t\t\tghostRelativeParentInitialScroll = _getRelativeScrollOffset(ghostRelativeParent);\n\t\t\t\t}\n\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'box-sizing', 'border-box');\n\t\t\t\t_css(ghostEl, 'margin', 0);\n\t\t\t\t_css(ghostEl, 'top', rect.top);\n\t\t\t\t_css(ghostEl, 'left', rect.left);\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', (PositionGhostAbsolutely ? 'absolute' : 'fixed'));\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\tcontainer.appendChild(ghostEl);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/fallback) {\n\t\t\tvar _this = this;\n\t\t\tvar dataTransfer = evt.dataTransfer;\n\t\t\tvar options = _this.options;\n\n\t\t\t// Setup clone\n\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\tcloneEl.draggable = false;\n\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\tthis._hideClone();\n\n\t\t\t_toggleClass(cloneEl, _this.options.chosenClass, false);\n\n\n\t\t\t// #1143: IFrame support workaround\n\t\t\t_this._cloneId = _nextTick(function () {\n\t\t\t\tif (!_this.options.removeCloneOnHide) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t}\n\t\t\t\t_dispatchEvent(_this, rootEl, 'clone', dragEl);\n\t\t\t});\n\n\n\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, true);\n\n\t\t\t// Set proper drop events\n\t\t\tif (fallback) {\n\t\t\t\tignoreNextClick = true;\n\t\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\n\t\t\t} else {\n\t\t\t\t// Undo what was set in _prepareDragStart before drag started\n\t\t\t\t_off(document, 'mouseup', _this._onDrop);\n\t\t\t\t_off(document, 'touchend', _this._onDrop);\n\t\t\t\t_off(document, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', _this);\n\n\t\t\t\t// #1276 fix:\n\t\t\t\t_css(dragEl, 'transform', 'translateZ(0)');\n\t\t\t}\n\n\t\t\tawaitingDragStarted = true;\n\n\t\t\t_this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n\t\t\t_on(document, 'selectstart', _this);\n\t\t\tif (Safari) {\n\t\t\t\t_css(document.body, 'user-select', 'none');\n\t\t\t}\n\t\t},\n\n\n\t\t// Returns true - if no further action is needed (either inserted or another condition)\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget = evt.target,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort,\n\t\t\t\t_this = this;\n\n\t\t\tif (_silent) return;\n\n\t\t\t// IE event order fix\n\t\t\tif (IE11OrLess && !evt.rootEl && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Return invocation when dragEl is inserted (or completed)\n\t\t\tfunction completed(insertion) {\n\t\t\t\tif (insertion) {\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(_this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (activeSortable) {\n\t\t\t\t\t\t// Set ghost class to new sortable's ghost class\n\t\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n\t\t\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (putSortable !== _this && _this !== Sortable.active) {\n\t\t\t\t\t\tputSortable = _this;\n\t\t\t\t\t} else if (_this === Sortable.active) {\n\t\t\t\t\t\tputSortable = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Animation\n\t\t\t\t\tdragRect && _this._animate(dragRect, dragEl);\n\t\t\t\t\ttarget && targetRect && _this._animate(targetRect, target);\n\t\t\t\t}\n\n\n\t\t\t\t// Null lastTarget if it is not inside a previously swapped element\n\t\t\t\tif ((target === dragEl && !dragEl.animated) || (target === el && !target.animated)) {\n\t\t\t\t\tlastTarget = null;\n\t\t\t\t}\n\t\t\t\t// no bubbling and not fallback\n\t\t\t\tif (!options.dragoverBubble && !evt.rootEl && target !== document) {\n\t\t\t\t\t_this._handleAutoScroll(evt);\n\t\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t\t\t}\n\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Call when dragEl has been inserted\n\t\t\tfunction changed() {\n\t\t\t\t_dispatchEvent(_this, rootEl, 'change', target, el, rootEl, oldIndex, _index(dragEl, options.draggable), evt);\n\t\t\t}\n\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\n\n\t\t\tmoved = true;\n\n\t\t\ttarget = _closest(target, options.draggable, el, true);\n\n\t\t\t// target is dragEl or target is animated\n\t\t\tif (!!_closest(evt.target, null, dragEl, true) || target.animated) {\n\t\t\t\treturn completed(false);\n\t\t\t}\n\n\t\t\tif (target !== dragEl) {\n\t\t\t\tignoreNextClick = false;\n\t\t\t}\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tvar axis = this._getDirection(evt, target);\n\n\t\t\t\tdragRect = _getRect(dragEl);\n\n\t\t\t\tif (revert) {\n\t\t\t\t\tthis._hideClone();\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, nextEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn completed(true);\n\t\t\t\t}\n\n\t\t\t\tvar elLastChild = _lastChild(el);\n\n\t\t\t\tif (!elLastChild || _ghostIsLast(evt, axis, el) && !elLastChild.animated) {\n\t\t\t\t\t// assign target only if condition is true\n\t\t\t\t\tif (elLastChild && el === evt.target) {\n\t\t\t\t\t\ttarget = elLastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\ttargetRect = _getRect(target);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\trealDragElRect = null;\n\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\treturn completed(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && target !== dragEl && target.parentNode === el) {\n\t\t\t\t\tvar direction = 0,\n\t\t\t\t\t\ttargetBeforeFirstSwap,\n\t\t\t\t\t\taligned = target.sortableMouseAligned,\n\t\t\t\t\t\tdifferentLevel = dragEl.parentNode !== el,\n\t\t\t\t\t\tside1 = axis === 'vertical' ? 'top' : 'left',\n\t\t\t\t\t\tscrolledPastTop = _isScrolledPast(target, 'top') || _isScrolledPast(dragEl, 'top'),\n\t\t\t\t\t\tscrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n\n\t\t\t\t\tif (lastTarget !== target) {\n\t\t\t\t\t\tlastMode = null;\n\t\t\t\t\t\ttargetBeforeFirstSwap = _getRect(target)[side1];\n\t\t\t\t\t\tpastFirstInvertThresh = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reference: https://www.lucidchart.com/documents/view/10fa0e93-e362-4126-aca2-b709ee56bd8b/0\n\t\t\t\t\tif (\n\t\t\t\t\t\t_isElInRowColumn(dragEl, target, axis) && aligned ||\n\t\t\t\t\t\tdifferentLevel ||\n\t\t\t\t\t\tscrolledPastTop ||\n\t\t\t\t\t\toptions.invertSwap ||\n\t\t\t\t\t\tlastMode === 'insert' ||\n\t\t\t\t\t\t// Needed, in the case that we are inside target and inserted because not aligned... aligned will stay false while inside\n\t\t\t\t\t\t// and lastMode will change to 'insert', but we must swap\n\t\t\t\t\t\tlastMode === 'swap'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// New target that we will be inside\n\t\t\t\t\t\tif (lastMode !== 'swap') {\n\t\t\t\t\t\t\tisCircumstantialInvert = options.invertSwap || differentLevel;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdirection = _getSwapDirection(evt, target, axis,\n\t\t\t\t\t\t\toptions.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold,\n\t\t\t\t\t\t\tisCircumstantialInvert,\n\t\t\t\t\t\t\tlastTarget === target);\n\t\t\t\t\t\tlastMode = 'swap';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Insert at position\n\t\t\t\t\t\tdirection = _getInsertDirection(target);\n\t\t\t\t\t\tlastMode = 'insert';\n\t\t\t\t\t}\n\t\t\t\t\tif (direction === 0) return completed(false);\n\n\t\t\t\t\trealDragElRect = null;\n\t\t\t\t\tlastTarget = target;\n\n\t\t\t\t\tlastDirection = direction;\n\n\t\t\t\t\ttargetRect = _getRect(target);\n\n\t\t\t\t\tvar nextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false;\n\n\t\t\t\t\tafter = direction === 1;\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Undo chrome's scroll adjustment\n\t\t\t\t\t\tif (scrolledPastTop) {\n\t\t\t\t\t\t\t_scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\t// must be done before animation\n\t\t\t\t\t\tif (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n\t\t\t\t\t\t\ttargetMoveDistance = abs(targetBeforeFirstSwap - _getRect(target)[side1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchanged();\n\n\t\t\t\t\t\treturn completed(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (el.contains(dragEl)) {\n\t\t\t\t\treturn completed(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (IE11OrLess && !evt.rootEl) {\n\t\t\t\t_artificalBubble(el, evt, '_onDragOver');\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = _getRect(target);\n\n\t\t\t\tif (target === dragEl) {\n\t\t\t\t\trealDragElRect = currentRect;\n\t\t\t\t}\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = _getRect(prevRect);\n\t\t\t\t}\n\n\t\t\t\t// Check if actually moving position\n\t\t\t\tif ((prevRect.left + prevRect.width / 2) !== (currentRect.left + currentRect.width / 2)\n\t\t\t\t\t|| (prevRect.top + prevRect.height / 2) !== (currentRect.top + currentRect.height / 2)\n\t\t\t\t) {\n\t\t\t\t\tvar matrix = _matrix(this.el),\n\t\t\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t\t+ (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + 'px,'\n\t\t\t\t\t\t+ (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + 'px,0)'\n\t\t\t\t\t);\n\n\t\t\t\t\tforRepaintDummy = target.offsetWidth; // repaint\n\t\t\t\t\t_css(target, 'transition', 'transform ' + ms + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n\t\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\t\t\t\t}\n\n\t\t\t\t(typeof target.animated === 'number') && clearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(document, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\t\t\tawaitingDragStarted = false;\n\t\t\tscrolling = false;\n\t\t\tisCircumstantialInvert = false;\n\t\t\tpastFirstInvertThresh = false;\n\n\t\t\tclearInterval(this._loopId);\n\n\t\t\tclearInterval(pointerElemChangedInterval);\n\t\t\t_clearAutoScrolls();\n\t\t\t_cancelThrottle();\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t_cancelNextTick(this._cloneId);\n\t\t\t_cancelNextTick(this._dragStartId);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t\t_off(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t_off(document, 'dragover', _checkAlignment);\n\t\t\t}\n\n\t\t\tif (Safari) {\n\t\t\t\t_css(document.body, 'user-select', '');\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || (putSortable && putSortable.lastPutMode !== 'clone')) {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, parentEl, rootEl, oldIndex, null, evt);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tputSortable && putSortable.save();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\t\t\tautoScrolls.length =\n\n\t\t\tpointerElemChangedInterval =\n\t\t\tlastPointerElemX =\n\t\t\tlastPointerElemY =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\t\t\toldIndex =\n\n\t\t\tlastTarget =\n\t\t\tlastDirection =\n\n\t\t\tforRepaintDummy =\n\t\t\trealDragElRect =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragenter':\n\t\t\t\tcase 'dragover':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el, false)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl, false)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el, false);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\tthis._onDrop();\n\n\t\t\tsortables.splice(sortables.indexOf(this.el), 1);\n\n\t\t\tthis.el = el = null;\n\t\t},\n\n\t\t_hideClone: function() {\n\t\t\tif (!cloneEl.cloneHidden) {\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\tcloneEl.cloneHidden = true;\n\t\t\t\tif (cloneEl.parentNode && this.options.removeCloneOnHide) {\n\t\t\t\t\tcloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_showClone: function(putSortable) {\n\t\t\tif (putSortable.lastPutMode !== 'clone') {\n\t\t\t\tthis._hideClone();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cloneEl.cloneHidden) {\n\t\t\t\t// show clone at dragEl or original position\n\t\t\t\tif (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t} else if (nextEl) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t} else {\n\t\t\t\t\trootEl.appendChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (this.options.group.revertClone) {\n\t\t\t\t\tthis._animate(dragEl, cloneEl);\n\t\t\t\t}\n\t\t\t\t_css(cloneEl, 'display', '');\n\t\t\t\tcloneEl.cloneHidden = false;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\tselector != null &&\n\t\t\t\t\t(\n\t\t\t\t\t\tselector[0] === '>' && el.parentNode === ctx && _matches(el, selector.substring(1)) ||\n\t\t\t\t\t\t_matches(el, selector)\n\t\t\t\t\t) ||\n\t\t\t\t\tincludeCTX && el === ctx\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t\tif (el === ctx) break;\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\treturn (el.host && el !== document && el.host.nodeType)\n\t\t\t? el.host\n\t\t\t: el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.cancelable && evt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el && name) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _matrix(el) {\n\t\tvar appliedTransforms = '';\n\t\tdo {\n\t\t\tvar transform = _css(el, 'transform');\n\n\t\t\tif (transform && transform !== 'none') {\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\n\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t} while (el = el.parentNode);\n\n\t\tif (window.DOMMatrix) {\n\t\t\treturn new DOMMatrix(appliedTransforms);\n\t\t} else if (window.WebKitCSSMatrix) {\n\t\t\treturn new WebKitCSSMatrix(appliedTransforms);\n\t\t} else if (window.CSSMatrix) {\n\t\t\treturn new CSSMatrix(appliedTransforms);\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, toEl, fromEl, startIndex, newIndex, originalEvt) {\n\t\tsortable = (sortable || rootEl[expando]);\n\t\tvar evt,\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent(name, {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, true);\n\t\t}\n\n\t\tevt.to = toEl || rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\tevt.originalEvent = originalEvt;\n\t\tevt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n\t\tif (rootEl) {\n\t\t\trootEl.dispatchEvent(evt);\n\t\t}\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent('move', {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent('move', true, true);\n\t\t}\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || _getRect(toEl);\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\t/**\n\t * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n\t * and non-draggable elements\n\t * @param  {HTMLElement} el       The parent element\n\t * @param  {Number} childNum      The index of the child\n\t * @param  {Object} options       Parent Sortable's options\n\t * @return {HTMLElement}          The child at index childNum, or null if not found\n\t */\n\tfunction _getChild(el, childNum, options) {\n\t\tvar currentChild = 0,\n\t\t\ti = 0,\n\t\t\tchildren = el.children;\n\n\t\twhile (i < children.length) {\n\t\t\tif (\n\t\t\t\tchildren[i].style.display !== 'none' &&\n\t\t\t\tchildren[i] !== ghostEl &&\n\t\t\t\tchildren[i] !== dragEl &&\n\t\t\t\t_closest(children[i], options.draggable, el, false)\n\t\t\t) {\n\t\t\t\tif (currentChild === childNum) {\n\t\t\t\t\treturn children[i];\n\t\t\t\t}\n\t\t\t\tcurrentChild++;\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n\t * @param  {HTMLElement} el       Parent element\n\t * @return {HTMLElement}          The last child, ignoring ghostEl\n\t */\n\tfunction _lastChild(el) {\n\t\tvar last = el.lastElementChild;\n\n\t\twhile (last && (last === ghostEl || last.style.display === 'none')) {\n\t\t\tlast = last.previousElementSibling;\n\t\t}\n\n\t\treturn last || null;\n\t}\n\n\tfunction _ghostIsLast(evt, axis, el) {\n\t\tvar elRect = _getRect(_lastChild(el)),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\tmouseOnOppAxis = axis === 'vertical' ? evt.clientX : evt.clientY,\n\t\t\ttargetS2 = axis === 'vertical' ? elRect.bottom : elRect.right,\n\t\t\ttargetS1Opp = axis === 'vertical' ? elRect.left : elRect.top,\n\t\t\ttargetS2Opp = axis === 'vertical' ? elRect.right : elRect.bottom,\n\t\t\tspacer = 10;\n\n\t\treturn (\n\t\t\taxis === 'vertical' ?\n\t\t\t\t(mouseOnOppAxis > targetS2Opp + spacer || mouseOnOppAxis <= targetS2Opp && mouseOnAxis > targetS2 && mouseOnOppAxis >= targetS1Opp) :\n\t\t\t\t(mouseOnAxis > targetS2 && mouseOnOppAxis > targetS1Opp || mouseOnAxis <= targetS2 && mouseOnOppAxis > targetS2Opp + spacer)\n\t\t);\n\t}\n\n\tfunction _getSwapDirection(evt, target, axis, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n\t\tvar targetRect = _getRect(target),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\ttargetLength = axis === 'vertical' ? targetRect.height : targetRect.width,\n\t\t\ttargetS1 = axis === 'vertical' ? targetRect.top : targetRect.left,\n\t\t\ttargetS2 = axis === 'vertical' ? targetRect.bottom : targetRect.right,\n\t\t\tdragRect = _getRect(dragEl),\n\t\t\tinvert = false;\n\n\n\t\tif (!invertSwap) {\n\t\t\t// Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n\t\t\tif (isLastTarget && targetMoveDistance < targetLength * swapThreshold) { // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n\t\t\t\t// check if past first invert threshold on side opposite of lastDirection\n\t\t\t\tif (!pastFirstInvertThresh &&\n\t\t\t\t\t(lastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// past first invert threshold, do not restrict inverted threshold to dragEl shadow\n\t\t\t\t\tpastFirstInvertThresh = true;\n\t\t\t\t}\n\n\t\t\t\tif (!pastFirstInvertThresh) {\n\t\t\t\t\tvar dragS1 = axis === 'vertical' ? dragRect.top : dragRect.left,\n\t\t\t\t\t\tdragS2 = axis === 'vertical' ? dragRect.bottom : dragRect.right;\n\t\t\t\t\t// dragEl shadow (target move distance shadow)\n\t\t\t\t\tif (\n\t\t\t\t\t\tlastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS2 - targetMoveDistance\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn lastDirection * -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinvert = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Regular\n\t\t\t\tif (\n\t\t\t\t\tmouseOnAxis > targetS1 + (targetLength * (1 - swapThreshold) / 2) &&\n\t\t\t\t\tmouseOnAxis < targetS2 - (targetLength * (1 - swapThreshold) / 2)\n\t\t\t\t) {\n\t\t\t\t\treturn _getInsertDirection(target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinvert = invert || invertSwap;\n\n\t\tif (invert) {\n\t\t\t// Invert of regular\n\t\t\tif (\n\t\t\t\tmouseOnAxis < targetS1 + (targetLength * invertedSwapThreshold / 2) ||\n\t\t\t\tmouseOnAxis > targetS2 - (targetLength * invertedSwapThreshold / 2)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? 1 : -1);\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Gets the direction dragEl must be swapped relative to target in order to make it\n\t * seem that dragEl has been \"inserted\" into that element's position\n\t * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n\t * @return {Number}                   Direction dragEl must be swapped\n\t */\n\tfunction _getInsertDirection(target) {\n\t\tvar dragElIndex = _index(dragEl),\n\t\t\ttargetIndex = _index(target);\n\n\t\tif (dragElIndex < targetIndex) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== cloneEl) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\ttry {\n\t\t\t\tif (el.matches) {\n\t\t\t\t\treturn el.matches(selector);\n\t\t\t\t} else if (el.msMatchesSelector) {\n\t\t\t\t\treturn el.msMatchesSelector(selector);\n\t\t\t\t} else if (el.webkitMatchesSelector) {\n\t\t\t\t\treturn el.webkitMatchesSelector(selector);\n\t\t\t\t}\n\t\t\t} catch(_) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tvar _throttleTimeout;\n\tfunction _throttle(callback, ms) {\n\t\treturn function () {\n\t\t\tif (!_throttleTimeout) {\n\t\t\t\tvar args = arguments,\n\t\t\t\t\t_this = this;\n\n\t\t\t\t_throttleTimeout = setTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\t_throttleTimeout = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _cancelThrottle() {\n\t\tclearTimeout(_throttleTimeout);\n\t\t_throttleTimeout = void 0;\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\tif (Polymer && Polymer.dom) {\n\t\t\treturn Polymer.dom(el).cloneNode(true);\n\t\t}\n\t\telse if ($) {\n\t\t\treturn $(el).clone(true)[0];\n\t\t}\n\t\telse {\n\t\t\treturn el.cloneNode(true);\n\t\t}\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tsavedInputChecked.length = 0;\n\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\tfunction _nextTick(fn) {\n\t\treturn setTimeout(fn, 0);\n\t}\n\n\tfunction _cancelNextTick(id) {\n\t\treturn clearTimeout(id);\n\t}\n\n\n\t/**\n\t * Returns the \"bounding client rect\" of given element\n\t * @param  {HTMLElement} el                The element whose boundingClientRect is wanted\n\t * @param  {[HTMLElement]} container       the parent the element will be placed in\n\t * @param  {[Boolean]} adjustForTransform  Whether the rect should compensate for parent's transform\n\t * @return {Object}                        The boundingClientRect of el\n\t */\n\tfunction _getRect(el, adjustForTransform, container, adjustForFixed) {\n\t\tif (!el.getBoundingClientRect && el !== win) return;\n\n\t\tvar elRect,\n\t\t\ttop,\n\t\t\tleft,\n\t\t\tbottom,\n\t\t\tright,\n\t\t\theight,\n\t\t\twidth;\n\n\t\tif (el !== win && el !== _getWindowScrollingElement()) {\n\t\t\telRect = el.getBoundingClientRect();\n\t\t\ttop = elRect.top;\n\t\t\tleft = elRect.left;\n\t\t\tbottom = elRect.bottom;\n\t\t\tright = elRect.right;\n\t\t\theight = elRect.height;\n\t\t\twidth = elRect.width;\n\t\t} else {\n\t\t\ttop = 0;\n\t\t\tleft = 0;\n\t\t\tbottom = window.innerHeight;\n\t\t\tright = window.innerWidth;\n\t\t\theight = window.innerHeight;\n\t\t\twidth = window.innerWidth;\n\t\t}\n\n\t\tif (adjustForFixed && el !== win) {\n\t\t\t// Adjust for translate()\n\t\t\tcontainer = container || el.parentNode;\n\n\t\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n\t\t\t// Not needed on <= IE11\n\t\t\tif (!IE11OrLess) {\n\t\t\t\tdo {\n\t\t\t\t\tif (container && container.getBoundingClientRect && _css(container, 'transform') !== 'none') {\n\t\t\t\t\t\tvar containerRect = container.getBoundingClientRect();\n\n\t\t\t\t\t\t// Set relative to edges of padding box of container\n\t\t\t\t\t\ttop -= containerRect.top + parseInt(_css(container, 'border-top-width'));\n\t\t\t\t\t\tleft -= containerRect.left + parseInt(_css(container, 'border-left-width'));\n\t\t\t\t\t\tbottom = top + elRect.height;\n\t\t\t\t\t\tright = left + elRect.width;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t} while (container = container.parentNode);\n\t\t\t}\n\t\t}\n\n\t\tif (adjustForTransform && el !== win) {\n\t\t\t// Adjust for scale()\n\t\t\tvar matrix = _matrix(container || el),\n\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\tif (matrix) {\n\t\t\t\ttop /= scaleY;\n\t\t\t\tleft /= scaleX;\n\n\t\t\t\twidth /= scaleX;\n\t\t\t\theight /= scaleY;\n\n\t\t\t\tbottom = top + height;\n\t\t\t\tright = left + width;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tbottom: bottom,\n\t\t\tright: right,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\n\t/**\n\t * Checks if a side of an element is scrolled past a side of it's parents\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\n\t * @return {HTMLElement}           The parent scroll element that the el's side is scrolled past, or null if there is no such element\n\t */\n\tfunction _isScrolledPast(el, side) {\n\t\tvar parent = _getParentAutoScrollElement(el, true),\n\t\t\telSide = _getRect(el)[side];\n\n\t\t/* jshint boss:true */\n\t\twhile (parent) {\n\t\t\tvar parentSide = _getRect(parent)[side],\n\t\t\t\tvisible;\n\n\t\t\tif (side === 'top' || side === 'left') {\n\t\t\t\tvisible = elSide >= parentSide;\n\t\t\t} else {\n\t\t\t\tvisible = elSide <= parentSide;\n\t\t\t}\n\n\t\t\tif (!visible) return parent;\n\n\t\t\tif (parent === _getWindowScrollingElement()) break;\n\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n\t * The value is returned in real pixels.\n\t * @param  {HTMLElement} el\n\t * @return {Array}             Offsets in the format of [left, top]\n\t */\n\tfunction _getRelativeScrollOffset(el) {\n\t\tvar offsetLeft = 0,\n\t\t\toffsetTop = 0,\n\t\t\twinScroller = _getWindowScrollingElement();\n\n\t\tif (el) {\n\t\t\tdo {\n\t\t\t\tvar matrix = _matrix(el),\n\t\t\t\t\tscaleX = matrix.a,\n\t\t\t\t\tscaleY = matrix.d;\n\n\t\t\t\toffsetLeft += el.scrollLeft * scaleX;\n\t\t\t\toffsetTop += el.scrollTop * scaleY;\n\t\t\t} while (el !== winScroller && (el = el.parentNode));\n\t\t}\n\n\t\treturn [offsetLeft, offsetTop];\n\t}\n\n\t// Fixed #973:\n\t_on(document, 'touchmove', function(evt) {\n\t\tif ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el, false);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index,\n\t\tnextTick: _nextTick,\n\t\tcancelNextTick: _cancelNextTick,\n\t\tdetectDirection: _detectDirection,\n\t\tgetChild: _getChild\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.8.4';\n\treturn Sortable;\n});\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    return defaultLogger;\n}));\n","'use strict';\n\n/**\n * Based off of [the offical Google document](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)\n *\n * Some parts from [this implementation](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/PolylineEncoder.js)\n * by [Mark McClure](http://facstaff.unca.edu/mcmcclur/)\n *\n * @module polyline\n */\n\nvar polyline = {};\n\nfunction encode(coordinate, factor) {\n    coordinate = Math.round(coordinate * factor);\n    coordinate <<= 1;\n    if (coordinate < 0) {\n        coordinate = ~coordinate;\n    }\n    var output = '';\n    while (coordinate >= 0x20) {\n        output += String.fromCharCode((0x20 | (coordinate & 0x1f)) + 63);\n        coordinate >>= 5;\n    }\n    output += String.fromCharCode(coordinate + 63);\n    return output;\n}\n\n/**\n * Decodes to a [latitude, longitude] coordinates array.\n *\n * This is adapted from the implementation in Project-OSRM.\n *\n * @param {String} str\n * @param {Number} precision\n * @returns {Array}\n *\n * @see https://github.com/Project-OSRM/osrm-frontend/blob/master/WebContent/routing/OSRM.RoutingGeometry.js\n */\npolyline.decode = function(str, precision) {\n    var index = 0,\n        lat = 0,\n        lng = 0,\n        coordinates = [],\n        shift = 0,\n        result = 0,\n        byte = null,\n        latitude_change,\n        longitude_change,\n        factor = Math.pow(10, precision || 5);\n\n    // Coordinates have variable length when encoded, so just keep\n    // track of whether we've hit the end of the string. In each\n    // loop iteration, a single coordinate is decoded.\n    while (index < str.length) {\n\n        // Reset shift, result, and byte\n        byte = null;\n        shift = 0;\n        result = 0;\n\n        do {\n            byte = str.charCodeAt(index++) - 63;\n            result |= (byte & 0x1f) << shift;\n            shift += 5;\n        } while (byte >= 0x20);\n\n        latitude_change = ((result & 1) ? ~(result >> 1) : (result >> 1));\n\n        shift = result = 0;\n\n        do {\n            byte = str.charCodeAt(index++) - 63;\n            result |= (byte & 0x1f) << shift;\n            shift += 5;\n        } while (byte >= 0x20);\n\n        longitude_change = ((result & 1) ? ~(result >> 1) : (result >> 1));\n\n        lat += latitude_change;\n        lng += longitude_change;\n\n        coordinates.push([lat / factor, lng / factor]);\n    }\n\n    return coordinates;\n};\n\n/**\n * Encodes the given [latitude, longitude] coordinates array.\n *\n * @param {Array.<Array.<Number>>} coordinates\n * @param {Number} precision\n * @returns {String}\n */\npolyline.encode = function(coordinates, precision) {\n    if (!coordinates.length) { return ''; }\n\n    var factor = Math.pow(10, precision || 5),\n        output = encode(coordinates[0][0], factor) + encode(coordinates[0][1], factor);\n\n    for (var i = 1; i < coordinates.length; i++) {\n        var a = coordinates[i], b = coordinates[i - 1];\n        output += encode(a[0] - b[0], factor);\n        output += encode(a[1] - b[1], factor);\n    }\n\n    return output;\n};\n\nfunction flipped(coords) {\n    var flipped = [];\n    for (var i = 0; i < coords.length; i++) {\n        flipped.push(coords[i].slice().reverse());\n    }\n    return flipped;\n}\n\n/**\n * Encodes a GeoJSON LineString feature/geometry.\n *\n * @param {Object} geojson\n * @param {Number} precision\n * @returns {String}\n */\npolyline.fromGeoJSON = function(geojson, precision) {\n    if (geojson && geojson.type === 'Feature') {\n        geojson = geojson.geometry;\n    }\n    if (!geojson || geojson.type !== 'LineString') {\n        throw new Error('Input must be a GeoJSON LineString');\n    }\n    return polyline.encode(flipped(geojson.coordinates), precision);\n};\n\n/**\n * Decodes to a GeoJSON LineString geometry.\n *\n * @param {String} str\n * @param {Number} precision\n * @returns {Object}\n */\npolyline.toGeoJSON = function(str, precision) {\n    var coords = polyline.decode(str, precision);\n    return {\n        type: 'LineString',\n        coordinates: flipped(coords)\n    };\n};\n\nif (typeof module === 'object' && module.exports) {\n    module.exports = polyline;\n}\n","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype)\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml' ;\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this._features = features[feature];\n\t\t}\n\t}\n};\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9?this.documentElement:this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\nfunction needNamespaceDefine(node,isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix||'';\n\tvar uri = node.namespaceURI;\n\tif (!prefix && !uri){\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" \n\t\t|| uri == 'http://www.w3.org/2000/xmlns/'){\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length \n\t//console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\t//console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\t\tif (ns.prefix == prefix){\n\t\t\treturn ns.namespace != uri;\n\t\t}\n\t}\n\t//console.log(isHTML,uri,prefix=='')\n\t//if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n\t//\treturn false;\n\t//}\n\t//node.flag = '11111'\n\t//console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\treturn true;\n}\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tif (!visibleNamespaces) visibleNamespaces = [];\n\t\tvar startVisibleNamespaces = visibleNamespaces.length;\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML =  (htmlns === node.namespaceURI) ||isHTML \n\t\tbuf.push('<',nodeName);\n\t\t\n\t\t\n\t\t\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\t\t// add namespace for current node\t\t\n\t\tif (needNamespaceDefine(node,isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DOMImplementation = DOMImplementation;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LogLevels;\n(function (LogLevels) {\n    LogLevels[\"DEBUG\"] = \"debug\";\n    LogLevels[\"INFO\"] = \"info\";\n    LogLevels[\"WARN\"] = \"warn\";\n    LogLevels[\"ERROR\"] = \"error\";\n    LogLevels[\"FATAL\"] = \"fatal\";\n})(LogLevels = exports.LogLevels || (exports.LogLevels = {}));\n//# sourceMappingURL=log-levels.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar es6_object_assign_1 = __importDefault(require(\"es6-object-assign\"));\nes6_object_assign_1.default.polyfill();\nvar vue_logger_1 = __importDefault(require(\"./vue-logger\"));\nexports.default = vue_logger_1.default;\n//# sourceMappingURL=index.js.map","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.topojson = global.topojson || {})));\n}(this, function (exports) { 'use strict';\n\n  function noop() {}\n\n  function transformAbsolute(transform) {\n    if (!transform) return noop;\n    var x0,\n        y0,\n        kx = transform.scale[0],\n        ky = transform.scale[1],\n        dx = transform.translate[0],\n        dy = transform.translate[1];\n    return function(point, i) {\n      if (!i) x0 = y0 = 0;\n      point[0] = (x0 += point[0]) * kx + dx;\n      point[1] = (y0 += point[1]) * ky + dy;\n    };\n  }\n\n  function transformRelative(transform) {\n    if (!transform) return noop;\n    var x0,\n        y0,\n        kx = transform.scale[0],\n        ky = transform.scale[1],\n        dx = transform.translate[0],\n        dy = transform.translate[1];\n    return function(point, i) {\n      if (!i) x0 = y0 = 0;\n      var x1 = Math.round((point[0] - dx) / kx),\n          y1 = Math.round((point[1] - dy) / ky);\n      point[0] = x1 - x0;\n      point[1] = y1 - y0;\n      x0 = x1;\n      y0 = y1;\n    };\n  }\n\n  function reverse(array, n) {\n    var t, j = array.length, i = j - n;\n    while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n  }\n\n  function bisect(a, x) {\n    var lo = 0, hi = a.length;\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (a[mid] < x) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function feature(topology, o) {\n    return o.type === \"GeometryCollection\" ? {\n      type: \"FeatureCollection\",\n      features: o.geometries.map(function(o) { return feature$1(topology, o); })\n    } : feature$1(topology, o);\n  }\n\n  function feature$1(topology, o) {\n    var f = {\n      type: \"Feature\",\n      id: o.id,\n      properties: o.properties || {},\n      geometry: object(topology, o)\n    };\n    if (o.id == null) delete f.id;\n    return f;\n  }\n\n  function object(topology, o) {\n    var absolute = transformAbsolute(topology.transform),\n        arcs = topology.arcs;\n\n    function arc(i, points) {\n      if (points.length) points.pop();\n      for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length, p; k < n; ++k) {\n        points.push(p = a[k].slice());\n        absolute(p, k);\n      }\n      if (i < 0) reverse(points, n);\n    }\n\n    function point(p) {\n      p = p.slice();\n      absolute(p, 0);\n      return p;\n    }\n\n    function line(arcs) {\n      var points = [];\n      for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n      if (points.length < 2) points.push(points[0].slice());\n      return points;\n    }\n\n    function ring(arcs) {\n      var points = line(arcs);\n      while (points.length < 4) points.push(points[0].slice());\n      return points;\n    }\n\n    function polygon(arcs) {\n      return arcs.map(ring);\n    }\n\n    function geometry(o) {\n      var t = o.type;\n      return t === \"GeometryCollection\" ? {type: t, geometries: o.geometries.map(geometry)}\n          : t in geometryType ? {type: t, coordinates: geometryType[t](o)}\n          : null;\n    }\n\n    var geometryType = {\n      Point: function(o) { return point(o.coordinates); },\n      MultiPoint: function(o) { return o.coordinates.map(point); },\n      LineString: function(o) { return line(o.arcs); },\n      MultiLineString: function(o) { return o.arcs.map(line); },\n      Polygon: function(o) { return polygon(o.arcs); },\n      MultiPolygon: function(o) { return o.arcs.map(polygon); }\n    };\n\n    return geometry(o);\n  }\n\n  function stitchArcs(topology, arcs) {\n    var stitchedArcs = {},\n        fragmentByStart = {},\n        fragmentByEnd = {},\n        fragments = [],\n        emptyIndex = -1;\n\n    // Stitch empty arcs first, since they may be subsumed by other arcs.\n    arcs.forEach(function(i, j) {\n      var arc = topology.arcs[i < 0 ? ~i : i], t;\n      if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n        t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n      }\n    });\n\n    arcs.forEach(function(i) {\n      var e = ends(i),\n          start = e[0],\n          end = e[1],\n          f, g;\n\n      if (f = fragmentByEnd[start]) {\n        delete fragmentByEnd[f.end];\n        f.push(i);\n        f.end = end;\n        if (g = fragmentByStart[end]) {\n          delete fragmentByStart[g.start];\n          var fg = g === f ? f : f.concat(g);\n          fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n        } else {\n          fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        }\n      } else if (f = fragmentByStart[end]) {\n        delete fragmentByStart[f.start];\n        f.unshift(i);\n        f.start = start;\n        if (g = fragmentByEnd[start]) {\n          delete fragmentByEnd[g.end];\n          var gf = g === f ? f : g.concat(f);\n          fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n        } else {\n          fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        }\n      } else {\n        f = [i];\n        fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n      }\n    });\n\n    function ends(i) {\n      var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n      if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n      else p1 = arc[arc.length - 1];\n      return i < 0 ? [p1, p0] : [p0, p1];\n    }\n\n    function flush(fragmentByEnd, fragmentByStart) {\n      for (var k in fragmentByEnd) {\n        var f = fragmentByEnd[k];\n        delete fragmentByStart[f.start];\n        delete f.start;\n        delete f.end;\n        f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n        fragments.push(f);\n      }\n    }\n\n    flush(fragmentByEnd, fragmentByStart);\n    flush(fragmentByStart, fragmentByEnd);\n    arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n    return fragments;\n  }\n\n  function mesh(topology) {\n    return object(topology, meshArcs.apply(this, arguments));\n  }\n\n  function meshArcs(topology, o, filter) {\n    var arcs = [];\n\n    function arc(i) {\n      var j = i < 0 ? ~i : i;\n      (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n    }\n\n    function line(arcs) {\n      arcs.forEach(arc);\n    }\n\n    function polygon(arcs) {\n      arcs.forEach(line);\n    }\n\n    function geometry(o) {\n      if (o.type === \"GeometryCollection\") o.geometries.forEach(geometry);\n      else if (o.type in geometryType) geom = o, geometryType[o.type](o.arcs);\n    }\n\n    if (arguments.length > 1) {\n      var geomsByArc = [],\n          geom;\n\n      var geometryType = {\n        LineString: line,\n        MultiLineString: polygon,\n        Polygon: polygon,\n        MultiPolygon: function(arcs) { arcs.forEach(polygon); }\n      };\n\n      geometry(o);\n\n      geomsByArc.forEach(arguments.length < 3\n          ? function(geoms) { arcs.push(geoms[0].i); }\n          : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\n    } else {\n      for (var i = 0, n = topology.arcs.length; i < n; ++i) arcs.push(i);\n    }\n\n    return {type: \"MultiLineString\", arcs: stitchArcs(topology, arcs)};\n  }\n\n  function cartesianTriangleArea(triangle) {\n    var a = triangle[0], b = triangle[1], c = triangle[2];\n    return Math.abs((a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]));\n  }\n\n  function ring(ring) {\n    var i = -1,\n        n = ring.length,\n        a,\n        b = ring[n - 1],\n        area = 0;\n\n    while (++i < n) {\n      a = b;\n      b = ring[i];\n      area += a[0] * b[1] - a[1] * b[0];\n    }\n\n    return area / 2;\n  }\n\n  function merge(topology) {\n    return object(topology, mergeArcs.apply(this, arguments));\n  }\n\n  function mergeArcs(topology, objects) {\n    var polygonsByArc = {},\n        polygons = [],\n        components = [];\n\n    objects.forEach(function(o) {\n      if (o.type === \"Polygon\") register(o.arcs);\n      else if (o.type === \"MultiPolygon\") o.arcs.forEach(register);\n    });\n\n    function register(polygon) {\n      polygon.forEach(function(ring$$) {\n        ring$$.forEach(function(arc) {\n          (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n        });\n      });\n      polygons.push(polygon);\n    }\n\n    function area(ring$$) {\n      return Math.abs(ring(object(topology, {type: \"Polygon\", arcs: [ring$$]}).coordinates[0]));\n    }\n\n    polygons.forEach(function(polygon) {\n      if (!polygon._) {\n        var component = [],\n            neighbors = [polygon];\n        polygon._ = 1;\n        components.push(component);\n        while (polygon = neighbors.pop()) {\n          component.push(polygon);\n          polygon.forEach(function(ring$$) {\n            ring$$.forEach(function(arc) {\n              polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n                if (!polygon._) {\n                  polygon._ = 1;\n                  neighbors.push(polygon);\n                }\n              });\n            });\n          });\n        }\n      }\n    });\n\n    polygons.forEach(function(polygon) {\n      delete polygon._;\n    });\n\n    return {\n      type: \"MultiPolygon\",\n      arcs: components.map(function(polygons) {\n        var arcs = [], n;\n\n        // Extract the exterior (unique) arcs.\n        polygons.forEach(function(polygon) {\n          polygon.forEach(function(ring$$) {\n            ring$$.forEach(function(arc) {\n              if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n                arcs.push(arc);\n              }\n            });\n          });\n        });\n\n        // Stitch the arcs into one or more rings.\n        arcs = stitchArcs(topology, arcs);\n\n        // If more than one ring is returned,\n        // at most one of these rings can be the exterior;\n        // choose the one with the greatest absolute area.\n        if ((n = arcs.length) > 1) {\n          for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n            if ((ki = area(arcs[i])) > k) {\n              t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n            }\n          }\n        }\n\n        return arcs;\n      })\n    };\n  }\n\n  function neighbors(objects) {\n    var indexesByArc = {}, // arc index -> array of object indexes\n        neighbors = objects.map(function() { return []; });\n\n    function line(arcs, i) {\n      arcs.forEach(function(a) {\n        if (a < 0) a = ~a;\n        var o = indexesByArc[a];\n        if (o) o.push(i);\n        else indexesByArc[a] = [i];\n      });\n    }\n\n    function polygon(arcs, i) {\n      arcs.forEach(function(arc) { line(arc, i); });\n    }\n\n    function geometry(o, i) {\n      if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\n      else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n    }\n\n    var geometryType = {\n      LineString: line,\n      MultiLineString: polygon,\n      Polygon: polygon,\n      MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\n    };\n\n    objects.forEach(geometry);\n\n    for (var i in indexesByArc) {\n      for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n        for (var k = j + 1; k < m; ++k) {\n          var ij = indexes[j], ik = indexes[k], n;\n          if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n          if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n        }\n      }\n    }\n\n    return neighbors;\n  }\n\n  function compareArea(a, b) {\n    return a[1][2] - b[1][2];\n  }\n\n  function minAreaHeap() {\n    var heap = {},\n        array = [],\n        size = 0;\n\n    heap.push = function(object) {\n      up(array[object._ = size] = object, size++);\n      return size;\n    };\n\n    heap.pop = function() {\n      if (size <= 0) return;\n      var removed = array[0], object;\n      if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n      return removed;\n    };\n\n    heap.remove = function(removed) {\n      var i = removed._, object;\n      if (array[i] !== removed) return; // invalid request\n      if (i !== --size) object = array[size], (compareArea(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n      return i;\n    };\n\n    function up(object, i) {\n      while (i > 0) {\n        var j = ((i + 1) >> 1) - 1,\n            parent = array[j];\n        if (compareArea(object, parent) >= 0) break;\n        array[parent._ = i] = parent;\n        array[object._ = i = j] = object;\n      }\n    }\n\n    function down(object, i) {\n      while (true) {\n        var r = (i + 1) << 1,\n            l = r - 1,\n            j = i,\n            child = array[j];\n        if (l < size && compareArea(array[l], child) < 0) child = array[j = l];\n        if (r < size && compareArea(array[r], child) < 0) child = array[j = r];\n        if (j === i) break;\n        array[child._ = i] = child;\n        array[object._ = i = j] = object;\n      }\n    }\n\n    return heap;\n  }\n\n  function presimplify(topology, triangleArea) {\n    var absolute = transformAbsolute(topology.transform),\n        relative = transformRelative(topology.transform),\n        heap = minAreaHeap();\n\n    if (!triangleArea) triangleArea = cartesianTriangleArea;\n\n    topology.arcs.forEach(function(arc) {\n      var triangles = [],\n          maxArea = 0,\n          triangle,\n          i,\n          n,\n          p;\n\n      // To store each point’s effective area, we create a new array rather than\n      // extending the passed-in point to workaround a Chrome/V8 bug (getting\n      // stuck in smi mode). For midpoints, the initial effective area of\n      // Infinity will be computed in the next step.\n      for (i = 0, n = arc.length; i < n; ++i) {\n        p = arc[i];\n        absolute(arc[i] = [p[0], p[1], Infinity], i);\n      }\n\n      for (i = 1, n = arc.length - 1; i < n; ++i) {\n        triangle = arc.slice(i - 1, i + 2);\n        triangle[1][2] = triangleArea(triangle);\n        triangles.push(triangle);\n        heap.push(triangle);\n      }\n\n      for (i = 0, n = triangles.length; i < n; ++i) {\n        triangle = triangles[i];\n        triangle.previous = triangles[i - 1];\n        triangle.next = triangles[i + 1];\n      }\n\n      while (triangle = heap.pop()) {\n        var previous = triangle.previous,\n            next = triangle.next;\n\n        // If the area of the current point is less than that of the previous point\n        // to be eliminated, use the latter's area instead. This ensures that the\n        // current point cannot be eliminated without eliminating previously-\n        // eliminated points.\n        if (triangle[1][2] < maxArea) triangle[1][2] = maxArea;\n        else maxArea = triangle[1][2];\n\n        if (previous) {\n          previous.next = next;\n          previous[2] = triangle[2];\n          update(previous);\n        }\n\n        if (next) {\n          next.previous = previous;\n          next[0] = triangle[0];\n          update(next);\n        }\n      }\n\n      arc.forEach(relative);\n    });\n\n    function update(triangle) {\n      heap.remove(triangle);\n      triangle[1][2] = triangleArea(triangle);\n      heap.push(triangle);\n    }\n\n    return topology;\n  }\n\n  var version = \"1.6.26\";\n\n  exports.version = version;\n  exports.mesh = mesh;\n  exports.meshArcs = meshArcs;\n  exports.merge = merge;\n  exports.mergeArcs = mergeArcs;\n  exports.feature = feature;\n  exports.neighbors = neighbors;\n  exports.presimplify = presimplify;\n\n}));","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar log_levels_1 = require(\"./enum/log-levels\");\nvar VueLogger = /** @class */ (function () {\n    function VueLogger() {\n        this.errorMessage = \"Provided options for vuejs-logger are not valid.\";\n        this.logLevels = Object.keys(log_levels_1.LogLevels).map(function (l) { return l.toLowerCase(); });\n    }\n    VueLogger.prototype.install = function (Vue, options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        if (this.isValidOptions(options, this.logLevels)) {\n            Vue.$log = this.initLoggerInstance(options, this.logLevels);\n            Vue.prototype.$log = Vue.$log;\n        }\n        else {\n            throw new Error(this.errorMessage);\n        }\n    };\n    VueLogger.prototype.isValidOptions = function (options, logLevels) {\n        if (!(options.logLevel && typeof options.logLevel === \"string\" && logLevels.indexOf(options.logLevel) > -1)) {\n            return false;\n        }\n        if (options.stringifyArguments && typeof options.stringifyArguments !== \"boolean\") {\n            return false;\n        }\n        if (options.showLogLevel && typeof options.showLogLevel !== \"boolean\") {\n            return false;\n        }\n        if (options.showConsoleColors && typeof options.showConsoleColors !== \"boolean\") {\n            return false;\n        }\n        if (options.separator && (typeof options.separator !== \"string\" || (typeof options.separator === \"string\" && options.separator.length > 3))) {\n            return false;\n        }\n        if (typeof options.isEnabled !== \"boolean\") {\n            return false;\n        }\n        return !(options.showMethodName && typeof options.showMethodName !== \"boolean\");\n    };\n    VueLogger.prototype.getMethodName = function () {\n        var error = {};\n        try {\n            throw new Error(\"\");\n        }\n        catch (e) {\n            error = e;\n        }\n        // IE9 does not have .stack property\n        if (error.stack === undefined) {\n            return \"\";\n        }\n        var stackTrace = error.stack.split(\"\\n\")[3];\n        if (/ /.test(stackTrace)) {\n            stackTrace = stackTrace.trim().split(\" \")[1];\n        }\n        if (stackTrace && stackTrace.indexOf(\".\") > -1) {\n            stackTrace = stackTrace.split(\".\")[1];\n        }\n        return stackTrace;\n    };\n    VueLogger.prototype.initLoggerInstance = function (options, logLevels) {\n        var _this = this;\n        var logger = {};\n        logLevels.forEach(function (logLevel) {\n            if (logLevels.indexOf(logLevel) >= logLevels.indexOf(options.logLevel) && options.isEnabled) {\n                logger[logLevel] = function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var methodName = _this.getMethodName();\n                    var methodNamePrefix = options.showMethodName ? methodName + (\" \" + options.separator + \" \") : \"\";\n                    var logLevelPrefix = options.showLogLevel ? logLevel + (\" \" + options.separator + \" \") : \"\";\n                    var formattedArguments = options.stringifyArguments ? args.map(function (a) { return JSON.stringify(a); }) : args;\n                    var logMessage = logLevelPrefix + \" \" + methodNamePrefix;\n                    _this.printLogMessage(logLevel, logMessage, options.showConsoleColors, formattedArguments);\n                    return logMessage + \" \" + formattedArguments.toString();\n                };\n            }\n            else {\n                logger[logLevel] = function () { return undefined; };\n            }\n        });\n        return logger;\n    };\n    VueLogger.prototype.printLogMessage = function (logLevel, logMessage, showConsoleColors, formattedArguments) {\n        if (showConsoleColors && (logLevel === \"warn\" || logLevel === \"error\" || logLevel === \"fatal\")) {\n            console[logLevel === \"fatal\" ? \"error\" : logLevel].apply(console, __spreadArrays([logMessage], formattedArguments));\n        }\n        else {\n            console.log.apply(console, __spreadArrays([logMessage], formattedArguments));\n        }\n    };\n    VueLogger.prototype.getDefaultOptions = function () {\n        return {\n            isEnabled: true,\n            logLevel: log_levels_1.LogLevels.DEBUG,\n            separator: \"|\",\n            showConsoleColors: false,\n            showLogLevel: false,\n            showMethodName: false,\n            stringifyArguments: false,\n        };\n    };\n    return VueLogger;\n}());\nexports.default = new VueLogger();\n//# sourceMappingURL=vue-logger.js.map","/*!\n  * vue-router v3.5.4\n  * (c) 2022 Evan You\n  * @license MIT\n  */\n/*  */\n\nfunction assert (condition, message) {\n  if (!condition) {\n    throw new Error((\"[vue-router] \" + message))\n  }\n}\n\nfunction warn (condition, message) {\n  if (!condition) {\n    typeof console !== 'undefined' && console.warn((\"[vue-router] \" + message));\n  }\n}\n\nfunction extend (a, b) {\n  for (var key in b) {\n    a[key] = b[key];\n  }\n  return a\n}\n\n/*  */\n\nvar encodeReserveRE = /[!'()*]/g;\nvar encodeReserveReplacer = function (c) { return '%' + c.charCodeAt(0).toString(16); };\nvar commaRE = /%2C/g;\n\n// fixed encodeURIComponent which is more conformant to RFC3986:\n// - escapes [!'()*]\n// - preserve commas\nvar encode = function (str) { return encodeURIComponent(str)\n    .replace(encodeReserveRE, encodeReserveReplacer)\n    .replace(commaRE, ','); };\n\nfunction decode (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    if (process.env.NODE_ENV !== 'production') {\n      warn(false, (\"Error decoding \\\"\" + str + \"\\\". Leaving it intact.\"));\n    }\n  }\n  return str\n}\n\nfunction resolveQuery (\n  query,\n  extraQuery,\n  _parseQuery\n) {\n  if ( extraQuery === void 0 ) extraQuery = {};\n\n  var parse = _parseQuery || parseQuery;\n  var parsedQuery;\n  try {\n    parsedQuery = parse(query || '');\n  } catch (e) {\n    process.env.NODE_ENV !== 'production' && warn(false, e.message);\n    parsedQuery = {};\n  }\n  for (var key in extraQuery) {\n    var value = extraQuery[key];\n    parsedQuery[key] = Array.isArray(value)\n      ? value.map(castQueryParamValue)\n      : castQueryParamValue(value);\n  }\n  return parsedQuery\n}\n\nvar castQueryParamValue = function (value) { return (value == null || typeof value === 'object' ? value : String(value)); };\n\nfunction parseQuery (query) {\n  var res = {};\n\n  query = query.trim().replace(/^(\\?|#|&)/, '');\n\n  if (!query) {\n    return res\n  }\n\n  query.split('&').forEach(function (param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    var key = decode(parts.shift());\n    var val = parts.length > 0 ? decode(parts.join('=')) : null;\n\n    if (res[key] === undefined) {\n      res[key] = val;\n    } else if (Array.isArray(res[key])) {\n      res[key].push(val);\n    } else {\n      res[key] = [res[key], val];\n    }\n  });\n\n  return res\n}\n\nfunction stringifyQuery (obj) {\n  var res = obj\n    ? Object.keys(obj)\n      .map(function (key) {\n        var val = obj[key];\n\n        if (val === undefined) {\n          return ''\n        }\n\n        if (val === null) {\n          return encode(key)\n        }\n\n        if (Array.isArray(val)) {\n          var result = [];\n          val.forEach(function (val2) {\n            if (val2 === undefined) {\n              return\n            }\n            if (val2 === null) {\n              result.push(encode(key));\n            } else {\n              result.push(encode(key) + '=' + encode(val2));\n            }\n          });\n          return result.join('&')\n        }\n\n        return encode(key) + '=' + encode(val)\n      })\n      .filter(function (x) { return x.length > 0; })\n      .join('&')\n    : null;\n  return res ? (\"?\" + res) : ''\n}\n\n/*  */\n\nvar trailingSlashRE = /\\/?$/;\n\nfunction createRoute (\n  record,\n  location,\n  redirectedFrom,\n  router\n) {\n  var stringifyQuery = router && router.options.stringifyQuery;\n\n  var query = location.query || {};\n  try {\n    query = clone(query);\n  } catch (e) {}\n\n  var route = {\n    name: location.name || (record && record.name),\n    meta: (record && record.meta) || {},\n    path: location.path || '/',\n    hash: location.hash || '',\n    query: query,\n    params: location.params || {},\n    fullPath: getFullPath(location, stringifyQuery),\n    matched: record ? formatMatch(record) : []\n  };\n  if (redirectedFrom) {\n    route.redirectedFrom = getFullPath(redirectedFrom, stringifyQuery);\n  }\n  return Object.freeze(route)\n}\n\nfunction clone (value) {\n  if (Array.isArray(value)) {\n    return value.map(clone)\n  } else if (value && typeof value === 'object') {\n    var res = {};\n    for (var key in value) {\n      res[key] = clone(value[key]);\n    }\n    return res\n  } else {\n    return value\n  }\n}\n\n// the starting route that represents the initial state\nvar START = createRoute(null, {\n  path: '/'\n});\n\nfunction formatMatch (record) {\n  var res = [];\n  while (record) {\n    res.unshift(record);\n    record = record.parent;\n  }\n  return res\n}\n\nfunction getFullPath (\n  ref,\n  _stringifyQuery\n) {\n  var path = ref.path;\n  var query = ref.query; if ( query === void 0 ) query = {};\n  var hash = ref.hash; if ( hash === void 0 ) hash = '';\n\n  var stringify = _stringifyQuery || stringifyQuery;\n  return (path || '/') + stringify(query) + hash\n}\n\nfunction isSameRoute (a, b, onlyPath) {\n  if (b === START) {\n    return a === b\n  } else if (!b) {\n    return false\n  } else if (a.path && b.path) {\n    return a.path.replace(trailingSlashRE, '') === b.path.replace(trailingSlashRE, '') && (onlyPath ||\n      a.hash === b.hash &&\n      isObjectEqual(a.query, b.query))\n  } else if (a.name && b.name) {\n    return (\n      a.name === b.name &&\n      (onlyPath || (\n        a.hash === b.hash &&\n      isObjectEqual(a.query, b.query) &&\n      isObjectEqual(a.params, b.params))\n      )\n    )\n  } else {\n    return false\n  }\n}\n\nfunction isObjectEqual (a, b) {\n  if ( a === void 0 ) a = {};\n  if ( b === void 0 ) b = {};\n\n  // handle null value #1566\n  if (!a || !b) { return a === b }\n  var aKeys = Object.keys(a).sort();\n  var bKeys = Object.keys(b).sort();\n  if (aKeys.length !== bKeys.length) {\n    return false\n  }\n  return aKeys.every(function (key, i) {\n    var aVal = a[key];\n    var bKey = bKeys[i];\n    if (bKey !== key) { return false }\n    var bVal = b[key];\n    // query values can be null and undefined\n    if (aVal == null || bVal == null) { return aVal === bVal }\n    // check nested equality\n    if (typeof aVal === 'object' && typeof bVal === 'object') {\n      return isObjectEqual(aVal, bVal)\n    }\n    return String(aVal) === String(bVal)\n  })\n}\n\nfunction isIncludedRoute (current, target) {\n  return (\n    current.path.replace(trailingSlashRE, '/').indexOf(\n      target.path.replace(trailingSlashRE, '/')\n    ) === 0 &&\n    (!target.hash || current.hash === target.hash) &&\n    queryIncludes(current.query, target.query)\n  )\n}\n\nfunction queryIncludes (current, target) {\n  for (var key in target) {\n    if (!(key in current)) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction handleRouteEntered (route) {\n  for (var i = 0; i < route.matched.length; i++) {\n    var record = route.matched[i];\n    for (var name in record.instances) {\n      var instance = record.instances[name];\n      var cbs = record.enteredCbs[name];\n      if (!instance || !cbs) { continue }\n      delete record.enteredCbs[name];\n      for (var i$1 = 0; i$1 < cbs.length; i$1++) {\n        if (!instance._isBeingDestroyed) { cbs[i$1](instance); }\n      }\n    }\n  }\n}\n\nvar View = {\n  name: 'RouterView',\n  functional: true,\n  props: {\n    name: {\n      type: String,\n      default: 'default'\n    }\n  },\n  render: function render (_, ref) {\n    var props = ref.props;\n    var children = ref.children;\n    var parent = ref.parent;\n    var data = ref.data;\n\n    // used by devtools to display a router-view badge\n    data.routerView = true;\n\n    // directly use parent context's createElement() function\n    // so that components rendered by router-view can resolve named slots\n    var h = parent.$createElement;\n    var name = props.name;\n    var route = parent.$route;\n    var cache = parent._routerViewCache || (parent._routerViewCache = {});\n\n    // determine current view depth, also check to see if the tree\n    // has been toggled inactive but kept-alive.\n    var depth = 0;\n    var inactive = false;\n    while (parent && parent._routerRoot !== parent) {\n      var vnodeData = parent.$vnode ? parent.$vnode.data : {};\n      if (vnodeData.routerView) {\n        depth++;\n      }\n      if (vnodeData.keepAlive && parent._directInactive && parent._inactive) {\n        inactive = true;\n      }\n      parent = parent.$parent;\n    }\n    data.routerViewDepth = depth;\n\n    // render previous view if the tree is inactive and kept-alive\n    if (inactive) {\n      var cachedData = cache[name];\n      var cachedComponent = cachedData && cachedData.component;\n      if (cachedComponent) {\n        // #2301\n        // pass props\n        if (cachedData.configProps) {\n          fillPropsinData(cachedComponent, data, cachedData.route, cachedData.configProps);\n        }\n        return h(cachedComponent, data, children)\n      } else {\n        // render previous empty view\n        return h()\n      }\n    }\n\n    var matched = route.matched[depth];\n    var component = matched && matched.components[name];\n\n    // render empty node if no matched route or no config component\n    if (!matched || !component) {\n      cache[name] = null;\n      return h()\n    }\n\n    // cache component\n    cache[name] = { component: component };\n\n    // attach instance registration hook\n    // this will be called in the instance's injected lifecycle hooks\n    data.registerRouteInstance = function (vm, val) {\n      // val could be undefined for unregistration\n      var current = matched.instances[name];\n      if (\n        (val && current !== vm) ||\n        (!val && current === vm)\n      ) {\n        matched.instances[name] = val;\n      }\n    }\n\n    // also register instance in prepatch hook\n    // in case the same component instance is reused across different routes\n    ;(data.hook || (data.hook = {})).prepatch = function (_, vnode) {\n      matched.instances[name] = vnode.componentInstance;\n    };\n\n    // register instance in init hook\n    // in case kept-alive component be actived when routes changed\n    data.hook.init = function (vnode) {\n      if (vnode.data.keepAlive &&\n        vnode.componentInstance &&\n        vnode.componentInstance !== matched.instances[name]\n      ) {\n        matched.instances[name] = vnode.componentInstance;\n      }\n\n      // if the route transition has already been confirmed then we weren't\n      // able to call the cbs during confirmation as the component was not\n      // registered yet, so we call it here.\n      handleRouteEntered(route);\n    };\n\n    var configProps = matched.props && matched.props[name];\n    // save route and configProps in cache\n    if (configProps) {\n      extend(cache[name], {\n        route: route,\n        configProps: configProps\n      });\n      fillPropsinData(component, data, route, configProps);\n    }\n\n    return h(component, data, children)\n  }\n};\n\nfunction fillPropsinData (component, data, route, configProps) {\n  // resolve props\n  var propsToPass = data.props = resolveProps(route, configProps);\n  if (propsToPass) {\n    // clone to prevent mutation\n    propsToPass = data.props = extend({}, propsToPass);\n    // pass non-declared props as attrs\n    var attrs = data.attrs = data.attrs || {};\n    for (var key in propsToPass) {\n      if (!component.props || !(key in component.props)) {\n        attrs[key] = propsToPass[key];\n        delete propsToPass[key];\n      }\n    }\n  }\n}\n\nfunction resolveProps (route, config) {\n  switch (typeof config) {\n    case 'undefined':\n      return\n    case 'object':\n      return config\n    case 'function':\n      return config(route)\n    case 'boolean':\n      return config ? route.params : undefined\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        warn(\n          false,\n          \"props in \\\"\" + (route.path) + \"\\\" is a \" + (typeof config) + \", \" +\n          \"expecting an object, function or boolean.\"\n        );\n      }\n  }\n}\n\n/*  */\n\nfunction resolvePath (\n  relative,\n  base,\n  append\n) {\n  var firstChar = relative.charAt(0);\n  if (firstChar === '/') {\n    return relative\n  }\n\n  if (firstChar === '?' || firstChar === '#') {\n    return base + relative\n  }\n\n  var stack = base.split('/');\n\n  // remove trailing segment if:\n  // - not appending\n  // - appending to trailing slash (last segment is empty)\n  if (!append || !stack[stack.length - 1]) {\n    stack.pop();\n  }\n\n  // resolve relative path\n  var segments = relative.replace(/^\\//, '').split('/');\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    if (segment === '..') {\n      stack.pop();\n    } else if (segment !== '.') {\n      stack.push(segment);\n    }\n  }\n\n  // ensure leading slash\n  if (stack[0] !== '') {\n    stack.unshift('');\n  }\n\n  return stack.join('/')\n}\n\nfunction parsePath (path) {\n  var hash = '';\n  var query = '';\n\n  var hashIndex = path.indexOf('#');\n  if (hashIndex >= 0) {\n    hash = path.slice(hashIndex);\n    path = path.slice(0, hashIndex);\n  }\n\n  var queryIndex = path.indexOf('?');\n  if (queryIndex >= 0) {\n    query = path.slice(queryIndex + 1);\n    path = path.slice(0, queryIndex);\n  }\n\n  return {\n    path: path,\n    query: query,\n    hash: hash\n  }\n}\n\nfunction cleanPath (path) {\n  return path.replace(/\\/(?:\\s*\\/)+/g, '/')\n}\n\nvar isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {string}  str\n * @param  {Object=} options\n * @return {!Array}\n */\nfunction parse (str, options) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var defaultDelimiter = options && options.delimiter || '/';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    var next = str[index];\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var modifier = res[6];\n    var asterisk = res[7];\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var partial = prefix != null && next != null && next !== prefix;\n    var repeat = modifier === '+' || modifier === '*';\n    var optional = modifier === '?' || modifier === '*';\n    var delimiter = res[2] || defaultDelimiter;\n    var pattern = capture || group;\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      asterisk: !!asterisk,\n      pattern: pattern ? escapeGroup(pattern) : (asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?')\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {string}             str\n * @param  {Object=}            options\n * @return {!function(Object=, Object=)}\n */\nfunction compile (str, options) {\n  return tokensToFunction(parse(str, options), options)\n}\n\n/**\n * Prettier encoding of URI path segments.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeURIComponentPretty (str) {\n  return encodeURI(str).replace(/[\\/?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeAsterisk (str) {\n  return encodeURI(str).replace(/[?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens, options) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$', flags(options));\n    }\n  }\n\n  return function (obj, opts) {\n    var path = '';\n    var data = obj || {};\n    var options = opts || {};\n    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent;\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          // Prepend partial segment prefixes.\n          if (token.partial) {\n            path += token.prefix;\n          }\n\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received `' + JSON.stringify(value) + '`')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received `' + JSON.stringify(segment) + '`')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = token.asterisk ? encodeAsterisk(value) : encode(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {string} str\n * @return {string}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {string} group\n * @return {string}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {!RegExp} re\n * @param  {Array}   keys\n * @return {!RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {string}\n */\nfunction flags (options) {\n  return options && options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {!RegExp} path\n * @param  {!Array}  keys\n * @return {!RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        asterisk: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {!Array}  path\n * @param  {Array}   keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {string}  path\n * @param  {!Array}  keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {!Array}          tokens\n * @param  {(Array|Object)=} keys\n * @param  {Object=}         options\n * @return {!RegExp}\n */\nfunction tokensToRegExp (tokens, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = '(?:' + token.pattern + ')';\n\n      keys.push(token);\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (!token.partial) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = prefix + '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  var delimiter = escapeString(options.delimiter || '/');\n  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter;\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) + '(?:' + delimiter + '(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)';\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys)\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(string|RegExp|Array)} path\n * @param  {(Array|Object)=}       keys\n * @param  {Object=}               options\n * @return {!RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, /** @type {!Array} */ (keys))\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(/** @type {!Array} */ (path), /** @type {!Array} */ (keys), options)\n  }\n\n  return stringToRegexp(/** @type {string} */ (path), /** @type {!Array} */ (keys), options)\n}\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/*  */\n\n// $flow-disable-line\nvar regexpCompileCache = Object.create(null);\n\nfunction fillParams (\n  path,\n  params,\n  routeMsg\n) {\n  params = params || {};\n  try {\n    var filler =\n      regexpCompileCache[path] ||\n      (regexpCompileCache[path] = pathToRegexp_1.compile(path));\n\n    // Fix #2505 resolving asterisk routes { name: 'not-found', params: { pathMatch: '/not-found' }}\n    // and fix #3106 so that you can work with location descriptor object having params.pathMatch equal to empty string\n    if (typeof params.pathMatch === 'string') { params[0] = params.pathMatch; }\n\n    return filler(params, { pretty: true })\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      // Fix #3072 no warn if `pathMatch` is string\n      warn(typeof params.pathMatch === 'string', (\"missing param for \" + routeMsg + \": \" + (e.message)));\n    }\n    return ''\n  } finally {\n    // delete the 0 if it was added\n    delete params[0];\n  }\n}\n\n/*  */\n\nfunction normalizeLocation (\n  raw,\n  current,\n  append,\n  router\n) {\n  var next = typeof raw === 'string' ? { path: raw } : raw;\n  // named target\n  if (next._normalized) {\n    return next\n  } else if (next.name) {\n    next = extend({}, raw);\n    var params = next.params;\n    if (params && typeof params === 'object') {\n      next.params = extend({}, params);\n    }\n    return next\n  }\n\n  // relative params\n  if (!next.path && next.params && current) {\n    next = extend({}, next);\n    next._normalized = true;\n    var params$1 = extend(extend({}, current.params), next.params);\n    if (current.name) {\n      next.name = current.name;\n      next.params = params$1;\n    } else if (current.matched.length) {\n      var rawPath = current.matched[current.matched.length - 1].path;\n      next.path = fillParams(rawPath, params$1, (\"path \" + (current.path)));\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn(false, \"relative params navigation requires a current route.\");\n    }\n    return next\n  }\n\n  var parsedPath = parsePath(next.path || '');\n  var basePath = (current && current.path) || '/';\n  var path = parsedPath.path\n    ? resolvePath(parsedPath.path, basePath, append || next.append)\n    : basePath;\n\n  var query = resolveQuery(\n    parsedPath.query,\n    next.query,\n    router && router.options.parseQuery\n  );\n\n  var hash = next.hash || parsedPath.hash;\n  if (hash && hash.charAt(0) !== '#') {\n    hash = \"#\" + hash;\n  }\n\n  return {\n    _normalized: true,\n    path: path,\n    query: query,\n    hash: hash\n  }\n}\n\n/*  */\n\n// work around weird flow bug\nvar toTypes = [String, Object];\nvar eventTypes = [String, Array];\n\nvar noop = function () {};\n\nvar warnedCustomSlot;\nvar warnedTagProp;\nvar warnedEventProp;\n\nvar Link = {\n  name: 'RouterLink',\n  props: {\n    to: {\n      type: toTypes,\n      required: true\n    },\n    tag: {\n      type: String,\n      default: 'a'\n    },\n    custom: Boolean,\n    exact: Boolean,\n    exactPath: Boolean,\n    append: Boolean,\n    replace: Boolean,\n    activeClass: String,\n    exactActiveClass: String,\n    ariaCurrentValue: {\n      type: String,\n      default: 'page'\n    },\n    event: {\n      type: eventTypes,\n      default: 'click'\n    }\n  },\n  render: function render (h) {\n    var this$1 = this;\n\n    var router = this.$router;\n    var current = this.$route;\n    var ref = router.resolve(\n      this.to,\n      current,\n      this.append\n    );\n    var location = ref.location;\n    var route = ref.route;\n    var href = ref.href;\n\n    var classes = {};\n    var globalActiveClass = router.options.linkActiveClass;\n    var globalExactActiveClass = router.options.linkExactActiveClass;\n    // Support global empty active class\n    var activeClassFallback =\n      globalActiveClass == null ? 'router-link-active' : globalActiveClass;\n    var exactActiveClassFallback =\n      globalExactActiveClass == null\n        ? 'router-link-exact-active'\n        : globalExactActiveClass;\n    var activeClass =\n      this.activeClass == null ? activeClassFallback : this.activeClass;\n    var exactActiveClass =\n      this.exactActiveClass == null\n        ? exactActiveClassFallback\n        : this.exactActiveClass;\n\n    var compareTarget = route.redirectedFrom\n      ? createRoute(null, normalizeLocation(route.redirectedFrom), null, router)\n      : route;\n\n    classes[exactActiveClass] = isSameRoute(current, compareTarget, this.exactPath);\n    classes[activeClass] = this.exact || this.exactPath\n      ? classes[exactActiveClass]\n      : isIncludedRoute(current, compareTarget);\n\n    var ariaCurrentValue = classes[exactActiveClass] ? this.ariaCurrentValue : null;\n\n    var handler = function (e) {\n      if (guardEvent(e)) {\n        if (this$1.replace) {\n          router.replace(location, noop);\n        } else {\n          router.push(location, noop);\n        }\n      }\n    };\n\n    var on = { click: guardEvent };\n    if (Array.isArray(this.event)) {\n      this.event.forEach(function (e) {\n        on[e] = handler;\n      });\n    } else {\n      on[this.event] = handler;\n    }\n\n    var data = { class: classes };\n\n    var scopedSlot =\n      !this.$scopedSlots.$hasNormal &&\n      this.$scopedSlots.default &&\n      this.$scopedSlots.default({\n        href: href,\n        route: route,\n        navigate: handler,\n        isActive: classes[activeClass],\n        isExactActive: classes[exactActiveClass]\n      });\n\n    if (scopedSlot) {\n      if (process.env.NODE_ENV !== 'production' && !this.custom) {\n        !warnedCustomSlot && warn(false, 'In Vue Router 4, the v-slot API will by default wrap its content with an <a> element. Use the custom prop to remove this warning:\\n<router-link v-slot=\"{ navigate, href }\" custom></router-link>\\n');\n        warnedCustomSlot = true;\n      }\n      if (scopedSlot.length === 1) {\n        return scopedSlot[0]\n      } else if (scopedSlot.length > 1 || !scopedSlot.length) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\n            false,\n            (\"<router-link> with to=\\\"\" + (this.to) + \"\\\" is trying to use a scoped slot but it didn't provide exactly one child. Wrapping the content with a span element.\")\n          );\n        }\n        return scopedSlot.length === 0 ? h() : h('span', {}, scopedSlot)\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if ('tag' in this.$options.propsData && !warnedTagProp) {\n        warn(\n          false,\n          \"<router-link>'s tag prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.\"\n        );\n        warnedTagProp = true;\n      }\n      if ('event' in this.$options.propsData && !warnedEventProp) {\n        warn(\n          false,\n          \"<router-link>'s event prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.\"\n        );\n        warnedEventProp = true;\n      }\n    }\n\n    if (this.tag === 'a') {\n      data.on = on;\n      data.attrs = { href: href, 'aria-current': ariaCurrentValue };\n    } else {\n      // find the first <a> child and apply listener and href\n      var a = findAnchor(this.$slots.default);\n      if (a) {\n        // in case the <a> is a static node\n        a.isStatic = false;\n        var aData = (a.data = extend({}, a.data));\n        aData.on = aData.on || {};\n        // transform existing events in both objects into arrays so we can push later\n        for (var event in aData.on) {\n          var handler$1 = aData.on[event];\n          if (event in on) {\n            aData.on[event] = Array.isArray(handler$1) ? handler$1 : [handler$1];\n          }\n        }\n        // append new listeners for router-link\n        for (var event$1 in on) {\n          if (event$1 in aData.on) {\n            // on[event] is always a function\n            aData.on[event$1].push(on[event$1]);\n          } else {\n            aData.on[event$1] = handler;\n          }\n        }\n\n        var aAttrs = (a.data.attrs = extend({}, a.data.attrs));\n        aAttrs.href = href;\n        aAttrs['aria-current'] = ariaCurrentValue;\n      } else {\n        // doesn't have <a> child, apply listener to self\n        data.on = on;\n      }\n    }\n\n    return h(this.tag, data, this.$slots.default)\n  }\n};\n\nfunction guardEvent (e) {\n  // don't redirect with control keys\n  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) { return }\n  // don't redirect when preventDefault called\n  if (e.defaultPrevented) { return }\n  // don't redirect on right click\n  if (e.button !== undefined && e.button !== 0) { return }\n  // don't redirect if `target=\"_blank\"`\n  if (e.currentTarget && e.currentTarget.getAttribute) {\n    var target = e.currentTarget.getAttribute('target');\n    if (/\\b_blank\\b/i.test(target)) { return }\n  }\n  // this may be a Weex event which doesn't have this method\n  if (e.preventDefault) {\n    e.preventDefault();\n  }\n  return true\n}\n\nfunction findAnchor (children) {\n  if (children) {\n    var child;\n    for (var i = 0; i < children.length; i++) {\n      child = children[i];\n      if (child.tag === 'a') {\n        return child\n      }\n      if (child.children && (child = findAnchor(child.children))) {\n        return child\n      }\n    }\n  }\n}\n\nvar _Vue;\n\nfunction install (Vue) {\n  if (install.installed && _Vue === Vue) { return }\n  install.installed = true;\n\n  _Vue = Vue;\n\n  var isDef = function (v) { return v !== undefined; };\n\n  var registerInstance = function (vm, callVal) {\n    var i = vm.$options._parentVnode;\n    if (isDef(i) && isDef(i = i.data) && isDef(i = i.registerRouteInstance)) {\n      i(vm, callVal);\n    }\n  };\n\n  Vue.mixin({\n    beforeCreate: function beforeCreate () {\n      if (isDef(this.$options.router)) {\n        this._routerRoot = this;\n        this._router = this.$options.router;\n        this._router.init(this);\n        Vue.util.defineReactive(this, '_route', this._router.history.current);\n      } else {\n        this._routerRoot = (this.$parent && this.$parent._routerRoot) || this;\n      }\n      registerInstance(this, this);\n    },\n    destroyed: function destroyed () {\n      registerInstance(this);\n    }\n  });\n\n  Object.defineProperty(Vue.prototype, '$router', {\n    get: function get () { return this._routerRoot._router }\n  });\n\n  Object.defineProperty(Vue.prototype, '$route', {\n    get: function get () { return this._routerRoot._route }\n  });\n\n  Vue.component('RouterView', View);\n  Vue.component('RouterLink', Link);\n\n  var strats = Vue.config.optionMergeStrategies;\n  // use the same hook merging strategy for route hooks\n  strats.beforeRouteEnter = strats.beforeRouteLeave = strats.beforeRouteUpdate = strats.created;\n}\n\n/*  */\n\nvar inBrowser = typeof window !== 'undefined';\n\n/*  */\n\nfunction createRouteMap (\n  routes,\n  oldPathList,\n  oldPathMap,\n  oldNameMap,\n  parentRoute\n) {\n  // the path list is used to control path matching priority\n  var pathList = oldPathList || [];\n  // $flow-disable-line\n  var pathMap = oldPathMap || Object.create(null);\n  // $flow-disable-line\n  var nameMap = oldNameMap || Object.create(null);\n\n  routes.forEach(function (route) {\n    addRouteRecord(pathList, pathMap, nameMap, route, parentRoute);\n  });\n\n  // ensure wildcard routes are always at the end\n  for (var i = 0, l = pathList.length; i < l; i++) {\n    if (pathList[i] === '*') {\n      pathList.push(pathList.splice(i, 1)[0]);\n      l--;\n      i--;\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    // warn if routes do not include leading slashes\n    var found = pathList\n    // check for missing leading slash\n      .filter(function (path) { return path && path.charAt(0) !== '*' && path.charAt(0) !== '/'; });\n\n    if (found.length > 0) {\n      var pathNames = found.map(function (path) { return (\"- \" + path); }).join('\\n');\n      warn(false, (\"Non-nested routes must include a leading slash character. Fix the following routes: \\n\" + pathNames));\n    }\n  }\n\n  return {\n    pathList: pathList,\n    pathMap: pathMap,\n    nameMap: nameMap\n  }\n}\n\nfunction addRouteRecord (\n  pathList,\n  pathMap,\n  nameMap,\n  route,\n  parent,\n  matchAs\n) {\n  var path = route.path;\n  var name = route.name;\n  if (process.env.NODE_ENV !== 'production') {\n    assert(path != null, \"\\\"path\\\" is required in a route configuration.\");\n    assert(\n      typeof route.component !== 'string',\n      \"route config \\\"component\\\" for path: \" + (String(\n        path || name\n      )) + \" cannot be a \" + \"string id. Use an actual component instead.\"\n    );\n\n    warn(\n      // eslint-disable-next-line no-control-regex\n      !/[^\\u0000-\\u007F]+/.test(path),\n      \"Route with path \\\"\" + path + \"\\\" contains unencoded characters, make sure \" +\n        \"your path is correctly encoded before passing it to the router. Use \" +\n        \"encodeURI to encode static segments of your path.\"\n    );\n  }\n\n  var pathToRegexpOptions =\n    route.pathToRegexpOptions || {};\n  var normalizedPath = normalizePath(path, parent, pathToRegexpOptions.strict);\n\n  if (typeof route.caseSensitive === 'boolean') {\n    pathToRegexpOptions.sensitive = route.caseSensitive;\n  }\n\n  var record = {\n    path: normalizedPath,\n    regex: compileRouteRegex(normalizedPath, pathToRegexpOptions),\n    components: route.components || { default: route.component },\n    alias: route.alias\n      ? typeof route.alias === 'string'\n        ? [route.alias]\n        : route.alias\n      : [],\n    instances: {},\n    enteredCbs: {},\n    name: name,\n    parent: parent,\n    matchAs: matchAs,\n    redirect: route.redirect,\n    beforeEnter: route.beforeEnter,\n    meta: route.meta || {},\n    props:\n      route.props == null\n        ? {}\n        : route.components\n          ? route.props\n          : { default: route.props }\n  };\n\n  if (route.children) {\n    // Warn if route is named, does not redirect and has a default child route.\n    // If users navigate to this route by name, the default child will\n    // not be rendered (GH Issue #629)\n    if (process.env.NODE_ENV !== 'production') {\n      if (\n        route.name &&\n        !route.redirect &&\n        route.children.some(function (child) { return /^\\/?$/.test(child.path); })\n      ) {\n        warn(\n          false,\n          \"Named Route '\" + (route.name) + \"' has a default child route. \" +\n            \"When navigating to this named route (:to=\\\"{name: '\" + (route.name) + \"'}\\\"), \" +\n            \"the default child route will not be rendered. Remove the name from \" +\n            \"this route and use the name of the default child route for named \" +\n            \"links instead.\"\n        );\n      }\n    }\n    route.children.forEach(function (child) {\n      var childMatchAs = matchAs\n        ? cleanPath((matchAs + \"/\" + (child.path)))\n        : undefined;\n      addRouteRecord(pathList, pathMap, nameMap, child, record, childMatchAs);\n    });\n  }\n\n  if (!pathMap[record.path]) {\n    pathList.push(record.path);\n    pathMap[record.path] = record;\n  }\n\n  if (route.alias !== undefined) {\n    var aliases = Array.isArray(route.alias) ? route.alias : [route.alias];\n    for (var i = 0; i < aliases.length; ++i) {\n      var alias = aliases[i];\n      if (process.env.NODE_ENV !== 'production' && alias === path) {\n        warn(\n          false,\n          (\"Found an alias with the same value as the path: \\\"\" + path + \"\\\". You have to remove that alias. It will be ignored in development.\")\n        );\n        // skip in dev to make it work\n        continue\n      }\n\n      var aliasRoute = {\n        path: alias,\n        children: route.children\n      };\n      addRouteRecord(\n        pathList,\n        pathMap,\n        nameMap,\n        aliasRoute,\n        parent,\n        record.path || '/' // matchAs\n      );\n    }\n  }\n\n  if (name) {\n    if (!nameMap[name]) {\n      nameMap[name] = record;\n    } else if (process.env.NODE_ENV !== 'production' && !matchAs) {\n      warn(\n        false,\n        \"Duplicate named routes definition: \" +\n          \"{ name: \\\"\" + name + \"\\\", path: \\\"\" + (record.path) + \"\\\" }\"\n      );\n    }\n  }\n}\n\nfunction compileRouteRegex (\n  path,\n  pathToRegexpOptions\n) {\n  var regex = pathToRegexp_1(path, [], pathToRegexpOptions);\n  if (process.env.NODE_ENV !== 'production') {\n    var keys = Object.create(null);\n    regex.keys.forEach(function (key) {\n      warn(\n        !keys[key.name],\n        (\"Duplicate param keys in route with path: \\\"\" + path + \"\\\"\")\n      );\n      keys[key.name] = true;\n    });\n  }\n  return regex\n}\n\nfunction normalizePath (\n  path,\n  parent,\n  strict\n) {\n  if (!strict) { path = path.replace(/\\/$/, ''); }\n  if (path[0] === '/') { return path }\n  if (parent == null) { return path }\n  return cleanPath(((parent.path) + \"/\" + path))\n}\n\n/*  */\n\n\n\nfunction createMatcher (\n  routes,\n  router\n) {\n  var ref = createRouteMap(routes);\n  var pathList = ref.pathList;\n  var pathMap = ref.pathMap;\n  var nameMap = ref.nameMap;\n\n  function addRoutes (routes) {\n    createRouteMap(routes, pathList, pathMap, nameMap);\n  }\n\n  function addRoute (parentOrRoute, route) {\n    var parent = (typeof parentOrRoute !== 'object') ? nameMap[parentOrRoute] : undefined;\n    // $flow-disable-line\n    createRouteMap([route || parentOrRoute], pathList, pathMap, nameMap, parent);\n\n    // add aliases of parent\n    if (parent && parent.alias.length) {\n      createRouteMap(\n        // $flow-disable-line route is defined if parent is\n        parent.alias.map(function (alias) { return ({ path: alias, children: [route] }); }),\n        pathList,\n        pathMap,\n        nameMap,\n        parent\n      );\n    }\n  }\n\n  function getRoutes () {\n    return pathList.map(function (path) { return pathMap[path]; })\n  }\n\n  function match (\n    raw,\n    currentRoute,\n    redirectedFrom\n  ) {\n    var location = normalizeLocation(raw, currentRoute, false, router);\n    var name = location.name;\n\n    if (name) {\n      var record = nameMap[name];\n      if (process.env.NODE_ENV !== 'production') {\n        warn(record, (\"Route with name '\" + name + \"' does not exist\"));\n      }\n      if (!record) { return _createRoute(null, location) }\n      var paramNames = record.regex.keys\n        .filter(function (key) { return !key.optional; })\n        .map(function (key) { return key.name; });\n\n      if (typeof location.params !== 'object') {\n        location.params = {};\n      }\n\n      if (currentRoute && typeof currentRoute.params === 'object') {\n        for (var key in currentRoute.params) {\n          if (!(key in location.params) && paramNames.indexOf(key) > -1) {\n            location.params[key] = currentRoute.params[key];\n          }\n        }\n      }\n\n      location.path = fillParams(record.path, location.params, (\"named route \\\"\" + name + \"\\\"\"));\n      return _createRoute(record, location, redirectedFrom)\n    } else if (location.path) {\n      location.params = {};\n      for (var i = 0; i < pathList.length; i++) {\n        var path = pathList[i];\n        var record$1 = pathMap[path];\n        if (matchRoute(record$1.regex, location.path, location.params)) {\n          return _createRoute(record$1, location, redirectedFrom)\n        }\n      }\n    }\n    // no match\n    return _createRoute(null, location)\n  }\n\n  function redirect (\n    record,\n    location\n  ) {\n    var originalRedirect = record.redirect;\n    var redirect = typeof originalRedirect === 'function'\n      ? originalRedirect(createRoute(record, location, null, router))\n      : originalRedirect;\n\n    if (typeof redirect === 'string') {\n      redirect = { path: redirect };\n    }\n\n    if (!redirect || typeof redirect !== 'object') {\n      if (process.env.NODE_ENV !== 'production') {\n        warn(\n          false, (\"invalid redirect option: \" + (JSON.stringify(redirect)))\n        );\n      }\n      return _createRoute(null, location)\n    }\n\n    var re = redirect;\n    var name = re.name;\n    var path = re.path;\n    var query = location.query;\n    var hash = location.hash;\n    var params = location.params;\n    query = re.hasOwnProperty('query') ? re.query : query;\n    hash = re.hasOwnProperty('hash') ? re.hash : hash;\n    params = re.hasOwnProperty('params') ? re.params : params;\n\n    if (name) {\n      // resolved named direct\n      var targetRecord = nameMap[name];\n      if (process.env.NODE_ENV !== 'production') {\n        assert(targetRecord, (\"redirect failed: named route \\\"\" + name + \"\\\" not found.\"));\n      }\n      return match({\n        _normalized: true,\n        name: name,\n        query: query,\n        hash: hash,\n        params: params\n      }, undefined, location)\n    } else if (path) {\n      // 1. resolve relative redirect\n      var rawPath = resolveRecordPath(path, record);\n      // 2. resolve params\n      var resolvedPath = fillParams(rawPath, params, (\"redirect route with path \\\"\" + rawPath + \"\\\"\"));\n      // 3. rematch with existing query and hash\n      return match({\n        _normalized: true,\n        path: resolvedPath,\n        query: query,\n        hash: hash\n      }, undefined, location)\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        warn(false, (\"invalid redirect option: \" + (JSON.stringify(redirect))));\n      }\n      return _createRoute(null, location)\n    }\n  }\n\n  function alias (\n    record,\n    location,\n    matchAs\n  ) {\n    var aliasedPath = fillParams(matchAs, location.params, (\"aliased route with path \\\"\" + matchAs + \"\\\"\"));\n    var aliasedMatch = match({\n      _normalized: true,\n      path: aliasedPath\n    });\n    if (aliasedMatch) {\n      var matched = aliasedMatch.matched;\n      var aliasedRecord = matched[matched.length - 1];\n      location.params = aliasedMatch.params;\n      return _createRoute(aliasedRecord, location)\n    }\n    return _createRoute(null, location)\n  }\n\n  function _createRoute (\n    record,\n    location,\n    redirectedFrom\n  ) {\n    if (record && record.redirect) {\n      return redirect(record, redirectedFrom || location)\n    }\n    if (record && record.matchAs) {\n      return alias(record, location, record.matchAs)\n    }\n    return createRoute(record, location, redirectedFrom, router)\n  }\n\n  return {\n    match: match,\n    addRoute: addRoute,\n    getRoutes: getRoutes,\n    addRoutes: addRoutes\n  }\n}\n\nfunction matchRoute (\n  regex,\n  path,\n  params\n) {\n  var m = path.match(regex);\n\n  if (!m) {\n    return false\n  } else if (!params) {\n    return true\n  }\n\n  for (var i = 1, len = m.length; i < len; ++i) {\n    var key = regex.keys[i - 1];\n    if (key) {\n      // Fix #1994: using * with props: true generates a param named 0\n      params[key.name || 'pathMatch'] = typeof m[i] === 'string' ? decode(m[i]) : m[i];\n    }\n  }\n\n  return true\n}\n\nfunction resolveRecordPath (path, record) {\n  return resolvePath(path, record.parent ? record.parent.path : '/', true)\n}\n\n/*  */\n\n// use User Timing api (if present) for more accurate key precision\nvar Time =\n  inBrowser && window.performance && window.performance.now\n    ? window.performance\n    : Date;\n\nfunction genStateKey () {\n  return Time.now().toFixed(3)\n}\n\nvar _key = genStateKey();\n\nfunction getStateKey () {\n  return _key\n}\n\nfunction setStateKey (key) {\n  return (_key = key)\n}\n\n/*  */\n\nvar positionStore = Object.create(null);\n\nfunction setupScroll () {\n  // Prevent browser scroll behavior on History popstate\n  if ('scrollRestoration' in window.history) {\n    window.history.scrollRestoration = 'manual';\n  }\n  // Fix for #1585 for Firefox\n  // Fix for #2195 Add optional third attribute to workaround a bug in safari https://bugs.webkit.org/show_bug.cgi?id=182678\n  // Fix for #2774 Support for apps loaded from Windows file shares not mapped to network drives: replaced location.origin with\n  // window.location.protocol + '//' + window.location.host\n  // location.host contains the port and location.hostname doesn't\n  var protocolAndPath = window.location.protocol + '//' + window.location.host;\n  var absolutePath = window.location.href.replace(protocolAndPath, '');\n  // preserve existing history state as it could be overriden by the user\n  var stateCopy = extend({}, window.history.state);\n  stateCopy.key = getStateKey();\n  window.history.replaceState(stateCopy, '', absolutePath);\n  window.addEventListener('popstate', handlePopState);\n  return function () {\n    window.removeEventListener('popstate', handlePopState);\n  }\n}\n\nfunction handleScroll (\n  router,\n  to,\n  from,\n  isPop\n) {\n  if (!router.app) {\n    return\n  }\n\n  var behavior = router.options.scrollBehavior;\n  if (!behavior) {\n    return\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(typeof behavior === 'function', \"scrollBehavior must be a function\");\n  }\n\n  // wait until re-render finishes before scrolling\n  router.app.$nextTick(function () {\n    var position = getScrollPosition();\n    var shouldScroll = behavior.call(\n      router,\n      to,\n      from,\n      isPop ? position : null\n    );\n\n    if (!shouldScroll) {\n      return\n    }\n\n    if (typeof shouldScroll.then === 'function') {\n      shouldScroll\n        .then(function (shouldScroll) {\n          scrollToPosition((shouldScroll), position);\n        })\n        .catch(function (err) {\n          if (process.env.NODE_ENV !== 'production') {\n            assert(false, err.toString());\n          }\n        });\n    } else {\n      scrollToPosition(shouldScroll, position);\n    }\n  });\n}\n\nfunction saveScrollPosition () {\n  var key = getStateKey();\n  if (key) {\n    positionStore[key] = {\n      x: window.pageXOffset,\n      y: window.pageYOffset\n    };\n  }\n}\n\nfunction handlePopState (e) {\n  saveScrollPosition();\n  if (e.state && e.state.key) {\n    setStateKey(e.state.key);\n  }\n}\n\nfunction getScrollPosition () {\n  var key = getStateKey();\n  if (key) {\n    return positionStore[key]\n  }\n}\n\nfunction getElementPosition (el, offset) {\n  var docEl = document.documentElement;\n  var docRect = docEl.getBoundingClientRect();\n  var elRect = el.getBoundingClientRect();\n  return {\n    x: elRect.left - docRect.left - offset.x,\n    y: elRect.top - docRect.top - offset.y\n  }\n}\n\nfunction isValidPosition (obj) {\n  return isNumber(obj.x) || isNumber(obj.y)\n}\n\nfunction normalizePosition (obj) {\n  return {\n    x: isNumber(obj.x) ? obj.x : window.pageXOffset,\n    y: isNumber(obj.y) ? obj.y : window.pageYOffset\n  }\n}\n\nfunction normalizeOffset (obj) {\n  return {\n    x: isNumber(obj.x) ? obj.x : 0,\n    y: isNumber(obj.y) ? obj.y : 0\n  }\n}\n\nfunction isNumber (v) {\n  return typeof v === 'number'\n}\n\nvar hashStartsWithNumberRE = /^#\\d/;\n\nfunction scrollToPosition (shouldScroll, position) {\n  var isObject = typeof shouldScroll === 'object';\n  if (isObject && typeof shouldScroll.selector === 'string') {\n    // getElementById would still fail if the selector contains a more complicated query like #main[data-attr]\n    // but at the same time, it doesn't make much sense to select an element with an id and an extra selector\n    var el = hashStartsWithNumberRE.test(shouldScroll.selector) // $flow-disable-line\n      ? document.getElementById(shouldScroll.selector.slice(1)) // $flow-disable-line\n      : document.querySelector(shouldScroll.selector);\n\n    if (el) {\n      var offset =\n        shouldScroll.offset && typeof shouldScroll.offset === 'object'\n          ? shouldScroll.offset\n          : {};\n      offset = normalizeOffset(offset);\n      position = getElementPosition(el, offset);\n    } else if (isValidPosition(shouldScroll)) {\n      position = normalizePosition(shouldScroll);\n    }\n  } else if (isObject && isValidPosition(shouldScroll)) {\n    position = normalizePosition(shouldScroll);\n  }\n\n  if (position) {\n    // $flow-disable-line\n    if ('scrollBehavior' in document.documentElement.style) {\n      window.scrollTo({\n        left: position.x,\n        top: position.y,\n        // $flow-disable-line\n        behavior: shouldScroll.behavior\n      });\n    } else {\n      window.scrollTo(position.x, position.y);\n    }\n  }\n}\n\n/*  */\n\nvar supportsPushState =\n  inBrowser &&\n  (function () {\n    var ua = window.navigator.userAgent;\n\n    if (\n      (ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) &&\n      ua.indexOf('Mobile Safari') !== -1 &&\n      ua.indexOf('Chrome') === -1 &&\n      ua.indexOf('Windows Phone') === -1\n    ) {\n      return false\n    }\n\n    return window.history && typeof window.history.pushState === 'function'\n  })();\n\nfunction pushState (url, replace) {\n  saveScrollPosition();\n  // try...catch the pushState call to get around Safari\n  // DOM Exception 18 where it limits to 100 pushState calls\n  var history = window.history;\n  try {\n    if (replace) {\n      // preserve existing history state as it could be overriden by the user\n      var stateCopy = extend({}, history.state);\n      stateCopy.key = getStateKey();\n      history.replaceState(stateCopy, '', url);\n    } else {\n      history.pushState({ key: setStateKey(genStateKey()) }, '', url);\n    }\n  } catch (e) {\n    window.location[replace ? 'replace' : 'assign'](url);\n  }\n}\n\nfunction replaceState (url) {\n  pushState(url, true);\n}\n\n/*  */\n\nfunction runQueue (queue, fn, cb) {\n  var step = function (index) {\n    if (index >= queue.length) {\n      cb();\n    } else {\n      if (queue[index]) {\n        fn(queue[index], function () {\n          step(index + 1);\n        });\n      } else {\n        step(index + 1);\n      }\n    }\n  };\n  step(0);\n}\n\n// When changing thing, also edit router.d.ts\nvar NavigationFailureType = {\n  redirected: 2,\n  aborted: 4,\n  cancelled: 8,\n  duplicated: 16\n};\n\nfunction createNavigationRedirectedError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.redirected,\n    (\"Redirected when going from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (stringifyRoute(\n      to\n    )) + \"\\\" via a navigation guard.\")\n  )\n}\n\nfunction createNavigationDuplicatedError (from, to) {\n  var error = createRouterError(\n    from,\n    to,\n    NavigationFailureType.duplicated,\n    (\"Avoided redundant navigation to current location: \\\"\" + (from.fullPath) + \"\\\".\")\n  );\n  // backwards compatible with the first introduction of Errors\n  error.name = 'NavigationDuplicated';\n  return error\n}\n\nfunction createNavigationCancelledError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.cancelled,\n    (\"Navigation cancelled from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (to.fullPath) + \"\\\" with a new navigation.\")\n  )\n}\n\nfunction createNavigationAbortedError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.aborted,\n    (\"Navigation aborted from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (to.fullPath) + \"\\\" via a navigation guard.\")\n  )\n}\n\nfunction createRouterError (from, to, type, message) {\n  var error = new Error(message);\n  error._isRouter = true;\n  error.from = from;\n  error.to = to;\n  error.type = type;\n\n  return error\n}\n\nvar propertiesToLog = ['params', 'query', 'hash'];\n\nfunction stringifyRoute (to) {\n  if (typeof to === 'string') { return to }\n  if ('path' in to) { return to.path }\n  var location = {};\n  propertiesToLog.forEach(function (key) {\n    if (key in to) { location[key] = to[key]; }\n  });\n  return JSON.stringify(location, null, 2)\n}\n\nfunction isError (err) {\n  return Object.prototype.toString.call(err).indexOf('Error') > -1\n}\n\nfunction isNavigationFailure (err, errorType) {\n  return (\n    isError(err) &&\n    err._isRouter &&\n    (errorType == null || err.type === errorType)\n  )\n}\n\n/*  */\n\nfunction resolveAsyncComponents (matched) {\n  return function (to, from, next) {\n    var hasAsync = false;\n    var pending = 0;\n    var error = null;\n\n    flatMapComponents(matched, function (def, _, match, key) {\n      // if it's a function and doesn't have cid attached,\n      // assume it's an async component resolve function.\n      // we are not using Vue's default async resolving mechanism because\n      // we want to halt the navigation until the incoming component has been\n      // resolved.\n      if (typeof def === 'function' && def.cid === undefined) {\n        hasAsync = true;\n        pending++;\n\n        var resolve = once(function (resolvedDef) {\n          if (isESModule(resolvedDef)) {\n            resolvedDef = resolvedDef.default;\n          }\n          // save resolved on async factory in case it's used elsewhere\n          def.resolved = typeof resolvedDef === 'function'\n            ? resolvedDef\n            : _Vue.extend(resolvedDef);\n          match.components[key] = resolvedDef;\n          pending--;\n          if (pending <= 0) {\n            next();\n          }\n        });\n\n        var reject = once(function (reason) {\n          var msg = \"Failed to resolve async component \" + key + \": \" + reason;\n          process.env.NODE_ENV !== 'production' && warn(false, msg);\n          if (!error) {\n            error = isError(reason)\n              ? reason\n              : new Error(msg);\n            next(error);\n          }\n        });\n\n        var res;\n        try {\n          res = def(resolve, reject);\n        } catch (e) {\n          reject(e);\n        }\n        if (res) {\n          if (typeof res.then === 'function') {\n            res.then(resolve, reject);\n          } else {\n            // new syntax in Vue 2.3\n            var comp = res.component;\n            if (comp && typeof comp.then === 'function') {\n              comp.then(resolve, reject);\n            }\n          }\n        }\n      }\n    });\n\n    if (!hasAsync) { next(); }\n  }\n}\n\nfunction flatMapComponents (\n  matched,\n  fn\n) {\n  return flatten(matched.map(function (m) {\n    return Object.keys(m.components).map(function (key) { return fn(\n      m.components[key],\n      m.instances[key],\n      m, key\n    ); })\n  }))\n}\n\nfunction flatten (arr) {\n  return Array.prototype.concat.apply([], arr)\n}\n\nvar hasSymbol =\n  typeof Symbol === 'function' &&\n  typeof Symbol.toStringTag === 'symbol';\n\nfunction isESModule (obj) {\n  return obj.__esModule || (hasSymbol && obj[Symbol.toStringTag] === 'Module')\n}\n\n// in Webpack 2, require.ensure now also returns a Promise\n// so the resolve/reject functions may get called an extra time\n// if the user uses an arrow function shorthand that happens to\n// return that Promise.\nfunction once (fn) {\n  var called = false;\n  return function () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    if (called) { return }\n    called = true;\n    return fn.apply(this, args)\n  }\n}\n\n/*  */\n\nvar History = function History (router, base) {\n  this.router = router;\n  this.base = normalizeBase(base);\n  // start with a route object that stands for \"nowhere\"\n  this.current = START;\n  this.pending = null;\n  this.ready = false;\n  this.readyCbs = [];\n  this.readyErrorCbs = [];\n  this.errorCbs = [];\n  this.listeners = [];\n};\n\nHistory.prototype.listen = function listen (cb) {\n  this.cb = cb;\n};\n\nHistory.prototype.onReady = function onReady (cb, errorCb) {\n  if (this.ready) {\n    cb();\n  } else {\n    this.readyCbs.push(cb);\n    if (errorCb) {\n      this.readyErrorCbs.push(errorCb);\n    }\n  }\n};\n\nHistory.prototype.onError = function onError (errorCb) {\n  this.errorCbs.push(errorCb);\n};\n\nHistory.prototype.transitionTo = function transitionTo (\n  location,\n  onComplete,\n  onAbort\n) {\n    var this$1 = this;\n\n  var route;\n  // catch redirect option https://github.com/vuejs/vue-router/issues/3201\n  try {\n    route = this.router.match(location, this.current);\n  } catch (e) {\n    this.errorCbs.forEach(function (cb) {\n      cb(e);\n    });\n    // Exception should still be thrown\n    throw e\n  }\n  var prev = this.current;\n  this.confirmTransition(\n    route,\n    function () {\n      this$1.updateRoute(route);\n      onComplete && onComplete(route);\n      this$1.ensureURL();\n      this$1.router.afterHooks.forEach(function (hook) {\n        hook && hook(route, prev);\n      });\n\n      // fire ready cbs once\n      if (!this$1.ready) {\n        this$1.ready = true;\n        this$1.readyCbs.forEach(function (cb) {\n          cb(route);\n        });\n      }\n    },\n    function (err) {\n      if (onAbort) {\n        onAbort(err);\n      }\n      if (err && !this$1.ready) {\n        // Initial redirection should not mark the history as ready yet\n        // because it's triggered by the redirection instead\n        // https://github.com/vuejs/vue-router/issues/3225\n        // https://github.com/vuejs/vue-router/issues/3331\n        if (!isNavigationFailure(err, NavigationFailureType.redirected) || prev !== START) {\n          this$1.ready = true;\n          this$1.readyErrorCbs.forEach(function (cb) {\n            cb(err);\n          });\n        }\n      }\n    }\n  );\n};\n\nHistory.prototype.confirmTransition = function confirmTransition (route, onComplete, onAbort) {\n    var this$1 = this;\n\n  var current = this.current;\n  this.pending = route;\n  var abort = function (err) {\n    // changed after adding errors with\n    // https://github.com/vuejs/vue-router/pull/3047 before that change,\n    // redirect and aborted navigation would produce an err == null\n    if (!isNavigationFailure(err) && isError(err)) {\n      if (this$1.errorCbs.length) {\n        this$1.errorCbs.forEach(function (cb) {\n          cb(err);\n        });\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(false, 'uncaught error during route navigation:');\n        }\n        console.error(err);\n      }\n    }\n    onAbort && onAbort(err);\n  };\n  var lastRouteIndex = route.matched.length - 1;\n  var lastCurrentIndex = current.matched.length - 1;\n  if (\n    isSameRoute(route, current) &&\n    // in the case the route map has been dynamically appended to\n    lastRouteIndex === lastCurrentIndex &&\n    route.matched[lastRouteIndex] === current.matched[lastCurrentIndex]\n  ) {\n    this.ensureURL();\n    if (route.hash) {\n      handleScroll(this.router, current, route, false);\n    }\n    return abort(createNavigationDuplicatedError(current, route))\n  }\n\n  var ref = resolveQueue(\n    this.current.matched,\n    route.matched\n  );\n    var updated = ref.updated;\n    var deactivated = ref.deactivated;\n    var activated = ref.activated;\n\n  var queue = [].concat(\n    // in-component leave guards\n    extractLeaveGuards(deactivated),\n    // global before hooks\n    this.router.beforeHooks,\n    // in-component update hooks\n    extractUpdateHooks(updated),\n    // in-config enter guards\n    activated.map(function (m) { return m.beforeEnter; }),\n    // async components\n    resolveAsyncComponents(activated)\n  );\n\n  var iterator = function (hook, next) {\n    if (this$1.pending !== route) {\n      return abort(createNavigationCancelledError(current, route))\n    }\n    try {\n      hook(route, current, function (to) {\n        if (to === false) {\n          // next(false) -> abort navigation, ensure current URL\n          this$1.ensureURL(true);\n          abort(createNavigationAbortedError(current, route));\n        } else if (isError(to)) {\n          this$1.ensureURL(true);\n          abort(to);\n        } else if (\n          typeof to === 'string' ||\n          (typeof to === 'object' &&\n            (typeof to.path === 'string' || typeof to.name === 'string'))\n        ) {\n          // next('/') or next({ path: '/' }) -> redirect\n          abort(createNavigationRedirectedError(current, route));\n          if (typeof to === 'object' && to.replace) {\n            this$1.replace(to);\n          } else {\n            this$1.push(to);\n          }\n        } else {\n          // confirm transition and pass on the value\n          next(to);\n        }\n      });\n    } catch (e) {\n      abort(e);\n    }\n  };\n\n  runQueue(queue, iterator, function () {\n    // wait until async components are resolved before\n    // extracting in-component enter guards\n    var enterGuards = extractEnterGuards(activated);\n    var queue = enterGuards.concat(this$1.router.resolveHooks);\n    runQueue(queue, iterator, function () {\n      if (this$1.pending !== route) {\n        return abort(createNavigationCancelledError(current, route))\n      }\n      this$1.pending = null;\n      onComplete(route);\n      if (this$1.router.app) {\n        this$1.router.app.$nextTick(function () {\n          handleRouteEntered(route);\n        });\n      }\n    });\n  });\n};\n\nHistory.prototype.updateRoute = function updateRoute (route) {\n  this.current = route;\n  this.cb && this.cb(route);\n};\n\nHistory.prototype.setupListeners = function setupListeners () {\n  // Default implementation is empty\n};\n\nHistory.prototype.teardown = function teardown () {\n  // clean up event listeners\n  // https://github.com/vuejs/vue-router/issues/2341\n  this.listeners.forEach(function (cleanupListener) {\n    cleanupListener();\n  });\n  this.listeners = [];\n\n  // reset current history route\n  // https://github.com/vuejs/vue-router/issues/3294\n  this.current = START;\n  this.pending = null;\n};\n\nfunction normalizeBase (base) {\n  if (!base) {\n    if (inBrowser) {\n      // respect <base> tag\n      var baseEl = document.querySelector('base');\n      base = (baseEl && baseEl.getAttribute('href')) || '/';\n      // strip full URL origin\n      base = base.replace(/^https?:\\/\\/[^\\/]+/, '');\n    } else {\n      base = '/';\n    }\n  }\n  // make sure there's the starting slash\n  if (base.charAt(0) !== '/') {\n    base = '/' + base;\n  }\n  // remove trailing slash\n  return base.replace(/\\/$/, '')\n}\n\nfunction resolveQueue (\n  current,\n  next\n) {\n  var i;\n  var max = Math.max(current.length, next.length);\n  for (i = 0; i < max; i++) {\n    if (current[i] !== next[i]) {\n      break\n    }\n  }\n  return {\n    updated: next.slice(0, i),\n    activated: next.slice(i),\n    deactivated: current.slice(i)\n  }\n}\n\nfunction extractGuards (\n  records,\n  name,\n  bind,\n  reverse\n) {\n  var guards = flatMapComponents(records, function (def, instance, match, key) {\n    var guard = extractGuard(def, name);\n    if (guard) {\n      return Array.isArray(guard)\n        ? guard.map(function (guard) { return bind(guard, instance, match, key); })\n        : bind(guard, instance, match, key)\n    }\n  });\n  return flatten(reverse ? guards.reverse() : guards)\n}\n\nfunction extractGuard (\n  def,\n  key\n) {\n  if (typeof def !== 'function') {\n    // extend now so that global mixins are applied.\n    def = _Vue.extend(def);\n  }\n  return def.options[key]\n}\n\nfunction extractLeaveGuards (deactivated) {\n  return extractGuards(deactivated, 'beforeRouteLeave', bindGuard, true)\n}\n\nfunction extractUpdateHooks (updated) {\n  return extractGuards(updated, 'beforeRouteUpdate', bindGuard)\n}\n\nfunction bindGuard (guard, instance) {\n  if (instance) {\n    return function boundRouteGuard () {\n      return guard.apply(instance, arguments)\n    }\n  }\n}\n\nfunction extractEnterGuards (\n  activated\n) {\n  return extractGuards(\n    activated,\n    'beforeRouteEnter',\n    function (guard, _, match, key) {\n      return bindEnterGuard(guard, match, key)\n    }\n  )\n}\n\nfunction bindEnterGuard (\n  guard,\n  match,\n  key\n) {\n  return function routeEnterGuard (to, from, next) {\n    return guard(to, from, function (cb) {\n      if (typeof cb === 'function') {\n        if (!match.enteredCbs[key]) {\n          match.enteredCbs[key] = [];\n        }\n        match.enteredCbs[key].push(cb);\n      }\n      next(cb);\n    })\n  }\n}\n\n/*  */\n\nvar HTML5History = /*@__PURE__*/(function (History) {\n  function HTML5History (router, base) {\n    History.call(this, router, base);\n\n    this._startLocation = getLocation(this.base);\n  }\n\n  if ( History ) HTML5History.__proto__ = History;\n  HTML5History.prototype = Object.create( History && History.prototype );\n  HTML5History.prototype.constructor = HTML5History;\n\n  HTML5History.prototype.setupListeners = function setupListeners () {\n    var this$1 = this;\n\n    if (this.listeners.length > 0) {\n      return\n    }\n\n    var router = this.router;\n    var expectScroll = router.options.scrollBehavior;\n    var supportsScroll = supportsPushState && expectScroll;\n\n    if (supportsScroll) {\n      this.listeners.push(setupScroll());\n    }\n\n    var handleRoutingEvent = function () {\n      var current = this$1.current;\n\n      // Avoiding first `popstate` event dispatched in some browsers but first\n      // history route not updated since async guard at the same time.\n      var location = getLocation(this$1.base);\n      if (this$1.current === START && location === this$1._startLocation) {\n        return\n      }\n\n      this$1.transitionTo(location, function (route) {\n        if (supportsScroll) {\n          handleScroll(router, route, current, true);\n        }\n      });\n    };\n    window.addEventListener('popstate', handleRoutingEvent);\n    this.listeners.push(function () {\n      window.removeEventListener('popstate', handleRoutingEvent);\n    });\n  };\n\n  HTML5History.prototype.go = function go (n) {\n    window.history.go(n);\n  };\n\n  HTML5History.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(location, function (route) {\n      pushState(cleanPath(this$1.base + route.fullPath));\n      handleScroll(this$1.router, route, fromRoute, false);\n      onComplete && onComplete(route);\n    }, onAbort);\n  };\n\n  HTML5History.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(location, function (route) {\n      replaceState(cleanPath(this$1.base + route.fullPath));\n      handleScroll(this$1.router, route, fromRoute, false);\n      onComplete && onComplete(route);\n    }, onAbort);\n  };\n\n  HTML5History.prototype.ensureURL = function ensureURL (push) {\n    if (getLocation(this.base) !== this.current.fullPath) {\n      var current = cleanPath(this.base + this.current.fullPath);\n      push ? pushState(current) : replaceState(current);\n    }\n  };\n\n  HTML5History.prototype.getCurrentLocation = function getCurrentLocation () {\n    return getLocation(this.base)\n  };\n\n  return HTML5History;\n}(History));\n\nfunction getLocation (base) {\n  var path = window.location.pathname;\n  var pathLowerCase = path.toLowerCase();\n  var baseLowerCase = base.toLowerCase();\n  // base=\"/a\" shouldn't turn path=\"/app\" into \"/a/pp\"\n  // https://github.com/vuejs/vue-router/issues/3555\n  // so we ensure the trailing slash in the base\n  if (base && ((pathLowerCase === baseLowerCase) ||\n    (pathLowerCase.indexOf(cleanPath(baseLowerCase + '/')) === 0))) {\n    path = path.slice(base.length);\n  }\n  return (path || '/') + window.location.search + window.location.hash\n}\n\n/*  */\n\nvar HashHistory = /*@__PURE__*/(function (History) {\n  function HashHistory (router, base, fallback) {\n    History.call(this, router, base);\n    // check history fallback deeplinking\n    if (fallback && checkFallback(this.base)) {\n      return\n    }\n    ensureSlash();\n  }\n\n  if ( History ) HashHistory.__proto__ = History;\n  HashHistory.prototype = Object.create( History && History.prototype );\n  HashHistory.prototype.constructor = HashHistory;\n\n  // this is delayed until the app mounts\n  // to avoid the hashchange listener being fired too early\n  HashHistory.prototype.setupListeners = function setupListeners () {\n    var this$1 = this;\n\n    if (this.listeners.length > 0) {\n      return\n    }\n\n    var router = this.router;\n    var expectScroll = router.options.scrollBehavior;\n    var supportsScroll = supportsPushState && expectScroll;\n\n    if (supportsScroll) {\n      this.listeners.push(setupScroll());\n    }\n\n    var handleRoutingEvent = function () {\n      var current = this$1.current;\n      if (!ensureSlash()) {\n        return\n      }\n      this$1.transitionTo(getHash(), function (route) {\n        if (supportsScroll) {\n          handleScroll(this$1.router, route, current, true);\n        }\n        if (!supportsPushState) {\n          replaceHash(route.fullPath);\n        }\n      });\n    };\n    var eventType = supportsPushState ? 'popstate' : 'hashchange';\n    window.addEventListener(\n      eventType,\n      handleRoutingEvent\n    );\n    this.listeners.push(function () {\n      window.removeEventListener(eventType, handleRoutingEvent);\n    });\n  };\n\n  HashHistory.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(\n      location,\n      function (route) {\n        pushHash(route.fullPath);\n        handleScroll(this$1.router, route, fromRoute, false);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  HashHistory.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(\n      location,\n      function (route) {\n        replaceHash(route.fullPath);\n        handleScroll(this$1.router, route, fromRoute, false);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  HashHistory.prototype.go = function go (n) {\n    window.history.go(n);\n  };\n\n  HashHistory.prototype.ensureURL = function ensureURL (push) {\n    var current = this.current.fullPath;\n    if (getHash() !== current) {\n      push ? pushHash(current) : replaceHash(current);\n    }\n  };\n\n  HashHistory.prototype.getCurrentLocation = function getCurrentLocation () {\n    return getHash()\n  };\n\n  return HashHistory;\n}(History));\n\nfunction checkFallback (base) {\n  var location = getLocation(base);\n  if (!/^\\/#/.test(location)) {\n    window.location.replace(cleanPath(base + '/#' + location));\n    return true\n  }\n}\n\nfunction ensureSlash () {\n  var path = getHash();\n  if (path.charAt(0) === '/') {\n    return true\n  }\n  replaceHash('/' + path);\n  return false\n}\n\nfunction getHash () {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  var href = window.location.href;\n  var index = href.indexOf('#');\n  // empty path\n  if (index < 0) { return '' }\n\n  href = href.slice(index + 1);\n\n  return href\n}\n\nfunction getUrl (path) {\n  var href = window.location.href;\n  var i = href.indexOf('#');\n  var base = i >= 0 ? href.slice(0, i) : href;\n  return (base + \"#\" + path)\n}\n\nfunction pushHash (path) {\n  if (supportsPushState) {\n    pushState(getUrl(path));\n  } else {\n    window.location.hash = path;\n  }\n}\n\nfunction replaceHash (path) {\n  if (supportsPushState) {\n    replaceState(getUrl(path));\n  } else {\n    window.location.replace(getUrl(path));\n  }\n}\n\n/*  */\n\nvar AbstractHistory = /*@__PURE__*/(function (History) {\n  function AbstractHistory (router, base) {\n    History.call(this, router, base);\n    this.stack = [];\n    this.index = -1;\n  }\n\n  if ( History ) AbstractHistory.__proto__ = History;\n  AbstractHistory.prototype = Object.create( History && History.prototype );\n  AbstractHistory.prototype.constructor = AbstractHistory;\n\n  AbstractHistory.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    this.transitionTo(\n      location,\n      function (route) {\n        this$1.stack = this$1.stack.slice(0, this$1.index + 1).concat(route);\n        this$1.index++;\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  AbstractHistory.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    this.transitionTo(\n      location,\n      function (route) {\n        this$1.stack = this$1.stack.slice(0, this$1.index).concat(route);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  AbstractHistory.prototype.go = function go (n) {\n    var this$1 = this;\n\n    var targetIndex = this.index + n;\n    if (targetIndex < 0 || targetIndex >= this.stack.length) {\n      return\n    }\n    var route = this.stack[targetIndex];\n    this.confirmTransition(\n      route,\n      function () {\n        var prev = this$1.current;\n        this$1.index = targetIndex;\n        this$1.updateRoute(route);\n        this$1.router.afterHooks.forEach(function (hook) {\n          hook && hook(route, prev);\n        });\n      },\n      function (err) {\n        if (isNavigationFailure(err, NavigationFailureType.duplicated)) {\n          this$1.index = targetIndex;\n        }\n      }\n    );\n  };\n\n  AbstractHistory.prototype.getCurrentLocation = function getCurrentLocation () {\n    var current = this.stack[this.stack.length - 1];\n    return current ? current.fullPath : '/'\n  };\n\n  AbstractHistory.prototype.ensureURL = function ensureURL () {\n    // noop\n  };\n\n  return AbstractHistory;\n}(History));\n\n/*  */\n\nvar VueRouter = function VueRouter (options) {\n  if ( options === void 0 ) options = {};\n\n  if (process.env.NODE_ENV !== 'production') {\n    warn(this instanceof VueRouter, \"Router must be called with the new operator.\");\n  }\n  this.app = null;\n  this.apps = [];\n  this.options = options;\n  this.beforeHooks = [];\n  this.resolveHooks = [];\n  this.afterHooks = [];\n  this.matcher = createMatcher(options.routes || [], this);\n\n  var mode = options.mode || 'hash';\n  this.fallback =\n    mode === 'history' && !supportsPushState && options.fallback !== false;\n  if (this.fallback) {\n    mode = 'hash';\n  }\n  if (!inBrowser) {\n    mode = 'abstract';\n  }\n  this.mode = mode;\n\n  switch (mode) {\n    case 'history':\n      this.history = new HTML5History(this, options.base);\n      break\n    case 'hash':\n      this.history = new HashHistory(this, options.base, this.fallback);\n      break\n    case 'abstract':\n      this.history = new AbstractHistory(this, options.base);\n      break\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        assert(false, (\"invalid mode: \" + mode));\n      }\n  }\n};\n\nvar prototypeAccessors = { currentRoute: { configurable: true } };\n\nVueRouter.prototype.match = function match (raw, current, redirectedFrom) {\n  return this.matcher.match(raw, current, redirectedFrom)\n};\n\nprototypeAccessors.currentRoute.get = function () {\n  return this.history && this.history.current\n};\n\nVueRouter.prototype.init = function init (app /* Vue component instance */) {\n    var this$1 = this;\n\n  process.env.NODE_ENV !== 'production' &&\n    assert(\n      install.installed,\n      \"not installed. Make sure to call `Vue.use(VueRouter)` \" +\n        \"before creating root instance.\"\n    );\n\n  this.apps.push(app);\n\n  // set up app destroyed handler\n  // https://github.com/vuejs/vue-router/issues/2639\n  app.$once('hook:destroyed', function () {\n    // clean out app from this.apps array once destroyed\n    var index = this$1.apps.indexOf(app);\n    if (index > -1) { this$1.apps.splice(index, 1); }\n    // ensure we still have a main app or null if no apps\n    // we do not release the router so it can be reused\n    if (this$1.app === app) { this$1.app = this$1.apps[0] || null; }\n\n    if (!this$1.app) { this$1.history.teardown(); }\n  });\n\n  // main app previously initialized\n  // return as we don't need to set up new history listener\n  if (this.app) {\n    return\n  }\n\n  this.app = app;\n\n  var history = this.history;\n\n  if (history instanceof HTML5History || history instanceof HashHistory) {\n    var handleInitialScroll = function (routeOrError) {\n      var from = history.current;\n      var expectScroll = this$1.options.scrollBehavior;\n      var supportsScroll = supportsPushState && expectScroll;\n\n      if (supportsScroll && 'fullPath' in routeOrError) {\n        handleScroll(this$1, routeOrError, from, false);\n      }\n    };\n    var setupListeners = function (routeOrError) {\n      history.setupListeners();\n      handleInitialScroll(routeOrError);\n    };\n    history.transitionTo(\n      history.getCurrentLocation(),\n      setupListeners,\n      setupListeners\n    );\n  }\n\n  history.listen(function (route) {\n    this$1.apps.forEach(function (app) {\n      app._route = route;\n    });\n  });\n};\n\nVueRouter.prototype.beforeEach = function beforeEach (fn) {\n  return registerHook(this.beforeHooks, fn)\n};\n\nVueRouter.prototype.beforeResolve = function beforeResolve (fn) {\n  return registerHook(this.resolveHooks, fn)\n};\n\nVueRouter.prototype.afterEach = function afterEach (fn) {\n  return registerHook(this.afterHooks, fn)\n};\n\nVueRouter.prototype.onReady = function onReady (cb, errorCb) {\n  this.history.onReady(cb, errorCb);\n};\n\nVueRouter.prototype.onError = function onError (errorCb) {\n  this.history.onError(errorCb);\n};\n\nVueRouter.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n  // $flow-disable-line\n  if (!onComplete && !onAbort && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve, reject) {\n      this$1.history.push(location, resolve, reject);\n    })\n  } else {\n    this.history.push(location, onComplete, onAbort);\n  }\n};\n\nVueRouter.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n  // $flow-disable-line\n  if (!onComplete && !onAbort && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve, reject) {\n      this$1.history.replace(location, resolve, reject);\n    })\n  } else {\n    this.history.replace(location, onComplete, onAbort);\n  }\n};\n\nVueRouter.prototype.go = function go (n) {\n  this.history.go(n);\n};\n\nVueRouter.prototype.back = function back () {\n  this.go(-1);\n};\n\nVueRouter.prototype.forward = function forward () {\n  this.go(1);\n};\n\nVueRouter.prototype.getMatchedComponents = function getMatchedComponents (to) {\n  var route = to\n    ? to.matched\n      ? to\n      : this.resolve(to).route\n    : this.currentRoute;\n  if (!route) {\n    return []\n  }\n  return [].concat.apply(\n    [],\n    route.matched.map(function (m) {\n      return Object.keys(m.components).map(function (key) {\n        return m.components[key]\n      })\n    })\n  )\n};\n\nVueRouter.prototype.resolve = function resolve (\n  to,\n  current,\n  append\n) {\n  current = current || this.history.current;\n  var location = normalizeLocation(to, current, append, this);\n  var route = this.match(location, current);\n  var fullPath = route.redirectedFrom || route.fullPath;\n  var base = this.history.base;\n  var href = createHref(base, fullPath, this.mode);\n  return {\n    location: location,\n    route: route,\n    href: href,\n    // for backwards compat\n    normalizedTo: location,\n    resolved: route\n  }\n};\n\nVueRouter.prototype.getRoutes = function getRoutes () {\n  return this.matcher.getRoutes()\n};\n\nVueRouter.prototype.addRoute = function addRoute (parentOrRoute, route) {\n  this.matcher.addRoute(parentOrRoute, route);\n  if (this.history.current !== START) {\n    this.history.transitionTo(this.history.getCurrentLocation());\n  }\n};\n\nVueRouter.prototype.addRoutes = function addRoutes (routes) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn(false, 'router.addRoutes() is deprecated and has been removed in Vue Router 4. Use router.addRoute() instead.');\n  }\n  this.matcher.addRoutes(routes);\n  if (this.history.current !== START) {\n    this.history.transitionTo(this.history.getCurrentLocation());\n  }\n};\n\nObject.defineProperties( VueRouter.prototype, prototypeAccessors );\n\nfunction registerHook (list, fn) {\n  list.push(fn);\n  return function () {\n    var i = list.indexOf(fn);\n    if (i > -1) { list.splice(i, 1); }\n  }\n}\n\nfunction createHref (base, fullPath, mode) {\n  var path = mode === 'hash' ? '#' + fullPath : fullPath;\n  return base ? cleanPath(base + '/' + path) : path\n}\n\nVueRouter.install = install;\nVueRouter.version = '3.5.4';\nVueRouter.isNavigationFailure = isNavigationFailure;\nVueRouter.NavigationFailureType = NavigationFailureType;\nVueRouter.START_LOCATION = START;\n\nif (inBrowser && window.Vue) {\n  window.Vue.use(VueRouter);\n}\n\nexport default VueRouter;\n","(function (factory) {\r\n\tvar L, proj4;\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['leaflet', 'proj4'], factory);\r\n\t} else if (typeof module === 'object' && typeof module.exports === \"object\") {\r\n\t\t// Node/CommonJS\r\n\t\tL = require('leaflet');\r\n\t\tproj4 = require('proj4');\r\n\t\tmodule.exports = factory(L, proj4);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\tif (typeof window.L === 'undefined' || typeof window.proj4 === 'undefined')\r\n\t\t\tthrow 'Leaflet and proj4 must be loaded first';\r\n\t\tfactory(window.L, window.proj4);\r\n\t}\r\n}(function (L, proj4) {\r\n\tif (proj4.__esModule && proj4.default) {\r\n\t\t// If proj4 was bundled as an ES6 module, unwrap it to get\r\n\t\t// to the actual main proj4 object.\r\n\t\t// See discussion in https://github.com/kartena/Proj4Leaflet/pull/147\r\n\t\tproj4 = proj4.default;\r\n\t}\r\n \r\n\tL.Proj = {};\r\n\r\n\tL.Proj._isProj4Obj = function(a) {\r\n\t\treturn (typeof a.inverse !== 'undefined' &&\r\n\t\t\ttypeof a.forward !== 'undefined');\r\n\t};\r\n\r\n\tL.Proj.Projection = L.Class.extend({\r\n\t\tinitialize: function(code, def, bounds) {\r\n\t\t\tvar isP4 = L.Proj._isProj4Obj(code);\r\n\t\t\tthis._proj = isP4 ? code : this._projFromCodeDef(code, def);\r\n\t\t\tthis.bounds = isP4 ? def : bounds;\r\n\t\t},\r\n\r\n\t\tproject: function (latlng) {\r\n\t\t\tvar point = this._proj.forward([latlng.lng, latlng.lat]);\r\n\t\t\treturn new L.Point(point[0], point[1]);\r\n\t\t},\r\n\r\n\t\tunproject: function (point, unbounded) {\r\n\t\t\tvar point2 = this._proj.inverse([point.x, point.y]);\r\n\t\t\treturn new L.LatLng(point2[1], point2[0], unbounded);\r\n\t\t},\r\n\r\n\t\t_projFromCodeDef: function(code, def) {\r\n\t\t\tif (def) {\r\n\t\t\t\tproj4.defs(code, def);\r\n\t\t\t} else if (proj4.defs[code] === undefined) {\r\n\t\t\t\tvar urn = code.split(':');\r\n\t\t\t\tif (urn.length > 3) {\r\n\t\t\t\t\tcode = urn[urn.length - 3] + ':' + urn[urn.length - 1];\r\n\t\t\t\t}\r\n\t\t\t\tif (proj4.defs[code] === undefined) {\r\n\t\t\t\t\tthrow 'No projection definition for code ' + code;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn proj4(code);\r\n\t\t}\r\n\t});\r\n\r\n\tL.Proj.CRS = L.Class.extend({\r\n\t\tincludes: L.CRS,\r\n\r\n\t\toptions: {\r\n\t\t\ttransformation: new L.Transformation(1, 0, -1, 0)\r\n\t\t},\r\n\r\n\t\tinitialize: function(a, b, c) {\r\n\t\t\tvar code,\r\n\t\t\t    proj,\r\n\t\t\t    def,\r\n\t\t\t    options;\r\n\r\n\t\t\tif (L.Proj._isProj4Obj(a)) {\r\n\t\t\t\tproj = a;\r\n\t\t\t\tcode = proj.srsCode;\r\n\t\t\t\toptions = b || {};\r\n\r\n\t\t\t\tthis.projection = new L.Proj.Projection(proj, options.bounds);\r\n\t\t\t} else {\r\n\t\t\t\tcode = a;\r\n\t\t\t\tdef = b;\r\n\t\t\t\toptions = c || {};\r\n\t\t\t\tthis.projection = new L.Proj.Projection(code, def, options.bounds);\r\n\t\t\t}\r\n\r\n\t\t\tL.Util.setOptions(this, options);\r\n\t\t\tthis.code = code;\r\n\t\t\tthis.transformation = this.options.transformation;\r\n\r\n\t\t\tif (this.options.origin) {\r\n\t\t\t\tthis.transformation =\r\n\t\t\t\t\tnew L.Transformation(1, -this.options.origin[0],\r\n\t\t\t\t\t\t-1, this.options.origin[1]);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.scales) {\r\n\t\t\t\tthis._scales = this.options.scales;\r\n\t\t\t} else if (this.options.resolutions) {\r\n\t\t\t\tthis._scales = [];\r\n\t\t\t\tfor (var i = this.options.resolutions.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tif (this.options.resolutions[i]) {\r\n\t\t\t\t\t\tthis._scales[i] = 1 / this.options.resolutions[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.infinite = !this.options.bounds;\r\n\r\n\t\t},\r\n\r\n\t\tscale: function(zoom) {\r\n\t\t\tvar iZoom = Math.floor(zoom),\r\n\t\t\t\tbaseScale,\r\n\t\t\t\tnextScale,\r\n\t\t\t\tscaleDiff,\r\n\t\t\t\tzDiff;\r\n\t\t\tif (zoom === iZoom) {\r\n\t\t\t\treturn this._scales[zoom];\r\n\t\t\t} else {\r\n\t\t\t\t// Non-integer zoom, interpolate\r\n\t\t\t\tbaseScale = this._scales[iZoom];\r\n\t\t\t\tnextScale = this._scales[iZoom + 1];\r\n\t\t\t\tscaleDiff = nextScale - baseScale;\r\n\t\t\t\tzDiff = (zoom - iZoom);\r\n\t\t\t\treturn baseScale + scaleDiff * zDiff;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tzoom: function(scale) {\r\n\t\t\t// Find closest number in this._scales, down\r\n\t\t\tvar downScale = this._closestElement(this._scales, scale),\r\n\t\t\t\tdownZoom = this._scales.indexOf(downScale),\r\n\t\t\t\tnextScale,\r\n\t\t\t\tnextZoom,\r\n\t\t\t\tscaleDiff;\r\n\t\t\t// Check if scale is downScale => return array index\r\n\t\t\tif (scale === downScale) {\r\n\t\t\t\treturn downZoom;\r\n\t\t\t}\r\n\t\t\tif (downScale === undefined) {\r\n\t\t\t\treturn -Infinity;\r\n\t\t\t}\r\n\t\t\t// Interpolate\r\n\t\t\tnextZoom = downZoom + 1;\r\n\t\t\tnextScale = this._scales[nextZoom];\r\n\t\t\tif (nextScale === undefined) {\r\n\t\t\t\treturn Infinity;\r\n\t\t\t}\r\n\t\t\tscaleDiff = nextScale - downScale;\r\n\t\t\treturn (scale - downScale) / scaleDiff + downZoom;\r\n\t\t},\r\n\r\n\t\tdistance: L.CRS.Earth.distance,\r\n\r\n\t\tR: L.CRS.Earth.R,\r\n\r\n\t\t/* Get the closest lowest element in an array */\r\n\t\t_closestElement: function(array, element) {\r\n\t\t\tvar low;\r\n\t\t\tfor (var i = array.length; i--;) {\r\n\t\t\t\tif (array[i] <= element && (low === undefined || low < array[i])) {\r\n\t\t\t\t\tlow = array[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn low;\r\n\t\t}\r\n\t});\r\n\r\n\tL.Proj.GeoJSON = L.GeoJSON.extend({\r\n\t\tinitialize: function(geojson, options) {\r\n\t\t\tthis._callLevel = 0;\r\n\t\t\tL.GeoJSON.prototype.initialize.call(this, geojson, options);\r\n\t\t},\r\n\r\n\t\taddData: function(geojson) {\r\n\t\t\tvar crs;\r\n\r\n\t\t\tif (geojson) {\r\n\t\t\t\tif (geojson.crs && geojson.crs.type === 'name') {\r\n\t\t\t\t\tcrs = new L.Proj.CRS(geojson.crs.properties.name);\r\n\t\t\t\t} else if (geojson.crs && geojson.crs.type) {\r\n\t\t\t\t\tcrs = new L.Proj.CRS(geojson.crs.type + ':' + geojson.crs.properties.code);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (crs !== undefined) {\r\n\t\t\t\t\tthis.options.coordsToLatLng = function(coords) {\r\n\t\t\t\t\t\tvar point = L.point(coords[0], coords[1]);\r\n\t\t\t\t\t\treturn crs.projection.unproject(point);\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Base class' addData might call us recursively, but\r\n\t\t\t// CRS shouldn't be cleared in that case, since CRS applies\r\n\t\t\t// to the whole GeoJSON, inluding sub-features.\r\n\t\t\tthis._callLevel++;\r\n\t\t\ttry {\r\n\t\t\t\tL.GeoJSON.prototype.addData.call(this, geojson);\r\n\t\t\t} finally {\r\n\t\t\t\tthis._callLevel--;\r\n\t\t\t\tif (this._callLevel === 0) {\r\n\t\t\t\t\tdelete this.options.coordsToLatLng;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tL.Proj.geoJson = function(geojson, options) {\r\n\t\treturn new L.Proj.GeoJSON(geojson, options);\r\n\t};\r\n\r\n\tL.Proj.ImageOverlay = L.ImageOverlay.extend({\r\n\t\tinitialize: function (url, bounds, options) {\r\n\t\t\tL.ImageOverlay.prototype.initialize.call(this, url, null, options);\r\n\t\t\tthis._projectedBounds = bounds;\r\n\t\t},\r\n\r\n\t\t// Danger ahead: Overriding internal methods in Leaflet.\r\n\t\t// Decided to do this rather than making a copy of L.ImageOverlay\r\n\t\t// and doing very tiny modifications to it.\r\n\t\t// Future will tell if this was wise or not.\r\n\t\t_animateZoom: function (event) {\r\n\t\t\tvar scale = this._map.getZoomScale(event.zoom);\r\n\t\t\tvar northWest = L.point(this._projectedBounds.min.x, this._projectedBounds.max.y);\r\n\t\t\tvar offset = this._projectedToNewLayerPoint(northWest, event.zoom, event.center);\r\n\r\n\t\t\tL.DomUtil.setTransform(this._image, offset, scale);\r\n\t\t},\r\n\r\n\t\t_reset: function () {\r\n\t\t\tvar zoom = this._map.getZoom();\r\n\t\t\tvar pixelOrigin = this._map.getPixelOrigin();\r\n\t\t\tvar bounds = L.bounds(\r\n\t\t\t\tthis._transform(this._projectedBounds.min, zoom)._subtract(pixelOrigin),\r\n\t\t\t\tthis._transform(this._projectedBounds.max, zoom)._subtract(pixelOrigin)\r\n\t\t\t);\r\n\t\t\tvar size = bounds.getSize();\r\n\r\n\t\t\tL.DomUtil.setPosition(this._image, bounds.min);\r\n\t\t\tthis._image.style.width = size.x + 'px';\r\n\t\t\tthis._image.style.height = size.y + 'px';\r\n\t\t},\r\n\r\n\t\t_projectedToNewLayerPoint: function (point, zoom, center) {\r\n\t\t\tvar viewHalf = this._map.getSize()._divideBy(2);\r\n\t\t\tvar newTopLeft = this._map.project(center, zoom)._subtract(viewHalf)._round();\r\n\t\t\tvar topLeft = newTopLeft.add(this._map._getMapPanePos());\r\n\r\n\t\t\treturn this._transform(point, zoom)._subtract(topLeft);\r\n\t\t},\r\n\r\n\t\t_transform: function (point, zoom) {\r\n\t\t\tvar crs = this._map.options.crs;\r\n\t\t\tvar transformation = crs.transformation;\r\n\t\t\tvar scale = crs.scale(zoom);\r\n\r\n\t\t\treturn transformation.transform(point, scale);\r\n\t\t}\r\n\t});\r\n\r\n\tL.Proj.imageOverlay = function (url, bounds, options) {\r\n\t\treturn new L.Proj.ImageOverlay(url, bounds, options);\r\n\t};\r\n\r\n\treturn L.Proj;\r\n}));\r\n","/**\n * Code refactored from Mozilla Developer Network:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n */\n\n'use strict';\n\nfunction assign(target, firstSource) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert first argument to object');\n  }\n\n  var to = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var nextSource = arguments[i];\n    if (nextSource === undefined || nextSource === null) {\n      continue;\n    }\n\n    var keysArray = Object.keys(Object(nextSource));\n    for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n      var nextKey = keysArray[nextIndex];\n      var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n      if (desc !== undefined && desc.enumerable) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n  return to;\n}\n\nfunction polyfill() {\n  if (!Object.assign) {\n    Object.defineProperty(Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign\n    });\n  }\n}\n\nmodule.exports = {\n  assign: assign,\n  polyfill: polyfill\n};\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nif (global.fetch) {\n\texports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","import Logger from \"../../Common/Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"config\");\n\nvar Config = {\n\n    /** autoconf */\n    configuration : null,\n\n    /**\n     * Controle du chargement de l'autoconf\n     *\n     * @returns {Boolean} isConfigLoaded - True si l'autoconf a déjà été chargée, False sinon.\n     */\n    isConfigLoaded : function () {\n        var scope = typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : typeof global !== \"undefined\" ? global : {};\n        if (scope.Gp && scope.Gp.Config && Object.keys(scope.Gp.Config).length !== 0) {\n            this.configuration = scope.Gp.Config;\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Recuperation de l'identifiant d'une couche donnée\n     *\n     * @param {String} layerName - nom de la couche (par ex. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {String} service   - nom du service (par ex. \"WMS\" ou \"WMTS\")\n     * @returns {String} layerId - identifiant de la couche (par ex. \"ORTHOIMAGERY.ORTHOPHOTOS$GEOPORTAIL:OGC:WMTS\")\n     */\n    getLayerId : function (layerName, service) {\n        var layerId = null;\n\n        // layer\n        // key : [layerName]$[contexte]:OGC:[service]\n        // ex : \"ORTHOIMAGERY.ORTHOPHOTOS$GEOPORTAIL:OGC:WMTS\"\n\n        // service\n        // key : [layerName]$[contexte];[service]\n        // ex : PositionOfInterest$OGC:OPENLS;ReverseGeocode\n\n        if (this.configuration) {\n            var layers = this.configuration[\"layers\"];\n            for (var key in layers) {\n                if (layers.hasOwnProperty(key)) {\n                    var parts = key.split(\"$\");\n                    if (layerName === parts[0]) {\n                        if (parts[1]) {\n                            var servicePartsLayer = parts[1].split(\":\");\n                            var servicePartsService = parts[1].split(\";\");\n\n                            if (servicePartsService[1] === service) {\n                                layerId = key;\n                                break;\n                            }\n                            if (servicePartsLayer[2] === service) {\n                                layerId = key;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (!layerId) {\n            logger.error(\"ERROR layer id (layer name: \" + layerName + \" / service: \" + service + \") was not found !?\");\n        }\n\n        return layerId;\n    },\n\n    /**\n     * Récupération des paramètres nécessaires à l'affichage d'une couche WMS ou WMTS\n     *\n     * @param {String} layerName - nom de la couche (par ex. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {String} service   - nom du service (par ex. \"WMS\" ou \"WMTS\")\n     * @param {String} [apiKey]  - Clé de contrat API\n     * @returns {Object} params  - paramètres du service (WMS ou WMTS) pour la couche donnée\n     * @returns {String} params.url        - Url du service à requêter pour afficher la couche\n     * @returns {String} params.version    - Version du service\n     * @returns {String} params.styles     - Style par défaut de la couche\n     * @returns {String} params.format     - Format par défaut de la couche\n     * @returns {String} params.projection - Projection par défaut de la couche\n     * @returns {Number} params.minScale   - Dénominateur d'échelle minimum de la couche\n     * @returns {Number} params.maxScale   - Dénominateur d'échelle maximum de la couche\n     * @returns {Gp.BBox} params.extent    - Etendue de la couche, dans la projection de la couche\n     * @returns {Array} params.legends     - Tableau des légendes associées à la couche\n     * @returns {Array} params.metadata    - Tableau des métadonnées associées à la couche\n     * @returns {Array} params.originators - Tableau des originators associés à la couche\n     * @returns {Array} params.title       - Nom de la resource, lisible par un humain.\n     * @returns {Array} params.description - Url de l'image d'aperçu rapide de la ressource.\n     * @returns {Array} params.quicklookUrl- Tableau des originators associés à la couche\n     * @returns {String} params.[TMSLink]          - Identifiant de la pyramide (TMS), dans le cas d'une couche WMTS\n     * @returns {Gp.Point} params.[matrixOrigin]   - Origine de la matrice (top left corner), dans le cas d'une couche WMTS\n     * @returns {Array} params.[nativeResolutions] - Tableau regroupant les résolutions de chaque niveau de la matrice, dans le cas d'une couche WMTS\n     * @returns {Array} params.[matrixIds]         - Tableau regroupant les identifiants de chaque niveau de la matrice, dans le cas d'une couche WMTS\n     */\n    getLayerParams : function (layerName, service, apiKey) {\n        var params = {};\n\n        if (this.configuration) {\n            // récupération de l'identifiant complet de la couche.\n            var layerId = this.getLayerId(layerName, service);\n\n            if (layerId) {\n                // récupération de l'objet de configuration de la couche\n                var layerConf = this.configuration.layers[layerId];\n\n                // controle de la clef\n                var key = layerConf.apiKeys[0];\n                if (apiKey) {\n                    if (apiKey !== key) {\n                        logger.error(\"ERROR different keys (\" + apiKey + \" !== \" + key + \") !?\");\n                        return;\n                    }\n                }\n\n                apiKey = apiKey || key;\n                params.key = apiKey;\n                // récupération des paramètres du service\n                params.url = layerConf.getServerUrl(apiKey);\n                params.version = layerConf.getServiceParams().version;\n                params.styles = layerConf.getDefaultStyle();\n                params.format = layerConf.getDefaultFormat();\n                params.projection = layerConf.getDefaultProjection();\n\n                // récupération des infos de la couche\n                params.minScale = layerConf.getMinScaleDenominator();\n                params.maxScale = layerConf.getMaxScaleDenominator();\n                params.extent = layerConf.getBBOX();\n                params.legends = layerConf.getLegends();\n                params.metadata = layerConf.getMetadata();\n                params.originators = layerConf.getOriginators();\n                params.title = layerConf.getTitle();\n                params.description = layerConf.getDescription();\n                params.quicklookUrl = layerConf.getQuicklookUrl();\n\n                // WMTS : récupération des tileMatrixSetLimits\n                if (layerConf.wmtsOptions) {\n                    params.tileMatrixSetLimits = layerConf.wmtsOptions.tileMatrixSetLimits;\n                }\n\n                // WMTS : récupération des paramètres de la pyramide (TMS)\n                var TMSLink = layerConf.getTMSID();\n                if (TMSLink) {\n                    params.TMSLink = TMSLink;\n                    var tmsConf = this.configuration.getTMSConf(TMSLink);\n                    // Get matrix origin : Gp.Point = Object{x:Float, y:Float}\n                    params.matrixOrigin = tmsConf.getTopLeftCorner();\n                    params.nativeResolutions = tmsConf.nativeResolutions;\n                    params.matrixIds = tmsConf.matrixIds;\n                    params.tileMatrices = tmsConf.tileMatrices;\n                }\n            }\n        }\n\n        return params;\n    },\n\n    /**\n     * Recuperation des parametres d'un service\n     *\n     * @param {String} [resource] - \"PositionOfInterest\", \"StreetAddress\", \"Voiture\", \"Pieton\", ...\n     * @param {String} [service] - Geocode, Itineraire, ...\n     * @param {Array} [apiKeys]  - Clé(s) de contrat API\n     * @returns {Object} params - paramètres de la ressource\n     * @returns {String} params. -\n     * @returns {String} params. -\n     * @returns {String} params. -\n     */\n    getServiceParams : function (resource, service, apiKeys) {\n        var params = {};\n\n        if (this.configuration) {\n            // récupération de l'identifiant complet de la couche.\n            var layerId = this.getLayerId(resource, service);\n\n            if (layerId) {\n                // récupération de l'objet de configuration de la couche\n                var layerConf = this.configuration.layers[layerId];\n\n                // controle de la clef (on prend la première clé disponible qui est censée avoir accès à la ressource)\n                var key = layerConf.apiKeys[0];\n                if (apiKeys) {\n                    if (!Array.isArray(apiKeys)) {\n                        apiKeys = [apiKeys];\n                    }\n                    for (var i = 0; i < apiKeys.length; i++) {\n                        if (apiKeys[i] === key) {\n                            var keyIndex = i;\n                            break;\n                        }\n                    }\n                    // si aucune clé du tableau apiKeys ne correspond, on retourne rien => pas de droits pour la ressource\n                    if (typeof keyIndex === \"undefined\") {\n                        return;\n                    }\n                }\n\n                // on retourne la première clé qui a effectivement accès à la ressource\n                var apiKey = apiKeys[keyIndex] || key;\n                params.key = apiKey;\n                // récupération des paramètres du service\n                params.url = layerConf.getServerUrl(apiKey);\n                params.version = layerConf.getServiceParams().version;\n\n                // récupération des infos de la couche\n                params.extent = layerConf.getBBOX();\n                params.title = layerConf.getTitle();\n                params.description = layerConf.getDescription();\n            }\n        }\n\n        return params;\n    },\n\n    /**\n     * Resolution en geographique\n     *\n     * @returns {Array} resolutions\n     */\n    getResolutions : function () {\n        var resolutions = [];\n\n        if (this.configuration) {\n            resolutions = this.configuration[\"generalOptions\"][\"wgs84Resolutions\"];\n        }\n\n        return resolutions;\n    },\n\n    /**\n     * Recuperation des parametres TMS de la configuration\n     * @param {String} tmsName - tile matrix set name\n     *\n     * @returns {Object} tile matrix set\n     */\n    getTileMatrix : function (tmsName) {\n        var tms = {};\n\n        if (this.configuration) {\n            if (tmsName) {\n                tms = this.configuration[\"tileMatrixSets\"][tmsName.toUpperCase()];\n            }\n        }\n\n        return tms;\n    },\n\n    /**\n     * Récupération des contraintes générales d'une couche donnée : extent, minScale, maxScale, projection\n     *\n     * @param {String} layerId - identifiant de la couche\n     * @returns {Object} params - contraintes de la couche\n     * @returns {String} params.projection - Projection par défaut de la couche\n     * @returns {Number} params.minScale   - Dénominateur d'échelle minimum de la couche\n     * @returns {Number} params.maxScale   - Dénominateur d'échelle maximum de la couche\n     * @returns {Gp.BBox} params.extent    - Etendue de la couche, dans la projection de la couche\n     */\n    getGlobalConstraints : function (layerId) {\n        var params = {};\n\n        if (layerId) {\n            // récupération de l'objet de configuration de la couche\n            var layerConf = this.configuration.layers[layerId];\n            params.projection = layerConf.getDefaultProjection();\n            params.minScale = layerConf.getMinScaleDenominator();\n            params.maxScale = layerConf.getMaxScaleDenominator();\n            params.extent = layerConf.getBBOX();\n        }\n\n        return params;\n    }\n};\n\nexport default Config;\n","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_GRIDSHIFT = 3;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SRS_WGS84_SEMIMAJOR = 6378137.0;  // only used in grid shift transforms\nexport var SRS_WGS84_SEMIMINOR = 6356752.314;  // only used in grid shift transforms\nexport var SRS_WGS84_ESQUARED = 0.0066943799901413165; // only used in grid shift transforms\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    gamma: function(v) {\n      self.rectified_grid_angle = parseFloat(v);\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    },\n    approx: function() {\n      self.approx = true;\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84_]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n    obj[key].push(v);\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.AXIS) {\n    var axisOrder = '';\n    for (var i = 0, ii = wkt.AXIS.length; i < ii; ++i) {\n      var axis = [wkt.AXIS[i][0].toLowerCase(), wkt.AXIS[i][1].toLowerCase()];\n      if (axis[0].indexOf('north') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'north')) {\n        axisOrder += 'n';\n      } else if (axis[0].indexOf('south') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'south')) {\n        axisOrder += 's';\n      } else if (axis[0].indexOf('east') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'east')) {\n        axisOrder += 'e';\n      } else if (axis[0].indexOf('west') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'west')) {\n        axisOrder += 'w';\n      }\n    }\n    if (axisOrder.length === 2) {\n      axisOrder += 'u';\n    }\n    if (axisOrder.length === 3) {\n      wkt.axis = axisOrder;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984' || wkt.datumCode === 'world_geodetic_system_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_1', 'Latitude of 1st standard parallel'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['standard_parallel_2', 'Latitude of 2nd standard parallel'],\n    ['false_easting', 'False_Easting'],\n    ['false_easting', 'False easting'],\n    ['false-easting', 'Easting at false origin'],\n    ['false_northing', 'False_Northing'],\n    ['false_northing', 'False northing'],\n    ['false_northing', 'Northing at false origin'],\n    ['central_meridian', 'Central_Meridian'],\n    ['central_meridian', 'Longitude of natural origin'],\n    ['central_meridian', 'Longitude of false origin'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['latitude_of_origin', 'Latitude of natural origin'],\n    ['latitude_of_origin', 'Latitude of false origin'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\nvar codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"598.1,73.7,418.2,0.202,0.045,-2.455,6.7\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2, nadgrids) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  if (nadgrids) {\n    out.datum_type = PJD_GRIDSHIFT;\n    out.grids = nadgrids;\n  }\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","/**\n * Resources for details of NTv2 file formats:\n * - https://web.archive.org/web/20140127204822if_/http://www.mgs.gov.on.ca:80/stdprodconsume/groups/content/@mgs/@iandit/documents/resourcelist/stel02_047447.pdf\n * - http://mimaka.com/help/gs/html/004_NTV2%20Data%20Format.htm\n */\n\nvar loadedNadgrids = {};\n\n/**\n * Load a binary NTv2 file (.gsb) to a key that can be used in a proj string like +nadgrids=<key>. Pass the NTv2 file\n * as an ArrayBuffer.\n */\nexport default function nadgrid(key, data) {\n  var view = new DataView(data);\n  var isLittleEndian = detectLittleEndian(view);\n  var header = readHeader(view, isLittleEndian);\n  if (header.nSubgrids > 1) {\n    console.log('Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored');\n  }\n  var subgrids = readSubgrids(view, header, isLittleEndian);\n  var nadgrid = {header: header, subgrids: subgrids};\n  loadedNadgrids[key] = nadgrid;\n  return nadgrid;\n}\n\n/**\n * Given a proj4 value for nadgrids, return an array of loaded grids\n */\nexport function getNadgrids(nadgrids) {\n  // Format details: http://proj.maptools.org/gen_parms.html\n  if (nadgrids === undefined) { return null; }\n  var grids = nadgrids.split(',');\n  return grids.map(parseNadgridString);\n}\n\nfunction parseNadgridString(value) {\n  if (value.length === 0) {\n    return null;\n  }\n  var optional = value[0] === '@';\n  if (optional) {\n    value = value.slice(1);\n  }\n  if (value === 'null') {\n    return {name: 'null', mandatory: !optional, grid: null, isNull: true};\n  }\n  return {\n    name: value,\n    mandatory: !optional,\n    grid: loadedNadgrids[value] || null,\n    isNull: false\n  };\n}\n\nfunction secondsToRadians(seconds) {\n  return (seconds / 3600) * Math.PI / 180;\n}\n\nfunction detectLittleEndian(view) {\n  var nFields = view.getInt32(8, false);\n  if (nFields === 11) {\n    return false;\n  }\n  nFields = view.getInt32(8, true);\n  if (nFields !== 11) {\n    console.warn('Failed to detect nadgrid endian-ness, defaulting to little-endian');\n  }\n  return true;\n}\n\nfunction readHeader(view, isLittleEndian) {\n  return {\n    nFields: view.getInt32(8, isLittleEndian),\n    nSubgridFields: view.getInt32(24, isLittleEndian),\n    nSubgrids: view.getInt32(40, isLittleEndian),\n    shiftType: decodeString(view, 56, 56 + 8).trim(),\n    fromSemiMajorAxis: view.getFloat64(120, isLittleEndian),\n    fromSemiMinorAxis: view.getFloat64(136, isLittleEndian),\n    toSemiMajorAxis: view.getFloat64(152, isLittleEndian),\n    toSemiMinorAxis: view.getFloat64(168, isLittleEndian),\n  };\n}\n\nfunction decodeString(view, start, end) {\n  return String.fromCharCode.apply(null, new Uint8Array(view.buffer.slice(start, end)));\n}\n\nfunction readSubgrids(view, header, isLittleEndian) {\n  var gridOffset = 176;\n  var grids = [];\n  for (var i = 0; i < header.nSubgrids; i++) {\n    var subHeader = readGridHeader(view, gridOffset, isLittleEndian);\n    var nodes = readGridNodes(view, gridOffset, subHeader, isLittleEndian);\n    var lngColumnCount = Math.round(\n      1 + (subHeader.upperLongitude - subHeader.lowerLongitude) / subHeader.longitudeInterval);\n    var latColumnCount = Math.round(\n      1 + (subHeader.upperLatitude - subHeader.lowerLatitude) / subHeader.latitudeInterval);\n    // Proj4 operates on radians whereas the coordinates are in seconds in the grid\n    grids.push({\n      ll: [secondsToRadians(subHeader.lowerLongitude), secondsToRadians(subHeader.lowerLatitude)],\n      del: [secondsToRadians(subHeader.longitudeInterval), secondsToRadians(subHeader.latitudeInterval)],\n      lim: [lngColumnCount, latColumnCount],\n      count: subHeader.gridNodeCount,\n      cvs: mapNodes(nodes)\n    });\n  }\n  return grids;\n}\n\nfunction mapNodes(nodes) {\n  return nodes.map(function (r) {return [secondsToRadians(r.longitudeShift), secondsToRadians(r.latitudeShift)];});\n}\n\nfunction readGridHeader(view, offset, isLittleEndian) {\n  return {\n    name: decodeString(view, offset + 8, offset + 16).trim(),\n    parent: decodeString(view, offset + 24, offset + 24 + 8).trim(),\n    lowerLatitude: view.getFloat64(offset + 72, isLittleEndian),\n    upperLatitude: view.getFloat64(offset + 88, isLittleEndian),\n    lowerLongitude: view.getFloat64(offset + 104, isLittleEndian),\n    upperLongitude: view.getFloat64(offset + 120, isLittleEndian),\n    latitudeInterval: view.getFloat64(offset + 136, isLittleEndian),\n    longitudeInterval: view.getFloat64(offset + 152, isLittleEndian),\n    gridNodeCount: view.getInt32(offset + 168, isLittleEndian)\n  };\n}\n\nfunction readGridNodes(view, offset, gridHeader, isLittleEndian) {\n  var nodesOffset = offset + 176;\n  var gridRecordLength = 16;\n  var gridShiftRecords = [];\n  for (var i = 0; i < gridHeader.gridNodeCount; i++) {\n    var record = {\n      latitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength, isLittleEndian),\n      longitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength + 4, isLittleEndian),\n      latitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 8, isLittleEndian),\n      longitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 12, isLittleEndian),\n    };\n    gridShiftRecords.push(record);\n  }\n  return gridShiftRecords;\n}\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\nimport {getNadgrids} from \"./nadgrid\";\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = json.datum_params || (datumDef.towgs84 ? datumDef.towgs84.split(',') : null);\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  json.lat1 = json.lat1 || json.lat0; // Lambert_Conformal_Conic_1SP, for example, needs this\n\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var nadgrids = getNadgrids(json.nadgrids);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2,\n    nadgrids);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calulated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","import {\n  PJD_3PARAM,\n  PJD_7PARAM,\n  PJD_GRIDSHIFT,\n  PJD_NODATUM,\n  R2D,\n  SRS_WGS84_ESQUARED,\n  SRS_WGS84_SEMIMAJOR, SRS_WGS84_SEMIMINOR\n} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nimport adjust_lon from \"./common/adjust_lon\";\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n  var source_a = source.a;\n  var source_es = source.es;\n  if (source.datum_type === PJD_GRIDSHIFT) {\n    var gridShiftCode = applyGridShift(source, false, point);\n    if (gridShiftCode !== 0) {\n      return undefined;\n    }\n    source_a = SRS_WGS84_SEMIMAJOR;\n    source_es = SRS_WGS84_ESQUARED;\n  }\n\n  var dest_a = dest.a;\n  var dest_b = dest.b;\n  var dest_es = dest.es;\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    dest_a = SRS_WGS84_SEMIMAJOR;\n    dest_b = SRS_WGS84_SEMIMINOR;\n    dest_es = SRS_WGS84_ESQUARED;\n  }\n\n  // Do we need to go through geocentric coordinates?\n  if (source_es === dest_es && source_a === dest_a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source_es, source_a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  point = geocentricToGeodetic(point, dest_es, dest_a, dest_b);\n\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    var destGridShiftResult = applyGridShift(dest, true, point);\n    if (destGridShiftResult !== 0) {\n      return undefined;\n    }\n  }\n\n  return point;\n}\n\nexport function applyGridShift(source, inverse, point) {\n  if (source.grids === null || source.grids.length === 0) {\n    console.log('Grid shift grids not found');\n    return -1;\n  }\n  var input = {x: -point.x, y: point.y};\n  var output = {x: Number.NaN, y: Number.NaN};\n  var onlyMandatoryGrids = false;\n  var attemptedGrids = [];\n  for (var i = 0; i < source.grids.length; i++) {\n    var grid = source.grids[i];\n    attemptedGrids.push(grid.name);\n    if (grid.isNull) {\n      output = input;\n      break;\n    }\n    onlyMandatoryGrids = grid.mandatory;\n    if (grid.grid === null) {\n      if (grid.mandatory) {\n        console.log(\"Unable to find mandatory grid '\" + grid.name + \"'\");\n        return -1;\n      }\n      continue;\n    }\n    var subgrid = grid.grid.subgrids[0];\n    // skip tables that don't match our point at all\n    var epsilon = (Math.abs(subgrid.del[1]) + Math.abs(subgrid.del[0])) / 10000.0;\n    var minX = subgrid.ll[0] - epsilon;\n    var minY = subgrid.ll[1] - epsilon;\n    var maxX = subgrid.ll[0] + (subgrid.lim[0] - 1) * subgrid.del[0] + epsilon;\n    var maxY = subgrid.ll[1] + (subgrid.lim[1] - 1) * subgrid.del[1] + epsilon;\n    if (minY > input.y || minX > input.x || maxY < input.y || maxX < input.x ) {\n      continue;\n    }\n    output = applySubgridShift(input, inverse, subgrid);\n    if (!isNaN(output.x)) {\n      break;\n    }\n  }\n  if (isNaN(output.x)) {\n    console.log(\"Failed to find a grid shift table for location '\"+\n      -input.x * R2D + \" \" + input.y * R2D + \" tried: '\" + attemptedGrids + \"'\");\n    return -1;\n  }\n  point.x = -output.x;\n  point.y = output.y;\n  return 0;\n}\n\nfunction applySubgridShift(pin, inverse, ct) {\n  var val = {x: Number.NaN, y: Number.NaN};\n  if (isNaN(pin.x)) { return val; }\n  var tb = {x: pin.x, y: pin.y};\n  tb.x -= ct.ll[0];\n  tb.y -= ct.ll[1];\n  tb.x = adjust_lon(tb.x - Math.PI) + Math.PI;\n  var t = nadInterpolate(tb, ct);\n  if (inverse) {\n    if (isNaN(t.x)) {\n      return val;\n    }\n    t.x = tb.x - t.x;\n    t.y = tb.y - t.y;\n    var i = 9, tol = 1e-12;\n    var dif, del;\n    do {\n      del = nadInterpolate(t, ct);\n      if (isNaN(del.x)) {\n        console.log(\"Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.\");\n        break;\n      }\n      dif = {x: tb.x - (del.x + t.x), y: tb.y - (del.y + t.y)};\n      t.x += dif.x;\n      t.y += dif.y;\n    } while (i-- && Math.abs(dif.x) > tol && Math.abs(dif.y) > tol);\n    if (i < 0) {\n      console.log(\"Inverse grid shift iterator failed to converge.\");\n      return val;\n    }\n    val.x = adjust_lon(t.x + ct.ll[0]);\n    val.y = t.y + ct.ll[1];\n  } else {\n    if (!isNaN(t.x)) {\n      val.x = pin.x + t.x;\n      val.y = pin.y + t.y;\n    }\n  }\n  return val;\n}\n\nfunction nadInterpolate(pin, ct) {\n  var t = {x: pin.x / ct.del[0], y: pin.y / ct.del[1]};\n  var indx = {x: Math.floor(t.x), y: Math.floor(t.y)};\n  var frct = {x: t.x - 1.0 * indx.x, y: t.y - 1.0 * indx.y};\n  var val= {x: Number.NaN, y: Number.NaN};\n  var inx;\n  if (indx.x < 0 || indx.x >= ct.lim[0]) {\n    return val;\n  }\n  if (indx.y < 0 || indx.y >= ct.lim[1]) {\n    return val;\n  }\n  inx = (indx.y * ct.lim[0]) + indx.x;\n  var f00 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx++;\n  var f10= {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx += ct.lim[0];\n  var f11 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx--;\n  var f01 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  var m11 = frct.x * frct.y, m10 = frct.x * (1.0 - frct.y),\n    m00 = (1.0 - frct.x) * (1.0 - frct.y), m01 = (1.0 - frct.x) * frct.y;\n  val.x = (m00 * f00.x + m10 * f10.x + m01 * f01.x + m11 * f11.x);\n  val.y = (m00 * f00.y + m10 * f10.y + m01 * f01.y + m11 * f11.y);\n  return val;\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      if (\"ew\".indexOf(crs.axis[i]) !== -1) {\n        t = 'x';\n      } else {\n        t = 'y';\n      }\n\n    }\n    else if (i === 1) {\n      v = yin;\n      if (\"ns\".indexOf(crs.axis[i]) !== -1) {\n        t = 'y';\n      } else {\n        t = 'x';\n      }\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point, enforceAxis) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  }\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point, enforceAxis);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (enforceAxis && source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R,\n      z: point.z || 0\n    };\n  } else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter,\n        z: point.z || 0\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n    if (!point) {\n      return;\n    }\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n  if (!point) {\n    return;\n  }\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y,\n      z: point.z || 0\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D,\n      z: point.z || 0\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter,\n        z: point.z || 0\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (enforceAxis && dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords, enforceAxis) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords, enforceAxis) || {x: NaN, y: NaN};\n    if (coords.length > 2) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (typeof transformedArray.z === 'number') {\n          return [transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.splice(3));\n        } else {\n          return [transformedArray.x, transformedArray.y, coords[2]].concat(coords.splice(3));\n        }\n      } else {\n        return [transformedArray.x, transformedArray.y].concat(coords.splice(2));\n      }\n    } else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  } else {\n    out = transform(from, to, coords, enforceAxis);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (key === 'x' || key === 'y' || key === 'z') {\n          return;\n        }\n      } else {\n        if (key === 'x' || key === 'y') {\n          return;\n        }\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\n\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  } else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  } else {\n    obj = {\n      forward: function (coords, enforceAxis) {\n        return transformer(fromProj, toProj, coords, enforceAxis);\n      },\n      inverse: function (coords, enforceAxis) {\n        return transformer(toProj, fromProj, coords, enforceAxis);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100´k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Fast_Transverse_Mercator\", \"Fast Transverse Mercator\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport tmerc from '../projections/tmerc';\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (!this.approx && (isNaN(this.es) || this.es <= 0)) {\n    throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION[\"Fast_Transverse_Mercator\"] in the WKT.');\n  }\n  if (this.approx) {\n    // When '+approx' is set, use tmerc instead\n    tmerc.init.apply(this);\n    this.forward = tmerc.forward;\n    this.inverse = tmerc.inverse;\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\", \"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme à axe oblique et pour la transformation entre\n    des systèmes de référence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { D2R, EPSLN, HALF_PI, TWO_PI, FORTPI } from '../constants/values';\n\nvar TOL = 1e-7;\n\nfunction isTypeA(P) {\n  var typeAProjections = ['Hotine_Oblique_Mercator','Hotine_Oblique_Mercator_Azimuth_Natural_Origin'];\n  var projectionName = typeof P.PROJECTION === \"object\" ? Object.keys(P.PROJECTION)[0] : P.PROJECTION;\n  \n  return 'no_uoff' in P || 'no_off' in P || typeAProjections.indexOf(projectionName) !== -1;\n}\n\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {  \n  var con, com, cosph0, D, F, H, L, sinph0, p, J, gamma = 0,\n    gamma0, lamc = 0, lam1 = 0, lam2 = 0, phi1 = 0, phi2 = 0, alpha_c = 0, AB;\n  \n  // only Type A uses the no_off or no_uoff property\n  // https://github.com/OSGeo/proj.4/issues/104\n  this.no_off = isTypeA(this);\n  this.no_rot = 'no_rot' in this;\n  \n  var alp = false;\n  if (\"alpha\" in this) {\n    alp = true;\n  }\n\n  var gam = false;\n  if (\"rectified_grid_angle\" in this) {\n    gam = true;\n  }\n\n  if (alp) {\n    alpha_c = this.alpha;\n  }\n  \n  if (gam) {\n    gamma = (this.rectified_grid_angle * D2R);\n  }\n  \n  if (alp || gam) {\n    lamc = this.longc;\n  } else {\n    lam1 = this.long1;\n    phi1 = this.lat1;\n    lam2 = this.long2;\n    phi2 = this.lat2;\n    \n    if (Math.abs(phi1 - phi2) <= TOL || (con = Math.abs(phi1)) <= TOL ||\n        Math.abs(con - HALF_PI) <= TOL || Math.abs(Math.abs(this.lat0) - HALF_PI) <= TOL ||\n        Math.abs(Math.abs(phi2) - HALF_PI) <= TOL) {\n      throw new Error();\n    }\n  }\n  \n  var one_es = 1.0 - this.es;\n  com = Math.sqrt(one_es);\n  \n  if (Math.abs(this.lat0) > EPSLN) {\n    sinph0 = Math.sin(this.lat0);\n    cosph0 = Math.cos(this.lat0);\n    con = 1 - this.es * sinph0 * sinph0;\n    this.B = cosph0 * cosph0;\n    this.B = Math.sqrt(1 + this.es * this.B * this.B / one_es);\n    this.A = this.B * this.k0 * com / con;\n    D = this.B * com / (cosph0 * Math.sqrt(con));\n    F = D * D -1;\n    \n    if (F <= 0) {\n      F = 0;\n    } else {\n      F = Math.sqrt(F);\n      if (this.lat0 < 0) {\n        F = -F;\n      }\n    }\n    \n    this.E = F += D;\n    this.E *= Math.pow(tsfnz(this.e, this.lat0, sinph0), this.B);\n  } else {\n    this.B = 1 / com;\n    this.A = this.k0;\n    this.E = D = F = 1;\n  }\n  \n  if (alp || gam) {\n    if (alp) {\n      gamma0 = Math.asin(Math.sin(alpha_c) / D);\n      if (!gam) {\n        gamma = alpha_c;\n      }\n    } else {\n      gamma0 = gamma;\n      alpha_c = Math.asin(D * Math.sin(gamma0));\n    }\n    this.lam0 = lamc - Math.asin(0.5 * (F - 1 / F) * Math.tan(gamma0)) / this.B;\n  } else {\n    H = Math.pow(tsfnz(this.e, phi1, Math.sin(phi1)), this.B);\n    L = Math.pow(tsfnz(this.e, phi2, Math.sin(phi2)), this.B);\n    F = this.E / H;\n    p = (L - H) / (L + H);\n    J = this.E * this.E;\n    J = (J - L * H) / (J + L * H);\n    con = lam1 - lam2;\n    \n    if (con < -Math.pi) {\n      lam2 -=TWO_PI;\n    } else if (con > Math.pi) {\n      lam2 += TWO_PI;\n    }\n    \n    this.lam0 = adjust_lon(0.5 * (lam1 + lam2) - Math.atan(J * Math.tan(0.5 * this.B * (lam1 - lam2)) / p) / this.B);\n    gamma0 = Math.atan(2 * Math.sin(this.B * adjust_lon(lam1 - this.lam0)) / (F - 1 / F));\n    gamma = alpha_c = Math.asin(D * Math.sin(gamma0));\n  }\n  \n  this.singam = Math.sin(gamma0);\n  this.cosgam = Math.cos(gamma0);\n  this.sinrot = Math.sin(gamma);\n  this.cosrot = Math.cos(gamma);\n  \n  this.rB = 1 / this.B;\n  this.ArB = this.A * this.rB;\n  this.BrA = 1 / this.ArB;\n  AB = this.A * this.B;\n  \n  if (this.no_off) {\n    this.u_0 = 0;\n  } else {\n    this.u_0 = Math.abs(this.ArB * Math.atan(Math.sqrt(D * D - 1) / Math.cos(alpha_c)));\n    \n    if (this.lat0 < 0) {\n      this.u_0 = - this.u_0;\n    }  \n  }\n    \n  F = 0.5 * gamma0;\n  this.v_pole_n = this.ArB * Math.log(Math.tan(FORTPI - F));\n  this.v_pole_s = this.ArB * Math.log(Math.tan(FORTPI + F));\n}\n\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var coords = {};\n  var S, T, U, V, W, temp, u, v;\n  p.x = p.x - this.lam0;\n  \n  if (Math.abs(Math.abs(p.y) - HALF_PI) > EPSLN) {\n    W = this.E / Math.pow(tsfnz(this.e, p.y, Math.sin(p.y)), this.B);\n    \n    temp = 1 / W;\n    S = 0.5 * (W - temp);\n    T = 0.5 * (W + temp);\n    V = Math.sin(this.B * p.x);\n    U = (S * this.singam - V * this.cosgam) / T;\n        \n    if (Math.abs(Math.abs(U) - 1.0) < EPSLN) {\n      throw new Error();\n    }\n    \n    v = 0.5 * this.ArB * Math.log((1 - U)/(1 + U));\n    temp = Math.cos(this.B * p.x);\n    \n    if (Math.abs(temp) < TOL) {\n      u = this.A * p.x;\n    } else {\n      u = this.ArB * Math.atan2((S * this.cosgam + V * this.singam), temp);\n    }    \n  } else {\n    v = p.y > 0 ? this.v_pole_n : this.v_pole_s;\n    u = this.ArB * p.y;\n  }\n     \n  if (this.no_rot) {\n    coords.x = u;\n    coords.y = v;\n  } else {\n    u -= this.u_0;\n    coords.x = v * this.cosrot + u * this.sinrot;\n    coords.y = u * this.cosrot - v * this.sinrot;\n  }\n  \n  coords.x = (this.a * coords.x + this.x0);\n  coords.y = (this.a * coords.y + this.y0);\n  \n  return coords;\n}\n\nexport function inverse(p) {\n  var u, v, Qp, Sp, Tp, Vp, Up;\n  var coords = {};\n  \n  p.x = (p.x - this.x0) * (1.0 / this.a);\n  p.y = (p.y - this.y0) * (1.0 / this.a);\n\n  if (this.no_rot) {\n    v = p.y;\n    u = p.x;\n  } else {\n    v = p.x * this.cosrot - p.y * this.sinrot;\n    u = p.y * this.cosrot + p.x * this.sinrot + this.u_0;\n  }\n  \n  Qp = Math.exp(-this.BrA * v);\n  Sp = 0.5 * (Qp - 1 / Qp);\n  Tp = 0.5 * (Qp + 1 / Qp);\n  Vp = Math.sin(this.BrA * u);\n  Up = (Vp * this.cosgam + Sp * this.singam) / Tp;\n  \n  if (Math.abs(Math.abs(Up) - 1) < EPSLN) {\n    coords.x = 0;\n    coords.y = Up < 0 ? -HALF_PI : HALF_PI;\n  } else {\n    coords.y = this.E / Math.sqrt((1 + Up) / (1 - Up));\n    coords.y = phi2z(this.e, Math.pow(coords.y, 1 / this.B));\n    \n    if (coords.y === Infinity) {\n      throw new Error();\n    }\n        \n    coords.x = -this.rB * Math.atan2((Sp * this.cosgam - Vp * this.singam), Math.cos(this.BrA * u));\n  }\n  \n  coords.x += this.lam0;\n  \n  return coords;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Two_Point_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"Oblique_Mercator\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n  \n  //double lat0;                    /* the reference latitude               */\n  //double long0;                   /* the reference longitude              */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n  \n  //the above value can be set with proj4.defs\n  //example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\n  \"Lambert Tangential Conformal Conic Projection\",\n  \"Lambert_Conformal_Conic\",\n  \"Lambert_Conformal_Conic_1SP\",\n  \"Lambert_Conformal_Conic_2SP\",\n  \"lcc\"\n];\n\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.lat0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.lat0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c ? c / Math.sin(c) : 1;\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F, sinpsi;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      sinpsi = Math.sin(psi);\n      lat = Math.atan2((sinpsi - this.es * F * this.sin_p12) * Math.tan(psi), sinpsi * (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {\n    geodeticToGeocentric,\n    geocentricToGeodetic\n} from '../datumUtils';\n\nexport function init() {\n    this.name = 'geocent';\n\n}\n\nexport function forward(p) {\n    var point = geodeticToGeocentric(p, this.es, this.a);\n    return point;\n}\n\nexport function inverse(p) {\n    var point = geocentricToGeodetic(p, this.es, this.a, this.b);\n    return point;\n}\n\nexport var names = [\"Geocentric\", 'geocentric', \"geocent\", \"Geocent\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names\n};","\nvar mode = {\n  N_POLE: 0,\n  S_POLE: 1,\n  EQUIT: 2,\n  OBLIQ: 3\n};\n\nimport { D2R, HALF_PI, EPSLN } from \"../constants/values\";\nimport hypot from \"../common/hypot\";\n\nvar params = {\n  h:     { def: 100000, num: true },           // default is Karman line, no default in PROJ.7\n  azi:   { def: 0, num: true, degrees: true }, // default is North\n  tilt:  { def: 0, num: true, degrees: true }, // default is Nadir\n  long0: { def: 0, num: true },                // default is Greenwich, conversion to rad is automatic\n  lat0:  { def: 0, num: true }                 // default is Equator, conversion to rad is automatic\n};\n\nexport function init() {\n  Object.keys(params).forEach(function (p) {\n    if (typeof this[p] === \"undefined\") {\n      this[p] = params[p].def;\n    } else if (params[p].num && isNaN(this[p])) {\n      throw new Error(\"Invalid parameter value, must be numeric \" + p + \" = \" + this[p]);\n    } else if (params[p].num) {\n      this[p] = parseFloat(this[p]);\n    }\n    if (params[p].degrees) {\n      this[p] = this[p] * D2R;\n    }\n  }.bind(this));\n\n  if (Math.abs((Math.abs(this.lat0) - HALF_PI)) < EPSLN) {\n    this.mode = this.lat0 < 0 ? mode.S_POLE : mode.N_POLE;\n  } else if (Math.abs(this.lat0) < EPSLN) {\n    this.mode = mode.EQUIT;\n  } else {\n    this.mode = mode.OBLIQ;\n    this.sinph0 = Math.sin(this.lat0);\n    this.cosph0 = Math.cos(this.lat0);\n  }\n\n  this.pn1 = this.h / this.a;  // Normalize relative to the Earth's radius\n\n  if (this.pn1 <= 0 || this.pn1 > 1e10) {\n    throw new Error(\"Invalid height\");\n  }\n  \n  this.p = 1 + this.pn1;\n  this.rp = 1 / this.p;\n  this.h1 = 1 / this.pn1;\n  this.pfact = (this.p + 1) * this.h1;\n  this.es = 0;\n\n  var omega = this.tilt;\n  var gamma = this.azi;\n  this.cg = Math.cos(gamma);\n  this.sg = Math.sin(gamma);\n  this.cw = Math.cos(omega);\n  this.sw = Math.sin(omega);\n}\n\nexport function forward(p) {\n  p.x -= this.long0;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var coslam = Math.cos(p.x);\n  var x, y;\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y = this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y = cosphi * coslam;\n      break;\n    case mode.S_POLE:\n      y = -sinphi;\n      break;\n    case mode.N_POLE:\n      y = sinphi;\n      break;\n  }\n  y = this.pn1 / (this.p - y);\n  x = y * cosphi * Math.sin(p.x);\n\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y *= this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y *= sinphi;\n      break;\n    case mode.N_POLE:\n      y *= -(cosphi * coslam);\n      break;\n    case mode.S_POLE:\n      y *= cosphi * coslam;\n      break;\n  }\n\n  // Tilt \n  var yt, ba;\n  yt = y * this.cg + x * this.sg;\n  ba = 1 / (yt * this.sw * this.h1 + this.cw);\n  x = (x * this.cg - y * this.sg) * this.cw * ba;\n  y = yt * ba;\n\n  p.x = x * this.a;\n  p.y = y * this.a;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x /= this.a;\n  p.y /= this.a;\n  var r = { x: p.x, y: p.y };\n\n  // Un-Tilt\n  var bm, bq, yt;\n  yt = 1 / (this.pn1 - p.y * this.sw);\n  bm = this.pn1 * p.x * yt;\n  bq = this.pn1 * p.y * this.cw * yt;\n  p.x = bm * this.cg + bq * this.sg;\n  p.y = bq * this.cg - bm * this.sg;\n\n  var rh = hypot(p.x, p.y);\n  if (Math.abs(rh) < EPSLN) {\n    r.x = 0;\n    r.y = p.y;\n  } else {\n    var cosz, sinz;\n    sinz = 1 - rh * rh * this.pfact;\n    sinz = (this.p - Math.sqrt(sinz)) / (this.pn1 / rh + rh / this.pn1);\n    cosz = Math.sqrt(1 - sinz * sinz);\n    switch (this.mode) {\n      case mode.OBLIQ:\n        r.y = Math.asin(cosz * this.sinph0 + p.y * sinz * this.cosph0 / rh);\n        p.y = (cosz - this.sinph0 * Math.sin(r.y)) * rh;\n        p.x *= sinz * this.cosph0;\n        break;\n      case mode.EQUIT:\n        r.y = Math.asin(p.y * sinz / rh);\n        p.y = cosz * rh;\n        p.x *= sinz;\n        break;\n      case mode.N_POLE:\n        r.y = Math.asin(cosz);\n        p.y = -p.y;\n        break;\n      case mode.S_POLE:\n        r.y = -Math.asin(cosz);\n        break;\n    }\n    r.x = Math.atan2(p.x, p.y);\n  }\n\n  p.x = r.x + this.long0;\n  p.y = r.y;\n  return p;\n}\n\nexport var names = [\"Tilted_Perspective\", \"tpers\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nimport geocent from './lib/projections/geocent';\nimport tpers from './lib/projections/tpers';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n  proj4.Proj.projections.add(geocent);\n  proj4.Proj.projections.add(tpers);\n}","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport nadgrid from \"./nadgrid\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.nadgrid = nadgrid;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = '__VERSION__';\nincludedProjections(proj4);\nexport default proj4;\n","var toGeoJSON = (function() {\n    'use strict';\n\n    var removeSpace = (/\\s*/g),\n        trimSpace = (/^\\s*|\\s*$/g),\n        splitSpace = (/\\s+/);\n    // generate a short, numeric hash of a string\n    function okhash(x) {\n        if (!x || !x.length) return 0;\n        for (var i = 0, h = 0; i < x.length; i++) {\n            h = ((h << 5) - h) + x.charCodeAt(i) | 0;\n        } return h;\n    }\n    // all Y children of X\n    function get(x, y) { return x.getElementsByTagName(y); }\n    function attr(x, y) { return x.getAttribute(y); }\n    function attrf(x, y) { return parseFloat(attr(x, y)); }\n    // one Y child of X, if any, otherwise null\n    function get1(x, y) { var n = get(x, y); return n.length ? n[0] : null; }\n    // https://developer.mozilla.org/en-US/docs/Web/API/Node.normalize\n    function norm(el) { if (el.normalize) { el.normalize(); } return el; }\n    // cast array x into numbers\n    function numarray(x) {\n        for (var j = 0, o = []; j < x.length; j++) { o[j] = parseFloat(x[j]); }\n        return o;\n    }\n    function clean(x) {\n        var o = {};\n        for (var i in x) { if (x[i]) { o[i] = x[i]; } }\n        return o;\n    }\n    // get the content of a text node, if any\n    function nodeVal(x) {\n        if (x) { norm(x); }\n        return (x && x.textContent) || '';\n    }\n    // get one coordinate from a coordinate array, if any\n    function coord1(v) { return numarray(v.replace(removeSpace, '').split(',')); }\n    // get all coordinates from a coordinate array as [[],[]]\n    function coord(v) {\n        var coords = v.replace(trimSpace, '').split(splitSpace),\n            o = [];\n        for (var i = 0; i < coords.length; i++) {\n            o.push(coord1(coords[i]));\n        }\n        return o;\n    }\n    function coordPair(x) {\n        var ll = [attrf(x, 'lon'), attrf(x, 'lat')],\n            ele = get1(x, 'ele'),\n            // handle namespaced attribute in browser\n            heartRate = get1(x, 'gpxtpx:hr') || get1(x, 'hr'),\n            time = get1(x, 'time'),\n            e;\n        if (ele) {\n            e = parseFloat(nodeVal(ele));\n            if (!isNaN(e)) {\n                ll.push(e);\n            }\n        }\n        return {\n            coordinates: ll,\n            time: time ? nodeVal(time) : null,\n            heartRate: heartRate ? parseFloat(nodeVal(heartRate)) : null\n        };\n    }\n\n    // create a new feature collection parent object\n    function fc() {\n        return {\n            type: 'FeatureCollection',\n            features: []\n        };\n    }\n\n    var serializer;\n    if (typeof XMLSerializer !== 'undefined') {\n        /* istanbul ignore next */\n        serializer = new XMLSerializer();\n    // only require xmldom in a node environment\n    } else if (typeof exports === 'object' && typeof process === 'object' && !process.browser) {\n        serializer = new (require('xmldom').XMLSerializer)();\n    }\n    function xml2str(str) {\n        // IE9 will create a new XMLSerializer but it'll crash immediately.\n        // This line is ignored because we don't run coverage tests in IE9\n        /* istanbul ignore next */\n        if (str.xml !== undefined) return str.xml;\n        return serializer.serializeToString(str);\n    }\n\n    var t = {\n        kml: function(doc) {\n\n            var gj = fc(),\n                // styleindex keeps track of hashed styles in order to match features\n                styleIndex = {},\n                // atomic geospatial types supported by KML - MultiGeometry is\n                // handled separately\n                geotypes = ['Polygon', 'LineString', 'Point', 'Track', 'gx:Track'],\n                // all root placemarks in the file\n                placemarks = get(doc, 'Placemark'),\n                styles = get(doc, 'Style'),\n                styleMaps = get(doc, 'StyleMap');\n\n            for (var k = 0; k < styles.length; k++) {\n                styleIndex['#' + attr(styles[k], 'id')] = okhash(xml2str(styles[k])).toString(16);\n            }\n            for (var l = 0; l < styleMaps.length; l++) {\n                styleIndex['#' + attr(styleMaps[l], 'id')] = okhash(xml2str(styleMaps[l])).toString(16);\n            }\n            for (var j = 0; j < placemarks.length; j++) {\n                gj.features = gj.features.concat(getPlacemark(placemarks[j]));\n            }\n            function kmlColor(v) {\n                var color, opacity;\n                v = v || '';\n                if (v.substr(0, 1) === '#') { v = v.substr(1); }\n                if (v.length === 6 || v.length === 3) { color = v; }\n                if (v.length === 8) {\n                    opacity = parseInt(v.substr(0, 2), 16) / 255;\n                    color = '#'+v.substr(2);\n                }\n                return [color, isNaN(opacity) ? undefined : opacity];\n            }\n            function gxCoord(v) { return numarray(v.split(' ')); }\n            function gxCoords(root) {\n                var elems = get(root, 'coord', 'gx'), coords = [], times = [];\n                if (elems.length === 0) elems = get(root, 'gx:coord');\n                for (var i = 0; i < elems.length; i++) coords.push(gxCoord(nodeVal(elems[i])));\n                var timeElems = get(root, 'when');\n                for (var j = 0; j < timeElems.length; j++) times.push(nodeVal(timeElems[j]));\n                return {\n                    coords: coords,\n                    times: times\n                };\n            }\n            function getGeometry(root) {\n                var geomNode, geomNodes, i, j, k, geoms = [], coordTimes = [];\n                if (get1(root, 'MultiGeometry')) { return getGeometry(get1(root, 'MultiGeometry')); }\n                if (get1(root, 'MultiTrack')) { return getGeometry(get1(root, 'MultiTrack')); }\n                if (get1(root, 'gx:MultiTrack')) { return getGeometry(get1(root, 'gx:MultiTrack')); }\n                for (i = 0; i < geotypes.length; i++) {\n                    geomNodes = get(root, geotypes[i]);\n                    if (geomNodes) {\n                        for (j = 0; j < geomNodes.length; j++) {\n                            geomNode = geomNodes[j];\n                            if (geotypes[i] === 'Point') {\n                                geoms.push({\n                                    type: 'Point',\n                                    coordinates: coord1(nodeVal(get1(geomNode, 'coordinates')))\n                                });\n                            } else if (geotypes[i] === 'LineString') {\n                                geoms.push({\n                                    type: 'LineString',\n                                    coordinates: coord(nodeVal(get1(geomNode, 'coordinates')))\n                                });\n                            } else if (geotypes[i] === 'Polygon') {\n                                var rings = get(geomNode, 'LinearRing'),\n                                    coords = [];\n                                for (k = 0; k < rings.length; k++) {\n                                    coords.push(coord(nodeVal(get1(rings[k], 'coordinates'))));\n                                }\n                                geoms.push({\n                                    type: 'Polygon',\n                                    coordinates: coords\n                                });\n                            } else if (geotypes[i] === 'Track' ||\n                                geotypes[i] === 'gx:Track') {\n                                var track = gxCoords(geomNode);\n                                geoms.push({\n                                    type: 'LineString',\n                                    coordinates: track.coords\n                                });\n                                if (track.times.length) coordTimes.push(track.times);\n                            }\n                        }\n                    }\n                }\n                return {\n                    geoms: geoms,\n                    coordTimes: coordTimes\n                };\n            }\n            function getPlacemark(root) {\n                var geomsAndTimes = getGeometry(root), i, properties = {},\n                    name = nodeVal(get1(root, 'name')),\n                    styleUrl = nodeVal(get1(root, 'styleUrl')),\n                    description = nodeVal(get1(root, 'description')),\n                    timeSpan = get1(root, 'TimeSpan'),\n                    extendedData = get1(root, 'ExtendedData'),\n                    lineStyle = get1(root, 'LineStyle'),\n                    polyStyle = get1(root, 'PolyStyle');\n\n                if (!geomsAndTimes.geoms.length) return [];\n                if (name) properties.name = name;\n                if (styleUrl[0] !== '#') {\n                    styleUrl = '#' + styleUrl;\n                }\n                if (styleUrl && styleIndex[styleUrl]) {\n                    properties.styleUrl = styleUrl;\n                    properties.styleHash = styleIndex[styleUrl];\n                }\n                if (description) properties.description = description;\n                if (timeSpan) {\n                    var begin = nodeVal(get1(timeSpan, 'begin'));\n                    var end = nodeVal(get1(timeSpan, 'end'));\n                    properties.timespan = { begin: begin, end: end };\n                }\n                if (lineStyle) {\n                    var linestyles = kmlColor(nodeVal(get1(lineStyle, 'color'))),\n                        color = linestyles[0],\n                        opacity = linestyles[1],\n                        width = parseFloat(nodeVal(get1(lineStyle, 'width')));\n                    if (color) properties.stroke = color;\n                    if (!isNaN(opacity)) properties['stroke-opacity'] = opacity;\n                    if (!isNaN(width)) properties['stroke-width'] = width;\n                }\n                if (polyStyle) {\n                    var polystyles = kmlColor(nodeVal(get1(polyStyle, 'color'))),\n                        pcolor = polystyles[0],\n                        popacity = polystyles[1],\n                        fill = nodeVal(get1(polyStyle, 'fill')),\n                        outline = nodeVal(get1(polyStyle, 'outline'));\n                    if (pcolor) properties.fill = pcolor;\n                    if (!isNaN(popacity)) properties['fill-opacity'] = popacity;\n                    if (fill) properties['fill-opacity'] = fill === '1' ? 1 : 0;\n                    if (outline) properties['stroke-opacity'] = outline === '1' ? 1 : 0;\n                }\n                if (extendedData) {\n                    var datas = get(extendedData, 'Data'),\n                        simpleDatas = get(extendedData, 'SimpleData');\n\n                    for (i = 0; i < datas.length; i++) {\n                        properties[datas[i].getAttribute('name')] = nodeVal(get1(datas[i], 'value'));\n                    }\n                    for (i = 0; i < simpleDatas.length; i++) {\n                        properties[simpleDatas[i].getAttribute('name')] = nodeVal(simpleDatas[i]);\n                    }\n                }\n                if (geomsAndTimes.coordTimes.length) {\n                    properties.coordTimes = (geomsAndTimes.coordTimes.length === 1) ?\n                        geomsAndTimes.coordTimes[0] : geomsAndTimes.coordTimes;\n                }\n                var feature = {\n                    type: 'Feature',\n                    geometry: (geomsAndTimes.geoms.length === 1) ? geomsAndTimes.geoms[0] : {\n                        type: 'GeometryCollection',\n                        geometries: geomsAndTimes.geoms\n                    },\n                    properties: properties\n                };\n                if (attr(root, 'id')) feature.id = attr(root, 'id');\n                return [feature];\n            }\n            return gj;\n        },\n        gpx: function(doc) {\n            var i,\n                tracks = get(doc, 'trk'),\n                routes = get(doc, 'rte'),\n                waypoints = get(doc, 'wpt'),\n                // a feature collection\n                gj = fc(),\n                feature;\n            for (i = 0; i < tracks.length; i++) {\n                feature = getTrack(tracks[i]);\n                if (feature) gj.features.push(feature);\n            }\n            for (i = 0; i < routes.length; i++) {\n                feature = getRoute(routes[i]);\n                if (feature) gj.features.push(feature);\n            }\n            for (i = 0; i < waypoints.length; i++) {\n                gj.features.push(getPoint(waypoints[i]));\n            }\n            function getPoints(node, pointname) {\n                var pts = get(node, pointname),\n                    line = [],\n                    times = [],\n                    heartRates = [],\n                    l = pts.length;\n                if (l < 2) return {};  // Invalid line in GeoJSON\n                for (var i = 0; i < l; i++) {\n                    var c = coordPair(pts[i]);\n                    line.push(c.coordinates);\n                    if (c.time) times.push(c.time);\n                    if (c.heartRate) heartRates.push(c.heartRate);\n                }\n                return {\n                    line: line,\n                    times: times,\n                    heartRates: heartRates\n                };\n            }\n            function getTrack(node) {\n                var segments = get(node, 'trkseg'),\n                    track = [],\n                    times = [],\n                    heartRates = [],\n                    line;\n                for (var i = 0; i < segments.length; i++) {\n                    line = getPoints(segments[i], 'trkpt');\n                    if (line.line) track.push(line.line);\n                    if (line.times && line.times.length) times.push(line.times);\n                    if (line.heartRates && line.heartRates.length) heartRates.push(line.heartRates);\n                }\n                if (track.length === 0) return;\n                var properties = getProperties(node);\n                if (times.length) properties.coordTimes = track.length === 1 ? times[0] : times;\n                if (heartRates.length) properties.heartRates = track.length === 1 ? heartRates[0] : heartRates;\n                return {\n                    type: 'Feature',\n                    properties: properties,\n                    geometry: {\n                        type: track.length === 1 ? 'LineString' : 'MultiLineString',\n                        coordinates: track.length === 1 ? track[0] : track\n                    }\n                };\n            }\n            function getRoute(node) {\n                var line = getPoints(node, 'rtept');\n                if (!line.line) return;\n                var routeObj = {\n                    type: 'Feature',\n                    properties: getProperties(node),\n                    geometry: {\n                        type: 'LineString',\n                        coordinates: line.line\n                    }\n                };\n                return routeObj;\n            }\n            function getPoint(node) {\n                var prop = getProperties(node);\n                prop.sym = nodeVal(get1(node, 'sym'));\n                return {\n                    type: 'Feature',\n                    properties: prop,\n                    geometry: {\n                        type: 'Point',\n                        coordinates: coordPair(node).coordinates\n                    }\n                };\n            }\n            function getProperties(node) {\n                var meta = ['name', 'desc', 'author', 'copyright', 'link',\n                            'time', 'keywords'],\n                    prop = {},\n                    k;\n                for (k = 0; k < meta.length; k++) {\n                    prop[meta[k]] = nodeVal(get1(node, meta[k]));\n                }\n                return clean(prop);\n            }\n            return gj;\n        }\n    };\n    return t;\n})();\n\nif (typeof module !== 'undefined') module.exports = toGeoJSON;\n","var xhr = require('corslite'),\n    csv2geojson = require('csv2geojson'),\n    wellknown = require('wellknown'),\n    polyline = require('polyline'),\n    topojson = require('topojson'),\n    toGeoJSON = require('togeojson');\n\nmodule.exports.polyline = polylineLoad;\nmodule.exports.polyline.parse = polylineParse;\n\nmodule.exports.geojson = geojsonLoad;\n\nmodule.exports.topojson = topojsonLoad;\nmodule.exports.topojson.parse = topojsonParse;\n\nmodule.exports.csv = csvLoad;\nmodule.exports.csv.parse = csvParse;\n\nmodule.exports.gpx = gpxLoad;\nmodule.exports.gpx.parse = gpxParse;\n\nmodule.exports.kml = kmlLoad;\nmodule.exports.kml.parse = kmlParse;\n\nmodule.exports.wkt = wktLoad;\nmodule.exports.wkt.parse = wktParse;\n\nfunction addData(l, d) {\n    if ('setGeoJSON' in l) {\n        l.setGeoJSON(d);\n    } else if ('addData' in l) {\n        l.addData(d);\n    }\n}\n\n/**\n * Load a [GeoJSON](http://geojson.org/) document into a layer and return the layer.\n *\n * @param {string} url\n * @param {object} options\n * @param {object} customLayer\n * @returns {object}\n */\nfunction geojsonLoad(url, options, customLayer) {\n    var layer = customLayer || L.geoJson();\n    xhr(url, function(err, response) {\n        if (err) return layer.fire('error', { error: err });\n        addData(layer, JSON.parse(response.responseText));\n        layer.fire('ready');\n    });\n    return layer;\n}\n\n/**\n * Load a [TopoJSON](https://github.com/mbostock/topojson) document into a layer and return the layer.\n *\n * @param {string} url\n * @param {object} options\n * @param {object} customLayer\n * @returns {object}\n */\nfunction topojsonLoad(url, options, customLayer) {\n    var layer = customLayer || L.geoJson();\n    xhr(url, onload);\n    function onload(err, response) {\n        if (err) return layer.fire('error', { error: err });\n        topojsonParse(response.responseText, options, layer);\n        layer.fire('ready');\n    }\n    return layer;\n}\n\n/**\n * Load a CSV document into a layer and return the layer.\n *\n * @param {string} url\n * @param {object} options\n * @param {object} customLayer\n * @returns {object}\n */\nfunction csvLoad(url, options, customLayer) {\n    var layer = customLayer || L.geoJson();\n    xhr(url, onload);\n    function onload(err, response) {\n        var error;\n        if (err) return layer.fire('error', { error: err });\n        function avoidReady() {\n            error = true;\n        }\n        layer.on('error', avoidReady);\n        csvParse(response.responseText, options, layer);\n        layer.off('error', avoidReady);\n        if (!error) layer.fire('ready');\n    }\n    return layer;\n}\n\n/**\n * Load a GPX document into a layer and return the layer.\n *\n * @param {string} url\n * @param {object} options\n * @param {object} customLayer\n * @returns {object}\n */\nfunction gpxLoad(url, options, customLayer) {\n    var layer = customLayer || L.geoJson();\n    xhr(url, onload);\n    function onload(err, response) {\n        var error;\n        if (err) return layer.fire('error', { error: err });\n        function avoidReady() {\n            error = true;\n        }\n        layer.on('error', avoidReady);\n        gpxParse(response.responseXML || response.responseText, options, layer);\n        layer.off('error', avoidReady);\n        if (!error) layer.fire('ready');\n    }\n    return layer;\n}\n\n/**\n * Load a [KML](https://developers.google.com/kml/documentation/) document into a layer and return the layer.\n *\n * @param {string} url\n * @param {object} options\n * @param {object} customLayer\n * @returns {object}\n */\nfunction kmlLoad(url, options, customLayer) {\n    var layer = customLayer || L.geoJson();\n    xhr(url, onload);\n    function onload(err, response) {\n        var error;\n        if (err) return layer.fire('error', { error: err });\n        function avoidReady() {\n            error = true;\n        }\n        layer.on('error', avoidReady);\n        kmlParse(response.responseXML || response.responseText, options, layer);\n        layer.off('error', avoidReady);\n        if (!error) layer.fire('ready');\n    }\n    return layer;\n}\n\n/**\n * Load a WKT (Well Known Text) string into a layer and return the layer\n *\n * @param {string} url\n * @param {object} options\n * @param {object} customLayer\n * @returns {object}\n */\nfunction wktLoad(url, options, customLayer) {\n    var layer = customLayer || L.geoJson();\n    xhr(url, onload);\n    function onload(err, response) {\n        if (err) return layer.fire('error', { error: err });\n        wktParse(response.responseText, options, layer);\n        layer.fire('ready');\n    }\n    return layer;\n}\n\n/**\n * Load a polyline string into a layer and return the layer\n *\n * @param {string} url\n * @param {object} options\n * @param {object} customLayer\n * @returns {object}\n */\nfunction polylineLoad(url, options, customLayer) {\n    var layer = customLayer || L.geoJson();\n    xhr(url, onload);\n    function onload(err, response) {\n        if (err) return layer.fire('error', { error: err });\n        polylineParse(response.responseText, options, layer);\n        layer.fire('ready');\n    }\n    return layer;\n}\n\nfunction topojsonParse(data, options, layer) {\n    var o = typeof data === 'string' ?\n        JSON.parse(data) : data;\n    layer = layer || L.geoJson();\n    for (var i in o.objects) {\n        var ft = topojson.feature(o, o.objects[i]);\n        if (ft.features) addData(layer, ft.features);\n        else addData(layer, ft);\n    }\n    return layer;\n}\n\nfunction csvParse(csv, options, layer) {\n    layer = layer || L.geoJson();\n    options = options || {};\n    csv2geojson.csv2geojson(csv, options, onparse);\n    function onparse(err, geojson) {\n        if (err) return layer.fire('error', { error: err });\n        addData(layer, geojson);\n    }\n    return layer;\n}\n\nfunction gpxParse(gpx, options, layer) {\n    var xml = parseXML(gpx);\n    if (!xml) return layer.fire('error', {\n        error: 'Could not parse GPX'\n    });\n    layer = layer || L.geoJson();\n    var geojson = toGeoJSON.gpx(xml);\n    addData(layer, geojson);\n    return layer;\n}\n\n\nfunction kmlParse(gpx, options, layer) {\n    var xml = parseXML(gpx);\n    if (!xml) return layer.fire('error', {\n        error: 'Could not parse KML'\n    });\n    layer = layer || L.geoJson();\n    var geojson = toGeoJSON.kml(xml);\n    addData(layer, geojson);\n    return layer;\n}\n\nfunction polylineParse(txt, options, layer) {\n    layer = layer || L.geoJson();\n    options = options || {};\n    var coords = polyline.decode(txt, options.precision);\n    var geojson = { type: 'LineString', coordinates: [] };\n    for (var i = 0; i < coords.length; i++) {\n        // polyline returns coords in lat, lng order, so flip for geojson\n        geojson.coordinates[i] = [coords[i][1], coords[i][0]];\n    }\n    addData(layer, geojson);\n    return layer;\n}\n\nfunction wktParse(wkt, options, layer) {\n    layer = layer || L.geoJson();\n    var geojson = wellknown(wkt);\n    addData(layer, geojson);\n    return layer;\n}\n\nfunction parseXML(str) {\n    if (typeof str === 'string') {\n        return (new DOMParser()).parseFromString(str, 'text/xml');\n    } else {\n        return str;\n    }\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\r\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\r\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\r\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\r\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\r\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\r\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\r\n\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\nvar S_TAG = 0;//tag name offerring\r\nvar S_ATTR = 1;//attr name offerring \r\nvar S_ATTR_SPACE=2;//attr name end and space offer\r\nvar S_EQ = 3;//=space?\r\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\r\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\r\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\r\nvar S_TAG_CLOSE = 7;//closed el<el />\r\n\r\nfunction XMLReader(){\r\n\t\r\n}\r\n\r\nXMLReader.prototype = {\r\n\tparse:function(source,defaultNSMap,entityMap){\r\n\t\tvar domBuilder = this.domBuilder;\r\n\t\tdomBuilder.startDocument();\r\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\r\n\t\tparse(source,defaultNSMap,entityMap,\r\n\t\t\t\tdomBuilder,this.errorHandler);\r\n\t\tdomBuilder.endDocument();\r\n\t}\r\n}\r\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\r\n\tfunction fixedFromCharCode(code) {\r\n\t\t// String.prototype.fromCharCode does not supports\r\n\t\t// > 2 bytes unicode chars directly\r\n\t\tif (code > 0xffff) {\r\n\t\t\tcode -= 0x10000;\r\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\r\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\r\n\r\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\r\n\t\t} else {\r\n\t\t\treturn String.fromCharCode(code);\r\n\t\t}\r\n\t}\r\n\tfunction entityReplacer(a){\r\n\t\tvar k = a.slice(1,-1);\r\n\t\tif(k in entityMap){\r\n\t\t\treturn entityMap[k]; \r\n\t\t}else if(k.charAt(0) === '#'){\r\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\r\n\t\t}else{\r\n\t\t\terrorHandler.error('entity not found:'+a);\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tfunction appendText(end){//has some bugs\r\n\t\tif(end>start){\r\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\tlocator&&position(start);\r\n\t\t\tdomBuilder.characters(xt,0,end-start);\r\n\t\t\tstart = end\r\n\t\t}\r\n\t}\r\n\tfunction position(p,m){\r\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\r\n\t\t\tlineStart = m.index;\r\n\t\t\tlineEnd = lineStart + m[0].length;\r\n\t\t\tlocator.lineNumber++;\r\n\t\t\t//console.log('line++:',locator,startPos,endPos)\r\n\t\t}\r\n\t\tlocator.columnNumber = p-lineStart+1;\r\n\t}\r\n\tvar lineStart = 0;\r\n\tvar lineEnd = 0;\r\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\r\n\tvar locator = domBuilder.locator;\r\n\t\r\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\r\n\tvar closeMap = {};\r\n\tvar start = 0;\r\n\twhile(true){\r\n\t\ttry{\r\n\t\t\tvar tagStart = source.indexOf('<',start);\r\n\t\t\tif(tagStart<0){\r\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\r\n\t\t\t\t\tvar doc = domBuilder.doc;\r\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\r\n\t    \t\t\tdoc.appendChild(text);\r\n\t    \t\t\tdomBuilder.currentElement = text;\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(tagStart>start){\r\n\t\t\t\tappendText(tagStart);\r\n\t\t\t}\r\n\t\t\tswitch(source.charAt(tagStart+1)){\r\n\t\t\tcase '/':\r\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\r\n\t\t\t\tvar tagName = source.substring(tagStart+2,end);\r\n\t\t\t\tvar config = parseStack.pop();\r\n\t\t\t\tif(end<0){\r\n\t\t\t\t\t\r\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\r\n\t        \t\t//console.error('#@@@@@@'+tagName)\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t        \t}else if(tagName.match(/\\s</)){\r\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t\t\t\t}\r\n\t\t\t\t//console.error(parseStack.length,parseStack)\r\n\t\t\t\t//console.error(config);\r\n\t\t\t\tvar localNSMap = config.localNSMap;\r\n\t\t\t\tvar endMatch = config.tagName == tagName;\r\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\r\n\t\t        if(endIgnoreCaseMach){\r\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\r\n\t\t\t\t\tif(localNSMap){\r\n\t\t\t\t\t\tfor(var prefix in localNSMap){\r\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!endMatch){\r\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName );\r\n\t\t\t\t\t}\r\n\t\t        }else{\r\n\t\t        \tparseStack.push(config)\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t\tend++;\r\n\t\t\t\tbreak;\r\n\t\t\t\t// end elment\r\n\t\t\tcase '?':// <?...?>\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tvar el = new ElementAttributes();\r\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\t\t\t\t//elStartEnd\r\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\r\n\t\t\t\tvar len = el.length;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\r\n\t\t\t\t\tel.closed = true;\r\n\t\t\t\t\tif(!entityMap.nbsp){\r\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(locator && len){\r\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\r\n\t\t\t\t\t//try{//attribute position fixed\r\n\t\t\t\t\tfor(var i = 0;i<len;i++){\r\n\t\t\t\t\t\tvar a = el[i];\r\n\t\t\t\t\t\tposition(a.offset);\r\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//}catch(e){console.error('@@@@@'+e)}\r\n\t\t\t\t\tdomBuilder.locator = locator2\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdomBuilder.locator = locator;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){\r\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tend++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\terrorHandler.error('element parse error: '+e)\r\n\t\t\t//errorHandler.error('element parse error: '+e);\r\n\t\t\tend = -1;\r\n\t\t\t//throw e;\r\n\t\t}\r\n\t\tif(end>start){\r\n\t\t\tstart = end;\r\n\t\t}else{\r\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\r\n\t\t\tappendText(Math.max(tagStart,start)+1);\r\n\t\t}\r\n\t}\r\n}\r\nfunction copyLocator(f,t){\r\n\tt.lineNumber = f.lineNumber;\r\n\tt.columnNumber = f.columnNumber;\r\n\treturn t;\r\n}\r\n\r\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\r\n\tvar attrName;\r\n\tvar value;\r\n\tvar p = ++start;\r\n\tvar s = S_TAG;//status\r\n\twhile(true){\r\n\t\tvar c = source.charAt(p);\r\n\t\tswitch(c){\r\n\t\tcase '=':\r\n\t\t\tif(s === S_ATTR){//attrName\r\n\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else if(s === S_ATTR_SPACE){\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\r\n\t\t\t\tthrow new Error('attribute equal must after attrName');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '\\'':\r\n\t\tcase '\"':\r\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\r\n\t\t\t\t){//equal\r\n\t\t\t\tif(s === S_ATTR){\r\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t}\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\tp = source.indexOf(c,start)\r\n\t\t\t\tif(p>0){\r\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\tel.add(attrName,value,start-1);\r\n\t\t\t\t\ts = S_ATTR_END;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//fatalError: no end quot match\r\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\r\n\t\t\t\t}\r\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t//console.log(attrName,value,start,p)\r\n\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\t//console.dir(el)\r\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\ts = S_ATTR_END\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: no equal before\r\n\t\t\t\tthrow new Error('attribute value must after \"=\"');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '/':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\ts =S_TAG_CLOSE;\r\n\t\t\t\tel.closed = true;\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\tcase S_ATTR:\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tbreak;\r\n\t\t\t//case S_EQ:\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\")\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ''://end document\r\n\t\t\t//throw new Error('unexpected end of input')\r\n\t\t\terrorHandler.error('unexpected end of input');\r\n\t\t\tif(s == S_TAG){\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\tcase '>':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\tbreak;//normal\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\r\n\t\t\tcase S_ATTR:\r\n\t\t\t\tvalue = source.slice(start,p);\r\n\t\t\t\tif(value.slice(-1) === '/'){\r\n\t\t\t\t\tel.closed  = true;\r\n\t\t\t\t\tvalue = value.slice(0,-1)\r\n\t\t\t\t}\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tif(s === S_ATTR_SPACE){\r\n\t\t\t\t\tvalue = attrName;\r\n\t\t\t\t}\r\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value.replace(/&#?\\w+;/g,entityReplacer),start)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(value,value,start)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase S_EQ:\r\n\t\t\t\tthrow new Error('attribute value missed!!');\r\n\t\t\t}\r\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\r\n\t\t\treturn p;\r\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\r\n\t\tcase '\\u0080':\r\n\t\t\tc = ' ';\r\n\t\tdefault:\r\n\t\t\tif(c<= ' '){//space\r\n\t\t\t\tswitch(s){\r\n\t\t\t\tcase S_TAG:\r\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR:\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t\ts = S_ATTR_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value,start)\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//case S_TAG_SPACE:\r\n\t\t\t\t//case S_EQ:\r\n\t\t\t\t//case S_ATTR_SPACE:\r\n\t\t\t\t//\tvoid();break;\r\n\t\t\t\t//case S_TAG_CLOSE:\r\n\t\t\t\t\t//ignore warning\r\n\t\t\t\t}\r\n\t\t\t}else{//not space\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\n\t\t\t\tswitch(s){\r\n\t\t\t\t//case S_TAG:void();break;\r\n\t\t\t\t//case S_ATTR:void();break;\r\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\r\n\t\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\t\tvar tagName =  el.tagName;\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(attrName,attrName,start);\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\r\n\t\t\t\tcase S_TAG_SPACE:\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_EQ:\r\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}//end outer switch\r\n\t\t//console.log('p++',p)\r\n\t\tp++;\r\n\t}\r\n}\r\n/**\r\n * @return true if has new namespace define\r\n */\r\nfunction appendElement(el,domBuilder,currentNSMap){\r\n\tvar tagName = el.tagName;\r\n\tvar localNSMap = null;\r\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\tvar a = el[i];\r\n\t\tvar qName = a.qName;\r\n\t\tvar value = a.value;\r\n\t\tvar nsp = qName.indexOf(':');\r\n\t\tif(nsp>0){\r\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\r\n\t\t\tvar localName = qName.slice(nsp+1);\r\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\r\n\t\t}else{\r\n\t\t\tlocalName = qName;\r\n\t\t\tprefix = null\r\n\t\t\tnsPrefix = qName === 'xmlns' && ''\r\n\t\t}\r\n\t\t//can not set prefix,because prefix !== ''\r\n\t\ta.localName = localName ;\r\n\t\t//prefix == null for no ns prefix attribute \r\n\t\tif(nsPrefix !== false){//hack!!\r\n\t\t\tif(localNSMap == null){\r\n\t\t\t\tlocalNSMap = {}\r\n\t\t\t\t//console.log(currentNSMap,0)\r\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\r\n\t\t\t\t//console.log(currentNSMap,1)\r\n\t\t\t}\r\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\r\n\t\t\ta.uri = 'http://www.w3.org/2000/xmlns/'\r\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value) \r\n\t\t}\r\n\t}\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\ta = el[i];\r\n\t\tvar prefix = a.prefix;\r\n\t\tif(prefix){//no prefix attribute has no namespace\r\n\t\t\tif(prefix === 'xml'){\r\n\t\t\t\ta.uri = 'http://www.w3.org/XML/1998/namespace';\r\n\t\t\t}if(prefix !== 'xmlns'){\r\n\t\t\t\ta.uri = currentNSMap[prefix || '']\r\n\t\t\t\t\r\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar nsp = tagName.indexOf(':');\r\n\tif(nsp>0){\r\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\r\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\r\n\t}else{\r\n\t\tprefix = null;//important!!\r\n\t\tlocalName = el.localName = tagName;\r\n\t}\r\n\t//no prefix element has default namespace\r\n\tvar ns = el.uri = currentNSMap[prefix || ''];\r\n\tdomBuilder.startElement(ns,localName,tagName,el);\r\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\r\n\t//localNSMap = null\r\n\tif(el.closed){\r\n\t\tdomBuilder.endElement(ns,localName,tagName);\r\n\t\tif(localNSMap){\r\n\t\t\tfor(prefix in localNSMap){\r\n\t\t\t\tdomBuilder.endPrefixMapping(prefix) \r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tel.currentNSMap = currentNSMap;\r\n\t\tel.localNSMap = localNSMap;\r\n\t\t//parseStack.push(el);\r\n\t\treturn true;\r\n\t}\r\n}\r\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\r\n\tif(/^(?:script|textarea)$/i.test(tagName)){\r\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\r\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\r\n\t\tif(/[&<]/.test(text)){\r\n\t\t\tif(/^script$/i.test(tagName)){\r\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\r\n\t\t\t\t\t//lexHandler.startCDATA();\r\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\t\t//lexHandler.endCDATA();\r\n\t\t\t\t\treturn elEndStart;\r\n\t\t\t\t//}\r\n\t\t\t}//}else{//text area\r\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\treturn elEndStart;\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn elStartEnd+1;\r\n}\r\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\r\n\t//if(tagName in closeMap){\r\n\tvar pos = closeMap[tagName];\r\n\tif(pos == null){\r\n\t\t//console.log(tagName)\r\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\r\n\t\tif(pos<elStartEnd){//忘记闭合\r\n\t\t\tpos = source.lastIndexOf('</'+tagName)\r\n\t\t}\r\n\t\tcloseMap[tagName] =pos\r\n\t}\r\n\treturn pos<elStartEnd;\r\n\t//} \r\n}\r\nfunction _copy(source,target){\r\n\tfor(var n in source){target[n] = source[n]}\r\n}\r\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\r\n\tvar next= source.charAt(start+2)\r\n\tswitch(next){\r\n\tcase '-':\r\n\t\tif(source.charAt(start + 3) === '-'){\r\n\t\t\tvar end = source.indexOf('-->',start+4);\r\n\t\t\t//append comment source.substring(4,end)//<!--\r\n\t\t\tif(end>start){\r\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\r\n\t\t\t\treturn end+3;\r\n\t\t\t}else{\r\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\tdefault:\r\n\t\tif(source.substr(start+3,6) == 'CDATA['){\r\n\t\t\tvar end = source.indexOf(']]>',start+9);\r\n\t\t\tdomBuilder.startCDATA();\r\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\r\n\t\t\tdomBuilder.endCDATA() \r\n\t\t\treturn end+3;\r\n\t\t}\r\n\t\t//<!DOCTYPE\r\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \r\n\t\tvar matchs = split(source,start);\r\n\t\tvar len = matchs.length;\r\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\r\n\t\t\tvar name = matchs[1][0];\r\n\t\t\tvar pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]\r\n\t\t\tvar sysid = len>4 && matchs[4][0];\r\n\t\t\tvar lastMatch = matchs[len-1]\r\n\t\t\tdomBuilder.startDTD(name,pubid && pubid.replace(/^(['\"])(.*?)\\1$/,'$2'),\r\n\t\t\t\t\tsysid && sysid.replace(/^(['\"])(.*?)\\1$/,'$2'));\r\n\t\t\tdomBuilder.endDTD();\r\n\t\t\t\r\n\t\t\treturn lastMatch.index+lastMatch[0].length\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\n\r\nfunction parseInstruction(source,start,domBuilder){\r\n\tvar end = source.indexOf('?>',start);\r\n\tif(end){\r\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\r\n\t\tif(match){\r\n\t\t\tvar len = match[0].length;\r\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\r\n\t\t\treturn end+2;\r\n\t\t}else{//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * @param source\r\n */\r\nfunction ElementAttributes(source){\r\n\t\r\n}\r\nElementAttributes.prototype = {\r\n\tsetTagName:function(tagName){\r\n\t\tif(!tagNamePattern.test(tagName)){\r\n\t\t\tthrow new Error('invalid tagName:'+tagName)\r\n\t\t}\r\n\t\tthis.tagName = tagName\r\n\t},\r\n\tadd:function(qName,value,offset){\r\n\t\tif(!tagNamePattern.test(qName)){\r\n\t\t\tthrow new Error('invalid attribute:'+qName)\r\n\t\t}\r\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\r\n\t},\r\n\tlength:0,\r\n\tgetLocalName:function(i){return this[i].localName},\r\n\tgetLocator:function(i){return this[i].locator},\r\n\tgetQName:function(i){return this[i].qName},\r\n\tgetURI:function(i){return this[i].uri},\r\n\tgetValue:function(i){return this[i].value}\r\n//\t,getIndex:function(uri, localName)){\r\n//\t\tif(localName){\r\n//\t\t\t\r\n//\t\t}else{\r\n//\t\t\tvar qName = uri\r\n//\t\t}\r\n//\t},\r\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\r\n//\tgetType:function(uri,localName){}\r\n//\tgetType:function(i){},\r\n}\r\n\r\n\r\n\r\n\r\nfunction _set_proto_(thiz,parent){\r\n\tthiz.__proto__ = parent;\r\n\treturn thiz;\r\n}\r\nif(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){\r\n\t_set_proto_ = function(thiz,parent){\r\n\t\tfunction p(){};\r\n\t\tp.prototype = parent;\r\n\t\tp = new p();\r\n\t\tfor(parent in thiz){\r\n\t\t\tp[parent] = thiz[parent];\r\n\t\t}\r\n\t\treturn p;\r\n\t}\r\n}\r\n\r\nfunction split(source,start){\r\n\tvar match;\r\n\tvar buf = [];\r\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\r\n\treg.lastIndex = start;\r\n\treg.exec(source);//skip <\r\n\twhile(match = reg.exec(source)){\r\n\t\tbuf.push(match);\r\n\t\tif(match[1])return buf;\r\n\t}\r\n}\r\n\r\nexports.XMLReader = XMLReader;\r\n\r\n","/**\n * @private\n * @description\n * formalisme d'un tag ID :\n * -> NAME(_ORDER)-1460636385836\n *\n * @example\n * Ex.\n *   GProutePoints-1460636385836\n *   GProutePoint_10-1460636385836\n */\nvar SelectorID = {\n\n    /**\n     * Construction d'un identifiant statique basé sur le timestamp,\n     * et qui s'incremente de +1 à chaque appel\n     */\n    generate : (function () {\n        var timestamp = Math.floor(Date.now());\n        return function () {\n            return timestamp++;\n        };\n    })(),\n\n    /**\n     * nom du tag\n     * @param {String} id - the id\n     *\n     * @returns {String} index\n     */\n    name : function (id) {\n        var name = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i === -1) {\n            name = id;\n        } else {\n            name = id.substring(0, i);\n        }\n\n        return name;\n    },\n\n    /**\n     * numero d'identifiant du tag\n     * @param {String} id - the id\n     *\n     * @returns {String} index\n     */\n    index : function (id) {\n        var index = null;\n\n        var name = this.name(id);\n        // if (name !== id) {\n        var i = name.lastIndexOf(\"_\");\n        if (i !== -1) {\n            index = name.substring(i + 1);\n        }\n        // }\n\n        return index;\n    },\n\n    /**\n     * uuid du tag\n     * @param {String} id - the id\n     *\n     * @returns {String} uuid\n     */\n    uuid : function (id) {\n        var uuid = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i !== -1) {\n            uuid = parseInt(id.substring(i + 1), 10);\n        }\n\n        return uuid;\n    }\n\n};\n\nexport default SelectorID;\n","import Sortable from \"sortablejs\";\n\nvar LayerSwitcherDOM = {\n\n    /**\n     * Creation du drag and drop\n     *\n     * @param {Object} elementDraggable - Element HTML (DOM) Container\n     * @param {Object} context - this\n     */\n    _createDraggableElement : function (elementDraggable, context) {\n        // FIXME retirer cette détection user-agent pour solution propre\n        // option forcefallback pour réparer sortable sous Chrome 97\n        // option forcefallback casse le layerswitcher du portail sous firefox\n        if (navigator.userAgent.match(/chrome|chromium|crios/i)) {\n            Sortable.create(elementDraggable, {\n                handle : \".GPlayerName\",\n                draggable : \".draggable-layer\",\n                ghostClass : \"GPghostLayer\",\n                animation : 200,\n                forceFallback : true,\n                // Call event function on drag and drop\n                onEnd : function (e) {\n                    // FIXME pas terrrible, mais il faut bien passer ce contexte...\n                    context._onDragAndDropLayerClick(e);\n                }\n            });\n        } else {\n            Sortable.create(elementDraggable, {\n                handle : \".GPlayerName\",\n                draggable : \".draggable-layer\",\n                ghostClass : \"GPghostLayer\",\n                animation : 200,\n                // Call event function on drag and drop\n                onEnd : function (e) {\n                    // FIXME pas terrrible, mais il faut bien passer ce contexte...\n                    context._onDragAndDropLayerClick(e);\n                }\n            });\n        }\n    },\n\n    // ################################################################### //\n    // ######################### Main container ########################## //\n    // ################################################################### //\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Creation du container principal (DOM)\n     *\n     * @returns {DOMElement} container - layer switcher DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPlayerSwitcher\");\n        container.className = \"GPwidget\";\n        return container;\n    },\n\n    /**\n     * Creation du container principal d\"affichage des layers (DOM)\n     *\n     * @returns {DOMElement} input - element for minimizing/maximizing the layer switcher\n     */\n    _createMainLayersShowElement : function () {\n        // <!-- Hidden checkbox for minimizing/maximizing -->\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowLayersList\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Creation du container principal des layers (DOM)\n     *\n     * @returns {DOMElement} container - layers list container\n     */\n    _createMainLayersElement : function () {\n        // ajout de la liste des layers dans le container principal\n        // <div id=\"GPlayersList\" class=\"GPpanel\">\n        //   (...)\n        // </div>\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPlayersList\");\n        div.className = \"GPpanel\";\n        return div;\n    },\n\n    /**\n     * Creation du container du picto du controle (DOM)\n     *\n     * @returns {DOMElement} label\n     */\n    _createMainPictoElement : function () {\n        var self = this;\n\n        // exemple :\n        // <!-- Label for minimizing/maximizing -->\n        // <label id=\"GPshowLayersListPicto\" class=\"GPshowAdvancedToolPicto\" for=\"GPshowLayersList\" title=\"Afficher/masquer le gestionnaire de couches\">\n        //    <span id=\"GPshowLayersListOpen\" class=\"GPshowAdvancedToolOpen\"></span><span id=\"GPshowLayersListClose\"></span>\n        // </label>\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowLayersListPicto\");\n        label.className = \"GPshowAdvancedToolPicto\";\n        label.htmlFor = this._addUID(\"GPshowLayersList\");\n        label.title = \"Afficher/masquer le gestionnaire de couches\";\n\n        var spanOpen = document.createElement(\"span\");\n        spanOpen.id = this._addUID(\"GPshowLayersListOpen\");\n        spanOpen.className = \"GPshowAdvancedToolOpen\";\n        spanOpen.addEventListener(\"click\", function () {\n            if (document.getElementById(self._addUID(\"GPshowLayersList\")).checked) {\n                var layers = document.getElementsByClassName(\"GPlayerInfoOpened\");\n                for (var i = 0; i < layers.length; i++) {\n                    layers[i].className = \"GPlayerInfo\";\n                }\n                document.getElementById(self._addUID(\"GPlayerInfoPanel\")).className = \"GPlayerInfoPanelClosed\";\n            }\n        });\n\n        label.appendChild(spanOpen);\n\n        var spanClose = document.createElement(\"span\");\n        spanClose.addEventListener(\"click\", function () {\n            if (document.getElementById(self._addUID(\"GPshowLayersList\")).checked) {\n                var layers = document.getElementsByClassName(\"GPlayerInfoOpened\");\n                for (var i = 0; i < layers.length; i++) {\n                    layers[i].className = \"GPlayerInfo\";\n                }\n                document.getElementById(self._addUID(\"GPlayerInfoPanel\")).className = \"GPlayerInfoPanelClosed\";\n            }\n        });\n        spanClose.id = self._addUID(\"GPshowLayersListClose\");\n\n        label.appendChild(spanClose);\n\n        return label;\n    },\n\n    /**\n     * Creation du container du panneau d\"information (DOM)\n     *\n     * @returns {DOMElement} container\n     */\n    _createMainInfoElement : function () {\n        // gestion du panneau d\"information dans le container principal\n        // <div id=\"GPlayerInfoPanel\" class=\"GPlayerInfoPanelClosed\">...</div>\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPlayerInfoPanel\");\n        div.className = \"GPpanel GPlayerInfoPanelClosed\";\n        return div;\n    },\n\n    // ################################################################### //\n    // ######################### Layer container ######################### //\n    // ################################################################### //\n\n    /**\n     * Creation du container du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     * @param {Object} obj.layer - couche (ol ou leaflet)\n     * @param {String} obj.id - identifiant de la couche (pour ol ou leaflet)\n     * @param {String} obj.title - nom de la couche à afficher dans le controle\n     * @param {String} obj.description - description de la couche à afficher\n     * @param {Boolean} obj.visibility - visibilité de la couche dans la carte (true or false)\n     * @param {Float} obj.opacity - opacité de la couche\n     *\n     * @returns {DOMElement} container\n     */\n    _createContainerLayerElement : function (obj) {\n        // exemple :\n        // <div id=\"GPlayerSwitcher_ID_Layer1\" class=\"GPlayerSwitcher_layer outOfRange\">\n        //     <!-- Basic toolbar : visibility / layer name\n        //     _createBasicToolElement\n        //           _createBasicToolVisibilityElement\n        //           _createBasicToolNameElement\n        //     -->\n        //     <!-- Hidden checkbox + label for showing advanced toolbar\n        //     _createAdvancedToolShowElement\n        //     -->\n        //     <!-- Advanced toolbar : layer info / opacity slider / opacity value / removal\n        //     _createAdvancedToolElement\n        //           _createAdvancedToolDeleteElement\n        //           _createAdvancedToolInformationElement\n        //           _createAdvancedToolOpacityElement\n        //     -->\n        // </div>\n\n        // <!-- Layer entry in layer list -->\n        // <!-- Every item is marked with layerID, which is defined at layer import -->\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPlayerSwitcher_ID_\" + obj.id);\n        container.className = \"GPlayerSwitcher_layer draggable-layer\";\n\n        // ajout des outils basiques (visibility / layer name)\n        container.appendChild(this._createBasicToolElement(obj));\n\n        // liste des outils avancés (layer info / opacity slider / opacity value / removal)\n        var array = this._createAdvancedToolShowElement(obj);\n        for (var i = 0; i < array.length; i++) {\n            container.appendChild(array[i]);\n        }\n\n        // ajout des outils avancés\n        container.appendChild(this._createAdvancedToolElement(obj));\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ############################ Layer tool ########################### //\n    // ################################################################### //\n\n    /**\n     * Creation du container des outils basiques du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createBasicToolElement : function (obj) {\n        // exemple :\n        // <div id=\"GPbasicTools_ID_1\" class=\"GPlayerBasicTools\">\n        //      <!-- _createBasicToolVisibilityElement -->\n        //      <!-- _createBasicToolNameElement -->\n        // </div>\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPbasicTools_ID_\" + obj.id);\n        div.className = \"GPlayerBasicTools\";\n\n        div.appendChild(this._createBasicToolNameElement(obj));\n\n        var array = this._createBasicToolVisibilityElement(obj);\n        for (var i = 0; i < array.length; i++) {\n            div.appendChild(array[i]);\n        }\n\n        return div;\n    },\n\n    /**\n     * Creation du nom du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createBasicToolNameElement : function (obj) {\n        // exemple :\n        // <span id=\"GPname_ID_Layer1\" class=\"GPlayerName\" title=\"Quartiers prioritaires de la ville\">Quartiers prioritaires de la ville</span>\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPname_ID_\" + obj.id);\n        span.className = \"GPlayerName\";\n        span.title = obj.description || obj.title;\n        span.innerHTML = obj.title;\n\n        return span;\n    },\n\n    /**\n     * Creation de l'icone de visibilité du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n\n     * @returns {DOMElement[]} array containing input and label elements\n     */\n    _createBasicToolVisibilityElement : function (obj) {\n        // exemple :\n        // <input type=\"checkbox\" id=\"GPvisibility_ID_Layer1\" checked=\"\">\n        // <label for=\"GPvisibility_ID_Layer1\" id=\"GPvisibilityPicto_ID_Layer1\" class=\"GPlayerVisibility\" title=\"Afficher/masquer la couche\"></label>\n\n        var list = [];\n\n        var checked = (typeof obj.visibility !== \"undefined\") ? obj.visibility : true;\n        var id = this._addUID(\"GPvisibility_ID_\" + obj.id);\n\n        var input = document.createElement(\"input\");\n        input.id = id;\n        input.type = \"checkbox\";\n        input.checked = checked;\n\n        var label = document.createElement(\"label\");\n        label.htmlFor = id;\n        label.id = this._addUID(\"GPvisibilityPicto_ID_\" + obj.id);\n        label.className = \"GPlayerVisibility\";\n        label.title = \"Afficher/masquer la couche\";\n\n        // add event for visibility change\n        var context = this;\n        if (input.addEventListener) {\n            input.addEventListener(\n                \"click\",\n                function (e) {\n                    context._onVisibilityLayerClick(e);\n                }\n            );\n        } else if (input.attachEvent) {\n            // internet explorer\n            input.attachEvent(\n                \"onclick\",\n                function (e) {\n                    context._onVisibilityLayerClick(e);\n                }\n            );\n        }\n\n        list.push(input);\n        list.push(label);\n\n        return list;\n    },\n\n    /**\n     * Creation de l'affichage du menu des outils avancés du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement[]} array containing input and label elements\n     */\n    _createAdvancedToolShowElement : function (obj) {\n        // <input type=\"checkbox\" id=\"GPshowAdvancedTools_ID_Layer1\">\n        // <label for=\"GPshowAdvancedTools_ID_Layer1\" id=\"GPshowAdvancedToolsPicto_ID_Layer1\" class=\"GPshowMoreOptions GPshowLayerAdvancedTools\" title=\"Plus d'outils\"></label>\n\n        var list = [];\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowAdvancedToolsPicto_ID_\" + obj.id);\n        label.htmlFor = this._addUID(\"GPshowAdvancedTools_ID_\" + obj.id);\n        label.title = \"Plus d'outils\";\n        label.className = \"GPshowMoreOptions GPshowLayerAdvancedTools\";\n\n        var input = document.createElement(\"input\");\n        input.type = \"checkbox\";\n        input.id = this._addUID(\"GPshowAdvancedTools_ID_\" + obj.id);\n\n        list.push(input);\n        list.push(label);\n\n        return list;\n    },\n\n    /**\n     * Creation du container des outils avancés du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createAdvancedToolElement : function (obj) {\n        // exemple :\n        // <div id=\"GPadvancedTools_ID_Layer1\" class=\"GPlayerAdvancedTools\">\n        //     <!-- _createAdvancedToolDeleteElement -->\n        //     <!-- _createAdvancedToolInformationElement -->\n        //     <!-- _createAdvancedToolOpacityElement -->\n        // </div>\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPadvancedTools_ID_\" + obj.id);\n        container.className = \"GPlayerAdvancedTools\";\n\n        container.appendChild(this._createAdvancedToolDeleteElement(obj));\n\n        // si on n'a de l'informations à afficher, on met en place ce composant\n        if (obj.title && obj.description) {\n            container.appendChild(this._createAdvancedToolInformationElement(obj));\n        }\n        if (obj.type !== \"feature\") {\n            var array = this._createAdvancedToolOpacityElement(obj);\n            for (var i = 0; i < array.length; i++) {\n                container.appendChild(array[i]);\n            }\n        }\n\n        return container;\n    },\n\n    /**\n     * Creation de l'icone de suppression du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createAdvancedToolDeleteElement : function (obj) {\n        // exemple :\n        // <div id=\"GPremove_ID_Layer1\" class=\"GPlayerRemove\" title=\"Supprimer la couche\" onclick=\"GPdropLayer(this);\"></div>\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPremove_ID_\" + obj.id);\n        div.className = \"GPlayerRemove\";\n        div.title = \"Supprimer la couche\";\n        div.layerId = obj.id;\n\n        var context = this;\n        if (div.addEventListener) {\n            div.addEventListener(\n                \"click\",\n                function (e) {\n                    context._onDropLayerClick(e);\n                }\n            );\n        } else if (div.attachEvent) {\n            // internet explorer\n            div.attachEvent(\n                \"onclick\",\n                function (e) {\n                    context._onDropLayerClick(e);\n                }\n            );\n        }\n\n        return div;\n    },\n\n    /**\n     * Creation de l'icone d'information du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createAdvancedToolInformationElement : function (obj) {\n        // exemple :\n        // <div id=\"GPinfo_ID_Layer1\" class=\"GPlayerInfo\" title=\"Informations/légende\" onclick=\"GPopenLayerInfo(this);\"></div>\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPinfo_ID_\" + obj.id);\n        div.className = \"GPlayerInfo\";\n        div.title = \"Informations/légende\";\n        div.layerId = obj.id;\n        // add event on click\n        var context = this;\n        if (div.addEventListener) {\n            div.addEventListener(\n                \"click\",\n                function (e) {\n                    context._onOpenLayerInfoClick(e);\n                }\n            );\n        } else if (div.attachEvent) {\n            // internet explorer\n            div.attachEvent(\n                \"onclick\",\n                function (e) {\n                    context._onOpenLayerInfoClick(e);\n                }\n            );\n        }\n\n        return div;\n    },\n\n    /**\n     * Creation de l'icone de gestion de l'opacité du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement[]} array of two containers\n     */\n    _createAdvancedToolOpacityElement : function (obj) {\n        // exemple :\n        // <div id=\"GPopacity_ID_Layer1\" class=\"GPlayerOpacity\" title=\"Opacité\">\n        //   <input id=\"GPopacityRange_ID_Layer1\" type=\"range\" value=\"100\" oninput=\"GPchangeLayerOpacity(this);\" onchange=\"GPchangeLayerOpacity(this);\">\n        // </div>\n        // <div class=\"GPlayerOpacityValue\" id=\"GPopacityValueDiv_ID_Layer1\">\n        //   <span id=\"GPopacityValue_ID_Layer1\">100</span>\n        //   %\n        // </div>\n\n        var list = [];\n\n        // curseur pour changer l'opacité\n        var divO = document.createElement(\"div\");\n        divO.id = this._addUID(\"GPopacity_ID_\" + obj.id);\n        divO.className = \"GPlayerOpacity\";\n        divO.title = \"Opacité\";\n\n        var opacity = (typeof obj.opacity !== \"undefined\") ? obj.opacity : 1;\n        opacity = Math.round(opacity * 100);\n\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPopacityValueDiv_ID_\" + obj.id);\n        input.type = \"range\";\n        input.value = opacity;\n\n        // add event for opacity change\n        var context = this;\n        if (input.addEventListener) {\n            input.addEventListener(\n                \"change\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        } else if (input.attachEvent) {\n            // internet explorer\n            input.attachEvent(\n                \"onchange\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        }\n\n        if (input.addEventListener) {\n            input.addEventListener(\n                \"input\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        } else if (input.attachEvent) {\n            // internet explorer\n            input.attachEvent(\n                \"oninput\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        }\n\n        divO.appendChild(input);\n\n        // Valeur d'opacité\n        var divC = document.createElement(\"div\");\n        divC.id = this._addUID(\"GPopacityValueDiv_ID_\" + obj.id);\n        divC.className = \"GPlayerOpacityValue\";\n\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPopacityValue_ID_\" + obj.id);\n        span.innerHTML = opacity + \"%\";\n\n        divC.appendChild(span);\n\n        list.push(divO);\n        list.push(divC);\n\n        return list;\n    },\n\n    // ################################################################### //\n    // ############################ Layer info ########################### //\n    // ################################################################### //\n\n    /**\n     * Creation du container du layer info (DOM)\n     *\n     * TODO GPlayerInfoPopup : ???\n     * TODO GPlayerInfoLink  : mettre en forme les échelles !\n     *\n     * @param {Object} obj - options de la couche à ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createContainerLayerInfoElement : function (obj) {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPlayerInfoContent\");\n\n        var title = document.createElement(\"div\");\n        title.id = this._addUID(\"GPlayerInfoTitle\");\n        title.innerHTML = obj.title;\n        container.appendChild(title);\n\n        if (obj.quicklookUrl) {\n            var quick = document.createElement(\"div\");\n            quick.id = this._addUID(\"GPlayerInfoQuicklook\");\n            quick.title = \"Afficher un aperçu de la couche\";\n            var refquick = document.createElement(\"a\");\n            refquick.href = obj.quicklookUrl;\n            refquick.appendChild(quick);\n            container.appendChild(refquick);\n        }\n\n        var close = document.createElement(\"div\");\n        close.id = this._addUID(\"GPlayerInfoClose\");\n        close.title = \"Fermer la fenêtre\";\n\n        var self = this;\n        /** Call event function on close click */\n        var onCloseClick = function () {\n            document.getElementById(self._addUID(\"GPlayerInfoPanel\")).className = \"GPlayerInfoPanelClosed\";\n            var layers = document.getElementsByClassName(\"GPlayerInfoOpened\");\n            for (var i = 0; i < layers.length; i++) {\n                layers[i].className = \"GPlayerInfo\";\n            }\n        };\n        if (close.addEventListener) {\n            close.addEventListener(\"click\", onCloseClick);\n        } else if (close.attachEvent) {\n            // internet explorer\n            close.attachEvent(\"onclick\", onCloseClick);\n        }\n        container.appendChild(close);\n\n        var desc = document.createElement(\"div\");\n        desc.id = this._addUID(\"GPlayerInfoDescription\");\n        desc.innerHTML = obj.description;\n        container.appendChild(desc);\n\n        if (obj.metadata) {\n            var mtd = document.createElement(\"div\");\n            mtd.id = this._addUID(\"GPlayerInfoMetadata\");\n\n            var mtdtitle = document.createElement(\"div\");\n            mtdtitle.className = \"GPlayerInfoSubtitle\";\n            mtdtitle.innerHTML = \"Métadonnées\";\n            mtd.appendChild(mtdtitle);\n\n            for (var i = 0; i < obj.metadata.length; i++) {\n                var urlmtd = obj.metadata[i].url;\n\n                var mtdlink = document.createElement(\"div\");\n                mtdlink.className = \"GPlayerInfoLink\";\n\n                var refmtd = document.createElement(\"a\");\n                refmtd.href = urlmtd;\n                refmtd.innerHTML = urlmtd;\n                mtdlink.appendChild(refmtd);\n                mtd.appendChild(mtdlink);\n            }\n\n            if (obj.metadata.length !== 0) {\n                container.appendChild(mtd);\n            }\n        }\n\n        if (obj.legends) {\n            var lgd = document.createElement(\"div\");\n            lgd.id = this._addUID(\"GPlayerInfoLegend\");\n\n            var lgdtitle = document.createElement(\"div\");\n            lgdtitle.className = \"GPlayerInfoSubtitle\";\n            lgdtitle.innerHTML = \"Légende\";\n            lgd.appendChild(lgdtitle);\n\n            var legends = {};\n            var maxScale = obj.maxScaleDenominator || 560000000;\n\n            // on crée un tableau temporaire pour ordonner les légendes selon le dénominateur d'échelle\n            for (var k = 0; k < obj.legends.length; k++) {\n                var minScale = obj.legends[k].minScaleDenominator;\n                if (minScale) {\n                    var s = minScale.toString();\n                    minScale = Math.round(parseInt(s.substring(0, 3), 10) / 10) * Math.pow(10, s.length - 2);\n                } else {\n                    minScale = 270;\n                }\n                legends[minScale] = obj.legends[k];\n            }\n\n            for (var scale in legends) {\n                if (legends.hasOwnProperty(scale)) {\n                    var urllgd = legends[scale].url;\n                    // on n'affiche pas les légendes pointant vers \"nolegend.jpg\"\n                    if (typeof urllgd === \"string\" && urllgd.toLowerCase().indexOf(\"nolegend.jpg\") === -1) {\n                        // TODO GPlayerInfoPopup\n                        var lgdlink = document.createElement(\"div\");\n                        lgdlink.className = \"GPlayerInfoLink\";\n\n                        maxScale = legends[scale].maxScaleDenominator || maxScale;\n\n                        var reflgd = document.createElement(\"a\");\n                        reflgd.href = urllgd;\n                        reflgd.innerHTML = \"Du 1/\" + scale + \" au 1/\" + maxScale;\n                        lgdlink.appendChild(reflgd);\n                        lgd.appendChild(lgdlink);\n                    } else {\n                        delete legends[scale];\n                    }\n                }\n            }\n\n            if (Object.keys(legends).length !== 0) {\n                container.appendChild(lgd);\n            }\n        }\n\n        return container;\n    }\n};\n\nexport default LayerSwitcherDOM;\n","\nimport L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport LayerSwitcherDOM from \"../../Common/Controls/LayerSwitcherDOM\";\n\nvar logger = Logger.getLogger(\"layerswitcher\");\n\n/**\n * @classdesc\n *\n * Leaflet Control Class to manage map layers : their order, visibility and opacity, and display their informations (title, description, legends, metadata...)\n *\n * Use {@link module:Controls.LayerSwitcher L.geoportalControl.LayerSwitcher()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#control-layers\" target=\"_blank\">L.Control.Layers</a> native class.\n *\n * @namespace\n * @alias L.geoportalControl.LayerSwitcher\n */\nvar LayerSwitcher = L.Control.Layers.extend(/** @lends L.geoportalControl.LayerSwitcher.prototype */ {\n\n    includes : LayerSwitcherDOM,\n\n    /**\n     * options by default\n     * (extend to L.Control.Layers)\n     *\n     * @private\n     */\n    options : {\n        collapsed : true,\n        position : \"topright\",\n        autoZIndex : true,\n        layers : []\n    },\n\n    // ################################################################### //\n    // ##################### Methodes surchargées ######################## //\n    // ################################################################### //\n\n    /**\n     * @constructor LayerSwitcher\n     *\n     * @private\n     * @alias LayerSwitcher\n     * @extends {L.Control}\n     * @param {Object} options - options of component\n     * @param {String}  [options.position] - position of component into the map, 'topleft' by default\n     * @param {Boolean} [options.collapsed = true] - collapse mode, false by default\n     * @param {Array} [options.layers] - list of layers to be configured. Each array element is an object, with following properties :\n     * @param {Object} [options.layers.layer] - layer object\n     * @param {Boolean} [options.layers.display] - display layer in widget layer list\n     * @param {String} [options.layers.config.visibility] - layer visibility on map\n     * @param {String} [options.layers.config.title] - layer alias, to be displayed in widget layer list. E.g. : \"Cartes IGN\"\n     * @param {String} [options.layers.config.description] - layer description, to be displayed on title hover, or in layer information panel.\n     * @param {String} [options.layers.config.quicklookUrl] - link to a quick look image for this layer.\n     * @param {Array} [options.layers.config.legends] - array of layer legends. Each array element is an object, with following properties :\n     *      - url (String, mandatory) : link to a legend\n     *      - minScaleDenominator (Number, optional) : min scale denominator for legend validity.\n     * @param {Array} [options.layers.config.metadata] - array of layer metadata. Each array element is an object, with property url (String, mandatory) : link to a metadata\n     *\n     * @example\n     *  layers = [\n     *      {\n     *          layer : wms1,\n     *          display : false,\n     *          config : {\n     *              title : \"test layer name 1\",\n     *              description : \"test layer desc 1\",\n     *          }\n     *      }\n     *  ]\n     *  options = {\n     *      position : \"topright\",\n     *      collapsed : true,\n     *      layers : layers\n     *  }\n     *\n     *  var layerSwitcher = L.geoportalControl.LayerSwitcher(options);\n     */\n    initialize : function (options) {\n        L.Util.setOptions(this, options);\n\n        // uuid\n        this._uid = ID.generate();\n\n        // il faut recuperer tous les layers de la carte (cf. onAdd).\n        // si une configuration de layers est renseignée, on exploite cette\n        // information pour les layers renseignés.\n        // Par contre, pour ceux qui n'ont pas de configuration, on exploite\n        // les informations issues de l'autoconf pour les layers IGN,\n        // et, pour les layers non IGN, on gére avec l'ID pours les valeurs\n        // de titre ou description  ...\n\n        // a ton une configuration des layers ?\n        this._hasLayersConfig = !(!this.options.layers || Object.keys(this.options.layers).length === 0);\n\n        // configuration des layers\n        this._layersConfig = (this._hasLayersConfig) ? this.options.layers : [];\n\n        // liste des layers (c'est l'interface avec le dom !)\n        this._layers = {};\n\n        // indice : ordre des layers sur la carte\n        // plus c'est haut, plus c'est au dessus de la pile\n        this._lastZIndex = 0;\n\n        // si on a une configuration de layers, on l'exploite tout de suite...\n        if (this._hasLayersConfig) {\n            for (var i = 0; i < this._layersConfig.length; i++) {\n                var obj = this._layersConfig[i];\n                // signature de la fonction pour une compatibilité avec leaflet...\n                this._addLayer(obj.layer, null, true);\n            }\n        }\n    },\n\n    /**\n     * Method 'onAdd'\n     * (extend to L.Control.Layers)\n     * Method to add the control on the map.\n     *\n     * @param {Object} map - L.Map\n     * @returns {HTMLElement} container\n     *\n     * @private\n     */\n    onAdd : function (map) {\n        // on charge tous les layers dans le controle avec une\n        // configuration automatique des layers pour ceux qui ne sont pas\n        // renseignés.\n        var layersMap = map._layers;\n\n        // on est dans le cas où nous avons des layers ajoutés à la carte\n        if (Object.keys(layersMap).length !== 0) {\n            // pour gerer l'ordre d'affichage des layers sur la map\n            // ainsi que dans le controle, on veut le fonctionnement suivant :\n            // layers ID   : [21  , 23  , 25  , 27]\n            // layers Map  : [21:1, 23:2, 25:3, 27:4]\n            // mais l'ordre dans le controle doit être inversé\n            // layers Ctrl : [27, 25, 23, 21], et ceci sera realisé lors de\n            // la creation du DOM pour chaque layer (cf. _update())\n\n            var layersKeys = Object.keys(layersMap); // trie\n            this._lastZIndex = 0;\n            for (var i = 0; i < layersKeys.length; i++) {\n                var layerId = layersKeys[i];\n\n                // gestion des ordres d'affichage des layers\n                if (this.options.autoZIndex && layersMap[layerId].setZIndex) {\n                    this._lastZIndex++;\n                    layersMap[layerId].setZIndex(this._lastZIndex);\n                }\n\n                // y'a t il une configuration des layers ?\n                // si oui, le layer renseigné a déjà été pris en compte dans\n                // le constructeur..., on passe à la suite...\n                if (this._hasLayersConfig) {\n                    if (this._layers[layerId]) {\n                        continue;\n                    }\n                }\n\n                // sans configuration, on gére en mode auto le layer.\n                // on utilise cette methode\n                // this.addOverlay() -> this._addLayer()...\n                this.addOverlay(layersMap[layerId]);\n            }\n        }\n\n        // FIXME au cas où les layers n'ont pas été renseignés sur la carte\n        // (via addTo ou options.layers), on decide de prendre ceux qui\n        // sont renseignés dans la configuration ?\n        if (Object.keys(layersMap).length === 0) {\n            var config = this._layersConfig;\n            this._lastZIndex = 0;\n            for (var j = 0; j < config.length; j++) {\n                var layer = config[j].layer;\n\n                if (!map.hasLayer(layer)) {\n                    // on ajoute le layer à la carte\n                    map.addLayer(layer);\n\n                    // on met en place la structure\n                    this.addOverlay(layer, null);\n\n                    // on gère l'ordres d'affichage des layers\n                    if (this.options.autoZIndex && layer.setZIndex) {\n                        this._lastZIndex++;\n                        layer.setZIndex(this._lastZIndex);\n                    }\n                }\n            }\n        }\n\n        // mise à jour des visibilités (au niveau du DOM, oeil coché ou non...)\n        for (var k in this._layers) {\n            if (this._layers.hasOwnProperty(k)) {\n                var obj = this._layers[k];\n                var _layer = obj.layer;\n                var _visibility = obj.visibility;\n                // par defaut, la visibilité de la couche est active, donc avec un oeil non coché !\n                if (!_visibility) {\n                    // on met à jour la liste des layers à afficher !\n                    this._updateVisibilityLayer(_layer);\n                }\n            }\n        }\n\n        // le constructeur retourne this._container !\n        // on appelle la methode hérité car elle va realisée le boulot :\n        // - _initLayout\n        // - _update\n        // - evenements sur la carte : layeradd + layerremove\n        // this._container = L.Control.Layers.prototype.onAdd.call(this, map);\n\n        this._initLayout();\n        this._update();\n        map.on(\"layeradd\", this._onLayerChange, this);\n        map.on(\"layerremove\", this._onLayerChange, this);\n\n        // expiremental !\n        map.eachLayer(function (layer) {\n            // ecouteur sur la visibilité des attributions d'un layer IGN\n            layer.on(\"visibilitychange\", function () {\n                logger.trace(\"visibilitychange\", layer);\n            },\n            this);\n            // ecouteur sur la liste des attributions d'un layer IGN\n            layer.on(\"attributionchange\", function () {\n                logger.trace(\"attributionchange\", layer);\n            },\n            this);\n        });\n\n        return this._container;\n    },\n\n    /**\n     * this method is called when the control is removed from the map\n     * and removes events on map.\n     * @param {Object} map - the map\n     *\n     * @private\n     */\n    onRemove : function (map) {\n        map.off(\"layeradd\", this._onLayerChange, this);\n        map.off(\"layerremove\", this._onLayerChange, this);\n    },\n\n    /**\n     * Method '_addLayer'\n     * (overwritten : L.Control.Layers)\n     * Methode creation of a useful structure for the interface with the DOM\n     * Method private call by this.initialize() or this.addOverlay()\n     *\n     * @example\n     * {\n     *    layer : objectlayer,\n     *    id : id,\n     *    title : title,\n     *    description : description\n     *    (...)\n     * };\n     * @param {Object} layer - object type 'L.TileLayer'\n     * @param {String} name - layer name or title\n     * @param {Boolean} overlay - overlay or not\n     *\n     * @private\n     */\n    _addLayer : function (layer, name, overlay) {\n        // id du layer (IGN ou non)\n        var id = (layer._geoportal_id) ? layer._geoportal_id : layer._leaflet_id;\n\n        // pas d'ID !?\n        // le layer n'est pas chargé dans la carte...\n        if (typeof id === \"undefined\") {\n            return;\n        }\n\n        // recherche de la config pour un layer donné\n        var layerConfig = {};\n        for (var i in this._layersConfig) {\n            if (this._layersConfig.hasOwnProperty(i)) {\n                if (id === L.stamp(this._layersConfig[i].layer)) {\n                    layerConfig = this._layersConfig[i].config;\n                    // display\n                    // ce layer n'est pas pris en compte dans le controle\n                    // mais il peut être affiché dans la map\n                    // si au préalable, le client l'a ajouté...\n                    var display = (typeof this._layersConfig[i].display !== \"undefined\") ? this._layersConfig[i].display : true;\n                    if (!display) {\n                        return;\n                    }\n                    break;\n                }\n            }\n        }\n\n        // construit un objet simplifié pour le dom,\n        // par defaut, on prend en compte les layers de type IGN\n        // (info de l'autoconf).\n        this._layers[id] = {\n            layer : layer,\n            id : id,\n            overlay : overlay, // not use !\n            title : (layer._geoportal_id && layer._title) ? layer._title : (name) || id,\n            description : (layer._geoportal_id && layer._description) ? layer._description : (name) || id,\n            visibility : true, // par defaut, sauf si surcharge via la config...\n            legends : (layer._geoportal_id) ? layer._legends : null,\n            metadata : (layer._geoportal_id) ? layer._metadata : null,\n            quicklookUrl : (layer._geoportal_id) ? layer._quicklookUrl : null\n        };\n\n        // surcharge la config ci dessus avec les options de configuration saisies\n        if (layerConfig && Object.keys(layerConfig).length) {\n            L.Util.extend(this._layers[id], layerConfig);\n        }\n\n        // mise à jour de la visibilité\n        var _visibility = this._layers[id].visibility;\n        if (layer._geoportal_id) {\n            // mise à jour de la visibilité des attributions pour un layer IGN\n            layer.setVisible(_visibility);\n        }\n        if (!_visibility) {\n            // on met à jour la liste des layers à afficher !\n            this._updateVisibilityLayer(layer);\n        }\n    },\n\n    /**\n     * Method 'addTo'\n     * (overwritten : L.Control.Layers because of exception with _expandIfNotCollapsed())\n     *\n     * @param {Object} map - the map\n     *\n     * @returns {Object} this\n     */\n    addTo : function (map) {\n        L.Control.prototype.addTo.call(this, map);\n        return this;\n    },\n\n    /**\n     * Creation of layers of container\n     * (extend to L.Control.Layers)\n     *\n     * Method private call by this.onAdd()\n     *\n     * @private\n     */\n    _initLayout : function () {\n        // fonctionnement lors de l'initialisation :\n        // onAdd -> this._update     -> this._addItem (on boucle sur layers)\n        // onAdd -> this._initLayout\n\n        // creation du container principal\n        var container = this._container = this._createMainContainerElement();\n\n        // ajout dans le container principal d'affichage des layers\n        var input = this._createMainLayersShowElement();\n        container.appendChild(input);\n\n        // gestion du mode \"collapsed\"\n        if (!this.options.collapsed) {\n            input.checked = true;\n        }\n\n        // ajout dans le container principal de la liste des layers\n        var divL = this._overlaysList = this._createMainLayersElement();\n        container.appendChild(divL);\n\n        // ajout dans le container principal du picto du controle\n        var picto = this._createMainPictoElement();\n        container.appendChild(picto);\n\n        // ajout dans le container principal du panneau d'information\n        var divI = this._createMainInfoElement();\n        container.appendChild(divI);\n\n        // creation du mode draggable\n        this._createDraggableElement(this._overlaysList, this);\n\n        // desactivation des evenements qui peuvent interférer avec la carte\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        // gestion des evenements en interaction avec la carte\n        this._map.on(\"moveend\", this._onOutOfRangeLayerZoom, this);\n\n        // gestion des CSS en fonction du placement du controle\n        switch (this.getPosition()) {\n            case \"topright\":\n                container.style.position = \"relative\";\n                container.style.top = \"0\";\n                container.style.right = \"0\";\n                break;\n            case \"topleft\":\n                container.style.position = \"relative\";\n                container.style.top = \"0\";\n                container.style.right = \"initial\";\n                picto.style.float = \"left\";\n                divL.style.borderBottomRightRadius = \"5px\";\n                divL.style.borderBottomLeftRadius = \"0\";\n                divI.style.right = \"initial\";\n                divI.style.left = \"190px\";\n                break;\n            case \"bottomleft\":\n                container.style.position = \"relative\";\n                container.style.top = \"0\";\n                container.style.right = \"initial\";\n                picto.style.float = \"left\";\n                divL.style.borderBottomRightRadius = \"5px\";\n                divL.style.borderBottomLeftRadius = \"0\";\n                divI.style.right = \"initial\";\n                divI.style.left = \"190px\";\n                // divI.style.top = \"initial\";\n                // divI.style.bottom = \"190px\";\n                break;\n            case \"bottomright\":\n                container.style.position = \"relative\";\n                container.style.top = \"0\";\n                container.style.right = \"0\";\n                // divI.style.top = \"initial\";\n                // divI.style.bottom = \"190px\";\n                break;\n            default :\n                container.style.position = \"relative\";\n                container.style.top = \"0\";\n                container.style.right = \"0\";\n        }\n    },\n\n    /**\n     * Update the construction of DOM for each layer\n     * (extend to L.Control.Layers)\n     *\n     * Method private call by this.onAdd()\n     *\n     * @private\n     */\n    _update : function () {\n        if (!this._container) {\n            return;\n        }\n\n        this._overlaysList.innerHTML = \"\";\n\n        var layersId = [];\n\n        for (var i in this._layers) {\n            if (this._layers.hasOwnProperty(i)) {\n                layersId.push(i);\n            }\n        }\n\n        // inversion du sens des layers dans le controle\n        // car on veut le même ordre que sur la map, et comme je suis un peu\n        // parano, je re-trie la liste...\n        var layers = layersId.sort(function (a, b) {\n            var ia = parseInt(a, 10);\n            var ib = parseInt(b, 10);\n            return ia - ib;\n        }).reverse();\n\n        for (var j = 0; j < layers.length; j++) {\n            var id = layers[j];\n            var obj = this._layers[id];\n            this._addItem(obj);\n        }\n    },\n\n    /**\n     * Construction of the DOM for each layer\n     * (extend to L.Control.Layers)\n     *\n     * Method private call by this._update()\n     *\n     * @private\n     * @param {Object} obj - layer\n     * @returns {HTMLElement} container\n     */\n    _addItem : function (obj) {\n        logger.log(\"_addItem\", obj);\n\n        obj.opacity = obj.layer.options.opacity; // ajout de cette option !\n        var container = this._createContainerLayerElement(obj);\n\n        // gestion outOfRange\n        (obj.layer.options.minZoom > this._map.getZoom() || obj.layer.options.maxZoom < this._map.getZoom())\n            ? L.DomUtil.addClass(container, \"outOfRange\")\n            : L.DomUtil.removeClass(container, \"outOfRange\");\n\n        // ajout du container dans la liste des layers (de type overlay uniquement !)\n        this._overlaysList.appendChild(container);\n\n        return container;\n    },\n\n    /**\n     * Event onLayer change\n     * (extend to L.Control.Layers because of version 1.0.0)\n     *\n     * @private\n     * @param {Event} e - event\n     */\n    _onLayerChange : function (e) {\n        var obj = this._layers[L.stamp(e.layer)];\n\n        if (!obj) {\n            return;\n        }\n\n        if (!this._handlingClick) {\n            this._update();\n        }\n\n        this._map.fire((e.type === \"layeradd\") ? \"overlayadd\" : \"overlayremove\", obj);\n    },\n\n    /**\n     * Event onLayer remove\n     * (extend to L.Control.Layers because of version 1.0.0)\n     *\n     * @private\n     * @param {Object} layer - event\n     * @returns {Object} layer\n     */\n    removeLayer : function (layer) {\n        // clean DOM !\n        var id = L.stamp(layer);\n        delete this._layers[id];\n        this._update();\n\n        // clean Layers\n        var map = this._map;\n        if (map) {\n            if (map.hasLayer(layer)) {\n                map.removeLayer(layer);\n            }\n        }\n\n        return this;\n    },\n\n    // ################################################################### //\n    // ################ Methodes de l'instance (privées) ################# //\n    // ################################################################### //\n\n    /**\n     * Set visibility of attribution layer\n     * (call by this._onVisibilityLayerClick())\n     *\n     * @private\n     * @param {Object} layer - layer\n     */\n    _updateVisibilityLayer : function (layer) {\n        if (!this._map) {\n            return;\n        }\n\n        this._handlingClick = true;\n\n        var visibility = this._layers[L.stamp(layer)].visibility;\n\n        if (visibility && !this._map.hasLayer(layer)) {\n            // input non checked dans le DOM, on ouvre l'oeil\n            // et on ajoute la couche !\n            this._map.addLayer(layer);\n        } else if (!visibility && this._map.hasLayer(layer)) {\n            // input checked dans le DOM, on ferme l'oeil\n            // et on supprime la couche !\n            this._map.removeLayer(layer);\n        } else {\n            logger.log(\"Status unknown layer !?\");\n        }\n\n        this._handlingClick = false;\n        this._refocusOnMap();\n    },\n\n    /**\n     * Set visibility of layer (DOM)\n     * (call by this.setVisibility())\n     *\n     * @private\n     * @param {Object} layer - layer\n     */\n    _updateVisibilityDOMLayer : function (layer) {\n        var layerIdx = L.stamp(layer);\n        var visibilityElement = L.DomUtil.get(this._addUID(\"GPvisibility_ID_\" + layerIdx)); // FIXME ID !\n        var visibilityValue = this._layers[layerIdx].visibility;\n        visibilityElement.checked = visibilityValue;\n    },\n\n    /**\n     * Set opacity of layer (DOM)\n     * (call by this.setOpacity())\n     *\n     * @private\n     * @param {Object} layer - layer\n     */\n    _updateOpacityDOMLayer : function (layer) {\n        var layerIdx = L.stamp(layer);\n        var opacityValue = layer.options.opacity;\n        var opacityElement = L.DomUtil.get(this._addUID(\"GPopacityValue_ID_\" + layerIdx)); // FIXME ID !\n        opacityElement.innerHTML = parseInt(opacityValue * 100, 10) + \"%\";\n        opacityElement.value = parseInt(opacityValue * 100, 10);\n    },\n\n    // ################################################################### //\n    // ################## GESTIONNAIRES d'evenements ##################### //\n    // ################################################################### //\n\n    /**\n     * Event 'zoom' on layers visibility\n     *\n     * FIXME contrainte sur l'emprise du layer ?\n     *\n     * @private\n     */\n    _onOutOfRangeLayerZoom : function () {\n        var map = this._map;\n        var layers = this._layers;\n        for (var i in layers) {\n            if (layers.hasOwnProperty(i)) {\n                var layer = layers[i].layer;\n                var id = layers[i].id;\n                var div = L.DomUtil.get(this._addUID(\"GPlayerSwitcher_ID_\" + id)); // FIXME ID !\n                if (layer.options.minZoom > map.getZoom() || layer.options.maxZoom < map.getZoom()) {\n                    L.DomUtil.addClass(div, \"outOfRange\");\n                } else {\n                    L.DomUtil.removeClass(div, \"outOfRange\");\n                }\n            }\n        }\n    },\n\n    /**\n     * Event 'click' on layer visibility\n     *\n     * @private\n     * @param {Event} e - MouseEvent\n     */\n    _onVisibilityLayerClick : function (e) {\n        var visibilityElement = e.target.id; // ex GPvisibilityPicto_ID_26\n        var visibilityOrder = ID.index(visibilityElement); // ex. 26\n\n        // on met à jour cette interface...\n        this._layers[visibilityOrder].visibility = L.DomUtil.get(visibilityElement).checked;\n        var layer = this._layers[visibilityOrder].layer;\n\n        this._updateVisibilityLayer(layer);\n    },\n\n    /**\n     * Event 'click' on layer deleted\n     *\n     * @private\n     * @param {Event} e - MouseEvent\n     */\n    _onDropLayerClick : function (e) {\n        var layerElement = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerOrder = ID.index(layerElement); // ex. 26\n        var layer = this._layers[layerOrder].layer;\n\n        this.removeLayer(layer);\n    },\n\n    /**\n     * Event 'onchange' on layer opacity\n     *\n     * FIXME appel en dur d'un identifiant CSS !\n     *\n     * @private\n     * @param {Event} e - ChangeEvent\n     */\n    _onChangeLayerOpacity : function (e) {\n        var layerElement = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerOrder = ID.index(layerElement); // ex. 26\n        var layer = this._layers[layerOrder].layer;\n\n        var opacityValue = e.target.value;\n        var opacityId = L.DomUtil.get(this._addUID(\"GPopacityValue_ID_\" + layerOrder)); // FIXME ID !\n        opacityId.innerHTML = opacityValue + \"%\";\n\n        if (this._map.hasLayer(layer)) {\n            if (typeof layer.setOpacity !== \"undefined\") {\n                layer.setOpacity(opacityValue / 100);\n            } else {\n                // Particularité du format GeoJSON\n                layer.setStyle({\n                    fillOpacity : opacityValue / 100,\n                    opacity : opacityValue / 100\n                });\n            }\n        }\n    },\n\n    /**\n     * Event 'click' on opening the information window\n     *\n     * FIXME appel en dur d'un identifiant CSS !\n     *\n     * @private\n     * @param {Event} e - MouseEvent\n     */\n    _onOpenLayerInfoClick : function (e) {\n        var layerElement = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerOrder = ID.index(layerElement); // ex. 26\n        var layer = this._layers[layerOrder];\n\n        // Close layer info panel\n        var divId = L.DomUtil.get(e.target.id);\n        var panel = null;\n        var info = null;\n        if (divId.className === \"GPlayerInfoOpened\") {\n            L.DomUtil.removeClass(divId, \"GPlayerInfoOpened\");\n            L.DomUtil.addClass(divId, \"GPlayerInfo\");\n\n            panel = L.DomUtil.get(this._addUID(\"GPlayerInfoPanel\"));\n            L.DomUtil.removeClass(panel, \"GPpanel\");\n            L.DomUtil.removeClass(panel, \"GPlayerInfoPanelOpened\");\n            L.DomUtil.addClass(panel, \"GPlayerInfoPanelClosed\");\n\n            info = L.DomUtil.get(this._addUID(\"GPlayerInfoContent\"));\n            panel.removeChild(info);\n            return;\n        }\n\n        var layers = document.getElementsByClassName(\"GPlayerInfoOpened\");\n        for (var i = 0; i < layers.length; i++) {\n            layers[i].className = \"GPlayerInfo\";\n        }\n\n        // Open layer info panel\n        L.DomUtil.removeClass(divId, \"GPlayerInfo\");\n        L.DomUtil.addClass(divId, \"GPlayerInfoOpened\");\n\n        panel = L.DomUtil.get(this._addUID(\"GPlayerInfoPanel\"));\n        L.DomUtil.addClass(panel, \"GPpanel\");\n        L.DomUtil.removeClass(panel, \"GPlayerInfoPanelClosed\");\n        L.DomUtil.addClass(panel, \"GPlayerInfoPanelOpened\");\n\n        info = L.DomUtil.get(this._addUID(\"GPlayerInfoContent\"));\n        if (info) {\n            panel.removeChild(info);\n        }\n\n        // on récupére les infos associées au layer pour mettre à jour\n        // dynamiquement le contenu du panel d\"infos\n        var infoLayer = this._createContainerLayerInfoElement(layer);\n        panel.appendChild(infoLayer);\n    },\n\n    /**\n     * Event \"drag & drop\" on move layer\n     *\n     * FIXME appel en dur d'un identifiant CSS !\n     *\n     * @private\n     * @param {Event} e - MouseEvent\n     */\n    _onDragAndDropLayerClick : function (e) {\n        var layerElement = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerOrder = ID.index(layerElement); // ex. 26\n        var layer = this._layers[layerOrder];\n\n        logger.log(layer);\n\n        var matchesLayers = document.querySelectorAll(\"div.GPlayerSwitcher_layer\");\n        this._lastZIndex = matchesLayers.length;\n        for (var i = 0; i < matchesLayers.length; i++) {\n            var tag = matchesLayers[i].id;\n            var order = ID.index(tag);\n\n            var _layer = this._layers[order].layer;\n            if (this.options.autoZIndex && _layer.setZIndex) {\n                this._lastZIndex--;\n                _layer.setZIndex(this._lastZIndex);\n            }\n        }\n    },\n\n    // ################################################################### //\n    // ###### METHODES PUBLIQUES (INTERFACE AVEC LE CONTROLE) ############ //\n    // ################################################################### //\n\n    /**\n     * Adding layer configuration to be displayed by the control\n     *\n     * @param {Object} layer - layer to add to layer switcher\n     * @param {Object} config - See {@link module:Controls.LayerSwitcher L.geoportalControl.LayerSwitcher()} for layer display config object definition.\n     */\n    addLayer : function (layer, config) {\n        var map = this._map;\n        var cfg = this._layersConfig;\n\n        if (!layer) {\n            logger.log(\"[ERROR] LayerSwitcher:addLayer - missing layer parameter !\");\n            return;\n        }\n\n        if (!map.hasLayer(layer)) {\n            logger.log(\"[WARN] LayerSwitcher:addLayer - layer has not been added on map !\");\n            map.addLayer(layer);\n        }\n\n        var id = L.stamp(layer);\n        for (var i in cfg) {\n            if (cfg.hasOwnProperty(i)) {\n                // layer already added !\n                if (id === L.stamp(cfg[i].layer)) {\n                    delete cfg[i];\n                    break;\n                }\n            }\n        }\n\n        var _config = config || {};\n        L.Util.extend(_config, {\n            layer : layer\n        });\n\n        cfg.push(_config);\n\n        // layer déjà configuré, il reprend sa place !\n        if (!this._layers[id]) {\n            layer.setZIndex(this._lastZIndex++);\n        }\n\n        this.addOverlay(layer);\n\n        this._update();\n    },\n\n    /**\n     * Set the opacity of a layer, and opacity must be a number from 0 to 1.\n     *\n     * @param {Object} layer - layer into layerswitcher\n     * @param {Number} opacity - 0-1.\n     */\n    setOpacity : function (layer, opacity) {\n        logger.trace(layer, opacity);\n        if (opacity > 1 || opacity < 0) {\n            return;\n        }\n\n        if (this._map.hasLayer(layer)) {\n            if (typeof layer.setOpacity !== \"undefined\") {\n                layer.setOpacity(opacity);\n            } else {\n                // Particularité du format GeoJSON pour l'opacité\n                layer.options.opacity = opacity;\n                layer.setStyle({\n                    fillOpacity : opacity,\n                    opacity : opacity\n                });\n            }\n            this._updateOpacityDOMLayer(layer);\n        }\n    },\n\n    /**\n     * Set the visibility of a layer.\n     *\n     * @param {Object} layer - layer into layerswitcher\n     * @param {Object} visibility - true/false.\n     */\n    setVisibility : function (layer, visibility) {\n        logger.trace(layer, visibility);\n        this._layers[L.stamp(layer)].visibility = visibility;\n        this._updateVisibilityDOMLayer(layer);\n        this._updateVisibilityLayer(layer);\n    }\n});\n\nexport default LayerSwitcher;\n","import * as Log from \"loglevel\";\n\nvar LoggerByDefault = {\n    /**\n     * logger statique\n     *\n     * @static\n     * @param {String} name - nom du logger\n     * @returns {Object} retourne un logger\n     */\n    getLogger : function (name) {\n        // Substitute global constants configured at compile time\n        // cf. webpack.config.js\n        // FIXME howtodo !? DefineWebpackPlugin ? EnvironmentWebpackPlugin ?\n        (\"__PRODUCTION__\".match(/true/)) ? Log.disableAll() : Log.enableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    }\n};\n\nexport default LoggerByDefault;\n","/**\n * Classe de gestion des erreurs qui permer d'associer un message d'erreur à l'exception lancée.\n *\n * @example\n * MessagesResources.getMessage(\"ERROR_PARAM_MISSING\", \"x\", \"y\", \"z\")));\n * // --> output : Parameter(s) 'x - y - z' missing\n *\n * @module MessagesResources\n * @alias Gp.Utils.MessagesResources\n * @private\n */\nvar MessagesResources = {\n\n    // Paramètres\n    PARAM_MISSING : \"Parameter(s) '%var%' missing\",\n    PARAM_EMPTY : \"Parameter(s) '%var%' empty\",\n    PARAM_TYPE : \"Wrong type(s) for parameter(s) '%var%'\",\n    PARAM_FORMAT : \"Parameter(s) '%var%' not correctly formatted\",\n    PARAM_NOT_SUPPORT : \"Value(s) for parameter(s) '%var%' not supported\",\n    PARAM_NOT_SUPPORT_NODEJS : \"Value(s) for parameter(s) '%var%' not supported to NodeJS\",\n    PARAM_UNKNOWN : \"Value(s) for parameter(s) '%var%' unknown\",\n\n    // Services\n    // Requête\n    SERVICE_REQUEST_BUILD : \"An error occurred during the request building of the service\",\n    SERVICE_REQUEST_EMPTY : \"The request sent to the service is empty\",\n\n    // Réponse\n    SERVICE_RESPONSE_EXCEPTION : \"The service returned an exception : '%var%'\",\n    SERVICE_RESPONSE_EXCEPTION_2 : \"The service returned an exception\",\n    SERVICE_RESPONSE_ANALYSE : \"An error occurred while parsing the response '%var%' of the service\",\n    SERVICE_RESPONSE_ANALYSE_2 : \"An unknown error occurred while parsing the response\",\n    SERVICE_RESPONSE_EMPTY : \"The response of the service is empty\",\n    SERVICE_RESPONSE_EMPTY_2 : \"The response from the service could not be analyzed or is empty\",\n    SERVICE_RESPONSE_FORMAT : \"The format of the service response is not supported (handled format(s) : '%var%')\",\n    SERVICE_RESPONSE_FORMAT_2 : \"The format of the service response is not supported\",\n    SERVICE_RESPONSE_FORMAT_3 : \"No suggestion matching the search\",\n\n    // Classes\n    CLASS_CONSTRUCTOR : \"'%var%' constructor cannot be called as a function.\",\n\n    /**\n     * Fonction qui va retourner le message d'erreur associé à la clé donnée\n     *\n     * @method getMessage\n     * @param {String} clef - Clef de l'erreur (ex : ERROR_PARAM)\n     * @param {String[]} parametres - Paramètres/variables concernés par le message d'erreur associé à la clef donnée\n     * @return {String} message - String contenant le message de l'exception\n     */\n    getMessage : function (clef, parametres) {\n        // param de la fonction uniquement pour la documentation...\n\n        if (Object.keys(arguments).length === 0) {\n            return \"Message indefined !\";\n        }\n\n        var params = Array.prototype.slice.call(arguments);\n        var key = params.shift();\n        var args = params;\n\n        var message = this[key];\n\n        try {\n            if (Array.isArray(args) && args.length > 0) {\n                message = message.replace(\"%var%\", args.join(\" - \"));\n            } else {\n                message = message.replace(\"%var%\", \"%var% (not specified)\");\n            }\n        } catch (e) {\n            // error de string.replace()\n\n        }\n\n        return message;\n    }\n};\n\nexport default MessagesResources;\n","/**\n * Errors raised by API for one among three reasons : wrong API usage, underlying service error or unknown reason.\n *\n * @property {String} message - Error message\n * @property {Number} status - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes} ; -1 otherwise.\n * @property {String} type - Error type ({@link Gp.Error.TYPE_SRVERR}, {@link Gp.Error.TYPE_USEERR} or {@link Gp.Error.TYPE_UNKERR}).\n *\n * @namespace\n * @alias Gp.Error\n * @param {Object|String} error - Options for creating error object. Can be a String (message) or an Object.\n * @param {String} error.message - Error message to return to user.\n * @param {enum} [error.type=TYPE_UNKERR] - Error type\n * @param {status} [error.status=-1] - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}.\n *\n */\nfunction ErrorService (error) {\n    if (!(this instanceof ErrorService)) {\n        throw new TypeError(\"ErrorService constructor cannot be called as a function.\");\n    }\n\n    var e = error;\n    if (typeof error === \"string\" || error instanceof String) {\n        this.message = error;\n        this.status = -1;\n        this.type = ErrorService.TYPE_UNKERR;\n    } else {\n        this.message = e.message || \"undefined!?\";\n        this.type = e.type;\n        this.status = e.status || -1;\n    }\n\n    this.name = \"ErrorService\";\n    this.stack = (new Error()).stack;\n}\n\n/**\n * Error raised when underlying geoportal service answers on error.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_SRVERR = \"SERVICE_ERROR\";\n/**\n * Error raised when funcion use is inappropriate\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_USEERR = \"USAGE_ERROR\";\n/**\n * Error raised when API can't perform the job for a reason other than the two other ones.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_UNKERR = \"UNKNOWN_ERROR\";\n\n/**\n * @lends module:ErrorService\n */\nErrorService.prototype = Object.create(Error.prototype, {\n    constructor : {\n        value : ErrorService,\n        writable : true,\n        configurable : true\n    }\n});\n\nexport default ErrorService;\n","/**\n * Classe utilitaire\n *\n * @module Helper\n * @alias Gp.Helper\n */\nvar Helper = {\n\n    /**\n     * concatenation des parametres key/value dans les urls\n     *\n     * @method normalyzeParameters\n     * @static\n     * @param {Object} params - tableau de clef/valeur\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeParameters ({\n     *         key1:value1,\n     *         key2:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne les paramètres concaténés\n     */\n    normalyzeParameters : function (params) {\n        var myParams = null;\n\n        if (params) {\n            var tabParams = [];\n            for (var key in params) {\n                if (params.hasOwnProperty(key)) {\n                    var value = params[key];\n                    if (!value) {\n                        value = \"\";\n                    }\n                    tabParams.push(key + \"=\" + value);\n                }\n            }\n\n            myParams = tabParams.join(\"&\");\n        }\n\n        return myParams;\n    },\n\n    /**\n     * Concaténation et encodage des urls.\n     *\n     * @method normalyzeUrl\n     * @static\n     * @param {String} url - url\n     * @param {Object|String} params - tableau de clef/valeur ou string\n     * @param {Boolean} encode - true|false, false par defaut\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeUrl (url, {\n     *         key1:value1,\n     *         key2=:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"url?key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne une url normalisée\n     */\n    normalyzeUrl : function (url, params, encode) {\n        var myUrl = url;\n\n        if (url) {\n            var k = url.indexOf(\"?\");\n            if (k === -1) { // pas de ? et KVP\n                myUrl += \"?\";\n            }\n\n            if (k !== -1 && k !== url.length - 1) { // KVP\n                myUrl += \"&\";\n            }\n        }\n\n        if (params) {\n            if (typeof params === \"string\") {\n                myUrl += params;\n            } else {\n                myUrl += this.normalyzeParameters(params);\n            }\n        }\n\n        if (encode) {\n            // FIXME bonne idée ?\n            myUrl = encodeURIComponent(myUrl);\n        }\n\n        return myUrl;\n    },\n\n    /**\n     * Indentation d'une chaine\n     *\n     * @method indent\n     * @static\n     * @param {Number} n - nombre de tabulation\n     * @param {String} msg - chaine\n     *\n     * @example\n     * Gp.Utils.Helper.indent (2, \"message à indenter\")\n     * // out\n     * // ........message à indenter\n     *\n     * @returns {String} retourne une chaine indentée\n     */\n    indent : function (n, msg) {\n        var num = n || 0;\n        return new Array(num + 1).join(\"\\t\") + msg;\n    }\n};\n\nexport default Helper;\n","/* global Promise, require, XDomainRequest */\n\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport ES6Promise from \"es6-promise\";\n// import __request from \"request\";\n// import __xmldom from \"xmldom\";\n\n/**\n * Ajax Request (use of Promises)\n *\n * @module XHR\n * @alias Gp.Protocols.XHR\n * @see dependance 'es6-promise'\n */\n\n// cf. https://xhr.spec.whatwg.org/\n// cf. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n\nvar XHR = {\n\n    /**\n     * Interface unique d'envoi d'une requête.\n     *\n     * @method call\n     * @static\n     * @param {Object} settings - options generales\n     * @param {String} settings.url    - url du service\n     * @param {String} settings.method - GET, POST, PUT, DELETE\n     * @param {String} settings.format - format de la reponse du service : json, xml ou null (brute)\n     * @param {String} settings.data   - content (post) ou param (get)\n     * @param {String} settings.proxy  - proxy url\n     * @param {Object|String} settings.headers - (post) ex. referer\n     * @param {Object|String} settings.content - (post) ex. 'application/json'\n     * @param {String} settings.timeOut - timeout = 0 par defaut\n     * @param {String} settings.scope - this\n     * @param {Function} settings.onResponse - callback\n     * @param {Function} settings.onFailure  - callback\n     */\n    call : function (settings) {\n        // logger\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::call()]\");\n\n        // FIXME\n        // To polyfill the global environment\n        ES6Promise.polyfill();\n\n        // test sur les settings obligatoires\n        if (!settings.url) {\n            throw new Error(\"missing parameter : url is not defined !\");\n        }\n\n        if (!settings.method) {\n            throw new Error(\"missing parameter : method is not defined !\");\n        }\n\n        if (!settings.format) {\n            settings.format = \"text\"; // reponse brute !\n        }\n\n        var options = {};\n        options.url = settings.url;\n        options.data = settings.data ? settings.data : null;\n        options.method = settings.method;\n        options.timeOut = settings.timeOut || 0;\n        options.scope = settings.scope || this;\n        options.proxy = settings.proxy || null;\n        options.content = settings.content || null;\n        options.headers = settings.headers || {\n            referer : \"http://localhost\"\n        };\n\n        // test sur les valeurs de 'settings.method'\n        switch (settings.method) {\n            case \"DELETE\":\n            case \"GET\":\n                break;\n            case \"PUT\":\n            case \"POST\":\n                // on force sur ces params spécifiques au mode POST\n                options.content = settings.content ? settings.content : \"application/x-www-form-urlencoded\"; // FIXME en attente des services : bascule en \"application/xml\" ou \"application/json\"\n                options.headers = settings.headers ? settings.headers : { referer : \"http://localhost\" }; // FIXME parametrable...\n                break;\n            case \"HEAD\":\n            case \"OPTIONS\":\n                throw new Error(\"HTTP method not yet supported !\");\n            default:\n                throw new Error(\"HTTP method unknown !\");\n        }\n\n        // test sur les valeurs de 'settings.format'\n        switch (settings.format) {\n            case \"text\":\n                this.__call(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"json\":\n                this.__callJSON(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"xml\":\n                this.__callXML(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            default:\n                throw new Error(\"This output Format is not yet supported !\");\n        }\n    },\n\n    /**\n     * Requete\n     *\n     * @method __call\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __call : function (options) {\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::__call()]\");\n\n        var promise = new Promise(\n            function (resolve, reject) {\n                // traitement du corps de la requête\n                var corps = (options.method === \"POST\" || options.method === \"PUT\") ? 1 : 0;\n\n                // seulement si options.data n'est pas vide (peut être un objet ou une chaine de caractères)\n                if (options.data && ((typeof options.data === \"object\" && Object.keys(options.data).length) || (typeof options.data === \"string\" && options.data.length)) && !corps) {\n                    options.url = Helper.normalyzeUrl(options.url, options.data);\n                }\n\n                logger.trace(\"URL = \", options.url);\n\n                var hXHR = null;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var nodefetch = require(\"node-fetch\");\n\n                    var opts = {\n                        headers : {\n                            Referer : \"https://localhost\"\n                        }\n                    };\n\n                    if (options.data && typeof options.data === \"string\" && corps) {\n                        opts = {\n                            method : options.method,\n                            body : options.data,\n                            headers : {\n                                \"Content-Type\" : options.content,\n                                Referer : \"https://localhost\"\n                            }\n                        };\n                    }\n\n                    return nodefetch(options.url, opts)\n                        .then(function (response) {\n                            if (response.ok) { // res.status >= 200 && res.status < 300\n                                resolve(response.text());\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + response.statusText + \"' | url : '\" + response.url + \"')\";\n                                var status = response.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        })\n                        .catch(function (e) {\n                            reject({\n                                message : e,\n                                status : -1\n                            });\n                        });\n                } else {\n                    if (window.XMLHttpRequest) {\n                        logger.trace(\"XMLHttpRequest\");\n\n                        hXHR = new XMLHttpRequest();\n                        hXHR.open(options.method, options.url, true); // async\n                        hXHR.overrideMimeType = options.content;\n\n                        // gestion du timeout\n                        var onTimeOutTrigger = null;\n                        if (options.timeOut > 0) {\n                            // FIXME le timeout interne ne me permet pas de declencher le bon message...\n                            // hXHR.timeout = options.timeOut;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                            /**\n                             * Description\n                             *\n                             * @method onTimeOutTrigger\n                             * @private\n                             */\n                            onTimeOutTrigger = window.setTimeout(\n                                function () {\n                                    var message = \"TimeOut Occured on Http Request with XMLHttpRequest !\";\n                                    reject({\n                                        message : message,\n                                        status : -1\n                                    });\n                                }, options.timeOut);\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            logger.trace(\"data = \", options.data);\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * On Error\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function (e) {\n                            console.log(e);\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Timeout\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function (e) {\n                            console.log(e);\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method onreadystatechange\n                         * @private\n                         */\n                        hXHR.onreadystatechange = function (e) {\n                            if (hXHR.readyState === 4) { // DONE\n                                if (hXHR.status === 200) {\n                                    window.clearTimeout(onTimeOutTrigger);\n                                    resolve(hXHR.response);\n                                } else {\n                                    var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"')\";\n                                    var status = e.target.status;\n                                    reject({\n                                        message : message,\n                                        status : status\n                                    });\n                                }\n                            }\n                        };\n\n                        // gestion du content data\n                        var data4xhr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xhr);\n                    } else if (window.XDomainRequest) {\n                        // worked in Internet Explorer 8–10 only !\n                        logger.trace(\"XDomainRequest\");\n\n                        hXHR = new XDomainRequest();\n                        hXHR.open(options.method, options.url);\n\n                        hXHR.overrideMimeType = options.content;\n\n                        if (options.timeOut > 0) {\n                            hXHR.timeout = options.timeout;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * Description\n                         *\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function () {\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function () {\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Load\n                         *\n                         * @method onload\n                         * @private\n                         */\n                        hXHR.onload = function (e) {\n                            if (hXHR.status === 200) {\n                                resolve(hXHR.responseText);\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"')\";\n                                var status = e.target.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        };\n\n                        var data4xdr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xdr);\n                    } else {\n                        throw new Error(\"CORS not supported\");\n                    }\n                }\n            }\n        );\n\n        return promise;\n    },\n\n    /**\n     * Requete avec parser JSON\n     *\n     * @method __callJSON\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callJSON : function (options) {\n        return this.__call(options)\n            .then(JSON.parse)\n            .catch(function (error) {\n                console.log(\"_callJSON failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    },\n\n    /**\n     * Requete avec parser XML\n     *\n     * @method __callXML\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callXML : function (options) {\n        return this.__call(options)\n            .then(function (response) {\n                var xmlDoc;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var DOMParser = require(\"xmldom\").DOMParser; // __xmldom.DOMParser\n                    xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n                } else {\n                    if (window.DOMParser) {\n                        var parser = new window.DOMParser();\n                        xmlDoc = parser.parseFromString(response, \"text/xml\");\n                    } else { // IE\n                        xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n                        xmlDoc.async = false;\n                        xmlDoc.loadXML(response);\n                    }\n                }\n\n                return xmlDoc;\n            })\n            .catch(function (error) {\n                console.log(\"__callXML failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    }\n\n};\n\nexport default XHR;\n","/**\n * JSONP : Implémentation du protocole JSONP de la plateforme Géoportail\n *\n * @module JSONP\n * @private\n * @alias Gp.Protocols.JSONP\n */\nimport Logger from \"../Utils/LoggerByDefault\";\n\n// cf. https://github.com/sobstel/jsonp.js\nvar JSONP = {\n\n    /**\n     * Construction d'un identifiant statique basé sur le timestamp,\n     * et qui s'incremente de +1 à chaque appel\n     */\n    uuid : (function () {\n        var id = Math.floor(Date.now());\n        return function () {\n            return id++;\n        };\n    })(),\n\n    /**\n     * Cette fonction réalise l'appel du service fourni via le paramètre \"options.url\"\n     * en mettant en œuvre le protocole JSONP.\n     *\n     * @method call\n     * @static\n     * @param {Object} options - parametres d'invocation du service en JSONP\n     * @param {String} options.url - URL du service à invoquer (indépendamment du protocole JSONP).\n     *  Cette URL contient déjà les paramètres du service.\n     *  Si le paramètre dédié à la mise en oeuvre du protocole JSONP (callback=xxx) n'est pas présent, il est rajouté par la fonction ;\n     *  sa valeur est déterminée en fonction du paramètre callbackName.\n     * @param {Number} [options.timeOut = 0] - Nombre de ms au bout duquel on considère que le service n'a pas répondu.\n     *  Une valeur de 0 pour ce paramètre permet de désactiver la gestion du timeOut.\n     * @param {String} [options.callbackSuffix = null] - Suffixe de la fonction de callback à rajouter sur l'URL.\n     *  Si aucun suffixe n'est spécifié (cas par défaut), on utilisera l'identifiant this.uuid () comme suffixe. Ex: \"callback1458574396582 ()\"\n     * @param {String} [options.callbackName = gp.protocol.jsonp] - Valeur du paramètre callback à rajouter sur l'URL.\n     *  Si l'URL fournie contient déjà le paramètre callback, le paramètre callbackName ne sera pas pris en compte.\n     *  La fonction de callback est créée dynamiquement par la fonction JSONP ;\n     *  elle a deux fonctions :\n     *    elle annule la condition de timeOut\n     *    puis appelle la fonction fournie par l'utilisateur via le paramètre onResponse.\n     * @param {Function} options.onResponse - Nom de la fonction qui sera appelée lors de la réception des résultats du service.\n     *  Ce paramètre sera ignoré si l'URL contient déjà le paramètre callback.\n     *  La fonction de rappel appelée sera alors celle ayant pour nom la valeur de ce paramètre.\n     * @param {Function} [options.onTimeOut] - Nom de la fonction qui sera appelée en cas de non réponse du service.\n     *  Le temps au bout duquel on considère que le service n'a pas répondu est déterminé par le paramètre timeOut.\n     *  @example\n     *  var options = {\n     *      url : 'http://localhost/some/test.json&callback=myResults',\n     *      timeOut : 100,\n     *      callbackName : 'myResults',\n     *      callbackSuffix : \"\",\n     *      onResponse : function (response) {\n     *          console.log('results : ', response);\n     *      },\n     *\n     *   };\n     *   JSONP.call(options);\n     */\n    call : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"JSONP\");\n        logger.trace(\"[JSONP::call ()]\");\n\n        // analyse parametres\n\n        if (!options) {\n            logger.error(\"missing parameter : options !\");\n            throw new Error(\"missing parameter : options !\");\n        }\n\n        if (!options.url) {\n            logger.error(\"missing parameter : options.url !\");\n            throw new Error(\"missing parameter : options.url !\");\n        }\n\n        if (!options.timeOut) {\n            logger.info(\"setting 'options.timeOut' default value\");\n            options.timeOut = 0;\n        }\n\n        // FIXME si un callback coté client a été mis en place,\n        // cette condition sur cette methode n'a pas de sens !?\n        if (!options.onResponse) {\n            logger.error(\"missing parameter : options.onResponse !\");\n            throw new Error(\"missing parameter : options.onResponse !\");\n            // FIXME doit on definir un callback interne par defaut !?\n            // options.onResponse = function (data) {\n            //    console.log(\"response callback (inner) : \", data);\n            // };\n        }\n\n        // ID du callback à utiliser : null ou string.\n        // si l'utilisateur a spécifié un suffixe pour le callback, on le récupère comme un ID (ex: options.callbackSuffix = \"\")\n        // sinon, on utilise un timestamp : this.uuid ()\n        var callbackId = (typeof options.callbackSuffix === \"string\") ? options.callbackSuffix : this.uuid();\n\n        // on recherche le parametre callback et son nom de fonction dans l'url\n        var urlHasCallbackKey = false;\n        var urlHasCallbackName = false;\n\n        var idx = options.url.indexOf(\"callback=\");\n\n        if (idx !== -1) {\n            urlHasCallbackKey = true;\n            // extraction callbackName de l'url : entre \"callback=\" et \"&\" ou fin de ligne\n            var j = options.url.indexOf(\"&\", idx);\n            if (j === -1) {\n                j = options.url.length;\n            }\n\n            // on ecrase le parametre options.callbackName s'il avait été défini\n            var callbackName = options.url.substring(idx + 9, j);\n\n            if (callbackName) {\n                urlHasCallbackName = true;\n                options.callbackName = callbackName;\n                logger.info(\"setting 'options.callbackName' value (\" + options.callbackName + \") from 'options.url' parameter\");\n            }\n        }\n\n        // on ajoute le parametre callback dans l'URL s'il n'existe pas\n        if (!urlHasCallbackKey) {\n            // gestion des autres param. et \"?\"\n            var k = options.url.indexOf(\"?\");\n            if (k === -1) {\n                // aucun param., ni de '?'\n                options.url = options.url + \"?\" + \"callback=\";\n            } else if (k === options.url.length) {\n                // uniquement le '?'\n                options.url = options.url + \"callback=\";\n            } else {\n                // le '?' et les param. existent\n                options.url = options.url + \"&\" + \"callback=\";\n            }\n            logger.info(\"setting callback default key in 'options.url' : \" + options.url);\n        }\n\n        // utilisation de la fonction callback coté client ?\n        var HasCallbackName = options.callbackName ? true : urlHasCallbackName;\n\n        // on ajoute le nom de la fonction callback dans l'URL si elle n'existe pas\n        if (!urlHasCallbackName) {\n            // fonction callback par defaut\n            if (!options.callbackName) {\n                logger.info(\"setting 'options.callbackName' default value\");\n                options.callbackName = \"callback\"; // ou \"gp.protocol.jsonp\" ?\n                // info : si on ne veut pas gerer d'ID dans le callback,\n                // options.callbackSuffix = \"\"\n                if (callbackId || callbackId === \"\") {\n                    options.callbackName += callbackId;\n                }\n            }\n            options.url = options.url.replace(\"callback=\", \"callback=\" + options.callbackName);\n            logger.info(\"setting callback function name in 'options.url' : \" + options.url);\n        }\n\n        // timeOut par defaut\n        if (!options.onTimeOut) {\n            logger.info(\"setting 'options.onTimeOut' default value\");\n            /** callback timeout par defaut */\n            options.onTimeOut = function (/* error */) {\n                console.log(\"TimeOut while invoking url : \" + options.url);\n            };\n        }\n\n        if (!HasCallbackName) {\n            var self = this;\n\n            // event du timeout\n            var onTimeOutTrigger = null;\n\n            // declenche le timeout si > à 0 !\n            if (options.timeOut > 0) {\n                onTimeOutTrigger = window.setTimeout(\n                    function () {\n                        /** fonction de reponse du service */\n                        window[options.callbackName] = function () {};\n                        options.onTimeOut();\n                        self._deleteScript(callbackId);\n                    }, options.timeOut);\n            }\n\n            // FIXME le nom de la fonction n'accepte pas de namespace !\n            // ex. Gp.Function.callback\n            /**\n            * fonction de reponse du service\n            * @param {Object} data - data\n            * @private\n            */\n            window[options.callbackName] = function (data) {\n                window.clearTimeout(onTimeOutTrigger);\n                options.onResponse(data);\n                self._deleteScript(callbackId);\n            };\n        }\n\n        this._createScript(callbackId, options.url);\n    },\n\n    /**\n    * create Script\n    * @param {String} callbackId - callback Id\n    * @param {String} url - url\n    * @private\n    */\n    _createScript : function (callbackId, url) {\n        var scriptu;\n        var scripto = document.getElementById(\"results\" + callbackId);\n\n        scriptu = document.createElement(\"script\");\n        scriptu.setAttribute(\"type\", \"text/javascript\");\n        scriptu.setAttribute(\"src\", url);\n        scriptu.setAttribute(\"charset\", \"UTF-8\");\n        scriptu.setAttribute(\"id\", \"results\" + callbackId);\n        scriptu.setAttribute(\"async\", \"true\"); // FIXME async ?\n        // head ou body ou autres ?\n        var node = document.documentElement || document.getElementsByTagName(\"head\")[0];\n        if (scripto === null) {\n            node.appendChild(scriptu);\n        } else {\n            // s'il existe déjà, on le remplace !\n            node.replaceChild(scriptu, scripto);\n        }\n    },\n\n    /**\n    * delete Script\n    * @param {String} callbackId - callback Id\n    * @private\n    */\n    _deleteScript : function (callbackId) {\n        var script = document.getElementById(\"results\" + callbackId);\n        if (script) {\n            var node = script.parentNode || document.documentElement;\n            if (!node) {\n                return;\n            }\n            node.removeChild(script);\n        }\n    }\n};\n\nexport default JSONP;\n","/**\n * Interface de dialogue avec les webservices\n *\n * @module Protocols\n * @private\n * @alias Gp.Protocols\n */\nimport Helper from \"../Utils/Helper\";\nimport XHR from \"./XHR\";\nimport JSONP from \"./JSONP\";\n\nvar Protocol = {\n\n    /**\n     * Interface unique d\"envoi d\"une requête.\n     *\n     * @method send\n     * @static\n     * @param {Object} options - options generales\n     * @param {String} options.url      - url du service\n     * @param {String} options.method   - GET, POST, PUT, DELETE\n     * @param {String} options.protocol - XHR | JSONP\n     * @param {String} options.format   - format de la reponse du service : json, xml ou null (brute)...\n     * @param {String} options.wrap     - encapsuler la reponse du service dans du JSON : true|false (true par defaut sur le protocole JSONP)\n     * @param {String} options.callbackSuffix - suffixe de la fonction de callback (JSONP uniquement) (ex: si callbackSuffix=\"\", la fonction s'appellera \"callback\")\n     * @param {String} options.timeOut  - 0 ms\n     * @param {Boolean} options.nocache  - true|false\n     * @param {Object|String} options.data        - content (post) ou param (get)\n     * @param {Object|String} options.headers     - (post) ex. referer\n     * @param {Object|String} options.content - (post) ex. \"application/json\"\n     * @param {String} options.scope       - this (TODO)\n     * @param {Function} options.onResponse - callback\n     * @param {Function} options.onFailure - callback\n     * @param {Function} options.onTimeOut - callback\n     * @param {String} options.proxyUrl -  (TODO)\n     */\n    send : function (options) {\n        // INFO\n        // \"output\" - param est interne à la classe \"Protocol\" (parametrable via \"wrap\"), et à ajouter à l\"url\n        //      ce param est independant du service car il est géré par le filtre LUA :\n        //          ex. json|xml (json par defaut).\n        //          Ce param. permet d\"encapsuler du XML dans du JSON :\n        //              {http : {status:200, error:null},xml :\"réponse du service\"}\n        //          Utile pour les services qui ne repondent que du XML (ex. Geocodage)\n        //\n        // |-------------------------------------------------|\n        // |      \\service |      |     |                    |\n        // | output\\ format| json | xml |     remarques      |\n        // |--------\\------|------|-----|--------------------|\n        // |    json       | json | json| json/xml encapsulé |\n        // |    xml        | json | xml | param inactif      |\n        // |-------------------------------------------------|\n        // ex. le service demande une reponse native au \"format\" json et avec un \"output\" json.\n        // on a donc une reponse json encapsulé dans un json : ce qu'on ne souhaite pas !\n        // dans ce cas on ne renseigne pas output=json\n\n        // INFO\n        // \"wrap\" - choix d\"encapsuler ou non les reponses dans du JSON.\n        //      Par defaut, on encapsule uniquement les reponses sur le protocole JSONP (et qui sont en xml) !\n\n        // INFO\n        // \"callback\" - param est interne à la classe \"Protocol\" (non parametrable), et à ajouter à l\"url\n        //      ce param est independant du service car il est géré aussi par le filtre LUA :\n        //          ex. callback|null\n        //          Ce param. permet de renvoyer une reponse javascript :\n        //              callback ({http : {status:200, error:null},xml :\"réponse du service\"})\n        //          Ce param. est non renseigné par defaut car pour du JSONP, on utilise le\n        //          le protocol JSONP, et ce dernier implemente déjà le callback !\n\n        // settings par defaut\n        var settings = options || {\n            method : \"GET\",\n            // protocol : \"JSONP\",\n            protocol : \"XHR\",\n            timeOut : 0,\n            format : null,\n            wrap : true,\n            nocache : true,\n            output : \"json\",\n            callback : null,\n            callbackSuffix : null\n        };\n\n        // on determine l'environnement d'execution : browser ou non ?\n        // et on stoppe pour nodeJS... sur un protocole JSONP !\n        if (typeof window === \"undefined\" && options.protocol === \"JSONP\") {\n            console.log(\"Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS\");\n            return;\n        }\n\n        if (options.protocol === \"XHR\" || options.format === \"json\") {\n            settings.wrap = false;\n        } else if (options.protocol === \"JSONP\" && options.format === \"xml\") {\n            settings.wrap = true;\n        }\n\n        settings.callback = null; // FIXME non géré !?\n        settings.output = settings.wrap ? \"json\" : null;\n\n        // on encapsule les reponses dans un objet JSON\n        if (settings.wrap) {\n            var params = {};\n            params.output = settings.output;\n            params.callback = settings.callback;\n            delete params.callback; // FIXME non géré !?\n            settings.url = Helper.normalyzeUrl(options.url, params);\n        }\n\n        // choix de l\"implementation :\n        // XHR ou JSONP\n        switch (settings.protocol) {\n            case \"XHR\":\n                // on normalise l'url (gestion du cache)\n                if (options.method === \"GET\" && options.nocache) {\n                    settings.url = Helper.normalyzeUrl(settings.url, {\n                        t : new Date().getTime()\n                    });\n                }\n                // appel du service en XHR\n                XHR.call(settings);\n                break;\n            case \"JSONP\":\n\n                // on normalise l'url si les params. sont renseignés dans la string|object \"data\"\n                if (settings.data) {\n                    settings.url = Helper.normalyzeUrl(settings.url, settings.data);\n                }\n\n                // appel du service en JSONP\n                JSONP.call(settings);\n                break;\n            default:\n                throw new Error(\"protocol not supported (XHR|JSONP) !\");\n        }\n    }\n\n};\n\nexport default Protocol;\n","// cette classe contient les URLs par defaut des services.\n//  DefaultUrlService.Alti.url(key)[elevation-json]\n//  DefaultUrlService.Alti.url(key)[elevation-xml]\n//  DefaultUrlService.Alti.url(key)[profil-json]\n//  DefaultUrlService.Alti.url(key)[profil-xml]\n//  DefaultUrlService.Alti.url(key)[wps]\n//  DefaultUrlService.ProcessIsoCurve.url(key)\n//  DefaultUrlService.AutoComplete.url(key)\n//  DefaultUrlService.ReverseGeocode.url(key)\n//  DefaultUrlService.AutoConf.url(key)[apiKey]\n//  DefaultUrlService.AutoConf.url(key)[apiKeys]\n//  DefaultUrlService.AutoConf.url(key)[aggregate]\n//  DefaultUrlService.Geocode.url(key)\n//  DefaultUrlService.Route.url(key)\n\n// Example :\n//\n// DefaultUrlService.Alti.url('alti')[elevation-json]\n//  output {String} -> http://wxs.ign.fr/calcul/alti/rest/elevation.json\n//\n// DefaultUrlService.Alti.url('calcul')\n// output {Object|String}\n// -> http://wxs.ign.fr/calcul/alti/rest/elevation.json\n// -> http://wxs.ign.fr/calcul/alti/rest/elevation.xml\n// -> http://wxs.ign.fr/calcul/alti/rest/elevationLine.json\n// -> http://wxs.ign.fr/calcul/alti/rest/elevationLine.xml\n// -> http://wxs.ign.fr/calcul/alti/wps\n//\n// ssl by default.\n//\n// Force to not do ssl :\n// DefaultUrlService.ssl = false;\n//\n// DefaultUrlService.AutoComplete.url('calcul')\n// output {Object|String}\n// -> https://wxs.ign.fr/calcul/ols/apis/completion\n\n// constantes internes\nvar HOSTNAME = \"wxs.ign.fr\";\n\n/**\n * Default Geoportal web services URLs access.\n *\n * @namespace\n * @alias Gp.Services.DefaultUrl\n */\nvar DefaultUrlService = {\n\n    /** if set true, require the use of https protocol */\n    ssl : true,\n\n    /**\n    * base url of services (ssl protocol management)\n    * @param {String} key - key\n    * @param {String} path - path\n    * @returns {String} url\n    */\n    url : function (key, path) {\n        // comportement par défaut => https\n        // sinon, il est fixé par l'option 'ssl' (false => http)\n        var _protocol;\n        if (DefaultUrlService.ssl === false) {\n            _protocol = \"http://\";\n        } else {\n            _protocol = \"https://\";\n        }\n\n        return _protocol + HOSTNAME.concat(\"/\", key, path);\n    },\n\n    /**\n     * Elevation web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns elevation service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"elevation-json\", \"elevation-xml\", \"profil-json\" or \"profil-xml\").\n     */\n    Alti : {\n        _key : {\n            // rest\n            \"elevation-json\" : \"/alti/rest/elevation.json\",\n            \"elevation-xml\" : \"/alti/rest/elevation.xml\",\n            \"profil-json\" : \"/alti/rest/elevationLine.json\",\n            \"profil-xml\" : \"/alti/rest/elevationLine.xml\",\n            // other\n            wps : \"/alti/wps\"\n        },\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return {\n                // rest\n                \"elevation-json\" : DefaultUrlService.url(key, this._key[\"elevation-json\"]),\n                \"elevation-xml\" : DefaultUrlService.url(key, this._key[\"elevation-xml\"]),\n                \"profil-json\" : DefaultUrlService.url(key, this._key[\"profil-json\"]),\n                \"profil-xml\" : DefaultUrlService.url(key, this._key[\"profil-xml\"]),\n                // other\n                wps : DefaultUrlService.url(key, this._key[\"wps\"])\n            };\n        }\n    },\n    /**\n     * IsoCurve web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns isocurve service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"iso-json\" or \"iso-xml\").\n     */\n    ProcessIsoCurve : {\n        _key : \"/geoportail/isochrone/rest/1.0.0/isochrone\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    },\n    /**\n     * Autocompletion web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns autocomplete service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    AutoComplete : {\n        _key : \"/ols/apis/completion\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    },\n    /**\n     * Reverse geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns reverse geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    ReverseGeocode : {\n        _key : \"/geoportail/ols\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    },\n    /**\n     * Autoconfiguration web service access\n     *\n     * @member {Object}\n     * @property {Function} url ([key1,...]) - Returns autoconfiguration service default urls with geoportal access key (s) given as a String array parameter. The result is a javascript object with different urls given the access mode (\"apiKey\", \"apiKeys\" or \"aggregate\").\n     */\n    AutoConf : {\n        _key : {\n            apiKey : \"/autoconf\",\n            apiKeys : \"/autoconf?keys=%KEYS%\",\n            aggregate : \"/autoconf/id/\"\n        },\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            var keys = \"\";\n            if (Array.isArray(key) && key.length > 0) {\n                keys = key[0];\n                for (var i = 1; i < key.length; i++) {\n                    keys += \",\" + key[i];\n                }\n            }\n            return {\n                apiKey : DefaultUrlService.url(key, this._key[\"apiKey\"]), // une seule clé\n                apiKeys : DefaultUrlService.url(key[0], this._key[\"apiKeys\"]).replace(\"%KEYS%\", keys), // autoconf de plusieurs clés\n                aggregate : DefaultUrlService.url(key, this._key[\"aggregate\"])\n            };\n        }\n    },\n    /**\n     * Geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    Geocode : {\n        _key : \"/geoportail/ols\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    },\n    /**\n     * Routing web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns routing service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols.\n     */\n    Route : {\n        _key : \"/geoportail/itineraire/rest/1.0.0/route\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            return DefaultUrlService.url(key, this._key);\n        }\n    }\n};\n\nexport default DefaultUrlService;\n","import Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport _ from \"../Utils/MessagesResources\";\nimport Protocol from \"../Protocols/Protocol\";\nimport ErrorService from \"../Exceptions/ErrorService\";\nimport DefaultUrlService from \"./DefaultUrlService\";\n// package.json (extract version)\nimport Pkg from \"../../package.json\";\n\n/**\n * @classdesc\n * Composant Service\n *\n * @constructor\n * @alias Gp.Services.CommonService\n * @param {Object} options - options communes à tous les services\n *\n * @param {String} options.apiKey - Clef d'accès à la plateforme Géoportail,\n *      nécessaire pour franchir la couche de contrôle des accès pour avoir une réponse du service invoqué.\n *      Plusieurs clefs peuvent être passées dans le cas de l'invocation du service d'autoconfiguration.\n *      Si ce paramètre n'est pas renseigné, alors le paramètre serverUrl doit être renseigné (comprenant alors, si nécessaire la clef API).\n *\n * @param {String} options.serverUrl - URL d'accès au service.\n *      Permet de forcer l'utilisation d'un service équivalent déployé derrière une éventuelle autre URL d'accès.\n *      Si ce paramètre est renseigné alors, le paramètre apiKey est ignoré.\n *\n * @param {String} [options.protocol] - Le protocole à utiliser pour récupérer les informations du service :\n *      peut valoir 'JSONP' ou 'XHR'.\n *      Par défaut, c'est le protocole XHR qui sera utilisé.\n *      Attention, le protocole JSONP n'est pas valide dans un environnement NodeJS (Utilisation du mode XHR).\n *\n * @param {Boolean} [options.ssl] - Indique si l'on souhaite intérroger les services en https.\n *      Ce paramètre ne fonctionne que pour une utilisation hors navigateur (ex. NodeJS).\n *      Sur un navigateur, le protocole est automatiquement extrait de l'url du site...\n *      Par défaut, on utilise le protocole http (ssl=false).\n *\n * @param {String} [options.proxyURL] - Le proxy à utiliser pour pallier au problème de cross-domain dans le cas d'une requête XHR.\n *      Utile si le paramètre 'protocol' vaut 'XHR', il ne sera pas pris en compte si protocol vaut JSONP.\n *\n * @param {String} [options.callbackSuffix] - Suffixe de la fonction de callback à utiliser, dans le cas du protocole JSONP.\n *      Par défaut, la fonction de callback portera un nom du type \"callback\"+ID, où ID est soit un identifiant unique généré à chaque requête,\n *      soit le paramètre callbackSuffix s'il est spécifié. Par exemple, si callbackSuffix=\"_2\", la fonction sera \"callback_2 ()\".\n *      Utile pour utiliser une réponse déjà encapsulée dans une fonction de callback, dont le nom est connu (ex : chargement de l'autoconfiguration en local)\n *      Utile seulement si le paramètre 'protocol' vaut 'JSONP', il ne sera pas pris en compte si protocol vaut 'XHR'.\n *\n * @param {String} [options.httpMethod] - La méthode HTTP\n *      à utiliser dans le cas d'une requête XHR : peut valoir 'GET' ou 'POST'.\n *      Non pris en compte si 'protocol' vaut JSONP qui fonctionne obligatoirement en GET.\n *      Par défaut, c'est la méthode GET qui est utilisée.\n *\n * @param {String} [options.contentType] - Content-Type de la requete\n *      à utiliser dans le cas d'une requête XHR en mode POST.\n *      Non pris en compte si 'protocol' vaut JSONP et/ou la méthode HTTP vaut GET.\n *      Par défaut, c'est la méthode GET qui est utilisée donc on n'utilise pas de Content-Type.\n *\n * @param {Number} [options.timeOut] - Délai d'attente maximal (en ms) de la réponse du service (à partir de l'envoi de la requête).\n *      Par défaut, aucun timeOut n'est pris en compte (timeoutDelay= 0).\n *\n * @param {Boolean} [options.rawResponse] - Indique si l'on souhaite que la réponse du service ne soit pas parsée par l'API avant d'être restituée.\n *      (Cf. paramètre « onSuccess » pour plus de détails).\n *\n * @param {Function} [options.onSuccess] - Fonction appelée lorsque le service répond correctement à la requête\n *      (code HTTP 200, sans message d'erreur).\n *      Cette fonction prend en paramètre la réponse du service,\n *      soit sous la forme d'un Object Javascript formaté par le parseur dédié à la syntaxe du service (comportement par défaut) ;\n *      soit brute au format String non prétraité si le paramètre « rawResponse » a été précisé avec la valeur « true ».\n *\n * @param {Function} [options.onFailure] - Fonction appelée lorsque le service ne répond pas correctement\n *      (code HTTP de retour différent de 200 ou pas de réponse).\n *\n * @param {Function} [options.onBeforeParse] - Fonction appelée avant le parsing de la réponse\n *      Permet de modifier la réponse avant parsing et la fonction doit retourner une String.\n *      Cette fonction prend en paramètre la réponse telle que renvoyée par le service\n *      (cad au format json ou xml).\n *      Pour le JSONP, si le paramètre \"rawResponse\" a été précisé avec la valeur \"true\",\n *      la fonction prend en paramètre un Object JavaScript contenant la réponse XML.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      ssl : false,\n *      proxyURL : null,\n *      callbackName : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      onBeforeParse : function (rawResponse) {}\n *   };\n * @private\n */\nfunction CommonService (options) {\n    if (!(this instanceof CommonService)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\"));\n    }\n\n    this.logger = Logger.getLogger(\"CommonService\");\n    this.logger.trace(\"[Constructeur CommonService (options)]\");\n\n    // #####################\n    // récupération des options par défaut pour les paramètres optionnels\n    // #####################\n\n    /**\n     * Options du service\n     * @type {Object}\n     */\n    this.options = {\n        // protocol : \"JSONP\",\n        protocol : \"XHR\",\n        ssl : true,\n        proxyURL : \"\",\n        // callbackName : \"\",\n        callbackSuffix : null,\n        httpMethod : \"GET\",\n        timeOut : 0,\n        rawResponse : false,\n        scope : this,\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        onSuccess : function (response) {\n            console.log(\"onSuccess - la reponse est la suivante : \", response);\n        },\n        /**\n        * callback par defaut pour les erreurs\n        * @param {Object} error - error\n        * @private\n        */\n        onFailure : function (error) {\n            if (error.status === 200 || !error.status) {\n                console.log(\"onFailure : \", error.message);\n            } else {\n                console.log(\"onFailure - Erreur (\", error.status, \") : \", error.message);\n            }\n        }\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // gestion des clefs API\n    if (!this.options.apiKey && !this.options.serverUrl) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"apiKey\", \"serverUrl\"));\n    }\n\n    // modification de la fonction de callback onSuccess dans le cas où la réponse brute est demandée\n    if (this.options.rawResponse && !this.options.onSuccess) {\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        this.options.onSuccess = function (response) {\n            console.log(\"onSuccess - la réponse brute du service est la suivante : \", response);\n        };\n    }\n\n    // gestion du callback onSuccess\n    var bOnSuccess = !!(this.options.onSuccess !== null && typeof this.options.onSuccess === \"function\");\n    if (!bOnSuccess) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"onSuccess()\"));\n    }\n\n    // gestion de l'url du service par defaut\n    if (!this.options.serverUrl) {\n        // INFO\n        // gestion de l'url du service par defaut pour les services qui ne possèdent qu'une seul url par defaut\n        // les cas particuliers des services avec plusieurs urls (ex. Alti) devront être traité dans la classe du composant\n        // donc si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n        DefaultUrlService.ssl = this.options.ssl;\n        var urlByDefault = DefaultUrlService[this.CLASSNAME].url(this.options.apiKey);\n        if (typeof urlByDefault === \"string\") {\n            this.options.serverUrl = urlByDefault;\n        } else {\n            this.logger.trace(\"URL par defaut à determiner au niveau du composant...\");\n        }\n    }\n\n    // FIXME nettoyage des KVP dans l'url du service\n    // if (this.options.serverUrl) {\n    //     // INFO\n    //     // si l'url est renseignée, il faut la nettoyer de tous ses KVP\n    //     // ex. on ne veut pas de params. 'callback' ou 'output' car ceci declencherait\n    //     // des opérations d'encapsulations des reponses légèrement farfelues ...\n    //     var urlsource = this.options.serverUrl;\n    //     var urlparts = urlsource.split(\"?\");\n    //     this.options.serverUrl = urlparts[0];\n    // }\n\n    // gestion de la methode HTTP\n    this.options.httpMethod = (typeof options.httpMethod === \"string\") ? options.httpMethod.toUpperCase() : \"GET\";\n\n    switch (this.options.httpMethod) {\n        case \"POST\":\n        case \"GET\":\n            break;\n        case \"PUT\":\n        case \"DELETE\":\n        case \"HEAD\":\n        case \"OPTIONS\":\n            throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT\", \"httpMethod\"));\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"httpMethod\"));\n    }\n\n    // gestion du protocole\n    // this.options.protocol = (typeof options.protocol === \"string\" ) ? options.protocol.toUpperCase() : \"JSONP\";\n    this.options.protocol = (typeof options.protocol === \"string\") ? options.protocol.toUpperCase() : \"XHR\";\n\n    switch (this.options.protocol) {\n        case \"JSONP\":\n        case \"XHR\":\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"protocol\"));\n    }\n\n    // on determine l'environnement d'execution : browser ou non ?\n    // et on lance une exception sur l'utilisation du protocole JSONP pour nodeJS...\n    if (typeof window === \"undefined\" && this.options.protocol === \"JSONP\") {\n        throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT_NODEJS\", \"protocol=JSONP (instead use XHR)\"));\n    }\n\n    // le protocole JSONP ne fonctionne qu'en GET.\n    if (this.options.protocol === \"JSONP\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // gestion du cache\n    this.options.nocache = options.nocache || false;\n\n    // #####################\n    // attributs d'instances\n    // #####################\n\n    /**\n     * Format de réponse du service\n     */\n    this.options.outputFormat = null;\n    /**\n     * Requête envoyée au service\n     */\n    this.request = null;\n    /**\n     * Reponse du service\n     */\n    this.response = null;\n}\n\n/**\n * @lends module:CommonService\n */\nCommonService.prototype = {\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : CommonService,\n\n    /**\n     * Appel du service Géoportail\n     */\n    call : function () {\n        /* jshint validthis : true */\n        this.logger.trace(\"CommonService::call ()\");\n\n        var context = this;\n        /** fonction d'execution */\n        function run () {\n            this.logger.trace(\"CommonService::run ()\");\n            this.buildRequest.call(context, onError, onBuildRequest);\n        }\n\n        run.call(context);\n\n        // callback de fin de construction de la requête\n        function onBuildRequest (result) {\n            this.logger.trace(\"CommonService::onBuildRequest : \", result);\n            this.callService.call(context, onError, onCallService);\n        }\n\n        // callback de fin d'appel au service\n        function onCallService (result) {\n            this.logger.trace(\"CommonService::onCallService : \", result);\n            this.analyzeResponse.call(context, onError, onAnalyzeResponse);\n        }\n\n        // callback de fin de lecture de la reponse\n        function onAnalyzeResponse (result) {\n            this.logger.trace(\"CommonService::onAnalyzeResponse : \", result);\n            if (result) {\n                this.options.onSuccess.call(this, result);\n            } else {\n                return onError.call(this, new ErrorService(\"Analyse de la reponse en échec !?\"));\n            }\n        }\n\n        // callback de gestion des erreurs : renvoit un objet de type ErrorService\n        function onError (error) {\n            this.logger.trace(\"CommonService::onError()\");\n            // error : l'objet est du type ErrorService ou Error\n            var e = error;\n            if (!(e instanceof ErrorService)) {\n                e = new ErrorService(error.message);\n            }\n            this.options.onFailure.call(this, e);\n        }\n    },\n\n    /**\n     * Création de la requête\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    buildRequest : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet 'this.request'\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    },\n\n    /**\n     * Appel du service\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    callService : function (error, success) {\n        // INFO\n        // retourne l'objet 'this.response'\n\n        // NOTES\n        //  Pour le mode XHR, on recupère une reponse sous forme d'un json ou xml (#document).\n        //  Pour le mode JSONP, on a toujours un objet JSON mais sous 2 formes :\n        //      - natif\n        //      - XML encapsulé :\n        //          {http : {status:200, error:null},xml :'réponse du service'}\n        //          {http : {status:400, error:'reponse du service'},xml :null}\n        //  En XHR, la reponse est directement sauvegardée dans 'this.response'.\n        //  Par contre, en JSONP, on doit analyser la reponse (status ou non vide),\n        //  et ne renvoyer que le contenu (xml ou l'objet)\n\n        // gestion de la proxification du service\n        var strUrlProxified = null;\n        var strData = this.request;\n\n        // a t on mis en place un proxy ?\n        // la proxyfication est valable uniquement en mode XHR !\n        var bUrlProxified = !!(this.options.proxyURL && this.options.protocol === \"XHR\");\n\n        // rajout de l'option gpbibaccess\n        // INFO : acces au numero de version de package.conf aprés compilation !\n        this.options.serverUrl = Helper.normalyzeUrl(this.options.serverUrl, {\n            \"gp-access-lib\" : Pkg.version\n        }, false);\n\n        // si le proxy est renseigné, on proxifie l'url du service\n        if (bUrlProxified) {\n            if (this.options.httpMethod === \"GET\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, this.request, true);\n                strData = null;\n            }\n\n            if (this.options.httpMethod === \"POST\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, null, true);\n                strData = this.request;\n            }\n        }\n\n        // contexte du composant spécifique !\n        var self = this;\n\n        var options = {\n            url : strUrlProxified || this.options.serverUrl,\n            method : this.options.httpMethod,\n            protocol : this.options.protocol,\n            timeOut : this.options.timeOut || 0,\n            format : this.options.outputFormat, // ceci declenche le parsing de la reponse du service, mais on souhaite toujours une reponse brute (string) !\n            nocache : this.options.nocache || false, // ceci permet d'ajouter un timestamp dans la requête\n            wrap : this.options.protocol !== \"XHR\", // ceci declenche l'encapsulation de la reponse XML du service dans du JSON, mais pas en mode XHR !\n            callbackSuffix : this.options.callbackSuffix,\n            // callbackName : this.options.callbackName || null,\n            data : strData,\n            headers : null, // TODO...\n            content : this.options.contentType || \"application/xml\",\n            scope : this.options.scope || this,\n            // callback de reponse\n            onResponse : function (response) {\n                self.logger.trace(\"callService::onResponse()\");\n\n                // le contenu de la reponse à renvoyer !\n                var content = null;\n\n                // XHR : on renvoie toujours la reponse brute du service (json ou xml)\n                // au parser du composant...\n                if (self.options.protocol === \"XHR\") {\n                    self.logger.trace(\"Response XHR\", response);\n                    content = response; // par defaut, la reponse du service  !\n                }\n\n                // JSONP : on pre-analyse la reponse brute du service (encapsuler ou pas)\n                // avant de l'envoyer au parser du composant...\n                if (self.options.protocol === \"JSONP\") {\n                    self.logger.trace(\"Response JSON\", response);\n                    if (response) {\n                        if (response.http) {\n                            // reponse encapsulée :\n                            // ex. reponse du service en xml\n                            // > {http : {status:200, error:null},xml :'réponse du service'}\n                            if (response.http.status !== 200) {\n                                error.call(self, new ErrorService({\n                                    status : response.http.status,\n                                    message : response.http.error,\n                                    type : ErrorService.TYPE_SRVERR\n                                }));\n                                return;\n                            } else {\n                                content = response.xml; // par defaut !\n                                if (self.options.rawResponse) {\n                                    content = response;\n                                }\n                            }\n                        } else {\n                            // reponse non encapsulée :\n                            // ex. reponse du service en json ou xml\n                            content = response;\n                        }\n                    } else {\n                        error.call(self, new ErrorService(\"Le contenu de la reponse est vide !?\"));\n                        return;\n                    }\n                }\n\n                // si on souhaite parser la reponse du service\n                if (typeof self.options.onBeforeParse === \"function\") {\n                    var newResponse = self.options.onBeforeParse(content);\n                    if (typeof newResponse === \"string\") {\n                        // la reponse parsée par l'utilisateur est retournée sous\n                        // forme de string !\n                        content = newResponse;\n                    }\n                }\n                // sauvegarde de la reponse dans l'objet parent (CommonService)\n                self.response = content;\n                // on renvoie la reponse...\n                success.call(self, content);\n            },\n            // callback des erreurs\n            onFailure : function (e) {\n                self.logger.trace(\"callService::onFailure()\");\n                // on est forcement sur une erreur levée par un service !\n                e.type = ErrorService.TYPE_SRVERR;\n                error.call(self, new ErrorService(e));\n            },\n            // callback de timeOut\n            onTimeOut : function () {\n                self.logger.trace(\"callService::onTimeOut()\");\n                error.call(self, new ErrorService(\"TimeOut!\"));\n            }\n        };\n\n        Protocol.send(options);\n    },\n\n    /**\n     * Analyse de la réponse\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    analyzeResponse : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet spécifique au type de composant (json)\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    }\n\n};\n\nexport default CommonService;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequest\n * @param {Object} options - options\n * @param {Object}   options.positions - tableau de coordonnées lon/lat\n * @param {String}   options.delimiter - \"|\"\n * @param {Boolean}  options.indent - false|true\n * @param {String}   options.crs - \"CRS:84\"\n * @param {String}   options.format - \"JSON|XML\"\n *\n * @private\n */\nfunction AltiRequest (options) {\n    if (!(this instanceof AltiRequest)) {\n        throw new TypeError(\"AltiRequest constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiRequest ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    /**\n     * Liste des coordonnées.\n     * @example\n     * var c = [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}];\n     */\n    this.positions = this.options.positions || [];\n\n    /**\n     * Caractère de séparation.\n     * Par defaut, \"|\".\n     */\n    this.delimiter = this.options.delimiter || \"|\";\n\n    /**\n     * Indentation.\n     * true|false\n     */\n    this.indent = this.options.indent || false;\n\n    /**\n     * Projection.\n     * Par defaut, CRS:84.\n     */\n    this.crs = this.options.crs || \"CRS:84\";\n\n    /**\n     * format de sortie.\n     * Par defaut, \"json\".\n     */\n    this.format = this.options.format || \"json\";\n}\n\n/**\n * CLASSNAME\n */\nAltiRequest.CLASSNAME = \"AltiRequest\";\n\nAltiRequest.prototype = {\n\n    /**\n     * @lends module:AltiRequest#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequest,\n\n    /**\n     * Ajout d\"une liste de coordonnées.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.setPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    setPositions : function (lstPosition) {\n        var positions = [];\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                positions.push(o);\n            }\n        }\n\n        this.positions = positions;\n    },\n\n    /**\n     * Liste des coordonnées.\n     *\n     * @param {Int} pos - position\n     * @returns {positions}\n     * @example\n     * obj.getPositions ();  // [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}]\n     * obj.getPositions (0); // [{lon : \"\", lat : \"\"}]\n     */\n    getPositions : function (pos) {\n        // FIXME test if not a number !?\n        if (!pos) {\n            return this.positions;\n        }\n\n        var index = this.positions.length - 1;\n        if (pos > index || pos < index) {\n            this.logger.warn(\"index out of range !\");\n            return this.positions;\n        }\n\n        return this.positions[pos];\n    },\n\n    /**\n     * Ajout d\"une liste de coordonnées.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.addPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    addPositions : function (lstPosition) {\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                this.positions.push(lstPosition[i]);\n            }\n        }\n    },\n\n    /**\n     * Retourne la liste des longitudes avec un caractère de séparation.\n     *\n     * @returns {String} - une liste de longitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLon : function () {\n        var lstLon = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLon.push(this.positions[i].lon);\n        }\n        this.logger.trace(lstLon);\n        return lstLon.join(this.delimiter);\n    },\n\n    /**\n     * Retourne la liste des lattitudes avec un caractère de séparation.\n     *\n     * @returns {String} - une liste de lattitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLat : function () {\n        var lstLat = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLat.push(this.positions[i].lat);\n        }\n        this.logger.trace(lstLat);\n        return lstLat.join(this.delimiter);\n    }\n\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiRequest.prototype.getData = function () {\n    var map = [];\n\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    map.push({\n        k : \"delimiter\",\n        v : this.delimiter\n    });\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requêtes de type POINT du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiElevationRequest\n * @param {Object} options - options\n * @param {Boolean}  options.zonly - false|true\n *\n * @private\n */\nfunction AltiElevationRequest (options) {\n    if (!(this instanceof AltiElevationRequest)) {\n        throw new TypeError(\"AltiElevationRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiElevationRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiElevationRequest ()]\");\n\n    /**\n     * Z uniquement.\n     * true|false\n     */\n    this.zonly = this.options.zonly || false; // test des options héritées !\n}\n\n/**\n * @lends module:AltiElevationRequest#\n */\n\nAltiElevationRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"zonly\"\n     */\n    zonly : {\n        /** getter */\n        get : function () {\n            return this._zonly;\n        },\n        /** setter */\n        set : function (z) {\n            this._zonly = z;\n        }\n    }\n\n});\n\n/**\n * Constructeur (alias)\n */\nAltiElevationRequest.prototype.constructor = AltiElevationRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array}\n */\nAltiElevationRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"zonly\",\n        v : this.zonly\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiElevationRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes de type PROFIL du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiProfilRequest\n * @param {Object}   options - options\n * @param {String}   options.sampling - 3\n *\n * @private\n */\nfunction AltiProfilRequest (options) {\n    if (!(this instanceof AltiProfilRequest)) {\n        throw new TypeError(\"AltiProfilRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiProfilRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiProfilRequest ()]\");\n\n    /**\n     * Sampling\n     * Par defaut, 3\n     */\n    this.sampling = this.options.sampling || 3; // test des options héritées !\n}\n\n/**\n * @lends module:AltiProfilRequest#\n */\n\nAltiProfilRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"sampling\"\n     */\n    sampling : {\n        /** getter */\n        get : function () {\n            return this._sampling;\n        },\n        /** setter */\n        set : function (value) {\n            this._sampling = value;\n        }\n    }\n});\n\n/**\n * Constructeur (alias)\n */\nAltiProfilRequest.prototype.constructor = AltiProfilRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiProfilRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"sampling\",\n        v : this.sampling\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiProfilRequest;\n","/* jshint multistr : true */\n\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes de type REST sur le service altimetrique.\n *\n * @todo Le service Alti n'implemente pas le POST !?\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequestREST\n * @param {Object} options - options\n * @param {Object}   options.param.positions - tableau de coordonnées lon/lat\n * @param {String}   options.param.delimiter - '|'\n * @param {Boolean}  options.param.indent - false|true\n * @param {String}   options.param.crs - 'CRS:84'\n * @param {String}   options.param.sampling - 3\n * @param {Boolean}  options.param.zonly - false|true\n * @param {String}   options.param.format - \"JSON|XML\"\n * @param {String}   options.type - \"Profil|Elevation\"\n * @param {String}   options.method - GET|POST\n *\n * @example\n *      var options = {\n *           type : 'Profil', // Elevation\n *           method : 'GET',  // par defaut\n *           param : {\n *               positions : [\n *                   {lon:'1.11', lat:'1.11'},\n *                   {lon:'1.10', lat:'1.10'},\n *                   {lon:'1.12', lat:'1.12'}\n *               ],\n *               delimiter : \";\",         // par defaut\n *               indent    : true,        // par defaut\n *               crs       : 'EPSG:4326', // par defaut\n *               format    : 'json',      // par defaut (only to POST)\n *               sampling  : 3 ,          // par defaut (only use by Profil)\n *               zonly     : false        // par defaut (only use by Elevation)\n *           }\n *      };\n *\n *      var result;\n *      try {\n *          var obj = new AltiRequestREST (options);\n *          if (! obj.processRequestString ()) {\n *              throw new Error(\"Request empty !?\")\n *          }\n *          result = obj.requestString;\n *      } catch (e) {\n *          // exceptions...\n *      }\n * @private\n */\nfunction AltiRequestREST (options) {\n    this.logger = Logger.getLogger(\"AltiRequestREST\");\n    this.logger.trace(\"[Constructeur AltiRequestREST ()]\");\n\n    if (!(this instanceof AltiRequestREST)) {\n        throw new TypeError(\"AltiRequestREST constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    // existance des options\n    if (!this.options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    // type de requete : Altitude ou Profil\n    // (param. à determiner en fonction des parametres d'entrée)\n    if (!this.options.type) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n    }\n\n    // construction du modele de requête\n    // (test du type d'objet candidat)\n    this.DataObject = null;\n    switch (this.options.type) {\n        case \"Elevation\":\n            this.DataObject = new AltiElevationRequest(this.options.param);\n            break;\n        case \"Profil\":\n            this.DataObject = new AltiProfilRequest(this.options.param);\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n    }\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nAltiRequestREST.prototype = {\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequestREST,\n\n    /**\n     * Template de la requête.\n     */\n    template : {\n        get : {\n            // FIXME on retire le param 'delimiter' : &delimiter='__DELIMITER__'\n            value : \"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'\",\n            input : {\n                point : \"&zonly=__ZONLY__\",\n                profil : \"&sampling=__SAMPLING__\"\n            }\n        },\n        post : {\n            // FIXME on retire le param 'delimiter' : delimiter='__DELIMITER__'\\n\\\n            value : \"lon=__LON__\\n\" +\n                \"lat=__LAT__\\n\" +\n                \"indent=__INDENT__\\n\" +\n                \"crs='__CRS__'\\n\",\n            input : {\n                point : \"zonly=__ZONLY__\",\n                profil : \"sampling=__SAMPLING__\"\n            }\n        }\n    },\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out : lon=0.2367,2.1570&lat=48.0551,46.6077&delimiter=,&indent=true&zonly=true&crs='CRS:84'\n     * // POST out : Not yet supported method POST !\n     * @returns {String}\n     */\n    processRequestString : function () {\n        this.logger.trace(\"AltiRequestREST::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        }\n\n        template = template.replace(/__LON__/g, this.DataObject.getLon());\n        template = template.replace(/__LAT__/g, this.DataObject.getLat());\n        // FIXME on retire le param 'delimiter'\n        // template = template.replace(/__DELIMITER__/g, this.DataObject.delimiter);\n        template = template.replace(/__INDENT__/g, this.DataObject.indent);\n        template = template.replace(/__CRS__/g, this.DataObject.crs);\n\n        // ajout +\n        template = template + this.__addDataInputs();\n        this.logger.trace(\"traduction tmpl\", template);\n\n        // sauvegarde\n        this.requestString = template;\n\n        return this.requestString;\n    },\n\n    /**\n     * Ajout de parametres spécifiques (ex. zonly)\n     *\n     * @returns {String}\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"AltiRequestREST::addDataInput ()\");\n\n        var myTemplate;\n        if (this.method === \"POST\") {\n            myTemplate = this.template.post;\n        } else if (this.method === \"GET\") {\n            myTemplate = this.template.get;\n        } else {\n            throw new Error(\"No other HTTP method supported by the service !\");\n        }\n\n        var tmpl = null;\n        if (this.DataObject.CLASSNAME === \"AltiElevationRequest\") {\n            tmpl = myTemplate.input.point;\n            return tmpl.replace(/__ZONLY__/g, this.DataObject.zonly);\n        } else if (this.DataObject.CLASSNAME === \"AltiProfilRequest\") {\n            tmpl = myTemplate.input.profil;\n            return tmpl.replace(/__SAMPLING__/g, this.DataObject.sampling);\n        } else {\n            throw new Error(\"No other object supported than elevation or profil !?\");\n        }\n    }\n};\n\nexport default AltiRequestREST;\n","import Logger from \"../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Standard WPS\n *\n * @constructor\n * @alias Gp.Formats.WPS\n * @param {Object} options - options\n * @param {Object}   options.data - objet\n * @param {String}   options.method - POST|GET\n * @param {String}   options.param.service - \"WPS\"\n * @param {String}   options.param.version - \"1.0.0\"\n * @param {String}   options.param.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n * @param {String}   options.param.rawdataoutput - \"result\"\n * @param {String}   options.param.request - \"Execute\"\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n * @private\n */\nfunction WPS (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur WPS()]\");\n\n    if (!(this instanceof WPS)) {\n        throw new TypeError(\"WPS constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    /**\n     * Objet DATA\n     */\n    this.DataObject = this.options.data;\n\n    if (!this.DataObject) {\n        throw new TypeError(\"This data object is not defined !\");\n    }\n\n    /**\n     * param service.\n     * Par defaut, \"WPS\".\n     */\n    this.paramservice = this.options.param.service || \"WPS\";\n\n    /**\n     * param version.\n     * Par defaut, \"1.0.0\".\n     */\n    this.paramversion = this.options.param.version || \"1.0.0\";\n\n    /**\n     * param identifier\n     * Par defaut, \"gs:WPS\"\n     */\n    this.paramidentifier = this.options.param.identifier || \"gs:WPS\";\n\n    /**\n     * param rawdataoutput\n     * Par defaut, \"result\".\n     */\n    this.paramrawdataoutput = this.options.param.rawdataoutput || \"result\";\n\n    /**\n     * param request\n     * Par defaut, \"Execute\".\n     */\n    this.paramrequest = this.options.param.request || \"Execute\";\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nWPS.prototype = {\n\n    /**\n     * @lends module:WPS#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : WPS,\n\n    /**\n     * Template de la requête.\n     */\n    template : {\n        get : {\n            value : \"service=__SERVICE__\" +\n                \"&version=__VERSION__\" +\n                \"&rawdataoutput=__RAWDATAOUTPUT__\" +\n                \"&identifier=__IDENTIFIER__\" +\n                \"&request=__REQUEST__\" +\n                \"&datainputs=<!-- __DATAINPUTS__ -->\",\n\n            input : \"__KEY__=__DATA__\"\n\n        },\n        post : {\n\n            value : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\" +\n                \"<wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\" \" +\n                \"__NAMESPACE__ __SCHEMALOCATION__>\" +\n                \"<ows:Identifier>__IDENTIFIER__</ows:Identifier>\" +\n                \"<wps:DataInputs>\" +\n                \"<!-- __DATAINPUTS__ -->\" +\n                \"</wps:DataInputs>\" +\n                \"<wps:ResponseForm>\" +\n                \"<wps:RawDataOutput>\" +\n                \"<ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\" +\n                \"</wps:RawDataOutput>\" +\n                \"</wps:ResponseForm>\" +\n                \"</wps:__REQUEST__>\",\n\n            input : \"<wps:Input>\" +\n                \"<ows:Identifier>__KEY__</ows:Identifier>\" +\n                \"<wps:Data>\" +\n                \"<wps:LiteralData>__DATA__</wps:LiteralData>\" +\n                \"</wps:Data>\" +\n                \"</wps:Input>\"\n        }\n    },\n\n    /**\n     * Namespace par defaut de la requete POST.\n     *\n     * @returns {String} namespace\n     */\n    namespaceByDefault : function () {\n        var ns = [\n            \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\",\n            \"xmlns=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:wfs=\\\"http://www.opengis.net/wfs\\\"\",\n            \"xmlns:wps=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:ows=\\\"http://www.opengis.net/ows/1.1\\\"\",\n            \"xmlns:gml=\\\"http://www.opengis.net/gml\\\"\",\n            \"xmlns:ogc=\\\"http://www.opengis.net/ogc\\\"\",\n            \"xmlns:wcs=\\\"http://www.opengis.net/wcs/1.1.1\\\"\",\n            \"xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\"\n        ];\n\n        return ns.join(\" \");\n    },\n\n    /**\n     * Schemalocation par defaut.\n     *\n     * @returns {String} schemaLocation\n     */\n    schemaLocationByDefault : function () {\n        return \"xsi:schemaLocation=\\\"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd\\\"\";\n    },\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out :\n     * //  service=__SERVICE__\n     * //  &version=__VERSION__\n     * //  &rawdataoutput=__RAWDATAOUTPUT__\n     * //  &identifier=__IDENTIFIER__\n     * //  &request=__REQUEST__\n     * //  &datainputs=\"__DATAINPUTS__\"\n     * //  avec __DATAINPUTS__ = __KEY__=__DATA__;...\n     *\n     * // POST out :\n     * //      <?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\n     * //      <wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\"\n     * //         __NAMESPACE__ __SCHEMALOCATION__>\n     * //          <ows:Identifier>__IDENTIFIER__</ows:Identifier>\n     * //          <wps:DataInputs>\n     * //              <!-- __DATAINPUTS__ -->\n     * //          </wps:DataInputs>\n     * //          <wps:ResponseForm>\n     * //              <wps:RawDataOutput>\n     * //              <ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\n     * //              </wps:RawDataOutput>\n     * //          </wps:ResponseForm>\n     * //      </wps:__REQUEST__>\",\n     * //      avec __DATAINPUTS__\n     * //             <wps:Input>\n     * //                  <ows:Identifier>__KEY__</ows:Identifier>\n     * //                  <wps:Data>\n     * //                    <wps:LiteralData>__DATA__</wps:LiteralData>\n     * //                  </wps:Data>\n     * //              </wps:Input>\n     *\n     * @returns {Boolean} validation de la construction de la requete\n     */\n    processRequestString : function () {\n        this.logger.trace(\"WPS::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        } else {\n            this.logger.error(\"No other method supported by the service !\");\n            return false;\n        }\n\n        template = template.replace(/__SERVICE__/g, this.paramservice);\n        template = template.replace(/__VERSION__/g, this.paramversion);\n        template = template.replace(/__RAWDATAOUTPUT__/g, this.paramrawdataoutput);\n        template = template.replace(/__IDENTIFIER__/g, this.paramidentifier);\n        template = template.replace(/__REQUEST__/g, this.paramrequest);\n\n        // ajout +\n        if (this.method === \"POST\") {\n            template = template.replace(/__NAMESPACE__/g, this.namespaceByDefault);\n            template = template.replace(/__SCHEMALOCATION__/g, this.schemaLocationByDefault);\n        }\n\n        // ajout des datainputs\n        template = template.replace(/<!-- __DATAINPUTS__ -->/g, this.__addDataInputs());\n\n        if (!template) {\n            this.logger.warn(\"traduction tmpl : empty request !?\");\n            return false;\n        }\n\n        this.requestString = template;\n        this.logger.trace(\"traduction tmpl\", template);\n\n        return true;\n    },\n\n    /**\n     * Ajout des données\n     *\n     * @returns {String} Données concaténées dans une chaine\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"WPS::__addDataInputs ()\");\n\n        // c'est un peu grossier...\n        var tmpl = this.method === \"GET\" ? this.template.get.input : this.template.post.input;\n        var sep = this.method === \"GET\" ? \";\" : \"\";\n\n        var result = \"\";\n        var that = this;\n        var map = this.DataObject.getData();\n        for (var i = 0; i < map.length; i++) {\n            // FIXME closure ?\n            (function (j) {\n                if (sep) {\n                    sep = (j === map.length - 1) ? \"\" : \";\";\n                }\n                result = result.concat(that.__addDataInput(tmpl, map[j].k, map[j].v), sep);\n            })(i);\n        }\n\n        return result;\n    },\n\n    /**\n     * Ajout d'une donnée.\n     *\n     * @param {String} tmpl - template\n     * @param {String} key - clef\n     * @param {String} data - valeur\n     * @returns {String} chaine avec les substitutions clef/valeur\n     */\n    __addDataInput : function (tmpl, key, data) {\n        var tmp = tmpl;\n        tmp = tmp.replace(/__KEY__/g, key);\n        tmp = tmp.replace(/__DATA__/g, data);\n        return tmp;\n    },\n\n    /**\n     * Definir le mode de requête\n     *\n     * @param {String} method - GET|POST\n     */\n    setMethod : function (method) {\n        if (method === \"GET\" || method === \"POST\") {\n            this.method = method;\n        } else {\n            this.logger.warn(\"support only GET and POST method !\");\n        }\n    },\n\n    /**\n     * Retourne le mode de requete (GET|POST).\n     *\n     * @returns {AltiRequest.options.mode|String} methode (GET|POST)\n     */\n    getMethod : function () {\n        return this.method;\n    }\n};\n\nexport default WPS;\n","/**\n * Classe d'interface des requêtes de type WPS sur le service altimetrique.\n * (Factory)\n *\n * @module Gp.Services.Alti.Request.AltiRequestWPS\n * @alias Gp.Services.Alti.Request.AltiRequestWPS\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport WPS from \"../../../Formats/WPS\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\nvar AltiRequestWPS = {\n\n    /**\n     * Interface unique de construction de la requête.\n     *\n     * @method build\n     * @param {Object} options - options\n     * @param {Object}   options.param.positions - tableau de coordonnées lon/lat\n     * @param {String}   options.param.delimiter - '|'\n     * @param {Boolean}  options.param.indent - false|true\n     * @param {String}   options.param.crs - 'CRS:84'\n     * @param {String}   options.param.sampling - 3\n     * @param {Boolean}  options.param.zonly - false|true\n     * @param {String}   options.param.format - \"JSON|XML\" (only to POST)\n     * @param {String}   options.wps.service - \"WPS\"\n     * @param {String}   options.wps.version - \"1.0.0\"\n     * @param {String}   options.wps.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n     * @param {String}   options.wps.rawdataoutput - \"result\"\n     * @param {String}   options.wps.request - \"Execute\"\n     * @param {String}   options.type - \"Profil|Elevation\"\n     * @param {String}   options.method - GET|POST\n     * @example\n     *      var options = {\n     *           type : 'Profil', // Elevation\n     *           method : 'GET',  // par defaut\n     *           param : {\n     *               positions : [\n     *                   {lon:'1.11', lat:'1.11'},\n     *                   {lon:'1.10', lat:'1.10'},\n     *                   {lon:'1.12', lat:'1.12'}\n     *               ],\n     *               delimiter : \";\",         // par defaut\n     *               indent    : true,        // par defaut\n     *               crs       : 'EPSG:4326', // par defaut\n     *               format    : 'json',      // par defaut (only to POST)\n     *               sampling  : 3 ,          // par defaut (only use by Profil)\n     *               zonly     : false,       // par defaut (only use by Elevation)\n     *           },\n     *           wps : {\n     *                 service : 'WPS',         // par defaut\n     *                 version : '1.0.0',       // par defaut\n     *                 identifier : 'gs:WPS',   // par defaut, Elevation = gs:WPSElevation, Profil = gs:WPSLineElevation\n     *                 rawdataoutput : 'result',// par defaut\n     *                 request : 'Execute'      // par defaut\n     *           }\n     *       };\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestWPS\");\n        logger.trace([\"AltiRequestWPS::build()\"]);\n\n        // existance des options\n        if (!options) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n        }\n\n        // type de requete : Altitude ou Profil\n        // (param. à determiner en fonction des parametres d'entrée)\n        if (!options.type) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction du modele de requête\n        // (test du type d'objet candidat)\n        var DataObject = null;\n        switch (options.type) {\n            case \"Elevation\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSElevation\";\n                DataObject = new AltiElevationRequest(options.param);\n                break;\n            case \"Profil\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSLineElevation\";\n                DataObject = new AltiProfilRequest(options.param);\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction de la requête WPS\n        var settings = {\n            data : DataObject,\n            method : options.method,\n            param : options.wps\n        };\n\n        var rqstWPS = new WPS(settings);\n\n        if (!rqstWPS.processRequestString()) {\n            throw new Error(\"Enable to process request !\");\n        }\n\n        return rqstWPS.requestString;\n    }\n};\n\nexport default AltiRequestWPS;\n","/**\n * Creation d'une requête en REST ou WPS\n * (Factory)\n *\n * @module AltiRequestFactory\n * @alias Gp.Services.Alti.Request.AltiRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AltiRequestREST from \"./AltiRequestREST\";\nimport AltiRequestWPS from \"./AltiRequestWPS\";\n\nvar AltiRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      httpMethod : 'GET', // GET|POST\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      scope : this,\n     *      positions : [{lon:, lat:}, {lon:, lat:}],\n     *      outputFormat : 'json' // json|xml\n     *      sampling : 3,\n     *      api : 'REST', // REST|WPS\n     *      zonly : false // false|true\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestFactory\");\n        logger.trace([\"AltiRequestFactory::build()\"]);\n\n        var request = null;\n\n        // on factorise les options par groupe;\n        // - global,\n        // - param, les params pour les data inputs\n        // - wps, les param du service\n        // - callback\n\n        var settings = {\n            // ajout des valeurs par defaut spécifiques au service\n            type : options.sampling ? \"Profil\" : \"Elevation\",\n            method : options.httpMethod,\n            param : {\n                positions : null,\n                delimiter : null, // FIXME par defaut, on ne le met pas en place car ça fait planter la requête !?\n                indent : null, // par defaut\n                crs : null, // par defaut\n                format : null, // (only to POST)\n                sampling : null, // (only use by Profil)\n                zonly : null // (only use by Elevation)\n            }\n        };\n\n        // surcharge des valeurs obligatoires\n        settings.param.positions = options.positions;\n        settings.param.format = options.outputFormat;\n        settings.param.sampling = options.sampling;\n        settings.param.zonly = options.zonly;\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\"); // cast variable to boolean\n        var bOnSuccess = !!(options.onSuccess !== null && typeof options.onSuccess === \"function\");\n\n        var message = null;\n        switch (options.api) {\n            case \"REST\":\n                // FIXME les exceptions ne sont pas 'catchées' sur le constructeur !\n                var myReq = new AltiRequestREST(settings);\n                if (!myReq.processRequestString()) {\n                    message = \"Error in process request (rest) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                request = myReq.requestString;\n                break;\n            case \"WPS\":\n                // ajout des valeurs par defaut spécifiques au service WPS\n                settings.wps = {\n                    service : null, // par defaut\n                    version : null, // par defaut\n                    identifier : null, // par defaut\n                    rawdataoutput : null, // par defaut\n                    request : null // par defaut\n                };\n\n                request = AltiRequestWPS.build(settings);\n                if (!request) {\n                    message = \"Error in process request (wps) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                break;\n            default:\n                message = \"Type of API is not supported by service (REST or WPS) !\";\n                if (bOnError) {\n                    options.onError.call(options.scope, new ErrorService(message));\n                    return;\n                }\n                throw new Error(message);\n        }\n\n        if (bOnSuccess) {\n            options.onSuccess.call(options.scope, request);\n        }\n\n        return request;\n    }\n};\n\nexport default AltiRequestFactory;\n","/* global require */\n\nimport Logger from \"../Utils/LoggerByDefault\";\n// import __xmldom from \"xmldom\";\n\n/**\n * @classdesc\n *\n * Classe permettant d'écrire ou de lire du XML, sous forme de document DOM,\n * éventuellement selon des clés de lecture (readers) ou d'écriture (writers) spécifiques.\n *\n * @constructor\n * @alias Gp.Formats.XML\n *\n * @param {Object} [options] - options du format XML\n *\n * @param {Object} [options.reader] - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n *      utile pour interpréter le XML lorsque sa structure est connue.\n *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n *\n * @param {Object} [options.writers] - writers\n *\n * @param {String} [options.xmlString] - chaîne de caractère contenant du XML à interpréter.\n *\n * @private\n */\nfunction XML (options) {\n    if (!(this instanceof XML)) {\n        throw new TypeError(\"XML constructor cannot be called as a function.\");\n    }\n\n    // FIXME : notion de singleton\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur XML ()]\");\n\n    /**\n     * Chaîne de caractères contenant le texte XML\n     * @type {String}\n     */\n    this.xmlString = null;\n\n    /**\n     * DOM Element correspondant à la structure du XML.\n     * @type {DOMElement}\n     */\n    this.xmlDoc = null;\n\n    /**\n     * Objet contenant des fonctions de lecture des différentes balises XML.\n     * @type {Object}\n     */\n    this.reader = null;\n\n    // traitement des paramètres d'options s'il y en a\n    if (options) {\n        if (options.xmlString && typeof options.xmlString === \"string\") {\n            this.xmlString = options.xmlString;\n            // Si une chaine de caractère a été passée en entrée : on la transforme aussi en XML document\n            this.xmlDoc = __getXMLDOC(options.xmlString);\n        }\n        if (options.reader) {\n            this.setReader(options.reader);\n        }\n    }\n}\n\nXML.prototype = {\n\n    /**\n     * @lends module:XML\n     */\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : XML,\n\n    /**\n     * Méthode permettant de récupérer la chaîne de caractères associée au format XML\n     *\n     * @returns {String} xmlString - la chaîne de caractères correspondant au format XML\n     */\n    getXMLString : function () {\n        return this.xmlString;\n    },\n\n    /**\n     * Méthode permettant d'attribuer une chaîne de caractères au format XML (attribut xmlString).\n     * La méthode va aussi transformer cette chaîne de caractères en document XML,\n     * afin de remplir l'attribut xmlDoc.\n     *\n     * @param {String} xmlString - la chaîne de caractères correspondant au format XML\n     */\n    setXMLString : function (xmlString) {\n        if (xmlString && typeof xmlString === \"string\") {\n            this.xmlString = xmlString;\n            this.xmlDoc = __getXMLDOC(xmlString);\n        }\n    },\n\n    /**\n     * Méthode permettant de récupérer les readers associés au format XML, s'ils ont été définis\n     *\n     * @return {Object} readers - les readers associés au format XML, s'ils existent,\n     *      sous forme d'une collection de fonctions\n     */\n    getReader : function () {\n        return this.reader;\n    },\n\n    /**\n     * Méthode permettant d'attribuer des readers, sous la forme d'un objet de fonctions (node, data),\n     *      lorsqu'ils n'ont pas été définis lors de l'instanciation par exemple (new XML (options)).\n     *\n     * @param {Object} reader - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n     *      utile pour interpréter le XML lorsque sa structure est connue.\n     *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n     */\n    setReader : function (reader) {\n        if (reader && reader.read && typeof reader.read === \"function\") {\n            this.reader = reader;\n        }\n    },\n\n    /**\n     * Méthode permettant de récupérer le document XML associé au format, s'il existe.\n     *\n     * @return {DOMElement} xmlDoc - le document XML (DOM document node) s'il existe\n     */\n    getXMLDoc : function () {\n        return this.xmlDoc;\n    },\n\n    /**\n     * Setter\n     */\n    setXMLDoc : function (doc) {\n        this.xmlDoc = doc;\n    },\n    /**\n     * Méthode initialisant la lecture du XML, à partir d'un XML Document :\n     *      création d'un objet JavaScript contenant les informations du XML,\n     *      sauf dans le cas où il n'existe pas de XML Document à interpréter (retourne un objet vide).\n     *\n     * @return {Object} [parserOutput] - un objet JavaScript contenant les informations du XML :\n     * - soit toutes les informations si aucun reader n'a été spécifié à la création du format\n     * - soit les informations spécifiées dans le reader.\n     */\n    parse : function () {\n        // build xml document from xmlString\n        if (!this.xmlDoc && this.xmlString) {\n            this.xmlDoc = __getXMLDOC(this.xmlString);\n        }\n        if (this.xmlDoc) {\n            var root = __getRootNode(this.xmlDoc);\n            if (root) {\n                var parserOutput;\n                // call reader if exists\n                if (this.reader && this.reader.read) {\n                    parserOutput = this.reader.read(root);\n                } else {\n                    parserOutput = {};\n                    parserOutput[root.nodeName] = __readDefault(root);\n                }\n                return parserOutput;\n            } else {\n                return {};\n            }\n        }\n    }\n\n};\n\n/**\n * Méthode de la classe (privée) permettant de créer un XML Document à partir d'une chaîne de caractères XML,\n *      en utilisant DOMParser () lorsque c'est possible.\n *      For more information, see: https://dvcs.w3.org/hg/innerhtml/raw-file/tip/index.html#the-domparser-interface\n *\n * @private\n * @memberof XML\n * @method __getXMLDOC\n * @param {String} xmlString - xml string to be converted into DOM element\n * @return {DOMElement} - the corresponding XML Document\n */\nfunction __getXMLDOC (xmlString) {\n    if (typeof window === \"undefined\") {\n        // env. nodejs\n        var DOMParser = require(\"xmldom\").DOMParser; // __xmldom.DOMParser;\n        return new DOMParser().parseFromString(xmlString, \"text/xml\");\n    } else {\n        // env. browser\n\n        var parser;\n        var xmlDoc;\n        var errorMsg = \"Erreur lors du parsing de la réponse du service : XML non conforme\";\n\n        if (window.ActiveXObject) {\n            // Internet Explorer < 9\n            xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async = false;\n            xmlDoc.loadXML(xmlString);\n            var parseError = xmlDoc.parseError;\n            if (parseError.errorCode) {\n                if (parseError.line && parseError.linepos) {\n                    errorMsg += \"( ligne \" + parseError.line + \", colonne \" + parseError.linepos;\n                }\n                if (parseError.reason) {\n                    errorMsg += \":  \" + parseError.reason + \")\";\n                }\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else if (window.DOMParser) {\n            // les autres (Chrome, Mozilla, IE >= 9)\n            parser = new window.DOMParser();\n            try {\n                xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n            } catch (e) {\n                // Internet Explorer browser raises exception if xmlString is not valid XML\n                if (e.message === \"SyntaxError\") {\n                    throw new Error(errorMsg);\n                } else {\n                    throw new Error(\"Erreur lors du parsing de la réponse du service : \" + e.message);\n                }\n            }\n            // look for parsing error in case no exception was raised\n            if (xmlDoc.getElementsByTagName(\"parsererror\").length > 0) {\n                var parsererror = xmlDoc.getElementsByTagName(\"parsererror\");\n                for (var i = 0; i < parsererror.length; i++) {\n                    var content = parsererror[i].innerHTML;\n                    // except in case parsererror is just because of huge xml, but parsing is done.\n                    if (content.indexOf(\"Huge input lookup\") === -1) {\n                        errorMsg += \"(\" + content + \")\";\n                        throw new Error(errorMsg);\n                    }\n                }\n            } else if (!xmlDoc.documentElement) { // may happen in chrome browser\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else {\n            // FIXME\n            throw new Error(\"Incompatible DOM Parser pour ce navigateur !\");\n        }\n    }\n}\n\n/**\n * Méthode de la classe (privée) permettant de récupérer le noeud racine du document,\n *      à partir d'un document node (nodeType=9), puis lecture de ce noeud (readNode)\n *\n * @private\n * @memberof XML\n * @method __getRootNode\n * @param {DOMElement} [xmlDoc] - a Document Node\n * @return {DOMElement} root - the document root node\n */\nfunction __getRootNode (xmlDoc) {\n    var root;\n    if (xmlDoc.nodeType === 9) {\n        // INFO : nodeType 9 represents the entire document (the root-node of the DOM tree)\n        root = xmlDoc.documentElement;\n    } else if (xmlDoc.nodeType === 1) {\n        root = xmlDoc;\n    }\n    return root;\n}\n\n/**\n * Méthode de la classe (privée) permettant de lire automatiquement un noeud XML,\n *      lorsqu'aucun reader spécifique n'a été spécifié (parser brut)\n *\n * @private\n * @memberof XML\n * @method readDefault\n * @param {DOMElement} node - a DOM element node\n * @example final data object looks like :\n *          data = {\n *              attributeName: attributeValue,\n *              childName: {\n *                  attributeName: attributeValue,\n *                  attributeName: attributeValue,\n *                  childName: {\n *                      \"textContent\": textContent\n *                  },\n *                  childName: {\n *                      childName: {\n *                          attributeName:attributeValue\n *                      }\n *                  }\n *              }\n *          }\n */\nfunction __readDefault (node) {\n    var data = {};\n\n    // if element node has attributes, set their values to data\n    if (node.attributes.length > 0) {\n        var dataAttributes = __getAttributes(node);\n        data[\"attributes\"] = dataAttributes;\n    }\n\n    // if element node has childNodes, read them and set them to data\n    if (node.hasChildNodes()) {\n        var childData = {};\n        var child;\n        var children = node.childNodes;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 3) { // TEXT_NODE\n                data[\"textContent\"] = child.nodeValue;\n            } else if (child.nodeType === 1) {\n                childData = __readDefault(child);\n\n                if (!data[child.nodeName]) {\n                    // store childData in an object\n                    data[child.nodeName] = childData;\n                } else {\n                    // in case several childNodes has the same name : store them in an array.\n                    // if data[nodeName] already exists but is not an array\n                    if (!Array.isArray(data[child.nodeName])) {\n                        var old = data[child.nodeName];\n                        data[child.nodeName] = [];\n                        data[child.nodeName].push(old);\n                    }\n                    data[child.nodeName].push(childData);\n                }\n            }\n            // TODO : manage other node types (4=CDATA, etc)\n        }\n    }\n\n    return data;\n}\n\n/**\n * Méthode de la classe (privée) permettant de récupérer les attributs d'un noeud élément\n *\n * @private\n * @memberof XML\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\nexport default XML;\n","/**\n * Response object for {@link module:Services~getAltitude Gp.Services.getAltitude ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Alti.Elevation>} elevations - Elevations array.\n *\n * @namespace\n * @alias Gp.Services.AltiResponse\n */\nfunction AltiResponse () {\n    if (!(this instanceof AltiResponse)) {\n        throw new TypeError(\"AltiResponse constructor cannot be called as a function.\");\n    }\n\n    this.elevations = [];\n}\n\nAltiResponse.prototype = {\n\n    constructor : AltiResponse\n\n};\n\nexport default AltiResponse;\n","\n/**\n * Single elevation object returned by underlying web service. Contains at least, one elevation (z). May also contain point coordinates and elevation accuracy if \"zonly\" parameter wasn't set to true.\n *\n * @property {Float} lat - Point latitude. (only if zonly=false)\n * @property {Float} lon - Point longitude. (only if zonly=false)\n * @property {Float} z - Point elevation.\n * @property {Float} acc - Accuracy of elevation for this point. (only if zonly=false)\n *\n * @namespace\n * @alias Gp.Services.Alti.Elevation\n */\nfunction Elevation () {\n    if (!(this instanceof Elevation)) {\n        throw new TypeError(\"Elevation constructor cannot be called as a function.\");\n    }\n\n    this.z = null;\n}\n\nElevation.prototype = {\n\n    constructor : Elevation\n\n};\n\nexport default Elevation;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service Altimétrique du Géoportail\n *      (calcul altimétrique simple ou profil altimétrique d'une courbe),\n *      lorsque le paramètre output = xml,\n *      afin de récupérer les élévations retournées.\n *\n * @module AltiResponseReader\n * @alias Gp.Services.Alti.Formats.AltiResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport AltiResponse from \"../Response/model/AltiResponse\";\nimport Elevation from \"../Response/model/Elevation\";\n\n/**\n *\n * Objet AltiResponseReader\n *\n * @member {Object} AltiResponseReader\n *\n * @property {Object} AltiResponseReader.READERS - Objet contenant des fonctions de lecture, appelées \"readers\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} AltiResponseReader.READERS.elevations -  Lecture d'un noeud \"elevations\" de la réponse XML\n *      du service alti, correspondant logiquement à la racine du document\n *      (contient un ou plusieurs childNodes correspondant chacun à une élévation retournée)\n *\n * @property {Method} AltiResponseReader.READERS.elevation - ecture d'un noeud \"elevation\" de la réponse xml du service alti.\n *      (contient un ou 4 childNode (s) correspondant à l'altitude (z) et éventuellement lat, lon, et acc)\n *\n * @property {Method} AltiResponseReader.READERS.lat - Lecture d'un noeud \"lat\" de la réponse xml du service alti.\n *      (contient une valeur de latitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.lon - Lecture d'un noeud \"lon\" de la réponse xml du service alti.\n *      (contient une valeur de longitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.z - Lecture d'un noeud \"z\" de la réponse xml du service alti.\n *      (contient une valeur d'altitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.acc - Lecture d'un noeud \"acc\" de la réponse xml du service alti.\n *      (contient une valeur de précision, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.exceptionreport - Lecture d'un noeud \"ExceptionReport\" de la réponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.READERS.exception - Lecture d'un noeud \"Exception\" de la réponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.read - Méthode permettant de lancer la lecture d'une réponse XML du service altimétrique,\n *      à l'aide des readers de la classe.\n *\n */\nvar AltiResponseReader = {};\n\nAltiResponseReader.READERS = {\n\n    /**\n     * Lecture d'un noeud \"elevations\" de la réponse XML du service alti, correspondant logiquement à la racine du document\n     *      (contient un ou plusieurs childNodes correspondant chacun à une élévation retournée)\n     *\n     * @param {DOMElement} root - racine de la réponse XML\n     * @static\n     * @memberof AltiResponseReader\n     * @returns {Object} Retourne un objet de type AltiResponse\n     */\n    elevations : function (root) {\n        // INFO : on passe en paramètre l'objet en entrée elevations, vide, à remplir.\n        var altiResponse = new AltiResponse();\n\n        if (root.hasChildNodes()) {\n            var children = root.childNodes;\n            var child;\n            var elevation;\n\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    elevation = AltiResponseReader.READERS[child.nodeName](child);\n                    altiResponse.elevations.push(elevation);\n                }\n            }\n        }\n\n        return altiResponse;\n    },\n\n    /**\n     * Lecture d'un noeud \"elevation\" de la réponse xml du service alti.\n     *      (contient un ou 4 childNode (s) correspondant à l'altitude (z) et éventuellement lat, lon, et acc)\n     *\n     * @param {DOMElement} node - noeud elevation à lire pour récupérer les informations de l'élévation retournée (z [, lon, lat, acc])\n     * @return {Array} elevationResponse - format de la réponse en sortie, instance de AltiResponse\n     * @static\n     * @memberof AltiResponseReader\n     */\n    elevation : function (node) {\n        var elevation = new Elevation();\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    // INFO : on passe en paramètre l'objet en entrée elevation, vide, à remplir.\n                    AltiResponseReader.READERS[child.nodeName](child, elevation);\n                }\n            }\n        }\n        return elevation;\n    },\n\n    /**\n     * Lecture d'un noeud \"lat\" de la réponse xml du service alti.\n     *      (contient une valeur de latitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la latitude\n     * @param {Object} elevation - objet dans lequel stocker la latitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lat : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lat = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : latitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"lon\" de la réponse xml du service alti.\n     *      (contient une valeur de longitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la longitude\n     * @param {Object} elevation - objet dans lequel stocker la longitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lon : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lon = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : longitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"z\" de la réponse xml du service alti.\n     *      (contient une valeur d'altitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'altitude\n     * @param {Object} elevation - objet dans lequel stocker l'altitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    z : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            if (elevation) {\n                elevation.z = parseFloat(textNode.nodeValue);\n            } else {\n                elevation = new Elevation();\n                elevation.z = parseFloat(textNode.nodeValue);\n                return elevation;\n            }\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : altitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"acc\" de la réponse xml du service alti.\n     *      (contient une valeur de précision, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la précision\n     * @param {Object} elevation - objet dans lequel stocker la précision retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    acc : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.acc = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"ExceptionReport\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exceptionreport : function (node) {\n        var response = {};\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = AltiResponseReader.READERS.exception(child);\n                }\n            }\n        }\n\n        return response;\n    },\n\n    /**\n     * Lecture d'un noeud \"Exception\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception, avec deux attributs :\n     *      {String} exceptionReport.exceptionCode - qui contient l'identifiant du code de l'exception\n     *      {String} exceptionReport.exception - qui contient le message de l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    },\n\n    /**\n     * Lecture d'un noeud \"Error\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} error - objet contenant l'exception\n     * @static\n     */\n    error : function (node) {\n        var response = {\n            error : {}\n        };\n        // get error code and description\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                var textNode;\n                // get error code\n                if (child.nodeType === 1 && child.nodeName === \"code\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.code = textNode.nodeValue;\n                    }\n                }\n                // get error description\n                if (child.nodeType === 1 && child.nodeName === \"description\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.description = textNode.nodeValue;\n                    }\n                }\n            }\n        }\n        return response;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service altimétrique,\n *      à l'aide des readers de la classe.\n *\n * @method AltiResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @static\n * @memberof AltiResponseReader\n */\nAltiResponseReader.read = function (root) {\n    if (root.nodeName === \"elevations\") {\n        var altiResponse = AltiResponseReader.READERS.elevations(root);\n        return altiResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = AltiResponseReader.READERS.exceptionreport(root);\n        return exceptionReport;\n    } else if (root.nodeName === \"error\") {\n        var error = AltiResponseReader.READERS.error(root);\n        return error;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\nexport default AltiResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AltiResponseFactory\n * @private\n * @alias Gp.Services.Alti.Response.AltiResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport AltiResponseReader from \"../Formats/AltiResponseReader\";\nimport AltiResponse from \"./model/AltiResponse\";\nimport Elevation from \"./model/Elevation\";\n\nvar AltiResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiResponseFactory\");\n        logger.trace([\"AltiResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                switch (options.outputFormat) {\n                    case \"xml\":\n                        logger.trace(\"analyze response : xml\");\n\n                        try {\n                            var p = new XML({\n                                reader : AltiResponseReader\n                            });\n\n                            if (typeof options.response === \"string\") {\n                                p.setXMLString(options.response);\n                            } else {\n                                p.setXMLDoc(options.response);\n                            }\n\n                            data = p.parse();\n\n                            if (!data) {\n                                throw new Error(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\"));\n                            }\n                        } catch (e) {\n                            var message = e.message;\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", message),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        break;\n\n                    case \"json\":\n                        logger.trace(\"analyze response : json\");\n                        logger.trace(\"analyze response : \", typeof options.response);\n\n                        var JSONResponse = null;\n                        if (typeof options.response === \"string\") {\n                            JSONResponse = JSON.parse(options.response);\n                        } else {\n                            JSONResponse = options.response;\n                        }\n\n                        // le service renvoie t il une erreur ?\n                        if (JSONResponse && JSONResponse.error) {\n                            // ex. {\"error\": {\"code\": \"BAD_PARAMETER\",\"description\": \"The values () cannot be parsed as a valid longitude (double value such as -180 < lat < 180).\"}}\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        // analyse de la reponse\n                        if (JSONResponse) {\n                            var elevations = JSONResponse.elevations;\n                            var altiResponse = new AltiResponse();\n                            var elevation;\n                            if (Array.isArray(elevations) && elevations.length) {\n                                for (var i = 0; i < elevations.length; i++) {\n                                    elevation = new Elevation();\n\n                                    if (typeof elevations[i] === \"object\") {\n                                        // elevations[i] est un objet elevation\n                                        if (elevations[i].lon) {\n                                            elevation.lon = elevations[i].lon;\n                                        }\n                                        if (elevations[i].lat) {\n                                            elevation.lat = elevations[i].lat;\n                                        }\n                                        if (elevations[i].z) {\n                                            elevation.z = elevations[i].z;\n                                        }\n                                        if (elevations[i].acc) {\n                                            elevation.acc = elevations[i].acc;\n                                        }\n                                    } else if (typeof elevations[i] === \"number\") {\n                                        // elevations[i] est un nombre, dans le cas de zonly=true notamment\n                                        elevation.z = elevations[i];\n                                    }\n\n                                    if (Array.isArray(altiResponse.elevations)) {\n                                        altiResponse.elevations.push(elevation);\n                                    }\n                                }\n                            }\n                            data = altiResponse;\n                        }\n\n                        if (!data) {\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                                type : ErrorService.TYPE_UNKERR,\n                                status : -1\n                            }));\n                            return;\n                        }\n                        break;\n\n                    default:\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_2\"),\n                            type : ErrorService.TYPE_UNKERR,\n                            status : -1\n                        }));\n                        return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                } else if (data.error) {\n                    var errorMess = data.error.description;\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", errorMess),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AltiResponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport AltiRequestFactory from \"./Request/AltiRequestFactory\";\nimport AltiResponseFactory from \"./Response/AltiResponseFactory\";\n\n/**\n * @classdesc\n *\n * Appel du service d'altimétrie du Géoportail\n *\n * @todo gestion du parma. output et callback\n * @todo outputFormat (REST) et format (WPS)\n * @todo La reponse JSON peut encapsuler un XML !\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Alti\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {Array.<Object>} options.positions - Tableau ({lon:float,lat:float}) contenant les coordonnées des points (CRS:84)\n *      dont on veut connaître les altitudes (ou à partir desquelles on va calculer le profil).\n *      Chaque élément du tableau est un objet JavaScript avec deux attributs : lon et lat, qui sont des flottants.\n *      Minimum 2 éléments si on souhaite calculer un profil altimétrique (ElevationLine).\n *      Maximum 50 éléments.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service alti : 'xml' ou 'json'.\n *      Ce paramètre déterminera l'extension '.xml' ou '.json' du service dans le cas de l'API REST,\n *      ou la valeur du paramètre 'format' dans le cas de la norme WPS.\n *      Nécessaire si serverUrl est renseigné, et qu'on souhaite passer par l'API REST,\n *      pour connaître le format dans lequel sera fournie la réponse (pour son traitement).\n *      Non nécessaire pour la norme WPS. Par défaut, ce paramètre vaut 'json'.\n *\n * @param {Number} [options.sampling] - Nombre de points à utiliser pour déterminer le tracé d'un profil altimétrique, compris entre 2 et 5000.\n *      A spécifier lorsqu'on souhaite accéder à cette fonctionnalité.\n *      Dans ce cas, les points fournis en entrée (au minimum de deux) servent à déterminer l'axe planimétrique\n *      le long duquel le profil doit être calculé.\n *      Si le paramètre sampling n'est pas spécifié ou moins de deux points sont fournis,\n *      c'est le service Elevation qui sera interrogé (altitudes simples calculées pour les points fournis).\n *      Une valeur de sampling strictement inférieure à 2 déclenchera un échantillonnage avec la valeur par défaut du service (3 points).\n *\n * @param {String} [options.api] - Manière d'accéder au service : 'REST' (via l'API REST) ou 'WPS' (via la norme WPS).\n *      Par défaut, on utilise l'API REST.\n *\n * @param {Boolean} [options.zonly] - Permet de ne récupérer que les altitudes en sortie s'il vaut 'true'.\n *      Vaut 'false' par défaut.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      positions : [{lon:, lat:}, {lon:, lat:}],\n *      outputFormat : 'json' // json|xml\n *      sampling : 3,\n *      api : 'REST', // REST|WPS\n *      zonly : false // false|true\n *   };\n *\n * @private\n */\nfunction Alti (options) {\n    if (!(this instanceof Alti)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Alti\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Alti\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Alti\");\n    this.logger.trace(\"[Constructeur Alti (options)]\");\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    if (!options.positions) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"positions\"));\n    }\n\n    if (options.positions.length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"positions\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.positions = options.positions;\n\n    // format de réponse du service : \"json\" ou \"xml\" (valeur par défaut), en minuscule !\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"xml\";\n\n    // sampling\n    this.options.sampling = options.sampling || null;\n\n    // type d'api utilisé pour requeter le service, en majuscule !\n    this.options.api = (typeof options.api === \"string\") ? options.api.toUpperCase() : \"REST\";\n\n    // l'api ne peut être interrogée qu'en GET.\n    if (this.options.api === \"REST\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // param. zonly\n    this.options.zonly = options.zonly || false;\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    // en fonction du type d'api, REST ou WPS, du format de reponse demandé (outputFormat)\n    // ainsi que sur le type de service (profil ou elevation)\n    if (!this.options.serverUrl) {\n        var lstUrlByDefault = DefaultUrlService.Alti.url(this.options.apiKey);\n        var urlFound = null;\n        switch (this.options.api) {\n            case \"WPS\":\n                urlFound = lstUrlByDefault.wps;\n                break;\n            case \"REST\":\n                var key = (options.sampling ? \"profil\" : \"elevation\") + \"-\" + this.options.outputFormat;\n                urlFound = lstUrlByDefault[key];\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"api\"));\n        }\n\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Server URL by default : \" + this.options.serverUrl);\n    }\n\n    // gestion du type de service\n    // si l'extension de l'url est .json ou .xml, on surcharge le format de sortie (outputFormat)\n    var idx = this.options.serverUrl.lastIndexOf(\".\");\n    if (idx !== -1) {\n        var extension = this.options.serverUrl.substring(idx + 1);\n        if (extension && extension.length < 5) { // FIXME extension de moins de 4 car. ...\n            this.logger.trace(\"Server Extension URL : \" + extension);\n            switch (extension.toLowerCase()) {\n                case \"json\":\n                case \"xml\":\n                    this.options.outputFormat = extension.toLowerCase();\n                    break;\n                default:\n                    throw new Error(\"type of service : unknown or unsupported (json or xml) !\");\n            }\n        }\n    }\n}\n\n/**\n * @lends module:Alti#\n */\nAlti.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nAlti.prototype.constructor = Alti;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.buildRequest = function (error, success) {\n    // utilisation en mode callback\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // callback\n        onSuccess : function (result) {\n            // sauvegarde de la requete !\n            this.request = result;\n            success.call(this, this.request);\n        },\n        onError : error,\n        scope : this,\n        // spécifique au service :\n        positions : this.options.positions,\n        outputFormat : this.options.outputFormat,\n        sampling : this.options.sampling,\n        api : this.options.api,\n        zonly : this.options.zonly\n    };\n\n    AltiRequestFactory.build(options);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexité du retour du service qui renvoie soit\n    //  - une 'string' qui contient du XML ou JSON natif en mode XHR\n    //  - un objet JSON qui est natif ou encapsulé\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        AltiResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Alti;\n","\n/**\n * Response object for {@link module:Services~getConfig Gp.Services.getConfig ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Object} generalOptions - General properties for default map configuration resources.\n * @property {Object} generalOptions.apiKeys - Object that associates apiKey (s) with an array of resources IDs availables with that key.\n * @property {String} generalOptions.title - Underlying web service Title.\n * @property {String} generalOptions.defaultGMLGFIStyle - XSL URL used by default to translate an XML GetFeatureInfo response into an HTML array.\n * @property {String} generalOptions.theme - default theme (FIXME : for what ?)\n * @property {Array.<Float>} generalOptions.wgs84Resolutions - geographical resolutions Array for each [zoom level of the Geoportal platform]{@link http://api.ign.fr/tech-docs-js/webmaster/layers.html#Geoportal_resolutions} from 0 to 21. Expressed in degrees/pixel.\n * @property {Object} layers - Associative array mapping resources availables IDs (keys) with their properties (values given as {@link Gp.Services.Config.Layer}).\n * @property {Object} territories - Associative array mapping french territories IDs (keys) with their properties (values given as {@link Gp.Services.Config.Territory}).\n * @property {Object} tileMatrixSets - Associative Array mapping TileMatrixSets IDs (keys) availables with their properties (values given as {@link Gp.Services.Config.TileMatrixSet}).\n * @property {Object} services - Associative Array mapping Geoportal web services IDs (keys) availables with their properties (values given as {@link Gp.Services.Config.Service}).\n *\n * @namespace\n * @alias Gp.Services.GetConfigResponse\n */\nfunction AutoConfResponse () {\n    if (!(this instanceof AutoConfResponse)) {\n        throw new TypeError(\"AutoConfResponse constructor cannot be called as a function.\");\n    }\n\n    this.generalOptions = {\n        apiKeys : {},\n        title : null,\n        defaultGMLGFIStyle : null,\n        theme : null,\n        wgs84Resolutions : []\n    };\n\n    this.layers = {};\n\n    this.territories = {};\n\n    this.tileMatrixSets = {};\n\n    this.services = {};\n}\n\nAutoConfResponse.prototype = {\n\n    /*\n     * Constructor (alias)\n     */\n    constructor : AutoConfResponse,\n\n    /**\n     * Check if config is loaded for a given key\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Boolean} isConfLoaded - true if config is already loaded, false otherwise\n     */\n    isConfLoaded : function (apiKey) {\n        if (!apiKey) {\n            return;\n        }\n        if (this.generalOptions.apiKeys[apiKey]) {\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Returns an array of Geoportal layers identifiers, corresponding to an API contract key.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Array} apiKeys - Array of geoportal layers identifiers\n     */\n    getLayersId : function (apiKey) {\n        return this.generalOptions.apiKeys[apiKey];\n    },\n\n    /**\n     * Returns an associative array of Geoportal layers configurations, corresponding to an API contract key.\n     * If no key is specified, all layers from configuration are returned.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Object} layers - Object which properties are layers identifiers, and corresponding\n     *      values are instances of <Gp.Services.Config.Layer>.\n     */\n    getLayersConf : function (apiKey) {\n        var layers = {};\n        var layersIdArray = this.getLayersId(apiKey);\n        if (layersIdArray) {\n            for (var i = 0; i < layersIdArray.length; i++) {\n                var lyrId = layersIdArray[i];\n                layers[lyrId] = this.layers[lyrId];\n            }\n        }\n        return layers;\n    },\n\n    /**\n     * Returns a geoportal layer configuration, given its identifier\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @return {Object} layer - Layer configuration : instance of {@link Gp.Services.Config.Layer}\n     */\n    getLayerConf : function (layerId) {\n        if (!this.layers) {\n            return;\n        }\n        return this.layers[layerId];\n    },\n\n    /**\n     * Returns an associative array of Tile Matrix Sets configurations.\n     *\n     * @return {Object} tileMatrixSets - Object which properties are TMS identifiers,\n     *      and corresponding values are instances of {@link Gp.Services.Config.TileMatrixSet}.\n     */\n    getTileMatrixSets : function () {\n        return this.tileMatrixSets;\n    },\n\n    /**\n     * Returns a Tile Matrix Sets configuration, given its identifier.\n     *\n     * @param {String} tmsID - Tile Matrix Set identifier (e.g. : \"PM\")\n     * @return {Object} tileMatrixSet - Tile Matrix Set configuration, instance of {@link Gp.Services.Config.TileMatrixSet}\n     */\n    getTMSConf : function (tmsID) {\n        if (!this.tileMatrixSets) {\n            return;\n        }\n        return this.tileMatrixSets[tmsID];\n    },\n\n    /**\n     * Returns an associative array of territories configurations.\n     *\n     * @return {Object} territories - Object which properties are territory identifiers,\n     *      and corresponding values are instances of {@link Gp.Services.Config.Territory}.\n     */\n    getTerritories : function () {\n        return this.territories;\n    },\n\n    /**\n     * Returns a territory configuration, given its identifier.\n     *\n     * @param {String} territoryID - territory identifier (e.g. \"FXX\")\n     * @return {Object} territory - Territory configuration, instance of {@link Gp.Services.Config.Territory}\n     */\n    getTerritoryConf : function (territoryID) {\n        if (!this.territories) {\n            return;\n        }\n        return this.territories[territoryID];\n    },\n\n    /**\n     * Returns an associative array of services configurations.\n     *\n     * @return {Object} services - Object which properties are services identifiers,\n     *      and corresponding values are instances of {@link Gp.Services.Config.Service}.\n     */\n    getServices : function () {\n        return this.services;\n    },\n\n    /**\n     * Returns a service configuration, given its identifier.\n     *\n     * @param {String} serviceID - service identifier (e.g. \"OGC:WMTS\")\n     * @return {Object} service - service configuration, instance of {@link Gp.Services.Config.Service}\n     */\n    getServiceConf : function (serviceID) {\n        if (!this.services) {\n            return;\n        }\n        return this.services[serviceID];\n    }\n\n};\n\nexport default AutoConfResponse;\n","\n/**\n *\n * Object used to express a geographical (BBOX, scale) and temporal constraint.\n *\n * @property {String} crs - Coordinates System ID used to express coordinates contraints.\n * @property {Gp.BBox} bbox - Constraint Bounding Box.\n * @property {Number} minScaleDenominator - Minimum scale denominator where constraint applies.\n * @property {Number} maxScaleDenominator - Maximum scale denominator where constraint applies.\n * @property {Array.<String>} temporalExtent - Array expressing the time interval of the constraint [minT, maxT]. Dates are expressed in the [ISO-8601]{@link https://en.wikipedia.org/wiki/ISO_8601} way.\n *\n * @namespace\n * @alias Gp.Services.Config.Constraint\n */\n\nfunction Constraint () {\n    if (!(this instanceof Constraint)) {\n        throw new TypeError(\"Constraint constructor cannot be called as a function.\");\n    }\n\n    this.crs = null;\n\n    this.bbox = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.minScaleDenominator = null;\n\n    this.maxScaleDenominator = null;\n\n    this.temporalExtent = [null, null];\n}\n\nConstraint.prototype = {\n\n    constructor : Constraint\n\n};\n\nexport default Constraint;\n","\n/**\n * Object used to describe a format to use with Geoportal resources.\n *\n * @property {Boolean} current - If true, then this format is used by default.\n * @property {String} name - Format mime-type.\n *\n * @namespace\n * @alias Gp.Services.Config.Format\n */\n\nfunction Format () {\n    if (!(this instanceof Format)) {\n        throw new TypeError(\"Format constructor cannot be called as a function.\");\n    }\n\n    this.current = null;\n\n    this.name = null;\n}\n\nFormat.prototype = {\n\n    constructor : Format\n\n};\n\nexport default Format;\n","\n/**\n * Object used to describe geoportal resource (WMTS, WMS, WFS layers, geocoding resources or elevation service) parameters. Properties may be used or not depending on the resource type.\n *\n * @property {String} name - name of the resource to use with the webservice that serves it (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS\").\n * @property {String} title - Human readable name for the resource.\n * @property {String} description - Resource description.\n * @property {String} layerId - Unique resource Identifier (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n * @property {String} quicklookUrl - Image URL for the resource.\n * @property {Object} serviceParams - Informations about the webservice that serves the resource (OpenLS, WFS, WMTS)\n * @property {String} serviceParams.id - Web Service identifier (\"OGC:WMTS\", \"OGC:OPENLS;ReverseGeocode\", etc...)\n * @property {Object} serviceParams.serverUrl - Associative array mapping geoportal access key (keys) with their properties (URLs of the web service, with the geoportal access key).\n * @property {String} serviceParams.version - webservice version.\n * @property {String} defaultProjection - coordinates system ID used by default for the resource (WMS or WFS layer) or of the TileMatrixSet used by the WMTS layer.\n * @property {Array.<String>} additionalProjections - additional coordinates systems IDs availables for the resource, others than the default one (see defaultProjection) (WMS and WFS layers only).\n * @property {Array.<Gp.Services.Config.Format>} formats - Formats availables for the resource.\n * @property {Array.<Gp.Services.Config.Legend>} legends - Informations about legends associated to the resource.\n * @property {Array.<Gp.Services.Config.Metadata>} metadata - Informations about metadata associated to the resource.\n * @property {Array.<Gp.Services.Config.Style>} styles - Informations about styles availables for the resources (WMS, WFS and WMTS only).\n * @property {Array.<Gp.Services.Config.Thematic>} thematics - Informations about thematics associated to the resource.\n * @property {Gp.Services.Config.Constraint} globalConstraint - geographical constraint for the resource.\n * @property {Array.<Gp.Services.Config.Constraint>} constraints - additionnal geographical constraints for the resource.\n * @property {Array.<Gp.Services.Config.Originator>} originators - Informations about originator of the resource.\n * @property {Object} wmtsOptions - Informations associated to WMTS resources.\n * @property {String} wmtsOptions.tileMatrixSetLink - TileMatrixSet identifier used by the resource (see {@link Gp.Services.Config.TileMatrixSet})\n * @property {Gp.Services.Config.TileMatrixLimit} wmtsOptions.tileMatrixSetLimits - limits of the resource for that TileMAtrixSet.\n * @property {Boolean} queryable - true if a getFeatureInfo request may be done for the resource (WMS or WMTS only).\n * @property {Boolean} hidden - true if the resource is not visible.\n * @property {Boolean} isAggregate - true if the resource is an aggregate of other resources (@see aggregatedLayers).\n * @property {Array.<String>} aggregatedLayers - Layers IDs composing the being described aggregated layer.\n * @property {Array.<String>} apiKeys - Array of access keys that grant access to that resource.\n * @property {Object} dimensions - Dimensions informations associated with the resource.\n * @property {String} dimensions.type\n * @property {String} dimensions.visibilityRange\n * @property {String} dimensions.visibilityMode\n * @property {String} dimensions.noDataValue\n * @property {String} dimensions.geometricType\n *\n * @namespace\n * @alias Gp.Services.Config.Layer\n */\nfunction Layer () {\n    if (!(this instanceof Layer)) {\n        throw new TypeError(\"Layer constructor cannot be called as a function.\");\n    }\n\n    // info : une instance de la classe Layer n'a aucune propriété au départ,.\n    // les attributs possibles sont documentés ci-dessus,\n    // et seront implémentés au fur et à mesure de la lecture de la réponse de l'autoconf, lorsque l'information est rencontrée.\n}\n\nLayer.prototype = {\n\n    constructor : Layer,\n\n    /**\n     * Returns the layer name\n     *\n     * @returns {String} name - name of the resource to use with the webservice that serves it (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS\").\n     */\n    getName : function () {\n        return this.name;\n    },\n\n    /**\n     * Returns the layer title\n     *\n     * @returns {String} title - Human readable name for the resource.\n     */\n    getTitle : function () {\n        return this.title;\n    },\n\n    /**\n     * Returns the layer description\n     *\n     * @returns {String} description - Resource description.\n     */\n    getDescription : function () {\n        return this.description;\n    },\n\n    /**\n     * Returns the layer identifier\n     *\n     * @returns {String} layerId - Unique resource Identifier (eg : \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     */\n    getLayerId : function () {\n        return this.layerId;\n    },\n\n    /**\n     * Returns the layer quicklookUrl\n     *\n     * @returns {String} quicklookUrl - Image URL for the resource.\n     */\n    getQuicklookUrl : function () {\n        return this.quicklookUrl;\n    },\n\n    /**\n     * Returns the layer default projection\n     *\n     * @returns {String} defaultProjection - coordinates system ID used by default for the resource (WMS or WFS layer) or of the TileMatrixSet used by the WMTS layer.\n     */\n    getDefaultProjection : function () {\n        return this.defaultProjection;\n    },\n\n    /**\n     * Returns the layer projections\n     *\n     * @returns {Array.<String>} projections - coordinates systems IDs availables for the resource, including the default one.\n     */\n    getProjections : function () {\n        var projections = [];\n        projections.push(this.defaultProjection);\n        var proj = projections.concat(this.additionalProjections);\n        return proj;\n    },\n\n    /**\n     * Returns the global BBOX\n     *\n     * @returns {Gp.BBox} bbox - the layer global bounding box, expressed in CRS system.\n     */\n    getBBOX : function () {\n        if (!this.globalConstraint) {\n            return;\n        }\n        return this.globalConstraint.bbox;\n    },\n\n    /**\n     * Returns the layer minimum scale denominator\n     *\n     * @returns {Number} minScaleDenominator - minimum scale denominator for this layer\n     */\n    getMinScaleDenominator : function () {\n        if (!this.globalConstraint) {\n            return;\n        }\n        return this.globalConstraint.minScaleDenominator;\n    },\n\n    /**\n     * Returns the layer maximum scale denominator\n     *\n     * @returns {Number} maxScaleDenominator - maximum scale denominator for this layer\n     */\n    getMaxScaleDenominator : function () {\n        if (!this.globalConstraint) {\n            return;\n        }\n        return this.globalConstraint.maxScaleDenominator;\n    },\n\n    /**\n     * Returns layer Tile Matrix Set identifier if exists\n     *\n     * @returns {String} tileMatrixSetLink - Tile Matrix Set identifier (for instance : \"PM\")\n     */\n    getTMSID : function () {\n        if (this.wmtsOptions) {\n            return this.wmtsOptions.tileMatrixSetLink;\n        }\n    },\n\n    /**\n     * Returns information about the webservice that serves the resource\n     *\n     * @returns {Object} serviceParams - Information about the webservice that serves the resource (OpenLS, WFS, WMTS)\n     */\n    getServiceParams : function () {\n        return this.serviceParams;\n    },\n\n    /**\n     * Returns Geoportal server url for a given key\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {String} serverUrl - general URL of the web service (with the geoportal access key)\n     */\n    getServerUrl : function (apiKey) {\n        if (!apiKey || !this.serviceParams || !this.serviceParams.serverUrl) {\n            return;\n        }\n        return this.serviceParams.serverUrl[apiKey];\n    },\n\n    /**\n     * Returns information about legends associated to the resource.\n     *\n     * @returns {Array.<Gp.Services.Config.Legend>} legends - Informations about legends associated to the resource.\n     */\n    getLegends : function () {\n        return this.legends;\n    },\n\n    /**\n     * Returns information about metadata associated to the resource.\n     *\n     * @returns {Array.<Gp.Services.Config.Metadata>} metadata - Informations about metadata associated to the resource.\n     */\n    getMetadata : function () {\n        return this.metadata;\n    },\n\n    /**\n     * Returns information about styles availables for the resources (WMS, WFS and WMTS only).\n     *\n     * @returns {Array.<Gp.Services.Config.Style>} styles - Informations about styles availables for the resources (WMS, WFS and WMTS only).\n     */\n    getStyles : function () {\n        return this.styles;\n    },\n\n    /**\n     * Returns layer default style\n     *\n     * @returns {String} styleName - style identifier (eg : \"normal\", \"bdparcellaire\", ...)\n     */\n    getDefaultStyle : function () {\n        if (!this.styles) {\n            return;\n        }\n        var style;\n        var s = this.styles;\n        for (var i = 0; i < s.length; i++) {\n            if (s[i].current === true) {\n                style = s[i].name;\n                break;\n            }\n        }\n        return style;\n    },\n\n    /**\n     * Returns information about thematics associated to the resource.\n     *\n     * @returns {Array.<Gp.Services.Config.Thematic>} thematics - Informations about thematics associated to the resource.\n     */\n    getThematics : function () {\n        return this.thematics;\n    },\n\n    /**\n     * Returns layer default format\n     *\n     * @returns {String} formatName - Format mime-type. (eg. \"image/jpeg\")\n     */\n    getDefaultFormat : function () {\n        if (!this.formats) {\n            return;\n        }\n        var format;\n        var f = this.formats;\n        for (var i = 0; i < f.length; i++) {\n            if (f[i].current === true) {\n                format = f[i].name;\n                break;\n            }\n        }\n        return format;\n    },\n\n    /**\n     * Returns information about geographical or temporal constraints for the resource\n     *\n     * @returns {Array.<Gp.Services.Config.Constraint>} constraints - Informations about geographical or temporal constraints for the resource\n     */\n    getConstraints : function () {\n        return this.constraints;\n    },\n\n    /**\n     * Returns information about originators of this resource\n     *\n     * @returns {Array.<Gp.Services.Config.Originator>} originators - Informations about originators of this resource\n     */\n    getOriginators : function () {\n        return this.originators;\n    },\n\n    /**\n     * Returns information about dimensions associated with this resource\n     *\n     * @returns {Object} dimensions - Dimensions informations associated with the resource.\n     */\n    getDimensions : function () {\n        return this.dimensions;\n    },\n\n    /**\n     * Returns information about aggregated layers composing the being described layer, in case the resource is an aggregate of other resources.\n     *\n     * @returns {Object} aggregatedLayers - Layers IDs composing the being described aggregated layer.\n     */\n    getAggregatedLayers : function () {\n        if (this.isAggregate) {\n            return this.aggregatedLayers;\n        } else {\n            // ...\n        }\n    }\n\n};\n\nexport default Layer;\n","\n/**\n * Object used to describe a legend file associated with a geoportal resource (WMTS, WMS, WFS layers).\n *\n * @property {String} format - mime-type of the legend file.\n * @property {String} url - legend file URL\n * @property {Number} minScaleDenominator - minimum scale denominator where this legend applies.\n *\n * @namespace\n * @alias Gp.Services.Config.Legend\n */\n\nfunction Legend () {\n    if (!(this instanceof Legend)) {\n        throw new TypeError(\"Legend constructor cannot be called as a function.\");\n    }\n\n    this.format = null;\n\n    this.url = null;\n\n    this.minScaleDenominator = null;\n}\n\nLegend.prototype = {\n\n    constructor : Legend\n\n};\n\nexport default Legend;\n","\n/**\n * Object used to describe a metadata file associated with a geoportal resource.\n *\n * @property {String} format - mime-type of the metadata file.\n * @property {String} url - metadata file URL\n *\n * @namespace\n * @alias Gp.Services.Config.Metadata\n */\n\nfunction Metadata () {\n    if (!(this instanceof Metadata)) {\n        throw new TypeError(\"Metadata constructor cannot be called as a function.\");\n    }\n\n    this.format = null;\n\n    this.url = null;\n}\n\nMetadata.prototype = {\n\n    constructor : Metadata\n\n};\n\nexport default Metadata;\n","\n/**\n * Object used to describe an Originator of geoportal resource.\n *\n * @property {String} name - originator name\n * @property {String} attribution - originator full name\n * @property {String} logo - originator logo file URL\n * @property {String} url - originator web site URL\n * @property {Array.<Gp.Services.Config.Constraint>} constraints - where and when the originator applies for the ressource.\n *\n * @namespace\n * @alias Gp.Services.Config.Originator\n */\n\nfunction Originator () {\n    if (!(this instanceof Originator)) {\n        throw new TypeError(\"Originator constructor cannot be called as a function.\");\n    }\n\n    this.name = null;\n\n    this.attribution = null;\n\n    this.logo = null;\n\n    this.url = null;\n\n    this.constraints = [];\n}\n\nOriginator.prototype = {\n\n    constructor : Originator\n\n};\n\nexport default Originator;\n","\n/**\n * Object used to describe a web service of the geoportal platform.\n *\n * @property {String} title - Web service name\n * @property {Object} serverUrl - Associative array mapping geoportal access key (keys) with their properties (URLs of the web service, with the geoportal access key).\n * @property {String} version - web service version.\n *\n * @namespace\n * @alias Gp.Services.Config.Service\n */\nfunction Service () {\n    if (!(this instanceof Service)) {\n        throw new TypeError(\"Service constructor cannot be called as a function.\");\n    }\n\n    this.title = null;\n\n    this.serverUrl = null;\n\n    this.version = null;\n}\n\nService.prototype = {\n\n    constructor : Service\n\n};\n\nexport default Service;\n","\n/**\n * Object used to describe a style that may be used for a geoportal resource.\n *\n * @property {String} name - Style identifier (eg : \"normal\", \"bdparcellaire\", ...)\n * @property {String} title - human readable name of the style.\n * @property {Boolean} current - true if this is the default style.\n * @property {String} url - Url Style (eg: vectortile).\n *\n * @namespace\n * @alias Gp.Services.Config.Style\n */\n\nfunction Style () {\n    if (!(this instanceof Style)) {\n        throw new TypeError(\"Style constructor cannot be called as a function.\");\n    }\n\n    this.name = null;\n\n    this.title = null;\n\n    this.current = null;\n\n    this.url = null;\n}\n\nStyle.prototype = {\n\n    constructor : Style\n\n};\n\nexport default Style;\n","\n/**\n * Object used to describe properties of a french territory covered by geoportal resources.\n *\n * @property {Boolean} isDefault - if this territory is to use by default.\n * @property {String} defaultCRS - Identifier of the coordinates system to use by default for that territory.\n * @property {Array.<String>} additionalCRS - Identifiers of additional coordinates systems availables for that territory.\n * @property {Array.<String>} defaultLayers - Identifiers of layers to load by default for that territory.\n * @property {Object} defaultOptions - options to use by default for that territory.\n * @property {Number} defaultOptions.resolution - resolution to use by default for that territory (in meter per pixel).\n * @property {Number} defaultOptions.minScaleDenominator - minimum scaleDenominator accessible for that territory.\n * @property {Number} defaultOptions.maxScaleDenominator - maximum scaleDenominator accessible for that territory.\n * @property {Gp.BBox} geoBBox - Bounding Box of the territory (expressed in geographical coordinates)\n * @property {Object} geoCenter - center of the territory (expressed in geographical coordinates)\n * @property {Float} geoCenter.lon - center longitude\n * @property {Float} geoCenter.lat - center latitude\n *\n * @namespace\n * @alias Gp.Services.Config.Territory\n */\nfunction Territory () {\n    if (!(this instanceof Territory)) {\n        throw new TypeError(\"Territory constructor cannot be called as a function.\");\n    }\n\n    this.isDefault = null;\n\n    this.defaultCRS = null;\n\n    this.additionalCRS = [];\n\n    this.geoBBOX = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.geoCenter = {\n        lon : null,\n        lat : null\n    };\n\n    this.defaultOptions = {\n        resolution : null,\n        minScaleDenominator : null,\n        maxScaleDenominator : null\n    };\n\n    this.defaultLayers = [];\n}\n\nTerritory.prototype = {\n\n    constructor : Territory\n\n};\n\nexport default Territory;\n","\n/**\n * Object used to describe a thematic\n *\n * @property {String} name - Thematic name\n * @property {Boolean} inspire - true if the thematic name is an [INSPIRE one]{@link http://inspire.ec.europa.eu/index.cfm/pageid/2/list/7}.\n *\n * @namespace\n * @alias Gp.Services.Config.Thematic\n */\n\nfunction Thematic () {\n    if (!(this instanceof Thematic)) {\n        throw new TypeError(\"Thematic constructor cannot be called as a function.\");\n    }\n\n    this.inspire = null;\n\n    this.name = null;\n}\n\nThematic.prototype = {\n\n    constructor : Thematic\n\n};\n\nexport default Thematic;\n","\n/**\n *\n * Object used to describe a TileMatrix set (for WMTS use).\n *\n * @property {Array.<String>} matrixIds - Array of IDs for each TileMatrix of the set.\n * @property {Array.<Gp.Services.Config.TileMatrix>} tileMatrices - Array of TileMatrix descriptions.\n * @property {Array.<Float>} nativeResolutions - Array of resolutions (in meter per pixel) applying for each TileMatrix of the set.\n * @property {String} projection - Identifier of the Cordinates System used for the tileMatrixSet.\n *\n * @namespace\n * @alias Gp.Services.Config.TileMatrixSet\n */\nfunction TileMatrixSet () {\n    if (!(this instanceof TileMatrixSet)) {\n        throw new TypeError(\"TileMatrixSet constructor cannot be called as a function.\");\n    }\n\n    this.projection = null;\n\n    this.nativeResolutions = [];\n\n    this.matrixIds = [];\n\n    this.tileMatrices = {};\n}\n\nTileMatrixSet.prototype = {\n\n    constructor : TileMatrixSet,\n\n    /**\n     * Returns Tile Matrix Set resolutions\n     *\n     * @returns {Array} nativeResolutions - Array of resolutions (in meter per pixel) applying for each TileMatrix of the set.\n     */\n    getResolutions : function () {\n        return this.nativeResolutions;\n    },\n\n    /**\n     * Returns Tile Matrix Set identifiers\n     *\n     * @returns {Array} matrixIds - Array of IDs for each TileMatrix of the set.\n     */\n    getMatrixIds : function () {\n        return this.matrixIds;\n    },\n\n    /**\n     * Returns Tile Matrix Set projection\n     *\n     * @returns {String} projection - Identifier of the Cordinates System used for the tileMatrixSet.\n     */\n    getProjection : function () {\n        return this.projection;\n    },\n\n    /**\n     * Returns Tile Matrices descriptions.\n     *\n     * @returns {Array.<Gp.Services.Config.TileMatrix>} tileMatrices - Array of TileMatrix descriptions.\n     */\n    getTileMatrices : function () {\n        return this.tileMatrices;\n    },\n\n    /**\n     * Returns top left corner point of matrices\n     *\n     * @returns {Gp.Point} topLeftCorner - Top Left Corner Point of TMS matrices, expressed in the tileMatrixSet coordinates system.\n     */\n    getTopLeftCorner : function () {\n        var topLeftCorner;\n        var matrices = this.getTileMatrices();\n        if (matrices) {\n            for (var id in matrices) {\n                if (matrices.hasOwnProperty(id)) {\n                    topLeftCorner = matrices[id].topLeftCorner;\n                    break;\n                }\n            }\n        }\n        return topLeftCorner;\n    }\n\n};\n\nexport default TileMatrixSet;\n","\n/**\n * Object used to describe a TileMatrix.\n *\n * @property {String} matrixId - matrix Identifier\n * @property {Number} matrixHeight - Number of tiles from the top to the bottom of the matrix.\n * @property {Number} matrixWidth - Number of tiles from the left to the right of the matrix.\n * @property {Number} scaleDenominator - Scale denominator associated to that matrix.\n * @property {Number} tileHeight - tile height in number of pixels\n * @property {Number} tileWidth - tile width in number of pixels\n * @property {Gp.Point} topLeftCorner - Top Left Corner Point of the matrix expressed in the tileMatrixSet coordinates system.\n *\n * @namespace\n * @alias Gp.Services.Config.TileMatrix\n */\n\nfunction TileMatrix () {\n    if (!(this instanceof TileMatrix)) {\n        throw new TypeError(\"TileMatrix constructor cannot be called as a function.\");\n    }\n\n    this.matrixId = null;\n\n    this.matrixHeight = null;\n\n    this.matrixWidth = null;\n\n    this.scaleDenominator = null;\n\n    this.tileHeight = null;\n\n    this.tileWidth = null;\n\n    this.topLeftCorner = null;\n}\n\nTileMatrix.prototype = {\n\n    constructor : TileMatrix,\n\n    /**\n     * Returns top left corner point of the matrix\n     *\n     * @returns {Gp.Point} topLeftCorner - Top Left Corner Point of the matrix expressed in the tileMatrixSet coordinates system.\n     */\n    getTopLeftCorner : function () {\n        return this.topLeftCorner;\n    },\n\n    /**\n     * Returns Scale denominator associated to that matrix.\n     *\n     * @returns {Number} scaleDenominator - Scale denominator associated to that matrix.\n     */\n    getScaleDenominator : function () {\n        return this.scaleDenominator;\n    },\n\n    /**\n     * Returns tile height of matrix\n     *\n     * @returns {Number} tileHeight - tile height in number of pixels\n     */\n    getTileHeight : function () {\n        return this.tileHeight;\n    },\n\n    /**\n     * Returns tile width of matrix\n     *\n     * @returns {Number} tileWidth - tile width in number of pixels\n     */\n    getTileWidth : function () {\n        return this.tileWidth;\n    },\n\n    /**\n     * Returns matrix height (number of tiles)\n     *\n     * @returns {Number} matrixHeight - Number of tiles from the top to the bottom of the matrix.\n     */\n    getMatrixHeight : function () {\n        return this.matrixHeight;\n    },\n\n    /**\n     * Returns matrix width (number of tiles)\n     *\n     * @returns {Number} matrixWidth - Number of tiles from the left to the right of the matrix.\n     */\n    getMatrixWidth : function () {\n        return this.matrixWidth;\n    }\n\n};\n\nexport default TileMatrix;\n","\n/**\n * Object used to describe a layer extent on a Tile Matrix.\n *\n * @property {Number} minTileCol - minimum column index where tile can be found on the Tile matrix.\n * @property {Number} maxTileCol - maximum column index where tile can be found on the Tile matrix.\n * @property {Number} minTileRow - minimum row index where tile can be found on the Tile matrix.\n * @property {Number} maxTileCol - maximum row index where tile can be found on the Tile matrix.\n *\n * @namespace\n * @alias Gp.Services.Config.TileMatrixLimit\n */\n\nfunction TileMatrixLimit () {\n    if (!(this instanceof TileMatrixLimit)) {\n        throw new TypeError(\"TileMatrixLimit constructor cannot be called as a function.\");\n    }\n\n    this.minTileRow = null;\n\n    this.maxTileRow = null;\n\n    this.minTileCol = null;\n\n    this.maxTileCol = null;\n}\n\n/**\n * @lends module:Autoconf/Response/TileMatrixLimit\n */\nTileMatrixLimit.prototype = {\n\n    constructor : TileMatrixLimit\n};\n\nexport default TileMatrixLimit;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service d'autoconfiguration du Géoportail\n *      afin de récupérer les informations retournées.\n * @module AutoConfResponseReader\n * @private\n * @alias Gp.Services.AutoConf.Formats.AutoConfResponseReader\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport AutoConfResponse from \"../Response/model/AutoConfResponse\";\nimport Constraint from \"../Response/model/Constraint\";\nimport Format from \"../Response/model/Format\";\nimport Layer from \"../Response/model/Layer\";\nimport Legend from \"../Response/model/Legend\";\nimport Metadata from \"../Response/model/Metadata\";\nimport Originator from \"../Response/model/Originator\";\nimport Service from \"../Response/model/Service\";\nimport Style from \"../Response/model/Style\";\nimport Territory from \"../Response/model/Territory\";\nimport Thematic from \"../Response/model/Thematic\";\nimport TileMatrixSet from \"../Response/model/TileMatrixSet\";\nimport TileMatrix from \"../Response/model/TileMatrix\";\nimport TileMatrixLimit from \"../Response/model/TileMatrixLimit\";\n\nvar AutoConfResponseReader = {};\n\n/**\n * version du service d'autoconf\n */\nAutoConfResponseReader.VERSION = \"1.1.0\";\n\n/**\n * Objet stockant les différents namespaces et les URI associées\n */\nAutoConfResponseReader.NAMESPACES = {\n    xmlns : \"http://www.opengis.net/context\",\n    gpp : \"http://api.ign.fr/geoportail\", // FIXME remplacer par https://www.geoportail.gouv.fr/gpp\n    ows : \"http://www.opengis.net/ows/2.0\",\n    sld : \"http://www.opengis.net/sld\",\n    wmts : \"http://www.opengis.net/wmts/1.0\",\n    xlink : \"http://www.w3.org/1999/xlink\",\n    xsi : \"http://www.w3.org/2001/XMLSchema-instance\"\n};\n\n/**\n * Localisation (URL) du schema de définition du XML (XSD)\n */\nAutoConfResponseReader.SCHEMALOCATION = [\n    \"http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf/autoconf.xsd\",\n    \"http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf.xsd\"\n];\n\n/**\n * Namespace par défaut du format\n */\nAutoConfResponseReader.DEFAULTPREFIX = \"context\";\n\n/**\n * Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n */\nAutoConfResponseReader.READERS = {\n\n    context : {\n\n        /** ViewContext */\n        ViewContext : function (viewContextNode) {\n            // info : balise \"racine\" de la réponse de l'autoconf\n\n            // vérification de la version du service, et des namespaces de l'en-tête\n            __checkServiceAttributes(viewContextNode);\n\n            // create AutoConfResponse\n            var config = new AutoConfResponse();\n\n            __getChildNodes(viewContextNode, config);\n\n            return config;\n        },\n\n        // info : /General/Title\n        // ou : /LayerList/Layer/Title\n        /** Title */\n        Title : function (titleNode, data) {\n            if (data && data.generalOptions) { // cas de la variable config générale\n                data.generalOptions.title = __getChildValue(titleNode);\n            } else if (data && data.lyr) { // cas d'une layer\n                data.lyr.title = __getChildValue(titleNode);\n            }\n        },\n\n        // info : /LayerList/Layer/Abstract\n        /** Abstract */\n        Abstract : function (node, data) {\n            if (data && data.lyr) {\n                data.lyr.description = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Services/Server\n        // ou : /LayerList/Server\n        /** Server */\n        Server : function (node, data) {\n            var serverId = node.getAttribute(\"service\");\n            var title = node.getAttribute(\"title\");\n            var version = node.getAttribute(\"version\");\n            if (serverId) {\n                if (data && data.services && typeof data.services === \"object\" && !data.services[serverId]) {\n                    // on est dans la balise Services\n                    var s = new Service();\n                    s.title = title;\n                    s.version = version;\n                    // récupération de l'url du service, dans une balise enfant \"OnlineResource\"\n                    __getChildNodes(node, s);\n                    // ajout du service à la variable config\n                    data.services[serverId] = s;\n                } else if (data && data.lyr) {\n                    // on est dans la balise Layer\n                    if (!data.lyr.serviceParams) {\n                        // si l'objet serviceParams n'a pas encore été créé, on le crée.\n                        data.lyr.serviceParams = {};\n                    }\n                    data.lyr.serviceParams.id = serverId;\n                    data.lyr.serviceParams.version = version;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Services/Server/OnlineResource\n        // ou : /LayerList/Layer/Server/OnlineResource\n        // ou : /LayerList/Layer/Extention/gpp:Layer/gpp:QuickLook/OnlineResource\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend/gpp:LegendURL/OnlineResource\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:MetadataURL/OnlineResource\n        /** OnlineResource */\n        OnlineResource : function (node, service) {\n            if (service && service.hasOwnProperty(\"serverUrl\")) {\n                service.serverUrl = node.getAttribute(\"xlink:href\");\n            }\n        },\n\n        // info : /LayerList\n        /** LayerList */\n        LayerList : function (layerListNode, config) {\n            // liste de balises \"layer\"\n            __getChildNodes(layerListNode, config);\n\n            if (config && config.layers && config.generalOptions && config.services) {\n                // récupération des clés et des couches associées\n                for (var lyr in config.layers) {\n                    if (config.layers.hasOwnProperty(lyr)) {\n                        var layerConfig = config.layers[lyr];\n\n                        // récupération de la clé associée\n                        var apiKeys = layerConfig.apiKeys;\n                        if (apiKeys && Array.isArray(apiKeys)) {\n                            for (var i = 0; i < apiKeys.length; i++) {\n                                // pour chaque clé API, on ajoute la couche\n                                var key = apiKeys[i];\n                                if (config.generalOptions.apiKeys) {\n                                    if (!config.generalOptions.apiKeys[key] || !Array.isArray(config.generalOptions.apiKeys[key])) {\n                                        config.generalOptions.apiKeys[key] = [];\n                                    }\n                                    config.generalOptions.apiKeys[key].push(lyr);\n                                }\n                            }\n                        }\n\n                        // récupération du service associé\n                        var serviceParams = layerConfig.serviceParams;\n                        if (serviceParams && serviceParams.id) {\n                            if (!config.services[serviceParams.id]) {\n                                var s = new Service();\n                                if (serviceParams.serverUrl) {\n                                    s.serverUrl = serviceParams.serverUrl;\n                                }\n                                if (serviceParams.version) {\n                                    s.version = serviceParams.version;\n                                }\n                                config.services[serviceParams.id] = s;\n                            }\n                        }\n\n                        // récupération de la projection associée (dans le cas d'une couche WMTS)\n                        if (layerConfig.wmtsOptions && layerConfig.wmtsOptions.tileMatrixSetLink && config.tileMatrixSets) {\n                            var tmsLink = layerConfig.wmtsOptions.tileMatrixSetLink;\n                            var tileMatrixSets = config.tileMatrixSets;\n                            for (var tms in tileMatrixSets) {\n                                if (tileMatrixSets.hasOwnProperty(tms) && tms === tmsLink) {\n                                    layerConfig.defaultProjection = tileMatrixSets[tms].projection;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        // info : /LayerList/Layer\n        /** Layer */\n        Layer : function (layerNode, config) {\n            if (config && config.layers) {\n                var lyrData = {\n                    lyr : new Layer(),\n                    lyrId : null\n                };\n\n                var hidden = layerNode.getAttribute(\"hidden\");\n                if (hidden === \"1\") {\n                    lyrData.lyr.hidden = true;\n                } else {\n                    lyrData.lyr.hidden = false;\n                }\n\n                var queryable = layerNode.getAttribute(\"queryable\");\n                if (queryable === \"1\") {\n                    lyrData.lyr.queryable = true;\n                } else {\n                    lyrData.lyr.queryable = false;\n                }\n\n                // on peut avoir les balises : Server, Name, Title, Abstract, DataURL, MetadataURL,\n                // sld:MinScaleDenominator, sld:MaxScaleDenominator, SRS, FormatList, StyleList\n                // DimensionList, Extension\n                __getChildNodes(layerNode, lyrData);\n\n                // si on a bien récupéré l'identifiant de la couche, on s'en sert pour l'ajouter au tableau associatif des couches disponibles\n                if (lyrData.lyrId) {\n                    // Dans le cas des services, on modifie le contexte de l'identifiant.\n                    if (lyrData.lyr.serviceParams && lyrData.lyr.serviceParams.id) {\n                        var serviceid = lyrData.lyr.serviceParams.id;\n                        if (serviceid.toUpperCase().indexOf(\"OPENLS\") !== -1 || serviceid.toUpperCase().indexOf(\"ELEVATION\") !== -1) {\n                            // Il faut changer l'identifiant de la ressource.\n                            var resourceId = lyrData.lyrId.split(\"$\")[0];\n                            lyrData.lyrId = resourceId + \"$\" + serviceid;\n                        }\n                    }\n\n                    // on ajoute l'information dans les attributs de la couche\n                    lyrData.lyr.layerId = lyrData.lyrId;\n                    // et dans le tableau Gp.Config.layers\n                    config.layers[lyrData.lyrId] = lyrData.lyr;\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Name\n        /** TODO : jsdoc block */\n        Name : function (node, lyrData) {\n            if (lyrData && lyrData.lyr) {\n                lyrData.lyr.name = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/SRS (dans le cas des couches WMS ou WFS)\n        /** TODO : jsdoc block */\n        SRS : function (node, lyrData) {\n            // on récupère la projection de la couche (SRS)\n            if (lyrData && lyrData.lyr) {\n                lyrData.lyr.defaultProjection = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/FormatList/Format\n        /** TODO : jsdoc block */\n        Format : function (node, lyrData) {\n            if (lyrData && lyrData.lyr) {\n                var f = new Format();\n                var current = node.getAttribute(\"current\");\n                if (current === \"1\") {\n                    f.current = true;\n                } else {\n                    f.current = false;\n                }\n                f.name = __getChildValue(node);\n                // si on n'a pas encore ajouté de format, on crée le tableau vide\n                if (!lyrData.lyr.formats || !Array.isArray(lyrData.lyr.formats)) {\n                    lyrData.lyr.formats = [];\n                }\n                lyrData.lyr.formats.push(f);\n            }\n        },\n\n        // info : /LayerList/Layer/StyleList/Style\n        /** TODO : jsdoc block */\n        Style : function (node, lyrData) {\n            if (lyrData && lyrData.lyr) {\n                var s = new Style();\n                var current = node.getAttribute(\"current\");\n                if (current === \"1\" || current === 1) {\n                    s.current = true;\n                } else {\n                    s.current = false;\n                }\n                if (node.hasChildNodes) {\n                    var children = node.childNodes;\n                    var child;\n                    var childName;\n                    for (var i = 0; i < children.length; i++) {\n                        child = children[i];\n                        if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                            childName = child.localName || child.baseName || child.nodeName;\n                            if (childName === \"Name\") {\n                                s.name = __getChildValue(child);\n                            } else if (childName === \"Title\") {\n                                s.title = __getChildValue(child);\n                            } else if (childName === \"URL\") {\n                                s.url = __getChildValue(child);\n                            }\n                        }\n                    }\n                }\n                // si on n'a pas encore ajouté de style, on crée le tableau vide\n                if (!lyrData.lyr.styles || !Array.isArray(lyrData.lyr.styles)) {\n                    lyrData.lyr.styles = [];\n                }\n                lyrData.lyr.styles.push(s);\n            }\n        },\n\n        // info : /LayerList/Layer/DimensionList/Dimension\n        /** TODO : jsdoc block */\n        Dimension : function (node, lyrData) {\n            // possède des attributs obligatoires : name, units, unitSymbol et userValue\n            // et d'autres attributs facultatifs : default, multipleValues, nearestValue, current\n            var name = node.getAttribute(\"name\");\n            var dim = __getChildValue(node);\n            if (lyrData && lyrData.lyr) {\n                // si on n'a pas encore ajouté de dimension, on crée l'objet vide\n                if (!lyrData.lyr.dimensions) {\n                    lyrData.lyr.dimensions = {};\n                }\n                if (name === \"Type\") {\n                    lyrData.lyr.dimensions.type = dim;\n                } else if (name === \"VisibilityRange\") {\n                    lyrData.lyr.dimensions.visibilityRange = dim;\n                } else if (name === \"VisibilityMode \") {\n                    lyrData.lyr.dimensions.visibilityMode = dim;\n                } else if (name === \"GeometricType\") {\n                    lyrData.lyr.dimensions.geometricType = dim;\n                } else if (name === \"NoDataValue\") {\n                    lyrData.lyr.dimensions.noDataValue = dim;\n                }\n            }\n        }\n\n    },\n\n    gpp : {\n\n        // info : /General/Extension/gpp:General/gpp:Theme\n        /** TODO : jsdoc block */\n        Theme : function (themeNode, config) {\n            if (config && config.generalOptions && config.generalOptions.hasOwnProperty(\"theme\")) {\n                config.generalOptions.theme = __getChildValue(themeNode);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:defaultGMLGFIStyleUrl\n        /** TODO : jsdoc block */\n        defaultGMLGFIStyleUrl : function (node, config) {\n            if (config && config.generalOptions && config.generalOptions.hasOwnProperty(\"defaultGMLGFIStyle\")) {\n                config.generalOptions.defaultGMLGFIStyle = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory\n        /** TODO : jsdoc block */\n        Territory : function (territoryNode, config) {\n            // info : Information to configure the API for this territory\n            var tid = territoryNode.getAttribute(\"id\");\n            if (tid) {\n                // create a new Territory\n                var t = new Territory();\n\n                var isDefault = territoryNode.getAttribute(\"default\");\n                if (isDefault === \"1\") {\n                    t.isDefault = true;\n                } else {\n                    t.isDefault = false;\n                }\n                // read territory informations\n                __getChildNodes(territoryNode, t);\n                // add territory to config\n                if (config && config.territories && typeof config.territories === \"object\") {\n                    config.territories[tid] = t;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:defaultCRS\n        /** TODO : jsdoc block */\n        defaultCRS : function (node, territory) {\n            // info : Identifier for the default Coordinate Reference System (CRS).\n            if (territory && territory.hasOwnProperty(\"defaultCRS\")) {\n                territory.defaultCRS = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:AdditionalCRS\n        // ou : /LayerList/Extension/gpp:Layer/gpp:AdditionalCRS\n        /** TODO : jsdoc block */\n        AdditionalCRS : function (node, data) {\n            // info : Identifier for additional Coordinate Reference System (CRS).\n            // info : data peut être une instance de Territory.js, ou une instance de Layer.js\n            var addCRS = __getChildValue(node);\n            if (addCRS && data) {\n                if (Array.isArray(data.additionalCRS)) { // cas d'un territoire\n                    data.additionalCRS.push(addCRS);\n                } else { // cas d'une couche\n                    // si le tableau n'est pas encore créé\n                    if (!data.additionalProjections || !Array.isArray(data.additionalProjections)) {\n                        data.additionalProjections = [];\n                    }\n                    data.additionalProjections.push(addCRS);\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:DefaultLayer\n        /** TODO : jsdoc block */\n        DefaultLayer : function (node, territory) {\n            var lyr = node.getAttribute(\"layerId\");\n            if (lyr && territory && Array.isArray(territory.defaultLayers)) {\n                territory.defaultLayers.push(lyr);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:BoundingBox\n        // ou : /LayerList/Extension/gpp:Layer/gpp:BoundingBox\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Constraints/gpp:Constraint/gpp:BoundingBox\n        // ou : /LayerList/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/gpp:Constraint/gpp:BoundingBox\n        /** TODO : jsdoc block */\n        BoundingBox : function (node, data) {\n            if (data) {\n                var values = __getChildValue(node).split(\",\");\n                if (values.length === 4) {\n                    // get bbox coordinates (wgs84)\n                    var bbox = {\n                        left : parseFloat(values[0]),\n                        right : parseFloat(values[2]),\n                        top : parseFloat(values[3]),\n                        bottom : parseFloat(values[1])\n                    };\n                    // get temporal extent params (constraint or layer)\n                    var minT = node.getAttribute(\"minT\");\n                    var maxT = node.getAttribute(\"maxT\");\n\n                    if (data.hasOwnProperty(\"geoBBOX\")) { // cas d'un territoire\n                        data.geoBBOX = bbox;\n                    } else if (data.hasOwnProperty(\"bbox\")) { // cas d'une constraint\n                        if (data.bbox.left || data.bbox.right || data.bbox.top || data.bbox.bottom) {\n                            // si on a déjà une bbox, il faut stocker d'autres contraintes\n                            if (!data.multiConstraints) {\n                                data.multiConstraints = [];\n                            }\n                            var newConstraint = new Constraint();\n                            newConstraint.bbox = bbox;\n                            newConstraint.temporalExtent = [minT, maxT];\n                            data.multiConstraints.push(newConstraint);\n                        } else {\n                            // contrainte classique\n                            data.bbox = bbox;\n                            data.temporalExtent = [minT, maxT];\n                        }\n                    } else { // cas d'une layer\n                        if (!data.globalConstraint) {\n                            data.globalConstraint = new Constraint();\n                        }\n                        data.globalConstraint.bbox = bbox;\n                        data.globalConstraint.temporalExtent = [minT, maxT];\n                    }\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:Resolution\n        /** TODO : jsdoc block */\n        Resolution : function (node, territory) {\n            // info : The default resolution to display on this territory, in CRS coordinate system\n            var res = __getChildValue(node);\n            if (res && territory && territory.defaultOptions && territory.defaultOptions.hasOwnProperty(\"resolution\")) {\n                territory.defaultOptions.resolution = parseFloat(res);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:Center/gpp:x\n        /** TODO : jsdoc block */\n        x : function (node, territory) {\n            var lon = __getChildValue(node);\n            if (lon && territory && territory.geoCenter && territory.geoCenter.hasOwnProperty(\"lon\")) {\n                territory.geoCenter.lon = parseFloat(lon);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/gpp:Center/gpp:y\n        /** TODO : jsdoc block */\n        y : function (node, territory) {\n            var lat = __getChildValue(node);\n            if (lat && territory && territory.geoCenter && territory.geoCenter.hasOwnProperty(\"lat\")) {\n                territory.geoCenter.lat = parseFloat(lat);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Resolutions\n        /** TODO : jsdoc block */\n        Resolutions : function (resNode, config) {\n            // info : List of resolutions in CRS:84 (comma separated values)\n            if (config && config.generalOptions && config.generalOptions.hasOwnProperty(\"wgs84Resolutions\")) {\n                config.generalOptions.wgs84Resolutions = __getChildValue(resNode).split(\",\");\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer\n        /** TODO : jsdoc block */\n        Layer : function (node, lyrData) {\n            // attributs : id, opacity, order, visibleInCatalog, aggregate, more\n            if (lyrData && lyrData.hasOwnProperty(\"lyrId\") && lyrData.lyr) {\n                lyrData.lyrId = node.getAttribute(\"id\");\n                var aggregate = node.getAttribute(\"aggregate\");\n                var more = node.getAttribute(\"more\");\n                if (aggregate || more) {\n                    lyrData.lyr.isAggregate = true;\n                }\n                __getChildNodes(node, lyrData.lyr);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Constraints/gpp:Constraint\n        // ou : /LayerList/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/gpp:Constraint\n        /** TODO : jsdoc block */\n        Constraint : function (node, data) {\n            var c = new Constraint();\n            __getChildNodes(node, c);\n            if (data) {\n                // on peut être dans le cas d'un originator ou d'une layer, tous les deux ont l'attribut constraints\n                if (!data.constraints || !Array.isArray(data.constraints)) {\n                    data.constraints = [];\n                }\n\n                // cas de plusieurs contraintes (par ex différents territoires)\n                if (c.multiConstraints && Array.isArray(c.multiConstraints)) {\n                    // on récupère la première contrainte, stockée normalement\n                    var constraint = new Constraint();\n                    constraint.crs = c.crs;\n                    constraint.bbox = c.bbox;\n                    constraint.minScaleDenominator = c.minScaleDenominator;\n                    constraint.maxScaleDenominator = c.maxScaleDenominator;\n                    constraint.temporalExtent = c.temporalExtent;\n                    data.constraints.push(constraint);\n\n                    // puis on récupère les autres contraintes, à partir de multiConstraints\n                    for (var i = 0; i < c.multiConstraints.length; i++) {\n                        constraint = new Constraint();\n                        constraint.crs = c.crs;\n                        constraint.minScaleDenominator = c.minScaleDenominator;\n                        constraint.maxScaleDenominator = c.maxScaleDenominator;\n                        constraint.bbox = c.multiConstraints[i].bbox;\n                        constraint.temporalExtent = c.multiConstraints[i].temporalExtent;\n                        data.constraints.push(constraint);\n                    }\n                } else {\n                    // cas d'une contrainte classique\n                    data.constraints.push(c);\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/gpp:Constraint/gpp:CRS\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Constraints/gpp:Constraint/gpp:CRS\n        /** TODO : jsdoc block */\n        CRS : function (node, data) {\n            // nothing to do.\n            if (data && data.hasOwnProperty(\"crs\")) {\n                data.crs = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Thematics/gpp:Thematic\n        /** TODO : jsdoc block */\n        Thematic : function (node, lyr) {\n            if (lyr) {\n                var t = new Thematic();\n                t.inspire = false;\n                t.name = __getChildValue(node);\n                // si aucune thématique n'a été ajoutée, on crée le tableau vide\n                if (!lyr.thematics || !Array.isArray(lyr.thematics)) {\n                    lyr.thematics = [];\n                }\n                lyr.thematics.push(t);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Thematics/gpp:InspireThematic\n        /** TODO : jsdoc block */\n        InspireThematic : function (node, lyr) {\n            if (lyr) {\n                var t = new Thematic();\n                t.inspire = true;\n                t.name = __getChildValue(node);\n                // si aucune thématique n'a été ajoutée, on crée le tableau vide\n                if (!lyr.thematics || !Array.isArray(lyr.thematics)) {\n                    lyr.thematics = [];\n                }\n                lyr.thematics.push(t);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator\n        /** TODO : jsdoc block */\n        Originator : function (node, lyr) {\n            if (lyr) {\n                // info : contient des balises Attribution, Logo, URL, et Constraints\n                var o = new Originator();\n                o.name = node.getAttribute(\"name\");\n                __getChildNodes(node, o);\n                // si aucun originator n'a été ajouté, on crée le tableau vide\n                if (!lyr.originators || !Array.isArray(lyr.originators)) {\n                    lyr.originators = [];\n                }\n                lyr.originators.push(o);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Attribution\n        /** TODO : jsdoc block */\n        Attribution : function (node, originator) {\n            if (originator && originator.hasOwnProperty(\"attribution\")) {\n                originator.attribution = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Logo\n        /** TODO : jsdoc block */\n        Logo : function (node, originator) {\n            if (originator && originator.hasOwnProperty(\"logo\")) {\n                originator.logo = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:URL\n        /** TODO : jsdoc block */\n        URL : function (node, originator) {\n            if (originator && originator.hasOwnProperty(\"url\")) {\n                originator.url = __getChildValue(node);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend\n        /** TODO : jsdoc block */\n        Legend : function (node, lyr) {\n            // 2 balises : sld:MinScaleDenominator et gpp:LegendURL\n            var l = new Legend();\n            __getChildNodes(node, l);\n            if (lyr) {\n                // si aucune légende n'a encore été ajoutée, on crée le tableau vide\n                if (!lyr.legends || !Array.isArray(lyr.legends)) {\n                    lyr.legends = [];\n                }\n                lyr.legends.push(l);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend/gpp:LegendURL\n        /** TODO : jsdoc block */\n        LegendURL : function (node, legend) {\n            if (legend && legend.hasOwnProperty(\"format\")) {\n                legend.format = node.getAttribute(\"format\");\n                if (node.hasChildNodes) {\n                    var child = node.childNodes[0];\n                    var childName = child.localName || child.baseName || child.nodeName;\n                    if (childName === \"OnlineResource\" && legend.hasOwnProperty(\"url\")) {\n                        legend.url = child.getAttribute(\"xlink:href\");\n                    }\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:QuickLook\n        /** TODO : jsdoc block */\n        QuickLook : function (node, lyr) {\n            // info : contient une balise OnlineResource avec l'url dans l'attribut \"xlink:href\"\n            if (node.hasChildNodes) {\n                var child = node.childNodes[0];\n                var childName = child.localName || child.baseName || child.nodeName;\n                if (childName === \"OnlineResource\" && lyr) {\n                    lyr.quicklookUrl = child.getAttribute(\"xlink:href\");\n                }\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:MetadataURL\n        /** TODO : jsdoc block */\n        MetadataURL : function (node, lyr) {\n            if (lyr) {\n                // info : contient une balise OnlineResource avec l'url dans l'attribut \"xlink:href\"\n                var m = new Metadata();\n                m.format = node.getAttribute(\"format\");\n                if (node.hasChildNodes) {\n                    var child = node.childNodes[0];\n                    var childName = child.localName || child.baseName || child.nodeName;\n                    if (childName === \"OnlineResource\") {\n                        m.url = child.getAttribute(\"xlink:href\");\n                    }\n                }\n                // si aucune metadata n'a été ajoutée, on crée le tableau vide\n                if (!lyr.metadata) {\n                    lyr.metadata = [];\n                }\n                lyr.metadata.push(m);\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/gpp:Keys/gpp:Key\n        /** TODO : jsdoc block */\n        Key : function (node, lyr) {\n            if (lyr) {\n                // récupération de la clé API\n                var key = node.getAttribute(\"id\");\n                // si on n'a pas encore ajouté de clé, on crée le tableau vide\n                if (!lyr.apiKeys || !Array.isArray(lyr.apiKeys)) {\n                    lyr.apiKeys = [];\n                }\n                lyr.apiKeys.push(key);\n\n                // récupération de l'url du service avec la clé API\n                var serverUrl = __getChildValue(node);\n                if (!lyr.serviceParams) {\n                    lyr.serviceParams = {};\n                }\n                if (!lyr.serviceParams.serverUrl) {\n                    lyr.serviceParams.serverUrl = {};\n                }\n                if (!lyr.serviceParams.serverUrl[key]) {\n                    lyr.serviceParams.serverUrl[key] = serverUrl;\n                }\n            }\n        }\n\n    },\n\n    ows : {\n        /** TODO : jsdoc block */\n        Identifier : function (node, data) {\n            if (data && data.hasOwnProperty(\"TMS\")) { // dans le cas d'un TileMatrixSet\n                data.identifier = __getChildValue(node);\n            } else if (data && data.hasOwnProperty(\"matrixId\")) { // dans le cas d'une TileMatrix\n                data.matrixId = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        SupportedCRS : function (node, tmsData) {\n            if (tmsData && tmsData.TMS && tmsData.TMS.hasOwnProperty(\"projection\")) {\n                tmsData.TMS.projection = __getChildValue(node);\n            }\n        }\n    },\n\n    sld : {\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/sld:MinScaleDenominator\n        // ou : /LayerList/Layer/sld:MinScaleDenominator\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/sld:MinScaleDenominator\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Legends/gpp:Legend/sld:MinScaleDenominator\n        /** TODO : jsdoc block */\n        MinScaleDenominator : function (node, data) {\n            var minScale = __getChildValue(node);\n            if (minScale && data) {\n                if (data.hasOwnProperty(\"defaultOptions\")) { // cas d'un territoire\n                    data.defaultOptions.minScaleDenominator = parseFloat(minScale);\n                } else if (data.lyr) { // cas d'une layer\n                    if (!data.lyr.globalConstraint) {\n                        data.lyr.globalConstraint = new Constraint();\n                    }\n                    data.lyr.globalConstraint.minScaleDenominator = parseFloat(minScale);\n                } else if (data.hasOwnProperty(\"minScaleDenominator\")) { // cas d'une contrainte ou d'une légende\n                    data.minScaleDenominator = parseFloat(minScale);\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:Territories/gpp:Territory/sld:MaxScaleDenominator\n        // ou : /LayerList/Layer/sld:MaxScaleDenominator\n        // ou : /LayerList/Layer/Extension/gpp:Layer/gpp:Originators/gpp:Originator/gpp:Constraints/sld:MaxScaleDenominator\n        /** TODO : jsdoc block */\n        MaxScaleDenominator : function (node, data) {\n            var maxScale = __getChildValue(node);\n            if (maxScale && data) {\n                if (data.hasOwnProperty(\"defaultOptions\")) { // cas d'un territoire\n                    data.defaultOptions.maxScaleDenominator = parseFloat(maxScale);\n                } else if (data.lyr) { // cas d'une layer\n                    if (!data.lyr.globalConstraint) {\n                        data.lyr.globalConstraint = new Constraint();\n                    }\n                    data.lyr.globalConstraint.maxScaleDenominator = parseFloat(maxScale);\n                } else if (data.hasOwnProperty(\"maxScaleDenominator\")) { // cas d'une contrainte\n                    data.maxScaleDenominator = parseFloat(maxScale);\n                }\n            }\n        }\n    },\n\n    wmts : {\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/wmts:TileMatrixSetLink/wmts:TileMatrixSetLimits\n        /** TODO : jsdoc block */\n        TileMatrixSetLimits : function (node, lyr) {\n            // info : contient des balises wmts:TileMatrixLimits\n            if (lyr) {\n                var limits = {};\n                // on récupère les limites dans les balises TileMatrixLimits\n                __getChildNodes(node, limits);\n\n                if (!lyr.wmtsOptions) {\n                    lyr.wmtsOptions = {};\n                }\n                lyr.wmtsOptions.tileMatrixSetLimits = limits;\n            }\n        },\n\n        // info : /LayerList/Layer/Extension/gpp:Layer/wmts:TileMatrixSetLink/wmts:TileMatrixSetLimits/wmts:TileMatrixLimits\n        /** TODO : jsdoc block */\n        TileMatrixLimits : function (node, limits) {\n            var limit = new TileMatrixLimit();\n            var limitId;\n            if (node.hasChildNodes) {\n                var children = node.childNodes;\n                for (var i = 0; i < children.length; i++) {\n                    var child = children[i];\n                    var childName = child.localName || child.baseName || child.nodeName;\n                    if (childName === \"TileMatrix\") {\n                        limitId = __getChildValue(child);\n                    } else if (childName === \"MinTileRow\") {\n                        limit.minTileRow = __getChildValue(child);\n                    } else if (childName === \"MaxTileRow\") {\n                        limit.maxTileRow = __getChildValue(child);\n                    } else if (childName === \"MinTileCol\") {\n                        limit.minTileCol = __getChildValue(child);\n                    } else if (childName === \"MaxTileCol\") {\n                        limit.maxTileCol = __getChildValue(child);\n                    }\n                }\n                if (limitId && limits && !limits[limitId]) {\n                    limits[limitId] = limit;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet\n        // ou : // info : /LayerList/Layer/Extension/gpp:Layer/wmts:TileMatrixSetLink/wmts:TileMatrixSet\n        /** TODO : jsdoc block */\n        TileMatrixSet : function (node, data) {\n            // info : Describes a particular set of tile matrices.\n\n            if (data && data.tileMatrixSets) { // les tileMatrixSets de General\n                // nouvel objet TileMatrixSet\n                var tmsData = {};\n                tmsData.TMS = new TileMatrixSet();\n                tmsData.resolutions = [];\n\n                // lecture des informations du TMS\n                __getChildNodes(node, tmsData);\n\n                // récupération des identifiants des niveaux de matrice (pour faciliter l'accès au WMTS via les API carto)\n                var tileMatrices = tmsData.TMS.tileMatrices;\n                for (var tm in tileMatrices) {\n                    if (tileMatrices.hasOwnProperty(tm)) {\n                        tmsData.TMS.matrixIds.push(tm);\n                    }\n                }\n\n                if (tmsData.TMS.getProjection() === \"IGNF:WGS84G\" || tmsData.TMS.getProjection() === \"EPSG:4326\") {\n                    if (data.generalOptions && Array.isArray(data.generalOptions.wgs84Resolutions)) {\n                        var wgs84Resolutions = data.generalOptions.wgs84Resolutions;\n                        for (var i = 0; i < wgs84Resolutions.length; i++) {\n                            // info : les résolutions stockées dans wgs84Resolutions, issues de l'autoconf, sont des string\n                            tmsData.resolutions[i] = parseFloat(wgs84Resolutions[i]);\n                        }\n                    }\n                }\n\n                // tri des résolutions (par ordre décroissant cette fois)\n                if (Array.isArray(tmsData.resolutions) && tmsData.resolutions.sort !== undefined) {\n                    tmsData.resolutions.sort(\n                        function (x, y) {\n                            return y - x;\n                        }\n                    );\n                }\n                tmsData.TMS.nativeResolutions = tmsData.resolutions;\n\n                // ajout du TileMatrixSet à la variable config\n                data.tileMatrixSets[tmsData.identifier] = tmsData.TMS;\n            } else { // le TileMatrixSetLink d'une couche (layer)\n                if (data && !data.wmtsOptions) {\n                    data.wmtsOptions = {};\n                }\n                // ajout du lien vers le TMS\n                data.wmtsOptions.tileMatrixSetLink = __getChildValue(node);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix\n        /** TODO : jsdoc block */\n        TileMatrix : function (node, tmsData) {\n            // info : Describes a particular tile matrix.\n\n            if (tmsData) {\n                // nouveau niveau de matrice : TileMatrix\n                var tileMatrix = new TileMatrix();\n\n                // lecture des information du TileMatrix\n                __getChildNodes(node, tileMatrix);\n\n                // calcul de la résolution associée au dénominateur d'échelle du niveau de pyramide, selon la projection.\n                if (tmsData.TMS && tmsData.TMS.getProjection()) {\n                    var proj = tmsData.TMS.getProjection();\n                    if (proj === \"EPSG:3857\" || proj === \"EPSG:2154\") {\n                        // calcul de la résolution associée, en m/px\n                        // en se basant sur une \"taille standard de pixel\" de 0.28mm*0.28mm (standard WMTS 1.0)\n                        var r = tileMatrix.scaleDenominator * 0.00028;\n                        if (tmsData.resolutions && Array.isArray(tmsData.resolutions)) {\n                            tmsData.resolutions.push(r);\n                        }\n                    }\n                }\n\n                // ajout du TileMatrix au TileMatrixSet\n                if (tmsData.TMS && tmsData.TMS.tileMatrices) {\n                    tmsData.TMS.tileMatrices[tileMatrix.matrixId] = tileMatrix;\n                }\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:ScaleDenominator\n        /** TODO : jsdoc block */\n        ScaleDenominator : function (node, tileMatrix) {\n            var scale = __getChildValue(node);\n            if (scale && tileMatrix && tileMatrix.hasOwnProperty(\"scaleDenominator\")) {\n                tileMatrix.scaleDenominator = parseFloat(scale);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:TopLeftCorner\n        /** TODO : jsdoc block */\n        TopLeftCorner : function (node, tileMatrix) {\n            var values = __getChildValue(node).split(\" \");\n            if (values && tileMatrix) {\n                tileMatrix.topLeftCorner = {};\n                tileMatrix.topLeftCorner.x = parseFloat(values[0]);\n                tileMatrix.topLeftCorner.y = parseFloat(values[1]);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:TileWidth\n        /** TODO : jsdoc block */\n        TileWidth : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"tileWidth\")) {\n                tileMatrix.tileWidth = parseInt(value, 10);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:TileHeight\n        /** TODO : jsdoc block */\n        TileHeight : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"tileHeight\")) {\n                tileMatrix.tileHeight = parseInt(value, 10);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:MatrixWidth\n        /** TODO : jsdoc block */\n        MatrixWidth : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"matrixWidth\")) {\n                tileMatrix.matrixWidth = parseInt(value, 10);\n            }\n        },\n\n        // info : /General/Extension/gpp:General/gpp:TileMatrixSets/wmts:TileMatrixSet/wmts:TileMatrix/wmts:MatrixHeight\n        /** TODO : jsdoc block */\n        MatrixHeight : function (node, tileMatrix) {\n            var value = __getChildValue(node);\n            if (value && tileMatrix && tileMatrix.hasOwnProperty(\"matrixHeight\")) {\n                tileMatrix.matrixHeight = parseInt(value, 10);\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    serviceException : function (node) {\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"exception\") {\n                    response.exceptionReport = AutoConfResponseReader.READERS[\"exception\"](child);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"code\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service d'autoconf,\n *      à l'aide des READERS de la classe.\n *\n * @method AutoConfResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @return {Object} config|exceptionReport : l'objet contenant les informations de la réponse XML,\n *      sous la forme d'un objet AutoConfResponse, ou un objet littéral exceptionReport si le service a renvoyé une exception.\n * @static\n * @memberof AutoConfResponseReader\n */\nAutoConfResponseReader.read = function (root) {\n    if (root.nodeName === \"ViewContext\") {\n        var nsPrefix = root.prefix || AutoConfResponseReader.DEFAULTPREFIX;\n        var config = AutoConfResponseReader.READERS[nsPrefix][root.nodeName](root);\n        return config;\n    } else if (root.nodeName === \"serviceException\") {\n        var exceptionReport = AutoConfResponseReader.READERS[root.nodeName](root);\n        return exceptionReport;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\n/**\n * Récupération des attributs d'un noeud élément\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\n/**\n * Récupération des noeuds enfants (seulement de type ELEMENT), à partir d'un noeud donné, pour lecture (readNode).\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __getChildNodes\n * @param {DOMElement} node - a DOM node\n * @param {Array|Object} [data] - an object to be filled with node data\n */\nfunction __getChildNodes (node, data) {\n    if (node.hasChildNodes()) {\n        var children = node.childNodes;\n        var child;\n        var childName;\n        var childPrefix;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                childName = child.localName || child.baseName || child.nodeName;\n                childPrefix = child.prefix || AutoConfResponseReader.DEFAULTPREFIX;\n\n                if (AutoConfResponseReader.READERS[childPrefix][childName]) {\n                    var reader = AutoConfResponseReader.READERS[childPrefix][childName];\n                    reader(child, data);\n                } else {\n                    __getChildNodes(child, data);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode.nodeType === 3 || textNode.nodeType === 4) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\n/**\n * Vérification des attributs du service, dans la balise XLS de la réponse :\n *      version, namespaces, et namespace par défaut doivent correspondre à ceux attendus.\n *\n * @private\n * @memberof AutoConfResponseReader\n * @method __checkServiceAttributes\n * @param {DOMElement} viewContextNode - a DOM node, corresponding to XLS first tag.\n */\nfunction __checkServiceAttributes (viewContextNode) {\n    if (viewContextNode.attributes.length > 0) {\n        // on récupère et parcourt les attributs de la balise XLS de la réponse\n        var xlsAttributes = __getAttributes(viewContextNode);\n        for (var att in xlsAttributes) {\n            if (xlsAttributes.hasOwnProperty(att)) {\n                // vérification de la version\n                if (att === \"version\") {\n                    if (xlsAttributes[\"version\"] !== AutoConfResponseReader.VERSION) {\n                        console.log(\"[AutoConfResponseReader] autoconf version is not the expected one : there may be errors in parsing\");\n                        return;\n                    }\n                }\n\n                // on vérifie que l'uri du namespace par défaut est bien celle que l'on attend\n                if (att === \"xmlns\") {\n                    if (xlsAttributes[att] !== AutoConfResponseReader.NAMESPACES.xmlns) {\n                        console.log(\"[AutoConfResponseReader] autoconf response default namespace is not the expected one\");\n                        return;\n                    }\n                    continue;\n                }\n\n                var prefix = att.split(\":\")[0];\n                var ns = att.split(\":\")[1];\n\n                // si on a un autre xmlns, on vérifie aussi les URI\n                if (prefix === \"xmlns\" && ns) {\n                    // si l'attribut correspond à un namespace défini dans le reader\n                    if (AutoConfResponseReader.NAMESPACES[ns]) {\n                        // il faut que les URI correspondent aussi.\n                        if (AutoConfResponseReader.NAMESPACES[ns] !== xlsAttributes[att]) {\n                            console.log(\"[AutoConfResponseReader] autoconf response \" + att + \" namespace is not the expected one\");\n                            return;\n                        }\n                    }\n                }\n\n                // pour finir on vérifie la localisation du schema XSD du service\n                if (ns === \"schemaLocation\") {\n                    if (xlsAttributes[att] !== AutoConfResponseReader.SCHEMALOCATION[0] && xlsAttributes[att] !== AutoConfResponseReader.SCHEMALOCATION[1]) {\n                        console.log(\"[AutoConfResponseReader] autoconf response schema location is not the expected one\");\n                        return;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport default AutoConfResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML\n *\n * @module AutoConfReponseFactory\n * @private\n * @alias Gp.Services.AutoConf.Response.AutoConfResponseFactory\n * @todo gérer le cas du JSONP qui encapsule du XML ?\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport AutoConfResponseReader from \"../Formats/AutoConfResponseReader\";\n\nvar AutoConfReponseFactory = {\n\n    /**\n     * interface unique\n     * Fabrique d'analyse des réponses (xml) du service d'autoconfiguration.\n     * Création d'un format XML, auquel on associe un reader et une chaîne XML, et qui renverra un objet JavaScript correspondant.\n     * Si une erreur est levée lors de l'analyse, ou si l'objet est vide ou contient une exception : appel de la fonction de callback onError\n     * Sinon, appel de la fonction de callback onSuccess (définies dans Autoconf.analyzeResponse)\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant AutoConf\n     *\n     * @example\n     *   var options = {\n     *      layerId :\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AutoConfResponseFactory\");\n        logger.trace([\"AutoConfResponseFactory::build()\"]);\n\n        // data de type AutoConfResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    var p = new XML({\n                        reader : AutoConfResponseReader\n                    });\n\n                    if (typeof options.response === \"string\") {\n                        p.setXMLString(options.response);\n                    } else {\n                        p.setXMLDoc(options.response);\n                    }\n\n                    data = p.parse();\n                } catch (e) {\n                    // si une exception a été levée, on appelle le callback d'erreur avec le message renvoyé\n                    var message = e.message;\n                    if (typeof options.response === \"string\") {\n                        message += \"\\n (raw response service'\" + options.response + \"')\";\n                    } else {\n                        message += \"\\n (raw response service'\" + options.response.documentElement.innerHTML + \"')\";\n                    }\n\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", message),\n                        status : 200,\n                        type : ErrorService.TYPE_SRVERR\n                    }));\n                    return;\n                }\n\n                // Si la réponse est vide, on appelle le callback d'erreur\n                var isEmpty = true;\n                for (var key in data) {\n                    if (data.hasOwnProperty(key)) {\n                        isEmpty = false;\n                    }\n                }\n                if (isEmpty) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY_2\")));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service, on appelle le callback d'erreur\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse (xmlString) est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // définition de la variable globale Gp.Config à partir de la réponse\n        var scope = typeof window !== \"undefined\" ? window : {};\n\n        if (!scope.Gp) {\n            scope.Gp = {};\n        }\n        if (!scope.Gp.Config) {\n            scope.Gp.Config = data;\n        } else {\n            this.mergeConfig(scope.Gp.Config, data, options.layerId);\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, scope.Gp.Config);\n    },\n\n    /**\n     * Fonction utilisée dans le cas où l'autoconfiguration est appelée plusieurs fois\n     * (par exemple pour des clés différentes ou pour des infos sur une couche agrégée)\n     *\n     * @method mergeConfig\n     * @static\n     * @param {Object} GpConfig - Variable Gp.Config préexistante\n     * @param {Object} data - la nouvelle réponse de l'autoconf, à fusionner avec GpConfig\n     * @param {String} [layerId] - l'identifiant d'une couche agrégée dans le cas d'une 2è opération de l'autoconf\n     */\n    mergeConfig : function (GpConfig, data, layerId) {\n        if (data && GpConfig) {\n            // on boucle sur les propriétés (generalOptions, layers, projections, services, tileMatrixSets, territories)\n            for (var prop in data) {\n                if (data.hasOwnProperty(prop)) {\n                    // on récupère la nouvelle clé dans generalOptions\n                    if (prop === \"generalOptions\") {\n                        for (var key in data[prop].apiKeys) {\n                            if (data[prop].apiKeys.hasOwnProperty(key) && !GpConfig.generalOptions.apiKeys[key]) {\n                                GpConfig.generalOptions.apiKeys[key] = data[prop].apiKeys[key];\n                            }\n                        }\n                        // on récupère les nouveaux objets (TMS, layers, projections...)\n                    } else {\n                        if (GpConfig[prop]) {\n                            for (var obj in data[prop]) {\n                                if (data[prop].hasOwnProperty(obj) && !GpConfig[prop][obj]) {\n                                    GpConfig[prop][obj] = data[prop][obj];\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            // dans le cas d'une autoconf pour une couche agrégée, on récupère l'info\n            if (layerId) {\n                var aggregatedLayers = [];\n\n                for (var lyr in data.layers) {\n                    if (data.layers.hasOwnProperty(lyr)) {\n                        aggregatedLayers.push(lyr);\n                    }\n                }\n\n                if (GpConfig.layers[layerId]) {\n                    GpConfig.layers[layerId].aggregatedLayers = aggregatedLayers;\n                }\n            }\n        }\n    }\n};\n\nexport default AutoConfReponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport Helper from \"../../Utils/Helper\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport CommonService from \"../CommonService\";\nimport AutoConfResponseFactory from \"./Response/AutoConfResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'autoconfiguration du Géoportail\n *\n * @private\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.AutoConf\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} [options.layerId] - Le nom de l'agrégat (couche) dont on veut connaître les informations détaillées.\n *      La présence de cette propriété implique l'utilisation de la deuxième opération du service pour accéder aux informations d'une couche aggrégée.\n *      Dans ce cas, la fonction effectuera quand même dans un premier temps la récupération des informations de l'auto-\n *      configuration complète, sauf si un premier appel à l'autoconf a déjà été fait avec cette clé (i.e. si la variable globale est définie\n *      pour la clé de contrat). Elle ira ensuite chercher les informations des couches agrégées, qui seront ajoutées à la variable globale Gp.Config.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : \"apikey\",\n *      protocol : 'JSONP', // JSONP|XHR\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      layerId : \"ORTHOIMAGERY.ORTHOPHOTOS.3D$GEOPORTAIL:OGC:WMTS@aggregate\"\n *   };\n */\nfunction AutoConf (options) {\n    if (!(this instanceof AutoConf)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"AutoConf\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"AutoConf\";\n\n    // Autoconf default protocol remains JSONP (#see http://ignf.github.io/geoportal-access-lib/latest/jsdoc/tutorial-optimize-getconfig.html)\n    if (!options) {\n        options = {};\n    }\n    options.protocol = options.protocol || \"JSONP\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.AutoConf\");\n    this.logger.trace(\"[Constructeur AutoConf (options)]\");\n\n    // si on a une liste de plusieurs clés en options, on la transforme en tableau (multiKeys)\n    if ((typeof this.options.apiKey === \"string\" || this.options.apiKey instanceof String) && Array.isArray(this.options.apiKey.split(\",\")) && this.options.apiKey.split(\",\").length > 1) {\n        this.options.apiKey = this.options.apiKey.split(\",\");\n    }\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // gestion de l'url du service par defaut\n    if (!this.options.serverUrl) {\n        // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n        // en fonction du nombre de clés en entrée et du paramètre layerId\n        if (!this.options.serverUrl) {\n            var lstUrlByDefault = DefaultUrlService.AutoConf.url(this.options.apiKey);\n\n            if (!this.options.layerId) {\n                // cas d'une autoconf simple\n                if (Array.isArray(this.options.apiKey) && this.options.apiKey.length > 0) {\n                    // cas d'un tableau de clés en entrée\n                    this.options.serverUrl = lstUrlByDefault.apiKeys;\n                } else {\n                    this.options.serverUrl = lstUrlByDefault.apiKey;\n                }\n            } else {\n                // cas d'une autoconf pour des couches aggrégées\n                this.options.serverUrl = lstUrlByDefault.aggregate + this.options.layerId;\n            }\n        }\n    }\n\n    // INFO\n    // le service ne repond pas en mode POST (405 Method Not Allowed)\n    if (this.options.protocol === \"XHR\" && this.options.httpMethod === \"POST\") {\n        this.logger.warn(\"Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !\");\n        this.options.httpMethod = \"GET\"; // on surcharge !\n    }\n\n    // #####################\n    // attributs d'instances\n    // #####################\n\n    /**\n     * Format forcé de la réponse du service : \"xml\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"xml\";\n}\n\n/**\n * @lends module:AutoConf#\n */\n\nAutoConf.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nAutoConf.prototype.constructor = AutoConf;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succès de la création de la requête\n */\nAutoConf.prototype.buildRequest = function (error, success) {\n    var scope = typeof window !== \"undefined\" ? window : {};\n\n    if (scope.Gp && scope.Gp.Config && scope.Gp.Config.generalOptions && scope.Gp.Config.layers) {\n        if (scope.Gp.Config.generalOptions.apiKeys[this.options.apiKey]) {\n            if (this.options.layerId) { // cas d'une autoconf + détaillée sur une couche agrégée\n                if (scope.Gp.Config.layers[this.options.layerId] && scope.Gp.Config.layers[this.options.layerId].aggregatedLayers) {\n                    this.logger.warn(\"Gp.Config existe déjà pour cette clé et cette couche\");\n                    this.options.onSuccess.call(this, scope.Gp.Config);\n                    return;\n                }\n            } else {\n                this.logger.warn(\"Gp.Config existe déjà pour cette clé\");\n                this.options.onSuccess.call(this, scope.Gp.Config);\n                return;\n            }\n        }\n    }\n\n    // requete par defaut\n    this.request = \"\";\n\n    // gestion de l'autoconf local\n    // Le fichier en local doit respecter le format de sortie du service.\n    //  - En XHR, le format est en xml\n    //  - En JSONP, le format est en xml encapsulé dans un json avec une fonction de callback\n    //    ex. callback ({\"http\":{\"status\":200,\"error\":null},\"xml\":\"...\"})\n    var bLocal;\n    if (this.options.serverUrl.indexOf(\"http://\") === -1) {\n        bLocal = true;\n    } else {\n        bLocal = false;\n    }\n\n    // FIXME param. KVP optionnel sur un service uniquement (pas sur un autoconf local !)\n    if (!bLocal && this.layerId) {\n        this.request = Helper.normalyzeParameters({\n            layerId : this.layerId\n        });\n    }\n\n    // normalement pas d'erreur d'autoconf...\n    (this.request || this.request === \"\")\n        ? success.call(this, this.request)\n        : error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")));\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succès de l'analyse de la réponse\n */\nAutoConf.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            layerId : this.options.layerId,\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onSuccess : success,\n            onError : error,\n            scope : this\n        };\n\n        AutoConfResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default AutoConf;\n","import Logger from \"../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Entête de la requête XSL\n *\n * @example\n * // header XSL\n * header = new RequestHeader ();\n * header.srsName = \"epsg:4326\";\n * header.toString();\n * // out ->\n * // <RequestHeader srsName=\"epsg:4326\"/>\n *\n * @constructor\n * @alias Gp.Formats.XLS.RequestHeader\n * @param {Object} options - options\n * @param {Object}   options.srsName - projection\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction RequestHeader (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur RequestHeader ()]\");\n\n    if (!(this instanceof RequestHeader)) {\n        throw new TypeError(\"RequestHeader constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {\n        srsName : \"EPSG:4326\"\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n}\n\nRequestHeader.prototype = {\n\n    /**\n     * @lends module:RequestHeader#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __SRSNAME__\n     */\n    template : \"<RequestHeader srsName=\\\"__SRSNAME__\\\"/>\",\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RequestHeader,\n\n    /**\n     * toString\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = null;\n        template = this.template;\n        template = template.replace(/__SRSNAME__/g, this.options.srsName);\n        this.requestString = template;\n        return this.requestString;\n    }\n};\n\nexport default RequestHeader;\n","/* jshint bitwise: false */\nimport Logger from \"../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Requête XLS\n *\n * @example\n * // request XSL\n * request = new Request ();\n * request.maximumResponses = 26;\n * request.methodName = \"GeocodeRequest\";\n * request.version = \"1.2\";\n * request.toString();\n * // out ->\n * // <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n * //   <!-- __LUS__ -->\n * //  </Request>\n *\n * @constructor\n * @alias Gp.Formats.XLS.Request\n * @param {Object} options - options\n * @param {Object}   options.maximumResponses - 25\n * @param {String}   options.methodName - nom de l'objet LUS, \"GeocodeRequest\" | \"ReverseGeocodeRequest\"\n * @param {String}   options.version - '1.2'\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction Request (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur Request ()]\");\n\n    if (!(this instanceof Request)) {\n        throw new TypeError(\"Request constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {\n        maximumResponses : 25,\n        methodName : null,\n        version : \"1.2\"\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n}\n\nRequest.prototype = {\n\n    /**\n     * @lends module:Request#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __MAXRESPONSES__, __METHODNAME__, __UUID__, __VERSION__\n     * __REQUESTSERVICE__\n     */\n    template : \"<Request maximumResponses=\\\"__MAXRESPONSES__\\\" methodName=\\\"__METHODNAME__\\\" requestID=\\\"__UUID__\\\" version=\\\"__VERSION__\\\">\" +\n        \"<!-- __REQUESTSERVICE__ -->\" +\n        \"</Request>\",\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Request,\n\n    /**\n     * an rfc4122 version 4 compliant guid\n     * @returns {String} guid\n     */\n    guid : function () {\n        // INFO\n        // cf. http://byronsalau.com/blog/how-to-create-a-guid-uuid-in-javascript/\n        return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = c === \"x\" ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    },\n\n    /**\n     * toString\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = null;\n        template = this.template;\n        template = template.replace(/__MAXRESPONSES__/g, this.options.maximumResponses);\n        template = template.replace(/__METHODNAME__/g, this.options.methodName);\n        template = template.replace(/__UUID__/g, this.guid());\n        template = template.replace(/__VERSION__/g, this.options.version);\n\n        this.requestString = template;\n        return this.requestString;\n    }\n};\n\nexport default Request;\n","import Logger from \"../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * @private\n *\n * @constructor\n * @alias Gp.Formats.XLS.AbstractService\n *\n * @param {Object} [options] - options\n */\nfunction AbstractService (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AbstractService ()]\");\n\n    if (!(this instanceof AbstractService)) {\n        throw new TypeError(\"AbstractService constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {};\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n}\n\n/**\n * @lends module:AbstractService#\n */\nAbstractService.prototype = {\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    strRequest : null,\n\n    /**\n     * objet Request\n     * @type {Request}\n     */\n    oRequest : null,\n\n    /**\n     * Filter\n     * @type {FilterExtension}\n     */\n    oFilter : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AbstractService,\n\n    /**\n     * Ajout d'un objet de type Request : GeocodeRequest / ReverseGeocodeRequest / RouteRequest\n     *\n     * @param {Object} oRequest - GeocodeRequest / ReverseGeocodeRequest / RouteRequest\n     */\n    addRequest : function (oRequest) {\n        this.logger.error(\"overwritten method !\");\n    },\n\n    /**\n     * Ajout d'un objet de type FilterExtension : GeocodeFilterExtension ou RouteRequestExtension\n     *\n     * @param {Object} oFilter - GeocodeFilterExtension ou RouteRequestExtension\n     */\n    addFilter : function (oFilter) {\n        this.logger.error(\"overwritten method !\");\n    },\n\n    /**\n     * toString\n     */\n    toString : function () {\n        this.logger.error(\"overwritten method !\");\n    }\n};\n\nexport default AbstractService;\n","import Logger from \"../Utils/LoggerByDefault\";\nimport RequestHeader from \"./XLS/RequestHeader\";\nimport Request from \"./XLS/Request\";\nimport AbstractService from \"./XLS/AbstractService\";\n\n/**\n * @classdesc\n *\n * standard OpenLS\n * standard XLS\n * (version 1.2)\n *\n * Réfs :\n *     - {@link http://schemas.opengis.net/ols/1.2/}\n *     - {@link http://www.opengeospatial.org/standards/ols}\n *     - {@link http://wxs.ign.fr/schemas/}\n *\n *\n * Création du template XLS (avec gestion des namespaces)\n * ------------------------\n * ```\n *   balise xsd : element name=\"XLS\" attribute name=\"version\" [(attribute ref=\"lang\")]\n * ```\n *\n * Exemple :\n * ```\n * <XLS xmlns=\"http://www.opengis.net/xls\" version=\"1.2\">\n *   < (ref. OLS) />\n * </XLS>\n * ```\n * ```\n * <xls:XLS xmlns:xls=\"http://www.opengis.net/xls\" version=\"1.2\">\n *   <xls: (ref. OLS) />\n * </xls:XLS>\n * ```\n *\n * Création des templates OLS pour LocationUtilityService\n * ------------------------------------------------------\n *\n * Exemple :\n *\n * ```\n * <RequestHeader srsName=\"epsg:4326\"/>\n * <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n *      <GeocodeRequest>\n *          <Address countryCode=\"PositionOfInterest\">\n *              <freeFormAddress>saint mandé</freeFormAddress>\n *          </Address>\n *      </GeocodeRequest>\n *  </Request>\n * ```\n * ```\n * <RequestHeader sessionID=\"\" />\n * <Request methodName=\"ReverseGeocodeRequest\" version=\"1.2\" requestID=\"\" maximumResponses=\"10\">\n *   <ReverseGeocodeRequest>\n *     <Position>\n *       <gml:Point xmlns:gml=\"http://www.opengis.net/gml\">\n *           <gml:pos>50.347775 3.205098</gml:pos>\n *       </gml:Point>\n *     </Position>\n *     <ReverseGeocodePreference>StreetAddress</ReverseGeocodePreference>\n *  </ReverseGeocodeRequest>\n * </Request>\n * ```\n * ```\n * Geocodage direct (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"GeocodeRequest\" attribute name=\"returnFreeForm\"\n *         element ref=\"xls:Address\"\n * ```\n * ```\n * Geocodage inverse (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"ReverseGeocodeRequest\"\n *         element ref=\"xls:Position\"\n *         element name=\"ReverseGeocodePreference\" (enumeration)\n * ```\n *\n * Il existe 3 sous ensembles d'objets :\n *     - RequestHeader\n *     - Request\n *     - ReverseGeocodeRequest, GeocodeRequest\n *\n * GeocodeRequest est composé d'un objet {@link Gp.Services.Geocode.Response.GeocodeLocation}.\n * ReverseGeocodeRequest est composé d'un objet {@link Gp.Services.ReverseGeocode.Response.ReverseGeocodeLocation}.\n *\n * Les locations font appels aux objets suivants qui possèdent des attributs spécifiques\n * en fonction du type de table de geocodage interrogé :\n *     - StreetAddress\n *     - CadastralParcel\n *     - PositionOfInterest\n *     - Administratif\n *\n *\n * et des élements sous jacents tels que :\n *     - ReverseGeocodePreference -> tables de geocodages :\n *         - StreetAddress\n *         - CadastralParcel\n *         - PositionOfInterest\n *         - Administratif (une balise par table)\n *     - Position -> standard GML 3.2.1\n *     - Address  -> cf. ci-dessous\n *\n * ```\n * Position (balise xsd) :\n *   ex. <Position><gml:Point xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>50.347775 3.205098</gml:pos></gml:Point></Position>\n *   ex. <Position><gml:CircleByCenterPoint xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>48.85978570614691 2.2913572761128878</gml:pos><gml:radius>1000</gml:radius></gml:CircleByCenterPoint></Position>\n *   (au choix)\n *   element ref=\"gml:Point\"\n *   element ref=\"gml:CircleByCenterPoint\"\n *   element ref=\"gml:Polygon\"\n *   element ref=\"gml:MultiPolygon\"\n *   les autres elemennts ne sont pas implémentés (QoP, Speed, Direction, Time, ...)\n *\n * Address (balise xsd) :\n *   ex. <Address countryCode=\"StreetAddress\"><freeFormAddress>1 r de paris saint denis</freeFormAddress></Address>\n *   attribute name=\"countryCode\"\n *     element name=\"freeFormAddress\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n *  ou\n *   ex. <Address countryCode=\"StreetAddress\"><StreetAddress><Street>1 rue Marconi</Street></StreetAddress><Place type=\"Municipality\">Metz</Place><PostalCode>57000</PostalCode></Address>\n *   attribute name=\"countryCode\"\n *     element ref=\"xls:StreetAddress\"\n *     element ref=\"xls:PostalCode\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n *\n * Place  (balise xsd) :\n *  ex. <Place type=\"Municipality\">Metz</Place>\n *  attribute name=\"type\"\n *   enumeration value=\"CountrySubdivision\"\n *   enumeration value=\"CountrySecondarySubdivision\"\n *   enumeration value=\"Municipality\"\n *   enumeration value=\"MunicipalitySubdivision\"\n *   enumeration value=\"choume-banchi-go\"\n *   enumeration value=\"Qualite\"\n *   enumeration value=\"Departement\"\n *   enumeration value=\"Bbox\"\n *   enumeration value=\"Commune\"\n *   enumeration value=\"Territoire\"\n *   enumeration value=\"Importance\"\n *   enumeration value=\"Nature\"\n *   (la liste n'est pas exhaustives...)\n *\n * StreetAddress (balise xsd) :\n *   ex. <StreetAddress><Street>1 rue Marconi</Street></StreetAddress>\n *   attribute name=\"locator\"\n *    element name=\"xls:Building\"\n *    element ref=\"xls:Street\"\n *\n * Street (balise xsd) :\n *   ex. <Street>1 rue Marconi</Street>\n *   attribute name=\"officialName\" (...)\n *\n * Building (balise xsd) :\n *   ex. <Building number=\"800\"/>\n *   attribute name=\"number\" attribute name=\"subdivision\" attribute name=\"buildingName\"\n *\n * PostalCode (balise xsd) :\n *   ex. <PostalCode>77182</PostalCode>\n *\n * ```\n *\n * Requête\n * -------\n *\n * 2 modes de requête sur les services : GET ou POST.\n *\n * Le mode GET n'est que l'encodage du XML en param (qxml) de la requête (donc pas d'implementation particulière ?)\n *\n * Modèle de classes\n * -----------------\n *\n * ```\n *                 ________  XLS ____________\n *               /            |               \\\n *   RequestHeader      AbstractService    Request\n *                            ^\n *                      ______|________________________\n *           (extends) /                               \\ (extends)\n *          LocationUtilityService                    RouteService\n *                    |                                    |\n *         ___________|___________                       (...)\n *       /                        \\\n * GeocodeRequest          ReverseGeocodeRequest\n *      |                          |\n *      |                     _____|______\n *      |                    /            \\\n *   Address              Preference  Position\n *      |\n *    /   \\\n * Place   StreetAddress\n *               |\n *             /   \\\n *       Street   Building\n * ```\n *\n * @example\n * // encapsule un objet 'LocationUtilityService'\n * // dans une coquille XSL (avec/sans namespace)\n * xsl = new XSL ();\n * xsl.namespace = false;\n * xsl.srsName = \"epsg:4326\";\n * xsl.maximumResponses = 26;\n * //   methodName fournit par l'objet 'lus'\n * //   requestID est calculé\n * xsl.setService (lus);\n * xsl.build ();\n * // out ->\n * // <XLS xmlns=\"http://www.opengis.net/xls\" version=\"1.2\">\n * // <RequestHeader srsName=\"epsg:4326\"/>\n * // <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n * //   < (ref. LocationUtilityService ou vide) />\n * //  </Request>\n * // </XLS>\n *\n *\n * @constructor\n * @alias Gp.Formats.XLS\n * @param {Object} options - options du constructeur\n * @param {Object} options.srsName - identifiant du Systeme de Coordonnees\n * @param {String}   options.maximumResponses - nombre de reponses max d'une requete\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction XLS (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur XLS()]\");\n\n    if (!(this instanceof XLS)) {\n        throw new TypeError(\"XLS constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = {\n        srsName : \"EPSG:4326\",\n        maximumResponses : 25\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            if (options[opt]) {\n                this.options[opt] = options[opt];\n            }\n        }\n    }\n}\n\n/**\n * Version\n */\nXLS.VERSION = \"1.2\";\n\nXLS.prototype = {\n\n    /**\n     * @lends module:XLS#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * namespace\n     * Surcharge les balises XLS d'un prefixe.\n     * Par defaut, false\n     * @type {Boolean}\n     */\n    namespace : false,\n\n    /**\n     * Objet Service\n     * LocationUtilityService ou RouteService\n     * @type {AbstractService}\n     */\n    oService : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : XLS,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __VERSION__, __NAMESPACE__, __SCHEMALOCATION__\n     * __REQUESTHEADER__, __REQUEST__\n     */\n    template : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" +\n        \"<XLS version=\\\"__VERSION__\\\"\\n\" +\n        \"__NAMESPACE__ \\n\" +\n        \"__SCHEMALOCATION__>\\n\" +\n        \"__REQUESTHEADER__\\n\" +\n        \"__REQUEST__\\n\" +\n        \"</XLS>\\n\",\n\n    /**\n     * Namespace par defaut.\n     *\n     * @returns {String} namespace\n     */\n    namespaceByDefault : function () {\n        var ns = [\n            \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\",\n            \"xmlns:xls=\\\"http://www.opengis.net/xls\\\"\",\n            \"xmlns:gml=\\\"http://www.opengis.net/gml\\\"\"\n        ];\n\n        return ns.join(\" \");\n    },\n\n    /**\n     * Schemalocation par defaut\n     *\n     * @returns {String} schemaLocation\n     */\n    schemaLocationByDefault : function () {\n        return \"xsi:schemaLocation=\\\"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd\\\"\";\n    },\n\n    /**\n     * Setter Service\n     * Ajout d'un objet de type LocationUtilityService (LUS) ou RouteService\n     *\n     * @param {Object} oService - GeoceodeRequest / ReverseGeocodeRequest ou RouteRequest\n     */\n    setService : function (oService) {\n        if (!oService) {\n            this.logger.trace(\"L'objet de type Service XSL n'est pas encore defini !?\");\n            return;\n        }\n\n        if (oService instanceof AbstractService) {\n            this.oService = oService;\n        } else {\n            this.logger.error(\"L'objet n'est pas du type 'LocationUtilityService' ou 'RouteService' !?\");\n        }\n    },\n\n    /**\n     * Getter Service\n     * Retourne un objet de type LocationUtilityService (LUS) ou RouteService\n     * ex. GeoceodeRequest / ReverseGeocodeRequest ou RouteRequest\n     *\n     * @returns {Object} service (LocationUtilityService|RouteService)\n     */\n    getService : function () {\n        return this.oService;\n    }\n};\n\n/**\n * Ajout d'un prefixe de namespace\n *\n * @todo impl. l'ajout de namespace\n * @param {Object} ns - ex. {key:xls, url:http://www.opengis.net/xls}\n * @param {String} request - requête\n * @returns {String} requête\n */\nXLS.prototype.addNamespace = function (ns, request) {\n    // INFO\n    // on recherche la clef dans les namespaces par defaut.\n    // si la clef n'existe pas dans les namespaceByDefault (), on l'ajoute.\n    // on surcharge toutes les balises, ex. XLS -> xls:XLS\n    // sauf celles qui sont déjà prefixées !\n\n    var keyNS = ns.key;\n    // var urlNS = ns.url; // TODO not yet implemented !\n\n    // recherche la clef dans les namespaces par defaut\n    var bFound = false;\n    var allNS = this.namespaceByDefault().split(\" \");\n    for (var index = 0; index < allNS.length; index++) {\n        var element = allNS[index];\n        var map = element.split(\"=\");\n        var key = map[0];\n        // var url = map[1]; // TODO not yet implemented !\n\n        if (key === \"xmlns:\" + keyNS) {\n            bFound = true;\n            break;\n        }\n    }\n\n    // TODO\n    // si on a une nouvelle clef, on l'ajoute...\n    if (!bFound) {\n        this.logger.warn(\"L'ajout d'un nouvel namespace n'est pas encore implémenté !\");\n        return request;\n    }\n\n    // surcharge toutes les balises\n    var regex;\n    var subst;\n\n    // regex balise ouvrante\n    regex = /<(\\w+[\\s>])/g;\n    subst = \"<\" + keyNS + \":$1\";\n    request = request.replace(regex, subst);\n\n    // regex balise fermante\n    regex = /<\\/(\\w+[\\s>])/g;\n    subst = \"</\" + keyNS + \":$1\";\n    request = request.replace(regex, subst);\n\n    this.logger.trace(\"namespace\", request);\n\n    return request;\n};\n\n/**\n * Construction de la requête\n * @returns {String} requête\n */\nXLS.prototype.build = function () {\n    // out ->\n    // <XLS xmlns=\"http://www.opengis.net/xls\" version=\"1.2\">\n    // <RequestHeader srsName=\"epsg:4326\"/>\n    // <Request maximumResponses=\"26\" methodName=\"GeocodeRequest\" requestID=\"uid1349081498314_388\" version=\"1.2\">\n    //   < (ref. LocationUtilityService ou vide) />\n    //  </Request>\n    // </XLS>\n\n    // as t on un objet de type Service XLS à disposition ?\n    var bService = !!this.getService();\n\n    var template = \"\";\n    template = this.template;\n    template = template.replace(/__VERSION__/g, XLS.VERSION);\n    template = template.replace(/__NAMESPACE__/g, this.namespaceByDefault);\n    template = template.replace(/__SCHEMALOCATION__/g, this.schemaLocationByDefault);\n\n    // header\n    var oHeader = new RequestHeader({\n        srsName : this.options.srsName\n    });\n    template = template.replace(/__REQUESTHEADER__/g, oHeader.toString());\n\n    // request\n    var oRequest = new Request({\n        maximumResponses : this.options.maximumResponses,\n        version : XLS.VERSION, // FIXME même version ?\n        methodName : bService ? this.getService().CLASSTYPE : null\n    });\n    template = template.replace(/__REQUEST__/g, oRequest.toString());\n\n    // objet lus ou route\n    if (bService) { // INFO : clef __REQUESTSERVICE__ dispo dans l'objet 'Request'\n        template = template.replace(/<!-- __REQUESTSERVICE__ -->/g, this.getService().toString());\n    }\n\n    if (!template) {\n        this.logger.warn(\"traduction tmpl : empty request !?\");\n        return;\n    }\n\n    // ajout d'un namespace\n    if (this.namespace) {\n        // ajout de xls par defaut\n        template = this.addNamespace({\n            key : \"xls\",\n            url : \"http://www.opengis.net/xls\"\n        }, template);\n    }\n\n    this.requestString = template;\n    this.logger.trace(\"traduction tmpl\", template);\n\n    // on retourne qqchose !\n    return this.requestString;\n};\n\nexport default XLS;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Location type \"Address\".\n *\n * Modèles de classes :\n * ------------------\n * ```\n *\n *                Address\n *            (est composé de)\n *           ______ | _________ _________________\n *          /       |          \\                 \\\n *      Place (StreetAddress ou FreeFormAddress) PostalCode\n *       (*)       _|_\n *                /   \\\n *           Street   Building\n * ```\n * ```\n * XSD\n * Address (balise xsd) :\n *   ex. <Address countryCode=\"StreetAddress\"><freeFormAddress>1 r de paris saint denis</freeFormAddress></Address>\n *   attribute name=\"countryCode\"\n *     element name=\"freeFormAddress\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n *  ou\n *   ex. <Address countryCode=\"StreetAddress\"><StreetAddress><Street>1 rue Marconi</Street></StreetAddress><Place type=\"Municipality\">Metz</Place><PostalCode>57000</PostalCode></Address>\n *   attribute name=\"countryCode\"\n *     element ref=\"xls:StreetAddress\"\n *     element ref=\"xls:PostalCode\"\n *     element ref=\"xls:Place\"\n *     element ref=\"gml:Envelope\"\n * ```\n *\n * @example\n * // simple\n * adr = new Address ({\n *    location : \"2 av pasteur, Saint-Mandée\",\n *    type : [\"StreetAddress\"],\n *    filter : {}\n * });\n * adr.toString();\n * // -> out\n * // <Address countryCode=\"StreetAddress\">\n * //   <freeFormAddress>2 av pasteur, Saint-Mandée</freeFormAddress>\n * // </Address>\n *\n * // avec filtre\n * adr = new Address ({\n *    location : {\n *      number : 2,\n *      street : \"av pasteur\",\n *      city : \"Saint-Mandée\", // FIXME filter Place \"commune\" ou \"municipality\" ?\n *      postalCode : \"94166\"   // FIXME filter Place ou balise PostalCode ?\n *    },\n *    type : [\"StreetAddress\"],\n *    filter : {\n *      territory : \"FR\",\n *      department : \"94\"\n *    }\n * });\n * adr.toString();\n * // -> out\n * // <Address countryCode=\"StreetAddress\">\n * //   <StreetAddress>\n * //   <Building number=\"2\"/>\n * //   <Street>2 av pasteur</Street>\n * // </StreetAddress>\n * // <Place type=\"municipality\">Saint-Mandée</Place>\n * // <Place type=\"departement\">94</Place>\n * // <Place type=\"territoire\">FR</Place>\n * // <PostalCode>94166</PostalCode>\n * // </Address>\n *\n * // avec bbox\n * adr = new Address ({\n *    location : \"2 av pasteur, Saint-Mandée\",\n *    type : [\"StreetAddress\"],\n *    filter : {\n *      bbox : {left:1, right:2, top:2, bottom:0}\n *    }\n * });\n * adr.toString();\n * // -> out\n * // <Address countryCode=\"StreetAddress\">\n * //   <freeFormAddress>2 av pasteur, Saint-Mandée</freeFormAddress>\n * //   <gml:Envelope>\n * //     <gml:lowerCorner>1 0</gml:lowerCorner>\n * //     <gml:upperCorner>2 2</gml:upperCorner>\n * //   </gl:Envelope>\n * // </Address>\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.Address\n * @param {Object} options - options\n * @param {Object} options.location - location\n * @param {String} options.type - type\n * @param {String} options.filter - filtres\n * @param {String} options.filter.* - Filtré en fonction des tables de geocodage interrogées\n *\n * @private\n */\nfunction Address (options) {\n    this.logger = Logger.getLogger(\"Address\");\n    this.logger.trace(\"[Constructeur Address ()]\");\n\n    if (!(this instanceof Address)) {\n        throw new TypeError(\"Address constructor cannot be called as a function.\");\n    }\n\n    // param par defaut\n    this.options = options || {\n        location : {},\n        type : [\"StreetAddress\"],\n        filter : {}\n    };\n\n    // param obligatoire\n    if (!this.options.location || Object.keys(this.options.location).length === 0) {\n        throw new Error(\"l'option 'location' n'est pas renseignée !\");\n    }\n}\n\n/**\n * @lends module:Address#\n */\nAddress.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Address,\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     *\n     * substitution des valeurs suivantes :\n     * - address :  __COUNTRYCODE__, __LOCATION__, __PLACE__, __POSTALCODE__, __ENVELOPE__\n     * - freeFormAddress : __FREEFORMADDRESSVALUE__\n     * - streetAddress : __STREET__, __BUILDING__\n     * - street : __STREETVALUE__\n     * - building : __BUILDINGVALUE__\n     * - place : __PLACEATYPE__, __PLACEVALUE__\n     * - postalCode : __POSTALCODEVALUE__\n     * - gml:envelope : __LEFT__ __BOTTOM__ __RIGHT__ __TOP__\n     *\n     * @todo gestion de l\"indentation\n     */\n    template : {\n        address : \"<Address countryCode=\\\"__COUNTRYCODE__\\\">\" +\n            \"__LOCATION__\" +\n            \"__PLACE__\" +\n            \"__POSTALCODE__\" +\n            \"__ENVELOPE__\" +\n            \"</Address>\",\n        location : {\n            freeFormAddress : \"<freeFormAddress>__FREEFORMADDRESSVALUE__</freeFormAddress>\",\n            streetAddress : {\n                container : \"<StreetAddress>\" +\n                    \"__STREET__\" +\n                    \"__BUILDING__\" +\n                    \"</StreetAddress>\",\n                building : \"<Building number=\\\"__BUILDINGVALUE__\\\"/>\",\n                street : \"<Street>__STREETVALUE__</Street>\"\n            }\n        },\n        place : \"<Place type=\\\"__PLACETYPE__\\\">__PLACEVALUE__</Place>\",\n        postalCode : \"<PostalCode>__POSTALCODEVALUE__</PostalCode>\",\n        envelope : \"<gml:Envelope>\" +\n            \"<gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner>\" +\n            \"<gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner>\" +\n            \"</gml:Envelope>\"\n    }\n\n};\n\n/**\n * toString\n *\n * @returns {String} requête\n */\nAddress.prototype.toString = function () {\n    var template = null;\n    template = this.template.address;\n    template = template.replace(/__COUNTRYCODE__/g, this.options.type);\n\n    // on a une adresse structurée ou libre ?\n    if (typeof this.options.location === \"string\") {\n        // balise freeFormeAddress\n        var tmplFreeFormAddress = this.template.location.freeFormAddress;\n        tmplFreeFormAddress = tmplFreeFormAddress.replace(/__FREEFORMADDRESSVALUE__/g, this.options.location);\n        template = template.replace(/__LOCATION__/g, tmplFreeFormAddress);\n    } else {\n        // balises Street et Building\n        var tmplBuilding = \"\";\n        var tmplStreet = \"\";\n\n        if (this.options.location.number) {\n            tmplBuilding = this.template.location.streetAddress.building;\n            tmplBuilding = tmplBuilding.replace(/__BUILDINGVALUE__/g, this.options.location.number);\n        }\n\n        if (this.options.location.street) {\n            tmplStreet = this.template.location.streetAddress.street;\n            tmplStreet = tmplStreet.replace(/__STREETVALUE__/g, this.options.location.street);\n        }\n\n        // balise streetAddress\n        var tmplStreetAddress = this.template.location.streetAddress.container;\n        tmplStreetAddress = tmplStreetAddress.replace(/__STREET__/g, tmplStreet);\n        tmplStreetAddress = tmplStreetAddress.replace(/__BUILDING__/g, tmplBuilding);\n        template = template.replace(/__LOCATION__/g, tmplStreetAddress);\n    }\n\n    // a t on un filtre de type PostalCode ?\n    var tmplPostalCode = \"\";\n    if (this.options.location.postalCode) {\n        tmplPostalCode = this.template.postalCode;\n        tmplPostalCode = tmplPostalCode.replace(/__POSTALCODEVALUE__/g, this.options.location.postalCode);\n    }\n\n    // a t on un filtre de type GML::Envelope ?\n    var tmplEnvelope = \"\";\n    if (this.options.filter) {\n        var bbox = this.options.filter.bbox;\n        if (bbox) {\n            tmplEnvelope = this.template.envelope;\n            tmplEnvelope = tmplEnvelope.replace(/__LEFT__/g, bbox.left);\n            tmplEnvelope = tmplEnvelope.replace(/__BOTTOM__/g, bbox.bottom);\n            tmplEnvelope = tmplEnvelope.replace(/__RIGHT__/g, bbox.right);\n            tmplEnvelope = tmplEnvelope.replace(/__TOP__/g, bbox.top);\n        }\n    }\n\n    // liste des filtres Place\n    var Places = [];\n\n    // a t on des filtres de type Place ?\n    var tmplPlace = \"\";\n    if (this.options.filter) {\n        var filters = this.options.filter;\n        for (var filter in filters) {\n            if (filter === \"bbox\") {\n                continue;\n            }\n            // FIXME gestion des filtres spécifiques IGN ?\n            tmplPlace = this.template.place;\n            tmplPlace = tmplPlace.replace(/__PLACETYPE__/g, filter);\n            tmplPlace = tmplPlace.replace(/__PLACEVALUE__/g, filters[filter]);\n            Places.push(tmplPlace);\n        }\n    }\n\n    // a t on un filtre de type Place dans location ?\n    var tmplPlaceCity = \"\";\n    if (this.options.location.city) {\n        tmplPlaceCity = this.template.place;\n        tmplPlaceCity = tmplPlaceCity.replace(/__PLACETYPE__/g, \"Municipality\");\n        tmplPlaceCity = tmplPlaceCity.replace(/__PLACEVALUE__/g, this.options.location.city);\n        Places.push(tmplPlaceCity);\n    }\n\n    template = template.replace(/__POSTALCODE__/g, tmplPostalCode);\n    template = template.replace(/__PLACE__/g, Places.join(\"\\n\"));\n    template = template.replace(/__ENVELOPE__/g, tmplEnvelope);\n\n    this.requestString = template;\n    return this.requestString;\n};\n\nexport default Address;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Ajouter des extensions de filtres spécifiques au service de geocodage de l'IGN.\n * Ceci permet de contrôler les options spécifiques de la table de geocodage intérrogées.\n *\n * @example\n * var ext =  new GeocodeFiltersExtension ();\n *     ext.add (new Administratif ());\n *     ext.add (new StreetAddress ());\n *     ext.add (new PositionOfInterest ());\n *     ext.add (new CadastralParcel ());\n *\n * ext.getNames ()\n * // --> out\n * // [Administratif, StreetAddress, PositionOfInterest, CadastralParcel]\n *\n * ext.getFilters ()\n * // --> out\n * // [Object, Object, Object, Object] = tableau d'objet GeocodeLocation\n *\n * ext.getFilter ('StreetAddress')\n * // --> out\n * // {Object} = objet GeocodeLocation\n *\n * ext.getAttributs ('StreetAddress')\n * // --> out\n * // [\"bbox\", \"number\", \"ID\", \"IDTR\", \"postalCode\", \"quality\", \"street\", \"territoire\", \"commune\", \"department\", \"insee\", \"municipality\"]\n *\n * ext.setPlaceAttributs ('StreetAddress', {number:'', territoire:'', quality:'', fake:''})\n * // --> out\n * // (fake est écarté car il n'appartient pas à la liste !)\n *\n * ext.getPlaceAttributs ('StreetAddress')\n * // --> out\n * // {number : '', territoire : '', quality : ''}\n *\n * // Comment ajouter des filtres spécifiques au service de geocodage ?\n * var req = new GeocodeRequest ({\n *      location : \"saint mandé\",\n *      returnFreeForm : true,\n *      filterOptions : {\n *          type : ['PositionOfInterest'], <-- ajouter une extension afin de gerer les attributs de cette table de geocodage !\n *          (...)\n *      }\n *  })\n *  req.addFilter (new PositionOfInterest ());\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.GeocodeFilterExtension\n *\n * @private\n */\nfunction GeocodeFilterExtension () {\n    this.logger = Logger.getLogger(\"GeocodeFilterExtension\");\n    this.logger.trace(\"[Constructeur GeocodeFilterExtension ()]\");\n\n    if (!(this instanceof GeocodeFilterExtension)) {\n        throw new TypeError(\"GeocodeFilterExtension constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Tableau de filtres (table de geocodage)\n     */\n    this.filters = [];\n}\n\n/**\n * @lends module:GeocodeFilterExtension#\n */\nGeocodeFilterExtension.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeFilterExtension,\n\n    /**\n     * Ajout d'un filtre\n     *\n     * @param {Object} oGeocodeLocation - objet de type 'GeocodeLocation'\n     */\n    addFilterExtensions : function (oGeocodeLocation) {\n        // FIXME test sur le type d'objet !\n        if (oGeocodeLocation) {\n            // FIXME ou test sur ses propriétés !\n            this.filters.push(oGeocodeLocation);\n        }\n    },\n\n    // getter\n\n    /**\n     * Tableau de noms (tables de geocodage)\n     *\n     * @returns {Array.<String>} liste des noms de filtres\n     */\n    getNames : function () {\n        var names = [];\n        for (var idx in this.filters) {\n            names.push(this.filters[idx].CLASSNAME);\n        }\n        this.logger.trace(names);\n        return names;\n    },\n\n    /**\n     * Retourne une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @returns {Object} filtre\n     */\n    getFilter : function (name) {\n        var filter = null;\n        for (var idx in this.filters) {\n            if (this.filters[idx].CLASSNAME === name) {\n                filter = this.filters[idx];\n            }\n        }\n        this.logger.trace(filter);\n        return filter;\n    },\n\n    /**\n     * Tableau d'objects (tables de geocodage)\n     *\n     * @returns {Array.<Object>} liste des filtres\n     */\n    getFilters : function () {\n        this.logger.trace(this.filters);\n        return this.filters;\n    },\n\n    /**\n     * Récupère la liste des attributs (filtres) sur une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @returns {Array} liste des attributs d'un filtre\n     */\n    getAttributs : function (name) {\n        var attributs = [];\n        for (var idx in this.filters) {\n            if (this.filters[idx].CLASSNAME === name) {\n                attributs = this.filters[idx].attributesList;\n            }\n        }\n        this.logger.trace(attributs);\n        return attributs;\n    },\n\n    /**\n     * Ajout des attributs (filtres) sur une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @param {Object} options - options de la table de geocodage\n     */\n    setPlaceAttributs : function (name, options) {\n        var filter = this.getFilter(name);\n        var attributs = this.getAttributs(name);\n        for (var idx in attributs) {\n            var value = attributs[idx];\n            if (options[value]) {\n                filter.placeAttributes[value] = options[value];\n            }\n        }\n    },\n\n    /**\n     * Retourne les attributs (filtres) sur une table de geocodage\n     *\n     * @param {String} name - nom de la table de geocodage\n     * @returns {Array} liste des attributs d'un filtre\n     */\n    getPlaceAttributs : function (name) {\n        var places = {};\n        for (var idx in this.filters) {\n            if (this.filters[idx].CLASSNAME === name) {\n                places = this.filters[idx].placeAttributes;\n            }\n        }\n        this.logger.trace(places);\n        return places;\n    }\n};\n\nexport default GeocodeFilterExtension;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport Address from \"./model/Address\";\nimport GeocodeFilterExtension from \"./GeocodeFilterExtension\";\n\n/**\n * @classdesc\n * Requête de geocodage direct\n *\n * ```\n * XSD\n * Geocodage direct (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"GeocodeRequest\" attribute name=\"returnFreeForm\"\n *         element ref=\"xls:Address\"\n * ```\n *\n * @example\n * // creation de l'objet Geocode an ajoutant un objet Address\n * req = new GeocodeRequest ();\n * req.returnFreeForm = true; // TODO !\n * req.addAddress (new Address ({\n *      location : \"saint mandé\",\n *      type : ['PositionOfInterest'],\n *      filter : {\n *          (...)\n *      }\n * }));\n * req.toString();\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n *\n * // creation de l'objet Geocode avec les options uniquement\n * req = new GeocodeRequest ({\n *      location : \"saint mandé\",\n *      returnFreeForm : true,\n *      filterOptions : {\n *          type : ['PositionOfInterest'],\n *          (...)\n *      }\n * });\n * req.toString();\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n * @constructor\n *\n * @alias Gp.Formats.XLS.LocationUtilityService.GeocodeRequest\n * @param {Object} options - options\n * @param {Object}   options.location - location\n * @param {String}   options.returnFreeForm - returnFreeForm\n * @param {String}   options.filterOptions - filtres\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction GeocodeRequest (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur GeocodeRequest ()]\");\n\n    if (!(this instanceof GeocodeRequest)) {\n        throw new TypeError(\"GeocodeRequest constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {};\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    // TODO\n    // gestion de l'option 'returnFreeForm' si elle n'est pas renseignée dans les options !\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"GeocodeRequest\";\n}\n\nGeocodeRequest.prototype = {\n\n    /**\n     * @lends module:GeocodeRequest#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    strRequest : null,\n\n    /**\n     * Addresse\n     * @type {Address}\n     */\n    oAddress : null,\n\n    /**\n     * Filter\n     * @type {GeocodeFilterExtension}\n     */\n    oFilter : null,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __ADDRESS__, __RETURNFREEFORM__\n     */\n    template : \"<GeocodeRequest returnFreeForm=\\\"__RETURNFREEFORM__\\\">\" +\n        \"__ADDRESS__\" +\n        \"</GeocodeRequest>\",\n\n    /**\n     * Ajout d'un objet de type Adresse\n     *\n     * @param {Object} oAddress - Adresse\n     */\n    addAddress : function (oAddress) {\n        if (oAddress instanceof Address) {\n            this.oAddress = oAddress;\n        }\n    },\n\n    /**\n     * Ajout d'un objet de type GeocodeFilterExtension\n     *\n     * @param {Object} oFilter - GeocodeFilterExtension\n     */\n    addFilter : function (oFilter) {\n        // FIXME gestion des filtres à partir des tables de geocodages\n        if (oFilter instanceof GeocodeFilterExtension) {\n            this.oFilter = oFilter;\n        }\n    },\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeRequest,\n\n    /**\n     * toString\n     *\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = \"\";\n        template = this.template;\n\n        // soit on a déjà un objet Address instancié,\n        // sinon, on le fabrique via les options\n        if (!this.oAddress) {\n            var settings = {};\n            settings.location = this.options.location;\n            settings.type = this.options.filterOptions.type || [\"StreetAddress\"];\n            settings.filter = this.options.filterOptions;\n            delete settings.filter.type; // on ne met pas le 'type' dans les filtres...\n\n            // gestion des filtres\n            if (this.oFilter) {\n                // on reconstruit les filtres\n                settings.filter = {};\n\n                // on determine la liste des filtres possibles\n                // pour chaque table de geocodage en param\n                for (var idx in settings.type) {\n                    var filter = settings.type[idx];\n                    var oFilter = this.oFilter.getFilter(filter);\n\n                    if (!oFilter) {\n                        this.logger.warn(\"Le filtre '\" + filter + \"' n'existe pas !?\");\n                        continue;\n                    }\n\n                    var mFilter = this.options.filterOptions;\n\n                    // correspondances des attributs de filtres possibles avec ceux qui sont en options\n                    var attributs = oFilter.attributesList;\n                    for (var idxe = 0; idxe < attributs.length; idxe++) {\n                        var key = attributs[idxe];\n                        if (mFilter[key]) {\n                            var matchingKey = oFilter.serviceAttributes[idxe];\n                            oFilter.placeAttributes[matchingKey] = mFilter[key];\n                            this.logger.trace(\"Selection du filtre '\" + key + \"' sur le type '\" + filter + \"'.\");\n                        }\n                    }\n\n                    // ajout des valeurs des filtres\n                    var places = oFilter.placeAttributes;\n                    for (var kplace in places) {\n                        if (places.hasOwnProperty(kplace)) {\n                            settings.filter[kplace] = places[kplace];\n                        }\n                    }\n                }\n            }\n\n            this.oAddress = new Address(settings);\n            if (!this.oAddress) {\n                throw new Error(\"La construction de l'adresse n'est pas correctement definie !?\");\n            }\n        }\n\n        // FIXME gestion des filtres pour un objet Address déjà instancié ?\n\n        template = template.replace(/__ADDRESS__/g, this.oAddress.toString());\n        template = template.replace(/__RETURNFREEFORM__/g, (this.options.returnFreeForm) ? \"true\" : \"false\");\n\n        this.strRequest = template;\n        return this.strRequest;\n    }\n};\n\nexport default GeocodeRequest;\n","import Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Location de type Position\n *\n * ```\n * XSD\n * Position (balise xsd) :\n *   ex. <Position><gml:Point xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>50.347775 3.205098</gml:pos></gml:Point></Position>\n *   ex. <Position><gml:CircleByCenterPoint xmlns:gml=\"http://www.opengis.net/gml\"><gml:pos>48.85978570614691 2.2913572761128878</gml:pos><gml:radius>1000</gml:radius></gml:CircleByCenterPoint></Position>\n *   (au choix)\n *   element ref=\"gml:Point\"\n *   element ref=\"gml:CircleByCenterPoint\"\n *   element ref=\"gml:Polygon\"\n *   element ref=\"gml:MultiPolygon\"\n * ```\n *\n * FIXME les autres elements ne sont pas implémentés (QoP, Speed, Direction, Time, ...) ?\n *\n * ```\n * template : \"<Position>\n *                  __GMLPOINT__\n *                  __GMLFILTER__\n *             </Position>\"\n * ```\n * ```\n * GML : {\n *  pos     : \"<gml:pos>__X__ __Y__</gml:pos>\",\n *  point   : \"<gml:Point xmlns:gml=\\\"http://www.opengis.net/gml\\\">__POS__</gml:Point>\",\n *  circle  : \"<gml:CircleByCenterPoint xmlns:gml=\\\"http://www.opengis.net/gml\\\">__POS__<gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>\",\n *  // not yet implemented !\n *  polygon      : \"\",\n *  multipolygon : \"\"\n * }\n * ```\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.Position\n * @param {Object} options - options données en entrée\n * @param {Object} options.position - x/y\n * @param {Object} options.filter - filtre\n * @param {Object} options.filter.circle - un cercle\n * @param {Object} options.filter.polygon - un polygone\n *\n * @private\n */\nfunction Position (options) {\n    this.logger = Logger.getLogger(\"Position\");\n    this.logger.trace(\"[Constructeur Position ()]\");\n\n    if (!(this instanceof Position)) {\n        throw new TypeError(\"Position constructor cannot be called as a function.\");\n    }\n\n    // param par defaut\n    this.options = options || {};\n\n    // param obligatoire\n    if (!this.options.position) {\n        throw new Error(\"l'option 'position' n'est pas renseignée !\");\n    }\n}\n\n/**\n * @lends module:Position#\n */\nPosition.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Position,\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     *\n     * substitution des valeurs suivantes :\n     * __GMLPOINT__ __GMLFILTER__\n     * __X__ __Y__ __RADIUS__\n     * __XY__\n     * @todo indentation XML\n     * @todo implementation classe GML\n     */\n    template : {\n        position : \"<Position>\" +\n            \"__GMLPOINT__\" +\n            \"__GMLFILTER__\" +\n            \"</Position>\",\n        gml : {\n            point : \"<gml:Point xmlns:gml=\\\"http://www.opengis.net/gml\\\"><gml:pos>__X__ __Y__</gml:pos></gml:Point>\",\n            pos : null,\n            filter : {\n                bbox : \"<gml:Envelope xmlns:gml=\\\"http://www.opengis.net/gml\\\">\" +\n                    \"<gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner>\" +\n                    \"<gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner>\" +\n                    \"</gml:Envelope>\",\n                circle : \"<gml:CircleByCenterPoint xmlns:gml=\\\"http://www.opengis.net/gml\\\"><gml:pos>__X__ __Y__</gml:pos><gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>\",\n                polygon : \"<gml:Polygon xmlns:gml=\\\"http://www.opengis.net/gml\\\"><gml:exterior><gml:LinearRing><gml:posList>__XY__</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>\",\n                multipolygon : null\n            }\n        }\n    }\n};\n\n/**\n * toString\n *\n * @returns {String} requête\n */\nPosition.prototype.toString = function () {\n    var template = this.template.position;\n\n    var tmplGmlPoint = this.template.gml.point;\n    tmplGmlPoint = tmplGmlPoint.replace(/__X__/g, this.options.position.x);\n    tmplGmlPoint = tmplGmlPoint.replace(/__Y__/g, this.options.position.y);\n\n    var tmplGmlFilter = \"\";\n    if (this.options.filter) {\n        var filter = this.options.filter;\n\n        for (var name in filter) {\n            switch (name) {\n                case \"circle\":\n                    tmplGmlFilter = this.template.gml.filter[name];\n                    tmplGmlFilter = tmplGmlFilter.replace(/__X__/g, filter[name].x);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__Y__/g, filter[name].y);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__RADIUS__/g, filter[name].radius);\n                    break;\n                case \"bbox\":\n                    tmplGmlFilter = this.template.gml.filter[name];\n                    tmplGmlFilter = tmplGmlFilter.replace(/__LEFT__/g, filter[name].left);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__BOTTOM__/g, filter[name].bottom);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__RIGHT__/g, filter[name].right);\n                    tmplGmlFilter = tmplGmlFilter.replace(/__TOP__/g, filter[name].top);\n                    break;\n                case \"polygon\":\n                    // FIXME implementation simple du polygone !\n                    // aucun test de fermeture du polygone, ni de gestion des trous !\n                    tmplGmlFilter = this.template.gml.filter[name];\n                    var strPoints = \"\";\n                    var lstPoints = filter[name];\n                    for (var i = 0; i < lstPoints.length; i++) {\n                        var coord = lstPoints[i];\n                        if (Array.isArray(coord)) {\n                            this.logger.error(\"Holes are not implemented !\");\n                            break;\n                        }\n                        if ((coord.x && coord.y) || (coord.x === 0 || coord.y === 0)) {\n                            strPoints += coord.x + \" \" + coord.y;\n                        }\n                        if (lstPoints.length !== i + 1) {\n                            strPoints += \" \";\n                        }\n                    }\n                    tmplGmlFilter = tmplGmlFilter.replace(/__XY__/g, strPoints);\n                    break;\n                case \"multipolygon\":\n                    this.logger.warn(\"Filter '\" + name + \"' is not yet implemented !\");\n                    break;\n                default:\n                    this.logger.error(\"This filter '\" + name + \"' is not useful !\");\n            }\n        }\n    }\n\n    template = template.replace(/__GMLPOINT__/g, tmplGmlPoint);\n    template = template.replace(/__GMLFILTER__/g, tmplGmlFilter);\n\n    this.requestString = template;\n    return this.requestString;\n};\n\nexport default Position;\n","import Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Preference (Reverse)\n *\n * FIXME liste des types de tables de geocodage\n *\n * ```\n * template : \"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>\"\n * ```\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService.Preference\n * @param {String} type - type de table de geocodage\n *\n * @private\n *\n */\n\nfunction Preference (type) {\n    this.logger = Logger.getLogger(\"Preference\");\n    this.logger.trace(\"[Constructeur Preference ()]\");\n\n    if (!(this instanceof Preference)) {\n        throw new TypeError(\"Preference constructor cannot be called as a function.\");\n    }\n\n    /**\n     * type de table de geocodage\n     * @type {Array.<String>}\n     */\n    this.type = type;\n}\n\n/**\n * @lends module:Preference#\n */\nPreference.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : Preference,\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Template de la requête.\n     *\n     * substitution des valeurs suivantes :\n     *  __TYPE__\n     *\n     */\n    template : \"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>\"\n};\n\n/**\n * toString\n *\n * @returns {String} requête\n */\nPreference.prototype.toString = function () {\n    var Preferences = [];\n    var tmplPreference = \"\";\n    for (var idx = 0; idx < this.type.length; idx++) {\n        tmplPreference = this.template;\n        tmplPreference = tmplPreference.replace(/__TYPE__/g, this.type[idx]);\n        Preferences.push(tmplPreference);\n    }\n\n    this.strRequest = Preferences.join(\"\\n\");\n    return this.strRequest;\n};\n\nexport default Preference;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport Position from \"./model/Position\";\nimport Preference from \"./model/Preference\";\n\n/**\n * @classdesc\n *\n * Requête de geocodage inverse\n *\n * XSD\n * ```\n * Geocodage inverse (balise xsd) :\n *   element ref=\"RequestHeader\" [ (attribute name=\"clientName\" attribute name=\"clientPassword\" attribute name=\"sessionID\" attribute name=\"srsName\" attribute name=\"MSID\") ]\n *     element name=\"Request\" attribute name=\"methodName\" attribute name=\"version\" attribute name=\"requestID\" [ attribute name=\"maximumResponses\" ]\n *       element name=\"ReverseGeocodeRequest\"\n *         element ref=\"xls:Position\"\n *         element name=\"ReverseGeocodePreference\" (enumeration)\n * ```\n *\n * @example\n * // creation de l\"objet ReverseGeocode\n * req = new ReverseGeocodeRequest ();\n * req.addPosition (new Position (position:{x: , y: }));\n * req.addPreference ([\"StreetAddress\"]);\n * req.toString();\n * // out ->\n * // <ReverseGeocodeRequest>\n * //     <Position>\n * //       <gml:Point xmlns:gml=\"http://www.opengis.net/gml\">\n * //           <gml:pos>50.347775 3.205098</gml:pos>\n * //       </gml:Point>\n * //     </Position>\n * //     <ReverseGeocodePreference>StreetAddress</ReverseGeocodePreference>\n * //  </ReverseGeocodeRequest>\n * @constructor\n * @alias Gp.Formats.XLS.ReverseGeocodeRequest\n * @param {Object} options - options\n * @param {Object}   options.position - position\n * @param {String}   options.returnFreeForm - returnFreeForm\n * @param {String}   options.filterOptions - filtres\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction ReverseGeocodeRequest (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur ReverseGeocodeRequest ()]\");\n\n    if (!(this instanceof ReverseGeocodeRequest)) {\n        throw new TypeError(\"ReverseGeocodeRequest constructor cannot be called as a function.\");\n    }\n\n    // options par defaut\n    this.options = options || {};\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"ReverseGeocodeRequest\";\n}\n\nReverseGeocodeRequest.prototype = {\n\n    /**\n     * @lends module:ReverseGeocodeRequest#\n     */\n\n    /**\n     * request (out)\n     * @type {String}\n     */\n    strRequest : null,\n\n    /**\n     * Position\n     * @type {Position}\n     */\n    oPosition : null,\n\n    /**\n     * Preference\n     * @type {Preference}\n     */\n    oPreference : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ReverseGeocodeRequest,\n\n    /**\n     * Template de la requête.\n     * substitution des valeurs suivantes :\n     * __POSITION__, __PREFERENCE__, __RETURNFREEFORM__\n     */\n    template : \"<ReverseGeocodeRequest returnFreeForm=\\\"__RETURNFREEFORM__\\\">\" +\n        \"__POSITION__\" +\n        \"__PREFERENCE__\" +\n        \"</ReverseGeocodeRequest>\",\n\n    /**\n     * Ajout d\"un objet de type Position\n     *\n     * @param {Object} oPosition - Position\n     */\n    addPosition : function (oPosition) {\n        if (oPosition instanceof Position) {\n            this.oPosition = oPosition;\n        }\n    },\n\n    /**\n     * Ajout d\"une liste de table de référence LUS :\n     * [StreetAddress, PointOfInterest, CadastralParcel, Administrativ]\n     *\n     * @param {Object} oPreference - Preference\n     */\n    addPreferences : function (oPreference) {\n        if (oPreference instanceof Preference) {\n            this.oPreference = oPreference;\n        }\n    },\n\n    /**\n     * toString\n     * @returns {String} requête\n     */\n    toString : function () {\n        var template = \"\";\n        template = this.template;\n\n        // si on a déjà un objet Preference instancié,\n        // sinon, on le fabrique via les options\n        if (!this.oPreference) {\n            this.oPreference = new Preference(this.options.filterOptions.type || [\"StreetAddress\"]);\n            if (!this.oPreference) {\n                throw new Error(\"Les preferences ne sont pas definies !?\");\n            }\n        }\n        template = template.replace(/__PREFERENCE__/g, this.oPreference.toString());\n\n        // si on a déjà un objet Position instancié,\n        // sinon, on le fabrique via les options\n        if (!this.oPosition) {\n            var settings = {\n                position : this.options.position,\n                filter : {}\n            };\n\n            // FIXME gestion des filtres ?\n            if (this.options.filterOptions) {\n                settings.filter = this.options.filterOptions;\n                delete settings.filter.type; // pas besoin ?\n            }\n            this.oPosition = new Position(settings);\n            if (!this.oPosition) {\n                throw new Error(\"La position et ses filtres ne sont pas definis !?\");\n            }\n        }\n        template = template.replace(/__POSITION__/g, this.oPosition.toString());\n        template = template.replace(/__RETURNFREEFORM__/g, (this.options.returnFreeForm) ? \"true\" : \"false\");\n\n        this.strRequest = template;\n        return this.strRequest;\n    }\n};\n\nexport default ReverseGeocodeRequest;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport AbstractService from \"./AbstractService\";\nimport GeocodeRequest from \"./LocationUtilityService/GeocodeRequest\";\nimport ReverseGeocodeRequest from \"./LocationUtilityService/ReverseGeocodeRequest\";\nimport GeocodeFilterExtension from \"./LocationUtilityService/GeocodeFilterExtension\";\n\n/**\n * @classdesc\n *\n * Requête de type LocationUtilityService (LUS)\n * (Factory)\n *\n * @example\n * // encapsule un objet dans une coquille XSL, Factory sur les objets Geocode/ReverseGeocode\n * lus = new LocationUtilityService ();\n * lus.addRequest (req);\n * lus.toString();\n *  ou\n * lus = new LocationUtilityService ({\n *      location : \"saint mandé\",\n *      returnFreeForm : true,\n *      filterOptions : {\n *          type :  ['PositionOfInterest']\n *      }\n * });\n * lus.toString();\n *\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n *\n * // creation de l'objet Geocode\n * req = new GeocodeRequest ();\n * req.addAddress (new Address (/*todo/*));\n * req.toString();\n * // out ->\n * // <GeocodeRequest>\n * //   <Address countryCode=\"PositionOfInterest\">\n * //     <freeFormAddress>saint mandé</freeFormAddress>\n * //   </Address>\n * // </GeocodeRequest>\n *\n * // creation de l'objet ReverseGeocode\n * req = new ReverseGeocodeRequest ();\n * req.addPosition (new Position (position:{x: , y: }));\n * req.addPreference (['StreetAddress']);\n * req.toString();\n * // out ->\n * // <ReverseGeocodeRequest>\n * //     <Position>\n * //       <gml:Point xmlns:gml=\"http://www.opengis.net/gml\">\n * //           <gml:pos>50.347775 3.205098</gml:pos>\n * //       </gml:Point>\n * //     </Position>\n * //     <ReverseGeocodePreference>StreetAddress</ReverseGeocodePreference>\n * //  </ReverseGeocodeRequest>\n *\n * @constructor\n * @alias Gp.Formats.XLS.LocationUtilityService\n * @param {Object} options - options\n * @param {Object}   options.location - location\n * @param {String}   options.position - position : {x : \"\", y : \"\"}\n * @param {String}   options.returnFreeForm - true|false\n * @param {Object}   options.filterOptions - filtres\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n *\n * @private\n */\nfunction LocationUtilityService (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur LocationUtilityService ()]\");\n\n    if (!(this instanceof LocationUtilityService)) {\n        throw new TypeError(\"LocationUtilityService constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe\n     */\n    this.CLASSNAME = \"LocationUtilityService\";\n\n    /**\n     * Type de classe de geocodage\n     * ex. GeocodeRequest ou ReverseGeocodeRequest\n     */\n    this.CLASSTYPE = null;\n\n    // appel du constructeur par heritage\n    AbstractService.apply(this, arguments);\n\n    // on determine le type de geocodage si les options sont renseignées\n    if (this.options) {\n        this.CLASSTYPE = (this.options.location) ? \"GeocodeRequest\" : (this.options.position) ? \"ReverseGeocodeRequest\" : null;\n    }\n}\n\n/**\n * @lends module:LocationUtilityService#\n */\nLocationUtilityService.prototype = Object.create(AbstractService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nLocationUtilityService.prototype.constructor = LocationUtilityService;\n\n/**\n * (overwrite) Ajout d'un objet de type LUS : GeocodeRequest ou ReverseGeocodeRequest\n *\n * @param {Object} oLUSRequest - objet de type LUS\n */\nLocationUtilityService.prototype.addRequest = function (oLUSRequest) {\n    // on determine le type de geocodage\n    this.CLASSTYPE = oLUSRequest.CLASSNAME;\n\n    // on controle les types acceptés\n    switch (this.CLASSTYPE) {\n        case \"GeocodeRequest\":\n        case \"ReverseGeocodeRequest\":\n            this.oRequest = oLUSRequest;\n            break;\n        default:\n            throw new Error(\"Ce n'est pas un objet de type 'LUS Request' !?\");\n    }\n};\n\n/**\n * (overwrite) Ajout d'un objet de type GeocodeFilterExtension\n *\n * @param {Object} oFilter - objet de type Filtre\n */\nLocationUtilityService.prototype.addFilter = function (oFilter) {\n    // FIXME gestion des filtres à partir des tables de geocodages\n    if (oFilter instanceof GeocodeFilterExtension) {\n        this.oFilter = oFilter;\n    }\n};\n\n/**\n * (overwrite) toString\n *\n * @returns {String} requête\n */\nLocationUtilityService.prototype.toString = function () {\n    // soit, on a un objet LUS Request déjà instancié\n    // sinon, il faut le construire à partir des options à disposition\n    if (!this.oRequest) {\n        // il nous faut des options\n        if (!this.options) {\n            throw new Error(\"Les options ne sont pas renseignées, impossible de construire la requête !\");\n        }\n\n        // si les options 'location' et 'position' sont renseignées,\n        // on prendra par defaut le choix du geocodage direct\n        if (this.CLASSTYPE === \"GeocodeRequest\") {\n            var settingsDirect = {\n                location : this.options.location,\n                returnFreeForm : this.options.returnFreeForm,\n                filterOptions : this.options.filterOptions || {}\n            };\n            this.oRequest = new GeocodeRequest(settingsDirect);\n            // ajout des filtres spécifiques au service du geocodage direct de l'IGN\n            if (this.oFilter) {\n                this.oRequest.addFilter(this.oFilter);\n            }\n        } else if (this.CLASSTYPE === \"ReverseGeocodeRequest\") {\n            var settingsInv = {\n                position : this.options.position,\n                returnFreeForm : this.options.returnFreeForm,\n                filterOptions : this.options.filterOptions || {}\n            };\n            this.oRequest = new ReverseGeocodeRequest(settingsInv);\n        } else {\n            this.logger.error(\"impossible de determiner le type de geocodage : Direct ou Inverse !?\");\n        }\n    }\n\n    // objet indefini !?\n    if (!this.oRequest) {\n        throw new Error(\"Type de Geocodage indefini !\");\n    }\n\n    this.strRequest = this.oRequest.toString();\n    return this.strRequest;\n};\n\nexport default LocationUtilityService;\n","\n/**\n * @classdesc\n *\n * Liste des attributs des tables de geocodage\n * @constructor\n * @alias Gp.Services.Geocode.Request.GeocodeLocation\n * @private\n */\nfunction GeocodeLocation () {\n    if (!(this instanceof GeocodeLocation)) {\n        throw new TypeError(\"GeocodeLocation constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Objet qui peut prendre comme propriétés les valeurs du tableau serviceAttributes\n     * @type {Object}\n     */\n    this.placeAttributes = {};\n\n    /**\n     * Tableau qui liste les attributs spécifiques selon le type de la GeocodeLocation.\n     * Ces attributs correspondent à ceux saisis par l'utilisateur (légèrement différents de ceux du service)\n     * @type {String[]}\n     */\n    this.attributesList = [];\n\n    /**\n     * Tableau qui liste les attributs spécifiques selon le type de la GeocodeLocation\n     * Ces attributs correspondent à ceux interprétés par le service (balises Place).\n     * @type {String[]}\n     */\n    this.serviceAttributes = [];\n}\n\n/**\n * @lends module:GeocodeLocation\n */\nGeocodeLocation.prototype = {\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeLocation\n\n};\n\nexport default GeocodeLocation;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un résultat de géocodage de type StreetAddress.\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.StreetAddress\n * @private\n */\nfunction StreetAddress () {\n    if (!(this instanceof StreetAddress)) {\n        throw new TypeError(\"StreetAddress constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     * @type {String}\n     */\n    this.CLASSNAME = \"StreetAddress\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodeLocation de type StreetAddress\n     * - **bbox** : Emprise de l'adresse dans le système de coordonnées demandé {left, right, top, bottom}. *{Object}*\n     * - **ID** : Identifiant BD ADRESSE dans le cas où le résultat est une adresse. *{String}*\n     * - **IDTR** : Identifiant \"Route Adresse\" de la voie portant l'adresse dans la base BD ADRESSE. *{String}*\n     * - **quality** : Indicateur de qualité du géocodage (pour plus d'infos : http://api.ign.fr/tech-docs-js/fr/developpeur/search.html *{String}*\n     * - **territory** : Code du territoire français où se situe l'adresse *{String}*\n     * - **commune** : Ville l'adresse. *{String}*\n     * - **department** : Département l'adresse. *{String}*\n     * - **insee** : Code INSEE de l'adresse. *{Number}*\n     * - **municipality** : Municipalité de l'adresse. *{String}*\n     */\n\n    this.attributesList = [\"bbox\", \"ID\", \"IDTR\", \"quality\", \"territory\", \"commune\", \"department\", \"insee\", \"municipality\"];\n\n    this.serviceAttributes = [\"bbox\", \"ID\", \"IDTR\", \"Qualite\", \"Territoire\", \"Commune\", \"Departement\", \"INSEE\", \"Municipality\"];\n}\n\n/**\n * @lends module:StreetAdress#\n */\nStreetAddress.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nStreetAddress.prototype.constructor = StreetAddress;\n\nexport default StreetAddress;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un résultat de géocodage de type PositionOfInterest\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.PositionOfInterest\n * @private\n */\nfunction PositionOfInterest () {\n    if (!(this instanceof PositionOfInterest)) {\n        throw new TypeError(\"PositionOfInterest constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     * @type {String}\n     */\n    this.CLASSNAME = \"PositionOfInterest\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodeLocation de type PositionOfInterest\n     * - **bbox** : Emprise du toponyme dans le système de coordonnées demandé {left, right, top, bottom} *{Object}*\n     * - **importance** : Importance du toponyme *{number}*\n     * - **nature** : Nature du toponyme. *{String}*\n     * - **territory** : Code du territoire français où se situe le toponyme *{String}*\n     * - **commune** : Ville du toponyme. *{String}*\n     * - **department** : Département du toponyme. *{String}*\n     * - **insee** : Code INSEE de la commune où se situe le toponyme. *{Number}*\n     * - **municipality** : Municipalité du toponyme. *{String}*\n     */\n\n    this.attributesList = [\"bbox\", \"importance\", \"nature\", \"territory\", \"commune\", \"department\", \"insee\", \"municipality\"];\n\n    this.serviceAttributes = [\"bbox\", \"Importance\", \"Nature\", \"Territoire\", \"Commune\", \"Departement\", \"INSEE\", \"Municipality\"];\n}\n\n/**\n * @lends module:PositionOfInterest#\n */\nPositionOfInterest.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nPositionOfInterest.prototype.constructor = PositionOfInterest;\n\nexport default PositionOfInterest;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un filtre de géocodage de type CadastralParcel.\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.CadastralParcel\n * @private\n */\nfunction CadastralParcel () {\n    if (!(this instanceof CadastralParcel)) {\n        throw new TypeError(\"CadastralParcel constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"CadastralParcel\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodeLocation de type CadastralParcel\n     * - **absorbedCity** : Code commune absorbée de la parcelle :\n     *      lorsqu'une parcelle est issue p d'une ancienne commune qui a fusionné avec une autre.\n     *      Sinon, le code vaut '000'. *{String}*\n     * - **sheet** : Feuille de la parcelle (ex 1). *{String}*\n     * - **number** : Numéro de la parcelle (ex. 0041) *{String}*\n     * - **section** : Section de la parcelle (ex 0D). *{String}*\n     * - **commune** : Ville du filtre. *{String}*\n     * - **department** : Département du filtre. *{String}*\n     * - **insee** : Code INSEE du filtre. *{Number}*\n     * - **municipality** : Municipalité du filtre. *{String}*\n     * - **origin** : L'origine de l'objet parcellaire renvoyé\n     *      (correspond à l'attribut \"type\" dans la réponse XML)\n     *      Pour plus d'informations : http://api.ign.fr/tech-docs-js/fr/developpeur/search.html#Recherche_par_parcelles_cadastrales *{Number}*\n     *\n     */\n\n    this.attributesList = [\"absorbedCity\", \"sheet\", \"number\", \"section\", \"commune\", \"department\", \"insee\", \"municipality\", \"origin\"];\n\n    this.serviceAttributes = [\"CommuneAbsorbee\", \"Feuille\", \"Numero\", \"Section\", \"Commune\", \"Departement\", \"INSEE\", \"Municipality\", \"Type\"];\n}\n\n/**\n * @lends module:CadastralParcel#\n */\nCadastralParcel.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nCadastralParcel.prototype.constructor = CadastralParcel;\n\nexport default CadastralParcel;\n","\nimport GeocodeLocation from \"../GeocodeLocation\";\n\n/**\n * @classdesc\n * Format des attributs d'un filtre de géocodage de type Administratif.\n * @constructor\n * @alias Gp.Services.Geocode.Request.Administratif\n * @private\n */\nfunction Administratif () {\n    if (!(this instanceof Administratif)) {\n        throw new TypeError(\"Administratif constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodeLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage)\n     * @type {String}\n     */\n    this.CLASSNAME = \"Administratif\";\n\n    /**\n     * Liste des attributs possibles pour une GeocodedLocation de type Administratif\n     * - **bbox** : Emprise de l'unité administrative dans le système de coordonnées demandé *{left, right, top, bottom}*\n     * - **prefecture** - Nom de la préfécture de la région ou du département *{String}*\n     * - **inseeRegion** - Numéro INSEE de la région *{String}*\n     * - **inseeDepartment** - Numéro INSEE du département *{String}*\n     * - **municipality** - Nom de l'unité administrative *{String}*\n     *\n     */\n\n    this.attributesList = [\"bbox\", \"prefecture\", \"inseeRegion\", \"inseeDepartment\", \"municipality\"];\n\n    this.serviceAttributes = [\"bbox\", \"Prefecture\", \"InseeRegion\", \"InseeDepartement\", \"Municipality\"];\n}\n\n/**\n * @lends module:Administratif#\n */\nAdministratif.prototype = Object.create(GeocodeLocation.prototype);\n\n/**\n * Constructeur (alias)\n */\nAdministratif.prototype.constructor = Administratif;\n\nexport default Administratif;\n","/**\n * Creation d'une requête OpenLS en mode POST ou GET\n * (Factory)\n *\n * @module DirectGeocodeRequestFactory\n * @alias Gp.Services.Geocode.Request.DirectGeocodeRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport XLS from \"../../../Formats/XLS\";\nimport LocationUtilityService from \"../../../Formats/XLS/LocationUtilityService\";\nimport GeocodeFilterExtension from \"../../../Formats/XLS/LocationUtilityService/GeocodeFilterExtension\";\nimport StreetAddress from \"../Request/model/StreetAddress\";\nimport PositionOfInterest from \"../Request/model/PositionOfInterest\";\nimport CadastralParcel from \"../Request/model/CadastralParcel\";\nimport Administratif from \"../Request/model/Administratif\";\n\nvar DirectGeocodeRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      httpMethod:\n     *      // options specifiques du service\n     *      location:\n     *      returnFreeForm:\n     *      filterOptions:\n     *      srs:\n     *      maximumResponses:\n     *   };\n     *   var result = DirectGeocodeRequestFactory.build(options);\n     *   if (!result) {\n     *       // error...\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"DirectGeocodeRequestFactory\");\n        logger.trace([\"DirectGeocodeRequestFactory::build()\"]);\n\n        var request = null;\n\n        // gestion des filtres (table de geocodage) !\n        // par defaut, on les ajoute toute ...\n        var oFilter = new GeocodeFilterExtension();\n        oFilter.addFilterExtensions(new Administratif());\n        oFilter.addFilterExtensions(new StreetAddress());\n        oFilter.addFilterExtensions(new PositionOfInterest());\n        oFilter.addFilterExtensions(new CadastralParcel());\n\n        // objet LUS\n        // on peut aussi par un objet XLS::GeocodeRequest\n        var oLUS = new LocationUtilityService({\n            location : options.location,\n            returnFreeForm : options.returnFreeForm,\n            filterOptions : options.filterOptions\n        });\n        oLUS.addFilter(oFilter);\n\n        // Format XLS\n        var oXLS = new XLS({\n            srsName : options.srs,\n            maximumResponses : options.maximumResponses\n        });\n        oXLS.namespace = true;\n        oXLS.setService(oLUS);\n\n        // request brute !\n        request = oXLS.build();\n\n        // en mode GET, la requête est encodée\n        // et le param. 'qxml' est ajouté\n        if (options.httpMethod === \"GET\") {\n            var myRequest = \"qxml=\" +\n                encodeURIComponent(request)\n                    .replace(/-/g, \"%2D\")\n                    .replace(/_/g, \"%5F\")\n                    .replace(/\\./g, \"%2E\")\n                    .replace(/!/g, \"%21\")\n                    .replace(/~/g, \"%7E\")\n                    .replace(/\\*/g, \"%2A\")\n                    .replace(/'/g, \"%27\")\n                    .replace(/\\(/g, \"%28\")\n                    .replace(/\\)/g, \"%29\");\n            request = myRequest;\n        }\n\n        logger.trace(request);\n\n        return request;\n    }\n};\n\nexport default DirectGeocodeRequestFactory;\n","\n/**\n * Response object for {@link module:Services~geocode Gp.Services.geocode ()} or {@link module:Services~reverseGeocode Gp.Services.reverseGeocode ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Geocode.DirectGeocodedLocation|Gp.Services.Geocode.ReverseGeocodedLocation>} locations - locations array.\n *\n * @namespace\n * @alias Gp.Services.GeocodeResponse\n */\nfunction GeocodeResponse () {\n    if (!(this instanceof GeocodeResponse)) {\n        throw new TypeError(\"GeocodeResponse constructor cannot be called as a function.\");\n    }\n\n    this.locations = [];\n}\n\nGeocodeResponse.prototype = {\n\n    constructor : GeocodeResponse\n\n};\n\nexport default GeocodeResponse;\n","\n/**\n * Location object holding common properties returned by the underlying geocoding and reverse geocoding web service.\n *\n * @property {Gp.Point} position - Position of the location given in the requested coordinates system.\n * @property {String} type - location type \"StreetAddress\" (for an address), \"PositionOfInterest\" (for a place name) or \"CadastralParcel\" (for cadastral parcel).\n * @property {String} matchType - how geocoding is performed : \"street number\" (exact address), \"street enhanced\" (street number calculated by interpolation), \"street\" (only the street), \"city\" (only the city).\n * @property {Object} placeAttributes - Associative array matching the following attributes with their values given by the underlying web service :\n *\n * *Common attributes : *\n *\n * - **freeform** - freeform complete Address.\n * - **bbox** - Bounding Box *{@link Gp.BBox}*.\n * - **municipality** - Municipality\n *\n * *if type === \"StreetAddress\" : *\n *\n * - **number** - Street number.\n * - **ID** - Identifier of the address in the [BD ADRESSE Database]{@link http://professionnels.ign.fr/bdadresse}.\n * - **IDTR** - Identifier of the lineString in the [BD ADRESSE Database]{@link http://professionnels.ign.fr/bdadresse}.\n * - **postalCode** - PostCode\n * - **quality** - Geocoding quality ([see]{@link http://api.ign.fr/tech-docs-js/developpeur/search.html})\n * - **street** - Street name\n * - **territory** - French Territory code\n * - **commune** - City\n * - **department** - Department\n * - **insee** - INSEE Code\n *\n *\n * *if type === \"PositionOfInterest\" :*\n *\n * - **importance** - Place name importance\n * - **nature** - Place name nature\n * - **postalCode** - PostCode\n * - **territory** - French Territory code\n * - **commune** - City\n * - **department** - Department\n * - **insee** - INSEE Code\n *\n *\n * *si type = \"CadastralParcel\" :*\n *\n * - **absorbedCity** - when a parcel comes from a city that was absorbed by another, code of that old city. \"000\" otherwise.\n * - **arrondissement** - arrondissement\n * - **cadastralParcel** - cadastral parcel code\n * - **district** - district\n * - **sheet** - Parcel Sheet (eg. \"1\").\n * - **number** - Parcel Number (eg. \"0041\")\n * - **section** - Parcel Section (eg. \"0D\").\n * - **commune** - Parcel municipality.\n * - **department** - Parcel Department.\n * - **insee** - INSEE Code.\n * - **origin** - Parcel origin (see \"type\" attribute in the [underlying web service response]{@link http://api.ign.fr/tech-docs-js/developpeur/search.html#Cadastral_parcels_search})\n *\n * @namespace\n * @alias Gp.Services.Geocode.GeocodedLocation\n */\nfunction GeocodedLocation () {\n    if (!(this instanceof GeocodedLocation)) {\n        throw new TypeError(\"GeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    this.position = {\n        x : null,\n        y : null\n    };\n\n    this.matchType = null;\n\n    this.placeAttributes = {};\n\n    this.type = null;\n}\n\nGeocodedLocation.prototype = {\n\n    constructor : GeocodedLocation\n\n};\n\nexport default GeocodedLocation;\n","\nimport GeocodedLocation from \"./GeocodedLocation\";\n\n/**\n * Single location object returned by the underlying geocoding web service.\n *\n * @property {Float} accuracy - Accuracy of the response towards the requested location between 0 (unaccurate) and 1 (exact match).\n *\n * @namespace\n * @extends {Gp.Services.Geocode.GeocodedLocation}\n * @alias Gp.Services.Geocode.DirectGeocodedLocation\n */\nfunction DirectGeocodedLocation () {\n    if (!(this instanceof DirectGeocodedLocation)) {\n        throw new TypeError(\"DirectGeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodedLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage) : \"DirectGeocodedLocation\"\n     * @type {String}\n     */\n    this.CLASSNAME = \"DirectGeocodedLocation\";\n\n    this.accuracy = null;\n}\n\nDirectGeocodedLocation.prototype = Object.create(GeocodedLocation.prototype);\n\nDirectGeocodedLocation.prototype.constructor = DirectGeocodedLocation;\n\nexport default DirectGeocodedLocation;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service de géocodage direct du Géoportail\n *      afin de récupérer les résultats retournés.\n * @module DirectGeocodeResponseReader\n * @alias Gp.Services.Geocode.Formats.DirectGeocodeResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport MR from \"../../../Utils/MessagesResources\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport GeocodeResponse from \"../Response/model/GeocodeResponse\";\nimport DirectGeocodedLocation from \"../Response/model/DirectGeocodedLocation\";\n\n/**\n * @member DirectGeocodeResponseReader\n */\nvar DirectGeocodeResponseReader = {};\n\n/**\n * @property {String} DirectGeocodeResponseReader.VERSION - version du service de géocodage\n */\nDirectGeocodeResponseReader.VERSION = \"1.2\";\n\n/**\n * Objet stockant les différents namespaces et les URI associées\n */\nDirectGeocodeResponseReader.NAMESPACES = {\n    xmlns : \"http://www.opengis.net/xls\",\n    gml : \"http://www.opengis.net/gml\",\n    xls : \"http://www.opengis.net/xls\",\n    xlsext : \"http://www.opengis.net/xlsext\",\n    xsi : \"http://www.w3.org/2001/XMLSchema-instance\"\n};\n\n/**\n * Localisation (URL) du schema de définition du XML (XSD)\n */\nDirectGeocodeResponseReader.SCHEMALOCATION = \"http://wxs.ign.fr/schemas/olsAll.xsd\";\n\n/**\n * Namespace par défaut du format\n */\nDirectGeocodeResponseReader.DEFAULTPREFIX = \"xls\";\n\n/**\n * Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n */\nDirectGeocodeResponseReader.READERS = {\n\n    xls : {\n\n        /** TODO : jsdoc block */\n        XLS : function (root) {\n            var geocodeResponse = new GeocodeResponse();\n\n            // vérification de la version du service, et des namespaces de l'en-tête\n            __checkServiceAttributes(root);\n\n            // puis lancement de la lecture de l'ensemble des noeuds, en bouclant sur les childNodes\n            __getChildNodes(root, geocodeResponse);\n\n            return geocodeResponse;\n        },\n\n        /** TODO : jsdoc block */\n        GeocodedAddress : function (node, geocodeResponse) {\n            var geocodedLocation = new DirectGeocodedLocation();\n\n            __getChildNodes(node, geocodedLocation);\n\n            // Ajout du résultat au tableau geocodedLocations de geocodeReponse\n            if (geocodeResponse && Array.isArray(geocodeResponse.locations)) {\n                geocodeResponse.locations.push(geocodedLocation);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        GeocodeMatchCode : function (node, geocodedLocation) {\n            var acc = node.getAttribute(\"accuracy\");\n            if (acc && geocodedLocation) {\n                geocodedLocation.accuracy = parseFloat(acc);\n            }\n            var matchType = node.getAttribute(\"matchType\");\n            if (matchType && geocodedLocation) {\n                geocodedLocation.matchType = matchType;\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Address : function (node, geocodedLocation) {\n            var countrycode = node.getAttribute(\"countryCode\");\n            if (geocodedLocation && countrycode) {\n                geocodedLocation.type = countrycode;\n            }\n            // on va récupérer les autres informations (StreetAddress, place, postalCode...)\n            __getChildNodes(node, geocodedLocation);\n        },\n\n        /** TODO : jsdoc block */\n        freeFormAddress : function (node, geocodedLocation) {\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                geocodedLocation.placeAttributes.freeform = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Building : function (node, geocodedLocation) {\n            var num = node.getAttribute(\"number\");\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (num) {\n                    geocodedLocation.placeAttributes.number = num;\n                } else if (node.getAttribute(\"buildingName\")) {\n                    geocodedLocation.placeAttributes.number = node.getAttribute(\"buildingName\");\n                } else if (node.getAttribute(\"subdivision\")) {\n                    geocodedLocation.placeAttributes.number = node.getAttribute(\"subdivision\");\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Street : function (node, geocodedLocation) {\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                // in case of a streetAddress result : street represents the street name\n                if (geocodedLocation.type === \"StreetAddress\") {\n                    geocodedLocation.placeAttributes.street = __getChildValue(node);\n\n                    // in case of a cadastral parcel result : street represents the cadastral parcel identifier\n                } else if (geocodedLocation.type === \"CadastralParcel\") {\n                    geocodedLocation.placeAttributes.cadastralParcel = __getChildValue(node);\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Place : function (node, geocodedLocation) {\n            var placeType = node.getAttribute(\"type\");\n            var placeName = __getChildValue(node);\n\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (placeType === \"Municipality\") {\n                    geocodedLocation.placeAttributes.municipality = placeName;\n                } else if (placeType === \"Bbox\") {\n                    var values = placeName.split(\";\");\n                    if (values.length === 4) {\n                        geocodedLocation.placeAttributes.bbox = {\n                            left : parseFloat(values[0]),\n                            right : parseFloat(values[2]),\n                            top : parseFloat(values[1]),\n                            bottom : parseFloat(values[3])\n                        };\n                    }\n                } else if (placeType === \"Commune\") {\n                    geocodedLocation.placeAttributes.commune = placeName;\n                } else if (placeType === \"Departement\") {\n                    geocodedLocation.placeAttributes.department = placeName;\n                } else if (placeType === \"INSEE\") {\n                    geocodedLocation.placeAttributes.insee = placeName;\n                } else if (placeType === \"Qualite\") {\n                    geocodedLocation.placeAttributes.quality = placeName;\n                } else if (placeType === \"Territoire\") {\n                    geocodedLocation.placeAttributes.territory = placeName;\n                } else if (placeType === \"ID\") {\n                    geocodedLocation.placeAttributes.ID = placeName;\n                } else if (placeType === \"ID_TR\") {\n                    geocodedLocation.placeAttributes.IDTR = placeName;\n                } else if (placeType === \"Importance\") {\n                    geocodedLocation.placeAttributes.importance = parseInt(placeName, 10);\n                } else if (placeType === \"Nature\") {\n                    geocodedLocation.placeAttributes.nature = placeName;\n                } else if (placeType === \"Numero\") {\n                    geocodedLocation.placeAttributes.number = placeName;\n                } else if (placeType === \"Feuille\") {\n                    geocodedLocation.placeAttributes.sheet = placeName;\n                } else if (placeType === \"Section\") {\n                    geocodedLocation.placeAttributes.section = placeName;\n                } else if (placeType === \"CommuneAbsorbee\") {\n                    geocodedLocation.placeAttributes.absorbedCity = placeName;\n                } else if (placeType === \"Arrondissement\") {\n                    if (placeName) {\n                        geocodedLocation.placeAttributes.arrondissement = placeName;\n                    }\n                } else if (placeType === \"Type\") {\n                    geocodedLocation.placeAttributes.origin = placeName;\n                } else if (placeType === \"Prefecture\") {\n                    geocodedLocation.placeAttributes.prefecture = placeName;\n                } else if (placeType === \"InseeRegion\") {\n                    geocodedLocation.placeAttributes.inseeRegion = placeName;\n                } else if (placeType === \"InseeDepartment\") {\n                    geocodedLocation.placeAttributes.inseeDepartment = placeName;\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        PostalCode : function (node, geocodedLocation) {\n            if (geocodedLocation && geocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                geocodedLocation.placeAttributes.postalCode = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Error : function (node) {\n            // on imagine qu'on a une balise ainsi :\n            // <Error message=\"Message...\" errorCode=\"InternalServerError\"/>\n            var srvMess = node.getAttribute(\"message\");\n            var errorCode = node.getAttribute(\"errorCode\");\n            var message = MR.getMessage(\"SERVICE_RESPONSE_EXCEPTION\",\n                \"(\" + errorCode + \") : \" + srvMess);\n            throw new ErrSrv({\n                message : message,\n                type : ErrSrv.TYPE_SRVERR\n            });\n        }\n    },\n\n    gml : {\n\n        /** TODO : jsdoc block */\n        pos : function (node, geocodedLocation) {\n            var pos = __getChildValue(node);\n            if (geocodedLocation && pos) {\n                geocodedLocation.position = {\n                    x : parseFloat(pos.split(\" \")[0]),\n                    y : parseFloat(pos.split(\" \")[1])\n                };\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    ExceptionReport : function (node) {\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = DirectGeocodeResponseReader.READERS[\"Exception\"](child);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    Exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service de géocodage,\n *      à l'aide des READERS de la classe.\n *\n * @method DirectGeocodeResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @return {Object} geocodeResponse|exceptionReport : l'objet contenant les informations de la réponse XML,\n *      sous la forme d'un objet GeocodeResponse, ou un objet littéral exceptionReport si le service a renvoyé une exception.\n * @static\n * @memberof DirectGeocodeResponseReader\n */\nDirectGeocodeResponseReader.read = function (root) {\n    if (root.nodeName === \"XLS\") {\n        var nsPrefix = root.prefix;\n        if (!nsPrefix) {\n            nsPrefix = DirectGeocodeResponseReader.DEFAULTPREFIX;\n        }\n        var geocodeResponse = DirectGeocodeResponseReader.READERS[nsPrefix][root.nodeName](root);\n        return geocodeResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = DirectGeocodeResponseReader.READERS[root.nodeName](root);\n        return exceptionReport;\n    } else {\n        var mess = MR.getMessage(\"SERVICE_RESPONSE_ANALYSE\", root.nodeName);\n        throw new ErrSrv({\n            message : mess,\n            type : ErrSrv.TYPE_UNKERR,\n            status : 200\n        });\n    }\n};\n\n/**\n * Récupération des attributs d'un noeud élément\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\n/**\n * Récupération des noeuds enfants à partir d'un noeud donné, pour lecture (readNode).\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __getChildNodes\n * @param {DOMElement} node - a DOM node\n * @param {Array|Object} [data] - an object to be filled with node data\n */\nfunction __getChildNodes (node, data) {\n    if (node.hasChildNodes()) {\n        var children = node.childNodes;\n        var child;\n        var childName;\n        var childPrefix;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                childName = child.localName || child.baseName || child.nodeName;\n                childPrefix = child.prefix || DirectGeocodeResponseReader.DEFAULTPREFIX;\n\n                if (DirectGeocodeResponseReader.READERS[childPrefix][childName]) {\n                    var reader = DirectGeocodeResponseReader.READERS[childPrefix][childName];\n                    reader(child, data);\n                } else {\n                    __getChildNodes(child, data);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\n/**\n * Vérification des attributs du service, dans la balise XLS de la réponse :\n *      version, namespaces, et namespace par défaut doivent correspondre à ceux attendus.\n *\n * @private\n * @memberof DirectGeocodeResponseReader\n * @method __checkServiceAttributes\n * @param {DOMElement} XLSNode - a DOM node, corresponding to XLS first tag.\n */\nfunction __checkServiceAttributes (XLSNode) {\n    if (XLSNode.attributes.length > 0) {\n        // on récupère et parcourt les attributs de la balise XLS de la réponse\n        var xlsAttributes = __getAttributes(XLSNode);\n        for (var att in xlsAttributes) {\n            if (xlsAttributes.hasOwnProperty(att)) {\n                // vérification de la version\n                if (att === \"version\") {\n                    if (xlsAttributes[\"version\"] !== DirectGeocodeResponseReader.VERSION) {\n                        console.log(\"[DirectGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing\");\n                        return;\n                    }\n                }\n\n                // on vérifie que l'uri du namespace par défaut est bien celle que l'on attend\n                if (att === \"xmlns\") {\n                    if (xlsAttributes[att] !== DirectGeocodeResponseReader.NAMESPACES[DirectGeocodeResponseReader.DEFAULTPREFIX]) {\n                        console.log(\"[DirectGeocodeResponseReader] geocode response default namespace is not the expected one\");\n                        return;\n                    }\n                    continue;\n                }\n\n                var prefix = att.split(\":\")[0];\n                var ns = att.split(\":\")[1];\n\n                // si on a un autre xmlns, on vérifie aussi les URI\n                if (prefix === \"xmlns\" && ns) {\n                    // si l'attribut correspond à un namespace défini dans le reader\n                    if (DirectGeocodeResponseReader.NAMESPACES[ns]) {\n                        // il faut que les URI correspondent aussi.\n                        if (DirectGeocodeResponseReader.NAMESPACES[ns] !== xlsAttributes[att]) {\n                            console.log(\"[DirectGeocodeResponseReader] geocode response \" + att + \" namespace is not the expected one\");\n                            return;\n                        }\n                    }\n                }\n\n                // pour finir on vérifie la localisation du schema XSD du service\n                if (ns === \"schemaLocation\") {\n                    if (DirectGeocodeResponseReader.SCHEMALOCATION !== xlsAttributes[att]) {\n                        console.log(\"[DirectGeocodeResponseReader] geocode response schema location is not the expected one\");\n                        return;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport default DirectGeocodeResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML\n * ou d'un JSON encapsulant du XML\n * (Factory)\n *\n * @module GeocodeResponseFactory\n * @alias Gp.Services.Geocode.Response.GeocodeResponseFactory\n * @todo La reponse JSON peut encapsuler un XML !\n * @private\n */\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport XML from \"../../../Formats/XML\";\nimport DirectGeocodeResponseReader from \"../Formats/DirectGeocodeResponseReader\";\n\nvar DirectGeocodeReponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // data de type GeocodeResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    var p = new XML({\n                        reader : DirectGeocodeResponseReader\n                    });\n\n                    if (typeof options.response === \"string\") {\n                        p.setXMLString(options.response);\n                    } else {\n                        p.setXMLDoc(options.response);\n                    }\n\n                    data = p.parse();\n\n                    if (!data) {\n                        throw new Error(\"L'analyse de la réponse du service !?\");\n                    }\n                } catch (e) {\n                    var message = e.message;\n                    if (typeof options.response === \"string\") {\n                        message += \"('\" + options.response + \"')\";\n                    } else {\n                        message += \"('\" + options.response.documentElement.innerHTML + \"')\";\n                    }\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", message),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200 // FIXME : 200 ?\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService({\n                message : MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\"),\n                type : ErrorService.TYPE_SRVERR,\n                status : -1 // FIXME : status response\n            }));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default DirectGeocodeReponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DirectGeocodeRequestFactory from \"./Request/DirectGeocodeRequestFactory\";\nimport DirectGeocodeResponseFactory from \"./Response/DirectGeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de géocodage direct du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n *\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Geocode\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String|Object} options.location - Nom de l'adresse, du toponyme, de l'unité administrative ou de la parcelle cadastrale recherchée.\n *      Sous forme de String, la propriété permet de faire une recherche déstructurée.\n *      Sous forme d'objet, la propriété permet de structurer la recherche.\n *      Dans ce cas, les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Number} [options.location.number] - Numéro du bâtiment de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *      @param {String} [options.location.street] - Nom de la rue de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *      @param {String} [options.location.city] - Nom de la ville de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *      @param {Number} [options.location.postalCode] - Numéro du code postal de l'adresse recherchée, dans le cas d'une recherche structurée\n *      (si options.location est un objet Javascript).\n *\n * @param {Object} [options.filterOptions] - Les propriétés possibles de cet objet sont décrites ci-après.\n * @param {Object} [options.filterOptions.bbox] - Emprise dans laquelle on souhaite effectuer la recherche.\n *      Les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Float} options.filterOptions.bbox.left - Abscisse du côté gauche de la BBOX\n *      @param {Float} options.filterOptions.bbox.right - Abscisse du côté droit de la BBOX\n *      @param {Float} options.filterOptions.bbox.top - Ordonnée supérieure de la BBOX\n *      @param {Float} options.filterOptions.bbox.bottom - Ordonnée inférieure de la BBOX\n *\n * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service de géocodage du Géoportail permet de rechercher des 'PostionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales, et/ou des 'CadastralParcel' pour des parcelles cadastrales.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, type = ['StreetAddress'].\n *\n * @param {String} [options.filterOptions.[proprietes du filtre]] - Critère supplémentaire pour filtrer la recherche sous la forme\n *      d'un couple clé/valeur à définir selon les possibilités du serveur ajouté à la requête.\n *      Le service de géocodage du Géoportail permet de filtrer tous les résultats avec les propriétés :\n *          \"municipality\", \"insee\", et \"department\".\n *      Il permet aussi de filtrer les adresses postales avec les propriétés :\n *          \"quality\", \"ID\", \"ID_TR\" et \"territory\".\n *      Il permet de filtrer les toponymes avec les propriétés :\n *          \"importance\", \"nature\" et \"territory\".\n *      Enfin, il permet de filtrer les parcelles cadastrales avec les propriétés :\n *          \"sheet\", \"section\", et \"absorbedcity\". Pas de valeur par défaut.\n *\n * @param {Number} [options.maximumResponses] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut.\n *      Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 25.\n *\n * @param {Boolean} [options.returnFreeForm] - Indique si l'on souhaite en réponse un localisant concaténée plutôt que structuré.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 'false'.\n *\n * @param {String} [options.srs] - Système de coordonnées dans lequel les paramètres géographiques en entrée et la réponse du service sont exprimés.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 'EPSG:4326'.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      positions : [{lon:, lat:}, {lon:, lat:}],\n *      (...)\n *   };\n * @private\n */\nfunction Geocode (options) {\n    if (!(this instanceof Geocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Geocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Geocode\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Geocode\");\n    this.logger.trace(\"[Constructeur Geocode (options)]\");\n\n    if (!options.location) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"location\"));\n    }\n\n    // FIXME ECMAScript 5 support\n    if (typeof options.location === \"object\" && Object.keys(options.location).length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"location\"));\n    } else if (typeof options.location === \"string\" && options.location.length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"location\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.location = options.location;\n\n    // on definit des filtres apr defaut\n    if (!options.filterOptions || typeof options.filterOptions !== \"object\") {\n        this.options.filterOptions = options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // FIXME ECMAScript 5 support (valable pour un objet uniquement !)\n    // ceci permet de tester le cas où 'options.filterOptions' : {}\n    if (Object.keys(options.filterOptions).length === 0) {\n        this.options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    var filter = Object.keys(options.filterOptions);\n    for (var i = 0; i < filter.length; i++) {\n        var key = filter[i];\n        // on transforme certains filtres qui pourraient être numériques en string\n        var filtersCouldBeNumberList = [\"department\", \"number\", \"postalCode\", \"insee\", \"importance\", \"ID\", \"IDTR\", \"absorbedCity\", \"sheet\", \"section\", \"inseeRegion\", \"inseeDepartment\"];\n        if (filtersCouldBeNumberList.indexOf(key) !== -1 && typeof options.filterOptions[key] !== \"string\") {\n            options.filterOptions[key] = options.filterOptions[key].toString();\n        }\n        // on supprime les filtres vides\n        if (!options.filterOptions[key]) {\n            delete this.options.filterOptions[key];\n        }\n    }\n\n    this.options.filterOptions.type = options.filterOptions.type || [\"StreetAddress\"];\n    this.options.maximumResponses = options.maximumResponses || 25;\n    this.options.returnFreeForm = options.returnFreeForm || false;\n    this.options.srs = options.srs || \"EPSG:4326\";\n\n    // attributs d'instances\n\n    /**\n     * Format forcé de la réponse du service : \"xml\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"xml\";\n}\n\n/**\n * @lends module:Geocode#\n */\nGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nGeocode.prototype.constructor = Geocode;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        location : this.options.location,\n        returnFreeForm : this.options.returnFreeForm,\n        filterOptions : this.options.filterOptions,\n        srs : this.options.srs,\n        maximumResponses : this.options.maximumResponses\n    };\n\n    this.request = DirectGeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.analyzeResponse = function (error, success) {\n    /* INFO :\n         Etape 1 : Création de la requête\n            -> Appel du format OpenLS pour créer une requête à partir des paramètres (par exemple)\n              (soit directement une URL si GET, soit une requête XML si POST)\n            /!\\ tester si apiKey && serverUrl => on ne garde que serverUrl\n            -> stockage de la requête dans this.request\n         Etape 2 : Envoi de la requête selon le bon protocole\n            -> appel du protocol JSONP ou XHR, et envoi (par ex send ()) (this.protocol)\n            -> récupération de la réponse xml dans la fonction onSuccess () (this.response)\n            -> si code HTTP 200 et pas de message d'erreur : etape 3\n            -> si code HTTP != 200 : lancement de la fonction de callback onFailure avec le message d'erreur\n         Etape 3 : Analyse de la réponse xml et construction du JSON (si rawResponse === false )\n            -> appel du parser pour récupérer le xmlDocument\n            -> appel du reader OpenLS pour lire les éléments et récupérer l'objet JSON\n               correspondant au type de géocodage (défini dans les specs)\n         Etape 4 : Lancement de la fonction de callback onSuccess avec la réponse :\n            -> xmlResponse (si rawResponse === true)\n            -> ou geocodedLocations\n    */\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        DirectGeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Geocode;\n","/**\n * Creation d'une requête OpenLS en mode POST ou GET\n * (Factory)\n *\n * @module ReverseGeocodeRequestFactory\n * @alias Gp.Services.Geocode.Request.ReverseGeocodeRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport XLS from \"../../../Formats/XLS\";\nimport LocationUtilityService from \"../../../Formats/XLS/LocationUtilityService\";\n\nvar ReverseGeocodeRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      httpMethod :\n     *      // options specifiques du service\n     *      position :\n     *      returnFreeForm :\n     *      filterOptions :\n     *      srs :\n     *      maximumResponses :\n     *   };\n     *   var result = ReverseGeocodeRequestFactory.build(options);\n     *   if (!result) {\n     *       // error...\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"ReverseGeocodeRequestFactory\");\n        logger.trace([\"ReverseGeocodeRequestFactory::build()\"]);\n\n        // options non definies\n        var settings = options || {};\n\n        var request = null;\n\n        // objet LUS\n        var oLUS = new LocationUtilityService({\n            position : settings.position,\n            returnFreeForm : settings.returnFreeForm,\n            filterOptions : settings.filterOptions\n        });\n\n        // Format XLS\n        var oXLS = new XLS({\n            srsName : settings.srs,\n            maximumResponses : settings.maximumResponses\n        });\n        oXLS.namespace = true;\n        oXLS.setService(oLUS);\n\n        // request brute !\n        request = oXLS.build();\n\n        // en mode GET, la requête est encodée\n        // et le param. 'qxml' est ajouté\n        if (settings.httpMethod === \"GET\") {\n            var myRequest = \"qxml=\" +\n                encodeURIComponent(request)\n                    .replace(/-/g, \"%2D\")\n                    .replace(/_/g, \"%5F\")\n                    .replace(/\\./g, \"%2E\")\n                    .replace(/!/g, \"%21\")\n                    .replace(/~/g, \"%7E\")\n                    .replace(/\\*/g, \"%2A\")\n                    .replace(/'/g, \"%27\")\n                    .replace(/\\(/g, \"%28\")\n                    .replace(/\\)/g, \"%29\");\n            request = myRequest;\n        }\n\n        logger.trace(request);\n\n        return request;\n    }\n};\n\nexport default ReverseGeocodeRequestFactory;\n","\nimport GeocodedLocation from \"./GeocodedLocation\";\n\n/**\n * Single location object returned by the underlying reverse geocoding web service.\n *\n * @property {Float} searchCenterDistance - Distance between the requested point and the location.\n *\n * @namespace\n * @extends {Gp.Services.Geocode.GeocodedLocation}\n * @alias Gp.Services.Geocode.ReverseGeocodedLocation\n */\nfunction ReverseGeocodedLocation () {\n    if (!(this instanceof ReverseGeocodedLocation)) {\n        throw new TypeError(\"ReverseGeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    // INFO\n    // appel du constructeur de la classe mère\n    // avec passage de param.\n    GeocodedLocation.apply(this, arguments);\n\n    /**\n     * Nom de la classe (heritage) : \"ReverseGeocodedLocation\"\n     * @type {String}\n     */\n    this.CLASSNAME = \"ReverseGeocodedLocation\";\n\n    this.searchCenterDistance = null;\n}\n\nReverseGeocodedLocation.prototype = Object.create(GeocodedLocation.prototype);\n\nReverseGeocodedLocation.prototype.constructor = ReverseGeocodedLocation;\n\nexport default ReverseGeocodedLocation;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service de géocodage inverse du Géoportail\n *      afin de récupérer les résultats retournés.\n * @module ReverseGeocodeResponseReader\n * @alias Gp.Services.Geocode.Formats.ReverseGeocodeResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport MR from \"../../../Utils/MessagesResources\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport ReverseGeocodeResponse from \"../Response/model/GeocodeResponse\";\nimport ReverseGeocodedLocation from \"../Response/model/ReverseGeocodedLocation\";\n\n/**\n * Objet ReverseGeocodeResponseReader\n * @member {Object} ReverseGeocodeResponseReader\n *\n * @property {String} ReverseGeocodeResponseReader.VERSION - Version du service de géocodage\n *\n * @property {Object} ReverseGeocodeResponseReader.NAMESPACES - Objet stockant les différents namespaces et les URI associées\n *\n * @property {String} ReverseGeocodeResponseReader.SCHEMALOCATION - Localisation (URL) du schema de définition du XML (XSD)\n *\n * @property {String} ReverseGeocodeResponseReader.DEFAULTPREFIX - Namespace par défaut du format\n *\n * @property {Object} ReverseGeocodeResponseReader.READERS - Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} ReverseGeocodeResponseReader.read - Méthode permettant de lancer la lecture d'une réponse XML du service de géocodage,\n *      à l'aide des READERS de la classe.\n *\n */\n\nvar ReverseGeocodeResponseReader = {};\n\n/**\n * version du service de géocodage\n */\nReverseGeocodeResponseReader.VERSION = \"1.2\";\n\n/**\n * Objet stockant les différents namespaces et les URI associées\n */\nReverseGeocodeResponseReader.NAMESPACES = {\n    xmlns : \"http://www.opengis.net/xls\",\n    gml : \"http://www.opengis.net/gml\",\n    xls : \"http://www.opengis.net/xls\",\n    xlsext : \"http://www.opengis.net/xlsext\",\n    xsi : \"http://www.w3.org/2001/XMLSchema-instance\"\n};\n\n/**\n * Localisation (URL) du schema de définition du XML (XSD)\n */\nReverseGeocodeResponseReader.SCHEMALOCATION = \"http://wxs.ign.fr/schemas/olsAll.xsd\";\n\n/**\n * Namespace par défaut du format\n */\nReverseGeocodeResponseReader.DEFAULTPREFIX = \"xls\";\n\n/**\n * Objet contenant des fonctions de lecture, appelées \"READERS\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n */\nReverseGeocodeResponseReader.READERS = {\n\n    xls : {\n\n        /** TODO : jsdoc block */\n        XLS : function (root) {\n            var reverseGeocodeResponse = new ReverseGeocodeResponse();\n\n            // vérification de la version du service, et des namespaces de l'en-tête\n            __checkServiceAttributes(root);\n\n            // puis lancement de la lecture de l'ensemble des noeuds, en bouclant sur les childNodes\n            __getChildNodes(root, reverseGeocodeResponse);\n\n            return reverseGeocodeResponse;\n        },\n\n        /** TODO : jsdoc block */\n        ReverseGeocodedLocation : function (node, reverseGeocodeResponse) {\n            var reverseGeocodedLocation = new ReverseGeocodedLocation();\n\n            __getChildNodes(node, reverseGeocodedLocation);\n\n            // Ajout du résultat au tableau locations de reverseGeocodeResponse\n            if (reverseGeocodeResponse && Array.isArray(reverseGeocodeResponse.locations)) {\n                reverseGeocodeResponse.locations.push(reverseGeocodedLocation);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Address : function (node, reverseGeocodedLocation) {\n            var countrycode = node.getAttribute(\"countryCode\");\n            if (reverseGeocodedLocation && countrycode) {\n                reverseGeocodedLocation.type = countrycode;\n            }\n            // on va récupérer les autres informations (StreetAddress, place, postalCode...)\n            __getChildNodes(node, reverseGeocodedLocation);\n        },\n\n        /** TODO : jsdoc block */\n        Building : function (node, reverseGeocodedLocation) {\n            var num = node.getAttribute(\"number\");\n            if (reverseGeocodedLocation && reverseGeocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (num) {\n                    reverseGeocodedLocation.placeAttributes.number = num;\n                } else if (node.getAttribute(\"buildingName\")) {\n                    reverseGeocodedLocation.placeAttributes.number = node.getAttribute(\"buildingName\");\n                } else if (node.getAttribute(\"subdivision\")) {\n                    reverseGeocodedLocation.placeAttributes.number = node.getAttribute(\"subdivision\");\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Street : function (node, reverseGeocodedLocation) {\n            // in case of a streetAddress result : street represents the street name\n            if (reverseGeocodedLocation.type === \"StreetAddress\") {\n                reverseGeocodedLocation.placeAttributes.street = __getChildValue(node);\n\n                // in case of a cadastral parcel result : street represents the cadastral parcel identifier\n            } else if (reverseGeocodedLocation.type === \"CadastralParcel\") {\n                reverseGeocodedLocation.placeAttributes.cadastralParcel = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Place : function (node, reverseGeocodedLocation) {\n            var placeType = node.getAttribute(\"type\");\n            var placeName = __getChildValue(node);\n\n            if (reverseGeocodedLocation && reverseGeocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                if (placeType === \"Municipality\") {\n                    reverseGeocodedLocation.placeAttributes.municipality = placeName;\n                } else if (placeType === \"Bbox\") {\n                    var values = placeName.split(\";\");\n                    if (values.length === 4) {\n                        reverseGeocodedLocation.placeAttributes.bbox = {\n                            left : parseFloat(values[0]),\n                            right : parseFloat(values[2]),\n                            top : parseFloat(values[1]),\n                            bottom : parseFloat(values[3])\n                        };\n                    }\n                } else if (placeType === \"Commune\") {\n                    reverseGeocodedLocation.placeAttributes.commune = placeName;\n                } else if (placeType === \"Departement\") {\n                    reverseGeocodedLocation.placeAttributes.department = placeName;\n                } else if (placeType === \"INSEE\") {\n                    reverseGeocodedLocation.placeAttributes.insee = placeName;\n                } else if (placeType === \"Qualite\") {\n                    reverseGeocodedLocation.placeAttributes.quality = placeName;\n                } else if (placeType === \"Territoire\") {\n                    reverseGeocodedLocation.placeAttributes.territory = placeName;\n                } else if (placeType === \"ID\") {\n                    reverseGeocodedLocation.placeAttributes.ID = placeName;\n                } else if (placeType === \"ID_TR\") {\n                    reverseGeocodedLocation.placeAttributes.IDTR = placeName;\n                } else if (placeType === \"Importance\") {\n                    reverseGeocodedLocation.placeAttributes.importance = parseInt(placeName, 10);\n                } else if (placeType === \"Nature\") {\n                    reverseGeocodedLocation.placeAttributes.nature = placeName;\n                } else if (placeType === \"Numero\") {\n                    reverseGeocodedLocation.placeAttributes.number = placeName;\n                } else if (placeType === \"Feuille\") {\n                    reverseGeocodedLocation.placeAttributes.sheet = placeName;\n                } else if (placeType === \"Section\") {\n                    reverseGeocodedLocation.placeAttributes.section = placeName;\n                } else if (placeType === \"CommuneAbsorbee\") {\n                    reverseGeocodedLocation.placeAttributes.absorbedCity = placeName;\n                } else if (placeType === \"Arrondissement\") {\n                    if (placeName) {\n                        reverseGeocodedLocation.placeAttributes.arrondissement = placeName;\n                    }\n                } else if (placeType === \"Type\") {\n                    reverseGeocodedLocation.placeAttributes.origin = placeName;\n                } else if (placeType === \"Prefecture\") {\n                    reverseGeocodedLocation.placeAttributes.prefecture = placeName;\n                } else if (placeType === \"InseeRegion\") {\n                    reverseGeocodedLocation.placeAttributes.inseeRegion = placeName;\n                } else if (placeType === \"InseeDepartment\") {\n                    reverseGeocodedLocation.placeAttributes.inseeDepartment = placeName;\n                }\n            }\n        },\n\n        /** TODO : jsdoc block */\n        PostalCode : function (node, reverseGeocodedLocation) {\n            if (reverseGeocodedLocation && reverseGeocodedLocation.hasOwnProperty(\"placeAttributes\")) {\n                reverseGeocodedLocation.placeAttributes.postalCode = __getChildValue(node);\n            }\n        },\n\n        /** TODO : jsdoc block */\n        SearchCentreDistance : function (node, reverseGeocodedLocation) {\n            if (reverseGeocodedLocation) {\n                reverseGeocodedLocation.searchCenterDistance = parseFloat(node.getAttribute(\"value\"));\n            }\n        },\n\n        /** TODO : jsdoc block */\n        Error : function (node) {\n            // <Error message=\"For input string : &quot;2,45&quot;\" errorCode=\"InternalServerError\"/>\n            var srvMess = node.getAttribute(\"message\");\n            var errorCode = node.getAttribute(\"errorCode\");\n            var message = MR.getMessage(\"SERVICE_RESPONSE_EXCEPTION\",\n                \"(\" + errorCode + \") : \" + srvMess);\n            throw new ErrSrv({\n                message : message,\n                type : ErrSrv.TYPE_SRVERR\n            });\n        }\n    },\n\n    gml : {\n\n        /** TODO : jsdoc block */\n        pos : function (node, reverseGeocodedLocation) {\n            var pos = __getChildValue(node);\n            if (reverseGeocodedLocation && pos) {\n                reverseGeocodedLocation.position = {\n                    x : parseFloat(pos.split(\" \")[0]),\n                    y : parseFloat(pos.split(\" \")[1])\n                };\n            }\n        }\n    },\n\n    xlsext : {\n        /** TODO : jsdoc block */\n        ExtendedGeocodeMatchCode : function (node, reverseGeocodedLocation) {\n            if (reverseGeocodedLocation) {\n                reverseGeocodedLocation.matchType = __getChildValue(node);\n            }\n        }\n    },\n\n    /** TODO : jsdoc block */\n    ExceptionReport : function (node) {\n        var response = {};\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = ReverseGeocodeResponseReader.READERS[\"Exception\"](child);\n                }\n            }\n        }\n        return response;\n    },\n\n    /** TODO : jsdoc block */\n    Exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service de géocodage,\n *      à l'aide des READERS de la classe.\n *\n * @method ReverseGeocodeResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @return {Object} geocodeResponse|exceptionReport : l'objet contenant les informations de la réponse XML,\n *      sous la forme d'un objet GeocodeResponse, ou un objet littéral exceptionReport si le service a renvoyé une exception.\n * @static\n * @memberof ReverseGeocodeResponseReader\n */\nReverseGeocodeResponseReader.read = function (root) {\n    if (root.nodeName === \"XLS\") {\n        var nsPrefix = root.prefix;\n        if (!nsPrefix) {\n            nsPrefix = ReverseGeocodeResponseReader.DEFAULTPREFIX;\n        }\n        var geocodeResponse = ReverseGeocodeResponseReader.READERS[nsPrefix][root.nodeName](root);\n        return geocodeResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = ReverseGeocodeResponseReader.READERS[root.nodeName](root);\n        return exceptionReport;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\n/**\n * Récupération des attributs d'un noeud élément\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\n/**\n * Récupération des noeuds enfants à partir d'un noeud donné, pour lecture (readNode).\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __getChildNodes\n * @param {DOMElement} node - a DOM node\n * @param {Array|Object} [data] - an object to be filled with node data\n */\nfunction __getChildNodes (node, data) {\n    if (node.hasChildNodes()) {\n        var children = node.childNodes;\n        var child;\n        var childName;\n        var childPrefix;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 1) { // 1 === node.ELEMENT_NODE\n                childName = child.localName || child.baseName || child.nodeName;\n                childPrefix = child.prefix || ReverseGeocodeResponseReader.DEFAULTPREFIX;\n\n                if (ReverseGeocodeResponseReader.READERS[childPrefix][childName]) {\n                    var reader = ReverseGeocodeResponseReader.READERS[childPrefix][childName];\n                    reader(child, data);\n                } else {\n                    __getChildNodes(child, data);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Lecture de la valeur du premier child d'un noeud, si elle existe.\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __getChildValue\n * @param {DOMElement} node - a DOM node\n * @return {String} value - valeur du firstChild du noeud en entrée, ou chaîne vide.\n */\nfunction __getChildValue (node) {\n    var textNode;\n    var value = \"\";\n\n    if (node.hasChildNodes()) {\n        textNode = node.firstChild;\n        if (textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            value = textNode.nodeValue;\n        }\n    }\n    return value;\n}\n\n/**\n * Vérification des attributs du service, dans la balise XLS de la réponse :\n *      version, namespaces, et namespace par défaut doivent correspondre à ceux attendus.\n *\n * @private\n * @memberof ReverseGeocodeResponseReader\n * @method __checkServiceAttributes\n * @param {DOMElement} XLSNode - a DOM node, corresponding to XLS first tag.\n */\nfunction __checkServiceAttributes (XLSNode) {\n    if (XLSNode.attributes.length > 0) {\n        // on récupère et parcourt les attributs de la balise XLS de la réponse\n        var xlsAttributes = __getAttributes(XLSNode);\n        for (var att in xlsAttributes) {\n            if (xlsAttributes.hasOwnProperty(att)) {\n                // vérification de la version\n                if (att === \"version\") {\n                    if (xlsAttributes[\"version\"] !== ReverseGeocodeResponseReader.VERSION) {\n                        console.log(\"[ReverseGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing\");\n                        return;\n                    }\n                }\n\n                // on vérifie que l'uri du namespace par défaut est bien celle que l'on attend\n                if (att === \"xmlns\") {\n                    if (xlsAttributes[att] !== ReverseGeocodeResponseReader.NAMESPACES[ReverseGeocodeResponseReader.DEFAULTPREFIX]) {\n                        console.log(\"[ReverseGeocodeResponseReader] geocode response default namespace is not the expected one\");\n                        return;\n                    }\n                    continue;\n                }\n\n                var prefix = att.split(\":\")[0];\n                var ns = att.split(\":\")[1];\n\n                // si on a un autre xmlns, on vérifie aussi les URI\n                if (prefix === \"xmlns\" && ns) {\n                    // si l'attribut correspond à un namespace défini dans le reader\n                    if (ReverseGeocodeResponseReader.NAMESPACES[ns]) {\n                        // il faut que les URI correspondent aussi.\n                        if (ReverseGeocodeResponseReader.NAMESPACES[ns] !== xlsAttributes[att]) {\n                            console.log(\"[ReverseGeocodeResponseReader] geocode response \" + att + \" namespace is not the expected one\");\n                            return;\n                        }\n                    }\n                }\n\n                // pour finir on vérifie la localisation du schema XSD du service\n                if (ns === \"schemaLocation\") {\n                    if (ReverseGeocodeResponseReader.SCHEMALOCATION !== xlsAttributes[att]) {\n                        console.log(\"[ReverseGeocodeResponseReader] geocode response schema location is not the expected one\");\n                        return;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport default ReverseGeocodeResponseReader;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML\n * ou d'un JSON encapsulant du XML\n * (Factory)\n *\n * @module ReverseGeocodeResponseFactory\n * @alias Gp.Services.ReverseGeocode.Response.ReverseGeocodeResponseFactory\n * @todo La reponse JSON peut encapsuler un XML !\n * @private\n */\n\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport ReverseGeocodeResponseReader from \"../Formats/ReverseGeocodeResponseReader\";\n\nvar ReverseGeocodeReponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant ReverseGeocode\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // data de type ReverseGeocodeResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    var p = new XML({\n                        reader : ReverseGeocodeResponseReader\n                    });\n\n                    if (typeof options.response === \"string\") {\n                        p.setXMLString(options.response);\n                    } else {\n                        p.setXMLDoc(options.response);\n                    }\n\n                    data = p.parse();\n\n                    if (!data) {\n                        throw new Error(\"L'analyse de la réponse du service !?\");\n                    }\n                } catch (e) {\n                    // on relaye l'erreur reçue\n                    e.status = 200;\n                    options.onError.call(options.scope, e);\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                // TODO : quand cela arrive-t-il ?\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n\n                // dans le cas d'un srs non EPSG géographique, il faut réinverser les coordonnées (lat,lon => lon,lat)\n                if (options.scope && options.scope.options && options.scope.options.srs && options.scope.options.srs !== \"EPSG:4326\") {\n                    var location;\n                    var pos;\n                    if (data.locations) {\n                        for (var i = 0; i < data.locations.length; i++) {\n                            location = data.locations[i];\n                            if (location) {\n                                pos = location.position;\n                                if (pos) {\n                                    // on inverse les 2 coordonnées\n                                    location.position = {\n                                        x : pos.y,\n                                        y : pos.x\n                                    };\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService({\n                message : MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\"),\n                type : ErrorService.TYPE_SRVERR,\n                status : -1 // FIXME : status response\n            }));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default ReverseGeocodeReponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport ReverseGeocodeRequestFactory from \"./Request/ReverseGeocodeRequestFactory\";\nimport ReverseGeocodeResponseFactory from \"./Response/ReverseGeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de géocodage inverse du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ReverseGeocode\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {Object} options.position - Position du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs.\n *      @param {Float} options.position.x - Abcisse du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs. (= longitude si srs = \"CRS:84\", latitude si srs = \"EPSG:4326\")\n *      @param {Float} options.position.y - Ordonnée du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs. (= latitude si srs = \"CRS:84\", longitude si srs = \"EPSG:4326\")\n *\n * @param {Object} [options.filterOptions] - Les propriétés possibles de cet objet sont décrites ci-après.\n * @param {Object} [options.filterOptions.bbox] - Emprise dans laquelle on souhaite effectuer la recherche.\n *      Les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Float} options.filterOptions.bbox.left   - Abscisse du côté gauche de la BBOX\n *      @param {Float} options.filterOptions.bbox.right  - Abscisse du côté droit de la BBOX\n *      @param {Float} options.filterOptions.bbox.top    - Ordonnée supérieure de la BBOX\n *      @param {Float} options.filterOptions.bbox.bottom - Ordonnée inférieure de la BBOX\n *\n * @param {Object} [options.filterOptions.circle] - Cercle dans lequel on souhaite effectuer la recherche.\n *      Les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {Float} options.filterOptions.circle.x      - Abscisse du centre du cercle de recherche.\n *      @param {Float} options.filterOptions.circle.y      - Ordonnée du centre du cercle de recherche.\n *      @param {Float} options.filterOptions.circle.radius - Rayon du cercle de recherche.\n *\n * @param {Array.<Object>} [options.filterOptions.polygon] - Polygone dans lequel on souhaite effectuer la recherche.\n *      Liste des couples x et y pour chaque point constituant le polygone.\n *\n * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service de géocodage du Géoportail permet de rechercher des 'PostionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales et/ou des 'CadastralParcel' pour des parcelles cadastrales.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, type = ['StreetAddress'].\n *\n * @param {Number} [options.maximumResponses] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 25.\n *\n * @param {String} [options.srs = CRS:84] - Système de coordonnées dans lequel les paramètres géographiques en entrée et la réponse du service sont exprimés.\n *      Pas de valeur par défaut.\n *      Si le serveur consulté est celui du Géoportail, la valeur par défaut est : \"CRS:84\".\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      position : {x:0 , y:0},\n *      filterOptions :{\n *          bbox : {left : 0, right : 1, top : 1, bottom : 0},\n *          [circle : {\n *              x : 0,\n *              y : 0,\n *              radius : 100\n *          }]\n *          [polygon  : [{x:0,y:0}, {x:1,y:1}, {x:2,y:2}, {x:3,y:2}, {x:4,y:1}, {x:0,y:0}]]\n *          type : ['StreetAddress']\n *      },\n *      maximumResponses : 25,\n *      srs : 'EPSG:4326'\n *   };\n *\n * @private\n */\nfunction ReverseGeocode (options) {\n    if (!(this instanceof ReverseGeocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ReverseGeocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ReverseGeocode\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.ReverseGeocode\");\n    this.logger.trace(\"[Constructeur ReverseGeocode (options)]\");\n\n    if (!options.position) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.position.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.x\"));\n    }\n\n    if (options.position.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.y\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.position = options.position;\n\n    // on definit des filtres par defaut\n    if (!options.filterOptions || typeof options.filterOptions !== \"object\") {\n        this.options.filterOptions = options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // FIXME ECMAScript 5 support (valable pour un objet uniquement !)\n    // ceci permet de tester le cas où : object = {}\n    if (Object.keys(options.filterOptions).length === 0) {\n        this.options.filterOptions = {\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // on teste pour chaque filtre, les conditions suivantes : null ou vide !\n    var filter = Object.keys(options.filterOptions);\n    for (var i = 0; i < filter.length; i++) {\n        var key = filter[i];\n        if (!options.filterOptions[key] || Object.keys(options.filterOptions[key]).length === 0) {\n            delete this.options.filterOptions[key];\n        }\n    }\n\n    this.options.filterOptions.type = options.filterOptions.type || [\"StreetAddress\"];\n    // on vérifie que le type est bien dans un tableau\n    if (!Array.isArray(this.options.filterOptions.type)) {\n        throw new Error(_.getMessage(\"PARAM_TYPE\", \"filterOptions.type\"));\n    }\n\n    this.options.maximumResponses = options.maximumResponses || 25;\n\n    // FIXME : cet attribut (returnFreeForm) n'est pas spécifié dans la doc du constructeur ?\n    // Il est inutile en effet, mais présent dans les specs...\n    this.options.returnFreeForm = options.returnFreeForm || false;\n    // info : en réalité le service ne reconnait que EPSG:4326. this.options.srs permet essentiellement de différencier EPSG:4326 (lat,lon) et CRS:84 (lon,lat)\n    this.options.srs = options.srs || \"CRS:84\";\n\n    // si on n'a pas un systeme de coordonnées EPSG géographique, il faut inverser les coordonnées\n    // (car elles sont en lon, lat alors que le service attend une position en lat, lon).\n    // dans le cas d'EPSG:4326 par exemple, les coordonnées sont bien en lat, lon donc on ne fait rien.\n    if (ReverseGeocode.geoEPSG.indexOf(this.options.srs) === -1) {\n        // pour la position\n        this.options.position = {\n            x : this.options.position.y,\n            y : this.options.position.x\n        };\n        // pour les filtres spatiaux s'ils sont spécifiés\n        if (this.options.filterOptions && this.options.filterOptions.circle) {\n            var circle = this.options.filterOptions.circle;\n            this.options.filterOptions.circle = {\n                x : circle.y,\n                y : circle.x,\n                radius : circle.radius\n            };\n        }\n        if (this.options.filterOptions && this.options.filterOptions.polygon) {\n            var polygon = this.options.filterOptions.polygon;\n            for (i = 0; i < polygon.length; i++) {\n                var coords = polygon[i];\n                this.options.filterOptions.polygon[i] = {\n                    x : coords.y,\n                    y : coords.x\n                };\n            }\n        }\n    }\n\n    // attributs d'instances\n\n    /**\n     * Format forcé de la réponse du service : \"xml\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"xml\";\n}\n\n/**\n * @lends module:ReverseGeocode#\n */\nReverseGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nReverseGeocode.prototype.constructor = ReverseGeocode;\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        position : this.options.position,\n        returnFreeForm : this.options.returnFreeForm,\n        filterOptions : this.options.filterOptions,\n        srs : \"EPSG:4326\", // info : en réalité le service ne reconnait que EPSG:4326. this.options.srs permet essentiellement de différencier EPSG:4326 (lat,lon) et CRS:84 (lon,lat)\n        maximumResponses : this.options.maximumResponses\n    };\n\n    this.request = ReverseGeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        ReverseGeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\n/**\n * Codes EPSG géographiques (lat/lon). Utiles car les coordonnées doivent être inversées.\n */\nReverseGeocode.geoEPSG = [\"EPSG:4326\"];\n\nexport default ReverseGeocode;\n","/**\n * Response object for {@link module:Services~autoComplete Gp.Services.autoComplete ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.AutoComplete.SuggestedLocation>} suggestedLocations - SuggestedLocations array.\n *\n * @namespace\n * @alias Gp.Services.AutoCompleteResponse\n */\nfunction AutoCompleteResponse () {\n    if (!(this instanceof AutoCompleteResponse)) {\n        throw new TypeError(\"AutoCompleteResponse constructor cannot be called as a function.\");\n    }\n\n    this.suggestedLocations = [];\n}\n\nAutoCompleteResponse.prototype = {\n\n    constructor : AutoCompleteResponse\n\n};\n\nexport default AutoCompleteResponse;\n","\n/**\n * Single SuggestedLocation Object returned by underlying web service.\n * Each suggested location represents a street address (\"StreetAddress\") or a place name (\"PositionOfInterest\").\n *\n * @property {String} type - Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n * @property {Gp.Point} position - Position of the suggested location given in requested coordinates system.\n * @property {String} commune - Suggested municipality\n * @property {String} fullText - Full text representation of the suggested location.\n * @property {String} postalCode - Suggested location postcode\n * @property {Integer} classification - Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n * @property {String} street - Street name of the suggested location (\"StreetAddress\" only).\n * @property {String} kind - Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n *\n * @namespace\n * @alias Gp.Services.AutoComplete.SuggestedLocation\n */\nfunction SuggestedLocation () {\n    if (!(this instanceof SuggestedLocation)) {\n        throw new TypeError(\"SuggestedLocation constructor cannot be called as a function.\");\n    }\n\n    /* REPONSE :\n        {\n           \"status\" : \"OK\",\n           \"results\" : [\n              {\n                 \"country\":\"PositionOfInterest\",\n                 \"x\":-1.559185,\n                 \"y\":47.952603,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"35150\",\n                 \"street\":\"corbe\",\n                 \"kind\":\"Lieu-dit habité\",\n                 \"fulltext\":\"corbe, 35150 Brie\",\n                 \"classification\":6\n              },\n              {\n                 \"country\":\"StreetAddress\",\n                 \"x\":1.538295,\n                 \"y\":43.19646,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"09700\",\n                 \"street\":\"courreste\",\n                 \"kind\":\"\",\n                 \"fulltext\":\"courreste, 09700 Brie\",\n                 \"classification\":7\n              }\n           ]\n        }\n    */\n\n    /* REPONSE EN ERREUR\n        {\n            status : \"ERROR\",\n            results : [ ]\n        }\n    */\n\n    /**\n     * Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n     * @type {String}\n     */\n    this.type = null;\n\n    /**\n     * Position of the suggested location given in requested coordinates system.\n     * @type {Gp.Point}\n     */\n    this.position = {\n        x : null,\n        y : null\n    };\n\n    /**\n     * Suggested municipality\n     * @type {String}\n     */\n    this.commune = null;\n\n    /**\n     * Full text representation of the suggested location.\n     * @type {String}\n     */\n    this.fullText = null;\n\n    /**\n     * Suggested location postcode\n     * @type {Number}\n     */\n    this.postalCode = null;\n\n    /**\n     * Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n     * @type {Integer}\n     */\n    this.classification = null;\n\n    /**\n     * Street name of the suggested location (\"StreetAddress\" only).\n     * @type {String}\n     */\n    this.street = null;\n\n    /**\n     * Place name of the suggested location (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.poi = null;\n\n    /**\n     * Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.kind = null;\n}\n\nSuggestedLocation.prototype = {\n\n    constructor : SuggestedLocation\n};\n\nexport default SuggestedLocation;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AutoCompleteResponseFactory\n * @private\n * @alias Gp.Services.AutoComplete.Response.AutoCompleteResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AutoCompleteResponse from \"./model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./model/SuggestedLocation\";\n\nvar AutoCompleteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AutoCompleteResponseFactory\");\n        logger.trace([\"AutoCompleteResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                var JSONResponse = null;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // analyse de la réponse\n                if (JSONResponse) {\n                    // le service renvoie t il une erreur ?\n                    if (JSONResponse.error) {\n                        // ex. ?\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                            status : JSONResponse.error.code,\n                            type : ErrorService.TYPE_SRVERR\n                        }));\n                        return;\n                    }\n\n                    // création de l'objet réponse\n                    data = new AutoCompleteResponse();\n\n                    // boucle sur les résultats de l'autocomplétion\n                    if (JSONResponse.results && Array.isArray(JSONResponse.results)) {\n                        var suggestedLocation = null;\n\n                        for (var i = 0; i < JSONResponse.results.length; i++) {\n                            var result = JSONResponse.results[i];\n                            suggestedLocation = new SuggestedLocation();\n\n                            if (result) {\n                                if (result.country === \"StreetAddress\") {\n                                    suggestedLocation.street = result.street;\n                                    suggestedLocation.type = \"StreetAddress\";\n                                } else if (result.country === \"PositionOfInterest\") {\n                                    suggestedLocation.poi = result.street;\n                                    suggestedLocation.kind = result.kind;\n                                    suggestedLocation.type = \"PositionOfInterest\";\n                                }\n\n                                if (suggestedLocation.position) {\n                                    suggestedLocation.position.x = result.x;\n                                    suggestedLocation.position.y = result.y;\n                                }\n\n                                suggestedLocation.commune = result.city;\n                                suggestedLocation.fullText = result.fulltext;\n                                suggestedLocation.postalCode = result.zipcode;\n                                suggestedLocation.classification = result.classification;\n                            }\n                            // Ajout du résultat au tableau reverseGeocodedLocations de geocodedLocation\n                            data.suggestedLocations.push(suggestedLocation);\n                        }\n                    } else {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n\n                    if (!data.suggestedLocations.length) {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n                }\n\n                if (!data) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse (xmlString) est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AutoCompleteResponseFactory;\n","import CommonService from \"../CommonService\";\nimport AutoCompleteResponseFactory from \"./Response/AutoCompleteResponseFactory\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport MR from \"../../Utils/MessagesResources\";\nimport Helper from \"../../Utils/Helper\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\n\n/**\n * @classdesc\n * Appel du service d'autocomplétion du Géoportail :\n * envoi de la requête construite selon les paramètres en options,\n * éventuellement parsing et analyse  de la réponse,\n * retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.AutoComplete\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.text - La chaîne de caractère à compléter.\n *      Cette chaîne n'est pas \"URL encodée\".\n *      C'est l'API qui s'occupe de l'encoder pour l'inclure dans la requête.\n *\n * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service d'autocomplétion du Géoportail permet de rechercher des toponymes 'PostionOfInterest' et/ou des adresses postales 'StreetAddress'.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, type = ['StreetAddress'].\n *\n * @param {Array.<String>} [options.filterOptions.territory] - Limitation de la zone de recherche de localisants.\n *      Le service d'autocomplétion du Géoportail permet de limiter la recherche à la métropole et la Corse : options.filterOptions.territory = ['METROPOLE'],\n *      DOMS TOMS : options.filterOptions.territory = ['DOMTOM'], ou à une liste de départements : options.filterOptions.territory = ['31', '34']\n *      Pas de valeur par défaut.\n *      La valeur par défaut est donc celle du service.\n *      Le service d'autocomplétion du Géoportail renvoie toutes les informations quand aucun territoire n'est spécifié.\n *\n * @param {Number} [options.maximumResponses = 10] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut.\n *      La valeur par défaut sera donc celle du service : 10.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      text : \"\",\n *      filterOptions : {\n *          type : [\"StreetAddress\"],\n *          territory : ['METROPOLE', 'DOMTOM', '31']\n *      },\n *      maximumResponses : 10\n *   };\n * @private\n */\nfunction AutoComplete (options) {\n    if (!(this instanceof AutoComplete)) {\n        throw new TypeError(MR.getMessage(\"CLASS_CONSTRUCTOR\", \"AutoComplete\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"AutoComplete\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.AutoComplete\");\n    this.logger.trace(\"[Constructeur AutoComplete (options)]\");\n\n    if (!options.text) {\n        throw new Error(MR.getMessage(\"PARAM_MISSING\", \"text\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.text = options.text;\n\n    // on definit des filtres par defaut\n    if (!options.filterOptions || typeof options.filterOptions !== \"object\") {\n        this.options.filterOptions = options.filterOptions = {\n            territory : [],\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    // FIXME ECMAScript 5 support (valable pour un objet uniquement !)\n    // ceci permet de tester le cas où : object = {}\n    if (Object.keys(options.filterOptions).length === 0) {\n        this.options.filterOptions = {\n            territory : [],\n            type : [\"StreetAddress\"]\n        };\n    }\n\n    this.options.filterOptions.type = options.filterOptions.type || [\"StreetAddress\"];\n    this.options.filterOptions.territory = options.filterOptions.territory || [];\n    this.options.maximumResponses = options.maximumResponses || 10;\n\n    // INFO\n    // le service ne repond pas en mode POST (405 Method Not Allowed)\n    if (this.options.protocol === \"XHR\" && this.options.httpMethod === \"POST\") {\n        this.logger.warn(\"Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !\");\n        this.options.httpMethod = \"GET\"; // on surcharge !\n    }\n\n    // attributs d'instances\n\n    /**\n     * Format forcé de la réponse du service : \"json\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"json\";\n}\n\n/**\n * @lends module:AutoComplete#\n */\n\nAutoComplete.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nAutoComplete.prototype.constructor = AutoComplete;\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAutoComplete.prototype.buildRequest = function (error, success) {\n    // ex.\n    // http://wxs.ign.fr/CLEF/ols/apis/completion?\n    // text=Brie-Comt&\n    // type=StreetAddress,PositionOfInterest&\n    // territory=METROPOLE&\n    // maximumResponses=10\n\n    // traitement des param KPV sous forme de tableau\n    var territories = \"\";\n    if (this.options.filterOptions.territory) {\n        territories = this.options.filterOptions.territory.join(\";\");\n    }\n\n    var types = \"\";\n    if (this.options.filterOptions.type) {\n        types = this.options.filterOptions.type.join(\",\");\n    }\n\n    // normalisation de la requete avec param KPV\n    this.request = Helper.normalyzeParameters({\n        text : encodeURIComponent(this.options.text),\n        type : types,\n        terr : territories,\n        maximumResponses : this.options.maximumResponses\n    });\n\n    (!this.request)\n        ? error.call(this, new ErrorService(MR.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succès de l'analyse de la réponse\n */\nAutoComplete.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onSuccess : success,\n            onError : error,\n            scope : this\n        };\n\n        AutoCompleteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(MR.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default AutoComplete;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes du service de calcul d'itineraire (REST).\n *      Permet le mapping avec les options du service.\n * @constructor\n * @alias Gp.Services.Route.Request.RouteParamREST\n * @param {Object} options - options\n *\n * @private\n */\nfunction RouteParamREST (options) {\n    if (!(this instanceof RouteParamREST)) {\n        throw new TypeError(\"RouteParamREST constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur RouteParamREST ()]\");\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Ressource utilisée */\n    this.resource = this.options.resource;\n\n    /** Coordonnées du point de départ. */\n    this.start = this.options.startPoint.x + \",\" + this.options.startPoint.y;\n\n    /** Coordonnées du point d’arrivée. */\n    this.end = this.options.endPoint.x + \",\" + this.options.endPoint.y;\n\n    /** Coordonnées des étapes point de départ. */\n    this.intermediates = this.options.viaPoints;\n\n    /** Nom du profile à utiliser */\n    this.profile = this.options.graph;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.crs = this.options.srs;\n\n    /** Liste des contraintes */\n    this.constraints = this.options.constraints;\n\n    /** Nom de l'optimisation à utiliser */\n    this.optimization = this.options.routePreference;\n\n    /** Format de sortie (résumé de l’itinéraire) */\n    this.getSteps = (this.options.geometryInInstructions) ? \"true\" : \"false\";\n\n    /** Unité des distances */\n    this.distanceUnit = this.options.distanceUnit;\n\n    /** Unité des durées */\n    this.timeUnit = this.options.timeUnit;\n\n    /** Attributs des voies */\n    this.waysAttributes = this.options.waysAttributes;\n}\n\n/**\n * CLASSNAME\n */\nRouteParamREST.CLASSNAME = \"RouteParamREST\";\n\nRouteParamREST.prototype = {\n\n    /**\n     * @lends module:RouteParamREST#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteParamREST,\n\n    /**\n     * Retourne une liste de points\n     * @returns {String} une liste de points (sep '|')\n     */\n    getIntermediates : function () {\n        var array = [];\n        if (this.intermediates.length !== 0) {\n            for (var i = 0; i < this.intermediates.length; i++) {\n                var obj = this.intermediates[i];\n                array.push(obj.x + \",\" + obj.y);\n            }\n        }\n\n        return array.join(\"|\");\n    },\n\n    /**\n     * Retourne une liste d'attributs\n     * @returns {String} une liste d'attributs (sep '|')\n     */\n    getWaysAttributes : function () {\n        return this.waysAttributes.join(\"|\");\n    },\n\n    /**\n     * Retourne un profile\n     * @returns {String} profile\n     */\n    getProfile : function () {\n        return this.profile;\n    },\n\n    /**\n     * Retourne un distanceUnit\n     * @returns {String} distanceUnit\n     */\n    getDistanceUnit : function () {\n        if (this.distanceUnit === \"m\") {\n            return \"meter\";\n        }\n        if (this.distanceUnit === \"km\") {\n            return \"kilometer\";\n        }\n        return \"\";\n    },\n\n    /**\n     * Retourne une optimisation\n     * @returns {String} optimization\n     */\n    getOptimization : function () {\n        if (this.optimization) {\n            return this.optimization;\n        } else {\n            return \"\";\n        }\n    },\n\n    /**\n     * Retourne la liste des constraints\n     * @returns {String} une liste des constraints (sep '|')\n     */\n    getConstraints : function () {\n        var constraintArray = [];\n\n        if (this.constraints.length !== 0) {\n            for (var k = 0; k < this.constraints.length; k++) {\n                constraintArray.push(JSON.stringify(this.constraints[k]));\n            }\n        }\n        return constraintArray.join(\"|\");\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array} liste de paramêtres\n */\nRouteParamREST.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    map.push({\n        k : \"start\",\n        v : this.start\n    });\n\n    map.push({\n        k : \"end\",\n        v : this.end\n    });\n\n    map.push({\n        k : \"geometryFormat\",\n        v : \"geojson\"\n    });\n\n    if (this.optimization) {\n        map.push({\n            k : \"optimization\",\n            v : this.getOptimization()\n        });\n    }\n\n    if (this.intermediates) {\n        map.push({\n            k : \"intermediates\",\n            v : this.getIntermediates()\n        });\n    }\n\n    if (this.profile) {\n        map.push({\n            k : \"profile\",\n            v : this.getProfile()\n        });\n    }\n\n    if (this.constraints) {\n        map.push({\n            k : \"constraints\",\n            v : this.getConstraints()\n        });\n    }\n\n    if (this.crs) {\n        map.push({\n            k : \"crs\",\n            v : this.crs\n        });\n    }\n\n    if (this.distanceUnit) {\n        map.push({\n            k : \"distanceUnit\",\n            v : this.getDistanceUnit()\n        });\n    }\n\n    if (this.timeUnit) {\n        map.push({\n            k : \"timeUnit\",\n            v : this.timeUnit\n        });\n    }\n\n    if (this.waysAttributes) {\n        map.push({\n            k : \"waysAttributes\",\n            v : this.getWaysAttributes()\n        });\n    }\n\n    return map;\n};\n\nexport default RouteParamREST;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport RouteParamREST from \"./model/RouteParamREST\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes de type REST sur le service de calcul d'itineraire\n * (uniquement en GET)\n *\n * @constructor\n * @alias Gp.Services.Route.Request.RouteRequestREST\n * @param {Object} options - options definies dans le composant Route\n *\n * @example\n * var options = {\n *      (...)\n * };\n *\n * @private\n */\nfunction RouteRequestREST (options) {\n    this.logger = Logger.getLogger(\"RouteRequestREST\");\n    this.logger.trace(\"[Constructeur RouteRequestREST ()]\");\n\n    if (!(this instanceof RouteRequestREST)) {\n        throw new TypeError(\"RouteRequestREST constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /** liste des options */\n    this.settings = options;\n}\n\nRouteRequestREST.prototype = {\n\n    /**\n     * @lends module:RouteRequestREST#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteRequestREST,\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out : origin=2.416907353809513,48.8465772142297&destination=2.4248037771493673,48.84591353161838\n     * // POST out : Not yet supported method POST !\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        // INFO\n        // construction simple sans template...,\n        // mais en attendant que les services soient fixés, on taggue ce composant en mode PROTOTYPE !\n        this.logger.warn(\" PROTOTYPE !\");\n\n        // Mapping des options avec le service de l'API REST\n        var oParams = new RouteParamREST(this.settings);\n        var params = oParams.getParams();\n\n        var request = \"\";\n        for (var i = 0; i < params.length; i++) {\n            var o = params[i];\n            if (request) {\n                request += \"&\";\n            }\n            request += o.k + \"=\" + o.v;\n        }\n\n        // Exemple :\n        //  http://wxs.ign.fr/KEY/itineraire/rest/route.json?\n        //  origin=&\n        //  destination=&\n        //  waypoints=&\n        //  method=DISTANCE&\n        //  graph=Pieton&\n        //  graphName=Pieton&\n        //  exclusions=&\n        //  tolerance=10&\n        //  srs=\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default RouteRequestREST;\n","/**\n * Creation d'une requête REST en mode POST ou GET\n * (Factory)\n *\n * @module RouteRequestFactory\n * @alias Gp.Services.Route.Request.RouteRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport RouteRequestREST from \"./RouteRequestREST\";\n\nvar RouteRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   // utilisation avec les callback\n     *   var options = {\n     *      (...)\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      // spécifique au service\n     *      startPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      endPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      provideBbox : false,\n     *      exclusions : [\"bridge\", \"tunnel\", \"toll\"],\n     *      distanceUnit : \"km\",\n     *      graph : \"Voiture\",\n     *      geometryInInstructions : false,\n     *      routePreference : \"fastest\"\n     *   };\n     *   RouteRequestFactory.build(options);\n     *\n     *   // utilisation sans callback\n     *   var options = {...};\n     *   try {\n     *      var result = RouteRequestFactory.build(options);\n     *      if (! result) { throw new Error(\"...\"):}\n     *   } catch (e) {\n     *      // todo\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteRequestFactory\");\n        logger.trace([\"RouteRequestFactory::build()\"]);\n\n        var request = null;\n\n        var settings = options || {};\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\");\n\n        var message = null;\n\n        // FIXME les exceptions ne sont pas 'catchées' sur le constructeur !\n        var myReq = new RouteRequestREST(settings);\n        if (!myReq.processRequestString()) {\n            message = \"Error process request (rest) !\";\n            if (bOnError) {\n                options.onError.call(options.scope, new ErrorService(message));\n                return;\n            }\n            throw new Error(message);\n        }\n        request = myReq.requestString;\n\n        return request;\n    }\n};\n\nexport default RouteRequestFactory;\n","/**\n * Response object for {@link module:Services~route Gp.Services.route ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Gp.BBox} bbox - Bounding Box of the route. Given when provideBBox parameter is used in function call.\n * @property {Object} routeGeometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the route.\n * @property {Array.<Gp.Services.Route.RouteInstruction>} routeInstructions - Instructions of the route.\n * @property {String} totalDistance - Length of the route. If distanceUnit parameter was set to \"km\" (default), totalDistance is a string containing the total distance expressed in kilometers, followed by \" Km\" (e.g. : \"19.6 Km\"). If distanceUnit parameter was set to \"m\", totalDistance is a string containing the total distance expressed in meters (e.g. : \"19599.14\").\n * @property {Float} totalTime - Route duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.RouteResponse\n */\nfunction RouteResponse () {\n    if (!(this instanceof RouteResponse)) {\n        throw new TypeError(\"RouteResponse constructor cannot be called as a function.\");\n    }\n\n    this.totalTime = null;\n\n    this.totalDistance = null;\n\n    this.bbox = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.routeGeometry = null; // FIXME can be null if option 'geometryInInstructions' is true !\n\n    this.routeInstructions = [];\n}\n\nRouteResponse.prototype = {\n\n    constructor : RouteResponse\n\n};\n\nexport default RouteResponse;\n","\n/**\n * Single Route Instruction object.\n *\n * @property {String} code - Instruction code :\n *\n * - \"F\" : Straight forward\n * - \"B\" : U-turn\n * - \"L\" : turn left\n * - \"R\" : turn right\n * - \"BL\" : turn left strongly\n * - \"BR\" : turn right strongly\n * - \"FL\" : turn lightly to the left\n * - \"FR\" : turn lightly to the right\n * - \"round_about_entry\" : round about entry\n * - \"round_about_exit\" : round about exit\n *\n * @property {String} instruction - Instruction text : translated code + street name\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the street.\n * @property {Float} distance - Length of the instruction. Expressed in km or m, depending on distanceUnit parameter.\n * @property {Float} duration - Instruction duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.Route.RouteInstruction\n */\nfunction RouteInstruction () {\n    if (!(this instanceof RouteInstruction)) {\n        throw new TypeError(\"RouteInstruction constructor cannot be called as a function.\");\n    }\n\n    this.duration = null;\n\n    this.distance = null;\n\n    this.code = null;\n\n    this.instruction = null;\n\n    this.geometry = null; // FIXME can be null if option 'geometryInInstructions' is false !\n}\n\nRouteInstruction.prototype = {\n\n    constructor : RouteInstruction\n\n};\n\nexport default RouteInstruction;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module RouteResponseFactory\n * @alias Gp.Services.Route.Response.RouteResponseFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport RouteResponse from \"./model/RouteResponse\";\nimport RouteInstruction from \"./model/RouteInstruction\";\n\nvar RouteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteResponseFactory\");\n        logger.trace(\"RouteResponseFactory::build()\");\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                logger.trace(\"analyze response : json\");\n\n                var JSONResponse;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // construction de l'objet réponse JSON\n                if (JSONResponse) {\n                    // le service renvoie t il une erreur ?\n                    if (JSONResponse.message) {\n                        // ex. {\"message\":\"message not null\", \"status\":\"ERROR\"}\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.message)));\n                        return;\n                    }\n                    var legs = [];\n                    var legSteps = [];\n                    var steps = [];\n\n                    data = new RouteResponse();\n\n                    if (data.hasOwnProperty(\"totalTime\")) {\n                        data.totalTime = parseFloat(JSONResponse.duration);\n                    }\n                    if (data.hasOwnProperty(\"totalDistance\")) {\n                        data.totalDistance = parseFloat(JSONResponse.distance);\n                    }\n\n                    if (data.hasOwnProperty(\"bbox\")) {\n                        data.bbox.left = parseFloat(JSONResponse.bbox[0]);\n                        data.bbox.bottom = parseFloat(JSONResponse.bbox[1]);\n                        data.bbox.right = parseFloat(JSONResponse.bbox[2]);\n                        data.bbox.top = parseFloat(JSONResponse.bbox[3]);\n                    }\n\n                    if (data.hasOwnProperty(\"routeGeometry\") && !options.geometryInInstructions) {\n                        data.routeGeometry = JSONResponse.geometry;\n                    }\n\n                    if (data.hasOwnProperty(\"routeInstructions\") && options.geometryInInstructions) {\n                        var legList = JSONResponse.portions;\n                        var i;\n                        if (Array.isArray(legList) && legList.length) {\n                            for (i = 0; i < legList.length; i++) {\n                                legs.push(legList[i]);\n                            }\n                        }\n                        if (legs.length) {\n                            for (i = 0; i < legs.length; i++) {\n                                legSteps.push(legs[i].steps);\n                            }\n                        }\n                        if (legSteps.length) {\n                            for (i = 0; i < legSteps.length; i++) {\n                                steps = steps.concat(legSteps[i]);\n                            }\n                        }\n\n                        steps.forEach(function (step) {\n                            data.routeInstructions.push(new RouteInstruction());\n                            data.routeInstructions[data.routeInstructions.length - 1].duration = step.duration;\n                            data.routeInstructions[data.routeInstructions.length - 1].distance = step.distance;\n                            data.routeInstructions[data.routeInstructions.length - 1].code = \"\";\n                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"\";\n                            data.routeInstructions[data.routeInstructions.length - 1].geometry = step.geometry;\n\n                            // on ne souhaite pas de ce type de valeur...\n                            if (step.name === \"Valeur non renseignée\") {\n                                step.name = \"\";\n                            }\n\n                            switch (step.instruction.type) {\n                                case \"turn\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Tourner\";\n                                    break;\n                                case \"new name\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Continuer tout droit\";\n                                    break;\n                                case \"depart\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Départ\";\n                                    break;\n                                case \"arrive\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Arrivée\";\n                                    break;\n                                case \"merge\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Rejoindre\";\n                                    break;\n                                case \"ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la bretelle\";\n                                    break;\n                                case \"on ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la bretelle\";\n                                    break;\n                                case \"off ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la sortie\";\n                                    break;\n                                case \"fork\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Sur la bifurcation, prendre\";\n                                    break;\n                                case \"end of road\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"À la fin de la route, prendre\";\n                                    break;\n                                case \"use lane\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Utiliser la file\";\n                                    break;\n                                case \"continue\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Continuer\";\n                                    break;\n                                case \"roundabout\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond-point\";\n                                    break;\n                                case \"rotary\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond-point\";\n                                    break;\n                                case \"roundabout turn\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond point, tourner\";\n                                    break;\n                                case \"notification\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"\";\n                                    break;\n                                default:\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"?\" + step.instruction.type + \"?\";\n                                    break;\n                            }\n\n                            if (step.instruction.modifier) {\n                                switch (step.instruction.modifier) {\n                                    case \"uturn\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Faire demi-tour\";\n                                        break;\n                                    case \"sharp right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" complètement à droite\";\n                                        break;\n                                    case \"right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" à droite\";\n                                        break;\n                                    case \"slight right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" légèrement à droite\";\n                                        break;\n                                    case \"straight\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Continuer tout droit\";\n                                        break;\n                                    case \"slight left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" lègèrement à gauche\";\n                                        break;\n                                    case \"left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" à gauche\";\n                                        break;\n                                    case \"sharp left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" complètement à gauche\";\n                                        break;\n                                    default:\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" ?\" + step.instruction.modifier + \"?\";\n                                        break;\n                                }\n                            }\n\n                            if (step.instruction.exit) {\n                                data.routeInstructions[data.routeInstructions.length - 1].instruction += `${step.instruction.exit}e sortie`;\n                            }\n\n                            if (step.attributes.name) {\n                                if (step.attributes.name.nom_1_droite || step.attributes.name.toponyme) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \" sur\";\n                                }\n\n                                if (step.attributes.name.nom_1_droite) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += ` ${step.attributes.name.nom_1_droite}`;\n                                }\n\n                                if (step.attributes.name.toponyme) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += ` ${step.attributes.name.toponyme}`;\n                                }\n                            }\n                        });\n                    }\n                }\n\n                if (!data) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", \"json\")));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\")));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default RouteResponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport RouteRequestFactory from \"./Request/RouteRequestFactory\";\nimport RouteResponseFactory from \"./Response/RouteResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'itinéraire du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n *\n * @alias Gp.Services.Route\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.resource - La ressource utilisée pour le calcul. Ce paramètre devrait être obligatoire car il l'est dans l'appel au service. Mais il ne l'est pas pour des raisons de rétrocompatibilité.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service itineraire : 'json' uniquement et par défaut.\n *\n * @param {String} [options.routePreference = \"fastest\"] - Mode de calcul à utiliser :\n * - le plus rapide « fastest »\n * - le plus court « shortest »\n * Par défaut : « fastest ».\n *\n * @param {Object} options.startPoint - Point de départ du calcul. Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.startPoint.x - Abcisse du point de départ du calcul d'itinéraire.\n * @param {Float} options.startPoint.y - Ordonnée du point de départ du calcul d'itinéraire.\n *\n * @param {Object} options.endPoint - Point d'arrivée du calcul. Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.endPoint.x - Abcisse du point d'arrivée du calcul d'itinéraire.\n * @param {Float} options.endPoint.y - Ordonnée du point d'arrivée du calcul d'itinéraire.\n *\n * @param {Object[]} [options.viaPoints] - Liste de point ({x:Float,y:Float}) intermédaires que l'itinéraire doit emprunter dans l'ordre du tableau.\n *      Coordonnées exprimées en longitudes, latitudes (EPSG:4326) :{x:float, y:float}\n *\n * @param {String} [options.graph = \"voiture\"] - Type de graphe utilisé : \"Voiture\" ou \"Pieton\".\n *      Détermine le profil de vitesses utilisé pour le calcul ainsi que les tronçons autorisés ou non.\n *      Par défaut, c'est la valeur \"Voiture\" qui sera utilisée.\n *\n * @param {String[]} [options.exclusions] - DEPRECATED: Critères d'exclusions à appliquer pour le calcul. (correspond au paramètre \"avoidFeature\" d'OpenLS)\n *      On précise ici le type de tronçons que l'on ne veut pas que l'itinéraire emprunte\n *      (valeurs possibles : « toll » (éviter les péages), « bridge », « tunnel »).\n *      Ce paramètre est conservé pour une rétrocompatibilité de l'api. Le nouveau paramètre à utiliser est options.constraints\n *\n * @param {Object[]} [options.constraints] - Critères de contraintes à appliquer sur un itinéraire. Les valeurs disponibles dépendent de la ressource utilisée. Il est donc utile de regarder le getCapabilities.\n * @param {String} [options.constraints.constraintType] - Type de la contrainte. Généralement \"banned\".\n * @param {String} [options.constraints.key] - Clé de la contrainte. Généralement \"wayType\".\n * @param {String} [options.constraints.operator] - Opérateur de la contrainte. Généralement \"=\".\n * @param {String} [options.constraints.value] - Valeur de la contrainte. Généralement \"autoroute\".\n *\n * @param {Boolean} [options.geometryInInstructions = false] - Indique si la géométrie de l'itinéraire doit être reprise morceau par morceau dans les instructions.\n *      (correspond au paramètre \"provideGeometry\" d'OpenLS) Par défaut : false.\n *\n * @param {Boolean} [options.provideBbox = true] - Indique si les instructions doivent être localisées par une bbox dans la réponse.\n *      Par défaut : true.\n *\n * @param {String} [options.distanceUnit = \"m\"] - Indique si la distance doit être exprimée en km ou m dans la réponse.\n *      Par défaut : m.\n * @param {String} [options.timeUnit = \"second\"] - Indique si la durée doit être exprimée en seconde, minute ou heure dans la réponse. Il peut-être formatté hh:mm::ss avec la valeur standard.\n *      Les valeurs possibles sont \"standard\", \"second\", \"minute\" ou \"hour\".\n *      Par défaut : \"standard\".\n *\n * @param {String} [options.srs] - Système de coordonnées dans lequel les paramètres géographiques en entrée et la réponse du service sont exprimés.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 'EPSG:4326'.\n *\n * @param {String[]} [options.waysAttributes] - Nom des attributs des voies. Les valeurs disponibles dépendent de la ressource utilisée. Il est donc utile de regarder le getCapabilities.\n *\n * @example\n *  var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'XHR',\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      resource : 'bdtopo'\n *      outputFormat : 'json',\n *      startPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      endPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      provideBbox : true,\n *      exclusions : [\"Bridge\", \"Tunnel\", \"Toll\"],\n *      distanceUnit : \"km\",\n *      graph : \"Voiture\",\n *      geometryInInstructions : true,\n *      routePreference : \"fastest\"\n *  };\n *\n * @private\n */\nfunction Route (options) {\n    if (!(this instanceof Route)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Route\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"Route\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Route\");\n    this.logger.trace(\"[Constructeur Route (options)]\");\n\n    if (!options.startPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.startPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.x\"));\n    }\n\n    if (options.startPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.y\"));\n    }\n\n    if (!options.endPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.endPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.x\"));\n    }\n\n    if (options.endPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.y\"));\n    }\n\n    // options par defaut\n\n    // on passe l'option outputFormat en minuscules afin d'éviter des exceptions.\n    if (options.outputFormat && options.outputFormat !== \"json\") {\n        this.logger.warn(\"options.outputFormat could only be json\");\n    }\n    this.options.outputFormat = \"json\";\n\n    this.options.resource = options.resource || \"bdtopo-osrm\";\n    this.options.startPoint = options.startPoint;\n    this.options.endPoint = options.endPoint;\n    this.options.viaPoints = options.viaPoints || [];\n    this.options.routePreference = options.routePreference || \"fastest\";\n    /** Gestion des anciennes valeurs de graph */\n    if (options.graph) {\n        if (options.graph === \"Voiture\") {\n            this.options.graph = \"car\";\n        }\n        if (options.graph === \"Pieton\") {\n            this.options.graph = \"pedestrian\";\n        }\n    } else {\n        this.options.graph = \"car\";\n    }\n    this.options.constraints = [];\n    if (options.constraints) {\n        if (Array.isArray(options.constraints)) {\n            for (var k = 0; k < options.constraints.length; k++) {\n                this.options.constraints.push(options.constraints[k]);\n            }\n        } else {\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"constraints\"));\n        }\n    }\n\n    /** Gestion de l'ancien paramètre exclusion */\n    var constraintTunnel = {};\n    var constraintPont = {};\n    var constraintAutoroute = {};\n    if (options.exclusions) {\n        if (options.exclusions.length !== 0) {\n            this.logger.warn(\"options.exclusions is DEPRECATED !!\");\n            for (var c = 0; c < options.exclusions.length; c++) {\n                if (typeof options.exclusions[c] === \"string\") {\n                    options.exclusions[c] = options.exclusions[c].toLowerCase();\n                } else {\n                    // on ne crée pas une erreur pour rétro-compatibilité avec les anciennes versions\n                    continue;\n                }\n                if (options.exclusions[c] === \"toll\") {\n                    constraintAutoroute.constraintType = \"banned\";\n                    constraintAutoroute.key = \"wayType\";\n                    constraintAutoroute.operator = \"=\";\n                    constraintAutoroute.value = \"autoroute\";\n                    this.options.constraints.push(constraintAutoroute);\n                }\n                if (options.exclusions[c] === \"tunnel\") {\n                    constraintTunnel.constraintType = \"banned\";\n                    constraintTunnel.key = \"wayType\";\n                    constraintTunnel.operator = \"=\";\n                    constraintTunnel.value = \"tunnel\";\n                    this.options.constraints.push(constraintTunnel);\n                }\n                if (options.exclusions[c] === \"bridge\") {\n                    constraintPont.constraintType = \"banned\";\n                    constraintPont.key = \"wayType\";\n                    constraintPont.operator = \"=\";\n                    constraintPont.value = \"pont\";\n                    this.options.constraints.push(constraintPont);\n                }\n            }\n        }\n    }\n\n    this.options.geometryInInstructions = options.geometryInInstructions || false;\n    this.options.provideBbox = options.provideBbox || true;\n    this.options.distanceUnit = options.distanceUnit || \"m\";\n    this.options.timeUnit = options.timeUnit || \"second\";\n    this.options.expectedStartTime = null; // FIXME not yet implemented !\n    this.options.srs = options.srs || \"EPSG:4326\";\n    this.options.waysAttributes = options.waysAttributes || [];\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    if (!this.options.serverUrl) {\n        var UrlByDefault = DefaultUrlService.Route.url(this.options.apiKey);\n        if (!UrlByDefault) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = UrlByDefault;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n}\n\n/**\n * @lends module:Route#\n */\nRoute.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nRoute.prototype.constructor = Route;\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.buildRequest = function (error, success) {\n    var options = {\n        // spécifique au service\n        resource : this.options.resource,\n        startPoint : this.options.startPoint,\n        endPoint : this.options.endPoint,\n        viaPoints : this.options.viaPoints,\n        provideBbox : this.options.provideBbox,\n        constraints : this.options.constraints,\n        distanceUnit : this.options.distanceUnit,\n        timeUnit : this.options.timeUnit,\n        graph : this.options.graph,\n        geometryInInstructions : this.options.geometryInInstructions,\n        routePreference : this.options.routePreference,\n        srs : this.options.srs,\n        waysAttributes : this.options.waysAttributes\n    };\n\n    this.request = RouteRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    if (!this.request) {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")));\n    } else {\n        success.call(this, this.request);\n    }\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexité du retour du service\n\n    if (this.response) {\n        var options = {\n            distanceUnit : this.options.distanceUnit,\n            timeUnit : this.options.timeUnit,\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this,\n            geometryInInstructions : this.options.geometryInInstructions\n        };\n\n        RouteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Route;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requêtes du service de calcul des iso.\n * Permet le mapping avec les options du service.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveParam\n * @param {Object} options - options\n * @private\n *\n */\nfunction ProcessIsoCurveParam (options) {\n    if (!(this instanceof ProcessIsoCurveParam)) {\n        throw new TypeError(\"ProcessIsoCurveParam constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur ProcessIsoCurveParam ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Identifiant de l’isochrone */\n    this.id = this.options.id;\n\n    /** Resource */\n    this.resource = this.options.resource;\n\n    /** Coordonnées de départ (ou arrivée si le reverse est à true). */\n    this.point = this.options.position;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.crs = this.options.srs;\n\n    /**\n     * Profil de véhicule à utiliser pour le calcul.\n     * Voiture ou Pieton\n     */\n    this.profile = this.options.graph;\n\n    /** Liste des règles de restrictions à utiliser */\n    this.constraints = this.options.constraints;\n\n    this.reverse = this.options.reverse;\n\n    this.timeUnit = this.options.timeUnit;\n\n    this.distanceUnit = this.options.distanceUnit;\n\n    /**\n     * \"time\" pour isochrone ou \"distance\" for isodistance.\n     * Par defaut, time...\n     */\n    if (this.options.method === \"distance\") {\n        this.costType = \"distance\";\n        this.costValue = this.options.distance;\n    } else {\n        this.costType = \"time\";\n        this.costValue = this.options.time;\n    }\n}\n\n/**\n * CLASSNAME\n */\nProcessIsoCurveParam.CLASSNAME = \"ProcessIsoCurveParam\";\n\nProcessIsoCurveParam.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveParam#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveParam,\n\n    /**\n     * Retourne le point\n     * @returns {String} x,y\n     */\n    getLocation : function () {\n        return this.point.x + \",\" + this.point.y;\n    },\n\n    /**\n     * Retourne l'unité de la distance\n     * @returns {String}\n     */\n    getDistanceUnit : function () {\n        if (this.distanceUnit === \"m\") {\n            return \"meter\";\n        }\n        if (this.distanceUnit === \"km\") {\n            return \"kilometer\";\n        }\n        return \"\";\n    },\n\n    /**\n     * Retourne la liste des contraintes\n     * @returns {String}\n     */\n    getConstraints : function () {\n        var constraintArray = [];\n\n        if (this.constraints.length !== 0) {\n            for (var k = 0; k < this.constraints.length; k++) {\n                constraintArray.push(JSON.stringify(this.constraints[k]));\n            }\n        }\n        return constraintArray.join(\"|\");\n    },\n\n    /**\n     * Retourne la direction\n     * @returns {String}\n     */\n    getDirection : function () {\n        if (this.reverse) {\n            return \"arrival\";\n        } else {\n            return \"departure\";\n        }\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]} KVP\n */\nProcessIsoCurveParam.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    map.push({\n        k : \"point\",\n        v : this.getLocation()\n    });\n\n    map.push({\n        k : \"direction\",\n        v : this.getDirection()\n    });\n\n    map.push({\n        k : \"costType\",\n        v : this.costType\n    });\n\n    map.push({\n        k : \"costValue\",\n        v : this.costValue\n    });\n\n    map.push({\n        k : \"profile\",\n        v : this.profile\n    });\n\n    map.push({\n        k : \"timeUnit\",\n        v : this.timeUnit\n    });\n\n    map.push({\n        k : \"distanceUnit\",\n        v : this.getDistanceUnit()\n    });\n\n    if (this.crs) {\n        map.push({\n            k : \"crs\",\n            v : this.crs\n        });\n    }\n\n    if (this.constraints) {\n        map.push({\n            k : \"constraints\",\n            v : this.getConstraints()\n        });\n    }\n\n    return map;\n};\n\nexport default ProcessIsoCurveParam;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport ProcessIsoCurveParam from \"./model/ProcessIsoCurveParam\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes sur le service de calcul d'isoschrone/isodistance.\n *  Les requêtes peuvent être en mode GET ou POST,\n *  et le format de sorti est en JSON.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveRequest\n * @param {Object} options - options\n *\n * @example\n * var options = {\n *      httpMethod : 'GET', // GET|POST\n *      // spécifique au service\n *      position : {\n *          x : 2.3242664298058053,\n *          y : 48.86118017324745\n *      },\n *      graph : \"car\",\n *      method : 'time',\n *      time : 1000, //distance : 200\n *      reverse : false,\n *      srs : 'EPSG:4326'\n *  };\n *\n * try {\n *\n *      var oIsoCurve = new ProcessIsoCurveRequest (options);\n *      if (!oIsoCurve.processRequestString ()) {\n *          // error\n *      }\n *\n *      var request = oIsoCurve.requestString;\n *\n * } catch (e) {\n *      // error\n * }\n * @private\n */\nfunction ProcessIsoCurveRequest (options) {\n    this.logger = Logger.getLogger(\"ProcessIsoCurveRequest\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurveRequest ()]\");\n\n    if (!(this instanceof ProcessIsoCurveRequest)) {\n        throw new TypeError(\"ProcessIsoCurveRequest constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /**\n     * Liste des options\n     */\n    this.settings = options;\n\n    /**\n     * Mode HTPP.\n     * Par defaut, \"GET\".\n     * @type {String}\n     */\n    this.mode = this.settings.httpMethod || \"GET\";\n}\n\nProcessIsoCurveRequest.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveRequest#\n     */\n\n    /**\n     * Requête\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveRequest,\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out :\n     *   //  (http://wxs.ign.fr/KEY/isochrone?)\n     *   //  resource=&\n     *   //  point=&\n     *   //  costValue=&\n     *   //  costType=&\n     *   //  profile=&\n     *   //  constraints=&\n     *   //  direction=&\n     *   //  crs=\n     *\n     * // POST out :\n     * {\n     *  resource: \"bduni-idf-pgr\",\n     *  point: \"2.337306,48.849319\",\n     *  costValue: 100,\n     *  costType: \"time\",\n     *  profile: \"car\",\n     *  constraints: [{\n     *      constraintType: \"banned\",\n     *      key: \"ways_type\",\n     *      operator: \"=\",\n     *      value: \"autoroute\"\n     *  }]\n     * }\n     *\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        var request = \"\";\n        var i = 0;\n\n        switch (this.mode) {\n            case \"GET\":\n                this.logger.trace(\"Process GET Request\");\n\n                // Mapping des options avec le service de l'API REST\n                var oParams = new ProcessIsoCurveParam(this.settings);\n                var params = oParams.getParams();\n\n                for (i = 0; i < params.length; i++) {\n                    var o = params[i];\n                    if (request) {\n                        request += \"&\";\n                    }\n                    request += o.k + \"=\" + o.v;\n                }\n\n                break;\n\n            case \"POST\":\n                this.logger.trace(\"Process POST Request\");\n                // creation du JSON\n                var postRequest = {};\n\n                postRequest.resource = this.settings.resource;\n\n                postRequest.point = this.settings.position.x + \",\" + this.settings.position.y;\n\n                if (this.settings.method === \"distance\") {\n                    postRequest.costType = \"distance\";\n                    postRequest.costValue = this.settings.distance;\n                } else {\n                    postRequest.costType = \"time\";\n                    postRequest.costValue = this.settings.time;\n                }\n\n                postRequest.profile = this.settings.graph;\n\n                if (this.settings.reverse) {\n                    postRequest.direction = \"arrival\";\n                } else {\n                    postRequest.direction = \"departure\";\n                }\n\n                postRequest.constraints = this.settings.constraints;\n\n                postRequest.distanceUnit = this.settings.distanceUnit;\n\n                postRequest.timeUnit = this.settings.timeUnit;\n\n                postRequest.crs = this.settings.srs;\n\n                // conversion en chaîne de caractères\n                request = JSON.stringify(postRequest);\n                break;\n\n            default:\n                this.logger.error(\"No other HTTP method supported by the service !\");\n        }\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default ProcessIsoCurveRequest;\n","\n/**\n * Response object for {@link module:Services~isoCurve Gp.Services.isoCurve ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Float} distance - distance (expressed in meters) used for the request.\n * @property {Float} time - time (expressed in seconds) used for the request.\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the isocurve.\n * @property {String} id - request id (used by underlying webservice).\n * @property {Gp.Point} location - Position of the start or end point used for the request (expressed in \"srs\" coordinates system).\n * @property {String} message - message\n * @property {String} srs - Identifier of the coordinates system used for the isocurve.\n *\n * @namespace\n * @alias Gp.Services.IsoCurveResponse\n *\n */\nfunction ProcessIsoCurveResponse () {\n    if (!(this instanceof ProcessIsoCurveResponse)) {\n        throw new TypeError(\"ProcessIsoCurveResponse constructor cannot be called as a function.\");\n    }\n\n    this.message = null;\n\n    this.id = null;\n\n    this.location = {};\n    this.location.x = null;\n    this.location.y = null;\n\n    this.srs = null;\n\n    this.geometry = null;\n\n    this.time = null;\n\n    this.distance = null;\n}\n\nProcessIsoCurveResponse.prototype = {\n\n    constructor : ProcessIsoCurveResponse\n\n};\n\nexport default ProcessIsoCurveResponse;\n","/**\n * Factory pour générer une reponse JSON à partir d'un JSON\n * (Factory)\n *\n * @module ProcessIsoCurveResponseFactory\n * @alias Gp.Services.ProcessIsoCurve.Response.ProcessIsoCurveResponseFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport ProcessIsoCurveResponse from \"./model/ProcessIsoCurveResponse\";\n\nvar ProcessIsoCurveResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant ProcessIsoCurve\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"ProcessIsoCurveResponseFactory\");\n        logger.trace([\"ProcessIsoCurveResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                logger.trace(\"analyze response : json\");\n\n                var JSONResponse;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // analyse de la reponse\n                // création de l'objet de réponse\n                data = new ProcessIsoCurveResponse();\n\n                // remplissage de l'objet créé avec les attribtuts de la réponse du service\n                if (JSONResponse) {\n                    if (JSONResponse.costType === \"distance\") {\n                        data.time = \"\";\n                        data.distance = JSONResponse.costValue;\n                    } else {\n                        data.time = JSONResponse.costValue;\n                        data.distance = \"\";\n                    }\n\n                    data.message = \"\";\n                    data.id = \"\";\n                    data.srs = JSONResponse.crs;\n                    data.geometry = JSONResponse.geometry;\n                    var coords = JSONResponse.point.split(\",\");\n                    if (data.location) {\n                        data.location.x = coords[0];\n                        data.location.y = coords[1];\n                    }\n                } else {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", options.response)));\n                    return;\n                }\n\n                // info : en cas de problèmes de droits (clé invalide ou autre), la réponse est au format XML !!\n                // ex. <ExceptionReport><Exception exceptionCode=\"MissingParameter\">Key does not exist or has expired</Exception></ExceptionReport>\n                // mais le statut est 403, l'erreur est donc remontée plus tôt.\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default ProcessIsoCurveResponseFactory;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport ProcessIsoCurveRequest from \"./Request/ProcessIsoCurveRequest\";\nimport ProcessIsoCurveResponseFactory from \"./Response/ProcessIsoCurveResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'isochrone/distance du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ProcessIsoCurve\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.resource - La ressource utilisée pour le calcul. Ce paramètre devrait être obligatoire car il l'est dans l'appel au service. Mais il ne l'est pas pour des raisons de rétrocompatibilité.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service iso : 'json' uniquement et par défaut.\n *\n * @param {Object} options.position - Point de départ du calcul.\n *      Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n *      @param {Float} options.position.x - Abcisse du point de départ du calcul d'isochrone/distance.\n *      @param {Float} options.position.y - Ordonnée du point de départ du calcul d'isochrone/distance.\n *\n * @param {String} options.srs - Projection.\n *      Système de coordonnées dans lequel les coordonnées du point « location » sont exprimées et\n *      dans lequel la géométrie de la courbe résultante sera exprimée.\n *      Par défaut, le système de coordonnées utilisé sera « EPSG:4326 ».\n *\n * @param {String} [options.graph = \"voiture\"] - Nom du graphe à utiliser pour le calcul (« Pieton » ou « Voiture »).\n *      La valeur par défaut est : «voiture»\n *\n * @param {Array.<String>} [options.exclusions] - DEPRECATED: Ce paramètre est conservé pour une rétrocompatibilité de l'api. Le nouveau paramètre à utiliser est options.constraints.\n *      Critères d'exclusions à appliquer pour le calcul.\n *      On précise ici le type de tronçons que l'on ne veut pas que l'isochrone/distance emprunte\n *      (valeurs possibles : « toll » (éviter les péages), « bridge », « tunnel »).\n *\n * @param {Object[]} [options.constraints] - Critères de contraintes à appliquer sur un itinéraire. Les valeurs disponibles dépendent de la ressource utilisée. Il est donc utile de regarder le getCapabilities.\n *      @param {String} [options.constraints.constraintType] - Type de la contrainte. Généralement \"banned\".\n *      @param {String} [options.constraints.key] - Clé de la contrainte. Généralement \"wayType\".\n *      @param {String} [options.constraints.operator] - Opérateur de la contrainte. Généralement \"=\".\n *      @param {String} [options.constraints.value] - Valeur de la contrainte. Généralement \"autoroute\".\n *\n * @param {String} [options.method = \"time\"] - Méthode utilisée pour le calcul de la courbe iso.\n *      Les valeurs possible sont \"time\" pour un calcul d'isochrone, \"distance\" pour un calcul d'isodistance.\n *      Pas de valeur spécifié équivaut à un calcul d'isochrone.\n *\n * @param {String} [options.distanceUnit = \"m\"] - Indique si la distance doit être exprimée en km ou m dans la réponse (\"m\" or \"km\").\n *\n * @param {String} [options.timeUnit = \"second\"] - Indique si la durée doit être exprimée en seconde, minute ou heure dans la réponse (\"standard\", \"second\", \"minute\", \"hour\"). Il peut-être formatté hh:mm::ss avec la valeur standard.\n *\n * @param {Float} options.time - Durée maximum (exprimée en secondes) à utiliser pour le calcul de la courbe à partir du ou jusqu'au point « location ».\n *      Ce paramètre doit être renseigné si l'option \"méthod\" a la valeur \"time\".\n *      Si l'option method n'est pas renseignée, ce paramètre doit être renseigné.\n *\n * @param {Float} options.distance - Distance maximum (exprimée en metres) à utiliser pour le calcul de la courbe à partir du ou j'usqu'au point « location ».\n *      Ce paramètre doit être renseigné si l'option \"méthod\" a la valeur \"DISTANCE\".\n *      Si l'option \"method\" n'est pas renseignée, ce paramètre sera ignoré.\n *\n * @param {Boolean} [options.reverse = false] - Indique si la géométrie résultante doit être lissée (« true ») pour ne pas avoir d'effet d'escalier.\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @param {Boolean} [options.smoothing = false] - Indique si la géométrie résultante doit être lissée (« true ») pour ne pas avoir d'effet d'escalier.\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @param {Boolean} [options.holes = false] - Indique si la géométrie résultante (surface) doit être retournée avec des trous (« true »).\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      position : {\n *           x : 2.3242664298058053,\n *           y : 48.86118017324745\n *      },\n *      distance : 200,\n *      [time : ]\n *      method : \"distance\",\n *      graph : \"voiture\",\n *      reverse : false\n *  };\n * @private\n */\n\nfunction ProcessIsoCurve (options) {\n    if (!(this instanceof ProcessIsoCurve)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ProcessIsoCurve\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ProcessIsoCurve\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.ProcessIsoCurve\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurve (options)]\");\n\n    if (!options.position) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.position.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.x\"));\n    }\n\n    if (options.position.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.y\"));\n    }\n\n    if (!options.time && !options.distance) {\n        throw new Error(\"Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance\");\n    }\n\n    // si on a que le paramètre \"distance\" en entrée, on calcule une isodistance.\n    // Le paramètre \"méthode\" doit pour avoir une réponse du service, être passé à \"distance\"\n    if (!options.time && options.distance) {\n        this.options.method = \"distance\";\n        // on supprime l'éventuel attribut time, résidu d'un appel antérieur\n        if (this.options.time) {\n            delete this.options.time;\n        }\n    }\n\n    // si on a que le paramètre \"time\" en entrée, on calcule une isochrone.\n    // Le paramètre \"méthode\" doit pour avoir une réponse du service, être passé à \"time\"\n    if (options.time && !options.distance) {\n        this.options.method = \"time\";\n        // on supprime l'éventuel attribut time, résidu d'un appel antérieur\n        if (this.options.distance) {\n            delete this.options.distance;\n        }\n    }\n\n    // au cas où on a ni l'un, ni l'autre...\n    this.options.method = this.options.method || \"time\";\n\n    // options par defaut du service\n    // TODO: modifier la ressource lors de la mise en production du service\n    this.options.resource = options.resource || \"bdtopo-iso\";\n    this.options.exclusions = options.exclusions || [];\n    this.options.reverse = options.reverse || false;\n    this.options.srs = options.srs || \"EPSG:4326\";\n    this.options.distanceUnit = options.distanceUnit || \"m\";\n    this.options.timeUnit = options.timeUnit || \"second\";\n\n    // options depreciees\n    if (options.smoothing) {\n        this.logger.warn(\"options.smoothing is DEPRECATED\");\n    }\n    this.options.smoothing = false;\n    if (options.holes) {\n        this.logger.warn(\"options.holes is DEPRECATED\");\n    }\n    this.options.holes = false;\n\n    // Gestion du graphe\n    if (options.graph) {\n        if (options.graph === \"Voiture\") {\n            this.options.graph = \"car\";\n        }\n        if (options.graph === \"Pieton\") {\n            this.options.graph = \"pedestrian\";\n        }\n    } else {\n        this.options.graph = \"car\";\n    }\n\n    // Gestions des contraintes\n    this.options.constraints = [];\n    if (options.constraints) {\n        if (Array.isArray(options.constraints)) {\n            for (var k = 0; k < options.constraints.length; k++) {\n                this.options.constraints.push(options.constraints[k]);\n            }\n        } else {\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"constraints\"));\n        }\n    }\n\n    // Gestion de l'ancien paramètre exclusions\n    var constraintTunnel = {};\n    var constraintPont = {};\n    var constraintAutoroute = {};\n    if (options.exclusions) {\n        if (options.exclusions.length !== 0) {\n            this.logger.warn(\"options.exclusions is DEPRECATED !!\");\n            for (var c = 0; c < options.exclusions.length; c++) {\n                if (typeof options.exclusions[c] === \"string\") {\n                    options.exclusions[c] = options.exclusions[c].toLowerCase();\n                } else {\n                    // on ne crée pas une erreur pour rétro-compatibilité avec les anciennes versions\n                    continue;\n                }\n                if (options.exclusions[c] === \"toll\") {\n                    constraintAutoroute.constraintType = \"banned\";\n                    constraintAutoroute.key = \"wayType\";\n                    constraintAutoroute.operator = \"=\";\n                    constraintAutoroute.value = \"autoroute\";\n                    this.options.constraints.push(constraintAutoroute);\n                }\n                if (options.exclusions[c] === \"tunnel\") {\n                    constraintTunnel.constraintType = \"banned\";\n                    constraintTunnel.key = \"wayType\";\n                    constraintTunnel.operator = \"=\";\n                    constraintTunnel.value = \"tunnel\";\n                    this.options.constraints.push(constraintTunnel);\n                }\n                if (options.exclusions[c] === \"bridge\") {\n                    constraintPont.constraintType = \"banned\";\n                    constraintPont.key = \"wayType\";\n                    constraintPont.operator = \"=\";\n                    constraintPont.value = \"pont\";\n                    this.options.constraints.push(constraintPont);\n                }\n            }\n        }\n    }\n\n    // on passe l'option outputFormat en minuscules afin d'éviter des exceptions.\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"json\";\n    if (options.outputFormat && options.outputFormat !== \"json\") {\n        throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT\", \"outputFormat\"));\n    }\n    this.options.outputFormat = \"json\";\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    if (!this.options.serverUrl) {\n        var urlFound = DefaultUrlService.ProcessIsoCurve.url(this.options.apiKey);\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n}\n\n/**\n * @lends module:ProcessIsoCurve#\n */\nProcessIsoCurve.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nProcessIsoCurve.prototype.constructor = ProcessIsoCurve;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nProcessIsoCurve.prototype.buildRequest = function (error, success) {\n    try {\n        var oIsoCurve = new ProcessIsoCurveRequest(this.options);\n        if (!oIsoCurve.processRequestString()) {\n            throw new Error(_.getMessage(\"SERVICE_REQUEST_BUILD\"));\n        }\n\n        this.request = oIsoCurve.requestString;\n    } catch (e) {\n        error.call(this, new ErrorService(e.message));\n        return;\n    }\n\n    success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} onError   - callback des erreurs\n * @param {Function} onSuccess - callback de succès de l'analyse de la réponse\n */\nProcessIsoCurve.prototype.analyzeResponse = function (onError, onSuccess) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat,\n            rawResponse : this.options.rawResponse,\n            onSuccess : onSuccess,\n            onError : onError,\n            scope : this\n        };\n\n        ProcessIsoCurveResponseFactory.build(options);\n    } else {\n        onError.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default ProcessIsoCurve;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"point|circle|bbox\" }] */\n\n/**\n* Geoportal web services invocation namespace.\n*\n* @module Services\n* @alias Gp.Services\n*/\nimport Alti from \"./Alti/Alti\";\nimport AutoConf from \"./AutoConf/AutoConf\";\nimport Geocode from \"./Geocode/Geocode\";\nimport ReverseGeocode from \"./Geocode/ReverseGeocode\";\nimport AutoComplete from \"./AutoComplete/AutoComplete\";\nimport Route from \"./Route/Route\";\nimport ProcessIsoCurve from \"./ProcessIsoCurve/ProcessIsoCurve\";\n\nvar Services = {\n    /**\n     * Access to Geoportal resources metadata availables with one ore several keys, using [Auto-configuration service]{@link https://wxs.ign.fr/APIKEY/autoconf} of the Geoportal platform.\n     *\n     * @method getConfig\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key(s) (\",\" as separator, no spaces) to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GetConfigResponse} object as a parameter except if \"rawResponse\" parameter is set to true : a String will be returned.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/autoconf] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=JSONP] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting an underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    getConfig : function (options) {\n        var autoconfService = new AutoConf(options);\n        autoconfService.call();\n    },\n\n    /**\n     * Getting elevations in or along of one or several points on french territories using the [elevation services of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/alti.html}.<br/>\n     * Two use cases are availables :<br/>\n     * 1. getting elevations of the given points : don't use the options.sampling parameter ;<br/>\n     * 2. getting a regular set of elevations along the given points : use the options.sampling parameter.\n     *\n     * @method getAltitude\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {Array.<Object>} options.positions - Array of positions ({lon:float, lat:float}) expressed in CRS:84 coordinates system, where to get elevations. 50 positions maximum may be given. 2 positions minimum are required if you use the options.sampling parameter.\n     * @param {Number} [options.sampling] - Number of points to use (between 2 and 5000) in order to compute an elevation path. The points given with the options.positions parameter are used to fix the planimetric path along which the elevations will be computed.<br/>\n     * If not used, only elevations of these positions will be returned.\n     * @param {Boolean} [options.zonly=false] - Set this parameter to true if you only want to have elevations returned without corresponding coordinates.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AltiResponse} object as a parameter, except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/alti/rest/elevation.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     * @param {String} [options.api='REST'] - What API to use for interacting with underlying web service : 'REST' or 'WPS'. Only use if you know what you are doing.\n     * @param {String} [options.outputFormat='xml'] - Output format for underlying web service response : 'xml' or 'json'. Only use if you know what you are doing.\n     */\n    getAltitude : function (options) {\n        var altiService = new Alti(options);\n        altiService.call();\n    },\n    /**\n     * Getting positon of a geographic identifier (places names, address, cadastral parcel, other...) using the [geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage.html}.\n     *\n     * @example\n     * Gp.Services.geocode ({\n     *     apiKey : \"carte\",\n     *     location : \"73 avenue de Paris, Saint-Mandé\",\n     *     // traitement des resultats\n     *     onSuccess  : function (result) {\n     *         console.log(\"found (x:\"+result.position.x+\", y:\"+result.position.y+\")\") ;\n     *     }\n     * }) ;\n     *\n     *\n     * @method geocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String|Object} options.location - Geographic identifier to locate. May be provided as a single String or a structured Object for an address search. In this last case, the following properties are availaibles.\n     *      @param {Number} [options.location.number] - Street number.\n     *      @param {String} [options.location.street] - Street name.\n     *      @param {String} [options.location.city] - City name.\n     *      @param {Number} [options.location.postalCode] - Postal Code\n     * @param {Object} [options.filterOptions] - Additional filters to apply to search. The following properties may be given.\n     *      @param {Gp.BBox} [options.filterOptions.bbox] - Bounding box where to perform the search. Properties expressed in options.srs coordinates system.\n     *      @param {Array.<String>} [options.filterOptions.type] - Geographical identifier types to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search. Default is \"StreetAddress\".\n     *\n     *      @param {String} [options.filterOptions.[prop]] - Additionnal properties to filter search. Properties depends on options.filterOptions.type, and values type should be \"String\".\n     *      <br/><br/>\n     *      Common Properties availables for all search types :<br/>\n     *      \"municipality\", \"insee\", \"department\".\n     *      <br/><br/>\n     *      Properties availables for address search :<br/>\n     *      \"quality\", \"ID\", \"ID_TR\" and \"territory\".\n     *      <br/><br/>\n     *      Properties availables for place names search :<br/>\n     *      \"importance\", \"nature\" and \"territory\".\n     *      <br/><br/>\n     *      Properties availables for cadastral parcels search :<br/>\n     *      \"sheet\", \"section\", and \"absorbedcity\".\n     * @param {Number} [options.maximumResponses = 25] - Maximum number of responses. Default underlying service value applies (25) if not provided.\n     * @param {Boolean} [options.returnFreeForm = false] - Set this parameter to true if you wish to have an address returned in a single String (unstructured). If unset, default underlying service value (false) applies.\n     * @param {String} [options.srs = EPSG:4326] - Coordinates System used to expres coordinates for parameters and responses. Default underlying service value (EPSG:4326) applies.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/geoportail/ols] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    geocode : function (options) {\n        var geocodeService = new Geocode(options);\n        geocodeService.call();\n    },\n    /**\n     * Retrieving geographical identifiers (place names, address, cadastral parcels, ...) near a given position, using the [reverse geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage-inverse.html}.\n     *\n     * @method reverseGeocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {Gp.Point} options.position - Reference position where to search geographical identifiers. Its coordinates are expressed in the coordinates system given with options.srs parameter. (default is CRS:84, that means position.x is the longitude and position.y the latitude)\n     * @param {Object} [options.filterOptions] - Additional filters to apply to search. The following properties may be given.\n     *      @param {Array.<String>} [options.filterOptions.type] - Geographical identifier types to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search. Default is \"StreetAddress\".\n     *      @param {Gp.BBox} [options.filterOptions.bbox] - Bounding box where to perform the search. Expressed in options.srs coordinates system.\n     *      @param {Gp.Circle} [options.filterOptions.circle] - Circle where to perform the search. Expressed in options.srs coordinates system.\n     * @param {Array.<Gp.Point>} [options.filterOptions.polygon] - Polygon where to perform the search. Expressed in options.srs coordinates system.\n     * @param {Number} [options.maximumResponses] - Maximum number of responses. Default underlying service value applies (25) if not provided.\n     * @param {Boolean} [options.returnFreeForm = false] - Set this parameter to true if you wish to have an address returned in a single String (unstructured). If unset, default underlying service value (false) applies.\n     * @param {String} [options.srs = CRS:84] - Coordinates System used to express coordinates for parameters and responses. Only WGS 84 geographical positioning is supported. Therefore, two values are allowed : \"CRS:84\" (position.x is the longitude and position.y the latitude) and \"EPSG:4326\" (position.x is the latitude and position.y the longitude) . Default is CRS:84.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/geoportail/ols] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    reverseGeocode : function (options) {\n        var reverseGeocodeService = new ReverseGeocode(options);\n        reverseGeocodeService.call();\n    },\n    /**\n     * Getting suggestions of probable places names or address based on uncomplete texts, using the [autocompletion service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/autocompletion.html}\n     *\n     * @method autoComplete\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} options.text - Text input to complete.\n     * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Suggestion types to provide : address (\"StreetAddress\") and/or place name (\"PositionOfInterest\").\n     * @param {Array.<String>} [options.filterOptions.territory] - Places where to limit the search of suggestions : \"METROPOLE\" (Corsica and metropolitan France), \"DOMTOM\" (French overseas departments and territories), or an INSEE code of a department. No limitation by default. For instance : ['METROPOLE', '31']\n     * @param {Number} [options.maximumResponses = 10] - Maximum number of responses.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AutoCompleteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/ols/apis/completion] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    autoComplete : function (options) {\n        var autoCompleteService = new AutoComplete(options);\n        autoCompleteService.call();\n    },\n    /**\n     * Getting a route from one point to another using the [route service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/itineraires.html}.\n     *\n     * @method route\n     * @param {Object} options - Options for function call.\n     * @param {String} options.resource - Resource used to compute the route. Available values are in the GetCapabilities.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} [options.routePreference = \"fastest\"] - Indicates the way to compute the route : \"fastest\" (time optimisation) or \"shortest\" (distance optimisation). Available values are in the GetCapabilities.\n     * @param {Gp.Point} options.startPoint - Start point of the route. Expressed in CRS:84 coordinates system (startPoint.x corresponds to longitude, startPoint.y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {Gp.Point} options.endPoint - End point of the route. Expressed in CRS:84 coordinates system (endPoint.x corresponds to longitude, endPoint.y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {Array.<Gp.Point>} [options.viaPoints] - Ordered via Points of the route. Expressed in CRS:84 coordinates system (viaPoints[i].x corresponds to longitude, viaPoints[i].y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the route : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads the route may use and the average speed. Available bbox are in the GetCapabilities.\n     * @param {Array.<String>} [options.exclusions] - DEPRECATED: use options.constraints. Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {Boolean} [options.geometryInInstructions = false] - Indicates if route geometry has to be also returned with route instructions.\n     * @param {Boolean} [options.provideBoundingBox = true] - Indicates if route instructions has to be localised with a BBOX in the response.\n     * @param {String} [options.distanceUnit = \"m\"] - The unit used to provide distances in the response (\"meter\" or \"kilometer\").\n     * @param {String} [options.timeUnit = \"second\"] - The unit used to provide duration in the response (\"standard\", \"second\", \"minute\", \"hour\").\n     * @param {Array.<String>} [options.waysAttributes] - Way Attributes to add in the response. Available values are in the GetCapabilities.\n     * @param {Array.<Object>} [options.constraints] - Constraints used ({'constraintType':'banned','key':'ways_type','operator':'=','value':'autoroute'}). Available values are in the GetCapabilities.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.RouteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\" or \"xml\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/itineraire/rest/route.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    route : function (options) {\n        var routeService = new Route(options);\n        routeService.call();\n    },\n    /**\n     * Computing a set of places (curve) reachable from a given point (or from where to start to reach a given point) within a time or distance constraint using the [isochrone service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/isochrones.html}.\n     *\n     * @method isoCurve\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} options.resource - Resource used to compute the route. Available values are in the GetCapabilities.\n     * @param {Gp.Point} options.position - Start or Arrival (options.reverse===true) Point for the computing. Expressed in CRS:84 coordinates system (position.x corresponds to longitude, position.y corresponds to latitude).\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the isoCurve : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads to use and the average speed. Available values are in the GetCapabilities.\n     * @param {Array.<String>} [options.exclusions] - DEPRECATED: use options.constraints. Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {Array.<Object>} [options.constraints] - Constraints used ({'constraintType':'banned','key':'ways_type','operator':'=','value':'autoroute'}). Available values are in the GetCapabilities.\n     * @param {String} [options.method = \"time\"] - Computing method to use : \"time\" (using a duration as a constraint) or \"distance\" (using a distance as a constraint). Available values are in the GetCapabilities.\n     * @param {Float} options.time - Maximum duration (expressed in seconds) to use when options.method is set to \"time\".\n     * @param {Float} options.distance - Maximum distance (expressed in meters) to use when options.method is set to \"distance\".\n     * @param {Boolean} [options.reverse = false] - Set this parameter to true if you want options.position to be the destination (instead of departure) for the computing.\n     * @param {String} [options.distanceUnit = \"km\"] - The unit used to provide distances in the response (\"m\" or \"km\").\n     * @param {String} [options.timeUnit = \"second\"] - The unit used to provide duration in the response (\"standard\", \"second\", \"minute\", \"hour\").\n     * @param {Boolean} [options.smoothing = false] - DEPRECATED: Set this parameter to true if you want the resulting geometry to be smoothed.\n     * @param {Boolean} [options.holes = false] - DEPRECATED: Set this parameter to true if you want the resulting geometry (polygon) to have holes if pertinent.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.IsoCurveResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=http (s)://wxs.ign.fr/APIKEY/isochrone/isochrone.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    isoCurve : function (options) {\n        var processIsoCurveService = new ProcessIsoCurve(options);\n        processIsoCurveService.call();\n    }\n};\n\n/**\n * Point object.\n *\n * @namespace\n * @alias Gp.Point\n *\n * @property {Float} x - Point abscissa\n * @property {Float} y - Point ordinate\n */\nvar point = {};\n\n/**\n * Circle object.\n *\n * @namespace\n * @alias Gp.Circle\n *\n * @property {Float} x - Circle center abscissa.\n * @property {Float} y - Circle center ordinate.\n * @property {Float} radius - Circle radius.\n */\nvar circle = {};\n\n/**\n * Bounding box object, expressed with four coordinates.\n *\n * @namespace\n * @alias Gp.BBox\n *\n * @property {Float} left - minimum abscissa\n * @property {Float} right - maximum abscissa\n * @property {Float} bottom - minimum ordinate\n * @property {Float} top - maximum ordinate\n */\nvar bbox = {};\n\nexport default Services;\n","/**\n* Global variable Gp.\n*\n* @module Gp\n* @alias Gp\n* @description\n*\n* This is the global variable that is exposed in the browser environment.\n* Content is composed of constructor, functions and properties...\n*\n* > {@link Gp.Error Error()}\n*     - .TYPE_SRVERR : \"SERVICE_ERROR\"\n*     - .TYPE_UNKERR : \"UNKNOWN_ERROR\"\n*     - .TYPE_USEERR : \"USAGE_ERROR\"\n*\n* > {@link module:Helper Helper}\n*     - .indent()\n*     - .normalyzeParameters()\n*     - .normalyzeUrl()\n*\n* > {@link module:XHR Protocols.XHR}\n*     - .call()\n*\n* > {@link module:Services Services (objects)}\n*     - .Alti\n*         - {@link Gp.Services.Alti.Elevation .Elevation()}\n*     - {@link Gp.Services.AltiResponse .AltiResponse()}\n*     - .AutoComplete\n*         - {@link Gp.Services.AutoComplete.SuggestedLocation .SuggestedLocation()}\n*     - {@link Gp.Services.AutoCompleteResponse .AutoCompleteResponse()}\n*     - {@link Gp.Services.Config .Config()}\n*     - {@link Gp.Services.DefaultUrl .DefaultUrl()}\n*     - .Geocode\n*         - {@link Gp.Services.Geocode.GeocodedLocation .GeocodedLocation()}\n*         - {@link Gp.Services.Geocode.ReverseGeocodedLocation .ReverseGeocodedLocation()}\n*         - {@link Gp.Services.Geocode.DirectGeocodedLocation .DirectGeocodedLocation()}\n*     - {@link Gp.Services.GeocodeResponse .GeocodeResponse()}\n*     - {@link Gp.Services.GetConfigResponse .GetConfigResponse()}\n*     - {@link Gp.Services.IsoCurveResponse .IsoCurveResponse()}\n*     - .Route\n*         - {@link Gp.Services.Route.RouteInstruction .RouteInstruction()}\n*     - {@link Gp.Services.RouteResponse .RouteResponse()}\n*\n* > Services (factory)\n*     - {@link module:Services~autoComplete .autoComplete()}\n*     - {@link module:Services~geocode .geocode()}\n*     - {@link module:Services~getAltitude .getAltitude()}\n*     - {@link module:Services~getConfig .getConfig()}\n*     - {@link module:Services~isoCurve .isoCurve()}\n*     - {@link module:Services~reverseGeocode .reverseGeocode()}\n*     - {@link module:Services~route .route()}\n*\n* > servicesDate : \"YYYY-MM-DD\"\n*\n* > servicesVersion : \"X.X.X\"\n*\n*/\n\nimport Services from \"./Services/Services\";\nimport DefaultUrl from \"./Services/DefaultUrlService\";\nimport AltiResponse from \"./Services/Alti/Response/model/AltiResponse\";\nimport Elevation from \"./Services/Alti/Response/model/Elevation\";\nimport AutoCompleteResponse from \"./Services/AutoComplete/Response/model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./Services/AutoComplete/Response/model/SuggestedLocation\";\nimport GetConfigResponse from \"./Services/AutoConf/Response/model/AutoConfResponse\";\nimport Constraint from \"./Services/AutoConf/Response/model/Constraint\";\nimport Format from \"./Services/AutoConf/Response/model/Format\";\nimport Layer from \"./Services/AutoConf/Response/model/Layer\";\nimport Legend from \"./Services/AutoConf/Response/model/Legend\";\nimport Metadata from \"./Services/AutoConf/Response/model/Metadata\";\nimport Originator from \"./Services/AutoConf/Response/model/Originator\";\nimport Service from \"./Services/AutoConf/Response/model/Service\";\nimport Style from \"./Services/AutoConf/Response/model/Style\";\nimport Territory from \"./Services/AutoConf/Response/model/Territory\";\nimport Thematic from \"./Services/AutoConf/Response/model/Thematic\";\nimport TM from \"./Services/AutoConf/Response/model/TileMatrix\";\nimport TMLimit from \"./Services/AutoConf/Response/model/TileMatrixLimit\";\nimport TMS from \"./Services/AutoConf/Response/model/TileMatrixSet\";\nimport GeocodeResponse from \"./Services/Geocode/Response/model/GeocodeResponse\";\nimport GeocodedLocation from \"./Services/Geocode/Response/model/GeocodedLocation\";\nimport DirectGeocodedLocation from \"./Services/Geocode/Response/model/DirectGeocodedLocation\";\nimport ReverseGeocodedLocation from \"./Services/Geocode/Response/model/ReverseGeocodedLocation\";\nimport IsoCurveResponse from \"./Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse\";\nimport RouteResponse from \"./Services/Route/Response/model/RouteResponse\";\nimport RouteInstruction from \"./Services/Route/Response/model/RouteInstruction\";\nimport XHR from \"./Protocols/XHR\";\nimport Error from \"./Exceptions/ErrorService\";\nimport Helper from \"./Utils/Helper\";\n\nimport Pkg from \"../package.json\";\n\n/** Version */\nexport const servicesVersion = Pkg.version;\n/** Publication date */\nexport const servicesDate = Pkg.date;\n\n// on declare les ns dans root global\nvar Gp = {};\n\nGp.servicesVersion = servicesVersion;\nGp.servicesDate = servicesDate;\n\n// Export Protocols\nGp.Protocols = {};\nGp.Protocols.XHR = XHR;\n// Export services\nGp.Services = Services;\n// Export DefaultUrls\nGp.Services.DefaultUrl = DefaultUrl;\n// Export Alti\nGp.Services.AltiResponse = AltiResponse;\nGp.Services.Alti = {};\nGp.Services.Alti.Elevation = Elevation;\n// Export Autocomplete\nGp.Services.AutoCompleteResponse = AutoCompleteResponse;\nGp.Services.AutoComplete = {};\nGp.Services.AutoComplete.SuggestedLocation = SuggestedLocation;\n// Export Autoconf\nGp.Services.GetConfigResponse = GetConfigResponse;\nGp.Services.Config = {};\nGp.Services.Config.Constraint = Constraint;\nGp.Services.Config.Format = Format;\nGp.Services.Config.Layer = Layer;\nGp.Services.Config.Legend = Legend;\nGp.Services.Config.Metadata = Metadata;\nGp.Services.Config.Originator = Originator;\nGp.Services.Config.Service = Service;\nGp.Services.Config.Style = Style;\nGp.Services.Config.Territory = Territory;\nGp.Services.Config.Thematic = Thematic;\nGp.Services.Config.TileMatrix = TM;\nGp.Services.Config.TileMatrixLimit = TMLimit;\nGp.Services.Config.TileMatrixSet = TMS;\n// Export Geocode\nGp.Services.GeocodeResponse = GeocodeResponse;\nGp.Services.Geocode = {};\nGp.Services.Geocode.GeocodedLocation = GeocodedLocation;\nGp.Services.Geocode.DirectGeocodedLocation = DirectGeocodedLocation;\nGp.Services.Geocode.ReverseGeocodedLocation = ReverseGeocodedLocation;\n// Export IsoCurve\nGp.Services.IsoCurveResponse = IsoCurveResponse;\n// Export Route\nGp.Services.RouteResponse = RouteResponse;\nGp.Services.Route = {};\nGp.Services.Route.RouteInstruction = RouteInstruction;\n// Export Erreurs et Outils\nGp.Error = Error;\nGp.Helper = Helper;\n\nexport default Gp;\n","import Logger from \"../../Common/Utils/LoggerByDefault\";\nimport Config from \"./Config\";\n\nexport default {\n    /**\n     * Contrôle des droits sur les ressources.\n     *\n     * @param {Object} options - liste des options\n     * @param {String} options.key - clef API\n     * @param {Array} options.resources - liste des ressources\n     * @param {Array} options.services - liste des services\n     * @returns {Object} rightManagement - undefined ou {\n     *       key : \"\",\n     *       service-1 : [resource-1, resource-2],\n     *       service-2 : [resource-1, resource-2]\n     * }\n     */\n    check : function (options) {\n        // logger\n\n        var logger = Logger.getLogger(\"checkrightmanagement\");\n\n        // si aucune option n'est renseignée...\n        if (!options) {\n            // message orienté pour le developpeur !\n            logger.error(\"WARNING : \" +\n                \"no parameter specified !\");\n            return;\n        }\n\n        // les options\n        var _key = options.key;\n        var _resources = options.resources || [];\n        var _services = options.services || [];\n\n        // si aucune information sur les ressources,\n        // il est impossible de controler quelquechose !!!\n        if (_resources.length === 0) {\n            // message orienté pour le developpeur !\n            logger.error(\"WARNING : \" +\n                \"no parameter 'resources' specified !\");\n            return;\n        }\n\n        // si aucune information sur les services,\n        // il est impossible de controler quelquechose !!!\n        if (_services.length === 0) {\n            // message orienté pour le developpeur !\n            logger.error(\"WARNING : \" +\n                \"no parameter 'services' specified !\");\n            return;\n        }\n\n        // les ressources controlées :\n        // Ex.\n        // {\n        //   \"Itineraire\"     : [\"Pieton\", \"Voiture\"],\n        //   \"Geocode\"        : [\"PositionOfInterest\", \"StreetAddress\", \"CadastralParcel\", \"Administratif\"],\n        //   \"AutoCompletion\" : [\"PositionOfInterest\", \"StreetAddress\", \"CadastralParcel\", \"Administratif\"],\n        //   \"Elevation\"      : [\"SERVICE_CALCUL_ALTIMETRIQUE_RSC\"]\n        // }\n        var _rightManagement = {};\n\n        // la clef API n'est pas renseignée\n        if (!_key) {\n            // on verifie si l'autoconfiguration est disponible\n\n            if (!Config.isConfigLoaded()) {\n                // si l'autoconfiguration n'est pas chargée,\n                // aucune vérification des droits est possible...\n\n                logger.warn(\"WARNING : \" +\n                    \"The 'apiKey' parameter is missing, \" +\n                    \"and the contract key configuration has not been loaded, \" +\n                    \"so impossible to check yours rights !\");\n\n                return;\n            } else {\n                // si l'autoconfiguration est chargée,\n                // on recupere la/les clef(s) API, et on en profitera ensuite pour controler\n                // les droits sur les ressources.\n\n                _key = Object.keys(Config.configuration.generalOptions.apiKeys);\n                logger.log(_key);\n            }\n        }\n\n        // on verifie si l'autoconfiguration est disponible\n\n        if (!Config.isConfigLoaded()) {\n            // si l'autoconfiguration n'est pas chargée,\n            // il est toujours possible de requeter le service avec une clef API,\n            // mais les droits sur les ressources ne sont pas garantis, on risque\n            // d'obtenir des erreurs 403 forbidden...\n            // la responsabilité revient à l'utilisateur (message d'information)...\n\n            logger.warn(\"WARNING : \" +\n                \"the contract key configuration has not been loaded, \" +\n                \"so be carefull !\");\n\n            // les ressouces non controlées\n            var _noRightManagement = {};\n\n            for (var i = 0; i < _services.length; i++) {\n                var service = _services[i];\n                _noRightManagement[service] = [];\n\n                for (var j = 0; j < _resources.length; j++) {\n                    var resource = _resources[j];\n                    _noRightManagement[service].push(resource);\n                }\n            }\n\n            // on ajoute la clef\n            _noRightManagement.key = _key;\n\n            logger.log(\"right management not checked\", _noRightManagement);\n\n            return _noRightManagement;\n        } else {\n            // si l'autoconf est chargée,\n            // on verifie la correspondance entre la clef et l'autoconfiguration,\n            // on previent l'utilisateur (message d'information) s'il n'a\n            // pas de droits sur certaines ressources ...\n\n            // doit on ecarter les ressources sans droit ?\n            // oui, si possible avec un message d'information pour l'utilisateur...\n\n            for (var k = 0; k < _resources.length; k++) {\n                var _resource = _resources[k];\n\n                for (var l = 0; l < _services.length; l++) {\n                    var _service = _services[l];\n\n                    var params = Config.getServiceParams(_resource, _service, _key);\n                    if (!params || Object.keys(params).length === 0) {\n                        logger.warn(\"WARNING : \" +\n                            \"The contract key configuration has no rights to load this geoportal \" +\n                            \"resource (\" + _resource + \") \" +\n                            \"for this service (\" + _service + \") \");\n                        continue;\n                    }\n\n                    if (!_rightManagement[_service]) {\n                        _rightManagement[_service] = [];\n                    }\n\n                    _rightManagement[_service].push(_resource);\n                }\n            }\n\n            if (Object.keys(_rightManagement).length === 0) {\n                logger.warn(\"WARNING : \" +\n                    \"The contract key configuration has been loaded, \" +\n                    \"and the 'apiKey' parameter has been set, \" +\n                    \"but, there is a problem on the mapping between the contract and the key !\");\n                return;\n            }\n\n            // on ajoute la clef qui correspond à la ressource vérifiée\n            _rightManagement.key = params.key;\n\n            logger.log(\"right management checked\", _rightManagement);\n\n            return _rightManagement;\n        }\n    }\n};\n","import ID from \"../Utils/SelectorID\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"LocationSelectorDOM\");\n\nvar LocationSelectorDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.className = this._addUID(\"GPlocationPoint\"); // ceci permet de gerer les groupes de points !\n        container.className += \" GPwidget\";\n        return container;\n    },\n\n    /**\n     * Create Container Point\n     * see event !\n     *\n     * @param {Number} id - tag ID\n     * @param {Number} display  - display\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationPointElement : function (id, display) {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPlocationPoint_\" + id);\n        div.className = (display) ? \"GPflexInput GPlocationStageFlexInput\" : \"GPflexInput GPlocationStageFlexInputHidden\";\n        div.style.cssText = \"\";\n\n        return div;\n    },\n\n    /**\n     * Create Container Point\n     * see event !\n     *\n     * @param {Number} id - tag ID\n     * @param {String} text - label\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationPointLabelElement : function (id, text) {\n        // contexte d'execution\n        var self = this;\n\n        var labelOrigin = document.createElement(\"label\");\n        labelOrigin.id = this._addUID(\"GPlocationOriginLabel_\" + id);\n        labelOrigin.htmlFor = this._addUID(\"GPlocationOrigin_\" + id);\n        labelOrigin.innerHTML = text;\n        labelOrigin.addEventListener(\"click\", function (e) {\n            var i = ID.index(this.id);\n            var points = document.getElementsByClassName(self._addUID(\"GPlocationPoint\"));\n            for (var j = 0; j < points.length; j++) {\n                var tag = points[j].childNodes[0].id;\n                var id = ID.index(tag);\n                document.getElementById(self._addUID(\"GPlocationPoint_\" + id)).style.cssText = \"\";\n            }\n            document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).value = \"\";\n            document.getElementById(self._addUID(\"GPlocationOrigin_\" + i)).value = \"\";\n            document.getElementById(self._addUID(\"GPlocationPoint_\" + i)).style.cssText = \"\";\n            document.getElementById(self._addUID(\"GPlocationOriginPointer_\" + i)).checked = false;\n            document.getElementById(self._addUID(\"GPlocationOrigin_\" + i)).className = \"GPlocationOriginVisible\";\n            document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).className = \"GPlocationOriginHidden\";\n            if (document.getElementById(self._addUID(\"GPlocationStageRemove_\" + i))) {\n                document.getElementById(self._addUID(\"GPlocationStageRemove_\" + i)).className = \"GPlocationStageRemove\";\n            }\n            if (document.getElementById(self._addUID(\"GPlocationStageAdd\"))) {\n                document.getElementById(self._addUID(\"GPlocationStageAdd\")).className = \"\";\n            }\n            // document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).disabled = true;\n            self.onLocationClearPointClick(e);\n        });\n\n        return labelOrigin;\n    },\n\n    /**\n     * Create Input AutoComplete Point tag\n     *\n     * @param {Number} id - tag ID\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationAutoCompleteteInputElement : function (id) {\n        // contexte d'execution\n        var self = this;\n\n        var inputOrigin = document.createElement(\"input\");\n        inputOrigin.id = this._addUID(\"GPlocationOrigin_\" + id);\n        inputOrigin.className = \"GPlocationOriginVisible\";\n        inputOrigin.type = \"text\";\n        inputOrigin.placeholder = \"Saisir une adresse\";\n        inputOrigin.autocomplete = \"off\";\n        inputOrigin.addEventListener(\"keyup\", function (e) {\n            var charCode = e.which || e.keyCode;\n            if (charCode === 13 || charCode === 10 || charCode === 38 || charCode === 40) {\n                return;\n            }\n\n            var i = ID.index(this.id);\n            if (document.getElementById(self._addUID(\"GPlocationOrigin_\" + i)).value.length > 2) {\n                document.getElementById(self._addUID(\"GPlocationAutoCompleteList_\" + i)).style.display = \"block\";\n            } else {\n                document.getElementById(self._addUID(\"GPlocationAutoCompleteList_\" + i)).style.display = \"none\";\n            }\n            // gestionnaire d'evenement :\n            // on récupère la valeur de saisie pour une requête sur le service d'autocompletion.\n            // le resultat de la requête nous permet de recuperer les coordonnées du point...\n            self.onAutoCompleteSearchText(e);\n        });\n\n        inputOrigin.addEventListener(\"keydown\", function (e) {\n            var charCode = e.which || e.keyCode;\n\n            var container = document.getElementById(self._addUID(\"GPlocationAutoCompleteList_\" + id));\n\n            // si aucun container !?\n            if (!container) {\n                return;\n            }\n\n            var curr = container.getElementsByClassName(\"GPautoCompleteProposal current\");\n            var list = container.getElementsByClassName(\"GPautoCompleteProposal\");\n\n            // si aucune suggestion, on ne va pas plus loin !\n            var length = list.length;\n            if (!length) {\n                return;\n            }\n\n            var current = null;\n\n            // si aucun item courant, on prend le 1er !\n            if (!curr.length) {\n                current = list[0];\n                current.className = \"GPautoCompleteProposal current\";\n                current.style.color = \"#000000\";\n                current.style[\"background-color\"] = \"#CEDBEF\";\n                return;\n            } else {\n                current = curr[0];\n            }\n\n            var index = parseInt(ID.index(current.id), 10);\n            var next = (index === length - 1) ? list[0] : list[index + 1];\n            var prev = (index === 0) ? list[length - 1] : list[index - 1];\n\n            current.style[\"background-color\"] = \"\";\n            current.style.color = \"\";\n            prev.style[\"background-color\"] = \"\";\n            prev.style.color = \"\";\n            next.style[\"background-color\"] = \"\";\n            next.style.color = \"\";\n\n            switch (charCode) {\n                case 38: // arrow up\n                    logger.log(\"arrow up\");\n                    current.className = \"GPautoCompleteProposal\";\n                    prev.className = \"GPautoCompleteProposal current\";\n                    prev.style.color = \"#000000\";\n                    prev.style[\"background-color\"] = \"#CEDBEF\";\n                    break;\n                case 40: // arrow down\n                    logger.log(\"arrow down\");\n                    current.className = \"GPautoCompleteProposal\";\n                    next.className = \"GPautoCompleteProposal current\";\n                    next.style.color = \"#000000\";\n                    next.style[\"background-color\"] = \"#CEDBEF\";\n                    break;\n                case 13: // enter\n                    logger.log(\"enter\");\n                    current.click(e);\n                    break;\n            }\n\n            current.focus();\n        });\n\n        return inputOrigin;\n    },\n\n    /**\n     * Create Input Coordinate Point tag\n     *\n     * @param {Number} id - tag ID\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationCoordinateInputElement : function (id) {\n        // contexte d'execution\n        var self = this;\n\n        var inputOriginCoord = document.createElement(\"input\");\n        inputOriginCoord.id = this._addUID(\"GPlocationOriginCoords_\" + id);\n        inputOriginCoord.className = \"GPlocationOriginHidden\";\n        inputOriginCoord.type = \"text\";\n        inputOriginCoord.disabled = false;\n        inputOriginCoord.addEventListener(\"click\", function () {\n            var i = ID.index(this.id);\n            document.getElementById(self._addUID(\"GPlocationOriginLabel_\" + i)).click();\n        });\n        return inputOriginCoord;\n    },\n\n    /**\n     * Create Show Pointer tag\n     *\n     * @param {Number} id - tag ID\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationPointerShowInputElement : function (id) {\n        var inputOriginPointer = document.createElement(\"input\");\n        inputOriginPointer.id = this._addUID(\"GPlocationOriginPointer_\" + id);\n        inputOriginPointer.type = \"checkbox\";\n        return inputOriginPointer;\n    },\n\n    /**\n     * Create Input Pointer tag\n     *\n     * @param {Number} id - tag ID\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationPointerInputElement : function (id) {\n        // contexte d'execution\n        var self = this;\n\n        var labelOriginPointer = document.createElement(\"label\");\n        labelOriginPointer.id = this._addUID(\"GPlocationOriginPointerImg_\" + id);\n        labelOriginPointer.htmlFor = this._addUID(\"GPlocationOriginPointer_\" + id);\n        labelOriginPointer.className = \"GPlocationOriginPointerImg\";\n        labelOriginPointer.title = \"Pointer un lieu sur la carte\";\n        labelOriginPointer.addEventListener(\"click\", function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var i = ID.index(this.id);\n            var points = document.getElementsByClassName(self._addUID(\"GPlocationPoint\"));\n            var j;\n            var tag;\n            var id;\n            for (j = 0; j < points.length; j++) {\n                tag = points[j].childNodes[0].id;\n                id = ID.index(tag);\n                if (i !== id) {\n                    document.getElementById(self._addUID(\"GPlocationOriginPointer_\" + id)).checked = false;\n                    if (document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + id)).value === \"Pointer un lieu sur la carte\") {\n                        document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + id)).value = \"\";\n                        document.getElementById(self._addUID(\"GPlocationOrigin_\" + id)).className = \"GPlocationOriginVisible\";\n                        document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + id)).className = \"GPlocationOriginHidden\";\n                    }\n                }\n            }\n            if (document.getElementById(self._addUID(\"GPlocationOriginPointer_\" + i)).checked) {\n                document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).value = \"\";\n                for (j = 0; j < points.length; j++) {\n                    tag = points[j].childNodes[0].id;\n                    id = ID.index(tag);\n                    document.getElementById(self._addUID(\"GPlocationPoint_\" + id)).style.cssText = \"\";\n                }\n                if (document.getElementById(self._addUID(\"GPlocationStageRemove_\" + i))) {\n                    document.getElementById(self._addUID(\"GPlocationStageRemove_\" + i)).className = \"GPlocationStageRemove\";\n                }\n                if (document.getElementById(self._addUID(\"GPlocationStageAdd\"))) {\n                    document.getElementById(self._addUID(\"GPlocationStageAdd\")).className = \"\";\n                }\n                document.getElementById(self._addUID(\"GPlocationOriginPointer_\" + i)).checked = false;\n                document.getElementById(self._addUID(\"GPlocationOrigin_\" + i)).className = \"GPlocationOriginVisible\";\n                document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).className = \"GPlocationOriginHidden\";\n            } else {\n                document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).value = \"Pointer un lieu sur la carte\";\n                for (j = 0; j < points.length; j++) {\n                    tag = points[j].childNodes[0].id;\n                    id = ID.index(tag);\n                    if (i === id) {\n                        document.getElementById(self._addUID(\"GPlocationPoint_\" + id)).style.cssText = \"\";\n                    } else {\n                        document.getElementById(self._addUID(\"GPlocationPoint_\" + id)).style.display = \"none\";\n                    }\n                }\n                if (document.getElementById(self._addUID(\"GPlocationStageRemove_\" + i))) {\n                    document.getElementById(self._addUID(\"GPlocationStageRemove_\" + i)).className = \"GPlocationOriginHidden\";\n                }\n                if (document.getElementById(self._addUID(\"GPlocationStageAdd\"))) {\n                    document.getElementById(self._addUID(\"GPlocationStageAdd\")).className = \"GPlocationOriginHidden\";\n                }\n                document.getElementById(self._addUID(\"GPlocationOriginPointer_\" + i)).checked = true;\n                document.getElementById(self._addUID(\"GPlocationOrigin_\" + i)).className = \"GPlocationOriginHidden\";\n                document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).className = \"GPlocationOriginVisible\";\n                document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).disabled = true;\n            }\n            // gestionnaire d'evenement :\n            // on stocke la valeur du point, utilisée pour la requête sur le service de calcul d'itiniraire\n            self.onActivateMapPointClick(e);\n        });\n\n        return labelOriginPointer;\n    },\n\n    /**\n     * Create Remove Point tag\n     * see event !\n     *\n     * @param {Number} id - tag ID\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationRemovePointElement : function (id) {\n        // contexte d'execution\n        var self = this;\n\n        var divRm = document.createElement(\"div\");\n        divRm.id = this._addUID(\"GPlocationStageRemove_\" + id);\n        divRm.className = \"GPlocationStageRemove\";\n        divRm.title = \"Supprimer l'étape\";\n        divRm.addEventListener(\"click\", function (e) {\n            var points = document.getElementsByClassName(self._addUID(\"GPlocationPoint\"));\n            var last = points.length - 1;\n            var start = points[0].childNodes[0].id;\n            var end = points[last].childNodes[0].id;\n\n            var startID = ID.index(start);\n            var endID = ID.index(end);\n\n            if (id !== startID && id !== endID) {\n                var i = ID.index(this.id);\n                document.getElementById(self._addUID(\"GPlocationPoint_\" + i)).className = \"GPflexInput GPlocationStageFlexInputHidden\";\n                document.getElementById(self._addUID(\"GPlocationOrigin_\" + i)).value = \"\";\n                document.getElementById(self._addUID(\"GPlocationOrigin_\" + i)).className = \"GPlocationOriginVisible\";\n                document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).value = \"\";\n                document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + i)).className = \"GPlocationOriginHidden\";\n                document.getElementById(self._addUID(\"GPlocationStageAdd\")).style.display = \"\";\n                // Moving up exclusions picto\n                // var exclusionsPictoTop = document.getElementById(self._addUID(\"GPshowLocationExclusionsPicto\")).style.top;\n                // document.getElementById(self._addUID(\"GPshowLocationExclusionsPicto\")).style.top = (parseInt(exclusionsPictoTop) - 33).toString() + \"px\";\n\n                // gestionnaire d'evenement :\n                // on supprime le point, utilisé pour la requête sur le service d'itiniraire\n                self.onLocationRemovePointClick(e);\n            }\n        });\n\n        return divRm;\n    },\n\n    /**\n     * Create Add Point tag\n     * see event !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationAddPointElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var divAdd = document.createElement(\"div\");\n        divAdd.id = this._addUID(\"GPlocationStageAdd\");\n        divAdd.title = \"Ajouter une étape\";\n        divAdd.addEventListener(\"click\", function (e) {\n            var lastStage = 1;\n            var nbStages = 0;\n            var points = document.getElementsByClassName(self._addUID(\"GPlocationPoint\"));\n            for (var i = 1; i < points.length - 1; i++) {\n                var tag = points[i].childNodes[0].id;\n                var id = ID.index(tag);\n                if (document.getElementById(self._addUID(\"GPlocationPoint_\" + id))) {\n                    if (document.getElementById(self._addUID(\"GPlocationPoint_\" + id)).className === \"GPflexInput GPlocationStageFlexInputHidden\") {\n                        if (lastStage === 1) {\n                            lastStage = id;\n                        }\n                    } else {\n                        nbStages++;\n                    }\n                }\n            }\n            // FIXME algo à revoir : lastStage = id hors si id = 300 sur 3 points !?\n            if (lastStage < points.length) {\n                document.getElementById(self._addUID(\"GPlocationPoint_\" + lastStage)).className = \"GPflexInput GPlocationStageFlexInput\";\n                // Moving down exclusions picto\n                // var exclusionsPictoTop = document.getElementById(self._addUID(\"GPshowLocationExclusionsPicto\")).style.top;\n                // document.getElementById(self._addUID(\"GPshowLocationExclusionsPicto\")).style.top = (parseInt(exclusionsPictoTop) + 33).toString() + \"px\";\n            }\n            if (nbStages === 4) {\n                document.getElementById(self._addUID(\"GPlocationStageAdd\")).style.display = \"none\";\n            }\n            // gestionnaire d'evenement :\n            // on ajoute le point, utilisé pour la requête sur le service d'itiniraire\n            self.onLocationAddPointClick(e);\n        });\n\n        return divAdd;\n    },\n\n    /**\n     * Create Results autocompletion to the point\n     * see event!\n     *\n     * @param {Number} id - tag ID\n     * @returns {DOMElement} DOM element\n     */\n    _createLocationAutoCompleteResultElement : function (id) {\n        // contexte d'execution\n        var self = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPlocationAutoCompleteList_\" + id);\n        div.className = \"GPadvancedAutoCompleteList\";\n\n        if (div.addEventListener) {\n            div.addEventListener(\"click\", function (e) {\n                self.onAutoCompletedResultsItemClick(e);\n                document.getElementById(self._addUID(\"GPlocationAutoCompleteList_\" + id)).style.display = \"none\";\n            }, false);\n        } else if (div.attachEvent) {\n            div.attachEvent(\"onclick\", function (e) {\n                self.onAutoCompletedResultsItemClick(e);\n                document.getElementById(self._addUID(\"GPlocationAutoCompleteList_\" + id)).style.display = \"none\";\n            });\n        }\n\n        return div;\n    },\n\n    /**\n     * Autocompletion result to a point.\n     * Proposals are dynamically filled in Javascript by autocomplete service\n     *\n     * TODO formaliser le contenu des reponse\n     *\n     * @param {Number} id - tag ID\n     * @param {Object} location - suggested location result\n     * @param {Number} n  - number of the point\n     */\n    _createLocationAutoCompletedLocationElement : function (id, location, n) {\n        var container = document.getElementById(this._addUID(\"GPlocationAutoCompleteList_\" + id));\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"AutoCompletedLocation_\" + n);\n        div.className = \"GPautoCompleteProposal\";\n        div.innerHTML = location.fullText;\n\n        container.appendChild(div);\n    },\n\n    /**\n    * Display Coordinate\n    * @param {String} value - a Coordinate\n    */\n    GPdisplayCoordinate : function (value) {\n        var points = document.getElementsByClassName(this._addUID(\"GPlocationPoint\"));\n        for (var i = 0; i < points.length; i++) {\n            var tag = points[i].childNodes[0].id;\n            var id1 = ID.index(tag);\n            if (document.getElementById(this._addUID(\"GPlocationOriginPointer_\" + id1)).checked) {\n                document.getElementById(this._addUID(\"GPlocationOriginCoords_\" + id1)).value = value;\n                document.getElementById(this._addUID(\"GPlocationOriginCoords_\" + id1)).disabled = false;\n                for (var j = 0; j < points.length; j++) {\n                    tag = points[j].childNodes[0].id;\n                    var id2 = ID.index(tag);\n                    document.getElementById(this._addUID(\"GPlocationPoint_\" + id2)).style.cssText = \"\";\n                    if (document.getElementById(this._addUID(\"GPlocationStageRemove_\" + id2))) {\n                        document.getElementById(this._addUID(\"GPlocationStageRemove_\" + id2)).className = \"GPlocationStageRemove\";\n                    }\n                }\n                document.getElementById(this._addUID(\"GPlocationOriginPointer_\" + id1)).checked = false;\n                if (document.getElementById(this._addUID(\"GPlocationStageAdd\"))) {\n                    document.getElementById(this._addUID(\"GPlocationStageAdd\")).className = \"\";\n                }\n                return;\n            }\n        }\n    }\n};\n\nexport default LocationSelectorDOM;\n","/**\n* implementation :\n* cf. http://uihacker.blogspot.fr/2011/07/javascript-formatting-latitudelongitude.html?m=1\n* cf. http://andrew.hedges.name/experiments/convert_lat_long/\n* FIXME formater la sortie\n* cf. http://mottie.github.io/javascript-number-formatter/\n* cf. https://github.com/j-/number-formatter\n*\n*/\n/** ... */\nvar PositionFormater = {\n\n    /** ... */\n    NORTH : \"N\",\n\n    /** ... */\n    SOUTH : \"S\",\n\n    /** ... */\n    EAST : \"E\",\n\n    /** ... */\n    WEST : \"O\",\n\n    /** ... */\n    digitSecond : 2,\n\n    /** ... */\n    digitDecimal : 5,\n\n    /** ... */\n    digitRadian : 8,\n\n    /**\n     * @param {Number} inputNum -inputNum\n     * @param {Integer} numPoints - numPoints\n     *\n     * @returns {Number} rounded result\n     */\n    roundToDecimal : function (inputNum, numPoints) {\n        var multiplier = Math.pow(10, numPoints);\n        return Math.round(inputNum * multiplier) / multiplier;\n    },\n\n    /**\n     * @param {Number} location -location\n     *\n     * @returns {Number} location in radian\n     */\n    decimalToRadian : function (location) {\n        var d = 0.01745329251994329577;\n        return this.roundToDecimal(location * d, this.digitRadian);\n    },\n\n    /**\n     * @param {Number} location -location\n     *\n     * @returns {Number} location in grade\n     */\n    decimalToGrade : function (location) {\n        var d = 1.11111111111111111111;\n        return this.roundToDecimal(location * d, this.digitRadian);\n    },\n\n    /**\n     * @param {Number} location -location\n     * @param {String} hemisphere -hemisphere\n     * @param {Boolean} obj -specifies if an object must be returned\n     *\n     * @returns {String|Object} DMS (String or Object depending on obj parameter value)\n     */\n    decimalToDMS : function (location, hemisphere, obj) {\n        if (location < 0) {\n            location *= -1; // strip dash '-'\n        }\n\n        var degrees = Math.floor(location); // strip decimal remainer for degrees\n        var minutesFromRemainder = (location - degrees) * 60; // multiply the remainer by 60\n        var minutes = Math.floor(minutesFromRemainder); // get minutes from integer\n        var secondsFromRemainder = (minutesFromRemainder - minutes) * 60; // multiply the remainer by 60\n        var seconds = this.roundToDecimal(secondsFromRemainder, this.digitSecond); // get minutes by rounding to integer\n\n        var dms = degrees + \"° \" + minutes + \"' \" + seconds + \"\\\" \";\n        if (hemisphere) {\n            dms += hemisphere;\n        }\n\n        if (obj) {\n            return {\n                d : degrees,\n                m : minutes,\n                s : seconds,\n                direction : hemisphere\n            };\n        }\n\n        return dms;\n    },\n\n    /**\n     * @param {Number} location -location\n     * @param {Boolean} obj -specifies if an object must be returned\n     *\n     * @returns {String|Object} DMS (String or Object depending on obj parameter value)\n     */\n    decimalLatToDMS : function (location, obj) {\n        var hemisphere = (location < 0) ? this.SOUTH : this.NORTH; // south if negative\n        return this.decimalToDMS(location, hemisphere, obj);\n    },\n\n    /**\n     * @param {Number} location -location\n     * @param {Boolean} obj -specifies if an object must be returned\n     *\n     * @returns {String|Object} DMS (String or Object depending on obj parameter value)\n     */\n    decimalLonToDMS : function (location, obj) {\n        var hemisphere = (location < 0) ? this.WEST : this.EAST; // west if negative\n        return this.decimalToDMS(location, hemisphere, obj);\n    },\n\n    /**\n     * @param {Number} degrees -degrees\n     * @param {Number} minutes -minutes\n     * @param {Number} seconds -seconds\n     * @param {String} hemisphere -hemisphere\n     *\n     * @returns {Number} decimal\n     */\n    DMSToDecimal : function (degrees, minutes, seconds, hemisphere) {\n        var ddVal = degrees + minutes / 60 + seconds / 3600;\n        ddVal = (hemisphere === this.SOUTH || hemisphere === this.WEST) ? ddVal * -1 : ddVal;\n\n        var decimal = this.roundToDecimal(ddVal, this.digitDecimal);\n        return decimal;\n    }\n\n};\n\nexport default PositionFormater;\n","import L from \"leaflet\";\nimport Logger from \"../../../Common/Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"icondefault\");\n\n/**  cf. http://leafletjs.com/reference.html#icon */\nvar IconDefault = L.Icon.Default.extend(/** @lends IconDefault.prototype */ {\n\n    /**\n    * Liste des icones\n    *   TODO : image retina à convertir en x2...\n    */\n    images : {\n        retina : {\n            shadow : \"data:image/png;base64,...\",\n            color : {\n                blue : \"data:image/png;base64,...\",\n                orange : \"data:image/png;base64,...\",\n                red : \"data:image/png;base64,...\",\n                green : \"data:image/png;base64,...\"\n            }\n        },\n        shadow : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=\",\n        color : {\n            blue : \"data:image/png;base64,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\",\n            orange : \"data:image/png;base64,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\",\n            red : \"data:image/png;base64,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\",\n            green : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wJCgoDDgqHD/MAAAZVSURBVFjDpZZtiFxXGcd/c+69M7PzurvdTTZNGvxQTCJqFSok+MmFQPSDUlsQhBaxWNhorQlWPxSKTYqsFLYGA8VCISDESIpCILYQW4xJNtHGGBooZtl16UrKNrMvM7N3Xu6555zHD7OZ7OzsW/Be/nBnznnO/zzP83/OcxKPv/IOW32KXzj2KFBc/nm7cuvl8IOXD21ql3j8lT9vsOjxfuB7wCHgoAoUCV8BYJsWRGaBc8DpvzwxfnF9kl90kxQ+f9wDXgReyg9kc8VkH4Wg2DUvdpqyXqRcKxOH5l3gZ+89OX5rDZLzqwhe7QfOZAcyB4fSO0h6KbSNqNt6F0lSJcn4WQA+bcyycHehATzz3pPjb6+cp0SEe8jvOdYvsRvPDmQOPpLZjRXLYjRPzYSIuC5EtsliNE9ZL7ItvY2dD+/sSRaDs8Nn9o90kLQ92HvcA87mduT27Mw8QiWuUDMhVuymMC5mPpoj42UYyu0A+M3wmf3D90lEQATgxfT29PDDPTup6jKx08gar6+CNf8XhEW9QEqlGNw16AFnhs/s72+FC6Gw79V+4KXtPUPUbZ3IRR07DVSSQlCkEBRRCdX+zvn5Lq/mohKFoEh2KDO4LB4ULUe+mxpI5RSKMA5xIm0Ug16SKsknjTtMfTxFGIdMfTzFzOIMoVmiGPQCdNjUTY3B9HZEeO5rv9/v+YggwncK6QKxxB3qyQU5aibk7iclvv3YUzz91WfJ+wUALsy+w+sf/opGusFgahuLerFt17BN0l4PQc7v10vmgJ/f98sccCDjZ5mP5jpIvITHYljm+QNH+NaupzrGDg59nc/m9/KDC08TD8UEyqdhG+1xh8PP+eglc0jhZLeXUp4V2yFPPxFQNzWymWwXAYAg7M5+hm/s+yZzzRIpL91hXzc1kioAJ59TQH9C3WOXNlJeitCEfLH3S2sSAFgxPNb7ZXQl7rJ3IiRaCxd9caLFgXUGcdJeyDiDiKBdtC6BE6FhGygv0WUvnsOKRZw0FHDHRg6HdCzWtHXyQZ4bn17HrBKEFdNaAMel0l/xcz5WbOd5hcI4A3BHiWPWaReKuNYOjEOMw2hDggQudpyceL3DC9cqXsZLl7g+9Q8KQYEls9S2FePwEgrbsIhjxuvb+2tJDYx/RXJuXzbI0dRR+xBwypDtyXLrvx9yLbzC9vR2HkoO8J9wkrMzp/nt+Bv0DKbwVUCj0VxxeEAQJKneDRErz/siAk5ONueiJzI7MrAirroe4zJC70NFphem+PnkUWzkUH6CZG9A364iXsKjulTprK98nqV6Fde0F/72/Q8+8hGh8u+fvl/Y89rVWn/tQDaXI6wu3e8ZYYzxLflsjlymU2UN2yAO4zUbVXNeIyLHAHzuJ/w1XY7/mN7mWKUBJHZUy9UttehsMUtYD7EN8/6lZ69fBmiFCxDLuWhBT0b90aN+zm9r/0EfEdfywjLaddRXJ45aYCxa0PjKp53FB0CqN0mzGWFC88/Lz12/sKIzrpjn5FRzLioZZ/B6fMTxQFAkiBY04mS0szOuYKlOHG0g8mazFOGlFGJly0jmfXQ9Rpf1bUT+tG6PX87PiWg+aiDgpbyWpLeARKCIyjHA6JWRG3ZVjxdWojJxpAT8rjkX4We9LSU7KATYhiWu6Bng9OpxtVYCxTHWLEX2XmE6tzGUnyAqx4hj7MrIDd1FsjpcIkJl4oXbYuW8rhqSfUkkduvCSymsdkRzUUmsvLWWp2o9OYqTsWhRb6pcP+ujyzHi5OTVH/8rXJNkLU9EhOrUCxdNzVw1NUN6ILlmsv2MhxhHcy4KgRPr5awr8Z3ghC7r5Uru3oif8YgWNMAb135ys7I+yYbx4O24aiZt5Ej2JjsvGSkPBKJ5rRHGNlLfuuESESqTP7IiLW+UrxBLG0E+aFW3cOrakZuzG5JsHC4BOKUrpuRM64ojTlB+AhGhOa8tMLpZHanN1FOZ/GEIvBlXYvweBSIk+wJ0q7r/8PejN6c3JdnSCevkZLSgtdhWLsSBLmtYdRD+H+ESKlOHZ8XJqbgaExQC4iWD0+58Zerwra2RbM7B8qX8hK7EiBN0WSPC6OoOun5O2NpbnT78kdXunKlbbOQuVqcPX5YtsqgH636M6bIGYbTj/rN5Trb+VKdHLtqme6s6PfLug9j9D/FCc1g2qf7VAAAAAElFTkSuQmCC\"\n        }\n    },\n\n    /**\n     * constructor\n     * (extend to L.Icon.Default)\n     *\n     * @param {String} color - blue, green or red, blue by default.\n     * @param {Object} options - options of L.Icon\n     */\n    initialize : function (color, options) {\n        // on merge les options avec celles par defaut\n        L.Util.extend(this.options, options);\n\n        var _color = null;\n        var _images = /* (L.Browser.retina) ? this.images.retina : */ this.images;\n        switch (color) {\n            case \"red\":\n                _color = _images.color.red;\n                break;\n            case \"green\":\n                _color = _images.color.green;\n                break;\n            case \"orange\":\n                _color = _images.color.orange;\n                break;\n            case \"blue\":\n                _color = _images.color.blue;\n                break;\n            default:\n                _color = _images.color.blue;\n        }\n\n        // icones classiques\n        this.options.iconUrl = _color;\n        this.options.shadowUrl = _images.shadow;\n\n        // icones pour écran Retina\n        if (L.Browser.retina) {\n            this.options.iconRetinaUrl = _color;\n            this.options.shadowRetinaUrl = _images.shadow;\n        }\n    },\n\n    /**\n     * Overload function to ensure compatibility between versions 0.7.X and 1.0.X\n     * (extend to L.Icon._getIconUrl)\n     *\n     * @param {String} name - name\n     *\n     * @returns {String} url\n     *\n     */\n    _getIconUrl : function (name) {\n        logger.trace(\"OVERWRITTEN L.Icon.Default._getIconUrl(\" + name + \")\");\n        return L.Icon.prototype._getIconUrl.call(this, name);\n    }\n});\n\nexport default IconDefault;\n","import Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport RightManagement from \"../../Common/Utils/CheckRightManagement\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport LocationSelectorDOM from \"../../Common/Controls/LocationSelectorDOM\";\nimport PositionFormater from \"./Utils/PositionFormater\";\nimport IconDefault from \"./Utils/IconDefault\";\n\nvar logger = Logger.getLogger(\"locationselector\");\n\n/**\n* @classdesc\n*\n* LocationSelector Control.\n*\n* @private\n* @constructor LocationSelector\n* @alias LocationSelector\n* @extends {L.Control}\n* LocationSelector component. Enables to select a location, using autocompletion or picking location on the map\n* @param {Object} [options] - component options\n* @param {Boolean} [options.displayInfo = true] - whether to display info in a popup or not (not implemented yet) Default is true\n* @param {Boolean} [options.disableReverse = false] - whether to enable/disable the reverse geocoding.\n* @param {Object} [options.tag] - tag options\n* @param {Number} [options.tag.id = 0] - order id number in a locations group, in case several LocationSelector are used. For instance in route case : departure tag id should be 0, arrival tag id should be 1, and other ones : 2, 3, ...\n* @param {Number} [options.tag.unique = null] - locationSelector global component id (in case locationSelector is called by another graphic component, e.g. route control)\n* @param {String} [options.tag.label = \">\"] - text to display in component (e.g. \"Departure\"). Default is \">\"\n* @param {String} [options.tag.color = blue] - color of marker (blue, green, orange and red)\n* @param {Boolean} [options.tag.display = true] - whether to display or hide component. Default is true\n* @param {Boolean} [options.tag.addOption = false] - whether to display picto to add another LocationSelector (in case of route control)\n* @param {Boolean} [options.tag.removeOption = false] - whether to display picto to remove a LocationSelector (in case of route control)\n* @param {Object} [options.autocompleteOptions] - autocomplete service options\n* @param {Object} [options.reverseGeocodeOptions] - reverse geocoding service options\n\n* @example\n*  var point = L.geoportalControl.LocationSelector({\n*  });\n*/\nvar LocationSelector = L.Control.extend(/** @lends LocationSelector.prototype */ {\n\n    includes : LocationSelectorDOM,\n\n    /**\n     * options by default\n     *\n     * @private\n     */\n    options : {\n        position : \"topleft\",\n        tag : {\n            id : 0, // numero d'ordre sur un groupe de locations !\n            unique : null, // numero unique pour tous les locations d'un groupe !\n            label : \">\",\n            color : \"blue\",\n            display : true,\n            addOption : false,\n            removeOption : false\n        },\n        disableReverse : false, // on l'active par defaut !\n        displayInfo : true,\n        autocompleteOptions : {},\n        reverseGeocodeOptions : {}\n    },\n\n    /**\n     * constructor\n     * (extend to L.Control)\n     *\n     * @param {Object} options - options of component\n     * @param {String}  [options.position] - position of component into a map.\n     * @param {Object}  [options.tag] - options ...\n     * @param {Object}  [options.autocompleteOptions] - autocomplete service options\n     * @param {Object}  [options.reverseGeocodeOptions] - reverse geocoding service options\n     *\n     * @private\n     */\n    initialize : function (options) {\n        // FIXME pb de merge sur tag:{} !?\n        // on transmet les options au controle\n        L.Util.setOptions(this, options);\n\n        /** uuid */\n        this._uid = this.options.tag.unique || null;\n\n        /** mode drag&drop */\n        this._activeDragAndDrop = false;\n        this._pressedKeyOnDragAndDrop = false;\n\n        /** container map */\n        this._map = null;\n\n        /** container principal des entrées  */\n        this._inputsContainer = null;\n\n        /** container du label du point */\n        this._inputLabelContainer = null;\n\n        /** container de la saisi de l'autocompletion */\n        this._inputAutoCompleteContainer = null;\n\n        /** container du pointer de saisi sur la carte */\n        this._inputShowPointerContainer = null;\n\n        /** container des coordonnées */\n        this._inputCoordinateContainer = null;\n\n        /**\n         * coordonnées du point selectionné\n         * Ces dernieres sont envoyées à l'API service IGN,\n         * donc X->LON et Y->LAT quelquesoit la logique des projections...\n         */\n        this._coordinate = null;\n\n        /** container des reponses de l'autocompletion */\n        this._suggestedContainer = null;\n\n        /** listes des reponses de l'autocompletion */\n        this._suggestedLocations = [];\n\n        /** localisant */\n        this._currentLocation = null;\n\n        /** marker */\n        this._marker = null;\n\n        /** ressources du services d'autocompletion et geocodage inverse (ayant droit!) */\n        this._resources = {};\n\n        /** a t on des droits sur les ressources du service ? */\n        this._noRightManagement = false;\n\n        // gestion des droits sur les ressources/services\n        this._checkRightsManagement();\n\n        // creation du DOM dans le constructeur uniquement si ce composant\n        // est appelé par un autre composant graphique\n        this._container = (this._uid) ? this._initLayout() : null;\n    },\n\n    // ################################################################### //\n    // ################## handlers for display graphic ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.addTo(map)\n     * and fills variable : this._container = this.onAdd(map)\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    onAdd : function (/* map */) {\n        // si on ajout ce composant à la carte en tant que objet graphique,\n        // un uuid doit être generé automatiquement !\n        this._uid = ID.generate();\n\n        // DOM du composant\n        var container = this._initLayout();\n\n        // deactivate of events that may interfere with the map\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        return container;\n    },\n\n    /**\n     * this method is called when the control is removed from the map\n     * and removes events on map.\n     *\n     * @private\n     */\n    onRemove : function (/* map */) {},\n\n    // ################################################################### //\n    // ########################## publics methods ######################## //\n    // ################################################################### //\n\n    /**\n     * get coordinate\n     * @returns {Object} Coordinate\n     */\n    getCoordinate : function () {\n        return this._coordinate;\n    },\n\n    /**\n     * set coordinate : {lon,lat || x,y || N,E}\n     * @param {Object} coordinate - Coordinate\n     */\n    setCoordinate : function (coordinate) {\n        this._displayResultOfCoordinate(coordinate);\n    },\n    /**\n     * get coordinate inverse (EPSG:4326)\n     * @returns {Object} Coordinate\n     */\n    getCoordinateInverse : function () {\n        if (!this._coordinate) {\n            return;\n        }\n\n        var coordinateInv = {\n            x : this._coordinate.y,\n            y : this._coordinate.x\n        };\n\n        return coordinateInv;\n    },\n\n    /**\n     * set map\n     *\n     * @param {Object} map - the map\n     */\n    setMap : function (map) {\n        if (!this._map) {\n            this._map = map;\n        }\n    },\n\n    /**\n     * clean\n     */\n    clear : function () {\n        this._setCursor();\n        this._setMarker();\n        this._clearResults();\n        this._inputLabelContainer.click();\n    },\n\n    /**\n     * disable/enable the drag&drop mode\n     *\n     * @param {Boolean} active - true:enable | false:disable\n     */\n    dragging : function (active) {\n        if (this._marker) {\n            if (active) {\n                this._marker.dragging.enable();\n            } else {\n                this._marker.dragging.disable();\n            }\n        }\n    },\n\n    // ################################################################### //\n    // ########################## pivates methods ######################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd(map)\n     * and initialize the container HTMLElement\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _initLayout : function () {\n        var id = this.options.tag.id;\n\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var inputs = this._inputsContainer = this._createLocationPointElement(id, this.options.tag.display);\n        container.appendChild(inputs);\n\n        var _inputLabel = this._inputLabelContainer = this._createLocationPointLabelElement(id, this.options.tag.label);\n        inputs.appendChild(_inputLabel);\n        var _inputAutoComplete = this._inputAutoCompleteContainer = this._createLocationAutoCompleteteInputElement(id);\n        inputs.appendChild(_inputAutoComplete);\n        var _inputCoordinate = this._inputCoordinateContainer = this._createLocationCoordinateInputElement(id);\n        inputs.appendChild(_inputCoordinate);\n        var _inputShowPointer = this._inputShowPointerContainer = this._createLocationPointerShowInputElement(id);\n        inputs.appendChild(_inputShowPointer);\n        var _inputPointer = this._createLocationPointerInputElement(id);\n        inputs.appendChild(_inputPointer);\n\n        if (this.options.tag.addOption) {\n            var _inputAddStage = this._createLocationAddPointElement();\n            inputs.appendChild(_inputAddStage);\n        }\n\n        if (this.options.tag.removeOption) {\n            var _inputRemoveStage = this._createLocationRemovePointElement(id);\n            inputs.appendChild(_inputRemoveStage);\n        }\n\n        var results = this._suggestedContainer = this._createLocationAutoCompleteResultElement(id);\n        container.appendChild(results);\n\n        return container;\n    },\n\n    /**\n     * this method is called by constructor\n     * and check the rights to resources and services\n     *\n     * @private\n     */\n    _checkRightsManagement : function () {\n        var _opts = null;\n        var _res = [];\n        var _key = null;\n\n        // les ressources du service du calcul inverse de geocodage\n        _key = this.options.reverseGeocodeOptions.apiKey;\n        _opts = this.options.reverseGeocodeOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = [\n                \"PositionOfInterest\",\n                \"StreetAddress\"\n            ];\n        }\n\n        var rightManagementRerverse = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"ReverseGeocode\"]\n        });\n\n        // les ressources du service d'autocompletion\n        _key = this.options.autocompleteOptions.apiKey;\n        _opts = this.options.autocompleteOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = [\n                \"PositionOfInterest\",\n                \"StreetAddress\"\n            ];\n        }\n\n        var rightManagementAutoComplete = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"AutoCompletion\"]\n        });\n\n        // au cas où pas de droit !\n        if (!rightManagementRerverse && !rightManagementAutoComplete) {\n            this._noRightManagement = true;\n        }\n\n        // FIXME je reconstruis differement la structure pour la gestion des clefs differentes\n        // pour chaque service...\n        if (rightManagementAutoComplete) {\n            this._resources[\"AutoCompletion\"] = {};\n            this._resources[\"AutoCompletion\"][\"resources\"] = rightManagementAutoComplete[\"AutoCompletion\"];\n            this._resources[\"AutoCompletion\"][\"key\"] = rightManagementAutoComplete[\"key\"];\n        }\n\n        if (rightManagementRerverse) {\n            this._resources[\"ReverseGeocode\"] = {};\n            this._resources[\"ReverseGeocode\"][\"resources\"] = rightManagementRerverse[\"ReverseGeocode\"];\n            this._resources[\"ReverseGeocode\"][\"key\"] = rightManagementRerverse[\"key\"];\n        }\n    },\n\n    // ################################################################### //\n    // ################# privates methods use by events ################## //\n    // ################################################################### //\n\n    /**\n     * this sends the label to the panel.\n     *\n     * @param {String} label - label suggested location\n     *\n     * @private\n     */\n    _setLabel : function (label) {\n        this._inputAutoCompleteContainer.value = label || \"\";\n    },\n\n    /**\n     * this sends the coordinates to the panel.\n     *\n     * @param {Object} oLatLng - geographic coordinate (L.LatLng)\n     *\n     * @private\n     */\n    _setCoordinate : function (oLatLng) {\n        // structure\n        // L.LatLng\n        //     lat: 4.07249425916745\n        //     lng: 2.4609375\n\n        // FIXME les coordonnées en lat/lon sur du EPSG:4326 !\n        // Mais règle sur les services : X -> LON et Y -> LAT\n        this._coordinate = {\n            x : oLatLng.lng,\n            y : oLatLng.lat\n        };\n\n        var lat = null;\n        var lng = null;\n\n        // decimal by default !\n        lat = PositionFormater.roundToDecimal(oLatLng.lat, 4);\n        lng = PositionFormater.roundToDecimal(oLatLng.lng, 4);\n\n        // on envoie du lon/lat à l'affichage\n        var value = lng + \" , \" + lat;\n        this.GPdisplayCoordinate(value);\n    },\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and move/zoom on a position.\n     *\n     * @param {Object} position - {x: ..., y: ...}\n     *\n     * @private\n     */\n    _setPosition : function (position) {\n        logger.log(\"_setPosition()\", position);\n\n        var map = this._map;\n        // TODO zoom\n        // map.setZoomAround(L.latLng(position.y, position.x), map.getMaxZoom(), true);\n        // FIXME on veut du lat/lon sur Leaflet donc on inverse !\n        map.panTo(L.latLng(position.y, position.x));\n    },\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and displays a marker.\n     * FIXME : marker IGN et informations ?\n     *\n     * @param {Object} position - position {x: ..., y: ...}\n     * @param {Object|String} information - suggested or geocoded information\n     * @param {Boolean} display - display a popup information\n     *\n     * @private\n     */\n    _setMarker : function (position, information, display) {\n        logger.log(\"_setMarker()\", position, information, display);\n\n        // sur du drag&drop, on garde le même marker !\n        if (this._activeDragAndDrop) {\n            return;\n        }\n\n        var map = this._map;\n        // on supprime le marker, ainsi que les events\n        // sur le drag&drop\n        if (this._marker != null) {\n            this._marker.off(\"mousedown\", this.onMouseDownMarker, this);\n            this._marker.off(\"dragstart\", this.onStartDragMarker, this);\n            this._marker.off(\"drag\", this.onDragMarker, this);\n            this._marker.off(\"dragend\", this.onEndDragMarker, this);\n            map.removeLayer(this._marker);\n            this._marker = null;\n        }\n\n        if (position) {\n            // cf. http://leafletjs.com/reference.html#marker-options\n            var options = {\n                icon : new IconDefault(this.options.tag.color),\n                draggable : true,\n                clickable : true,\n                zIndexOffset : 1000\n            };\n\n            // FIXME on veut du lat/lon sur Leaflet donc on inverse !\n            this._marker = L.marker(L.latLng(position.y, position.x), options);\n\n            this._marker.on(\"mousedown\", this.onMouseDownMarker, this);\n            this._marker.on(\"dragstart\", this.onStartDragMarker, this);\n            this._marker.on(\"drag\", this.onDragMarker, this);\n            this._marker.on(\"dragend\", this.onEndDragMarker, this);\n            // this._marker.on(\"movestart\", this.onStartMoveMarker, this);\n            // this._marker.on(\"move\",      this.onMoveMarker, this);\n            // this._marker.on(\"moveend\",   this.onEndMoveMarker, this);\n\n            this._marker.addTo(map);\n\n            // FIXME\n            // doit on mettre une information\n            // - correctement construite ?\n            // - uniquement informatif ?\n            // - RIEN ?\n            if (display) {\n                var popupContent = null;\n\n                if (typeof information !== \"string\") {\n                    if (information.fields.fullText) {\n                        popupContent = information.fields.fullText;\n                    } else {\n                        var values = [];\n                        values.push(information.fields.street || \"\");\n                        values.push(information.fields.postalCode || \"\");\n                        values.push(information.fields.commune || \"\");\n\n                        if (information.type === \"PositionOfInterest\") {\n                            values.push(information.fields.poi || \"\");\n                            values.push(information.fields.kind || \"\");\n                        }\n\n                        popupContent = values.join(\" - \");\n                    }\n                } else {\n                    popupContent = information;\n                }\n\n                this._marker.bindPopup(popupContent);\n            }\n        }\n    },\n\n    /**\n     * this method is called by this.on()\n     * and change the cursor of the map when entering a point.\n     *\n     * @param {String} cursor - cursor style\n     *\n     * @private\n     */\n    _setCursor : function (cursor) {\n        var div = this._map.getContainer();\n\n        if (cursor) {\n            div.style.cursor = cursor;\n        } else {\n            div.style.cursor = null;\n        }\n    },\n\n    /**\n     * this method is called by this.()\n     * and it clears all results and the marker.\n     *\n     * @private\n     */\n    _clearResults : function () {\n        this._currentLocation = null;\n\n        this._coordinate = null;\n\n        this._clearSuggestedLocation();\n    },\n\n    /**\n     * this method is called by this.onAutoCompleteSearchText()\n     * and it clears all suggested location.\n     *\n     * @private\n     */\n    _clearSuggestedLocation : function () {\n        // suppression du dom\n        this._suggestedLocations = [];\n        if (this._suggestedContainer) {\n            while (this._suggestedContainer.firstChild) {\n                this._suggestedContainer.removeChild(this._suggestedContainer.firstChild);\n            }\n        }\n    },\n\n    // ################################################################### //\n    // ############## privates methods use by autocomplete ############### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAutoCompleteSearch()\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     * @param {String}   settings.text - text\n     * @param {Function} settings.onSuccess - callback\n     * @param {Function} settings.onFailure - callback\n     *\n     * @private\n     */\n    _requestAutoComplete : function (settings) {\n        logger.log(\"_requestAutoComplete()\", settings);\n\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings || Object.keys(settings).length === 0) {\n            return;\n        }\n\n        // on ne fait pas de requête si la parametre 'text' est vide !\n        if (!settings.text) {\n            return;\n        }\n\n        logger.log(settings);\n\n        // on ne fait pas de requête si aucun droit !\n        if (this._noRightManagement) {\n            logger.log(\"no rights for all service !?\");\n            return;\n        }\n\n        // gestion des droits !\n        if (!this._resources[\"AutoCompletion\"]) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        var resources = this._resources[\"AutoCompletion\"].resources;\n        if (!resources || Object.keys(resources).length === 0) {\n            return;\n        }\n\n        // gestion de la clef !\n        var key = this._resources[\"AutoCompletion\"][\"key\"];\n\n        var options = {};\n        // on recupere les options du service\n        L.Util.extend(options, this.options.autocompleteOptions);\n        // ainsi que la recherche et les callbacks\n        L.Util.extend(options, settings);\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        L.Util.extend(options, {\n            apiKey : options.apiKey || this.options.apiKey || key\n        });\n\n        logger.log(options);\n\n        Gp.Services.autoComplete(options);\n    },\n\n    /**\n     * this method is called by this.onAutoCompleteSearchText()\n     * and fills the container of the location list.\n     * it creates a HTML Element per location\n     * (cf. this. ...)\n     *\n     * @param {Object[]} locations - locations\n     *\n     * @private\n     */\n    _fillAutoCompletedLocationListContainer : function (locations) {\n        logger.log(\"_fillAutoCompletedLocationListContainer()\", locations);\n\n        if (!locations || locations.length === 0) {\n            return;\n        }\n\n        // on vide la liste avant de la construire\n        var element = this._suggestedContainer;\n        if (element.childElementCount) {\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n        }\n\n        for (var i = 0; i < locations.length; i++) {\n            // Proposals are dynamically filled in Javascript by autocomplete service\n            this._createLocationAutoCompletedLocationElement(this.options.tag.id, locations[i], i);\n        }\n\n        // sauvegarde de l'etat des locations\n        this._suggestedLocations = locations;\n    },\n\n    // ################################################################### //\n    // ################# privates methods use by reverse ################# //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onMouseMapClick() or this.onEndDragMarker()\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     * @param {String}   settings.position - position\n     * @param {Function} settings.onSuccess - callback\n     * @param {Function} settings.onFailure - callback\n     *\n     * @private\n     */\n    _requestReverseGeocode : function (settings) {\n        logger.log(\"_requestReverseGeocode()\", settings);\n\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings || Object.keys(settings).length === 0) {\n            return;\n        }\n\n        // on ne fait pas de requête si la parametre 'position' est vide !\n        if (!settings.position || Object.keys(settings.position).length === 0) {\n            return;\n        }\n\n        // on ne fait pas de requête si aucun droit !\n        if (this._noRightManagement) {\n            logger.log(\"no rights for all service !?\");\n            return;\n        }\n\n        // gestion des droits !\n        if (!this._resources[\"ReverseGeocode\"]) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        var resources = this._resources[\"ReverseGeocode\"].resources;\n        if (!resources || Object.keys(resources).length === 0) {\n            return;\n        }\n\n        // gestion de la clef !\n        var key = this._resources[\"ReverseGeocode\"][\"key\"];\n\n        var options = {};\n        // on recupere les options du service\n        L.Util.extend(options, this.options.reverseGeocodeOptions);\n\n        // ainsi que la positions et les callbacks\n        L.Util.extend(options, settings);\n\n        // on force qq options !\n        // La table de geocodage est toujours par defaut : StreetAddress !\n        L.Util.extend(options, {\n            returnFreeForm : true, // FIXME cette option n'est pas implementée !?\n            filterOptions : {\n                type : [\"StreetAddress\"]\n            }\n        });\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        L.Util.extend(options, {\n            apiKey : options.apiKey || this.options.apiKey || key\n        });\n\n        logger.log(options);\n\n        Gp.Services.reverseGeocode(options);\n    },\n\n    /**\n     * display Coordinate on panel, and places the marker on map\n     *\n     * @param {Object} oLatLng - geographic coordinate (L.LatLng)\n     * @private\n     */\n    _displayResultOfCoordinate : function (oLatLng) {\n        // on transmet les coordonnées au panneau\n        this._setCoordinate(oLatLng);\n\n        // on met en place le marker\n        this._setMarker({\n            x : oLatLng.lng,\n            y : oLatLng.lat\n        }, null, false);\n\n        logger.log(this.getCoordinate());\n\n        // on desactive l'event sur la map en activant le gestionnaire !\n        this.onActivateMapPointClick();\n    },\n\n    /**\n     * display Label on panel, and places the marker on map\n     *\n     * @param {Object} oLocation - location Object\n     * @private\n     */\n    _displayResultOfLabel : function (oLocation) {\n        // FIXME Le service est intérrogé en SRS EPSG:4326 par defaut,\n        // donc on récupère du lat/lon en reponse.\n        // mais on inverse car on souhaite transmettre des coordonnées en lon/lat...\n\n        // FIXME on construit une addresse car l'option freeForm ne semble pas\n        // être fonctionnelle...\n\n        // Par defaut, on doit être sur du type 'StreetAddress' par defaut.\n        var places = oLocation.placeAttributes;\n        var label = places.number + \" \" +\n            places.street + \", \" +\n            places.postalCode + \" \" +\n            places.commune;\n\n        // on transmet les coordonnées au panneau,\n        // même si on ne les affiche pas...\n        this._setCoordinate({\n            lat : oLocation.position.x,\n            lng : oLocation.position.y\n        });\n\n        // on transmet le texte au panneau\n        this._setLabel(label);\n\n        // on met en place le marker\n        this._setMarker({\n            x : oLocation.position.y, // LON\n            y : oLocation.position.x // LAT\n        }, null, false);\n\n        this._inputShowPointerContainer.checked = false;\n        this._inputAutoCompleteContainer.className = \"GPlocationOriginVisible\";\n        this._inputCoordinateContainer.className = \"GPlocationOriginHidden\";\n\n        // on desactive l'event sur la map en activant le gestionnaire !\n        this.onActivateMapPointClick();\n    },\n\n    // ################################################################### //\n    // ###################### handlers events (dom) ###################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'keyup' on 'GPLocationOrigin' tag input\n     * (cf. this.), and it gets the value of input.\n     * this value is passed as a parameter for the service autocomplete (text).\n     * the results of the request are displayed into a drop down menu.\n     * FIXME\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onAutoCompleteSearchText : function (e) {\n        logger.log(\"onAutoCompleteSearchText()\", e);\n\n        var value = e.target.value;\n        if (!value) {\n            return;\n        }\n\n        // aucun droits !\n        // on evite une requête...\n        if (this._noRightManagement) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        // on sauvegarde le localisant\n        this._currentLocation = value;\n\n        // on limite les requêtes à partir de 3 car. saisie !\n        if (value.length < 3) {\n            return;\n        }\n\n        // INFORMATION\n        // on effectue la requête au service d'autocompletion.\n        // on met en place des callbacks afin de recuperer les resultats ou\n        // les messages d'erreurs du service.\n        // les resultats sont affichés dans une liste deroulante.\n        var context = this;\n        this._requestAutoComplete({\n            text : value,\n            maximumResponses : 5, // FIXME je limite le nombre de reponse car le container DOM est limité dans l'affichage !!!\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(results);\n                if (results) {\n                    var locations = results.suggestedLocations;\n                    context._fillAutoCompletedLocationListContainer(locations);\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME\n                // où affiche t on les messages : ex. 'No suggestion matching the search' ?\n                // doit on nettoyer la liste des suggestions dernierement enregistrée :\n                context._clearSuggestedLocation();\n                logger.log(error.message);\n            }\n        });\n    },\n\n    /**\n     * this method is called by event 'click' on 'GPautoCompleteResultsList' tag div\n     * (cf. this._createAutoCompleteListElement), and it selects the location.\n     * this location displays a marker on the map.\n     * FIXME\n     * TODO\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onAutoCompletedResultsItemClick : function (e) {\n        logger.log(\"onAutoCompletedResultsItemClick()\", e);\n\n        var idx = ID.index(e.target.id);\n        logger.log(idx);\n        logger.log(this._suggestedLocations[idx]);\n\n        if (!idx) {\n            return;\n        }\n\n        var position = {\n            x : this._suggestedLocations[idx].position.x, // LON !\n            y : this._suggestedLocations[idx].position.y // LAT !\n        };\n\n        var info = {\n            type : this._suggestedLocations[idx].type,\n            fields : this._suggestedLocations[idx]\n        };\n\n        var label = this._suggestedLocations[idx].fullText;\n        this._setLabel(label);\n        this._setPosition(position);\n        this._setMarker(position, info, this.options.displayInfo);\n\n        // on sauvegarde le point courant\n        this._coordinate = position;\n    },\n\n    /**\n     * this method is called by event 'click' on '' tag input\n     * (cf. this.), and it create or remove the event of click map.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onActivateMapPointClick : function (e) {\n        logger.trace(\"onActivateMapPointClick()\", e);\n\n        var map = this._map;\n\n        if (this._inputShowPointerContainer.checked) {\n            if (!this._activeDragAndDrop) {\n                map.on(\"click\", this.onMouseMapClick, this);\n                // on change le curseur\n                this._setCursor(\"crosshair\");\n                // on supprime le marker\n                this._setMarker();\n                // on efface l'ancien resultat\n                this._clearResults();\n            }\n        } else {\n            if (!this._activeDragAndDrop) {\n                map.off(\"click\", this.onMouseMapClick, this);\n                // on retablie le curseur d'origine\n                this._setCursor();\n            }\n        }\n    },\n\n    /**\n     * this method is called by event 'click' on '(n)' tag label\n     * (cf. this.).\n     * this point is erased.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onLocationClearPointClick : function (e) {\n        logger.log(\"onLocationClearPointClick\", e);\n        this._setCursor();\n        this._setMarker();\n        this._clearResults();\n        this._inputAutoCompleteContainer.focus();\n    },\n\n    /**\n     * this method is called by event 'click' on '(n)' tag input\n     * (cf. this.).\n     * this point is deleted.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onLocationRemovePointClick : function (e) {\n        logger.log(\"onLocationRemovePointClick\", e);\n        this._setCursor();\n        this._setMarker();\n        this._clearResults();\n    },\n\n    /**\n     * TODO this method is called by event 'click' on '(n)' tag input\n     * (cf. this.).\n     * this point is added as a parameter for the service Location.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onLocationAddPointClick : function (e) {\n        logger.log(\"onLocationAddPointClick\", e);\n    },\n\n    // ################################################################### //\n    // #################### handlers events (control) #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on map\n     * (cf. this.onLocationMapPointClick), and it gets the coordinate of click on map.\n     * this point is saved as a parameter for the service Location.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onMouseMapClick : function (e) {\n        logger.log(\"onMouseMapClick\", e);\n\n        // les coordonnées\n        var oLatLng = e.latlng;\n\n        // si le geocodage inverse est desactivé,\n        // on transmet les coordonnées au panneau,\n        // sinon, on transmet la reponse du service\n        if (this.options.disableReverse || this._noRightManagement) {\n            // on transmet les coordonnées au panneau, puis on place le marker\n            this._displayResultOfCoordinate(oLatLng);\n        } else {\n            // contexte\n            var self = this;\n\n            // on realise une requête au service, si la reponse est vide ou\n            // en échec, on transmet les coordonnées !\n            this._requestReverseGeocode({\n                position : {\n                    x : oLatLng.lat, // on envoie X->LAT à l'API service IGN car on spécifie EPSG:4326\n                    y : oLatLng.lng // on envoie Y->LON à l'API service IGN car on spécifie EPSG:4326\n                },\n                srs : \"EPSG:4326\",\n                // callback onSuccess\n                onSuccess : function (results) {\n                    logger.log(results);\n                    if (results.locations.length !== 0) {\n                        var oLocation = results.locations[0];\n                        self._displayResultOfLabel(oLocation);\n                    } else {\n                        self._displayResultOfCoordinate(oLatLng);\n                    }\n                },\n                // callback onFailure\n                onFailure : function (error) {\n                    logger.log(error.message);\n                    self._displayResultOfCoordinate(oLatLng);\n                }\n            });\n        }\n    },\n\n    /**\n     * this method is called by event 'startdrag' on marker\n     * and it initializes the drag&drop.\n     *\n     * @private\n     */\n    onStartDragMarker : function () {\n        if (!this._marker) {\n            return;\n        }\n\n        this._activeDragAndDrop = true;\n        this._inputShowPointerContainer.checked = true;\n        this._inputAutoCompleteContainer.className = \"GPlocationOriginHidden\";\n        this._inputCoordinateContainer.className = \"GPlocationOriginVisible\";\n        this._marker.unbindPopup();\n        this._setLabel();\n        this._clearResults();\n    },\n\n    /**\n     * this method is called by event 'drag' on marker\n     * and it updates the panel of coordinate.\n     *\n     * @private\n     */\n    onDragMarker : function () {\n        if (!this._marker) {\n            return;\n        }\n\n        this._activeDragAndDrop = false;\n        this._inputShowPointerContainer.checked = true;\n\n        // on transmet les coordonnées au panneau\n        var oLatLng = this._marker.getLatLng();\n        this._setCoordinate(oLatLng);\n    },\n\n    /**\n     * this method is called by event 'enddrag' on marker\n     * and it finishes the drag&drop.\n     * this point is saved as a parameter for the service Location.\n     *\n     * @private\n     */\n    onEndDragMarker : function () {\n        if (!this._marker) {\n            return;\n        }\n\n        this._inputShowPointerContainer.checked = true;\n\n        var oLatLng = this._marker.getLatLng();\n\n        if (this._pressedKeyOnDragAndDrop) {\n            // on transmet les coordonnées au panneau\n            this._setCoordinate(oLatLng);\n        } else {\n            logger.log(\"No key pressed, so autocomplete solution !\");\n            this.onMouseMapClick({\n                latlng : oLatLng\n            });\n        }\n\n        // init\n        this._activeDragAndDrop = false;\n        this._pressedKeyOnDragAndDrop = false;\n    },\n\n    /**\n     * this method is called by event 'mousedown' on marker..\n     * this event gets the pressed key code.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onMouseDownMarker : function (e) {\n        if (!this._marker) {\n            return;\n        }\n\n        this._pressedKeyOnDragAndDrop = e.originalEvent.ctrlKey;\n    }\n\n});\n\nexport default LocationSelector;\n","var IsoDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPisochron\");\n        container.className = \"GPwidget\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################# Methods to display Main Panel ################### //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowIsoElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowIsochron\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Show iso control\n     * see event !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowIsoPictoElement : function () {\n        // contexte d'execution\n        var context = this;\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowIsochronPicto\");\n        label.className = \"GPshowAdvancedToolPicto\";\n        label.htmlFor = this._addUID(\"GPshowIsochron\");\n        label.title = \"Calculer une isochrone\";\n\n        // gestionnaire d'evenement :\n        // on ouvre le menu de saisie du calcul d'isochrone\n        // L'ouverture/Fermeture permet de faire le menage\n        // (reinitialisation)\n        if (label.addEventListener) {\n            label.addEventListener(\"click\", function (e) {\n                context.onShowIsoPanelClick(e);\n            });\n        } else if (label.attachEvent) {\n            label.attachEvent(\"onclick\", function (e) {\n                context.onShowIsoPanelClick(e);\n            });\n        }\n\n        var spanOpen = document.createElement(\"span\");\n        spanOpen.id = this._addUID(\"GPshowIsochronOpen\");\n        spanOpen.className = \"GPshowAdvancedToolOpen\";\n        label.appendChild(spanOpen);\n\n        return label;\n    },\n\n    // ################################################################### //\n    // ################## Methods to display Inputs Panel ################ //\n    // ################################################################### //\n\n    /**\n     * Create Container Panel\n     *\n     * FIXME\n     * don't call this._createIsoPanelHeaderElement\n     * don't call this._createIsoPanelFormElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronPanel\");\n        div.className = \"GPpanel\";\n\n        // div.appendChild(this._createIsoPanelHeaderElement());\n        // div.appendChild(this._createIsoPanelFormElement());\n\n        return div;\n    },\n\n    /**\n     * Create Header Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelHeaderElement : function () {\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader\";\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPpanelTitle\";\n        div.innerHTML = \"Calcul d'isochrone\";\n        container.appendChild(div);\n\n        // on desactive l'impl. reduction de la fenetre\n        // var divReduce  = document.createElement(\"div\");\n        // divReduce.id = this._addUID(\"GPisochronPanelReduce\");\n        // divReduce.className = \"GPpanelReduce\";\n        // divReduce.title = \"Masquer le panneau\";\n        //\n        // if (divReduce.addEventListener) {\n        //     divReduce.addEventListener(\"click\", function () {\n        //         if ( typeof self.onReduceIsoPanelClick === \"function\") {\n        //             document.getElementById(self._addUID(\"GPshowIsochron\")).checked = false;\n        //             self.onReduceIsoPanelClick();\n        //         }\n        //     }, false);\n        // } else if (divReduce.attachEvent) {\n        //     divReduce.attachEvent(\"onclick\", function () {\n        //         if ( typeof self.onReduceIsoPanelClick === \"function\") {\n        //             document.getElementById(self._addUID(\"GPshowIsochron\")).checked = false;\n        //             self.onReduceIsoPanelClick();\n        //         }\n        //     });\n        // }\n        // container.appendChild(divReduce);\n\n        var divClose = document.createElement(\"div\");\n        divClose.id = this._addUID(\"GPisochronPanelClose\");\n        divClose.className = \"GPpanelClose\";\n        divClose.title = \"Fermer le panneau\";\n\n        // Link panel close / visibility checkbox\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowIsochronPicto\")).click();\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowIsochronPicto\")).click();\n            });\n        }\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * Create Form\n     * see evenement !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GPisochronForm\");\n\n        form.addEventListener(\"submit\", function (e) {\n            e.preventDefault();\n            self.onIsoComputationSubmit(e);\n            return false;\n        });\n\n        return form;\n    },\n\n    /**\n     * Create Waiting Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoWaitingElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronCalcWaitingContainer\");\n        div.className = \"GPisochronCalcWaitingContainerHidden\";\n\n        var p = document.createElement(\"p\");\n        p.className = \"GPisochronCalcWaiting\";\n        p.innerHTML = \"Calcul en cours...\";\n\n        div.appendChild(p);\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ############# Methods to the type choice into form ################ //\n    // ################################################################### //\n\n    /**\n     * Create Container to type choice\n     *\n     * FIXME\n     * don't call this._createIsoPanelFormTypeChoiceChronElement\n     * don't call this._createIsoPanelFormTypeChoiceDistElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormTypeChoiceElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronChoice\");\n\n        // div.appendChild(this._createIsoPanelFormTypeChoiceChronElement());\n        // div.appendChild(this._createIsoPanelFormTypeChoiceDistElement());\n\n        return div;\n    },\n\n    /**\n     * Create Type choice Chron\n     * see event !\n     * FIXME event not useful\n     * @param {Boolean} checked - checked\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormTypeChoiceChronElement : function (checked) {\n        var self = this;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPisochronChoiceAlt\";\n\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPisochronChoiceAltChron\");\n        input.name = \"GPisochronChoiceMode\";\n        input.type = \"radio\";\n        input.checked = !!(checked);\n        if (input.addEventListener) {\n            input.addEventListener(\"change\", function (e) {\n                document.getElementById(self._addUID(\"GPisochronValueChron\")).className = \"GPflexInput\";\n                document.getElementById(self._addUID(\"GPisochronValueDist\")).className = \"GPisochronValueHidden\";\n                self.onIsoTypeChoiceChange(e);\n            }, false);\n        } else if (input.attachEvent) {\n            input.attachEvent(\"onchange\", function () {\n                document.getElementById(self._addUID(\"GPisochronValueChron\")).className = \"GPflexInput\";\n                document.getElementById(self._addUID(\"GPisochronValueDist\")).className = \"GPisochronValueHidden\";\n                self.onIsoTypeChoiceChange();\n            });\n        }\n        // info: Internet explorer support\n        input.value = \"isochron\";\n        div.appendChild(input);\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPisochronChoiceAltImg\";\n        label.htmlFor = this._addUID(\"GPisochronChoiceAltChron\");\n        div.appendChild(label);\n\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPisochronChoiceAltChronTxt\");\n        span.innerHTML = \"isochrone\";\n        if (span.addEventListener) {\n            span.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPisochronChoiceAltChron\")).click();\n            }, false);\n        } else if (span.attachEvent) {\n            span.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPisochronChoiceAltChron\")).click();\n            });\n        }\n        div.appendChild(span);\n\n        return div;\n    },\n\n    /**\n     * Create Type choice Dist\n     * see event !\n     * FIXME event not useful\n     * @param {Boolean} checked - checked\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormTypeChoiceDistElement : function (checked) {\n        var self = this;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPisochronChoiceAlt\";\n\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPisochronChoiceAltDist\");\n        input.name = \"GPisochronChoiceMode\";\n        input.type = \"radio\";\n        input.checked = !!(checked);\n        if (input.addEventListener) {\n            input.addEventListener(\"change\", function (e) {\n                document.getElementById(self._addUID(\"GPisochronValueDist\")).className = \"GPflexInput\";\n                document.getElementById(self._addUID(\"GPisochronValueChron\")).className = \"GPisochronValueHidden\";\n                self.onIsoTypeChoiceChange(e);\n            }, false);\n        } else if (input.attachEvent) {\n            input.attachEvent(\"onchange\", function () {\n                document.getElementById(self._addUID(\"GPisochronValueDist\")).className = \"GPflexInput\";\n                document.getElementById(self._addUID(\"GPisochronValueChron\")).className = \"GPisochronValueHidden\";\n                self.onIsoTypeChoiceChange();\n            });\n        }\n        // info: Internet explorer support\n        input.value = \"isodistance\";\n        div.appendChild(input);\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPisochronChoiceAltImg\";\n        label.htmlFor = this._addUID(\"GPisochronChoiceAltDist\");\n        div.appendChild(label);\n\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPisochronChoiceAltDistTxt\");\n        span.innerHTML = \"isodistance\";\n        if (span.addEventListener) {\n            span.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPisochronChoiceAltDist\")).click();\n            }, false);\n        } else if (span.attachEvent) {\n            span.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPisochronChoiceAltDist\")).click();\n            });\n        }\n        div.appendChild(span);\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ############### Methods to the value iso into form ################ //\n    // ################################################################### //\n\n    /**\n     * Create isochron inputs values\n     * see event !\n     * @param {Boolean} checked - checked\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormValueIsochronElement : function (checked) {\n        // contexte\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronValueChron\");\n        div.className = (checked) ? \"GPflexInput\" : \"GPisochronValueHidden\";\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPisochronValueChronLabel\");\n        label.htmlFor = this._addUID(\"GPisochronValueChronInput\");\n        label.innerHTML = \"Temps\";\n        div.appendChild(label);\n\n        var input1 = document.createElement(\"input\");\n        input1.id = this._addUID(\"GPisochronValueChronInput1\");\n        input1.min = \"0\";\n        input1.step = \"1\";\n        input1.value = \"0\";\n        input1.type = \"number\";\n        if (input1.addEventListener) {\n            input1.addEventListener(\"change\", function (e) {\n                if (typeof context.onIsoValueChronTimeMinuteChange === \"function\") {\n                    context.onIsoValueChronTimeHourChange(e);\n                }\n            });\n        } else if (input1.attachEvent) {\n            input1.attachEvent(\"onchange\", function (e) {\n                if (typeof context.onIsoValueChronTimeMinuteChange === \"function\") {\n                    context.onIsoValueChronTimeHourChange(e);\n                }\n            });\n        }\n        div.appendChild(input1);\n\n        var label1 = document.createElement(\"label\");\n        label1.innerHTML = \"h\";\n        div.appendChild(label1);\n\n        var input2 = document.createElement(\"input\");\n        input2.id = this._addUID(\"GPisochronValueChronInput2\");\n        input2.min = \"0\";\n        input2.max = \"59\";\n        input2.step = \"1\";\n        input2.value = \"0\";\n        input2.type = \"number\";\n        if (input2.addEventListener) {\n            input2.addEventListener(\"change\", function (e) {\n                if (typeof context.onIsoValueChronTimeMinuteChange === \"function\") {\n                    context.onIsoValueChronTimeMinuteChange(e);\n                }\n            });\n        } else if (input2.attachEvent) {\n            input2.attachEvent(\"onchange\", function (e) {\n                if (typeof context.onIsoValueChronTimeMinuteChange === \"function\") {\n                    context.onIsoValueChronTimeMinuteChange(e);\n                }\n            });\n        }\n        div.appendChild(input2);\n\n        var label2 = document.createElement(\"label\");\n        label2.innerHTML = \"min\";\n        div.appendChild(label2);\n\n        return div;\n    },\n\n    /**\n     * Create isodistance inputs values\n     * see event !\n     * @param {Boolean} checked - checked\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormValueIsodistanceElement : function (checked) {\n        // contexte\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronValueDist\");\n        div.className = (checked) ? \"GPflexInput\" : \"GPisochronValueHidden\";\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPisochronValueDistLabel\");\n        label.htmlFor = this._addUID(\"GPisochronValueDistInput\");\n        label.innerHTML = \"Distance\";\n        div.appendChild(label);\n\n        var input1 = document.createElement(\"input\");\n        input1.id = this._addUID(\"GPisochronValueDistInput\");\n        input1.min = \"0\";\n        input1.step = \"any\";\n        input1.value = \"0\";\n        input1.type = \"number\";\n        if (input1.addEventListener) {\n            input1.addEventListener(\"change\", function (e) {\n                if (typeof context.onIsoValueDistChange === \"function\") {\n                    context.onIsoValueDistChange(e);\n                }\n            });\n        } else if (input1.attachEvent) {\n            input1.attachEvent(\"onchange\", function (e) {\n                if (typeof context.onIsoValueDistChange === \"function\") {\n                    context.onIsoValueDistChange(e);\n                }\n            });\n        }\n        div.appendChild(input1);\n\n        var label1 = document.createElement(\"label\");\n        label1.innerHTML = \"km\";\n        div.appendChild(label1);\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ############ Methods to the mode choice into form ################# //\n    // ################################################################### //\n\n    /**\n     * Create Container to Mode choice\n     *\n     * FIXME\n     * don't call this._createIsoPanelFormModeChoiceTransportElement\n     * don't call this._createIsoPanelFormModeChoiceDirectionElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormModeChoiceElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronModeChoice\");\n\n        // div.appendChild(this._createIsoPanelFormModeChoiceTransportElement());\n        // div.appendChild(this._createIsoPanelFormModeChoiceDirectionElement());\n\n        return div;\n    },\n\n    /**\n     * Create Mode choice transport\n     * see event !\n     * FIXME event not useful\n     * @param {Array} transports - transports in a list\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormModeChoiceTransportElement : function (transports) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronTransportChoice\");\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPisochronModeLabel\";\n        span.innerHTML = \"Mode de transport\";\n        div.appendChild(span);\n\n        /* jshint -W083 */\n        for (var i = 0; i < transports.length; i++) {\n            var transport = transports[i];\n\n            if (transport === \"Voiture\") {\n                var inputCar = document.createElement(\"input\");\n                inputCar.id = this._addUID(\"GPisochronTransportCar\");\n                inputCar.type = \"radio\";\n                inputCar.name = \"GPisochronTransport\";\n                if (i === 0) {\n                    inputCar.checked = true;\n                }\n                // gestionnaire d'evenement :\n                // on stocke le mode de transport,\n                // utilisation pour la requête sur le service de calcul d'itiniraire\n                if (inputCar.addEventListener) {\n                    inputCar.addEventListener(\"change\", function (e) {\n                        context.onIsoModeTransportChange(e);\n                    });\n                } else if (inputCar.attachEvent) {\n                    inputCar.attachEvent(\"onchange\", function (e) {\n                        context.onIsoModeTransportChange(e);\n                    });\n                }\n                // info : internet explorer support\n                inputCar.value = \"Voiture\";\n                div.appendChild(inputCar);\n\n                var labelCar = document.createElement(\"label\");\n                labelCar.className = \"GPisochronTransportImg\";\n                labelCar.htmlFor = this._addUID(\"GPisochronTransportCar\");\n                labelCar.title = \"Voiture\";\n                div.appendChild(labelCar);\n            }\n\n            if (transport === \"Pieton\") {\n                var inputPedestrian = document.createElement(\"input\");\n                inputPedestrian.id = this._addUID(\"GPisochronTransportPedestrian\");\n                inputPedestrian.type = \"radio\";\n                inputPedestrian.name = \"GPisochronTransport\";\n                if (i === 0) {\n                    inputPedestrian.checked = true;\n                }\n                // gestionnaire d'evenement :\n                // on stocke le mode de transport,\n                // utilisation pour la requête sur le service de calcul d'itiniraire\n                if (inputPedestrian.addEventListener) {\n                    inputPedestrian.addEventListener(\"change\", function (e) {\n                        context.onIsoModeTransportChange(e);\n                    });\n                } else if (inputPedestrian.attachEvent) {\n                    inputPedestrian.attachEvent(\"onchange\", function (e) {\n                        context.onIsoModeTransportChange(e);\n                    });\n                }\n                // info : internet explorer support\n                inputPedestrian.value = \"Pieton\";\n                div.appendChild(inputPedestrian);\n\n                var labelPedestrian = document.createElement(\"label\");\n                labelPedestrian.className = \"GPisochronTransportImg\";\n                labelPedestrian.htmlFor = this._addUID(\"GPisochronTransportPedestrian\");\n                labelPedestrian.title = \"Piéton\";\n                div.appendChild(labelPedestrian);\n            }\n        }\n\n        return div;\n    },\n\n    /**\n     * Create Mode choice direction\n     * see event!\n     *\n     * @param {Array} directions - directions to display in list (\"Departure\", \"Arrival\"). First element will be selected by default\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormModeChoiceDirectionElement : function (directions) {\n        // contexte d'execution\n        var self = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisochronDirectionChoice\");\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPisochronModeLabel\";\n        span.innerHTML = \"Sens de parcours\";\n        div.appendChild(span);\n\n        var select = document.createElement(\"select\");\n        select.id = this._addUID(\"GPisochronDirectionSelect\");\n        select.className = \"GPinputSelect\";\n        // gestionnaire d'evenement :\n        // on stocke la valeur du mode de calcul,\n        // utilisation pour la requête sur le service de calcul d'iso\n        select.addEventListener(\"change\", function (e) {\n            self.onIsoModeDirectionChange(e);\n        });\n\n        for (var i = 0; i < directions.length; i++) {\n            var direction = directions[i];\n            if (direction.toLowerCase() === \"departure\") {\n                var departureOption = document.createElement(\"option\");\n                if (i === 0) {\n                    departureOption.selected = \"selected\";\n                }\n                departureOption.value = \"departure\";\n                departureOption.text = \"Départ\";\n                select.appendChild(departureOption);\n            }\n            if (direction.toLowerCase() === \"arrival\") {\n                var arrivalOption = document.createElement(\"option\");\n                if (i === 0) {\n                    arrivalOption.selected = \"selected\";\n                }\n                arrivalOption.value = \"arrival\";\n                arrivalOption.text = \"Arrivée\";\n                select.appendChild(arrivalOption);\n            }\n        }\n        div.appendChild(select);\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ################# Methods to the choice exclusions ################ //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing Exclusions Options\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowIsoExclusionsElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowIsoExclusions\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Label to Exclusions Options\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowIsoExclusionsPictoElement : function () {\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowIsoExclusionsPicto\");\n        label.className = \"GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto\";\n        label.htmlFor = this._addUID(\"GPshowIsoExclusions\");\n        label.title = \"Exclusions\";\n        label.style.top = \"240px\";\n\n        return label;\n    },\n\n    /**\n     * Create Container to Exclusions\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormExclusionsElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPisoExclusions\");\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPisoExclusionsLabel\";\n        span.innerHTML = \"Passages autorisés\";\n        div.appendChild(span);\n\n        // div.appendChild(this._createIsoPanelFormExclusionOptionsElement());\n\n        return div;\n    },\n\n    /**\n     * Create Exclusions Options\n     * see event !\n     * FIXME event not useful\n     * @param {Array} exclusions - exclusions to display in list\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoPanelFormExclusionOptionsElement : function (exclusions) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPisoExclusionsOptions\";\n\n        /* jshint -W083 */\n        for (var value in exclusions) {\n            if (exclusions.hasOwnProperty(value)) {\n                var status = exclusions[value];\n                switch (value) {\n                    case \"toll\":\n                        var inputToll = document.createElement(\"input\");\n                        inputToll.id = this._addUID(\"GPisoExclusionsToll\");\n                        inputToll.type = \"checkbox\";\n                        inputToll.checked = !status;\n                        // gestionnaire d'evenement :\n                        // on stocke l'exclusion,\n                        // utilisation pour la requête sur le service de calcul d'itiniraire\n                        if (inputToll.addEventListener) {\n                            inputToll.addEventListener(\"change\", function (e) {\n                                context.onIsoExclusionsChange(e);\n                            });\n                        } else if (inputToll.attachEvent) {\n                            inputToll.attachEvent(\"onchange\", function (e) {\n                                context.onIsoExclusionsChange(e);\n                            });\n                        }\n                        // info : internet explorer support\n                        inputToll.value = \"Toll\";\n                        div.appendChild(inputToll);\n\n                        var labelToll = document.createElement(\"label\");\n                        labelToll.className = \"GPisoExclusionsOption\";\n                        labelToll.htmlFor = this._addUID(\"GPisoExclusionsToll\");\n                        labelToll.innerHTML = \"Péages\";\n                        div.appendChild(labelToll);\n                        break;\n\n                    case \"tunnel\":\n                        var inputTunnel = document.createElement(\"input\");\n                        inputTunnel.id = this._addUID(\"GPisoExclusionsTunnel\");\n                        inputTunnel.type = \"checkbox\";\n                        inputTunnel.checked = !status;\n                        // gestionnaire d'evenement :\n                        // on stocke l'exclusion,\n                        // utilisation pour la requête sur le service de calcul d'itiniraire\n                        if (inputTunnel.addEventListener) {\n                            inputTunnel.addEventListener(\"change\", function (e) {\n                                context.onIsoExclusionsChange(e);\n                            });\n                        } else if (inputTunnel.attachEvent) {\n                            inputTunnel.attachEvent(\"onchange\", function (e) {\n                                context.onIsoExclusionsChange(e);\n                            });\n                        }\n                        // info : internet explorer support\n                        inputTunnel.value = \"Tunnel\";\n                        div.appendChild(inputTunnel);\n\n                        var labelTunnel = document.createElement(\"label\");\n                        labelTunnel.className = \"GPisoExclusionsOption\";\n                        labelTunnel.htmlFor = this._addUID(\"GPisoExclusionsTunnel\");\n                        labelTunnel.innerHTML = \"Tunnels\";\n                        div.appendChild(labelTunnel);\n                        break;\n\n                    case \"bridge\":\n                        var inputBridge = document.createElement(\"input\");\n                        inputBridge.id = this._addUID(\"GPisoExclusionsBridge\");\n                        inputBridge.type = \"checkbox\";\n                        inputBridge.checked = !status;\n                        // gestionnaire d'evenement :\n                        // on stocke l'exclusion,\n                        // utilisation pour la requête sur le service de calcul d'itiniraire\n                        if (inputBridge.addEventListener) {\n                            inputBridge.addEventListener(\"change\", function (e) {\n                                context.onIsoExclusionsChange(e);\n                            });\n                        } else if (inputBridge.attachEvent) {\n                            inputBridge.attachEvent(\"onchange\", function (e) {\n                                context.onIsoExclusionsChange(e);\n                            });\n                        }\n                        // info : internet explorer support\n                        inputBridge.value = \"Bridge\";\n                        div.appendChild(inputBridge);\n\n                        var labelBridge = document.createElement(\"label\");\n                        labelBridge.className = \"GPisoExclusionsOption\";\n                        labelBridge.htmlFor = this._addUID(\"GPisoExclusionsBridge\");\n                        labelBridge.innerHTML = \"Ponts\";\n                        div.appendChild(labelBridge);\n                        break;\n                }\n            }\n        }\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ############################### Submit Form ####################### //\n    // ################################################################### //\n\n    /**\n     * Create Submit Form Element\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoSubmitFormElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPisochronSubmit\");\n        input.className = \"GPinputSubmit\";\n        input.type = \"submit\";\n        input.value = \"Calculer\";\n\n        return input;\n    },\n\n    // ################################################################### //\n    // ############################### Reset picto ####################### //\n    // ################################################################### //\n\n    /**\n     * Create Reset Picto Element\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createIsoFormResetElement : function () {\n        var self = this;\n\n        var divReset = document.createElement(\"div\");\n        divReset.id = this._addUID(\"GPisochronReset\");\n        divReset.title = \"Réinitialiser les paramètres\";\n        divReset.addEventListener(\"click\", function (e) {\n            self.onIsoResetClick(e);\n        });\n\n        return divReset;\n    }\n};\n\nexport default IsoDOM;\n","import L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport Gp from \"geoportal-access-lib\";\nimport RightManagement from \"../../Common/Utils/CheckRightManagement\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport LocationSelector from \"./LocationSelector\";\nimport IsoDOM from \"../../Common/Controls/IsoDOM\";\n\nvar logger = Logger.getLogger(\"Isocurve\");\n\n/**\n * @classdesc\n *\n * Leaflet Control Class to compute and display Isochrone or isodistances curves.\n *\n * Use {@link module:Controls.Isocurve L.geoportalControl.Isocurve()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#control\" target=\"_blank\">L.Control</a> native class.\n *\n * @namespace\n * @alias L.geoportalControl.Isocurve\n */\nvar Isocurve = L.Control.extend(/** @lends L.geoportalControl.Isocurve.prototype */ {\n\n    includes : IsoDOM,\n\n    /**\n     * Options du service\n     *\n     * @private\n     */\n    options : {\n        position : \"topleft\",\n        collapsed : true, // plier !\n        methods : [\"time\", \"distance\"],\n        graphs : [\"Voiture\", \"Pieton\"],\n        exclusions : {\n            toll : false,\n            tunnel : false,\n            bridge : false\n        },\n        directions : [\"departure\", \"arrival\"],\n        disableReverse : false,\n        isocurveOptions : {},\n        autocompleteOptions : {}\n    },\n\n    /**\n     * @constructor Isocurve\n     *\n     * @private\n     * @param {Object} options - Isocurve control options\n     * @param {String}   [options.apiKey] - API key for services call (isocurve and autocomplete services), mandatory if autoconf service has not been charged in advance\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Boolean} [options.collapsed = true] - Specify if widget has to be collapsed (true) or not (false) on map loading. Default is true.\n     * @param {Object}  [options.exclusions = {\"toll\" : false, \"tunnel\" : false, \"bridge\" : false}] - list of exclusions with status (true = checked), by default : [\"toll\":false, \"tunnel\":false, \"bridge\":false].\n     * @param {Array}   [options.graphs = [\"Voiture\", \"Pieton\"]] - list of graph resources to be used for isocurve calculation, by default : [\"Voiture\", \"Pieton\"]. The first element is selected.\n     * @param {Array}   [options.methods = [\"time\", \"distance\"]] - list of methods, by default : [\"time\", \"distance\"]. The first element is selected by default.\n     * @param {Array}   [options.directions = [\"departure\", \"arrival\"]] - list of directions to be displayed, by default : [\"departure\", \"arrival\"]. The first element is selected by default.\n     *      Directions enable to specify if input location point will be used as a departure point (\"departure\") or as an arrival point (\"arrival\")\n     * @param {Boolean} [options.disableReverse = false] - whether to enable/disable the reverse geocoding\n     * @param {Object} [options.isocurveOptions = {}] - isocurve service options.\n     * @param {Object} [options.autocompleteOptions = {}] - autocomplete service options.\n     * @example\n     *  var iso = L.geoportalControl.Isocurve({\n     *      collapsed : false\n     *      methods : [\"time\", \"distance\"],\n     *      exclusions : {\n     *         toll : true,\n     *         bridge : false,\n     *         tunnel : true\n     *      },\n     *      graphs : [\"Pieton\", \"Voiture\"],\n     *      isocurveOptions : {},\n     *      autocompleteOptions : {}\n     *  });\n     */\n    initialize : function (options) {\n        // on transmet les options au controle\n        L.Util.setOptions(this, options);\n\n        /** uuid */\n        this._uid = ID.generate();\n\n        /** detection du support : desktop ou tactile */\n        this._isDesktop = this._detectSupport();\n\n        /** detection si le panneau est reduit */\n        // on desactive l'impl. reduction de la fenetre\n        // this._reducePanel = false;\n\n        /** container principaux */\n        this._waitingContainer = null;\n        this._showContainer = null;\n        this._pictoContainer = null;\n        this._formContainer = null;\n        this._submitContainer = null;\n\n        /** Mode de transport selectionné : 'Voiture' ou 'Pieton' */\n        this._currentTransport = null;\n\n        /** Sens du parcours selectionné : 'Départ' ou 'Arrivée' */\n        this._currentDirection = null;\n\n        /** Type d'isochrone et valeur selectionné : 'isochrone' ou 'distance' */\n        this._currentComputation = null;\n        this._currentTimeHour = 0;\n        this._currentTimeMinute = 0;\n        this._currentDistance = 0;\n\n        /** Exclusions selectionnées : Tunnel, Toll et Bridge */\n        this._currentExclusions = [];\n\n        // initialisation\n        this._initTransport();\n        this._initComputation();\n        this._initDirection();\n        this._initExclusions();\n\n        /** le point */\n        this._currentPoint = null;\n\n        /** la geometrie de l'isochrone */\n        this._geojsonIso = null;\n\n        /** si un calcul est en cours ou non */\n        this._waiting = false;\n        /** timer pour cacher la patience après un certain temps */\n        this._timer = null;\n\n        /**\n         * reponse du service\n         * Ex. {\n         *   totalTime, totalDistance, bbox, routeGeometry,\n         *   routeInstructions : [{duration, distance, code, instruction, bbox, geometry}]\n         * }\n         */\n        this._currentIsoResults = null;\n\n        /**\n         * liste des ressources avec droits par service\n         * Ex. {\n         *   \"IsoChrone\" : {\n         *       key : \"ger4g456re45er456t4er5ge5\",\n         *       resources : [\"Pieton\", \"Voiture\"]\n         *   }\n         * }\n         */\n        this._resources = {};\n\n        /** aucun droits sur les ressources */\n        this._noRightManagement = false;\n\n        // gestion des droits sur les ressources/services\n        this._checkRightsManagement();\n    },\n\n    /**\n     * this method is called by this.addTo(map) when the control is added on the map\n     * and fills variable 'this._container = this.onAdd(map)',\n     * and create or disable events on map.\n     * @param {L.Map} map - object map\n     * @returns {DOMElement} container\n     * @private\n     */\n    onAdd : function (map) {\n        // initialisation du DOM du composant\n        var container = this._container = this._initLayout(map);\n\n        // deactivate of events that may interfere with the map\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        return container;\n    },\n\n    /**\n     * TODO this method is called when the control is removed from the map\n     * and removes events on map.\n     *\n     * @private\n     */\n    onRemove : function (/* map */) { },\n\n    // ################################################################### //\n    // ####################### init application ########################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initTransport : function () {\n        // Mode de transport selectionné\n        this._currentTransport = \"Voiture\"; // par defaut\n\n        // par defaut\n        var transport = this.options.graphs;\n        if (!transport || transport.length === 0) {\n            this.options.graphs = [\"Voiture\", \"Pieton\"];\n        }\n\n        // option\n        if (L.Util.isArray(transport) && transport.length) {\n            // FIXME pb si le 1er graphe n'est pas une ressource connue !\n            if (transport[0] === \"Voiture\" || transport[0] === \"Pieton\") {\n                this._currentTransport = transport[0];\n            }\n        }\n\n        // option sur le service\n        var serviceOptions = this.options.isocurveOptions;\n        if (serviceOptions.graph) {\n            this._currentTransport = serviceOptions.graph;\n        }\n    },\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initDirection : function () {\n        this._currentDirection = \"departure\"; // par defaut\n\n        // par defaut\n        var directions = this.options.directions;\n        if (!directions || directions.length === 0) {\n            this.options.directions = [\"departure\", \"arrival\"];\n        }\n\n        // option\n        if (L.Util.isArray(directions) && directions.length) {\n            // FIXME pb si le 1er graphe n'est pas une ressource connue !\n            if (directions[0] === \"departure\" || directions[0] === \"arrival\") {\n                this._currentDirection = directions[0];\n            }\n        }\n\n        // si l'utilisateur a spécifié une méthode dans le service, on surcharge les options du widget\n        var serviceOptions = this.options.isocurveOptions;\n        if (!serviceOptions.reverse) {\n            this._currentDirection = \"departure\";\n        }\n        if (serviceOptions.reverse === true) {\n            this._currentDirection = \"arrival\";\n            this.options.directions = [\"arrival\", \"departure\"];\n        }\n    },\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initComputation : function () {\n        // Mode de calcul selectionné\n        this._currentComputation = \"time\"; // par defaut\n\n        // par defaut\n        var methods = this.options.methods;\n        if (!methods || methods.length === 0) {\n            this.options.methods = [\"time\", \"distance\"];\n        }\n\n        // option\n        if (L.Util.isArray(methods) && methods.length) {\n            // FIXME pb si le 1er graphe n'est pas une ressource connue !\n            if (methods[0] === \"time\" || methods[0] === \"distance\") {\n                this._currentComputation = methods[0];\n            }\n        }\n\n        // si l'utilisateur a spécifié une méthode dans le service, on surcharge les options du widget\n        var serviceOptions = this.options.isocurveOptions;\n        if (serviceOptions.method) {\n            this._currentComputation = serviceOptions.method;\n        }\n        if (serviceOptions.time) {\n            this._currentComputation = \"time\";\n        }\n        if (serviceOptions.distance) {\n            this._currentComputation = \"distance\";\n        }\n    },\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initExclusions : function () {\n        // Exclusions selectionnées : Tunnel, Toll et Bridge\n        this._currentExclusions = []; // par defaut\n\n        // par defaut\n        var exclusion = this.options.exclusions;\n        if (!exclusion || (typeof exclusion === \"object\" && Object.keys(exclusion).length === 0)) {\n            this.options.exclusions = {\n                toll : false,\n                tunnel : false,\n                bridge : false\n            };\n        }\n\n        // option\n        if (exclusion && typeof exclusion === \"object\" && Object.keys(exclusion).length) {\n            for (var k in exclusion) {\n                if (exclusion.hasOwnProperty(k)) {\n                    if (exclusion.k) {\n                        this._currentExclusions.push(k);\n                    }\n                }\n            }\n        }\n\n        // si l'utilisateur a spécifié des exclusions dans le service, on surcharge les options du widget\n        var serviceOptions = this.options.isocurveOptions;\n        if (Array.isArray(serviceOptions.exclusions)) {\n            this._currentExclusions = serviceOptions.exclusions;\n        }\n    },\n\n    // ################################################################### //\n    // ############################## other init ######################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by constructor\n     * and check the rights to resources\n     *\n     * @private\n     */\n    _checkRightsManagement : function () {\n        var _opts = null;\n        var _res = [];\n        var _key = null;\n\n        // les ressources du service du calcul d'isochrone\n        _key = this.options.isocurveOptions.apiKey;\n        _opts = this.options.isocurveOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = [\"Voiture\", \"Pieton\"];\n        }\n\n        var rightManagementIsochrone = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"Isochrone\"]\n        });\n        logger.log(\"rightManagementIsochrone\", rightManagementIsochrone);\n\n        // les ressources du service d'autocompletion\n        _key = this.options.autocompleteOptions.apiKey;\n        _opts = this.options.autocompleteOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = [\n                \"PositionOfInterest\",\n                \"StreetAddress\"\n            ];\n        }\n\n        var rightManagementAutoComplete = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"AutoCompletion\"]\n        });\n        logger.log(\"rightManagementAutoComplete\", rightManagementAutoComplete);\n\n        // au cas où pas de droit !\n        if (!rightManagementIsochrone && !rightManagementAutoComplete) {\n            this._noRightManagement = true;\n        }\n\n        // FIXME je reconstruis differement la structure pour la gestion des clefs differentes\n        // pour chaque service...\n        if (rightManagementAutoComplete) {\n            this._resources[\"AutoCompletion\"] = {};\n            this._resources[\"AutoCompletion\"][\"resources\"] = rightManagementAutoComplete[\"AutoCompletion\"];\n            this._resources[\"AutoCompletion\"][\"key\"] = rightManagementAutoComplete[\"key\"];\n        }\n\n        if (rightManagementIsochrone) {\n            this._resources[\"Isochrone\"] = {};\n            this._resources[\"Isochrone\"][\"resources\"] = rightManagementIsochrone[\"Isochrone\"];\n            this._resources[\"Isochrone\"][\"key\"] = rightManagementIsochrone[\"key\"];\n        }\n    },\n\n    /**\n     * this method is called by the constructor.\n     * this information is useful to switch to touch mode.\n     * Detection : test for desktop or tactile\n     * @returns {Boolean} desktop or tactile\n     * @private\n     */\n    _detectSupport : function () {\n        // TODO\n        // Choix de gérer la détection dans le code du composant au lieu du DOM car :\n        // Utilisation de l'implémentation Leaflet\n        // http://leafletjs.com/reference.html#browser\n\n        var isDesktop = true;\n        var userAgent = window.navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf(\"iphone\") !== -1 ||\n            userAgent.indexOf(\"ipod\") !== -1 ||\n            userAgent.indexOf(\"ipad\") !== -1 ||\n            userAgent.indexOf(\"android\") !== -1 ||\n            userAgent.indexOf(\"mobile\") !== -1 ||\n            userAgent.indexOf(\"blackberry\") !== -1 ||\n            userAgent.indexOf(\"tablet\") !== -1 ||\n            userAgent.indexOf(\"phone\") !== -1 ||\n            userAgent.indexOf(\"touch\") !== -1) {\n            isDesktop = false;\n        }\n\n        if (userAgent.indexOf(\"msie\") !== -1 ||\n            userAgent.indexOf(\"trident\") !== -1) {\n            isDesktop = true;\n        }\n\n        return isDesktop;\n    },\n\n    // ################################################################### //\n    // ########################### init dom ############################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd(map)\n     * and initialize the container HTMLElement\n     * @param {L.Map} map - object map\n     * @returns {DOMElement} container\n     * @private\n     */\n    _initLayout : function (map) {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var inputShow = this._showContainer = this._createShowIsoElement();\n        container.appendChild(inputShow);\n\n        // mode \"collapsed\"\n        if (!this.options.collapsed) {\n            inputShow.checked = true;\n        }\n\n        var picto = this._pictoContainer = this._createShowIsoPictoElement();\n        container.appendChild(picto);\n\n        // panneau\n        var panel = this._createIsoPanelElement();\n\n        // header\n        var header = this._createIsoPanelHeaderElement();\n        panel.appendChild(header);\n\n        // form\n        var form = this._formContainer = this._createIsoPanelFormElement();\n\n        // form: menu des points\n        var point = this._createIsoPanelFormPointElement(map);\n        form.appendChild(point);\n\n        // form: menu du choix de la méthode de calcul (time ou distance)\n        var isoChronChecked = false;\n        var isoDistChecked = false;\n        var typeChoice = this._createIsoPanelFormTypeChoiceElement();\n        for (var i = 0; i < this.options.methods.length; i++) {\n            if (this.options.methods[i] === \"time\") {\n                isoChronChecked = (i === 0);\n                typeChoice.appendChild(this._createIsoPanelFormTypeChoiceChronElement(isoChronChecked));\n            }\n            if (this.options.methods[i] === \"distance\") {\n                isoDistChecked = (i === 0);\n                typeChoice.appendChild(this._createIsoPanelFormTypeChoiceDistElement(isoDistChecked));\n            }\n        }\n        form.appendChild(typeChoice);\n\n        // form: menu du choix des valeurs\n        form.appendChild(this._createIsoPanelFormValueIsochronElement(isoChronChecked));\n        form.appendChild(this._createIsoPanelFormValueIsodistanceElement(isoDistChecked));\n\n        // form: menu du choix du transport et du sens du parcours\n        var modeChoice = this._createIsoPanelFormModeChoiceElement();\n        modeChoice.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs));\n        modeChoice.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions));\n        form.appendChild(modeChoice);\n\n        // form: menu des exclusions\n        if (this.options.exclusions && (typeof this.options.exclusions === \"object\") && (Object.keys(this.options.exclusions).length !== 0)) {\n            form.appendChild(this._createShowIsoExclusionsElement());\n            form.appendChild(this._createShowIsoExclusionsPictoElement());\n            var exclusion = this._createIsoPanelFormExclusionsElement();\n            exclusion.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions));\n            form.appendChild(exclusion);\n        }\n\n        var divReset = this._createIsoFormResetElement();\n        form.appendChild(divReset);\n\n        // form: bouton du calcul\n        var submit = this._submitContainer = this._createIsoSubmitFormElement();\n        form.appendChild(submit);\n\n        panel.appendChild(form);\n\n        // waiting\n        var waiting = this._waitingContainer = this._createIsoWaitingElement();\n        panel.appendChild(waiting);\n\n        container.appendChild(panel);\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ############################## DOM ################################ //\n    // ################################################################### //\n\n    /**\n     * Create a Point\n     * OVERWRITTEN\n     * @param {L.Map} map - object map\n     * @returns {Object} DOM element\n     * @private\n     */\n    _createIsoPanelFormPointElement : function (map) {\n        // point de depart\n        this._currentPoint = new LocationSelector({\n            apiKey : this.options.apiKey || null,\n            tag : {\n                id : 0,\n                unique : this._uid,\n                label : \"Départ\",\n                color : \"red\",\n                display : true\n            },\n            displayInfo : true,\n            disableReverse : this.options.disableReverse,\n            autocompleteOptions : this.options.autocompleteOptions || null\n        });\n        this._currentPoint.setMap(map);\n\n        return this._currentPoint.getContainer();\n    },\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on 'GPshowIsochronPicto' picto\n     * (cf. this._createShowIsoPictoElement),\n     * and clear inputs and previous isochrone drawings\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onShowIsoPanelClick : function (e) {\n        logger.log(\"onShowIsoPanelClick\", e);\n        // on desactive l'impl. reduction de la fenetre\n        // if (this._geojsonIso && !this._reducePanel) {\n        //     this._clear();\n        // }\n        // this._reducePanel = false;\n    },\n\n    /**\n     * this method is called by event 'click' on '' arrow button\n     * (cf. this.),\n     * and clear inputs and previous isochrone drawings\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoResetClick : function (e) {\n        logger.log(\"onIsoResetClick\", e);\n\n        this._clear();\n    },\n\n    // // on desactive l'impl. reduction de la fenetre\n    // /**\n    // * this method is called by event 'click' on 'GPisochronPanelReduce' picto\n    // * (cf. this.),\n    // * and reduce the panel\n    // *\n    // * @private\n    // */\n    // onReduceIsoPanelClick : function () {\n    //     logger.log(\"onReduceIsoPanelClick\");\n    //     this._reducePanel = true;\n    // },\n\n    /**\n     * this method is called by event 'change' on 'GPisochronChoiceAltDist' or 'GPisochronChoiceAltChron'\n     * input (cf. this._createIsoPanelFormTypeChoiceElement),\n     * and updates current computation mode\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoTypeChoiceChange : function (e) {\n        var value = e.target.value;\n\n        if (!value) {\n            return;\n        }\n\n        if (value === \"isodistance\") {\n            this._currentComputation = \"distance\";\n        }\n        if (value === \"isochron\") {\n            this._currentComputation = \"time\";\n        }\n    },\n\n    /**\n     * this method is called by event 'click' on 'GPisochronTransportPedestrian' or 'GPisochronTransportCar'\n     * input (cf. this._createIsoPanelFormModeChoiceTransportElement),\n     * and updates current transport mode\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoModeTransportChange : function (e) {\n        var value = e.target.value;\n\n        if (!value) {\n            return;\n        }\n        this._currentTransport = value;\n    },\n\n    /**\n     * this method is called by event 'change' on 'GPisochronDirectionSelect' select\n     * (cf. this._createIsoPanelFormModeChoiceDirectionElement),\n     * and updates current direction mode\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoModeDirectionChange : function (e) {\n        var value = e.target.value;\n\n        if (!value) {\n            return;\n        }\n\n        this._currentDirection = value;\n    },\n\n    /**\n     * this method is called by event 'change' on ''\n     * input (cf. this.),\n     * and updates current time value\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoValueChronTimeHourChange : function (e) {\n        var value = e.target.value;\n\n        // pointer to...\n        this._timeHourContainer = e.target;\n\n        if (!value) {\n            return;\n        }\n\n        this._currentTimeHour = value;\n    },\n\n    /**\n     * this method is called by event 'change' on ''\n     * input (cf. this.),\n     * and updates current time value\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoValueChronTimeMinuteChange : function (e) {\n        var value = e.target.value;\n\n        // pointer to...\n        this._timeMinuteContainer = e.target;\n\n        if (!value) {\n            return;\n        }\n\n        this._currentTimeMinute = value;\n    },\n\n    /**\n     * this method is called by event 'change' on ''\n     * input (cf. this.),\n     * and updates current distance value\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoValueDistChange : function (e) {\n        var value = e.target.value;\n\n        // pointer to...\n        this._distanceContainer = e.target;\n\n        if (!value) {\n            return;\n        }\n\n        this._currentDistance = value;\n    },\n\n    /**\n     * this method is called by event 'change' on 'GPIsoExclusionsToll'\n     * or 'GPIsoeExclusionsTunnel' or 'GPIsoExclusionsBridge' tag input\n     * (cf. this._createIsoPanelFormExclusionOptionsElement).\n     * this value is saved as a parameter for the service isocurve.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onIsoExclusionsChange : function (e) {\n        var value = e.target.value;\n        var checked = e.target.checked;\n        if (!value) {\n            return;\n        }\n\n        var bFound = false;\n        var iFound = null;\n        for (var i = 0; i < this._currentExclusions.length; i++) {\n            if (deepEqual(this._currentExclusions[i], value.toLowerCase())) {\n                iFound = i;\n                bFound = true;\n            }\n        }\n        // on l'ajoute si la valeur n'existe pas et est selectionnée\n        if (!bFound && !checked) {\n            this._currentExclusions.push(value.toLowerCase());\n        }\n        // on la retire si la valeur existe et est deselectionnée\n        if (bFound && checked) {\n            this._currentExclusions.splice(iFound, 1);\n        }\n    },\n\n    /**\n     * this method is called by event 'submit' on 'GPisochronForm' tag form\n     * (cf. this._createIsoPanelFormElement),\n     * and call isocurve service to display results\n     *\n     * @private\n     */\n    onIsoComputationSubmit : function () {\n        if (!this._currentPoint || !this._currentPoint.getCoordinate || !this._currentPoint.getCoordinate()) {\n            return;\n        }\n\n        // récupération du temps\n        var time;\n        if (this._currentComputation.toLowerCase() === \"time\") {\n            // durée exprimée en secondes\n            time = this._currentTimeHour * 3600 + this._currentTimeMinute * 60;\n            logger.log(\"time : \", time);\n        }\n\n        // récupération de la distance\n        var distance;\n        if (this._currentComputation.toLowerCase() === \"distance\") {\n            // distance exprimée en mètres\n            distance = this._currentDistance * 1000;\n            logger.log(\"distance : \", distance);\n        }\n\n        // si on n'a pas de valeur de calcul renseignée, on ne lance pas la requête.\n        if (!time && !distance) {\n            logger.log(\"Missing time or distance parameter\");\n            return;\n        }\n\n        // oups, aucun droits !\n        // on evite donc une requête inutile ...\n        if (this._noRightManagement) {\n            return;\n        }\n\n        // mise en place de la patience\n        this._displayWaitingContainer();\n\n        var self = this;\n\n        this._requestIsoCurve({\n            position : self._currentPoint.getCoordinate(),\n            graph : self._currentTransport,\n            exclusions : self._currentExclusions,\n            method : self._currentComputation,\n            reverse : (self._currentDirection.toLowerCase() === \"arrival\"),\n            time : time,\n            distance : distance,\n            smoothing : true,\n            timeout : 7000,\n            protocol : \"XHR\",\n\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(results);\n                if (results) {\n                    self._drawIsoResults(results);\n                }\n            },\n\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME mise à jour du controle mais le service ne repond pas en 200 !?\n                self._hideWaitingContainer();\n\n                self._clearIsoResultsGeometry();\n                logger.log(error.message);\n            }\n        });\n    },\n\n    // ################################################################### //\n    // ######################## isocurve calculation ##################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onIsoComputationSubmit\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     *\n     * @private\n     */\n    _requestIsoCurve : function (settings) {\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings ||\n            ((typeof settings === \"object\") && (Object.keys(settings).length === 0))) {\n            return;\n        }\n\n        // on ne fait pas de requête si on n'a pas de point d'origine\n        if (!settings.position) {\n            return;\n        }\n\n        // ni si on n'a aucun droit\n        if (this._noRightManagement) {\n            return;\n        }\n\n        // gestion des droits !\n        var services = this._resources[\"Isochrone\"];\n        if (!services) {\n            return;\n        }\n        var resources = services.resources;\n        if (!resources ||\n            (typeof resources === \"object\" && Object.keys(resources).length === 0)) {\n            return;\n        }\n\n        var options = {};\n        // on recupere les parametres de saisie et les callbacks\n        L.Util.extend(options, settings);\n        // ainsi que les options du service\n        L.Util.extend(options, this.options.isocurveOptions);\n\n        // la ressource donne elle des droits ?\n        var bFound = false;\n        for (var i = 0; i < resources.length; i++) {\n            if (resources[i] === options.graph) {\n                bFound = true;\n            }\n        }\n        // on fait quoi ?\n        if (!bFound) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        var key = this._resources[\"Isochrone\"][\"key\"];\n        options.apiKey = this.options.isocurveOptions.apiKey || this.options.apiKey || key;\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        options.ssl = this.options.ssl;\n\n        logger.log(options);\n\n        Gp.Services.isoCurve(options);\n    },\n\n    /**\n     * this method is called by this.onIsoComputationSubmit (in case of success)\n     * and draw isocurve results geometry on map\n     *\n     * @param {Object} results - isocurve response results\n     *\n     * @private\n     */\n    _drawIsoResults : function (results) {\n        this._clearIsoResultsGeometry();\n\n        // sauvegarde de l'etat des resultats\n        this._currentIsoResults = results;\n\n        if (!results.geometry) {\n            // cache la patience\n            this._hideWaitingContainer();\n            return;\n        }\n\n        var map = this._map;\n\n        var _geometry = results.geometry;\n\n        var _style = {\n            color : \"#ff7800\",\n            weight : 5,\n            opacity : 0.65\n        };\n\n        this._geojsonIso = L.geoJson(_geometry, {\n            style : _style\n        }).addTo(map);\n\n        // cache la patience\n        this._hideWaitingContainer();\n        this._formContainer.className = \"GPisochroComponentHidden\";\n    },\n\n    // ################################################################### //\n    // ############################# Clean ############################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onShowIsoPanelClick()\n     * and it clears all elements (reinit).\n     *\n     * @private\n     */\n    _clear : function () {\n        this._initTransport();\n        this._initExclusions();\n        this._initComputation();\n        this._initDirection();\n\n        // resultats du service\n        this._currentIsoResults = null;\n\n        // la geometrie\n        this._clearIsoResultsGeometry();\n\n        // les points\n        this._currentPoint.clear();\n\n        // nettoyer les valeurs dans le DOM !\n        if (this._timeHourContainer) {\n            this._timeHourContainer.value = 0;\n        }\n        if (this._timeMinuteContainer) {\n            this._timeMinuteContainer.value = 0;\n        }\n        if (this._distanceContainer) {\n            this._distanceContainer.value = 0;\n        }\n    },\n\n    /**\n     * this method is called by this.onIsoComputationSubmit()\n     * and it clears all route geometries.\n     *\n     * @private\n     */\n    _clearIsoResultsGeometry : function () {\n        var map = this._map;\n\n        if (this._geojsonIso != null) {\n            map.removeLayer(this._geojsonIso);\n            this._geojsonIso = null;\n        }\n    },\n\n    // ################################################################### //\n    // ############################ Patience ############################# //\n    // ################################################################### //\n\n    /**\n     * this method displays waiting container and sets a timeout\n     *\n     * @private\n     */\n    _displayWaitingContainer : function () {\n        this._waitingContainer.className = \"GPisochronCalcWaitingContainerVisible\";\n        this._waiting = true;\n\n        // mise en place d'un timeout pour réinitialiser le panel (cacher la patience)\n        // si on est toujours en attente (si la requête est bloquée par exemple)\n        if (this._timer) {\n            clearTimeout(this._timer);\n            this._timer = null;\n        }\n        var context = this;\n        this._timer = setTimeout(function () {\n            if (context._waiting === true) {\n                context._hideWaitingContainer();\n            } else {\n                if (context._timer) {\n                    clearTimeout(context._timer);\n                }\n            }\n        }, 16000);\n    },\n\n    /**\n     * this method hides waiting container and clears timeout\n     *\n     * @private\n     */\n    _hideWaitingContainer : function () {\n        if (this._waiting) {\n            this._waitingContainer.className = \"GPisochronCalcWaitingContainerHidden\";\n            this._waiting = false;\n            clearTimeout(this._timer);\n            this._timer = null;\n        }\n    },\n\n    // ################################################################### //\n    // ###### METHODES PUBLIQUES (INTERFACE AVEC LE CONTROLE) ############ //\n    // ################################################################### //\n\n    /**\n     * This method is public.\n     * It allows to control the execution of a traitment.\n     *\n     * @param {Object} position - position = {lon: , lat: }\n     * @param {Object} value - distance en km ou heures-minutes\n     * @param {Object} options - options = {...}\n     */\n    compute : function (position, value, options) {\n        if (!this._showContainer.checked) {\n            this._pictoContainer.click();\n        }\n\n        var map = this._map;\n        if (!map) {\n            return;\n        }\n\n        // Les options par defauts\n        var settings = {\n            direction : \"departure\",\n            method : \"time\",\n            transport : \"Voiture\",\n            exclusions : []\n        };\n\n        // On recupere les options\n        L.Util.extend(settings, options);\n\n        this._currentPoint.setCoordinate(position);\n        var input = L.DomUtil.get(\"GPlocationOrigin_\" + 0 + \"-\" + this._uid);\n        input.value = position.lng + \" , \" + position.lat;\n\n        this._currentTransport = settings.transport;\n        if (settings.transport === \"Voiture\") {\n            L.DomUtil.get(\"GPisochronTransportCar-\" + this._uid).checked = true;\n        } else {\n            L.DomUtil.get(\"GPisochronTransportPedestrian-\" + this._uid).checked = true;\n        }\n\n        this._currentExclusions = settings.exclusions;\n\n        this._currentComputation = settings.method;\n        if (settings.method === \"time\") {\n            var time = value.split(\".\");\n            this._currentTimeHour = time[0] || 0;\n            L.DomUtil.get(\"GPisochronValueChronInput1-\" + this._uid).value = this._currentTimeHour;\n            this._currentTimeMinute = time[1] || 0;\n            L.DomUtil.get(\"GPisochronValueChronInput2-\" + this._uid).value = this._currentTimeMinute;\n            L.DomUtil.get(\"GPisochronChoiceAltChron-\" + this._uid).click();\n        } else {\n            this._currentDistance = value;\n            L.DomUtil.get(\"GPisochronValueDistInput-\" + this._uid).value = this._currentDistance;\n            L.DomUtil.get(\"GPisochronChoiceAltDist-\" + this._uid).click();\n        }\n\n        this._currentDirection = settings.direction;\n        (settings.direction === \"departure\")\n            ? L.DomUtil.get(\"GPisochronDirectionSelect-\" + this._uid).selectedIndex = 0 : L.DomUtil.get(\"GPisochronDirectionSelect-\" + this._uid).selectedIndex = 1;\n\n        this.onIsoComputationSubmit();\n\n        map.flyTo(position);\n    }\n\n});\n\nexport default Isocurve;\n\nconst deepEqual = function (x, y) {\n    if (x === y) {\n        return true;\n    } else if ((typeof x === \"object\" && x != null) && (typeof y === \"object\" && y != null)) {\n        if (Object.keys(x).length !== Object.keys(y).length) {\n            return false;\n        }\n\n        for (var prop in x) {\n            if (y.hasOwnProperty(prop)) {\n                if (!deepEqual(x[prop], y[prop])) {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n};\n","/**\n* @module MathUtils\n* @alias Gp.MathUtils\n* @description\n* ...\n*\n* @example\n* modulo();\n* decimalToDMS();\n* toInteger();\n* isInteger();\n* toFloat();\n*/\nvar MathUtils = {\n    /**\n     * Reste de la division euclidienne\n     * @param {Number} a - divisor\n     * @param {Number} b - quotient\n     * @returns {Number} Modulo\n     */\n    modulo : function (a, b) {\n        var r = a % b;\n        return r * b < 0 ? r + b : r;\n    },\n\n    /**\n     * Transform degrees, minutes, seconds form decimal degrees -\n     * Largely inspired by the private function degreesToStringHDMS from ol/coordinate.js\n     *\n     * @param {Number} degrees - decimal degrees\n     * @param {Array} hemispheres - \"NS\" ou \"EO\"\n     * @param {Number} numDigits - number of digits for seconds\n     * @returns {Object} DMS coordinate\n     */\n    decimalToDMS : function (degrees, hemispheres, numDigits) {\n        var normalizedDegrees = this.modulo(degrees + 180, 360) - 180;\n        var x = Math.abs(3600 * normalizedDegrees);\n        var dflPrecision = numDigits || 0;\n        var precision = Math.pow(10, dflPrecision);\n\n        var deg = Math.floor(x / 3600);\n        var min = Math.floor((x - deg * 3600) / 60);\n        var sec = x - (deg * 3600) - (min * 60);\n        sec = Math.ceil(sec * precision) / precision;\n\n        if (sec >= 60) {\n            sec = 0;\n            min += 1;\n        }\n\n        if (min >= 60) {\n            min = 0;\n            deg += 1;\n        }\n\n        var direction = hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0);\n        return {\n            d : deg,\n            m : min,\n            s : sec,\n            direction : direction\n        };\n    },\n\n    /**\n     * Converts string to Integer\n     *\n     * @param {String} s - string number\n     * @param {Numeric} base - between 2 and 36\n     * @returns {null|Numeric} result\n     */\n    toInteger : function (s, base) {\n        var _base = base || 10;\n        var n = parseInt(s, _base);\n        if (!isNaN(n) && isFinite(n)) {\n            return n;\n        }\n        return null;\n    },\n\n    /**\n     * check if s represents an integer\n     *\n     * @param {String} s - string number\n     * @returns {Boolean} is integer\n     */\n    isInteger : function (s) {\n        if (isNaN(s)) {\n            return false;\n        }\n\n        var v = parseFloat(s);\n        return ((v | 0) === v);\n    },\n\n    /**\n     * Converts s to float\n     *\n     * @param {String} s - string number\n     * @returns {null|Numeric} result\n     */\n    toFloat : function (s) {\n        var n = parseFloat(s);\n        if (!isNaN(n) && isFinite(n)) {\n            return n;\n        }\n        return null;\n    }\n};\n\nexport default MathUtils;\n","var MousePositionDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPmousePosition\");\n        container.className = \"GPwidget\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################### Methods of main container ##################### //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowMousePositionElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowMousePosition\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Show mouse position control\n     * @param {Boolean} isDesktop - specifies if the support is desktop or tactile\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowMousePositionPictoElement : function (isDesktop) {\n        // contexte d'execution\n        var self = this;\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowMousePositionPicto\");\n        label.className = \"GPshowAdvancedToolPicto\";\n        label.htmlFor = this._addUID(\"GPshowMousePosition\");\n        label.title = \"Afficher les coordonnées du curseur\";\n\n        // FIXME detection disponible dans le JS !\n        // Detection : test for desktop or tactile\n        // var isDesktop = true;\n        // var userAgent = window.navigator.userAgent.toLowerCase();\n        // if (userAgent.indexOf(\"iphone\") !== -1 ||\n        // userAgent.indexOf(\"ipod\") !== -1 ||\n        // userAgent.indexOf(\"ipad\") !== -1 ||\n        // userAgent.indexOf(\"android\") !== -1 ||\n        // userAgent.indexOf(\"mobile\") !== -1 ||\n        // userAgent.indexOf(\"blackberry\") !== -1 ||\n        // userAgent.indexOf(\"tablet\") !== -1 ||\n        // userAgent.indexOf(\"phone\") !== -1 ||\n        // userAgent.indexOf(\"touch\") !== -1 ) {\n        //     isDesktop = false;\n        // }\n        // if (userAgent.indexOf(\"msie\") !== -1 ||\n        // userAgent.indexOf(\"trident\") !== -1) {\n        //     isDesktop = true;\n        // }\n\n        // Show map center localisation if panel opened and tactile support\n        label.addEventListener(\"click\", function (e) {\n            var mapCenterClass = \"\";\n            if (!document.getElementById(self._addUID(\"GPshowMousePosition\")).checked && !isDesktop) {\n                mapCenterClass = \"GPmapCenterVisible\";\n            }\n            document.getElementById(\"GPmapCenter\").className = mapCenterClass;\n            self.onShowMousePositionClick(e);\n        });\n\n        var spanOpen = document.createElement(\"span\");\n        spanOpen.id = this._addUID(\"GPshowMousePositionOpen\");\n        spanOpen.className = \"GPshowAdvancedToolOpen\";\n        label.appendChild(spanOpen);\n\n        return label;\n    },\n\n    /**\n     * mouse position panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMousePositionPanelElement : function () {\n        var panel = document.createElement(\"div\");\n        panel.id = this._addUID(\"GPmousePositionPanel\");\n        panel.className = \"GPpanel\";\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createMousePositionPanelHeaderElement());\n        // div.appendChild(this._createMousePositionPanelBasicElement());\n        // div.appendChild(this._createShowMousePositionSettingsElement());\n        // div.appendChild(this._createMousePositionSettingsElement());\n\n        return panel;\n    },\n\n    /**\n     * Map center localisation (tactile use)\n     *\n     * @returns {DOMElement} container\n     */\n    _createMapCenter : function () {\n        var div = document.createElement(\"div\");\n        div.id = \"GPmapCenter\";\n        div.className = \"\";\n        return div;\n    },\n\n    // ################################################################### //\n    // ####################### Panel container ########################### //\n    // ################################################################### //\n\n    /**\n     * @returns {DOMElement} container\n     */\n    _createMousePositionPanelHeaderElement : function () {\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader\";\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle\";\n        divTitle.innerHTML = \"Coordonnées\";\n        container.appendChild(divTitle);\n\n        var divClose = document.createElement(\"div\");\n        divClose.id = \"GPmousePositionPanelClose\";\n        divClose.className = \"GPpanelClose\";\n        divClose.title = \"Fermer le panneau\";\n\n        // Link panel close / visibility checkbox\n        var self = this;\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowMousePositionPicto\")).click();\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowMousePositionPicto\")).click();\n            });\n        }\n\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * coordinate panel\n     * @param {Boolean} [displayAltitude] - specifies if the altitude panel must be displayed\n     * @param {Boolean} [displayCoordinates] - specifies if the coordinates panel must be displayed\n     * @param {Boolean} [editCoordinates] - specifies if the coordinates edition is allowed\n     * @param {Boolean} [currentProjectionUnits] - specifies if the current projection units\n     *\n     * FIXME\n     * call this._createMousePositionPanelBasicCoordinateElement\n     * call this._createMousePositionPanelBasicAltitudeElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMousePositionPanelBasicElement : function (displayAltitude, displayCoordinates, editCoordinates, currentProjectionUnits) {\n        // default Values\n        displayAltitude = (typeof displayAltitude === \"undefined\") ? true : displayAltitude;\n        displayCoordinates = (typeof displayCoordinates === \"undefined\") ? true : displayCoordinates;\n        editCoordinates = (typeof editCoordinates === \"undefined\") ? false : editCoordinates;\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPmousePositionBasicPanel\");\n\n        // FIXME on devrait decomposer la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        container.appendChild(this._createMousePositionPanelBasicCoordinateElement(displayCoordinates, editCoordinates, currentProjectionUnits));\n        container.appendChild(this._createMousePositionPanelEditToolsElement(editCoordinates));\n        container.appendChild(this._createMousePositionPanelBasicAltitudeElement(displayAltitude));\n\n        return container;\n    },\n\n    /**\n     * create coordinate elements\n     *\n     * @param {String} coordType - (\"Lon\" ou \"Lat\")\n     * @param {Boolean} [editCoordinates=false] - specifies if the coordinates edition is allowed\n     *\n     * @returns {Array} list of DOM elements\n     */\n    _createCoordinateElement : function (coordType, editCoordinates) {\n        var context = this;\n\n        if ([\"Lon\", \"Lat\"].indexOf(coordType) === -1) {\n            return [];\n        }\n\n        var list = [];\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPmousePosition\" + coordType);\n        input.title = editCoordinates === true ? \"Cliquer pour saisir des coordonnées\" : \"\";\n        input.readOnly = true;\n\n        if (editCoordinates) {\n            input.addEventListener(\"click\", function () {\n                context.onMousePositionEditModeClick(true);\n            });\n            input.addEventListener(\"change\", function (e) {\n                this.classList.remove(\"error\");\n                var valid = context.validateExtentCoordinate(coordType, this.value, e);\n                valid ? this.classList.remove(\"error\") : this.classList.add(\"error\");\n            });\n        }\n        list.push(input);\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPmousePositionUnits\";\n        list.push(span);\n\n        return list;\n    },\n\n    /**\n     *\n     * @param {String} coordType - (\"Lon\" ou \"Lat\")\n     * @param {Boolean} [editCoordinates=false] - specifies if the coordinates edition is allowed\n     *\n     * @returns {Array} list of DOM elements\n     */\n    _createDMSCoordinateElement : function (coordType, editCoordinates) {\n        if ([\"Lon\", \"Lat\"].indexOf(coordType) === -1) {\n            return [];\n        }\n\n        var context = this;\n\n        var list = [];\n\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPmousePosition\" + coordType + \"Degrees\");\n        input.className = \"GPSexagesimal\";\n        input.setAttribute(\"name\", \"degrees\");\n        input.title = editCoordinates === true ? \"Cliquer pour saisir des coordonnées\" : \"\";\n        input.readOnly = true;\n        input.dataset.min = 0;\n        input.dataset.max = (coordType === \"Lon\") ? 180 : 90;\n        if (editCoordinates) {\n            input.addEventListener(\"click\", function () {\n                context.onMousePositionEditModeClick(true);\n            });\n            input.addEventListener(\"change\", function () {\n                this.classList.remove(\"error\");\n                var valid = context._checkDMSDegrees(coordType, this);\n                valid ? this.classList.remove(\"error\") : this.classList.add(\"error\");\n            });\n        }\n        list.push(input);\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPmousePositionSexagesimalLabel\";\n        span.innerHTML = \"°\";\n        list.push(span);\n\n        var input1 = document.createElement(\"input\");\n        input1.id = this._addUID(\"GPmousePosition\" + coordType + \"Minutes\");\n        input1.className = \"GPSexagesimal\";\n        input1.setAttribute(\"name\", \"minutes\");\n        input1.title = editCoordinates === true ? \"Cliquer pour saisir des coordonnées\" : \"\";\n        input1.readOnly = true;\n        input1.dataset.min = 0;\n        input1.dataset.max = 59;\n        if (editCoordinates) {\n            input1.addEventListener(\"click\", function () {\n                context.onMousePositionEditModeClick(true);\n            });\n            input1.addEventListener(\"change\", function () {\n                this.classList.remove(\"error\");\n                var valid = context._checkDMSElement(this);\n                valid ? this.classList.remove(\"error\") : this.classList.add(\"error\");\n            });\n        }\n        list.push(input1);\n\n        var span1 = document.createElement(\"span\");\n        span1.className = \"GPmousePositionSexagesimalLabel\";\n        span1.innerHTML = \"'\";\n        list.push(span1);\n\n        var input2 = document.createElement(\"input\");\n        input2.id = this._addUID(\"GPmousePosition\" + coordType + \"Seconds\");\n        input2.className = \"GPSexagesimalsec\";\n        input2.setAttribute(\"name\", \"seconds\");\n        input2.title = editCoordinates === true ? \"Cliquer pour saisir des coordonnées\" : \"\";\n        input2.readOnly = true;\n        input2.dataset.min = 0;\n        input2.dataset.max = 59;\n        if (editCoordinates) {\n            input2.addEventListener(\"click\", function () {\n                context.onMousePositionEditModeClick(true);\n            });\n            input2.addEventListener(\"change\", function () {\n                this.classList.remove(\"error\");\n                var valid = context._checkDMSElement(this, true);\n                valid ? this.classList.remove(\"error\") : this.classList.add(\"error\");\n            });\n        }\n        list.push(input2);\n\n        var span2 = document.createElement(\"span\");\n        span2.className = \"GPmousePositionSexagesimalLabel\";\n        span2.innerHTML = \"''\";\n        list.push(span2);\n\n        var select = document.createElement(\"select\");\n        select.id = this._addUID(\"GPmousePosition\" + coordType + \"Direction\");\n        select.className = \"GPmousePositionDirection\";\n        select.setAttribute(\"name\", \"direction\");\n        select.disabled = true;\n\n        var option = document.createElement(\"option\");\n        option.value = (coordType === \"Lon\") ? \"E\" : \"N\";\n        option.innerHTML = (coordType === \"Lon\") ? \"E\" : \"N\";\n        select.appendChild(option);\n\n        var option1 = document.createElement(\"option\");\n        option1.value = (coordType === \"Lon\") ? \"O\" : \"S\";\n        option1.innerHTML = (coordType === \"Lon\") ? \"O\" : \"S\";\n        select.appendChild(option1);\n        list.push(select);\n\n        return list;\n    },\n\n    /**\n     * @param {Boolean} [display=false] - specifies if the coordinates panel must be displayed\n     * @param {Boolean} [editCoordinates] - specifies if the coordinates edition is allowed\n     * @param {Boolean} [currentProjectionUnits] - specifies if the current projection units\n     *\n     * @returns {DOMElement} container\n     */\n    _createMousePositionPanelBasicCoordinateElement : function (display, editCoordinates, currentProjectionUnits) {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPmousePositionCoordinate\");\n        div.style.display = display ? \"block\" : \"none\";\n\n        // latitude\n        var divLat = document.createElement(\"div\");\n\n        var spanLat = document.createElement(\"span\");\n        spanLat.className = \"GPmousePositionLabel\";\n        spanLat.id = this._addUID(\"GPmousePositionLatLabel\");\n        spanLat.innerHTML = \"Latitude : \";\n        divLat.appendChild(spanLat);\n\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPmousePositionLatCoordinate\");\n\n        var arrayCoords;\n        if (currentProjectionUnits === \"DMS\") {\n            arrayCoords = this._createDMSCoordinateElement(\"Lat\", editCoordinates);\n        } else {\n            arrayCoords = this._createCoordinateElement(\"Lat\", editCoordinates);\n        }\n        for (var i = 0; i < arrayCoords.length; i++) {\n            span.appendChild(arrayCoords[i]);\n        }\n        divLat.appendChild(span);\n        div.appendChild(divLat);\n\n        // longitude\n        var divLon = document.createElement(\"div\");\n\n        var spanLon = document.createElement(\"span\");\n        spanLon.className = \"GPmousePositionLabel\";\n        spanLon.id = this._addUID(\"GPmousePositionLonLabel\");\n        spanLon.innerHTML = \"Longitude : \";\n        divLon.appendChild(spanLon);\n\n        var span1 = document.createElement(\"span\");\n        span1.id = this._addUID(\"GPmousePositionLonCoordinate\");\n\n        var arrayCoords1;\n        if (currentProjectionUnits === \"DMS\") {\n            arrayCoords1 = this._createDMSCoordinateElement(\"Lon\", editCoordinates);\n        } else {\n            arrayCoords1 = this._createCoordinateElement(\"Lon\", editCoordinates);\n        }\n        for (var j = 0; j < arrayCoords1.length; j++) {\n            span1.appendChild(arrayCoords1[j]);\n        }\n        divLon.appendChild(span1);\n        div.appendChild(divLon);\n\n        return div;\n    },\n\n    /**\n     * @param {Boolean} [display=false] - specifies if the altitude panel must be displayed\n     *\n     * @returns {DOMElement} container\n     */\n    _createMousePositionPanelBasicAltitudeElement : function (display) {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPmousePositionAltitude\");\n        div.style.display = display ? \"block\" : \"none\";\n\n        var spanLabel = document.createElement(\"span\");\n        spanLabel.className = \"GPmousePositionLabel\";\n        spanLabel.innerHTML = \"Altitude : \";\n        div.appendChild(spanLabel);\n\n        var spanAlt = document.createElement(\"span\");\n        spanAlt.className = \"GPmousePositionCoords\";\n        spanAlt.id = this._addUID(\"GPmousePositionAlt\");\n        spanAlt.innerHTML = \"...\";\n        div.appendChild(spanAlt);\n\n        var spanUnits = document.createElement(\"span\");\n        spanUnits.className = \"GPmousePositionAltitudeUnits\";\n        spanUnits.innerHTML = \"m\";\n        div.appendChild(spanUnits);\n\n        return div;\n    },\n\n    /**\n     * @param {Boolean} [editCoordinates=false] - specifies if the coordinates edition is allowed\n     *\n     * @returns {DOMElement} container\n     */\n    _createMousePositionPanelEditToolsElement : function (editCoordinates) {\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPmousePositionPanelEditTools\";\n        div.id = this._addUID(\"GPmousePositionPanelEditTools\");\n        if (!editCoordinates) {\n            div.style.display = \"none\";\n        }\n\n        var span1 = document.createElement(\"span\");\n        span1.className = \"GPmousePositionEditTool\";\n        span1.id = this._addUID(\"GPmousePositionLocate\");\n        span1.title = editCoordinates === true ? \"Cliquer pour saisir des coordonnées\" : \"\";\n        if (editCoordinates) {\n            span1.addEventListener(\"click\", function () {\n                context.onMousePositionEditModeLocateClick();\n            });\n        }\n        div.appendChild(span1);\n\n        var span2 = document.createElement(\"span\");\n        span2.className = \"GPmousePositionEditTool\";\n        span2.id = this._addUID(\"GPmousePositionCloseEdit\");\n        span2.title = \"Quitter la saisie des coordonnées\";\n        span2.style.display = \"none\";\n        if (editCoordinates) {\n            span2.addEventListener(\"click\", function () {\n                context.onMousePositionEditModeClick(false);\n            });\n        }\n        div.appendChild(span2);\n\n        return div;\n    },\n\n    // ################################################################### //\n    // #################### Settings container ########################### //\n    // ################################################################### //\n\n    /**\n     * @param {Boolean} [display=false] - specifies if the settings panel must be displayed\n     *\n     * @returns {DOMElement[]} array containing input and label elements\n     */\n    _createShowMousePositionSettingsElement : function (display) {\n        var list = [];\n\n        var context = this;\n\n        var input = document.createElement(\"input\");\n        input.type = \"checkbox\";\n        input.id = this._addUID(\"GPshowMousePositionSettings\");\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowMousePositionSettingsPicto\");\n        label.htmlFor = this._addUID(\"GPshowMousePositionSettings\");\n        label.title = \"Réglages\";\n        label.className = \"GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto\"; // FIXME classname and id ?\n        label.style.display = display ? \"block\" : \"none\";\n        if (label.addEventListener) {\n            label.addEventListener(\"click\", function (e) {\n                if (typeof context.onShowMousePositionSettingsClick === \"function\") {\n                    context.onShowMousePositionSettingsClick(e);\n                }\n            }, false);\n        } else if (label.attachEvent) {\n            label.attachEvent(\"onclick\", function (e) {\n                if (typeof context.onShowMousePositionSettingsClick === \"function\") {\n                    context.onShowMousePositionSettingsClick(e);\n                }\n            });\n        }\n\n        list.push(input);\n        list.push(label);\n\n        return list;\n    },\n\n    /**\n     * settings panel\n     * @param {Boolean} [display=true] - specifies if the settings panel must be displayed\n     *\n     * FIXME\n     * don't call this._createMousePositionSettingsSystemsElement\n     * don't call this._createMousePositionSettingsUnitsElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMousePositionSettingsElement : function (display) {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPmousePositionSettings\");\n        container.style.display = (display === undefined || display) ? \"block\" : \"none\";\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPmousePositionSettingsLabel\";\n        span.innerHTML = \"Système de référence\";\n        container.appendChild(span);\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // FIXME tableau statique !\n        // var systems = [\n        //     {\n        //         code : \"GEOGRAPHIC\",\n        //         label : \"Géographique\"\n        //     },\n        //     {\n        //         code : \"MERCATOR\",\n        //         label : \"Mercator\"\n        //     },\n        //     {\n        //         code : \"LAMB93\",\n        //         label : \"Lambert 93\"\n        //     },\n        //     {\n        //         code : \"LAMB2E\",\n        //         label : \"Lambert II étendu\"\n        //     }\n        // ];\n        //\n        // var selectSystem = this._createMousePositionSettingsSystemsElement(systems);\n        //\n        // container.appendChild(selectSystem);\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // FIXME tableau statique !\n        // var units = [\n        //     {\n        //         code : \"DEC\",\n        //         label : \"degrés décimaux\",\n        //     },\n        //     {\n        //         code : \"DMS\",\n        //         label : \"degrés sexagésimaux\",\n        //     },\n        //     {\n        //         code : \"RAD\",\n        //         label : \"radians\",\n        //     },\n        //     {\n        //         code : \"GON\",\n        //         label : \"grades\"\n        //     }\n        // ];\n        //\n        // var selectUnits = this._createMousePositionSettingsUnitsElement(units);\n        //\n        // container.appendChild(selectUnits);\n\n        return container;\n    },\n\n    /**\n     * @param {Object[]} systems - list of systems\n     *\n     * @returns {DOMElement} DOM element select\n     */\n    _createMousePositionSettingsSystemsElement : function (systems) {\n        // contexte d'execution\n        var context = this;\n\n        var selectSystem = document.createElement(\"select\");\n        selectSystem.id = this._addUID(\"GPmousePositionProjectionSystem\");\n        selectSystem.className = \"GPinputSelect GPmousePositionSettingsSelect\";\n        selectSystem.addEventListener(\"change\", function (e) {\n            context.onMousePositionProjectionSystemChange(e);\n        });\n        selectSystem.addEventListener(\"mouseover\", function (e) {\n            // FIXME mettre une condition si target === option\n            if (e.target.nodeName !== \"OPTION\") {\n                context.onMousePositionProjectionSystemMouseOver(e);\n            }\n        });\n\n        for (var i = 0; i < systems.length; i++) {\n            var obj = systems[i];\n            var option = document.createElement(\"option\");\n            option.value = obj.code;\n            option.text = obj.label || i;\n            // option.label = obj.label;\n            selectSystem.appendChild(option);\n        }\n\n        return selectSystem;\n    },\n\n    /**\n     * @param {Object[]} units - list of units\n     *\n     * @returns {DOMElement} DOM element select\n     */\n    _createMousePositionSettingsUnitsElement : function (units) {\n        // contexte d'execution\n        var context = this;\n\n        var selectUnits = document.createElement(\"select\");\n        selectUnits.id = this._addUID(\"GPmousePositionProjectionUnits\");\n        selectUnits.className = \"GPinputSelect GPmousePositionSettingsSelect\";\n        selectUnits.addEventListener(\"change\", function (e) {\n            context.onMousePositionProjectionUnitsChange(e);\n        });\n\n        for (var j = 0; j < units.length; j++) {\n            var obj = units[j];\n            var option = document.createElement(\"option\");\n            option.value = (obj.code) ? obj.code : j;\n            option.text = obj.label || j;\n            // option.label = obj.label;\n            selectUnits.appendChild(option);\n        }\n\n        return selectUnits;\n    },\n\n    /**\n     * @param {String} [currentProjectionType=\"Metric\"] - \"Geographical\" or \"Metric\"\n     */\n    _resetLabelElements : function (currentProjectionType) {\n        // Changement des labels dans le formulaire de saisie\n        var spanLat = document.getElementById(this._addUID(\"GPmousePositionLatLabel\"));\n        spanLat.innerHTML = currentProjectionType === \"Geographical\" ? \"Latitude :\" : \"X :\";\n\n        var spanLon = document.getElementById(this._addUID(\"GPmousePositionLonLabel\"));\n        spanLon.innerHTML = currentProjectionType === \"Geographical\" ? \"Longitude :\" : \"Y :\";\n    },\n\n    /**\n     * @param {String} currentProjectionUnits - projection units\n     */\n    _resetUnitElements : function (currentProjectionUnits) {\n        var value = \"\";\n        if (currentProjectionUnits === \"M\" || currentProjectionUnits === \"KM\") {\n            value = currentProjectionUnits.toLowerCase();\n        }\n\n        var elts = document.getElementsByClassName(\"GPmousePositionUnits\");\n        for (var e = 0; e < elts.length; e++) {\n            elts[e].innerHTML = value;\n        }\n    },\n\n    /**\n     * @param {Boolean} editCoordinates - edit coordinates option\n     * @param {String} currentProjectionType - current projection type\n     * @param {String} currentProjectionUnits - current projection unit\n     */\n    _resetCoordinateElements : function (editCoordinates, currentProjectionType, currentProjectionUnits) {\n        // Suppression de tous les enfants de GPmousePositionLatCoordinate\n        var latElt = document.getElementById(this._addUID(\"GPmousePositionLatCoordinate\"));\n        while (latElt.firstChild) {\n            latElt.removeChild(latElt.firstChild);\n        }\n\n        var arrayCoords;\n        if (currentProjectionUnits === \"DMS\") {\n            arrayCoords = this._createDMSCoordinateElement(\"Lat\", editCoordinates);\n        } else {\n            arrayCoords = this._createCoordinateElement(\"Lat\", editCoordinates);\n        }\n        for (var i = 0; i < arrayCoords.length; i++) {\n            latElt.appendChild(arrayCoords[i]);\n        }\n\n        // Suppression de tous les enfants de GPmousePositionLonCoordinate\n        var lonElt = document.getElementById(this._addUID(\"GPmousePositionLonCoordinate\"));\n        while (lonElt.firstChild) {\n            lonElt.removeChild(lonElt.firstChild);\n        }\n\n        var arrayCoords1;\n        if (currentProjectionUnits === \"DMS\") {\n            arrayCoords1 = this._createDMSCoordinateElement(\"Lon\", editCoordinates);\n        } else {\n            arrayCoords1 = this._createCoordinateElement(\"Lon\", editCoordinates);\n        }\n        for (var j = 0; j < arrayCoords1.length; j++) {\n            lonElt.appendChild(arrayCoords1[j]);\n        }\n\n        // FIXME on simule un deplacement ?\n        // this.onMapMove();\n    },\n\n    /**\n     * Set/unset editing mode\n     *\n     * @param {Boolean} editing - active edit coordinates mode\n     */\n    _setEditMode : function (editing) {\n        var locateElt = document.getElementById(this._addUID(\"GPmousePositionLocate\"));\n        locateElt.title = editing ? \"Aller à la position ...\" : \"Cliquer pour saisir des coordonnées\";\n\n        var closeEditElt = document.getElementById(this._addUID(\"GPmousePositionCloseEdit\"));\n        closeEditElt.style.display = editing ? \"inline-block\" : \"none\";\n\n        var selector = \"div[id^=\" + this._addUID(\"GPmousePositionCoordinate\") + \"]\";\n        var inputs = document.querySelectorAll(selector + \" input\");\n        for (var i = 0; i < inputs.length; i++) {\n            inputs[i].readOnly = !editing;\n            if (editing) {\n                inputs[i].value = \"\";\n                inputs[i].classList.remove(\"error\");\n            }\n        }\n        var selects = document.querySelectorAll(selector + \" select\");\n        for (var j = 0; j < selects.length; j++) {\n            selects[j].disabled = !editing;\n        }\n    },\n\n    /**\n     *\n     * @param {DOMElement} input - input element\n     * @param {Boolean} isFloat - check for float value\n     *\n     * @returns {Boolean} true if input value is within bounds\n     */\n    _checkDMSElement : function (input, isFloat) {\n        var b = isFloat !== undefined;\n\n        var value = input.value;\n        if (b) {\n            value = value.replace(\",\", \".\");\n        }\n        if (isNaN(value)) {\n            return false;\n        }\n\n        var v = parseFloat(value);\n        if (!b && (v | 0) !== v) { // is it an integer\n            return false;\n        }\n\n        var min = Number(input.dataset.min);\n        var max = Number(input.dataset.max);\n        return (v >= min && v <= max);\n    },\n\n    /**\n     * @param {String} coordType - \"Lon\" or \"Lat\"\n     * @param {DOMElement} input - input element\n     *\n     * @returns {Boolean} true if input value is within bounds\n     */\n    _checkDMSDegrees : function (coordType, input) {\n        if (isNaN(input.value)) {\n            return false;\n        }\n\n        var v = parseFloat(input.value);\n        if ((v | 0) !== v) { // is it an integer\n            return false;\n        }\n\n        var min = Number(input.dataset.min);\n        var max = Number(input.dataset.max);\n        if (v < min || v > max) {\n            return false;\n        }\n\n        var inputMinutes = document.getElementById(this._addUID(\"GPmousePosition\" + coordType + \"Minutes\"));\n        var inputSeconds = document.getElementById(this._addUID(\"GPmousePosition\" + coordType + \"Seconds\"));\n\n        if (v >= max) {\n            inputMinutes.dataset.max = 0;\n            inputSeconds.dataset.max = 0;\n        } else {\n            inputMinutes.dataset.max = 59;\n            inputSeconds.dataset.max = 59.9999;\n        }\n\n        return true;\n    },\n\n    // ################################################################### //\n    // ####################### handlers Event ############################ //\n    // ################################################################### //\n\n    /**\n     * Function displaying coordinates from cursor position (desktop)\n     * or map center (tactile)\n     * @param {Object} coordinate - coordinates\n     */\n    GPdisplayCoords : function (coordinate) {\n        // Compute coords in case of cursor position (desktop)\n        if (coordinate) {\n            var labelLon = document.getElementById(this._addUID(\"GPmousePositionLonLabel\"));\n            var labelLat = document.getElementById(this._addUID(\"GPmousePositionLatLabel\"));\n\n            if (coordinate.x || coordinate.y) {\n                labelLat.innerHTML = \"X : \";\n                labelLon.innerHTML = \"Y : \";\n            } else if (coordinate.e || coordinate.n) {\n                labelLat.innerHTML = \"E : \";\n                labelLon.innerHTML = \"N : \";\n            } else {\n                labelLat.innerHTML = \"Latitude : \";\n                labelLon.innerHTML = \"Longitude : \";\n            }\n\n            if (typeof coordinate.lat === \"object\" && typeof coordinate.lng === \"object\") {\n                var parts = {\n                    lng : \"Lon\",\n                    lat : \"Lat\"\n                };\n                var units = [\"Degrees\", \"Minutes\", \"Seconds\"];\n                for (var p in parts) {\n                    for (var u = 0; u < units.length; ++u) {\n                        var selector = \"GPmousePosition\" + parts[p] + units[u];\n                        var elt = document.getElementById(this._addUID(selector));\n                        var key = units[u].charAt(0).toLowerCase();\n                        elt.value = coordinate[p][key];\n                    }\n                }\n                // directions\n                document.getElementById(this._addUID(\"GPmousePositionLonDirection\")).value = coordinate.lng.direction;\n                document.getElementById(this._addUID(\"GPmousePositionLatDirection\")).value = coordinate.lat.direction;\n            } else {\n                var elLat = document.getElementById(this._addUID(\"GPmousePositionLat\"));\n                var elLon = document.getElementById(this._addUID(\"GPmousePositionLon\"));\n\n                elLat.value = coordinate.x || coordinate.lat || coordinate.e || \"0\";\n                elLon.value = coordinate.y || coordinate.lng || coordinate.lon || coordinate.n || \"0\";\n\n                // les unites\n                var unit = (coordinate.unit === undefined) ? \"\" : coordinate.unit;\n                var elements = document.getElementsByClassName(\"GPmousePositionUnits\");\n                for (var n = 0; n < elements.length; ++n) {\n                    elements[n].innerHTML = unit;\n                }\n            }\n        }\n    },\n\n    /**\n     * Function displaying altitude from cursor position (desktop)\n     * or map center (tactile)\n     * @param {Object} coordinate - coordinates\n     * @param {Number} altitudeTimeoutDelay - when the mouse stop moving, delay before the altitude request is launched\n     * @param {Number} noDataValue - the no data value\n     * @param {Number} noDataValueTolerance - the no data value tolerance\n     */\n    GPdisplayElevation : function (coordinate, altitudeTimeoutDelay, noDataValue, noDataValueTolerance) {\n        // contexte d'execution\n        var self = this;\n\n        // Latency for altitude request\n        var altitudeTimeout;\n        if (!altitudeTimeoutDelay) {\n            altitudeTimeoutDelay = 500;\n        }\n\n        clearTimeout(altitudeTimeout);\n        document.getElementById(this._addUID(\"GPmousePositionAlt\")).innerHTML = \"...\";\n\n        if (noDataValue == null) {\n            noDataValue = -99999;\n        }\n        if (noDataValueTolerance == null) {\n            noDataValueTolerance = 99980;\n        }\n        var maxThreshold = noDataValue + noDataValueTolerance;\n        var minThreshold = noDataValue - noDataValueTolerance;\n\n        // Compute coords in case of cursor position (desktop)\n        if (coordinate) {\n            // If no altitude panel, don't call altitude request\n            if (document.getElementById(this._addUID(\"GPmousePositionAltitude\"))) {\n                altitudeTimeout = setTimeout(function () {\n                    self.onRequestAltitude(coordinate, function (z) {\n                        if (minThreshold < z && z < maxThreshold) {\n                            self.GPresetElevation();\n                        } else {\n                            document.getElementById(self._addUID(\"GPmousePositionAlt\")).innerHTML = z;\n                        }\n                    });\n                }, altitudeTimeoutDelay);\n            }\n        }\n    },\n\n    /**\n     * Function reseting altitude value\n     */\n    GPresetElevation : function () {\n        if (document.getElementById(this._addUID(\"GPmousePositionAltitude\"))) {\n            document.getElementById(this._addUID(\"GPmousePositionAlt\")).innerHTML = \"---\";\n        }\n    }\n};\n\nexport default MousePositionDOM;\n","/**\n * @private\n * @description\n * Register definition for IGNF, and EPSG CRS.\n * @example\n * Gp.Register.IGNF.AMST63\n *   // return : \"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\"\n * Gp.Register.get(\"IGNF:AMST63\")\n *   // same as Gp.Register.IGNF.AMST63\n */\nvar Register = {\n\n    /**\n     * instance already loaded into proj4\n     */\n    isLoaded : false,\n\n    /**\n     * get the definition for a code\n     *\n     * @param {String} name - ie. EPSG:2154 (Lambert)\n     * @returns {Object} definition\n     * @example\n     * Register.get(\"EPSG:2154\");\n     * // \"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 ...\"\n     */\n    get : function (name) {\n        if (name === \"\" || name === null || typeof name === \"undefined\") {\n            return;\n        }\n\n        var s = name.split(\":\");\n        if (s.length !== 2) {\n            return;\n        }\n\n        var _register = s[0];\n        var _code = s[1];\n\n        if (!this.hasOwnProperty(_register)) {\n            return;\n        }\n\n        if (!this[_register].hasOwnProperty(_code)) {\n            return;\n        }\n\n        return this[_register][_code];\n    },\n\n    /**\n     *  does projection code exist ?\n     *\n     * @param {String} name - ie. EPSG:2154 (Lambert)\n     * @returns {Boolean} true/false\n     * @example\n     * Register.exist(\"EPSG:2154\"); // true\n     */\n    exist : function (name) {\n        if (name === \"\" || name === null || typeof name === \"undefined\") {\n            return false;\n        }\n\n        var s = name.split(\":\");\n        if (s.length !== 2) {\n            return false;\n        }\n\n        var _register = s[0];\n        var _code = s[1];\n\n        if (!this.hasOwnProperty(_register)) {\n            return false;\n        }\n\n        if (!this[_register].hasOwnProperty(_code)) {\n            return false;\n        }\n\n        return true;\n    },\n\n    /**\n     * load all defs to proj4\n     * @param {Object} Proj4 - proj4 instance\n     */\n    load : function (Proj4) {\n        // un flag pour savoir si le chargement est déjà realisé\n        // (car ceci peut être couteux !)\n        if (!this.isLoaded) {\n            var registers = [\n                \"IGNF\", // exception lors du register IGNF ?\n                \"EPSG\",\n                \"CRS\"\n            ];\n            for (var i = 0; i < registers.length; i++) {\n                var _register = registers[i];\n                var codes = this[_register];\n                for (var _code in codes) {\n                    if (codes.hasOwnProperty(_code)) {\n                        var name = _register + \":\" + _code;\n                        Proj4.defs(name, this.get(name));\n                        // on enlève la dependance à OpenLayers...\n                        // la fonction register est donc à appeller afin d'enregistrer\n                        // les definitions dans OpenLayers :\n                        //  import { get } from \"ol/proj\";\n                        //  import proj4 from \"proj4\";\n                        //  import { register } from \"ol/proj/proj4\";\n                        //      Register.load();\n                        //      // Make projections defined in proj4 (with proj4.defs()) available in OpenLayers.\n                        //      // see ol/proj/proj4.register (https://openlayers.org/en/latest/apidoc/module-ol_proj_proj4.html)\n                        //      register(proj4);\n                        //      console.log(get(\"CRS:84\").getCode()); // \"CRS:84\"\n                    }\n                }\n            }\n            this.isLoaded = true;\n        }\n    },\n\n    /**\n     * load defs by default to proj4\n     *\n     * include into proj4 :\n     * - WGS84\n     * - ['EPSG:4326']\n     * - ['EPSG:3785'], ['EPSG:3857'], GOOGLE, ['EPSG:900913'], ['EPSG:102113']\n     * +\n     * - [\"EPSG:2154\"], [\"EPSG:27571\"],  [\"EPSG:27572\"],  [\"EPSG:27573\"],  [\"EPSG:2757\"],\n     * - [\"CRS:84\"],\n     * - [\"IGNF:LAMB93\"],\n     * - [\"IGNF:LAMBE\"], [\"IGNF:LAMB1\"],  [\"IGNF:LAMB2\"],  [\"IGNF:LAMB3\"],  [\"IGNF:LAMB4\"],\n     * - [\"IGNF:RGF93G\"],\n     * - [\"IGNF:WGS84G\"]\n     *\n     * @param {Object} Proj4 - proj4 instance\n     */\n    loadByDefault : function (Proj4) {\n        // la liste de projections par defaut...\n        var registers = {\n            EPSG : {\n                2154 : Register[\"EPSG\"][\"2154\"],\n                27571 : Register[\"EPSG\"][\"27571\"],\n                27572 : Register[\"EPSG\"][\"27572\"],\n                27573 : Register[\"EPSG\"][\"27573\"],\n                27574 : Register[\"EPSG\"][\"27574\"]\n            },\n            CRS : {\n                84 : Register[\"CRS\"][\"84\"]\n            },\n            IGNF : {\n                LAMB93 : Register[\"IGNF\"][\"LAMB93\"],\n                LAMBE : Register[\"IGNF\"][\"LAMBE\"],\n                LAMB1 : Register[\"IGNF\"][\"LAMB1\"],\n                LAMB2 : Register[\"IGNF\"][\"LAMB2\"],\n                LAMB3 : Register[\"IGNF\"][\"LAMB3\"],\n                LAMB4 : Register[\"IGNF\"][\"LAMB4\"],\n                RGF93G : Register[\"IGNF\"][\"RGF93G\"],\n                WGS84G : Register[\"IGNF\"][\"WGS84G\"]\n            }\n        };\n\n        for (var register in registers) {\n            if (registers.hasOwnProperty(register)) {\n                var codes = registers[register];\n                for (var code in codes) {\n                    if (codes.hasOwnProperty(code)) {\n                        var name = register + \":\" + code;\n                        Proj4.defs(name, codes[code]);\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * load only a def to proj4\n     * @param {Object} Proj4 - proj4 instance\n     * @param {String} name - ie. EPSG:2154 (Lambert)\n     * @returns {Boolean} true/false\n     */\n    loadByName : function (Proj4, name) {\n        if (!this.exist(name)) {\n            return false;\n        }\n\n        try {\n            Proj4.defs(name, this.get(name));\n        } catch (e) {\n            // FIXME message !?\n            return false;\n        }\n\n        return true;\n    },\n\n    // definitions\n    EPSG : {\n        4978 : \"+proj=geocent +datum=WGS84 +units=m +no_defs \",\n        3857 : \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs\",\n        3785 : \"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs\",\n        4149 : \"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs \",\n        4150 : \"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs \",\n        4151 : \"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4171 : \"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4230 : \"+title=ED50 +proj=longlat +ellps=intl +no_defs \",\n        4235 : \"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs \",\n        4258 : \"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs \",\n        4275 : \"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs \",\n        4322 : \"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs \",\n        4326 : \"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs \",\n        4467 : \"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        4470 : \"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4471 : \"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        4474 : \"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs \",\n        4558 : \"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4559 : \"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        4621 : \"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs \",\n        4622 : \"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs \",\n        4623 : \"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs \",\n        4624 : \"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs \",\n        4625 : \"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs \",\n        4626 : \"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs \",\n        4627 : \"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4628 : \"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs \",\n        4629 : \"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs \",\n        4630 : \"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs \",\n        4632 : \"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs \",\n        4633 : \"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs \",\n        4634 : \"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs \",\n        4637 : \"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs \",\n        4638 : \"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs \",\n        4640 : \"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4641 : \"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs \",\n        4645 : \"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4687 : \"+proj=longlat +ellps=GRS80 +no_defs \",\n        4662 : \"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs \",\n        4689 : \"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs \",\n        4690 : \"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs \",\n        4691 : \"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs \",\n        4692 : \"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs \",\n        4698 : \"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs \",\n        4749 : \"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4750 : \"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs \",\n        4807 : \"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs \",\n        2056 : \"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs \",\n        2154 : \"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2213 : \"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs \",\n        2969 : \"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs \",\n        2970 : \"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs \",\n        2971 : \"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs \",\n        2972 : \"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs \",\n        2973 : \"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs \",\n        2975 : \"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2976 : \"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs \",\n        2977 : \"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs \",\n        2978 : \"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs \",\n        2980 : \"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs \",\n        2981 : \"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        2982 : \"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        2984 : \"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2986 : \"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs\",\n        2987 : \"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs \",\n        2989 : \"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2990 : \"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs \",\n        2995 : \"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        3038 : \"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3039 : \"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3040 : \"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3041 : \"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 3042 : \"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 3043 : \"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 3044 : \"+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3045 : \"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3046 : \"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3047 : \"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3048 : \"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3049 : \"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3050 : \"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3051 : \"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3034 : \"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs \",\n        3035 : \"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs \",\n        3042 : \"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs \",\n        3043 : \"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs \",\n        3044 : \"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs \",\n        25828 : \"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25829 : \"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 25830 : \"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 25831 : \"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 25832 : \"+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25833 : \"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25834 : \"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25835 : \"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25836 : \"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25837 : \"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25838 : \"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3060 : \"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        3163 : \"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3164 : \"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs \",\n        3165 : \"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs \",\n        3166 : \"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs \",\n        3169 : \"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3170 : \"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3171 : \"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3172 : \"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs \",\n        3296 : \"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs \",\n        3297 : \"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs \",\n        3298 : \"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs \",\n        3299 : \"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs \",\n        3302 : \"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs \",\n        3303 : \"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs \",\n        3304 : \"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs \",\n        3305 : \"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs \",\n        3306 : \"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs \",\n        3312 : \"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs \",\n        3313 : \"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs \",\n        3336 : \"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs \",\n        3395 : \"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        3727 : \"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs \",\n        21781 : \"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs \",\n        25830 : \"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs \",\n        25831 : \"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs \",\n        25832 : \"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs \",\n        27561 : \"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27562 : \"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27563 : \"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27564 : \"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27571 : \"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27572 : \"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27573 : \"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27574 : \"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27581 : \"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27582 : \"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27583 : \"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27584 : \"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27591 : \"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27592 : \"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27593 : \"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27594 : \"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        32601 : \"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32602 : \"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32603 : \"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32604 : \"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32605 : \"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32606 : \"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32607 : \"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32608 : \"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32609 : \"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32610 : \"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32611 : \"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32612 : \"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32613 : \"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32614 : \"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32615 : \"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32616 : \"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32617 : \"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32618 : \"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32619 : \"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32620 : \"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32621 : \"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32622 : \"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32623 : \"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32624 : \"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32625 : \"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32626 : \"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32627 : \"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32628 : \"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32629 : \"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32630 : \"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32631 : \"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32632 : \"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32633 : \"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32634 : \"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32635 : \"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32636 : \"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32637 : \"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32638 : \"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32639 : \"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32640 : \"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32641 : \"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32642 : \"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32643 : \"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32644 : \"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32645 : \"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32646 : \"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32647 : \"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32648 : \"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32649 : \"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32650 : \"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32651 : \"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32652 : \"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32653 : \"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32654 : \"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32655 : \"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32656 : \"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32657 : \"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32658 : \"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32659 : \"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32660 : \"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32661 : \"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32662 : \"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32701 : \"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32702 : \"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32703 : \"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32704 : \"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32705 : \"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32706 : \"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32707 : \"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32708 : \"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32709 : \"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32710 : \"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32711 : \"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32712 : \"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32713 : \"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32714 : \"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32715 : \"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32716 : \"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32717 : \"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32718 : \"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32719 : \"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32720 : \"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32721 : \"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32722 : \"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32723 : \"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32724 : \"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32725 : \"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32726 : \"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32727 : \"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32728 : \"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32729 : \"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32730 : \"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32731 : \"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32732 : \"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32733 : \"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32734 : \"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32735 : \"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32736 : \"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32737 : \"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32738 : \"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32739 : \"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32740 : \"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32741 : \"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32742 : \"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32743 : \"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32744 : \"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32745 : \"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32746 : \"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32747 : \"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32748 : \"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32749 : \"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32750 : \"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32751 : \"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32752 : \"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32753 : \"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32754 : \"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32755 : \"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32756 : \"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32757 : \"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32758 : \"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32759 : \"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32760 : \"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32761 : \"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        310024802 : \"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310915814 : \"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310486805 : \"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310700806 : \"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310702807 : \"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310706808 : \"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310547809 : \"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642810 : \"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310032811 : \"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642812 : \"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642801 : \"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642813 : \"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642901 : \"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        5489 : \"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs\",\n        5490 : \"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\"\n    },\n    CRS : {\n        84 : \"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs \"\n    },\n    IGNF : {\n        AMST63 : \"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CROZ63 : \"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CSG67 : \"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        ED50 : \"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        ETRS89 : \"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        GUAD48 : \"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        GUADFM49 : \"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN63 : \"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN72 : \"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        KERG62CAR : \"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MART38 : \"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MAYO50 : \"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MOOREA87 : \"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        NTF : \"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs\",\n        NUKU72 : \"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        REUN47 : \"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        RGF93 : \"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGFG95 : \"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGM04 : \"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGNC : \"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGPF : \"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGR92 : \"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGSPM06 : \"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGTAAF07 : \"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RRAF91 : \"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        STPL69 : \"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        STPM50 : \"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs\",\n        TAHAA : \"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TAHI79 : \"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TERA50 : \"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WALL78 : \"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WGS72 : \"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs\",\n        WGS84 : \"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        AMST63GEO : \"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CROZ63GEO : \"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CSG67GEO : \"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        ED50G : \"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        GUAD48GEO : \"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        GUADFM49GEO : \"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN63GEO : \"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN72GEO : \"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        KERG62GEO : \"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MART38GEO : \"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MAYO50GEO : \"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MOOREA87GEO : \"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        NTFG : \"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs\",\n        NTFP : \"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs\",\n        NUKU72GEO : \"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        REUN47GEO : \"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        RGF93G : \"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGFG95GEO : \"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGM04GEO : \"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGNCGEO : \"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGPFGEO : \"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGR92GEO : \"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGSPM06GEO : \"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGTAAF07G : \"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        STPL69GEO : \"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        STPM50GEO : \"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs\",\n        TAHAAGEO : \"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TAHI79GEO : \"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TERA50G : \"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WALL78GEO : \"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WGS72G : \"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs\",\n        WGS84G : \"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        WGS84RRAFGEO : \"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        XGEO : \"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        AMST63UTM43S : \"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        CROZ63UTM39S : \"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        CSG67UTM21 : \"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        CSG67UTM22 : \"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALANF : \"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALASP : \"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALCRZ : \"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALFXX : \"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALGUF : \"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALKER : \"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALMYT : \"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALNCL : \"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALPYF : \"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALREU : \"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALSPM : \"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALWLF : \"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GUAD48UTM20 : \"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        GUADFM49U20 : \"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        IGN63UTM7S : \"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        IGN72UTM58S : \"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        KERG62UTM42S : \"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        LAMB1 : \"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs\",\n        LAMB1C : \"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs\",\n        LAMB2 : \"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs\",\n        LAMB2C : \"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs\",\n        LAMB3 : \"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs\",\n        LAMB3C : \"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs\",\n        LAMB4 : \"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs\",\n        LAMB4C : \"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs\",\n        LAMB93 : \"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs\",\n        RGF93CC42 : \"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs\",\n        RGF93CC43 : \"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs\",\n        RGF93CC44 : \"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs\",\n        RGF93CC45 : \"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs\",\n        RGF93CC46 : \"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs\",\n        RGF93CC47 : \"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs\",\n        RGF93CC48 : \"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs\",\n        RGF93CC49 : \"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs\",\n        RGF93CC50 : \"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs\",\n        LAMBE : \"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs\",\n        MART38UTM20 : \"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        MAYO50UTM38S : \"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        MILLER : \"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        MOOREA87U6S : \"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        NUKU72U7S : \"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        // REUN47GAUSSL : \"+title=Reunion Gauss Laborde +proj=gstmerc +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-21.116666667 +lon_0=55.533333333 +k_0=1.00000000 +x_0=160000.000 +y_0=50000.000 +units=m +no_defs\",\n        RGM04UTM38S : \"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGNCUTM57S : \"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGNCUTM58S : \"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGNCUTM59S : \"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGPFUTM5S : \"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGPFUTM6S : \"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGPFUTM7S : \"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGR92UTM40S : \"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGSPM06U21 : \"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        STPL69UTM43S : \"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        STPM50UTM21 : \"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        TAHAAUTM05S : \"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        TAHI51UTM06S : \"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        TAHI79UTM6S : \"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        TERA50STEREO : \"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs\",\n        UTM01SW84 : \"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        UTM20W84GUAD : \"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM20W84MART : \"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM22RGFG95 : \"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM39SW84 : \"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        UTM42SW84 : \"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        UTM43SW84 : \"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        WALL78UTM1S : \"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        ETRS89GEO : \"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        ETRS89LAEA : \"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs\",\n        ETRS89LCC : \"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs\",\n        UTM26ETRS89 : \"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM27ETRS89 : \"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM28ETRS89 : \"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM29ETRS89 : \"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM30ETRS89 : \"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM31ETRS89 : \"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM32ETRS89 : \"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM33ETRS89 : \"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM34ETRS89 : \"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM35ETRS89 : \"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM36ETRS89 : \"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM37ETRS89 : \"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM38ETRS89 : \"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\"\n    }\n};\n\nexport default Register;\n","import L from \"leaflet\";\nimport Config from \"../../Common/Utils/Config\";\nimport Register from \"../../Common/Utils/Register\";\n\n/**\n * @classdesc\n *\n * Leaflet Lambert 93 (EPSG:2154) <a href=\"http://leafletjs.com/reference.html#icrs\" target=\"_blank\">ICRS compatible</a> definition.\n *\n * @namespace\n * @alias L.geoportalCRS.EPSG2154\n * @example\n *  var map = L.Map('divmap', {\n *    crs : L.geoportalCRS.EPSG2154\n *  }).setView();\n *  var lyr = L.geoportalLayer.WMTS(\n *    {\n *      layer : \"ORTHOIMAGERY.ORTHOPHOTOS.BDORTHO.L93\"\n *    });\n *\n *  lyr.addTo(map); // ou map.addLayer(lyr);\n */\nvar EPSG2154 = {\n\n    /**\n     * instance\n     *\n     * @private\n     */\n    instance : null,\n\n    /**\n     * execution\n     *\n     * @returns {Object} instance\n     * @private\n     */\n    build : function () {\n        // singleton\n        if (!this.instance) {\n            var crs = new L.Proj.CRS(\"EPSG:2154\",\n                Register.get(\"EPSG:2154\"), {\n                    // FIXME issue de l'autoconf cf. nativeResolutions\n                    resolutions : this._getResolutions(),\n                    origin : this._getOrigin()\n                });\n            this.instance = crs;\n        }\n\n        return this.instance;\n    },\n\n    /**\n     * resolutions\n     *\n     * @returns {Number[]} resolutions\n     * @private\n     */\n    _getResolutions : function () {\n        var resolutions = [];\n        // resolutions issues de l'autoconf\n        if (Config.isConfigLoaded()) {\n            var o = Config.getTileMatrix(\"LAMB93\");\n            resolutions = o.nativeResolutions;\n        }\n\n        if (resolutions.length) {\n            return resolutions;\n        }\n\n        // resolution par defaut\n        return [\n            104579.22454989408,\n            52277.53235379051,\n            26135.487078595408,\n            13066.891381800004,\n            6533.228604113456,\n            3266.5595244626675,\n            1633.2660045974187,\n            816.6295549860224,\n            408.31391467683596,\n            204.15674151090204,\n            102.07831678324082,\n            51.0391448966112,\n            25.519569074269395,\n            12.759783693647506,\n            6.379891635966491,\n            3.18994576530532,\n            1.5949728694977277,\n            0.7974864315474559,\n            0.398743214900604,\n            0.19937160727567999,\n            0.099685803696052,\n            0.049842901818919996\n        ];\n    },\n\n    /**\n     * origine\n     *\n     * @returns {Number[]} origin\n     * @private\n     */\n    _getOrigin : function () {\n        return [0, 12000000];\n    }\n};\n\nexport default EPSG2154;\n","import L from \"leaflet\";\nimport Config from \"../../Common/Utils/Config\";\nimport Register from \"../../Common/Utils/Register\";\n\n/**\n *\n * Projection Lambert 2 étendu\n *\n * @ignore\n * @module EPSG27572\n * @alias EPSG27572\n * @returns {L.Proj.CRS}\n * @example\n *  var map = L.Map('divmap', {\n *    crs : L.geoportalCRS.EPSG27572\n *  }).setView();\n *  var lyr = L.geoportalLayer.WMTS(\n *    {\n *      layer : \"ORTHOIMAGERY.ORTHOPHOTOS.BDORTHO.L93\",\n *      apiKey : \"wqxljfvklsdhvlfkjqfmlq787645\"\n *    },\n *    {\n *      attribution : \"test for layer ORTHOIMAGERY\",\n *      opacity : 1,\n *      transparent : true,\n *      minZoom : 1,\n *      maxZoom : 21\n *      ...\n *    });\n *\n *  lyr.addTo(map); // ou map.addLayer(lyr);\n */\nvar EPSG27572 = {\n\n    /**\n     * instance\n     *\n     * @private\n     */\n    instance : null,\n\n    /**\n     * execution\n     *\n     * @returns {Object} instance\n     * @private\n     */\n    build : function () {\n        // singleton\n        if (!this.instance) {\n            var crs = new L.Proj.CRS(\"EPSG:27572\",\n                Register.get(\"EPSG:27572\"), {\n                    // FIXME issue de l'autoconf cf. nativeResolutions\n                    resolutions : this._getResolutions(),\n                    origin : this._getOrigin()\n                });\n            this.instance = crs;\n        }\n\n        return this.instance;\n    },\n\n    /**\n     * resolutions\n     *\n     * @returns {Number[]} resolutions\n     * @private\n     */\n    _getResolutions : function () {\n        var resolutions = [];\n        // resolutions issues de l'autoconf\n        if (Config.isConfigLoaded()) {\n            var o = Config.getTileMatrix(\"LAMB2E\");\n            if (o && Object.keys(o).length) {\n                resolutions = o.nativeResolutions;\n            }\n        }\n\n        if (resolutions.length) {\n            return resolutions;\n        }\n\n        // FIXME resolution par defaut ???\n        return [\n            104579.22454989408,\n            52277.53235379051,\n            26135.487078595408,\n            13066.891381800004,\n            6533.228604113456,\n            3266.5595244626675,\n            1633.2660045974187,\n            816.6295549860224,\n            408.31391467683596,\n            204.15674151090204,\n            102.07831678324082,\n            51.0391448966112,\n            25.519569074269395,\n            12.759783693647506,\n            6.379891635966491,\n            3.18994576530532,\n            1.5949728694977277,\n            0.7974864315474559,\n            0.398743214900604,\n            0.19937160727567999,\n            0.099685803696052,\n            0.049842901818919996\n        ];\n    },\n\n    /**\n     * origine\n     *\n     * @returns {Number[]} origin\n     * @private\n     */\n    _getOrigin : function () {\n        return [0, 12000000];\n    }\n};\n\nexport default EPSG27572;\n","import L from \"leaflet\";\nimport Config from \"../../Common/Utils/Config\";\nimport Register from \"../../Common/Utils/Register\";\n\n// FIXME prototype\n// il ne fonctionne pas car les bbox ne sont pas bien formatées !?\n//   > BBOX=xmin,ymin,xmax,ymax --> conversion en EPSG --> BBOX=ymin,xmin,ymax,xmax\n// cf. methode L.TileLayer.WMS.getTileUrl()\n//   > inversion des coordonnées si crs = L.CRS.EPSG4326\n// il faudrait donc surcharger cette methode afin qu'elle prenne en compte la condition suivante :\n//   > crs.code = \"EPSG:4326\"\n\n/**\n * Projection Geographic (EPSG:4326)\n * (PROTOTYPE)\n *\n * @ignore\n * @module EPSG4326\n * @alias EPSG4326\n * @returns {L.Proj.CRS}\n * @example\n *  var map = L.Map('divmap', {\n *    crs : L.geoportalCRS.EPSG4326 // ou L.CRS.EPSG4326\n *  }).setView();\n *  var lyr = L.geoportalLayer.WMTS(\n *    {\n *      layer : \"ORTHOIMAGERY.ORTHOPHOTOS.BDORTHO\",\n *      apiKey : \"wqxljfvklsdhvlfkjqfmlq787645\"\n *    },\n *    {\n *      attribution : \"test for layer ORTHOIMAGERY\",\n *      opacity : 1,\n *      transparent : true,\n *      minZoom : 1,\n *      maxZoom : 21\n *      ...\n *    });\n *\n *  lyr.addTo(map); // ou map.addLayer(lyr);\n */\nvar EPSG4326 = {\n\n    /**\n     * instance\n     *\n     * @private\n     */\n    instance : null,\n\n    /**\n     * execution\n     *\n     * @returns {Object} instance\n     * @private\n     */\n    build : function () {\n        // singleton\n        if (!this.instance) {\n            var crs = new L.Proj.CRS(\"EPSG:4326\",\n                Register.get(\"EPSG:4326\"), {\n                    resolutions : this._getResolutions(),\n                    origin : [-180, 90] // ???\n                });\n\n            this.instance = crs;\n        }\n\n        return this.instance;\n    },\n\n    /**\n     * resolutions\n     *\n     * @returns {Number[]} resolutions\n     * @private\n     */\n    _getResolutions : function () {\n        var resolutions = [];\n        // FIXME resolutions issues de l'autoconf\n        // mais pas celle du TMS WGS84G\n\n        if (Config.isConfigLoaded()) {\n            resolutions = Config.getResolutions();\n        }\n\n        if (resolutions.length) {\n            return resolutions;\n        }\n\n        return [\n            1.40625,\n            0.703125,\n            0.3515625,\n            0.17578125,\n            0.087890625,\n            0.0439453125,\n            0.02197265625,\n            0.010986328125,\n            0.0054931640625,\n            0.00274658203125,\n            0.001373291015625,\n            0.0006866455078125,\n            0.00034332275390625,\n            0.000171661376953126,\n            0.0000858306884765628,\n            0.0000429153442382813,\n            0.0000214576721191407,\n            0.0000107288360595703,\n            0.00000536441802978517,\n            0.00000268220901489259,\n            0.0000013411045074463,\n            0.000000670552253723145,\n            0.00000033527612686157\n        ];\n    },\n    /**\n     * origine\n     *\n     * @private\n     */\n    _getOrigin : function () {}\n};\n\nexport default EPSG4326;\n","import Proj4 from \"proj4\";\nimport \"proj4leaflet\";\nimport Register from \"../../Common/Utils/Register\";\nimport Epsg2154 from \"./EPSG2154\";\nimport Epsg27572 from \"./EPSG27572\";\nimport Epsg4326 from \"./EPSG4326\";\n\n/** autoload function */\n(function () {\n    // load all defs into proj4\n    Register.load(Proj4);\n})();\n\n/**\n * CRS (Coordinate Reference Systems) Factory to create <a href=\"http://kartena.github.io/Proj4Leaflet/api/#l-proj-crs\" target=\"_blank\">L.Proj.CRS</a> instances.\n *\n * @module CRS\n * @alias L.geoportalCRS\n * @ignore\n * @example\n *  var map = L.Map('divmap', {\n *    crs : L.geoportalCRS.EPSG2154\n *  }).setView();\n *\n *  var lyr = L.geoportalLayer.WMTS(\n *    {\n *      layer : \"ORTHOIMAGERY.ORTHOPHOTOS.BDORTHO.L93\"\n *    },\n *    {\n *      opacity : 1,\n *      transparent : true,\n *      minZoom : 1,\n *      maxZoom : 21\n *      ...\n *    });\n *\n *  lyr.addTo(map); // ou map.addLayer(lyr);\n */\nvar CRS = {\n\n    /**\n     * Lambert 93 (\"EPSG:2154\") CRS definition to be used with Leaflet.\n     *\n     * @method EPSG2154\n     * @static\n     * @alias L.geoportalCRS.EPSG2154\n     * @returns {EPSG2154} epsg code\n     */\n    EPSG2154 : function () {\n        return Epsg2154.build();\n    },\n\n    /**\n     * CRS : Lambert 2 extened\n     *\n     * @ignore\n     * @method EPSG27572\n     * @alias L.geoportalCRS.EPSG27572\n     * @returns {EPSG27572} epsg code\n     */\n    EPSG27572 : function () {\n        return Epsg27572.build();\n    },\n\n    /**\n     * CRS : EPSG4326\n     *\n     * @ignore\n     * @method EPSG4326\n     * @alias L.geoportalCRS.EPSG4326\n     * @returns {EPSG4326} epsg code\n     */\n    EPSG4326 : function () {\n        return Epsg4326.build();\n    }\n};\n\nexport default CRS;\n","import Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport RightManagement from \"../../Common/Utils/CheckRightManagement\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport MathUtils from \"../../Common/Utils/MathUtils\";\nimport MousePositionDOM from \"../../Common/Controls/MousePositionDOM\";\nimport PositionFormater from \"./Utils/PositionFormater\";\nimport CRS from \"../CRS/CRS\";\n\nvar logger = Logger.getLogger(\"mouseposition\");\n\n/**\n * @classdesc\n *\n * Leaflet Control Class to display Mouse position in various CRS and altitude using the <a href=\"https://geoservices.ign.fr/documentation/geoservices/alti.html\" target=\"_blank\">altimetric web service of the Geoportal Platform</a>.\n *\n * Use {@link module:Controls.MousePosition L.geoportalControl.MousePosition()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#control\" target=\"_blank\">L.Control</a> native class.\n *\n * @namespace\n * @alias L.geoportalControl.MousePosition\n */\nvar MousePosition = L.Control.extend(/** @lends L.geoportalControl.MousePosition.prototype */ {\n\n    includes : MousePositionDOM,\n\n    /**\n     * options by default\n     *\n     * @private\n     */\n    options : {\n        position : \"bottomleft\",\n        collapsed : true,\n        units : [],\n        systems : [],\n        displayAltitude : true,\n        displayCoordinates : true,\n        editCoordinates : false,\n        altitude : {\n            triggerDelay : 200,\n            responseDelay : 500,\n            noDataValue : -99999,\n            noDataValueTolerance : 90000,\n            serviceOptions : {}\n        }\n    },\n\n    /**\n     * @constructor MousePosition\n     *\n     * @private\n     * @alias MousePosition\n     * @extends {L.Control}\n     * @param {Object} options - options for function call.\n     * @param {String}   [options.apiKey] - API key, mandatory if autoconf service has not been charged in advance\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {String}  [options.position] - position of component into the map, 'bottomleft' by default\n     * @param {Boolean} [options.collapsed = true] - collapse mode, false by default\n     * @param {Array}   [options.systems] - list of projection systems, GEOGRAPHIC, MERCATOR, LAMB93 and LAMB2E by default\n     *      Each array element (=system) is an object with following properties :\n     * @param {String}  options.systems.crs - Proj4 crs alias (from proj4 defs). e.g. : \"EPSG:4326\". Required\n     * @param {String}  [options.systems.label] - CRS label to be displayed in control. Default is crs code (e.g. \"EPSG:4326\")\n     * @param {String}  [options.systems.type] - CRS units type for coordinates conversion : \"Geographical\" or \"Metric\". Default: \"Metric\"\n     * @param {Object}  [options.systems.geoBBox] - Aera covered by the system (WGS84 coordinates).\n     * @param {Number}  options.systems.geoBBox.right - Right bound.\n     * @param {Number}  options.systems.geoBBox.left - Left bound.\n     * @param {Number}  options.systems.geoBBox.top - Top bound.\n     * @param {Number}  options.systems.geoBBox.bottom - Bottom bound.\n     * @param {Array}   [options.units] - list of units by system, Geographical and Metric by default\n     *      Values may be \"DEC\" (decimal degrees), \"DMS\" (sexagecimal), \"RAD\" (radians) and \"GON\" (grades) for geographical coordinates,\n     *      and \"M\" or \"KM\" for metric coordinates\n     * @param {Boolean} [options.displayAltitude= true] - active/desactivate the altitude panel, if desactivate, have just the coordinate panel, true by default\n     * @param {Boolean} [options.displayCoordinates= true] - active/desactivate the coordinate panel, if desactivate, have just the altitude panel, true by default\n     * @param {Boolean} [options.editCoordinates = false] - add edit coordinates options. False by default.\n     * @param {Object}  [options.altitude] - elevation configuration\n     * @param {Object}  [options.altitude.serviceOptions] - options of elevation service\n     * @param {Number}  [options.altitude.responseDelay] - latency for altitude request, 500 ms by default\n     * @param {Number}  [options.altitude.triggerDelay] - immobilisation time of movement on the map to trigger the elevation calculation, 200 ms by default\n     * @param {Number}  [options.altitude.noDataValue] - value used for altitude service no data (default is -99999). In this case, \"---m\" will be displayed instead of \"-99999m\"\n     * @param {Number}  [options.altitude.noDataValueTolerance] - tolerance for no data value :\n     *                  values in [noDataValue - noDataValueTolerance ; noDataValue + noDataValueTolerance] interval will not be displayed, but \"---m\" will be displayed instead.\n     *                  Default is 90000\n     * @example\n     *  var MousePosition = L.geoportalControl.MousePosition({\n     *      position : 'bottomleft',\n     *      collapsed : false,\n     *      displayAltitude : true,\n     *      displayCoordinates : true,\n     *      editCoordinates : false,\n     *      altitude : {\n     *           triggerDelay : 100,\n     *           responseDelay : 500,\n     *           noDataValue : -99999,\n     *           noDataValueTolerance : 90000,\n     *           serviceOptions : {}\n     *      },\n     *      systems : [\n     *       {\n     *          crs : L.CRS.EPSG4326,\n     *          label : \"Lon,Lat\",\n     *          type : \"Geographical\"\n     *        },\n     *       {\n     *          crs : L.geoportalCRS.EPSG2154,\n     *          label : \"Lambert 93\",\n     *          type : \"Metric\"\n     *        }\n     *      ],\n     *      units : [\"DEC\", \"DMS\"]\n     *  });\n     */\n    initialize : function (options) {\n        // on merge les options avec celles par defaut\n        L.Util.extend(this.options, options);\n\n        // uuid\n        this._uid = ID.generate();\n\n        // initialisation des systemes de projections\n        this._projectionSystems = [];\n        this._initProjectionSystems();\n\n        // initialisation des systemes des unités\n        this._projectionUnits = {};\n        this._initProjectionUnits();\n\n        // detection du support : desktop ou tactile\n        this._isDesktop = this._detectSupport();\n\n        // on met en place un seuil sur le timer\n        if (this.options.altitude.triggerDelay < 100) {\n            this.options.altitude.triggerDelay = 100;\n        }\n\n        // timer sur le delai d'immobilisation du mouvement\n        this._timer = this.options.altitude.triggerDelay;\n\n        // Systeme de projection selectionné (cf. _initProjectionSystems)\n        this._currentProjectionSystems = this._projectionSystems[0];\n\n        // Container des systemes\n        this._projectionSystemsContainer = null;\n\n        /** Type d'unité de projection selectionnés : Geographical ou Metric (cf._initProjectionSystems ) */\n        this._currentProjectionType = this._projectionSystems[0].type;\n\n        // Unité de projection selectionnés (cf. _initProjectionUnits)\n        this._currentProjectionUnits = this._projectionUnits[this._currentProjectionType][0].code;\n\n        // Container des unités\n        this._projectionUnitsContainer = null;\n\n        /** Container de visualisation du panneau du composant */\n        this._showContainer = null;\n        this._pictoContainer = null;\n        this._panelContainer = null;\n        this._panelHeaderContainer = null;\n\n        // gestion de l'affichage du panneau de l'altitude / coordonnées\n        if (!this.options.displayAltitude && !this.options.displayCoordinates) {\n            // on reactive cette option !\n            this.options.displayCoordinates = true;\n        }\n\n        if (!this.options.displayCoordinates) {\n            // si les coordonnées ne sont pas affichées : pas besoin de les éditer...\n            this.options.editCoordinates = false;\n        }\n\n        /** Edition des coordonnées en cours ou non */\n        this._isEditing = false;\n\n        /**\n         * Droit sur le ressource alti.\n         * Par defaut, on n'en s'occupe pas\n         * sauf si l'autoconfiguration est chargée !\n         */\n        this._noRightManagement = false;\n\n        // gestion des droits sur les ressources/services\n        // si l'on souhaite un calcul d'altitude, on verifie\n        // les droits sur les ressources d'alti...\n        if (this.options.displayAltitude) {\n            this._checkRightsManagement();\n        }\n\n        // on transmet les options au controle\n        L.Util.setOptions(this, this.options);\n    },\n\n    /**\n     * this method is called by this.addTo(map) when the control is added on the map\n     * and fills variable 'this._container = this.onAdd(map)',\n     * and create events on map.\n     * @param {Object} map - the map\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    onAdd : function (map) {\n        // initialisation du DOM du composant\n        var container = this._container = this._initLayout();\n\n        // on met en place l'evenement sur la carte pour recuperer les coordonnées,\n        // on l'active à l'ouverture du panneau uniquement !\n        if (!this.options.collapsed) {\n            // this.onShowMousePositionClick();\n            // evenement valable pour le mode desktop !\n            if (this._isDesktop) {\n                map.on(\"mousemove\", this.onMouseMove, this);\n            } else {\n                map.on(\"move\", this.onMapMove, this);\n            }\n        }\n\n        // deactivate of events that may interfere with the map\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        // on stoppe la propagation de l'événement mousemove sur le container\n        L.DomEvent\n            .addListener(container, \"mousemove\", L.DomEvent.stopPropagation)\n            .addListener(container, \"mousemove\", L.DomEvent.preventDefault);\n\n        return container;\n    },\n\n    /**\n     * this method is called when the control is removed from the map\n     * and removes events on map.\n     * @param {Object} map - the map\n     *\n     * @private\n     */\n    onRemove : function (map) {\n        map.off(\"mousemove\", this.onMouseMove);\n    },\n\n    /**\n     * this method is called by the constructor and initialize the projection\n     * systems.\n     * getting coordinates in the requested projection :\n     * see this.onMousePositionProjectionSystemChange()\n     *\n     * @private\n     */\n    _initProjectionSystems : function () {\n        // on donne la possibilité à l'utilisateur de modifier\n        // la liste des systèmes à afficher\n        // Ex. this.options.systems\n\n        // systemes de projection disponible par defaut\n        var projectionSystemsByDefault = [{\n            label : \"G\\u00e9ographique\",\n            crs : L.CRS.Simple, // L.Projection.LonLat !\n            type : \"Geographical\"\n        }, {\n            label : \"Web Mercator\",\n            crs : L.CRS.EPSG3395, // L.Projection.SphericalMercator !\n            type : \"Metric\"\n        }, {\n            label : \"Lambert 93\",\n            crs : CRS.EPSG2154,\n            type : \"Metric\",\n            geoBBox : {\n                left : -9.86,\n                bottom : 41.15,\n                right : 10.38,\n                top : 51.56\n            }\n        }, {\n            label : \"Lambert II \\u00e9tendu\",\n            crs : CRS.EPSG27572,\n            type : \"Metric\",\n            geoBBox : {\n                left : -4.87,\n                bottom : 42.33,\n                right : 8.23,\n                top : 51.14\n            }\n        }];\n\n        var systems = this.options.systems;\n        for (var i = 0; i < systems.length; i++) {\n            // definition d'un systeme de reference\n            var sys = systems[i];\n\n            if (!sys.label) {\n                logger.error(\"not defined !\");\n                continue;\n            }\n\n            if (!sys.crs) {\n                logger.error(\"crs not defined !\");\n                continue;\n            }\n\n            if (!sys.type) {\n                logger.warn(\"type srs not defined, use 'Metric' by default !\");\n                sys.type = \"Metric\";\n            }\n\n            this._projectionSystems.push(systems[i]);\n\n            // it's a just a test ...\n            var found = false;\n            for (var j = 0; j < projectionSystemsByDefault.length; j++) {\n                var obj = projectionSystemsByDefault[j];\n                if (sys.crs === obj.crs) {\n                    found = true;\n                    logger.info(\"crs '{}' already configured by default\", obj.code);\n                }\n            }\n            if (!found) {\n                logger.info(\"crs '{}' not found, it's a new projection\", sys.code || sys.label);\n            }\n        }\n\n        // au cas où...\n        if (this._projectionSystems.length === 0) {\n            this._projectionSystems = projectionSystemsByDefault;\n        }\n\n        // re-initilisation des codes pour gerer le lien entre _projectionSystems et select du mouse position (lien code/value)\n        for (var k = 0; k < this._projectionSystems.length; ++k) {\n            this._projectionSystems[k].code = k;\n        }\n    },\n\n    /**\n     * this method is called by the constructor and initialize the units.\n     * getting coordinates in the requested units :\n     * see this.onMousePositionProjectionUnitsChange()\n     *\n     * @private\n     */\n    _initProjectionUnits : function () {\n        // on donne la possibilité à l'utilisateur de modifier\n        // la liste des unités à afficher\n        // Ex.\n        // this.options.units : [\"DEC\", \"DMS\"]\n\n        // unités disponible par defaut\n        var projectionUnitsByDefault = {\n            Geographical : [{\n                code : \"DEC\",\n                label : \"degrés décimaux\",\n                format : this._displayDEC\n            }, {\n                code : \"DMS\",\n                label : \"degrés sexagésimaux\",\n                format : this._displayDMS\n            }, {\n                code : \"RAD\",\n                label : \"radians\",\n                format : this._displayRAD\n            }, {\n                code : \"GON\",\n                label : \"grades\",\n                format : this._displayGON\n            }],\n            Metric : [{\n                code : \"M\",\n                label : \"mètres\",\n                format : this._displayMeter\n            }, {\n                code : \"KM\",\n                label : \"kilomètres\",\n                format : this._displayKMeter\n            }]\n        };\n\n        var units = this.options.units;\n\n        for (var type in projectionUnitsByDefault) {\n            if (projectionUnitsByDefault.hasOwnProperty(type)) {\n                var found = false;\n                for (var j = 0; j < projectionUnitsByDefault[type].length; j++) {\n                    var obj = projectionUnitsByDefault[type][j];\n                    for (var i = 0; i < units.length; i++) {\n                        var unit = units[i];\n                        if (obj.code === unit) {\n                            found = true;\n                            if (!this._projectionUnits[type]) {\n                                this._projectionUnits[type] = [];\n                            }\n                            this._projectionUnits[type].push(obj);\n                        }\n                    }\n                }\n                if (!found) {\n                    this._projectionUnits[type] = projectionUnitsByDefault[type];\n                }\n            }\n        }\n\n        // au cas où...\n        if (Object.keys(this._projectionUnits).length === 0) {\n            this._projectionUnits = projectionUnitsByDefault;\n        }\n    },\n\n    /**\n     * this method is called by constructor\n     * and check the rights to resources\n     *\n     * @private\n     */\n    _checkRightsManagement : function () {\n        var rightManagement = RightManagement.check({\n            key : this.options.apiKey,\n            resources : [\"SERVICE_CALCUL_ALTIMETRIQUE_RSC\"],\n            services : [\"Elevation\"]\n        });\n\n        this._noRightManagement = !rightManagement;\n\n        // on recupère les informations utiles\n        // sur ce controle, on ne s'occupe pas de la ressource car elle est unique...\n        // Ex. la clef API issue de l'autoconfiguration si elle n'a pas\n        // été renseignée.\n        if (!this.options.apiKey) {\n            this.options.apiKey = (rightManagement) ? rightManagement.key : null;\n        }\n    },\n\n    /**\n     * this method is called by the constructor.\n     * this information is useful to switch to touch mode.\n     * Detection : test for desktop or tactile\n     *\n     * @returns {Boolean} is desktop\n     * @private\n     */\n    _detectSupport : function () {\n        // TODO\n        // Choix de gérer la détection dans le code du composant au lieu du DOM car :\n        // Utilisation de l'implémentation Leaflet\n        // http://leafletjs.com/reference.html#browser\n\n        var isDesktop = true;\n        var userAgent = window.navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf(\"iphone\") !== -1 ||\n            userAgent.indexOf(\"ipod\") !== -1 ||\n            userAgent.indexOf(\"ipad\") !== -1 ||\n            userAgent.indexOf(\"android\") !== -1 ||\n            userAgent.indexOf(\"mobile\") !== -1 ||\n            userAgent.indexOf(\"blackberry\") !== -1 ||\n            userAgent.indexOf(\"tablet\") !== -1 ||\n            userAgent.indexOf(\"phone\") !== -1 ||\n            userAgent.indexOf(\"touch\") !== -1) {\n            isDesktop = false;\n        }\n\n        if (userAgent.indexOf(\"msie\") !== -1 ||\n            userAgent.indexOf(\"trident\") !== -1) {\n            isDesktop = true;\n        }\n\n        return isDesktop;\n    },\n\n    // ################################################################### //\n    // ######################## methods handle dom ####################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd(map)\n     * and initialize the container HTMLElement\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    _initLayout : function () {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var inputShow = this._showContainer = this._createShowMousePositionElement();\n        container.appendChild(inputShow);\n\n        // mode \"collapsed\"\n        if (!this.options.collapsed) {\n            inputShow.checked = true;\n        }\n\n        var picto = this._pictoContainer = this._createShowMousePositionPictoElement(this._isDesktop);\n        container.appendChild(picto);\n\n        var panel = this._panelContainer = this._createMousePositionPanelElement();\n\n        var header = this._panelHeaderContainer = this._createMousePositionPanelHeaderElement();\n        panel.appendChild(header);\n\n        var basic = this._createMousePositionPanelBasicElement(\n            this.options.displayAltitude,\n            this.options.displayCoordinates,\n            this.options.editCoordinates\n        );\n        panel.appendChild(basic);\n\n        var arraySettings = this._createShowMousePositionSettingsElement(this.options.displayCoordinates);\n        for (var j = 0; j < arraySettings.length; j++) {\n            panel.appendChild(arraySettings[j]);\n        }\n\n        var settings = this._createMousePositionSettingsElement();\n        var systems = this._projectionSystemsContainer = this._createMousePositionSettingsSystemsElement(this._projectionSystems);\n        var units = this._projectionUnitsContainer = this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);\n        settings.appendChild(systems);\n        settings.appendChild(units);\n        panel.appendChild(settings);\n\n        container.appendChild(panel);\n\n        // ce tag n'est pas à placer dans le container du controle,\n        // mais dans celui de la map !\n        var center = this._createMapCenter();\n        var map = this._map;\n        map.getContainer().appendChild(center);\n\n        return container;\n    },\n\n    /**\n     * this method is called by this.()\n     * and it changes the elevation view panel into the dom.\n     * FIXME call by ID !\n     *\n     * @param {Boolean} active - true:active, false:disable\n     *\n     * @private\n     */\n    _setElevationPanel : function (active) {\n        var div = null;\n\n        if (!active) {\n            div = L.DomUtil.get(this._addUID(\"GPmousePositionAltitude\"));\n            div.style.display = \"none\";\n        }\n\n        if (active && this._noRightManagement) {\n            div = L.DomUtil.get(this._addUID(\"GPmousePositionAlt\"));\n            div.innerHTML = \"no right !\";\n        }\n    },\n\n    /**\n     * this method is called by this.()\n     * and it changes the coordinate view panel into the dom.\n     * FIXME call by ID !\n     *\n     * @param {Boolean} active - true:active, false:disable\n     *\n     * @private\n     */\n    _setCoordinatePanel : function (active) {\n        if (!active) {\n            var div = L.DomUtil.get(this._addUID(\"GPmousePositionCoordinate\"));\n            div.style.display = \"none\";\n        }\n    },\n\n    /**\n     * this method is called by this.()\n     * and it changes the settings view panel into the dom.\n     * FIXME call by ID !\n     *\n     * @param {Boolean} active - true:active, false:disable\n     *\n     * @private\n     */\n    _setSettingsPanel : function (active) {\n        if (!active) {\n            var divPicto = L.DomUtil.get(\"GPshowMousePositionSettingsPicto\");\n            var divPanel = L.DomUtil.get(this._addUID(\"GPmousePositionSettings\"));\n            divPicto.style.display = \"none\";\n            divPanel.style.display = \"none\";\n        }\n    },\n\n    /**\n     * this method is called by this.onMousePositionProjectionSystemChange()\n     * when changes to a metric or a geographical units.\n     *\n     * @param {String} type - Geographical or Metric\n     *\n     * @private\n     */\n    _setTypeUnitsPanel : function (type) {\n        var container = this._projectionUnitsContainer;\n\n        // on supprime les enfants...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        var units = this._projectionUnits[type];\n        for (var j = 0; j < units.length; j++) {\n            var obj = units[j];\n            var option = document.createElement(\"option\");\n            option.value = (obj.code) ? obj.code : j;\n            option.text = obj.label || j;\n            // option.label = obj.label;\n            container.appendChild(option);\n        }\n\n        var projectionUnits = this._projectionUnits[type][0].code;\n\n        if (this._currentProjectionUnits === \"DMS\" || projectionUnits === \"DMS\") {\n            this._resetCoordinateElements(this.options.editCoordinates, type, projectionUnits);\n            this._setEditMode(this._isEditing);\n        }\n\n        // le nouveau type de system ...\n        this._currentProjectionType = type;\n\n        // Mise a jour des elements labels et unites\n        this._resetLabelElements(type);\n        this._resetUnitElements(projectionUnits);\n\n        // et comme on a changé de type de systeme,\n        // il faut changer aussi d'unité !\n        this._currentProjectionUnits = this._projectionUnits[type][0].code;\n    },\n\n    // ################################################################### //\n    // ######################## method units format ###################### //\n    // ################################################################### //\n\n    /**\n     * degreedecimal\n     * @param {Object} oLatLng - coordinates\n     *\n     * @returns {Object} coordinates in decimal\n     * @private\n     */\n    _displayDEC : function (oLatLng) {\n        var coordinate = {};\n        coordinate.lat = PositionFormater.roundToDecimal(oLatLng.lat, 6);\n        coordinate.lng = PositionFormater.roundToDecimal(oLatLng.lng, 6);\n        coordinate.unit = \"°\";\n        return coordinate;\n    },\n\n    /**\n     * degreedecimal2sexagecimal\n     * @param {Object} oLatLng - coordinates\n     *\n     * @returns {Object} coordinates in DMS\n     * @private\n     */\n    _displayDMS : function (oLatLng) {\n        var coordinate = {};\n        coordinate.lat = PositionFormater.decimalLatToDMS(oLatLng.lat, true);\n        coordinate.lng = PositionFormater.decimalLonToDMS(oLatLng.lng, true);\n        return coordinate;\n    },\n\n    /**\n     * degreedecimal2radian\n     * @param {Object} oLatLng - coordinates\n     *\n     * @returns {Object} coordinates in radian\n     * @private\n     */\n    _displayRAD : function (oLatLng) {\n        var coordinate = {};\n        coordinate.lat = PositionFormater.decimalToRadian(oLatLng.lat);\n        coordinate.lng = PositionFormater.decimalToRadian(oLatLng.lng);\n        coordinate.unit = \"rad\";\n        return coordinate;\n    },\n\n    /**\n     * degreedecimal2grade\n     * @param {Object} oLatLng - coordinates\n     *\n     * @returns {Object} coordinates in gon\n     * @private\n     */\n    _displayGON : function (oLatLng) {\n        var coordinate = {};\n        coordinate.lat = PositionFormater.decimalToGrade(oLatLng.lat);\n        coordinate.lng = PositionFormater.decimalToGrade(oLatLng.lng);\n        coordinate.unit = \"gon\";\n        return coordinate;\n    },\n\n    /**\n     * meter\n     * @param {Object} oXY - coordinates\n     *\n     * @returns {Object} coordinates in meters\n     * @private\n     */\n    _displayMeter : function (oXY) {\n        // on recoit toujours des coordonnées metriques\n        var coordinate = {};\n        coordinate.x = L.Util.formatNum(oXY.x, 2);\n        coordinate.y = L.Util.formatNum(oXY.y, 2);\n        coordinate.unit = \"m\";\n        return coordinate;\n    },\n\n    /**\n     * kilometer\n     * @param {Object} oXY - coordinates\n     *\n     * @returns {Object} coordinates in km\n     * @private\n     */\n    _displayKMeter : function (oXY) {\n        var coordinate = {};\n        coordinate.x = L.Util.formatNum(oXY.x / 1000, 2);\n        coordinate.y = L.Util.formatNum(oXY.y / 1000, 2);\n        coordinate.unit = \"km\";\n        return coordinate;\n    },\n\n    // ################################################################### //\n    // ####################### method system project ##################### //\n    // ################################################################### //\n\n    /**\n     * this method projects a coordinate to a specific projection.\n     * FIXME\n     *\n     * @param {Object} oLatLng - geographic coordinate (L.LatLng)\n     * @param {Object} crs - projection system (ex. GEOGRAPHIC, LAMB93, LAMB2E, MERCATOR, ...)\n     * @returns {Object} oXY - coordinate\n     * @private\n     */\n    _project : function (oLatLng, crs) {\n        // cf. http://leafletjs.com/reference.html#iprojection\n        // notre carte est dans la projection par defaut :\n        // Spherical Mercator projection (EPSG:3857)\n        // - GEOGRAPHIC : conversion native, L.CRS.Simple ou L.Projection.LngLat.project(latlng)\n        // - LAMB93 : L.GeoportalCRS.EPSG2154 ou projection.project(latlng)\n        // - LAMB2E : L.GeoportalCRS.EPSG27572 ou projection.project(latlng)\n        // - MERCATOR ou EPSG:3395 : L.CRS.EPSG3395 ou L.Projection.Mercator.project(latlng)\n\n        if (typeof crs === \"function\") {\n            // \"crs is an function !\"... en mode AMD !\n            crs = crs();\n        }\n\n        if (typeof crs !== \"object\") {\n            logger.log(\"crs is not an object !\");\n            return;\n        }\n\n        // pas de reprojection pour le systeme de projection natif !\n        if (crs === L.CRS.Simple) {\n            return oLatLng;\n        }\n\n        if (!crs.projection || typeof crs.projection !== \"object\") {\n            logger.error(\"projection is not an object !\");\n            return;\n        }\n\n        var oPoint = crs.projection.project(oLatLng);\n\n        // FIXME reprojeter du geographique en geographique cause qq problemes\n        // Ex. LatLng en EPSG4326 !\n        // FIXME probleme d'inversion d'axe sur les projections geographiques\n        // Ex. EPSG:4326 -> lat/lon\n        //     IGNF:RGF93G -> lon/lat\n        if (this._currentProjectionType === \"Geographical\") {\n            oPoint.lat = oPoint.y;\n            oPoint.lng = oPoint.x;\n        }\n\n        if (!oPoint || Object.keys(oPoint).length === 0) {\n            logger.error(\"Failed to project with crs code : \" + crs.code);\n        }\n\n        return oPoint;\n    },\n\n    /**\n     * this method unprojects a coordinate to a geographic projection.\n     *\n     * @param {Object} oXY - coordinate\n     * @returns {Object} oLatLng - geographic coordinate (L.LatLng)\n     * @private\n     */\n    _unproject : function (oXY) {\n        // cf. http://leafletjs.com/reference.html#iprojection\n        // notre carte est dans la projection par defaut :\n        // Spherical Mercator projection (EPSG:3857)\n        // - GEOGRAPHIC : conversion native, L.CRS.Simple ou L.Projection.LngLat.project(latlng)\n        // - LAMB93 : L.GeoportalCRS.EPSG2154 ou projection.project(latlng)\n        // - LAMB2E : L.GeoportalCRS.EPSG27572 ou projection.project(latlng)\n        // - MERCATOR ou EPSG:3395 : L.CRS.EPSG3395 ou L.Projection.Mercator.project(latlng)\n\n        var oSrs = this._currentProjectionSystems.crs;\n        if (!oSrs) {\n            logger.log(\"system crs not found\");\n            return;\n        }\n\n        if (typeof oSrs === \"function\") {\n            // \"crs is an function !\"... en mode AMD !\n            oSrs = oSrs();\n        }\n\n        if (typeof oSrs !== \"object\") {\n            logger.log(\"crs is not an object !\");\n            return;\n        }\n\n        // pas de reprojection pour le systeme de projection natif !\n        if (oSrs === L.CRS.Simple) {\n            return {\n                lat : oXY.y,\n                lng : oXY.x\n            };\n        }\n\n        if (this._currentProjectionType === \"Geographical\") {\n            return {\n                lat : oXY.y,\n                lng : oXY.x\n            };\n        }\n\n        if (!oSrs.projection || typeof oSrs.projection !== \"object\") {\n            logger.error(\"projection is not an object !\");\n            return;\n        }\n\n        var oLatLng = oSrs.projection.unproject(oXY);\n\n        if (!oLatLng || Object.keys(oLatLng).length === 0) {\n            logger.error(\"Failed to unproject coordinate\");\n        }\n\n        return oLatLng;\n    },\n\n    // ################################################################### //\n    // ##################### handlers events to control ################## //\n    // ################################################################### //\n\n    /**\n     * this sends the coordinates to the panel.\n     * (cf. this.GPdisplayCoords() into the DOM functions)\n     *\n     * @param {Object} oLatLng - geographic coordinate (L.LatLng)\n     *\n     * @private\n     */\n    _setCoordinate : function (oLatLng) {\n        // structure\n        // L.LatLng\n        //     lat: 4.07249425916745\n        //     lng: 2.4609375\n\n        // type de systeme : Geographical ou Metric\n        var type = this._currentProjectionSystems.type;\n\n        // on recherche la fonction de formatage dans l'unitée demandée\n        var format = null;\n        var units = this._projectionUnits[type];\n        for (var i = 0; i < units.length; i++) {\n            if (units[i].code === this._currentProjectionUnits) {\n                format = units[i].format;\n                break;\n            }\n        }\n\n        // structure pour les coordonnées en fonctin du type demandé :\n        // {x:, y:, unit:} ou {lng:, lat:} ou {lon:, lat:} ou {e:, n:, unit:}...\n        var coordinate = {};\n        // on projete le point dans le systeme demandé\n        var oSrs = this._currentProjectionSystems.crs;\n        if (!oSrs) {\n            logger.error(\"crs not found !\");\n            return;\n        }\n        coordinate = format(this._project(oLatLng, oSrs));\n\n        if (!coordinate || Object.keys(coordinate).length === 0) {\n            return;\n        }\n\n        this.GPdisplayCoords(coordinate);\n    },\n\n    /**\n     * this sends the coordinates to the panel.\n     * (cf. this.GPdisplayElevation() into the DOM functions)\n     *\n     * @param {Object} oLatLng - geographic coordinate (L.LatLng)\n     *\n     * @private\n     */\n    _setElevation : function (oLatLng) {\n        // gestion du timer de la requete du service d'altitude\n        var delay = this.options.altitude.responseDelay;\n        var noDataValue = this.options.altitude.noDataValue;\n        var noDataValueTolerance = this.options.altitude.noDataValueTolerance;\n        this.GPdisplayElevation(oLatLng, delay, noDataValue, noDataValueTolerance);\n    },\n\n    /**\n     * this method is triggered when the mouse or the map is stopped.\n     * (cf. onMouseMove and onMapMove)\n     *\n     * @param {Object} oLatLng - geographic coordinate (L.LatLng)\n     *\n     * @private\n     */\n    onMoveStopped : function (oLatLng) {\n        // si pas de droit, on ne met pas à jour l'affichage !\n        if (this._noRightManagement) {\n            return;\n        }\n        this._setElevation(oLatLng);\n    },\n\n    /**\n     * this method is an handler event to control. The event is 'mousemove' on\n     * the map. The handler sends the coordinates to the panel.\n     * (cf. this.GPdisplayCoords() into the DOM functions)\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onMouseMove : function (e) {\n        var self = this;\n\n        var oLatLng = e.latlng;\n\n        this._setCoordinate(oLatLng);\n\n        clearTimeout(this._timer);\n        this._timer = setTimeout(function () {\n            self.onMoveStopped(oLatLng);\n        }, this.options.altitude.triggerDelay);\n    },\n\n    /**\n     * this method is an handler event to control. The event is 'moveend' on\n     * the map. The handler sends the coordinates to the panel.\n     * (cf. this.GPdisplayCoords() into the DOM functions)\n     *\n     * @private\n     */\n    onMapMove : function () {\n        var self = this;\n        var map = this._map;\n\n        var oLatLng = map.getCenter();\n\n        this._setCoordinate(oLatLng);\n\n        clearTimeout(this._timer);\n        this._timer = setTimeout(function () {\n            self.onMoveStopped(oLatLng);\n        }, this.options.altitude.triggerDelay);\n    },\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.GPdisplayCoords() in the dom, and\n     * it executes a request to the elevation service.\n     *\n     * @param {Object} coordinate - {lat:..., lng:...}\n     * @param {Function} callback - callback\n     *\n     * @private\n     */\n    onRequestAltitude : function (coordinate, callback) {\n        logger.log(\"onRequestAltitude\");\n\n        // INFORMATION\n        // on effectue la requête au service d'altitude...\n        // on met en place des callbacks afin de recuperer les resultats ou\n        // les messages d'erreurs du service.\n        // le resultat est affiché dans une balise du dom.\n        // les messages d'erreurs sont affichés sur la console (?)\n\n        if (!coordinate || Object.keys(coordinate).length === 0) {\n            return;\n        }\n\n        // si on ne veut pas de calcul d'altitude, on ne continue pas !\n        if (!this.options.displayAltitude) {\n            return;\n        }\n\n        // si on n'a pas les droits sur la ressource, pas la peine de\n        // continuer !\n        if (this._noRightManagement) {\n            return;\n        }\n\n        logger.log(coordinate);\n\n        var options = {};\n        // on recupere les options du service\n        L.Util.extend(options, this.options.altitude.serviceOptions);\n\n        // ainsi que les coordonnées\n        L.Util.extend(options, {\n            zonly : true,\n            positions : [{\n                lon : coordinate.lon || coordinate.lng,\n                lat : coordinate.lat\n            }]\n        });\n\n        // et les callbacks\n        L.Util.extend(options, {\n            scope : this,\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(results);\n                if (results && Object.keys(results).length) {\n                    // var context = this.options.scope;\n                    // context._setAltidude(results.elevations[0].z);\n                    callback.call(this, results.elevations[0].z);\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                logger.error(error.message);\n            }\n        });\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        L.Util.extend(options, {\n            apiKey : options.apiKey || this.options.apiKey\n        });\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        L.Util.extend(options, {\n            ssl : this.options.ssl\n        });\n\n        logger.log(options);\n\n        Gp.Services.getAltitude(options);\n    },\n\n    /**\n     * this method is called by event 'click' on 'GPshowMousePositionPicto' tag label\n     * (cf. this._createShowMousePositionPictoElement),\n     * and toggles event 'mousemove' on map.\n     * FIXME\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onShowMousePositionClick : function (e) {\n        logger.log(e);\n\n        // checked : true - panel close\n        // checked : false - panel open\n        var map = this._map;\n\n        // evenement declenché à l'ouverture/fermeture du panneau,\n        // et en fonction du mode : desktop ou tactile !\n        if (this._showContainer.checked) {\n            (this._isDesktop)\n                ? map.off(\"mousemove\", this.onMouseMove, this)\n                : map.off(\"move\", this.onMapMove, this);\n        } else {\n            (this._isDesktop)\n                ? map.on(\"mousemove\", this.onMouseMove, this)\n                : map.on(\"move\", this.onMapMove, this);\n        }\n\n        // on gère l'affichage des panneaux ici...,\n        // même si ce n'est pas l'endroit adequate...\n        this._setElevationPanel(this.options.displayAltitude);\n        this._setCoordinatePanel(this.options.displayCoordinates);\n        if (!this.options.displayCoordinates) {\n            this._setSettingsPanel(false);\n        }\n    },\n\n    /**\n     * this method is called by event 'click' on input coordinate\n     *\n     * @param {Boolean} editing - editing mode\n     * @private\n     */\n    onMousePositionEditModeClick : function (editing) {\n        if (!this.options.editCoordinates) {\n            return;\n        }\n\n        if (this._isEditing === editing) {\n            return;\n        }\n\n        this._isEditing = editing;\n\n        // Affichage des outils, input en ecriture\n        this._setEditMode(this._isEditing);\n\n        var map = this._map;\n\n        if (this._isDesktop) {\n            (this._isEditing)\n                ? map.off(\"mousemove\", this.onMouseMove, this)\n                : map.on(\"mousemove\", this.onMouseMove, this);\n        } else {\n            (this._isEditing)\n                ? map.off(\"move\", this.onMapMove, this)\n                : map.on(\"move\", this.onMapMove, this);\n        }\n    },\n\n    /**\n     * Convert Coordinate value : km to meters, radians, grades to decimal degrees\n     * @param {Number} value - value to convert\n     * @param {String} unit - unit\n     *\n     * @returns {Number} converted value\n     * @private\n     */\n    _convertCoordinate : function (value, unit) {\n        var result;\n        if (unit === \"DEC\" || unit === \"DMS\") { // DMS est converti en DEC !\n            result = value;\n        } else if (unit === \"M\") {\n            result = value;\n        } else if (unit === \"KM\") {\n            result = value * 1000;\n        } else if (unit === \"RAD\") {\n            var rd = (180 / Math.PI).toFixed(20);\n            result = (value * rd).toFixed(20);\n        } else if (unit === \"GON\") {\n            var d = (9 / 10).toFixed(20);\n            result = (value * d).toFixed(20);\n        }\n\n        return result;\n    },\n\n    /**\n     * Validate Extend coordinate\n     *\n     * @param {String} coordType - Lat or Lon\n     * @param {String} value - coordinate\n     * @param {Event} e - event\n     * @returns {Boolean} value is within extent\n     */\n    validateExtentCoordinate : function (coordType, value, e) {\n        // FIXME pas de validation...\n        if (e !== undefined) {\n            return true;\n        }\n\n        if ([\"Lon\", \"Lat\"].indexOf(coordType) === -1) {\n            return false;\n        }\n\n        var geoBBox = this._currentProjectionSystems.geoBBox;\n\n        if (geoBBox === undefined) {\n            return true;\n        }\n\n        if (geoBBox) {\n            // check if coordinates are in the extent\n\n            var extent = [geoBBox.left, geoBBox.bottom, geoBBox.right, geoBBox.top];\n            var unit = this._currentProjectionUnits;\n\n            // on convertit un point..., mais on n'a pas de fonction\n            // de conversion comme pour openlayers...\n            var oLatLon = this._unproject({\n                x : (coordType === \"Lon\") ? this._convertCoordinate(value, unit) : 0,\n                y : (coordType === \"Lat\") ? this._convertCoordinate(value, unit) : 0\n\n            });\n\n            if (coordType === \"Lon\" && (oLatLon.lng < extent[0] || oLatLon.lng > extent[2])) {\n                logger.warn(\"coordinates (lon) out of extent !?\");\n                return false;\n            }\n            if (coordType === \"Lat\" && (oLatLon.lat < extent[1] || oLatLon.lat > extent[3])) {\n                logger.warn(\"coordinates (lat) out of extent !?\");\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    /**\n     * Get coordinate from inputs and select in decimal degrees\n     *\n     * @param {String} coordType - \"Lon\" or \"Lat\"\n     * @returns {String} coordinate\n     * @private\n     */\n    _getCoordinate : function (coordType) {\n        var inputDegrees = L.DomUtil.get(this._addUID(\"GPmousePosition\" + coordType + \"Degrees\"));\n        var degrees = inputDegrees.value;\n        if (!degrees) {\n            return null;\n        }\n\n        degrees = degrees.replace(\",\", \".\");\n        if (!MathUtils.isInteger(degrees)) {\n            return null;\n        }\n\n        var result = MathUtils.toInteger(degrees);\n        if (result < Number(inputDegrees.dataset.min) || result > Number(inputDegrees.dataset.max)) {\n            return null;\n        }\n\n        var direction = L.DomUtil.get(this._addUID(\"GPmousePosition\" + coordType + \"Direction\")).value;\n\n        var inputMinutes = L.DomUtil.get(this._addUID(\"GPmousePosition\" + coordType + \"Minutes\"));\n        var minutes = inputMinutes.value;\n        if (minutes) {\n            minutes = minutes.replace(\",\", \".\");\n            if (MathUtils.isInteger(minutes)) {\n                var mins = MathUtils.toInteger(minutes);\n                if (mins >= Number(inputMinutes.dataset.min) && mins <= Number(inputMinutes.dataset.max)) {\n                    result += (mins / 60);\n                }\n            }\n        }\n\n        var inputSeconds = L.DomUtil.get(this._addUID(\"GPmousePosition\" + coordType + \"Seconds\"));\n        var seconds = inputSeconds.value;\n        if (seconds) {\n            seconds = seconds.replace(\",\", \".\");\n            var secs = MathUtils.toFloat(seconds);\n            if (secs && secs >= Number(inputSeconds.dataset.min) && secs <= Number(inputSeconds.dataset.max)) {\n                result += (secs / 3600);\n            }\n        }\n\n        if (direction === \"O\" || direction === \"S\") {\n            result = -result;\n        }\n\n        return result;\n    },\n\n    /**\n     * locate DMS coordinates on map\n     *\n     * @private\n     */\n    _locateDMSCoordinates : function () {\n        // on est toujours en coordonnées geographiques...\n        var oLatLon = {\n            lat : this._getCoordinate(\"Lat\"),\n            lng : this._getCoordinate(\"Lon\")\n        };\n\n        if (!this.validateExtentCoordinate(\"Lon\", oLatLon.lng)) {\n            return;\n        }\n\n        if (!this.validateExtentCoordinate(\"Lat\", oLatLon.lat)) {\n            return;\n        }\n\n        // FIXME https://github.com/Leaflet/Leaflet/issues/922\n        var map = this._map;\n        map.panTo(oLatLon);\n    },\n\n    /**\n     * locate coordinates on map (not DMS)\n     *\n     * @private\n     */\n    _locateCoordinates : function () {\n        // soit longitude ou soit y\n        var lonYDom = L.DomUtil.get(this._addUID(\"GPmousePositionLon\")).value;\n        lonYDom = lonYDom.replace(\",\", \".\");\n        lonYDom = parseFloat(lonYDom);\n        if (isNaN(lonYDom)) {\n            return;\n        }\n\n        // soit lattitude ou soit x\n        var latXDom = L.DomUtil.get(this._addUID(\"GPmousePositionLat\")).value;\n        latXDom = latXDom.replace(\",\", \".\");\n        latXDom = parseFloat(latXDom);\n        if (isNaN(latXDom)) {\n            return;\n        }\n\n        var lon = null;\n        var lat = null;\n        var x = null;\n        var y = null;\n\n        if (this._currentProjectionType === \"Geographical\") {\n            lon = lonYDom;\n            lat = latXDom;\n        } else {\n            x = latXDom;\n            y = lonYDom;\n        }\n\n        if (!this.validateExtentCoordinate(\"Lon\", lon || x)) {\n            return;\n        }\n\n        if (!this.validateExtentCoordinate(\"Lat\", lat || y)) {\n            return;\n        }\n\n        var unit = this._currentProjectionUnits;\n        var oLatLon = this._unproject({\n            x : this._convertCoordinate(lon !== null ? lon : x, unit),\n            y : this._convertCoordinate(lat !== null ? lat : y, unit)\n        });\n\n        // FIXME https://github.com/Leaflet/Leaflet/issues/922\n        var map = this._map;\n        map.panTo(oLatLon);\n    },\n\n    /**\n     * locate coordinates on map\n     *\n     * @method locate\n     * @private\n     */\n    onMousePositionEditModeLocateClick : function () {\n        if (!this.options.editCoordinates) {\n            return;\n        }\n\n        if (!this._isEditing) {\n            this.onMousePositionEditModeClick(true);\n            return;\n        }\n\n        (this._currentProjectionUnits === \"DMS\")\n            ? this._locateDMSCoordinates()\n            : this._locateCoordinates();\n    },\n\n    /**\n     * this method is called by event 'change' on 'GPmousePositionProjectionSystem'\n     * tag select (cf. this._createMousePositionSettingsElement),\n     * and selects the system projection.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onMousePositionProjectionSystemChange : function (e) {\n        logger.log(\"onMousePositionProjectionSystemChange\", e);\n\n        var idx = e.target.selectedIndex; // index\n        var value = e.target.options[idx].value; // crs, ex. MERCATOR (optionnel)\n        var label = e.target.options[idx].label; // etiquette, ex Géographiques\n\n        logger.log(idx, value, label);\n\n        this._setCurrentSystem(value);\n    },\n\n    /**\n     * this method selects the current system projection.\n     *\n     * @param {Object} systemCode - inner code (rank in array _projectionSystems)\n     *\n     * @private\n     */\n    _setCurrentSystem : function (systemCode) {\n        // si on change de type de systeme, on doit aussi changer le type d'unités !\n        var type = null;\n        for (var i = 0; i < this._projectionSystems.length; ++i) {\n            if (this._projectionSystems[i].code === Number(systemCode)) {\n                type = this._projectionSystems[i].type;\n                break;\n            }\n        }\n\n        if (!type) {\n            logger.log(\"system not found in projection systems container\");\n            return;\n        }\n\n        if (type !== this._currentProjectionType) {\n            this._setTypeUnitsPanel(type);\n        }\n\n        // on enregistre le systeme courrant\n        this._currentProjectionSystems = this._projectionSystems[Number(systemCode)];\n\n        // on simule un deplacement en mode tactile pour mettre à jour les\n        // resultats\n        if (!this._isDesktop) {\n            this.onMapMove();\n        }\n    },\n\n    /**\n     * this method is called by event 'mouseover' on 'GPmousePositionProjectionSystem'\n     * tag select (cf. this._createMousePositionSettingsElement),\n     * and selects the system projection.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onMousePositionProjectionSystemMouseOver : function (e) {\n        logger.log(\"onMousePositionProjectionSystemMouseOver\", e);\n\n        var map = this._map;\n        if (!map) {\n            return;\n        }\n\n        // clear select\n        var systemList = L.DomUtil.get(this._addUID(\"GPmousePositionProjectionSystem\"));\n\n        systemList.innerHTML = \"\";\n\n        // add systems whose extent intersects the map extent\n        for (var j = 0; j < this._projectionSystems.length; j++) {\n            var proj = this._projectionSystems[j];\n            var option = null;\n\n            if (proj.geoBBox) {\n                // bboxes intersection test\n                if (map.getBounds()._southWest.lng > proj.geoBBox.right ||\n                    map.getBounds()._southWest.lat > proj.geoBBox.top ||\n                    map.getBounds()._northEast.lng < proj.geoBBox.left ||\n                    map.getBounds()._northEast.lat < proj.geoBBox.bottom\n                ) {\n                    if (proj === this._currentProjectionSystems) {\n                        option = document.createElement(\"option\");\n                        option.value = proj.code;\n                        option.text = proj.label || j;\n                        option.setAttribute(\"selected\", \"selected\");\n                        option.setAttribute(\"disabled\", \"disabled\");\n\n                        systemList.appendChild(option);\n                    }\n                    continue; // do not intersect\n                }\n            }\n            option = document.createElement(\"option\");\n            option.value = proj.code;\n            option.text = proj.label || j;\n            if (proj === this._currentProjectionSystems) {\n                option.setAttribute(\"selected\", \"selected\");\n            }\n\n            systemList.appendChild(option);\n        }\n    },\n\n    /**\n     * this method is called by event 'change' on 'GPmousePositionProjectionUnits'\n     * tag select (cf. this._createMousePositionSettingsElement),\n     * and selects the units projection.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onMousePositionProjectionUnitsChange : function (e) {\n        logger.log(\"onMousePositionProjectionUnitsChange\", e);\n\n        var idx = e.target.selectedIndex;\n        var value = e.target.options[idx].value;\n        var label = e.target.options[idx].label;\n\n        logger.log(idx, value, label);\n\n        var oldProjectionUnits = this._currentProjectionUnits;\n        var newProjectionUnits = this._currentProjectionUnits = value;\n        var newProjectionType = this._currentProjectionType;\n\n        // Mise a jour des elements lebels et unites\n        this._resetLabelElements(newProjectionType);\n        this._resetUnitElements(newProjectionUnits);\n\n        // mise a jour des inputs pour les coordonnees\n        if (oldProjectionUnits === \"DMS\" || newProjectionUnits === \"DMS\") {\n            this._resetCoordinateElements(this.options.editCoordinates, newProjectionType, newProjectionUnits);\n            this._setEditMode(this._isEditing);\n        }\n\n        // on simule un deplacement en mode tactile pour mettre à jour les\n        // resultats\n        if (!this._isDesktop) {\n            this.onMapMove();\n        }\n    },\n\n    // ################################################################### //\n    // ###### METHODES PUBLIQUES (INTERFACE AVEC LE CONTROLE) ############ //\n    // ################################################################### //\n\n    /**\n     * This method is public.\n     * It allows to control the execution of a movement.\n     *\n     * @param {Object} position - position = {lon: , lat: }\n     * @param {Number} zoom - zoom\n     * @param {Object} options - Zoom/pan options\n     */\n    moveTo : function (position, zoom, options) {\n        if (!this._showContainer.checked) {\n            this._pictoContainer.click();\n        }\n\n        var map = this._map;\n        if (!map) {\n            return;\n        }\n\n        this.onMouseMove({\n            latlng : position\n        });\n\n        map.flyTo(position, zoom || 10, options || {});\n    }\n});\n\nexport default MousePosition;\n","var ReverseGeocodingDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPreverseGeocoding\");\n        container.className = \"GPwidget\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################### Methods of main container ##################### //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowReverseGeocodingElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowReverseGeocoding\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Show ReverseGeocoding\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowReverseGeocodingPictoElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowReverseGeocodingPicto\");\n        label.className = \"GPshowAdvancedToolPicto\";\n        label.htmlFor = this._addUID(\"GPshowReverseGeocoding\");\n        label.title = \"Ouvrir la recherche inverse\";\n\n        // Close all results and panels when minimizing the widget\n        if (label.addEventListener) {\n            label.addEventListener(\"click\", function () {\n                self.onShowReverseGeocodingClick();\n            });\n        } else if (label.attachEvent) {\n            label.attachEvent(\"onclick\", function () {\n                self.onShowReverseGeocodingClick();\n            });\n        }\n\n        var spanOpen = document.createElement(\"span\");\n        spanOpen.id = this._addUID(\"GPshowReverseGeocodingOpen\");\n        spanOpen.className = \"GPshowAdvancedToolOpen\";\n        label.appendChild(spanOpen);\n\n        return label;\n    },\n\n    /**\n     * Create Waiting Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingWaitingElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPreverseGeocodingCalcWaitingContainer\");\n        div.className = \"GPreverseGeocodingCalcWaitingContainerHidden\";\n\n        var p = document.createElement(\"p\");\n        p.className = \"GPreverseGeocodingCalcWaiting\";\n        p.innerHTML = \"Recherche en cours...\";\n\n        div.appendChild(p);\n\n        return div;\n    },\n\n    /**\n     * Reverse geocoding results panel element.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingResultsPanelElement : function () {\n        var resultsPanelDiv = document.createElement(\"div\");\n        resultsPanelDiv.id = this._addUID(\"GPreverseGeocodingResultsPanel\");\n        resultsPanelDiv.className = \"GPpanel GPreverseGeocodingComponentHidden\";\n        return resultsPanelDiv;\n    },\n\n    /**\n     * Reverse geocoding results list.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingResultsListElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPreverseGeocodingResultsList\");\n        // Results are dynamically filled in Javascript by reverse geocoding service\n        return container;\n    },\n\n    /**\n     *  Add Result\n     * (results dynamically generate !)\n     *\n     * @param {String} locationDescription - reverse geocoded location results\n     * @param {Number} id - ID\n     */\n    _createReverseGeocodingResultElement : function (locationDescription, id) {\n        // contexte\n        var context = this;\n\n        var container = document.getElementById(this._addUID(\"GPreverseGeocodingResultsList\"));\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"ReverseGeocodedLocation_\" + id);\n        div.className = \"GPautoCompleteProposal\";\n        div.innerHTML = locationDescription;\n        div.title = locationDescription;\n\n        if (div.addEventListener) {\n            div.addEventListener(\"mouseover\", function (e) {\n                context.onReverseGeocodingResultMouseOver(e);\n            });\n            div.addEventListener(\"mouseout\", function (e) {\n                context.onReverseGeocodingResultMouseOut(e);\n            });\n            div.addEventListener(\"click\", function (e) {\n                if (typeof context.onReverseGeocodingResultClick === \"function\") {\n                    context.onReverseGeocodingResultClick(e);\n                }\n            });\n        } else if (div.attachEvent) {\n            div.attachEvent(\"onmouseover\", function (e) {\n                context.onReverseGeocodingResultMouseOver(e);\n            });\n            div.attachEvent(\"onmouseout\", function (e) {\n                context.onReverseGeocodingResultMouseOut(e);\n            });\n            div.attachEvent(\"onclick\", function (e) {\n                if (typeof context.onReverseGeocodingResultClick === \"function\") {\n                    context.onReverseGeocodingResultClick(e);\n                }\n            });\n        }\n\n        container.appendChild(div);\n    },\n\n    // ################################################################### //\n    // ######################### Inputs panel ############################ //\n    // ################################################################### //\n\n    /**\n     * Create Container Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingPanelElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPreverseGeocodingPanel\");\n        div.className = \"GPpanel\";\n\n        return div;\n    },\n\n    /**\n     * Create Header Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingPanelHeaderElement : function () {\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader\";\n        // info: on sépare les appels pour la création du picto de retour,\n        // du titre et de la croix de fermeture pour les récupérer dans le composant\n        return container;\n    },\n\n    /**\n     * Create return picto in panel header\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingPanelReturnPictoElement : function () {\n        // contexte\n        var self = this;\n\n        var divNew = document.createElement(\"div\");\n        divNew.id = this._addUID(\"GPreverseGeocodingReturnPicto\");\n        divNew.title = \"Nouvelle recherche\";\n        divNew.className = \"GPreverseGeocodingReturnPictoHidden\";\n        if (divNew.addEventListener) {\n            divNew.addEventListener(\"click\", function (e) {\n                document.getElementById(self._addUID(\"GPreverseGeocodingResultsPanel\")).className = \"GProuteComponentHidden\";\n                document.getElementById(self._addUID(\"GPreverseGeocodingForm\")).className = \"\";\n                document.getElementById(self._addUID(\"GPreverseGeocodingHeaderTitle\")).innerHTML = \"Recherche inverse\";\n                document.getElementById(self._addUID(\"GPreverseGeocodingReturnPicto\")).className = \"GPreverseGeocodingReturnPictoHidden\";\n                self.onGPreverseGeocodingReturnPictoClick(e);\n            });\n        } else if (divNew.attachEvent) {\n            divNew.attachEvent(\"onclick\", function (e) {\n                document.getElementById(self._addUID(\"GPreverseGeocodingResultsPanel\")).className = \"GProuteComponentHidden\";\n                document.getElementById(self._addUID(\"GPreverseGeocodingForm\")).className = \"\";\n                document.getElementById(self._addUID(\"GPreverseGeocodingHeaderTitle\")).innerHTML = \"Recherche inverse\";\n                document.getElementById(self._addUID(\"GPreverseGeocodingReturnPicto\")).className = \"GPreverseGeocodingReturnPictoHidden\";\n                self.onGPreverseGeocodingReturnPictoClick(e);\n            });\n        }\n        return divNew;\n    },\n\n    /**\n     * Create Header Title Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingPanelTitleElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"GPpanelTitle\";\n        div.id = this._addUID(\"GPreverseGeocodingHeaderTitle\");\n        div.innerHTML = \"Recherche inverse\";\n        return div;\n    },\n\n    /**\n     * Create Header close div\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingPanelCloseElement : function () {\n        // contexte\n        var self = this;\n\n        var divClose = document.createElement(\"div\");\n        divClose.id = this._addUID(\"GPreverseGeocodingPanelClose\");\n        divClose.className = \"GPpanelClose\";\n        divClose.title = \"Fermer le panneau\";\n\n        // Link panel close / visibility checkbox\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowReverseGeocodingPicto\")).click();\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowReverseGeocodingPicto\")).click();\n            });\n        }\n\n        return divClose;\n    },\n\n    /**\n     * Create Form\n     * see event !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingPanelFormElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GPreverseGeocodingForm\");\n\n        if (form.addEventListener) {\n            form.addEventListener(\"submit\", function (e) {\n                e.preventDefault();\n                self.onReverseGeocodingSubmit();\n            });\n        } else if (form.attachEvent) {\n            form.attachEvent(\"onsubmit\", function (e) {\n                e.preventDefault();\n                self.onReverseGeocodingSubmit();\n            });\n        }\n\n        return form;\n    },\n\n    // ################################################################### //\n    // ####################### Choice mode into form ##################### //\n    // ################################################################### //\n\n    /**\n     * Create Container to Mode choice geocoding type\n     *\n     * @param {Array} resources - geocoding resources to be displayed (and used)\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingFormModeChoiceGeocodingTypeElement : function (resources) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPflexInput\";\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPreverseGeocodingCodeLabel\";\n        label.innerHTML = \"Recherche par\";\n        label.title = \"Recherche par\";\n        div.appendChild(label);\n\n        var select = document.createElement(\"select\");\n        select.className = \"GPreverseGeocodingCode\";\n        // gestionnaire d'evenement : on stocke la valeur du type de geocodage,\n        // utilisé dans la requête de géocodage inverse\n        if (select.addEventListener) {\n            select.addEventListener(\"change\", function (e) {\n                context.onReverseGeocodingTypeChange(e);\n            });\n        } else if (select.attachEvent) {\n            select.attachEvent(\"onchange\", function (e) {\n                context.onReverseGeocodingTypeChange(e);\n            });\n        }\n\n        // on prend soit les valeurs passées par l'utilisateur, soit des valeurs par défaut\n        if (!resources || !Array.isArray(resources)) {\n            resources = [\"StreetAddress\", \"PositionOfInterest\", \"CadastralParcel\"];\n        }\n        for (var i = 0; i < resources.length; i++) {\n            switch (resources[i]) {\n                case \"PositionOfInterest\":\n                    var POIOption = document.createElement(\"option\");\n                    POIOption.value = \"PositionOfInterest\";\n                    POIOption.text = \"Lieux/toponymes\";\n                    select.appendChild(POIOption);\n                    break;\n                case \"StreetAddress\":\n                    var SAOption = document.createElement(\"option\");\n                    SAOption.value = \"StreetAddress\";\n                    SAOption.text = \"Adresses\";\n                    select.appendChild(SAOption);\n                    break;\n                case \"CadastralParcel\":\n                    var CPOption = document.createElement(\"option\");\n                    CPOption.value = \"CadastralParcel\";\n                    CPOption.text = \"Parcelles cadastrales\";\n                    select.appendChild(CPOption);\n                    break;\n                case \"Administratif\":\n                    var adminOption = document.createElement(\"option\");\n                    adminOption.value = \"Administratif\";\n                    adminOption.text = \"Unités administratives\";\n                    select.appendChild(adminOption);\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        div.appendChild(select);\n\n        return div;\n    },\n\n    /**\n     * Create Container to Mode choice geocoding delimitation\n     *\n     * @param {Array} delimitations - geocoding delimitations to be displayed (and used)\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingFormModeChoiceGeocodingDelimitationElement : function (delimitations) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPflexInput\";\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPreverseGeocodingCodeLabel\";\n        label.innerHTML = \"Délimitation\";\n        label.title = \"Délimitation\";\n        div.appendChild(label);\n\n        var select = document.createElement(\"select\");\n        select.className = \"GPreverseGeocodingCode\";\n        // gestionnaire d'evenement : on stocke la valeur du type de délimitation,\n        // et on modifie l'événement de pointage sur la carte en fonction\n        if (select.addEventListener) {\n            select.addEventListener(\"change\", function (e) {\n                context.onReverseGeocodingDelimitationChange(e);\n            });\n        } else if (select.attachEvent) {\n            select.attachEvent(\"onchange\", function (e) {\n                context.onReverseGeocodingDelimitationChange(e);\n            });\n        }\n\n        // on prend soit les valeurs passées par l'utilisateur, soit des valeurs par défaut\n        if (!delimitations || !Array.isArray(delimitations)) {\n            delimitations = [\"Point\", \"Circle\", \"Extent\"];\n        }\n        for (var i = 0; i < delimitations.length; i++) {\n            switch (delimitations[i].toLowerCase()) {\n                case \"point\":\n                    var pointOption = document.createElement(\"option\");\n                    pointOption.value = \"point\";\n                    pointOption.text = \"Pointer un lieu\";\n                    select.appendChild(pointOption);\n                    break;\n                case \"circle\":\n                    var circleOption = document.createElement(\"option\");\n                    circleOption.value = \"circle\";\n                    circleOption.text = \"Dessiner un cercle\";\n                    select.appendChild(circleOption);\n                    break;\n                case \"extent\":\n                    var extentOption = document.createElement(\"option\");\n                    extentOption.value = \"extent\";\n                    extentOption.text = \"Dessiner une emprise\";\n                    select.appendChild(extentOption);\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        div.appendChild(select);\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ########################### Submit Form ########################### //\n    // ################################################################### //\n\n    /**\n     * Create Submit Form Element\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createReverseGeocodingSubmitFormElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPreverseGeocodingSubmit\");\n        input.className = \"GPinputSubmit\";\n        input.type = \"submit\";\n        input.value = \"Rechercher\";\n\n        return input;\n    }\n\n};\n\nexport default ReverseGeocodingDOM;\n","import Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport \"leaflet-draw\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport RightManagement from \"../../Common/Utils/CheckRightManagement\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport IconDefault from \"./Utils/IconDefault\";\nimport ReverseGeocodingDOM from \"../../Common/Controls/ReverseGeocodingDOM\";\n\nvar logger = Logger.getLogger(\"reversegeocoding\");\n\n/**\n * @classdesc\n *\n * Leaflet Control Class to find locations by clicking on a map using <a href=\"https://geoservices.ign.fr/documentation/geoservices/geocodage-inverse.html\" target=\"_blank\">reverse geocoding service</a> of the Geoportal platform.\n *\n * Use {@link module :Controls.ReverseGeocode L.geoportalControl.ReverseGeocode()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#control\" target=\"_blank\">L.Control</a> native class.\n *\n * @namespace\n * @alias L.geoportalControl.ReverseGeocode\n */\nvar ReverseGeocoding = L.Control.extend(/** @lends L.geoportalControl.ReverseGeocode.prototype */ {\n\n    includes : ReverseGeocodingDOM,\n\n    /**\n     * options by default\n     *\n     * @private\n     */\n    options : {\n        position : \"bottomleft\",\n        collapsed : true,\n        resources : [\"StreetAddress\", \"PositionOfInterest\"],\n        delimitations : [\"Point\", \"Circle\", \"Extent\"],\n        reverseGeocodeOptions : {}\n    },\n\n    /**\n     * @constructor ReverseGeocode\n     * @param {Object} options - ReverseGeocoding control options\n     * @param {String}  [options.apiKey] - API key for services call (reverse geocode service), mandatory if autoconf service has not been charged in advance\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {String}  [options.position] - position of component into the map, 'topleft' by default\n     * @param {Boolean} [options.collapsed = true] - Specify if widget has to be collapsed (true) or not (false) on map loading. Default is true.\n     * @param {Array}  [options.resources =  [\"StreetAddress\", \"PositionOfInterest\", \"CadastralParcel\"]] - resources for geocoding, by default : [\"StreetAddress\", \"PositionOfInterest\"]\n     * @param {Array}  [options.delimitations = [\"Point\", \"Circle\", \"Extent\"]] - delimitations for reverse geocoding, by default : [\"Point\", \"Circle\", \"Extent\"]\n     * @param {Object}  [options.reverseGeocodeOptions = {}] - reverse geocode service options. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~ReverseGeocode Gp.Services.reverseGeocode()} to know all reverse geocode options.\n     * @example\n     *  var iso = L.geoportalControl.ReverseGeocode({\n     *      collapsed : false,\n     *      position : \"topright\",\n     *      resources : [\"StreetAddress\", \"PositionOfInterest\"],\n     *      delimitations : [\"Point\", \"Circle\"],\n     *      reverseGeocodeOptions : {}\n     *  });\n     * @private\n     */\n    initialize : function (options) {\n        // on merge les options avec celles par defaut\n        L.Util.extend(this.options, options);\n\n        /**\n         * Droit sur la ressource.\n         * Par defaut, on n'en s'occupe pas\n         * sauf si l'autoconfiguration est chargée !\n         */\n        this._noRightManagement = false;\n\n        // ressources des services d'autocompletion et de geocodage\n        this._servicesRightManagement = {};\n\n        // gestion des droits sur les ressources/services\n        this._checkRightsManagement();\n\n        // check input options format (resources and delimitations arrays)\n        this._checkInputOptions();\n\n        /** uuid */\n        this._uid = ID.generate();\n\n        // Type de géocodage sélectionné (StreetAddress, PositionOfInterest, ...)\n        this._currentGeocodingType = null;\n        this._initGeocodingType();\n\n        // Type de délimitation à utiliser pour la requête + pour sélection sur la containerDistance\n        this._currentGeocodingDelimitation = null;\n        this._initGeocodingDelimitation();\n\n        // ################################################################## //\n        // ################### Elements principaux du DOM ################### //\n\n        // containers principaux\n        this._showReverseGeocodingContainer = null;\n        // header panel\n        this._panelHeaderContainer = null;\n        this._panelTitleContainer = null;\n        this._returnPictoContainer = null;\n        // form\n        this._formContainer = null;\n        // results\n        this._resultsContainer = null;\n        this._resultsListContainer = null;\n        // waiting\n        this._waitingContainer = null;\n\n        // ###################################################################### //\n        // ################### informations des points saisis ################### //\n\n        // couche vectorielle dans laquelle seront saisis les points (features ci-dessus)\n        this._inputFeaturesLayer = null;\n        this._inputResultsLayer = null;\n        this._lastIdLayer = 0;\n        this._currentIdLayer = 0;\n        // interaction avec la carte (de type \"Point\", \"Circle\" ou \"Polygon\")\n        this._currentFeature = null;\n\n        // #################################################################### //\n        // ################### informations pour la requête ################### //\n\n        // position du géocodage inverse qui sera envoyée dans la requête\n        this._requestPosition = null;\n        // eventuels filtres géométriques saisis par l'utilisateur : cercle ou bbox\n        this._requestCircleFilter = null;\n        this._requestBboxFilter = null;\n\n        // pour savoir si un calcul est en cours ou non\n        this._waiting = false;\n        // timer pour cacher la patience après un certain temps\n        this._timer = null;\n\n        // #################################################################### //\n        // #################### informations des résultats #################### //\n\n        this._reverseGeocodingLocations = [];\n    },\n\n    /**\n     * this method is called by this.addTo(map) when the control is added on the map\n     * and fills variable 'this._container = this.onAdd(map)',\n     * and create events on map.\n     *\n     * @param {Object} map - the map\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    onAdd : function (map) {\n        // initialisation du DOM du composant\n        var container = this._container = this._initLayout();\n\n        // deactivate of events that may interfere with the map\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        if (map) {\n            // lors de l'ajout à la map, on active la saisie du point,\n            // mais seulement si le widget est ouvert\n            if (!this.options.collapsed) {\n                this._activateMapInteraction(map);\n            }\n        }\n\n        return container;\n    },\n\n    /**\n     * this method is called when the control is removed from the map\n     * and removes events on map.\n     *\n     * @param {Object} map - the map\n     *\n     * @private\n     */\n    onRemove : function (map) {\n        this._clearLocations();\n        this._clearLocationsFeature(map);\n        this._clearInputRequest();\n\n        // on supprime l'éventuelle précédente interaction\n        this._removeMapInteraction(map);\n    },\n\n    // ################################################################### //\n    // ##################### init component ############################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by constructor\n     * and check the rights to resources\n     *\n     * @private\n     */\n    _checkRightsManagement : function () {\n        var _resources = [];\n        var _key;\n        var _opts = null;\n\n        // les ressources du service de geocodage\n        _key = this.options.reverseGeocodeOptions.apiKey;\n        _opts = this.options.reverseGeocodeOptions.filterOptions;\n        // on récupère les éventuelles ressources passées en option, soit dans reverseGeocodeOptions :\n        _resources = (_opts) ? _opts.type : [];\n        // soit directement dans options.resources.geocode :\n        if (!_resources || _resources.length === 0) {\n            _resources = this.options.resources;\n        }\n        // ou celles par défaut sinon.\n        if (!_resources || _resources.length === 0) {\n            _resources = [\n                \"StreetAddress\",\n                \"PositionOfInterest\"\n            ];\n        }\n        var rightManagementGeocode = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _resources,\n            services : [\"Geocode\"]\n        });\n        logger.log(\"rightManagementGeocode\", rightManagementGeocode);\n\n        // aucun droit !\n        if (!rightManagementGeocode) {\n            this._noRightManagement = true;\n            return;\n        }\n\n        // on recupère les informations utiles\n        // Ex. la clef API issue de l'autoconfiguration si elle n'a pas\n        // été renseignée.\n        if (!this.options.apiKey) {\n            this.options.apiKey = rightManagementGeocode.key;\n        }\n\n        this._servicesRightManagement[\"Geocode\"] = rightManagementGeocode[\"Geocode\"];\n    },\n\n    /**\n     * this method is called by this.initialize()\n     * and makes sure input options are correctly formated\n     *\n     * @private\n     */\n    _checkInputOptions : function () {\n        var i;\n        // on vérifie le tableau des resources\n        if (this.options.resources) {\n            var resources = this.options.resources;\n            // on vérifie que la liste des ressources de geocodage est bien un tableau\n            if (Array.isArray(resources)) {\n                var resourcesList = [\"StreetAddress\", \"PositionOfInterest\", \"CadastralParcel\", \"Administratif\"];\n                for (i = 0; i < resources.length; i++) {\n                    if (resourcesList.indexOf(resources[i]) === -1) {\n                        // si la resource n'est pas référencée, on l'enlève\n                        // resources.splice(i, 1);\n                        logger.log(\"[ReverseGeocoding] options.resources : \" + resources[i] + \" is not a resource for reverse geocode\");\n                    }\n                }\n            } else {\n                logger.log(\"[ReverseGeocoding] 'options.resources' parameter should be an array\");\n                resources = null;\n            }\n        }\n        // et le tableau des délimitations\n        if (this.options.delimitations) {\n            var delimitations = this.options.delimitations;\n            // on vérifie que la liste des delimitations est bien un tableau\n            if (Array.isArray(delimitations)) {\n                var delimitationsList = [\"Circle\", \"Point\", \"Extent\"];\n                for (i = 0; i < delimitations.length; i++) {\n                    if (delimitationsList.indexOf(delimitations[i]) === -1) {\n                        // si la delimitations n'est pas référencée, on l'enlève\n                        // resources.splice(i, 1);\n                        logger.log(\"[ReverseGeocoding] options.delimitations : \" + delimitations[i] + \" is not a delimitation for reverse geocode\");\n                    }\n                }\n            } else {\n                logger.log(\"[ReverseGeocoding] 'options.delimitations' parameter should be an array\");\n                delimitations = null;\n            }\n        }\n    },\n\n    /**\n     * this method is called by this.initialize() and initialize geocoding type (=resource)\n     * (\"StreetAddress\", \"PositionOfInterest\", \"CadastralParcel\", \"Administratif\")\n     *\n     * @private\n     */\n    _initGeocodingType : function () {\n        // Type de géocodage selectionné\n        this._currentGeocodingType = \"StreetAddress\"; // par defaut\n\n        // par defaut\n        var resources = this.options.resources;\n        if (!resources || resources.length === 0) {\n            this.options.resources = [\"StreetAddress\", \"PositionOfInterest\", \"CadastralParcel\"];\n        }\n\n        // options utilisateur\n        if (Array.isArray(resources) && resources.length) {\n            // vérification des droits\n            var noRightsIndexes = [];\n            for (var i = 0; i < resources.length; i++) {\n                if (this._servicesRightManagement[\"Geocode\"].indexOf(resources[i]) < 0) {\n                    // si on n'a pas les droits sur la ressource, on va la supprimer : on stocke son index\n                    noRightsIndexes.push(i);\n                    logger.log(\"[ReverseGeocode] no rights for options.resources : \" + resources[i]);\n                }\n            }\n            // on retire les ressoures non autorisées qu'on a pu rencontrer\n            if (noRightsIndexes.length !== 0) {\n                for (var j = 0; j < noRightsIndexes.length; j++) {\n                    resources.splice(noRightsIndexes[j], 1);\n                }\n            }\n\n            // récupération du type par défaut\n            if (resources[0] === \"StreetAddress\" || resources[0] === \"PositionOfInterest\" || resources[0] === \"CadastralParcel\" || resources[0] === \"Administratif\") {\n                this._currentGeocodingType = resources[0];\n            }\n        }\n\n        // si l'utilisateur a spécifié au moins une ressource dans le service, on surcharge les options du widget\n        var serviceOptions = this.options.reverseGeocodeOptions;\n        if (serviceOptions.filterOptions && Array.isArray(serviceOptions.filterOptions.type) && serviceOptions.filterOptions.type.length !== 0) {\n            this._currentGeocodingType = serviceOptions.filterOptions.type[0];\n        }\n    },\n\n    /**\n     * this method is called by this.initialize() and initialize geocoding delimitation\n     * (\"Point\", \"Circle\", \"Extent\")\n     *\n     * @private\n     */\n    _initGeocodingDelimitation : function () {\n        // Type de délimitation selectionné\n        this._currentGeocodingDelimitation = \"Point\"; // par defaut\n\n        // par defaut\n        var delimitations = this.options.delimitations;\n        if (!delimitations || delimitations.length === 0) {\n            this.options.delimitations = [\"Point\", \"Circle\", \"Extent\"];\n        }\n\n        // options utilisateur\n        if (Array.isArray(delimitations) && delimitations.length) {\n            var d = delimitations[0].toLowerCase();\n            if (d === \"point\" || d === \"circle\" || d === \"extent\") {\n                this._currentGeocodingDelimitation = delimitations[0];\n            }\n        }\n    },\n\n    // ################################################################### //\n    // ######################## methods handle dom ####################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd(map)\n     * and initialize the container HTMLElement\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _initLayout : function () {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        // create show ReverseGeocoding element\n        var inputShow = this._showReverseGeocodingContainer = this._createShowReverseGeocodingElement();\n        container.appendChild(inputShow);\n\n        // mode \"collapsed\"\n        if (!this.options.collapsed) {\n            inputShow.checked = true;\n        }\n\n        // create ReverseGeocoding picto\n        var picto = this._createShowReverseGeocodingPictoElement();\n        container.appendChild(picto);\n\n        // panel\n        var reverseGeocodingPanel = this._createReverseGeocodingPanelElement();\n\n        // header\n        var panelHeader = this._panelHeaderContainer = this._createReverseGeocodingPanelHeaderElement();\n        // return picto (hidden at start)\n        var returnPicto = this._returnPictoContainer = this._createReverseGeocodingPanelReturnPictoElement();\n        panelHeader.appendChild(returnPicto);\n        // pane title\n        var panelTitle = this._panelTitleContainer = this._createReverseGeocodingPanelTitleElement();\n        panelHeader.appendChild(panelTitle);\n        // close picto\n        var closeDiv = this._createReverseGeocodingPanelCloseElement();\n        panelHeader.appendChild(closeDiv);\n        reverseGeocodingPanel.appendChild(panelHeader);\n\n        // form\n        var reverseGeocodingForm = this._formContainer = this._createReverseGeocodingPanelFormElement();\n        // choices element\n        reverseGeocodingForm.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources));\n        reverseGeocodingForm.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));\n\n        // submit (bouton \"Chercher\")\n        var submit = this._createReverseGeocodingSubmitFormElement();\n        reverseGeocodingForm.appendChild(submit);\n\n        reverseGeocodingPanel.appendChild(reverseGeocodingForm);\n\n        // waiting\n        var waiting = this._waitingContainer = this._createReverseGeocodingWaitingElement();\n        reverseGeocodingPanel.appendChild(waiting);\n\n        // results (dans le panel)\n        var resultsPanel = this._resultsContainer = this._createReverseGeocodingResultsPanelElement();\n        var reverseGeocodingResultsList = this._resultsListContainer = this._createReverseGeocodingResultsListElement();\n        resultsPanel.appendChild(reverseGeocodingResultsList);\n        reverseGeocodingPanel.appendChild(resultsPanel);\n\n        container.appendChild(reverseGeocodingPanel);\n\n        logger.log(container);\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ################### Map interactions management ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd,\n     * or by this.onShowReverseGeocodingClick,\n     * and calls method corresponding to current delimitation, if widget is not collapsed.\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _activateMapInteraction : function (map) {\n        logger.info(\"_activateMapInteraction()\");\n\n        // Creation de la couche vectorielle sur laquelle on va dessiner\n        if (this._inputFeaturesLayer === null) {\n            this._inputFeaturesLayer = new L.FeatureGroup();\n            map.addLayer(this._inputFeaturesLayer);\n\n            var self = this;\n            /* evenement sur la carte lors d'une saisie,\n            on y ajoute le layer, et on y stocke les coordonnées */\n            map.on(\"draw:created\", function (e) {\n                var layer = e.layer;\n                var type = e.layerType;\n                logger.trace(\"draw:created\");\n\n                // TODO\n                // comment mettre en place un icone dynamiquement ?\n                // if (type === \"marker\") {}\n\n                self._setFeaturePosition(layer, type);\n\n                self._currentIdLayer = L.Util.stamp(layer);\n                self._setFeatureLayer(layer);\n            });\n\n            /* evenements */\n            map.on(\"draw:drawstart\", function () {\n                logger.trace(\"draw:drawstart\");\n                self._removeFeatureLayer(self._lastIdLayer);\n                self._lastIdLayer = self._currentIdLayer;\n            });\n\n            /* evenements */\n            map.on(\"draw:drawstop\", function () {\n                logger.trace(\"draw:drawstop\");\n            });\n        }\n\n        // Création de l'interaction de dessin, selon le type de délimitation sélectionné\n        var delimitation = this._currentGeocodingDelimitation.toLowerCase();\n\n        switch (delimitation) {\n            case \"point\":\n                this._activatePointInteraction(map);\n                break;\n            case \"circle\":\n                this._activateCircleInteraction(map);\n                break;\n            case \"extent\":\n\n                this._activateBoxInteraction(map);\n                break;\n            default :\n                break;\n        }\n    },\n\n    /**\n     * remove draw interaction from map (if exists)\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _removeMapInteraction : function (map) {\n        if (!map) {\n            return;\n        }\n\n        if (this._inputFeaturesLayer !== null) {\n            map.off(\"draw:created\");\n            map.off(\"draw:drawstart\");\n            map.off(\"draw:drawstop\");\n            map.removeLayer(this._inputFeaturesLayer);\n            this._inputFeaturesLayer = null;\n        }\n\n        this._lastIdLayer = this._currentIdLayer = 0;\n\n        // FIXME delete this._currentFeature ?\n        if (this._currentFeature) {\n            this._currentFeature.disable();\n        }\n    },\n\n    /**\n     * TODO this method is called by this._activateMapInteraction,\n     * and creates map point drawing interaction.\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _activatePointInteraction : function (map) {\n        logger.info(\"_activatePointInteraction()\");\n\n        if (this._currentFeature) {\n            this._currentFeature.disable();\n        }\n\n        // on modifie le tooltip du marker\n        L.drawLocal.draw.handlers.marker.tooltip.start = \"click map to place search point\";\n\n        // TODO styles des icones\n        var markerOptions = {\n            // icon : par defaut...\n            repeatMode : true\n        };\n\n        this._currentFeature = new L.Draw.Marker(map, markerOptions);\n        this._currentFeature.enable();\n    },\n\n    /**\n     * TODO this method is called by this._activateMapInteraction,\n     * and creates map circle drawing interaction.\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _activateCircleInteraction : function (map) {\n        logger.info(\"_activateCircleInteraction()\");\n\n        if (this._currentFeature) {\n            this._currentFeature.disable();\n        }\n\n        var circleOptions = {\n            repeatMode : true\n        }; // TODO styles\n\n        this._currentFeature = new L.Draw.Circle(map, circleOptions);\n        this._currentFeature.enable();\n    },\n\n    /**\n     * TODO this method is called by this._activateMapInteraction,\n     * and creates map box drawing interaction.\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _activateBoxInteraction : function (map) {\n        logger.info(\"_activateBoxInteraction()\");\n\n        if (this._currentFeature) {\n            this._currentFeature.disable();\n        }\n\n        var rectangleOptions = {\n            repeatMode : true\n        }; // TODO styles\n\n        this._currentFeature = new L.Draw.Rectangle(map, rectangleOptions);\n        this._currentFeature.enable();\n    },\n\n    /**\n     * set current position of feature\n     *\n     * @param {Object} layer - layer\n     * @param {String} type - type\n     *\n     * @private\n     */\n    _setFeaturePosition : function (layer, type) {\n        // on transmet toujours des coordonnées au service en EPSG:4326\n        var oLatLng = null;\n        if (type === \"marker\") {\n            oLatLng = layer.getLatLng();\n            this._requestPosition = {\n                x : oLatLng.lat,\n                y : oLatLng.lng\n            };\n        } else if (type === \"circle\") {\n            oLatLng = layer.getLatLng();\n            this._requestPosition = {\n                x : oLatLng.lat,\n                y : oLatLng.lng\n            };\n            this._requestCircleFilter = {\n                x : oLatLng.lat,\n                y : oLatLng.lng,\n                radius : layer.getRadius()\n            };\n        } else if (type === \"rectangle\") {\n            oLatLng = layer.getBounds();\n            var center = {\n                lng : (oLatLng.getSouthWest().lng + oLatLng.getNorthEast().lng) / 2,\n                lat : (oLatLng.getSouthWest().lat + oLatLng.getNorthEast().lat) / 2\n            };\n\n            this._requestPosition = {\n                x : center.lat,\n                y : center.lng\n            };\n\n            this._requestBboxFilter = {\n                left : oLatLng.getSouthWest().lat,\n                right : oLatLng.getNorthEast().lat,\n                bottom : oLatLng.getSouthWest().lng,\n                top : oLatLng.getNorthEast().lng\n            };\n        } else {\n            logger.warn(\"type gemetric not defined !?\");\n        }\n\n        logger.log(oLatLng);\n    },\n\n    /**\n     * set current layer of feature\n     *\n     * @param {Object} layer - layer\n     *\n     * @private\n     */\n    _setFeatureLayer : function (layer) {\n        if (!this._inputFeaturesLayer) {\n            return;\n        }\n        this._inputFeaturesLayer.addLayer(layer);\n    },\n\n    /**\n     * remove layer feature from group\n     * @param {Integer} id - id\n     *\n     * @private\n     */\n    _removeFeatureLayer : function (id) {\n        if (!this._inputFeaturesLayer) {\n            return;\n        }\n\n        if (id === 0) {\n            return;\n        }\n\n        if (!id) {\n            this._inputFeaturesLayer.clearLayers();\n        } else {\n            this._inputFeaturesLayer.removeLayer(id);\n        }\n    },\n\n    // ################################################################### //\n    // ##################### Reverse Geocoding request ################### //\n    // ################################################################### //\n\n    /**\n     * this methode is called by this.onReverseGeocodingSubmit method,\n     * it generates and sends reverse geocode request, then displays results\n     * @param {Object} settings - settings\n     *\n     * @private\n     */\n    _reverseGeocodingRequest : function (settings) {\n        // retrait de l'interaction sur la map pendant l'attente (et l'affichage des résultats)\n        var map = this._map;\n        this._removeMapInteraction(map);\n\n        // on construit les options pour la requête\n        var options = {};\n        // on surcharge avec les options utilisateur\n        L.Util.extend(options, this.options.reverseGeocodeOptions);\n        // la recherche et les callbacks\n        L.Util.extend(options, settings);\n        // options par defaut\n        L.Util.extend(options, {\n            apiKey : this.options.apiKey,\n            ssl : this.options.ssl,\n            srs : \"EPSG:4326\",\n            returnFreeForm : false,\n            // maximumResponses : 25, // on peut la surcharger !\n            timeOut : 30000,\n            protocol : \"XHR\"\n\n        });\n\n        // FIXME pourquoi je perds cette option ????\n        var _type = options.filterOptions.type;\n\n        // on récupère d'éventuels filtres\n        if (this._currentGeocodingDelimitation.toLowerCase() === \"circle\" && this._requestCircleFilter) {\n            // FIXME : a confirmer !\n            if (this._requestCircleFilter.radius > 1000) {\n                logger.log(\"INFO : initial circle radius (\" + this._requestCircleFilter.radius + \") limited to 1000m.\");\n                this._requestCircleFilter.radius = 1000;\n            }\n\n            L.Util.extend(options, {\n                filterOptions : {\n                    type : _type,\n                    circle : this._requestCircleFilter\n                }\n            });\n        }\n\n        if (this._currentGeocodingDelimitation.toLowerCase() === \"extent\" && this._requestBboxFilter) {\n            L.Util.extend(options, {\n                filterOptions : {\n                    type : _type,\n                    bbox : this._requestBboxFilter\n                }\n            });\n        }\n\n        logger.log(\"reverseGeocode request options : \", options);\n\n        // affichage d'une patience pendant l'attente\n        this._displayWaitingContainer();\n\n        // envoi de la requête\n        Gp.Services.reverseGeocode(options);\n    },\n\n    // ################################################################### //\n    // ############################# results list ######################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by this._reverseGeocodingRequest() (in case of reverse geocode success)\n     * and display results : in both container list and map\n     *\n     * @param {Array} locations - array of geocoded locations (reverse geocode results)\n     * @private\n     */\n    _displayGeocodedLocations : function (locations) {\n        var map = this._map;\n\n        // 1. on vide les résultats précédents\n        this._clearLocations();\n        this._clearLocationsFeature(map);\n\n        this._reverseGeocodingLocations = locations;\n\n        if (!locations || locations.length === 0) {\n            this._clearInputRequest(); // FIXME pas sûr que se soit le bon endroit...\n            return;\n        }\n\n        // 2. cache de la patience et du formulaire\n        this._formContainer.className = \"GPreverseGeocodingComponentHidden\";\n        this._hideWaitingContainer();\n\n        // affichage de la div des résultats (et changement du titre)\n        this._panelTitleContainer.innerHTML = \"Résultats de la recherche\";\n        this._returnPictoContainer.className = \"\";\n        this._resultsContainer.className = \"GPpanel\";\n\n        // 3. ajout de la liste des résultats dans le container des resultats\n        this._fillGeocodedLocationListContainer(locations);\n\n        // 4. affichage des résultats sur la carte (+ zoom ?)\n        this._displayGeocodedLocationsOnMap(locations);\n\n        // on zoom sur l'emprise des markers\n        map.fitBounds(this._inputResultsLayer.getBounds());\n    },\n\n    /**\n     * this method is called by this._displayGeocodedLocations()\n     * and fills the container with results list\n     *\n     * @param {Array} locations - array of geocoded locations (reverse geocode results)\n     * @private\n     */\n    _fillGeocodedLocationListContainer : function (locations) {\n        //  ajout de la liste des résultats dans le container des resultats\n        for (var i = 0; i < locations.length; i++) {\n            var location = locations[i];\n            logger.log(location);\n            // on récupère la description à afficher dans la liste\n            var locationDescription = this._fillGeocodedLocationDescription(location);\n            // on ajoute chaque résutat à la liste\n            if (locationDescription.length !== 0) {\n                this._createReverseGeocodingResultElement(locationDescription, i);\n            }\n        }\n    },\n\n    /**\n     * this method is called by this._fillGeocodedLocationListContainer()\n     * and fills location description (String), depending on matchType\n     *\n     * @param {Object} location - geocoded location (from reverse geocode results)\n     * @returns {String} locationDescription - geocoded location description to be displayed\n     * @private\n     */\n    _fillGeocodedLocationDescription : function (location) {\n        if (!location || !location.placeAttributes) {\n            return;\n        }\n        var attr = location.placeAttributes;\n\n        var locationDescription = \"\";\n        // on sélectionne les infos à afficher selon le type\n        switch (location.type) {\n            case \"StreetAddress\":\n                if (attr.street) {\n                    locationDescription += attr.number ? attr.number + \" \" : \"\";\n                    locationDescription += attr.street + \", \";\n                }\n                locationDescription += attr.postalCode + \" \" + attr.commune;\n                break;\n\n            case \"PositionOfInterest\":\n                if (location.matchType === \"City\" && attr.commune) {\n                    locationDescription += attr.commune;\n                    locationDescription += attr.postalCode ? \", \" + attr.postalCode : \"\";\n                } else if (location.matchType === \"Département\" && attr.municipality) {\n                    locationDescription += attr.municipality;\n                    locationDescription += attr.postalCode ? \", \" + attr.postalCode : \"\";\n                } else if (location.matchType === \"Toponym\" && attr.municipality) {\n                    locationDescription += attr.municipality;\n                    locationDescription += attr.postalCode ? \", \" + attr.postalCode : \"\";\n                    locationDescription += attr.commune ? \" \" + attr.commune : \"\";\n                } else {\n                    locationDescription += attr.municipality ? attr.municipality : \"\";\n                }\n                locationDescription += attr.nature ? \" (\" + attr.nature + \") \" : \"\";\n                break;\n\n            case \"CadastralParcel\":\n                locationDescription += attr.cadastralParcel ? attr.cadastralParcel : \"\";\n                locationDescription += attr.municipality ? \" (\" + attr.municipality + \")\" : \"\";\n                break;\n\n            case \"Administratif\":\n                locationDescription += attr.municipality ? attr.municipality : \"\";\n                if (attr.inseeDepartment) {\n                    locationDescription += \"(Département)\";\n                } else if (attr.inseeRegion) {\n                    locationDescription += \"(Région)\";\n                }\n                break;\n\n            default :\n                locationDescription += attr.municipality ? attr.municipality : \"\";\n                break;\n        };\n\n        return locationDescription;\n    },\n\n    // ################################################################### //\n    // ######################## map results (markers) #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this._displayGeocodedLocations()\n     * and display locations in map (markers)\n     *\n     * @param {Object} locations - geocoded locations (reverse geocode result)\n     * @private\n     */\n    _displayGeocodedLocationsOnMap : function (locations) {\n        var map = this._map;\n        var self = this;\n\n        // function set style Highlight for results\n        function _setHighLight (e) {\n            var layer = e.target;\n\n            layer.setIcon(new IconDefault(\"red\"));\n\n            var div = L.DomUtil.get(\"ReverseGeocodedLocation_\" + layer.options.id + \"-\" + self._uid);\n            L.DomUtil.addClass(div, \"GPreverseGeocodedLocationHighlight\");\n            div.scrollIntoView(false);\n        }\n\n        // function reset style Highlight for results\n        function _resetHighLight (e) {\n            var layer = e.target;\n\n            layer.setIcon(new IconDefault(\"green\"));\n\n            var div = L.DomUtil.get(\"ReverseGeocodedLocation_\" + layer.options.id + \"-\" + self._uid);\n            L.DomUtil.removeClass(div, \"GPreverseGeocodedLocationHighlight\");\n        }\n\n        // création de la couche où seront ajoutés les résultats\n        this._inputResultsLayer = new L.FeatureGroup();\n        map.addLayer(this._inputResultsLayer);\n\n        // ajout de chaque résultat à la couche (marker)\n        for (var i = 0; i < locations.length; i++) {\n            var location = locations[i];\n\n            if (!location) {\n                continue;\n            }\n\n            var options = {\n                id : i,\n                icon : new IconDefault(\"green\"),\n                riseOnHover : true,\n                draggable : false,\n                clickable : true,\n                zIndexOffset : 1000\n            };\n\n            var _marker = L.marker(L.latLng(location.position.x, location.position.y), options);\n\n            // creation du contenu de la popup\n            var popupContent = \"<ul>\";\n            var attributes = location.placeAttributes;\n            for (var attr in attributes) {\n                if (attributes.hasOwnProperty(attr)) {\n                    if (attr !== \"bbox\") {\n                        popupContent += \"<li>\";\n                        popupContent += \"<span class=\\\"gp-attname-others-span\\\">\" + attr.toUpperCase() + \" : </span>\";\n                        popupContent += attributes[attr];\n                        popupContent += \" </li>\";\n                    }\n                }\n            }\n            popupContent += \" </ul>\";\n\n            _marker.bindPopup(popupContent);\n\n            /** evenement mouseover sur le marker */\n            _marker.on(\"mouseover\", _setHighLight);\n\n            /** evenement mouseout sur le marker */\n            _marker.on(\"mouseout\", _resetHighLight);\n\n            this._inputResultsLayer.addLayer(_marker);\n        }\n    },\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on 'GPshowReverseGeocodingPicto' tag label\n     * (cf. ReverseGeocodingDOM._createShowReverseGeocodingPictoElement), and it cleans the component\n     * when it's closed.\n     *\n     * @private\n     */\n    onShowReverseGeocodingClick : function () {\n        var map = this._map;\n\n        // interactions declenchées à l'ouverture/fermeture du panneau\n        if (this._showReverseGeocodingContainer.checked) {\n            this._removeMapInteraction(map);\n        } else {\n            if (!this._waiting && !this._reverseGeocodingLocations.length) {\n                this._activateMapInteraction(map);\n            }\n        }\n    },\n\n    /**\n     * this method is called by event 'change' on 'GPreverseGeocodingCode' tag select\n     * (cf. ReverseGeocodingDOM._createReverseGeocodingFormModeChoiceGeocodingTypeElement).\n     * this value is saved as a parameter for reverseGeocode service.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onReverseGeocodingTypeChange : function (e) {\n        var idx = e.target.selectedIndex;\n        var value = e.target.options[idx].value;\n\n        if (!value) {\n            return;\n        }\n        logger.log(value);\n        this._currentGeocodingType = value;\n    },\n\n    /**\n     * this method is called by event 'change' on 'GPreverseGeocodingCode' tag select\n     * (cf. ReverseGeocodingDOM._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement).\n     * this value is saved as a parameter for reverseGeocode service.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onReverseGeocodingDelimitationChange : function (e) {\n        var idx = e.target.selectedIndex;\n        var value = e.target.options[idx].value;\n\n        if (!value) {\n            return;\n        }\n\n        logger.log(value);\n        this._currentGeocodingDelimitation = value;\n\n        // on supprime l'interaction précédente,\n        // ainsi que les géométries et valeurs stockées (filtres, position)\n        this._clearInputRequest();\n\n        // on met à jour l'interaction de la map en fonction de la nouvelle délimitation\n        var map = this._map;\n\n        // on supprime l'éventuelle précédente interaction\n        this._removeMapInteraction(map);\n        // on crée une nouvelle interaction\n        this._activateMapInteraction(map);\n    },\n\n    /**\n     * TODO this method is called by event 'click' on 'GPreverseGeocodingReturnPicto' div\n     * (cf. ReverseGeocodingDOM._createReverseGeocodingPanelReturnPictoElement),\n     * and clear geocoded location (from both list container and map)\n     *\n     * @private\n     */\n    onGPreverseGeocodingReturnPictoClick : function () {\n        var map = this._map;\n\n        // suppression des résultats précédents\n        this._clearLocations();\n        this._clearLocationsFeature(map);\n\n        // on efface les points qui ont pu être saisis précédemment\n        this._clearInputRequest();\n\n        // et on réactive l'interaction sur la map\n        this._activateMapInteraction(map);\n    },\n\n    /**\n     * TODO this methode is called by event 'submit' on reverseGeocoding form ('GPreverseGeocodingForm')\n     * (cf. ReverseGeocodingDOM._createReverseGeocodingPanelFormElement),\n     * it checks reverse geocode mandatory parameters,\n     * then call this._reverseGeocodingRequest() to generate and send request\n     *\n     * @private\n     */\n    onReverseGeocodingSubmit : function () {\n        // le paramètre position est obligatoire\n        if (!this._requestPosition) {\n            logger.log(\"missing position\");\n            return;\n        }\n\n        // si on n'a trouvé aucun droit, on evite une requête inutile ...\n        if (this._noRightManagement) {\n            return;\n        }\n\n        var map = this._map;\n        var self = this;\n        this._reverseGeocodingRequest({\n            position : self._requestPosition,\n            filterOptions : {\n                type : [self._currentGeocodingType]\n            },\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(results);\n                if (results) {\n                    var locations = results.locations;\n                    self._displayGeocodedLocations(locations);\n                    self._hideWaitingContainer();\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                self._hideWaitingContainer();\n\n                // suppression d'éventuels résultats précédents\n                self._clearLocations();\n                self._clearLocationsFeature(map);\n\n                // on efface les points qui ont été saisis précédemment\n                self._clearInputRequest();\n\n                logger.log(error.message);\n            }\n        });\n    },\n\n    /**\n     * TODO this method is called by event 'click' on 'ReverseGeocodedLocation_' div\n     * (cf. ReverseGeocodingDOM._createReverseGeocodingResultElement),\n     * and zoom to location ?\n     * TODO\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onReverseGeocodingResultClick : function (e) {\n        logger.log(\"onReverseGeocodingResultClick\", e);\n    },\n\n    /**\n     * TODO this method is called by event 'mouseover' on 'ReverseGeocodedLocation_' div\n     * (cf. ReverseGeocodingDOM._createReverseGeocodingResultElement),\n     * and changes style of matching marker on map (selected)\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onReverseGeocodingResultMouseOver : function (e) {\n        // récupération de l'id du résultat survolé\n        var idx = ID.index(e.target.id);\n\n        // on passe le texte en gras\n        if (e.target.classList) {\n            e.target.classList.add(\"GPreverseGeocodedLocationHighlight\");\n        }\n\n        if (!this._inputResultsLayer) {\n            return;\n        }\n\n        this._inputResultsLayer.eachLayer(function (layer) {\n            if (layer.options.id === parseInt(idx, 10)) {\n                layer.fire(\"mouseover\");\n            }\n        });\n    },\n\n    /**\n     * TODO this method is called by event 'mouseout' on 'ReverseGeocodedLocation_' div\n     * (cf. ReverseGeocodingDOM._createReverseGeocodingResultElement),\n     * and changes style of matching marker on map (default)\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onReverseGeocodingResultMouseOut : function (e) {\n        // récupération de l'id du résultat survolé\n        var idx = ID.index(e.target.id);\n\n        // on repasse le texte en style normal\n        if (e.target.classList) {\n            e.target.classList.remove(\"GPreverseGeocodedLocationHighlight\");\n        }\n\n        if (!this._inputResultsLayer) {\n            return;\n        }\n\n        this._inputResultsLayer.eachLayer(function (layer) {\n            if (layer.options.id === parseInt(idx, 10)) {\n                layer.fire(\"mouseout\");\n            }\n        });\n    },\n\n    // ################################################################### //\n    // ################################ clean ############################ //\n    // ################################################################### //\n\n    /**\n     * TODO this method clears previous location results\n     *\n     * @private\n     */\n    _clearLocations : function () {\n        this._reverseGeocodingLocations = [];\n        // on vide le container avec la liste des résultats\n        if (this._resultsListContainer) {\n            while (this._resultsListContainer.firstChild) {\n                this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);\n            }\n        }\n    },\n\n    /**\n     * TODO this method clears previous location results marker\n     * @param {Object} map - the map\n     *\n     * @private\n     */\n    _clearLocationsFeature : function (map) {\n        // suppression des anciens resultats\n        if (this._inputResultsLayer !== null) {\n            map.removeLayer(this._inputResultsLayer);\n            this._inputResultsLayer = null;\n        }\n    },\n\n    /**\n     * TODO this method clears previous input features (features, position and filters)\n     *\n     * @private\n     */\n    _clearInputRequest : function () {\n        // on supprime les valeurs stockées (filtres, position)\n        this._requestPosition = null;\n        this._requestCircleFilter = null;\n        this._requestBboxFilter = null;\n    },\n\n    // ################################################################### //\n    // ############################ Patience ############################# //\n    // ################################################################### //\n\n    /**\n     * this method displays waiting container and sets a timeout\n     *\n     * @private\n     */\n    _displayWaitingContainer : function () {\n        this._waitingContainer.className = \"GPreverseGeocodingCalcWaitingContainerVisible\";\n        this._waiting = true;\n\n        // mise en place d'un timeout pour réinitialiser le panel (cacher la patience)\n        // si on est toujours en attente (si la requête est bloquée par exemple)\n        if (this._timer) {\n            clearTimeout(this._timer);\n            this._timer = null;\n        }\n        var context = this;\n        this._timer = setTimeout(function () {\n            if (context._waiting === true) {\n                context._hideWaitingContainer();\n            } else {\n                if (context._timer) {\n                    clearTimeout(context._timer);\n                }\n            }\n        }, 16000);\n    },\n\n    /**\n     * this method hides waiting container and clears timeout\n     *\n     * @private\n     */\n    _hideWaitingContainer : function () {\n        if (this._waiting) {\n            this._waitingContainer.className = \"GPreverseGeocodingCalcWaitingContainerHidden\";\n            this._waiting = false;\n            clearTimeout(this._timer);\n            this._timer = null;\n        }\n    }\n\n});\n\nexport default ReverseGeocoding;\n","import ID from \"../Utils/SelectorID\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"RouteDOM\");\n\nvar RouteDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GProute\");\n        container.className = \"GPwidget\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################# Methods to display Main Panel ################### //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowRouteElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowRoute\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Show route control\n     * see event !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowRoutePictoElement : function () {\n        // contexte d'execution\n        var context = this;\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowRoutePicto\");\n        label.className = \"GPshowAdvancedToolPicto\";\n        label.htmlFor = this._addUID(\"GPshowRoute\");\n        label.title = \"Ouvrir le calcul d'itinéraire\";\n\n        // gestionnaire d'evenement :\n        // on ouvre le menu de saisie du calcul d'itiniraire\n        // L'ouverture/Fermeture permet de faire le menage\n        // (reinitialisation)\n        if (label.addEventListener) {\n            label.addEventListener(\"click\", function (e) {\n                context.onShowRoutePanelClick(e);\n            });\n        } else if (label.attachEvent) {\n            label.attachEvent(\"onclick\", function (e) {\n                context.onShowRoutePanelClick(e);\n            });\n        }\n\n        var spanOpen = document.createElement(\"span\");\n        spanOpen.id = this._addUID(\"GPshowRouteOpen\");\n        spanOpen.className = \"GPshowAdvancedToolOpen\";\n        label.appendChild(spanOpen);\n\n        return label;\n    },\n\n    // ################################################################### //\n    // ################## Methods to display Inputs Panel ################ //\n    // ################################################################### //\n\n    /**\n     * Create Container Panel\n     *\n     * FIXME\n     * don't call this._createRoutePanelHeaderElement\n     * don't call this._createRoutePanelFormElement\n     * don't call this._createRoutePanelResultsElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProutePanel\");\n        div.className = \"GPpanel\";\n\n        // div.appendChild(this._createRoutePanelHeaderElement());\n        // div.appendChild(this._createRoutePanelFormElement());\n        // div.appendChild(this._createRoutePanelResultsElement());\n\n        return div;\n    },\n\n    /**\n     * Create Header Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelHeaderElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader\";\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPpanelTitle\";\n        div.innerHTML = \"Calcul d'itinéraire\";\n        container.appendChild(div);\n\n        var divClose = document.createElement(\"div\");\n        divClose.id = this._addUID(\"GProutePanelClose\");\n        divClose.className = \"GPpanelClose\";\n        divClose.title = \"Masquer le panneau\";\n\n        // Link panel close / visibility checkbox\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowRoutePicto\")).click();\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowRoutePicto\")).click();\n            });\n        }\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * Create Form\n     * see evenement !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GProuteForm\");\n        form.setAttribute(\"onkeypress\", \"return event.keyCode != 13;\"); // FIXME hack pour desactiver l'execution via 'enter' au clavier !\n\n        form.addEventListener(\"submit\", function (e) {\n            logger.log(e);\n            e.preventDefault();\n\n            // points\n            var points = document.getElementsByClassName(self._addUID(\"GPlocationPoint\"));\n\n            // Must have at least two origin points\n            var start = points[0].childNodes[0].id;\n            var end = points[points.length - 1].childNodes[0].id;\n            var startID = ID.index(start);\n            var endID = ID.index(end);\n\n            if ((document.getElementById(self._addUID(\"GPlocationOrigin_\" + startID)).value === \"\" &&\n                    document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + startID)).value === \"\") ||\n                (document.getElementById(self._addUID(\"GPlocationOrigin_\" + endID)).value === \"\" &&\n                    document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + endID)).value === \"\")) {\n                return false;\n            }\n\n            // Send stages to results panel\n            var id;\n            document.getElementById(self._addUID(\"GProuteResultsStages\")).innerHTML = \"\";\n            for (var i = 0; i < points.length; i++) {\n                var tag = points[i].childNodes[0].id;\n                id = ID.index(tag);\n                if (document.getElementById(self._addUID(\"GPlocationPoint_\" + id)).className === \"GPflexInput GPlocationStageFlexInput\") {\n                    var resultStage = document.createElement(\"div\");\n                    resultStage.className = \"GProuteResultsStages\";\n                    var resultStageLabel = document.createElement(\"div\");\n                    resultStageLabel.className = \"GProuteResultStageLabel\";\n                    resultStageLabel.innerHTML = document.getElementById(self._addUID(\"GPlocationOriginLabel_\" + id)).innerHTML + \" :\";\n                    resultStage.appendChild(resultStageLabel);\n                    var resultStageValue = document.createElement(\"div\");\n                    resultStageValue.className = \"GProuteResultStageValue\";\n                    var elementCoords = document.getElementById(self._addUID(\"GPlocationOriginCoords_\" + id));\n                    var stageCoords = elementCoords.value;\n                    var visible = (elementCoords.className === \"GPlocationOriginVisible\");\n                    if (stageCoords !== null && stageCoords !== \"\" && visible) {\n                        resultStageValue.innerHTML = stageCoords;\n                    } else {\n                        resultStageValue.innerHTML = document.getElementById(self._addUID(\"GPlocationOrigin_\" + id)).value;\n                    }\n                    resultStage.appendChild(resultStageValue);\n                    if (resultStageValue.innerHTML !== \"\") {\n                        document.getElementById(self._addUID(\"GProuteResultsStages\")).appendChild(resultStage);\n                    }\n                }\n            }\n\n            // on peut récuperer les valeurs utiles pour les transmettre au service d'iti...\n            // - le mode de calcul\n            // - le mode de transport\n            // - les exclusions\n            // Les points sont déjà stockés dans l'application.\n\n            // computation mode params\n            var modeComputation = null;\n            if (document.getElementById(self._addUID(\"GProuteComputationSelect\"))) {\n                var select = document.getElementById(self._addUID(\"GProuteResultsComputationSelect\"));\n                select.selectedIndex = document.getElementById(self._addUID(\"GProuteComputationSelect\")).selectedIndex;\n                modeComputation = select.options[select.selectedIndex].value;\n            }\n\n            // transport mode params\n            var modeTransport = null;\n            // voiture ?\n            if (document.getElementById(self._addUID(\"GProuteTransportCar\"))) {\n                if (document.getElementById(self._addUID(\"GProuteTransportCar\")).checked) {\n                    modeTransport = document.getElementById(self._addUID(\"GProuteTransportCar\")).value;\n                }\n            }\n            // pieton ?\n            if (document.getElementById(self._addUID(\"GProuteTransportPedestrian\"))) {\n                if (document.getElementById(self._addUID(\"GProuteTransportPedestrian\")).checked) {\n                    modeTransport = document.getElementById(self._addUID(\"GProuteTransportPedestrian\")).value;\n                }\n            }\n\n            // exclusions params\n            var exclusions = [];\n            var exclusionsElement = document.getElementsByClassName(\"GProuteExclusionsOption\");\n            for (var j = 0; j < exclusionsElement.length; j++) {\n                id = exclusionsElement[j].htmlFor;\n                var el = document.getElementById(id);\n                if (!el.checked) {\n                    exclusions.push(el.value);\n                }\n            }\n\n            self.onRouteComputationSubmit({\n                computation : modeComputation,\n                transport : modeTransport,\n                exclusions : exclusions\n            });\n\n            // FIXME mise à jour du controle dans le composant JS !\n            // document.getElementById(self._addUID(\"GProuteForm\")).className = \"GProuteComponentHidden\";\n            // document.getElementById(self._addUID(\"GProuteResultsPanel\")).className = \"\";\n\n            return false;\n        });\n\n        return form;\n    },\n\n    /**\n     * Create Results Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelResultsElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GProuteResultsPanel\");\n        container.className = \"GProuteComponentHidden\";\n\n        container.appendChild(this._createRouteResultsStagesElement());\n        container.appendChild(this._createRouteResultsElement());\n\n        var divBorderUp = document.createElement(\"div\");\n        divBorderUp.className = \"GPfakeBorder GPfakeBorderLeft\";\n        container.appendChild(divBorderUp);\n\n        container.appendChild(this._createRouteShowResultsDetailsElement());\n\n        var labelShow = document.createElement(\"label\");\n        labelShow.htmlFor = this._addUID(\"GProuteResultsShowDetails\");\n        labelShow.innerHTML = \"Afficher le détail\";\n        container.appendChild(labelShow);\n\n        var labelHide = document.createElement(\"label\");\n        labelHide.htmlFor = this._addUID(\"GProuteResultsShowDetails\");\n        labelHide.innerHTML = \"Masquer le détail\";\n        container.appendChild(labelHide);\n\n        var divBorderDown = document.createElement(\"div\");\n        divBorderDown.className = \"GPfakeBorder\";\n        container.appendChild(divBorderDown);\n\n        container.appendChild(this._createRouteResultsDetailsElement());\n\n        return container;\n    },\n\n    /**\n     * Create Waiting Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRouteWaitingElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProuteCalcWaitingContainer\");\n        div.className = \"GProuteCalcWaitingContainerHidden\";\n\n        var p = document.createElement(\"p\");\n        p.className = \"GProuteCalcWaiting\";\n        p.innerHTML = \"Calcul en cours...\";\n\n        div.appendChild(p);\n\n        return div;\n    },\n    // ################################################################### //\n    // ############### Methods to the window results ##################### //\n    // ################################################################### //\n\n    /**\n     * Create Results Stages\n     * (results dynamically generate !)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRouteResultsStagesElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProuteResultsStages\");\n        return div;\n    },\n\n    /**\n     * Create Show Results\n     * see event!\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRouteResultsElement : function () {\n        // contexte\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GProuteResults\");\n\n        // FIXME Route results are dynamically filled in Javascript by route service\n        var divValue = document.createElement(\"div\");\n        divValue.id = this._addUID(\"GProuteResultsValues\");\n        container.appendChild(divValue);\n\n        var divMode = document.createElement(\"div\");\n        divMode.id = this._addUID(\"GProuteResultsMode\");\n\n        var select = document.createElement(\"select\");\n        select.id = this._addUID(\"GProuteResultsComputationSelect\");\n        select.className = \"GPinputSelect\";\n        // gestionnaire d'evenement :\n        // on stocke la valeur du mode de calcul, et on relance le calcul d'itiniraire\n        select.addEventListener(\"change\", function (e) {\n            self.onRouteModeComputationChangeAndRun(e);\n        });\n\n        var computes = [{\n            code : \"fastest\",\n            label : \"Plus rapide\"\n        }, {\n            code : \"shortest\",\n            label : \"Plus court\"\n        }];\n\n        for (var i = 0; i < computes.length; i++) {\n            var option = document.createElement(\"option\");\n            option.value = computes[i].code;\n            option.text = computes[i].label;\n            select.appendChild(option);\n        }\n        divMode.appendChild(select);\n        container.appendChild(divMode);\n\n        var divNew = document.createElement(\"div\");\n        divNew.id = this._addUID(\"GProuteResultsNew\");\n        divNew.title = \"Modifier le calcul\";\n        divNew.addEventListener(\"click\", function (e) {\n            document.getElementById(self._addUID(\"GProuteResultsPanel\")).className = \"GProuteComponentHidden\";\n            document.getElementById(self._addUID(\"GProuteForm\")).className = \"\";\n            self.onShowRouteResultsNewClick(e);\n        });\n        container.appendChild(divNew);\n\n        return container;\n    },\n\n    /**\n     * Add Results Duration and Distance\n     * (results dynamically generate !)\n     * see event!\n     * @param {Number} distance - distance\n     * @param {Number} duration - duration\n     * @param {Function} fconvert - fconvert\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _addRouteResultsValuesElement : function (distance, duration, fconvert) {\n        var div = document.getElementById(this._addUID(\"GProuteResultsValues\"));\n\n        // clean !\n        if (div.childElementCount) {\n            while (div.firstChild) {\n                div.removeChild(div.firstChild);\n            }\n        }\n\n        var containerDistance = document.createElement(\"div\");\n        containerDistance.className = \"GProuteResultsValue\";\n\n        var labelDistance = document.createElement(\"label\");\n        labelDistance.className = \"GProuteResultsValueLabel\";\n        labelDistance.innerHTML = \"Distance :\";\n        containerDistance.appendChild(labelDistance);\n\n        var distanceLabel = 0;\n        var isKm = parseInt(distance / 1000, 10);\n\n        if (!isKm) {\n            distanceLabel = Math.round(distance) + \" m\";\n        } else {\n            var distanceArrondi = Math.round(distance);\n            distanceArrondi = distanceArrondi / 1000;\n            distanceLabel = distanceArrondi + \" km\";\n        }\n\n        var divDistance = document.createElement(\"div\");\n        divDistance.id = this._addUID(\"GProuteResultsValueDist\");\n        divDistance.innerHTML = distanceLabel;\n        containerDistance.appendChild(divDistance);\n\n        div.appendChild(containerDistance);\n\n        var containerDuration = document.createElement(\"div\");\n        containerDuration.className = \"GProuteResultsValue\";\n\n        var labelDuration = document.createElement(\"label\");\n        labelDuration.className = \"GProuteResultsValueLabel\";\n        labelDuration.innerHTML = \"Durée :\";\n        containerDuration.appendChild(labelDuration);\n\n        var divDuration = document.createElement(\"div\");\n        divDuration.id = this._addUID(\"GProuteResultsValueDist\");\n        divDuration.innerHTML = fconvert(duration);\n        containerDuration.appendChild(divDuration);\n\n        div.appendChild(containerDuration);\n\n        return div;\n    },\n\n    /**\n     * Create Show Results Details\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRouteShowResultsDetailsElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GProuteResultsShowDetails\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     *  Create Results Details\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRouteResultsDetailsElement : function () {\n        // <!-- Route results details are dynamically filled in Javascript by route service -->\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProuteResultsDetails\");\n        return div;\n    },\n\n    /**\n     *  Add Results Details\n     * (results dynamically generate !)\n     * @param {Object[]} instructions - instructions\n     * @param {Function} fconvert - fconvert\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _addRouteResultsDetailsElement : function (instructions, fconvert) {\n        // contexte\n        var context = this;\n\n        var div = document.getElementById(this._addUID(\"GProuteResultsDetails\"));\n\n        // clean !\n        if (div.childElementCount) {\n            while (div.firstChild) {\n                div.removeChild(div.firstChild);\n            }\n        }\n\n        // calcul des valeurs cumulé !\n        var distanceCumul = 0;\n        var durationCumul = 0;\n\n        /* jshint -W083 */\n        for (var i = 0; i < instructions.length; i++) {\n            var id = i + 1;\n\n            var o = instructions[i];\n\n            var divNum = document.createElement(\"div\");\n            divNum.className = \"GProuteResultsDetailsNumber\";\n            divNum.innerHTML = id + \".\";\n            div.appendChild(divNum);\n\n            durationCumul += parseFloat(o.duration);\n            distanceCumul += parseFloat(o.distance);\n\n            var distance = 0;\n            var isCumulKm = parseInt(distanceCumul / 1000, 10);\n            if (!isCumulKm) {\n                distance = Math.round(distanceCumul) + \" m\";\n            } else {\n                var distanceArrondi = Math.round(distanceCumul);\n                distanceArrondi = distanceArrondi / 1000;\n                distance = distanceArrondi + \" km\";\n            }\n\n            var divIns = document.createElement(\"div\");\n            divIns.className = \"GProuteResultsDetailsInstruction\";\n            divIns.id = this._addUID(\"GProuteResultsDetailsInstruction_\" + id);\n            divIns.title = \"distance : \" + distance + \" / \" + \"temps : \" + fconvert(durationCumul);\n            divIns.innerHTML = o.instruction;\n\n            divIns.addEventListener(\"mouseover\", function (e) {\n                context.onRouteResultsDetailsMouseOver(e);\n            });\n            divIns.addEventListener(\"mouseout\", function (e) {\n                context.onRouteResultsDetailsMouseOut(e);\n            });\n            divIns.addEventListener(\"click\", function (e) {\n                // mode mobile !\n                if (typeof context.onRouteResultsDetailsClick === \"function\") {\n                    context.onRouteResultsDetailsClick(e);\n                }\n            });\n            div.appendChild(divIns);\n        }\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ################### Methods to the form points #################### //\n    // ################# OVERWRITTEN BY LOCATIONSELECTOR ! ################# //\n\n    /**\n     * Create Point\n     * see event !\n     * OVERWRITTEN BY LOCATIONSELECTOR !\n     * (version initial without LOCATIONSELECTOR PLUGIN)\n     * @param {Integer} n - n\n     * @param {String} text - text\n     * @param {Boolean} visibility - visibility\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormPointElement : function (n, text, visibility) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.id = \"GProutePoint\" + n;\n        div.className = (visibility) ? \"GPflexInput GProuteStageFlexInput\" : \"GPflexInput GProuteStageFlexInputHidden\";\n\n        var labelOrigin = document.createElement(\"label\");\n        labelOrigin.id = \"GProuteOriginLabel\" + n;\n        labelOrigin.htmlFor = \"GProuteOrigin\" + n;\n        labelOrigin.innerHTML = text;\n        labelOrigin.addEventListener(\"click\", function () {\n            var i = this.id.charAt(this.id.length - 1);\n            document.getElementById(\"GProuteOriginCoords\" + i).value = \"\";\n            for (var j = 1; j < 8; j++) {\n                document.getElementById(\"GProutePoint\" + j).style.display = \"flex\";\n            }\n            document.getElementById(\"GProuteForm\").className = \"\";\n            document.getElementById(\"GProuteOriginPointer\" + i).checked = false;\n            document.getElementById(\"GProuteOrigin\" + i).className = \"GProuteOriginVisible\";\n            document.getElementById(\"GProuteOriginCoords\" + i).className = \"GProuteOriginHidden\";\n        });\n        div.appendChild(labelOrigin);\n\n        var inputOrigin = document.createElement(\"input\");\n        inputOrigin.id = \"GProuteOrigin\" + n;\n        inputOrigin.className = \"GProuteOriginVisible\";\n        inputOrigin.type = \"text\";\n        inputOrigin.placeholder = \"Saisir une adresse\";\n        inputOrigin.addEventListener(\"keyup\", function (e) {\n            var charCode = e.which || e.keyCode;\n            if (charCode === 13 || charCode === 10) {\n                return;\n            }\n            var i = this.id.charAt(this.id.length - 1);\n            if (document.getElementById(\"GProuteOrigin\" + i).value.length > 2) {\n                document.getElementById(\"GProuteAutoCompleteList\" + i).style.display = \"block\";\n            } else {\n                document.getElementById(\"GProuteAutoCompleteList\" + i).style.display = \"none\";\n            }\n            // gestionnaire d'evenement :\n            // on récupère la valeur de saisie pour une requête sur le service d'autocompletion.\n            // le resultat de la requête nous permet de recuperer les coordonnées du point...\n            context.onAutoCompleteSearchText(e);\n        });\n        inputOrigin.addEventListener(\"blur\", function () {\n            var i = this.id.charAt(this.id.length - 1);\n            document.getElementById(\"GProuteAutoCompleteList\" + i).style.display = \"none\";\n        });\n        div.appendChild(inputOrigin);\n\n        var inputOriginCoord = document.createElement(\"input\");\n        inputOriginCoord.id = \"GProuteOriginCoords\" + n;\n        inputOriginCoord.className = \"GProuteOriginHidden\";\n        inputOriginCoord.type = \"text\";\n        inputOriginCoord.disabled = true;\n        div.appendChild(inputOriginCoord);\n\n        var inputOriginPointer = document.createElement(\"input\");\n        inputOriginPointer.id = \"GProuteOriginPointer\" + n;\n        inputOriginPointer.type = \"checkbox\";\n        div.appendChild(inputOriginPointer);\n\n        var labelOriginPointer = document.createElement(\"label\");\n        labelOriginPointer.id = \"GProuteOriginPointerImg\" + n;\n        labelOriginPointer.htmlFor = \"GProuteOriginPointer\" + n;\n        labelOriginPointer.className = \"GProuteOriginPointerImg\";\n        labelOriginPointer.title = \"Pointer un lieu sur la carte\";\n        labelOriginPointer.addEventListener(\"click\", function (evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var i = this.id.charAt(this.id.length - 1);\n            var j;\n            for (j = 1; j < 8; j++) {\n                if (i !== j) {\n                    document.getElementById(\"GProuteOriginPointer\" + j).checked = false;\n                    if (document.getElementById(\"GProuteOriginCoords\" + j).value === \"Pointer un lieu sur la carte\") {\n                        document.getElementById(\"GProuteOriginCoords\" + j).value = \"\";\n                        document.getElementById(\"GProuteOrigin\" + j).className = \"GProuteOriginVisible\";\n                        document.getElementById(\"GProuteOriginCoords\" + j).className = \"GProuteOriginHidden\";\n                    }\n                }\n            }\n            if (document.getElementById(\"GProuteOriginPointer\" + i).checked) {\n                document.getElementById(\"GProuteOriginCoords\" + i).value = \"\";\n                for (j = 1; j < 8; j++) {\n                    document.getElementById(\"GProutePoint\" + j).style.display = \"flex\";\n                }\n                document.getElementById(\"GProuteForm\").className = \"\";\n                document.getElementById(\"GProuteOriginPointer\" + i).checked = false;\n                document.getElementById(\"GProuteOrigin\" + i).className = \"GProuteOriginVisible\";\n                document.getElementById(\"GProuteOriginCoords\" + i).className = \"GProuteOriginHidden\";\n            } else {\n                document.getElementById(\"GProuteOriginCoords\" + i).value = \"Pointer un lieu sur la carte\";\n                for (j = 1; j < 8; j++) {\n                    if (i === j) {\n                        document.getElementById(\"GProutePoint\" + j).style.display = \"flex\";\n                    } else {\n                        document.getElementById(\"GProutePoint\" + j).style.display = \"none\";\n                    }\n                }\n                document.getElementById(\"GProuteForm\").className = \"GProuteFormMini\";\n                document.getElementById(\"GProuteOriginPointer\" + i).checked = true;\n                document.getElementById(\"GProuteOrigin\" + i).className = \"GProuteOriginHidden\";\n                document.getElementById(\"GProuteOriginCoords\" + i).className = \"GProuteOriginVisible\";\n            }\n            // gestionnaire d'evenement :\n            // on stocke la valeur du point, utilisée pour la requête sur le service de calcul d'itiniraire\n            context.onRouteMapPointClick(evt);\n        });\n        div.appendChild(labelOriginPointer);\n\n        return div;\n    },\n\n    /**\n     * Create Remove Point tag\n     * see event !\n     * OVERWRITTEN BY LOCATIONSELECTOR !\n     * (version initial without LOCATIONSELECTOR PLUGIN)\n     * @param {Integer} n - n\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormRemoveStageElement : function (n) {\n        // contexte d'execution\n        var context = this;\n\n        var divRm = document.createElement(\"div\");\n        divRm.id = \"GProuteStageRemove\" + n;\n        divRm.className = \"GProuteStageRemove\";\n        divRm.title = \"Supprimer l'étape\";\n        if (n !== 1 && n !== 7) {\n            divRm.addEventListener(\"click\", function (e) {\n                var i = this.id.charAt(this.id.length - 1);\n                document.getElementById(\"GProutePoint\" + i).className = \"GPflexInput GProuteStageFlexInputHidden\";\n                document.getElementById(\"GProuteOrigin\" + i).value = \"\";\n                document.getElementById(\"GProuteOrigin\" + i).className = \"GProuteOriginVisible\";\n                document.getElementById(\"GProuteOriginCoords\" + i).value = \"\";\n                document.getElementById(\"GProuteOriginCoords\" + i).className = \"GProuteOriginHidden\";\n                document.getElementById(\"GProuteStageAdd\").style.display = \"\";\n                // Moving up exclusions picto\n                // var exclusionsPictoTop = document.getElementById(\"GPshowRouteExclusionsPicto\").style.top;\n                // document.getElementById(\"GPshowRouteExclusionsPicto\").style.top = (parseInt(exclusionsPictoTop, 10) - 33).toString() + \"px\";\n                // gestionnaire d'evenement :\n                // on supprime le point, utilisé pour la requête sur le service d'itiniraire\n                context.onRouteRemovePointClick(e);\n            });\n        }\n        return divRm;\n    },\n\n    /**\n     * Create Add Point tag\n     * see event !\n     * OVERWRITTEN BY LOCATIONSELECTOR !\n     * (version initial without LOCATIONSELECTOR PLUGIN)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormAddStageElement : function () {\n        // contexte d'execution\n        var context = this;\n\n        var divAdd = document.createElement(\"div\");\n        divAdd.id = \"GProuteStageAdd\";\n        divAdd.title = \"Ajouter une étape\";\n        divAdd.addEventListener(\"click\", function (e) {\n            var lastStage = 1;\n            var nbStages = 0;\n            for (var i = 2; i < 7; i++) {\n                if (document.getElementById(\"GProutePoint\" + i).className === \"GPflexInput GProuteStageFlexInputHidden\") {\n                    if (lastStage === 1) {\n                        lastStage = i;\n                    }\n                } else {\n                    nbStages++;\n                }\n            }\n            if (lastStage < 7) {\n                document.getElementById(\"GProutePoint\" + lastStage).className = \"GPflexInput GProuteStageFlexInput\";\n                // Moving down exclusions picto\n                // var exclusionsPictoTop = document.getElementById(\"GPshowRouteExclusionsPicto\").style.top;\n                // document.getElementById(\"GPshowRouteExclusionsPicto\").style.top = (parseInt(exclusionsPictoTop, 10) + 33).toString() + \"px\";\n            }\n            if (nbStages === 4) {\n                document.getElementById(\"GProuteStageAdd\").style.display = \"none\";\n            }\n            // gestionnaire d'evenement :\n            // on ajoute le point, utilisé pour la requête sur le service d'itiniraire\n            context.onRouteAddPointClick(e);\n        });\n\n        return divAdd;\n    },\n\n    /**\n     * Create Results autocompletion to the point\n     * see event!\n     * OVERWRITTEN BY LOCATIONSELECTOR !\n     * (version initial without LOCATIONSELECTOR PLUGIN)\n     * @param {Integer} n - n\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormAutoCompleteListElement : function (n) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.id = \"GProuteAutoCompleteList\" + n;\n        div.className = \"GPadvancedAutoCompleteList\";\n\n        if (div.addEventListener) {\n            div.addEventListener(\"click\", function (e) {\n                context.onAutoCompletedResultsItemClick(e);\n                document.getElementById(\"GProuteAutoCompleteList\" + n).style.display = \"none\";\n            }, false);\n        } else if (div.attachEvent) {\n            div.attachEvent(\"onclick\", function (e) {\n                context.onAutoCompletedResultsItemClick(e);\n                document.getElementById(\"GProuteAutoCompleteList\" + n).style.display = \"none\";\n            });\n        }\n\n        // Proposals are dynamically filled in Javascript by autocomplete service\n        // <div class=\"GPautoCompleteProposal\">...</div>\n\n        return div;\n    },\n\n    /**\n     * Autocompletion result to a point.\n     * Proposals are dynamically filled in Javascript by autocomplete service\n     * OVERWRITTEN BY LOCATIONSELECTOR !\n     * (version initial without LOCATIONSELECTOR PLUGIN)\n     *\n     *\n     * @param {Object} location - suggested location results\n     * @param {Number} n  - number of the point\n     * @param {Number} id - ID\n     */\n    _createRouteAutoCompletedLocationElement : function (location, n, id) {\n        var container = document.getElementById(\"GProuteAutoCompleteList\" + n);\n\n        var div = document.createElement(\"div\");\n        div.id = \"AutoCompletedLocation\" + id;\n        div.className = \"GPautoCompleteProposal\";\n        div.innerHTML = location.fullText;\n\n        container.appendChild(div);\n    },\n\n    // ################################################################### //\n    // ############## Methods to the choice mode into form ############### //\n    // ################################################################### //\n\n    /**\n     * Create Container to Mode choice transport\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormModeChoiceElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProuteModeChoice\");\n\n        // div.appendChild(this._createRoutePanelFormModeChoiceTransportElement());\n        // div.appendChild(this._createRoutePanelFormModeChoiceComputeElement());\n\n        return div;\n    },\n\n    /**\n     * Create Mode choice transport\n     * see event !\n     * FIXME event not useful\n     * @param {String[]} transports - transports\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormModeChoiceTransportElement : function (transports) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProuteTransportChoice\");\n\n        var span = document.createElement(\"span\");\n        span.className = \"GProuteModeLabel\";\n        span.innerHTML = \"Mode de transport\";\n        div.appendChild(span);\n\n        /* jshint -W083 */\n        for (var i = 0; i < transports.length; i++) {\n            var transport = transports[i];\n\n            if (transport === \"Voiture\") {\n                var inputCar = document.createElement(\"input\");\n                inputCar.id = this._addUID(\"GProuteTransportCar\");\n                inputCar.type = \"radio\";\n                inputCar.name = \"GProuteTransport\";\n                inputCar.value = \"Voiture\";\n                if (i === 0) {\n                    inputCar.checked = true;\n                }\n                // gestionnaire d'evenement :\n                // on stocke le mode de transport,\n                // utilisation pour la requête sur le service de calcul d'itiniraire\n                if (inputCar.addEventListener) {\n                    inputCar.addEventListener(\"change\", function (e) {\n                        context.onRouteModeTransportChange(e);\n                    });\n                } else if (inputCar.attachEvent) {\n                    inputCar.attachEvent(\"onchange\", function (e) {\n                        context.onRouteModeTransportChange(e);\n                    });\n                }\n                div.appendChild(inputCar);\n\n                var labelCar = document.createElement(\"label\");\n                labelCar.className = \"GProuteTransportImg\";\n                labelCar.htmlFor = this._addUID(\"GProuteTransportCar\");\n                labelCar.title = \"Voiture\";\n                div.appendChild(labelCar);\n            }\n\n            if (transport === \"Pieton\") {\n                var inputPedestrian = document.createElement(\"input\");\n                inputPedestrian.id = this._addUID(\"GProuteTransportPedestrian\");\n                inputPedestrian.type = \"radio\";\n                inputPedestrian.name = \"GProuteTransport\";\n                inputPedestrian.value = \"Pieton\";\n                if (i === 0) {\n                    inputPedestrian.checked = true;\n                }\n                // gestionnaire d'evenement :\n                // on stocke le mode de transport,\n                // utilisation pour la requête sur le service de calcul d'itiniraire\n                if (inputPedestrian.addEventListener) {\n                    inputPedestrian.addEventListener(\"change\", function (e) {\n                        context.onRouteModeTransportChange(e);\n                    });\n                } else if (inputPedestrian.attachEvent) {\n                    inputPedestrian.attachEvent(\"onchange\", function (e) {\n                        context.onRouteModeTransportChange(e);\n                    });\n                }\n                div.appendChild(inputPedestrian);\n\n                var labelPedestrian = document.createElement(\"label\");\n                labelPedestrian.className = \"GProuteTransportImg\";\n                labelPedestrian.htmlFor = this._addUID(\"GProuteTransportPedestrian\");\n                labelPedestrian.title = \"Piéton\";\n                div.appendChild(labelPedestrian);\n            }\n        }\n\n        return div;\n    },\n\n    /**\n     * Create Mode choice computation\n     * see event!\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormModeChoiceComputeElement : function () {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProuteComputationChoice\");\n\n        var label = document.createElement(\"label\");\n        label.htmlFor = this._addUID(\"GProuteComputationSelect\");\n        label.innerHTML = \"Mode de calcul\";\n        var span = document.createElement(\"span\");\n        span.className = \"GProuteModeLabel\";\n        span.appendChild(label);\n        div.appendChild(span);\n\n        var select = document.createElement(\"select\");\n        select.id = this._addUID(\"GProuteComputationSelect\");\n        select.className = \"GPinputSelect\";\n        // gestionnaire d'evenement :\n        // on stocke la valeur du mode de calcul,\n        // utilisation pour la requête sur le service de calcul d'itiniraire\n        select.addEventListener(\"change\", function (e) {\n            context.onRouteModeComputationChange(e);\n        });\n\n        var computes = [{\n            code : \"fastest\",\n            label : \"Plus rapide\"\n        }, {\n            code : \"shortest\",\n            label : \"Plus court\"\n        }];\n\n        for (var i = 0; i < computes.length; i++) {\n            var option = document.createElement(\"option\");\n            option.value = computes[i].code;\n            option.text = computes[i].label;\n            select.appendChild(option);\n        }\n        div.appendChild(select);\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ################# Methods to the choice exclusions ################ //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing Exclusions Options\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowRouteExclusionsElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowRouteExclusions\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Label to Exclusions Options\n     * see event !\n     * FIXME event not useful\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowRouteExclusionsPictoElement : function () {\n        // contexte d'execution\n        var context = this;\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowRouteExclusionsPicto\");\n        label.className = \"GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto\";\n        label.htmlFor = this._addUID(\"GPshowRouteExclusions\");\n        label.title = \"Exclusions\";\n        // label.style.top = \"185px\";\n\n        // gestionnaire d'evenement :\n        // on ouvre le menu des options des exclusions\n        if (label.addEventListener) {\n            label.addEventListener(\"click\", function (e) {\n                context.onShowRouteExclusionsClick(e);\n            });\n        } else if (label.attachEvent) {\n            label.attachEvent(\"onclick\", function (e) {\n                context.onShowRouteExclusionsClick(e);\n            });\n        }\n\n        return label;\n    },\n\n    /**\n     * Create Container to Exclusions\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormExclusionsElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GProuteExclusions\");\n\n        var span = document.createElement(\"span\");\n        span.className = \"GProuteExclusionsLabel\";\n        span.innerHTML = \"Passages autorisés\";\n        div.appendChild(span);\n\n        // div.appendChild(this._createRoutePanelFormExclusionOptionsElement());\n\n        return div;\n    },\n\n    /**\n     * Create Exclusions Options\n     * see event !\n     * FIXME event not useful\n     * @param {Object[]} exclusions - exclusions\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRoutePanelFormExclusionOptionsElement : function (exclusions) {\n        // contexte d'execution\n        var context = this;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GProuteExclusionsOptions\";\n\n        /* jshint -W083 */\n        for (var value in exclusions) {\n            if (exclusions.hasOwnProperty(value)) {\n                var status = exclusions[value];\n                switch (value) {\n                    case \"toll\":\n                        var inputToll = document.createElement(\"input\");\n                        inputToll.id = this._addUID(\"GProuteExclusionsToll\");\n                        inputToll.type = \"checkbox\";\n                        inputToll.value = \"Toll\";\n                        inputToll.checked = !status;\n                        // gestionnaire d'evenement :\n                        // on stocke l'exclusion,\n                        // utilisation pour la requête sur le service de calcul d'itiniraire\n                        if (inputToll.addEventListener) {\n                            inputToll.addEventListener(\"change\", function (e) {\n                                context.onRouteExclusionsChange(e);\n                            });\n                        } else if (inputToll.attachEvent) {\n                            inputToll.attachEvent(\"onchange\", function (e) {\n                                context.onRouteExclusionsChange(e);\n                            });\n                        }\n                        div.appendChild(inputToll);\n\n                        var labelToll = document.createElement(\"label\");\n                        labelToll.className = \"GProuteExclusionsOption\";\n                        labelToll.htmlFor = this._addUID(\"GProuteExclusionsToll\");\n                        labelToll.innerHTML = \"Péages\";\n                        div.appendChild(labelToll);\n                        break;\n\n                    case \"tunnel\":\n                        var inputTunnel = document.createElement(\"input\");\n                        inputTunnel.id = this._addUID(\"GProuteExclusionsTunnel\");\n                        inputTunnel.type = \"checkbox\";\n                        inputTunnel.value = \"Tunnel\";\n                        inputTunnel.checked = !status;\n                        // gestionnaire d'evenement :\n                        // on stocke l'exclusion,\n                        // utilisation pour la requête sur le service de calcul d'itiniraire\n                        if (inputTunnel.addEventListener) {\n                            inputTunnel.addEventListener(\"change\", function (e) {\n                                context.onRouteExclusionsChange(e);\n                            });\n                        } else if (inputTunnel.attachEvent) {\n                            inputTunnel.attachEvent(\"onchange\", function (e) {\n                                context.onRouteExclusionsChange(e);\n                            });\n                        }\n                        div.appendChild(inputTunnel);\n\n                        var labelTunnel = document.createElement(\"label\");\n                        labelTunnel.className = \"GProuteExclusionsOption\";\n                        labelTunnel.htmlFor = this._addUID(\"GProuteExclusionsTunnel\");\n                        labelTunnel.innerHTML = \"Tunnels\";\n                        div.appendChild(labelTunnel);\n                        break;\n\n                    case \"bridge\":\n                        var inputBridge = document.createElement(\"input\");\n                        inputBridge.id = this._addUID(\"GProuteExclusionsBridge\");\n                        inputBridge.type = \"checkbox\";\n                        inputBridge.value = \"Bridge\";\n                        inputBridge.checked = !status;\n                        // gestionnaire d'evenement :\n                        // on stocke l'exclusion,\n                        // utilisation pour la requête sur le service de calcul d'itiniraire\n                        if (inputBridge.addEventListener) {\n                            inputBridge.addEventListener(\"change\", function (e) {\n                                context.onRouteExclusionsChange(e);\n                            });\n                        } else if (inputBridge.attachEvent) {\n                            inputBridge.attachEvent(\"onchange\", function (e) {\n                                context.onRouteExclusionsChange(e);\n                            });\n                        }\n                        div.appendChild(inputBridge);\n\n                        var labelBridge = document.createElement(\"label\");\n                        labelBridge.className = \"GProuteExclusionsOption\";\n                        labelBridge.htmlFor = this._addUID(\"GProuteExclusionsBridge\");\n                        labelBridge.innerHTML = \"Ponts\";\n                        div.appendChild(labelBridge);\n                        break;\n                }\n            }\n        }\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ############################### Submit Form ####################### //\n    // ################################################################### //\n\n    /**\n     * Create Submit Form Element\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRouteSubmitFormElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GProuteSubmit\");\n        input.className = \"GPinputSubmit\";\n        input.type = \"submit\";\n        input.value = \"Calculer\";\n\n        return input;\n    },\n\n    // ################################################################### //\n    // ############################### Reset picto ####################### //\n    // ################################################################### //\n\n    /**\n     * Create Reset Picto Element\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createRouteFormResetElement : function () {\n        var self = this;\n\n        var divReset = document.createElement(\"div\");\n        divReset.id = this._addUID(\"GProuteReset\");\n        divReset.title = \"Réinitialiser les paramètres\";\n        divReset.addEventListener(\"click\", function (e) {\n            self.onRouteResetClick(e);\n        });\n\n        return divReset;\n    }\n};\n\nexport default RouteDOM;\n","import Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport RightManagement from \"../../Common/Utils/CheckRightManagement\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport LocationSelector from \"./LocationSelector\";\nimport RouteDOM from \"../../Common/Controls/RouteDOM\";\n\nvar logger = Logger.getLogger(\"route(plus)\");\n\n/**\n * @classdesc\n *\n * Leaflet Control Class to compute and display route between start and end points using routing service of the geoportal platform.\n *\n * Use {@link module:Controls.Route L.geoportalControl.Route()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#control\" target=\"_blank\">L.Control</a> native class.\n *\n * @namespace\n * @alias L.geoportalControl.Route\n */\nvar Route = L.Control.extend(/** @lends L.geoportalControl.Route.prototype */ {\n\n    includes : RouteDOM,\n\n    /**\n     * Options du service\n     *\n     * @private\n     */\n    options : {\n        position : \"topleft\",\n        collapsed : true, // plier !\n        graphs : [\"Voiture\", \"Pieton\"],\n        exclusions : {\n            toll : false,\n            tunnel : false,\n            bridge : false\n        },\n        disableReverse : false,\n        routeOptions : {}, // FIXME a t on besoin des options de ce service ?\n        autocompleteOptions : {}\n    },\n\n    /**\n     * @constructor Route\n     * @private\n     * @param {Object} options - options for function call.\n     * @param {String}   [options.apiKey] - API key, mandatory if autoconf service has not been charged in advance\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {String}  [options.position = \"topleft\"] - position of component into the map, 'topleft' by default\n     * @param {Boolean} [options.collapsed = false] - collapse mode, false by default\n     * @param {Object}  [options.exclusions = {\"toll\" : false, \"tunnel\" : false, \"bridge\" : false}] - list of exclusions with status\n     * @param {Array}   [options.graphs = [\"Voiture\", \"Pieton\"]] - list of resources, by default : [\"Voiture\", \"Pieton\"], and the first element is selected\n     * @param {Boolean} [options.disableReverse = false] - whether to enable/disable the reverse geocoding\n     * @param {Object}  [options.autocompleteOptions = {}] - options of autocomplete service\n     * @param {Object}  [options.routeOptions = {}] - options of route service\n     * @example\n     *  var route = L.geoportalControl.Route({\n     *      position : \"topright\",\n     *      collapsed : true,\n     *      exclusions : {\n     *         \"toll\" : true,\n     *         \"bridge\" : false,\n     *         \"tunnel\" : true\n     *      },\n     *      graphs : ['Pieton', 'Voiture'],\n     *      autocompleteOptions : {},\n     *      routeOptions : {}\n     *  });\n     */\n    initialize : function (options) {\n        // on transmet les options au controle\n        L.Util.setOptions(this, options);\n\n        /** uuid */\n        this._uid = ID.generate();\n\n        // initialisation\n        this._initTransport();\n        this._initExclusions();\n        this._initComputation();\n\n        /** container principaux */\n        this._showRouteContainer = null;\n        this._pictoRouteContainer = null;\n        this._waitingContainer = null;\n        this._formRouteContainer = null;\n        this._resultsRouteContainer = null;\n\n        /** detection du support : desktop ou tactile */\n        this._isDesktop = this._detectSupport();\n\n        /** liste de points selectionnée */\n        this._currentPoints = [];\n\n        /** Mode de transport selectionné : 'Voiture' ou 'Pieton' */\n        this._currentTransport = null;\n\n        /** Mode de calcul selectionné : 'Plus rapide' ou 'plus court' */\n        this._currentComputation = null;\n\n        /** Exclusions selectionnées : Tunnel, Toll et Bridge */\n        this._currentExclusions = [];\n\n        /** la geometrie du parcours */\n        this._geojsonRoute = null;\n\n        /** la geometrie des troncons */\n        this._geojsonSections = null;\n\n        /** si un calcul est en cours ou non */\n        this._waiting = false;\n        /** timer pour cacher la patience après un certain temps */\n        this._timer = null;\n\n        /**\n         * reponse du service\n         * Ex. {\n         *   totalTime, totalDistance, bbox, routeGeometry,\n         *   routeInstructions : [{duration, distance, code, instruction, bbox, geometry}]\n         * }\n         */\n        this._currentRouteInformations = null;\n\n        /**\n         * liste des ressources avec droits par service\n         * Ex. {\n         *   \"Route\" : {\n         *       key : \"ger4g456re45er456t4er5ge5\",\n         *       resources : [\"Pieton\", \"Voiture\"]\n         *   }\n         * }\n         */\n        this._resources = {};\n\n        /** aucun droits sur les ressources */\n        this._noRightManagement = false;\n\n        // gestion des droits sur les ressources/services\n        this._checkRightsManagement();\n    },\n\n    /**\n     * this method is called by this.addTo(map) when the control is added on the map\n     * and fills variable 'this._container = this.onAdd(map)',\n     * and create or disable events on map.\n     *\n     * @param {Object} map - the map\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    onAdd : function (map) {\n        // initialisation du DOM du composant\n        var container = this._container = this._initLayout(map);\n\n        // deactivate of events that may interfere with the map\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        return container;\n    },\n\n    /**\n     * TODO this method is called when the control is removed from the map\n     * and removes events on map.\n     *\n     * @private\n     */\n    onRemove : function (/* map */) {},\n\n    // ################################################################### //\n    // ####################### init application ########################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initTransport : function () {\n        // Mode de transport selectionné\n        this._currentTransport = \"Voiture\"; // par defaut\n\n        // par defaut\n        var transport = this.options.graphs;\n        if (!transport || transport.length === 0) {\n            this.options.graphs = [\"Voiture\", \"Pieton\"];\n        }\n\n        // option\n        if (L.Util.isArray(transport) && transport.length) {\n            // FIXME pb si le 1er graphe n'est pas une ressource connue !\n            if (transport[0] === \"Voiture\" || transport[0] === \"Pieton\") {\n                this._currentTransport = transport[0];\n            }\n        }\n\n        // TODO option sur le service\n        var serviceOptions = this.options.routeOptions;\n        if (serviceOptions.graph) {\n            this._currentTransport = serviceOptions.graph;\n        }\n    },\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initComputation : function () {\n        // Mode de calcul selectionné\n        this._currentComputation = \"fastest\"; // par defaut\n\n        // TODO option sur le service\n        var serviceOptions = this.options.routeOptions;\n        if (serviceOptions.routePreference) {\n            this._currentComputation = serviceOptions.routePreference;\n        }\n    },\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initExclusions : function () {\n        // Exclusions selectionnées : Tunnel, Toll et Bridge\n        this._currentExclusions = []; // par defaut\n\n        // par defaut\n        var exclusion = this.options.exclusions;\n        if (!exclusion || Object.keys(exclusion).length === 0) {\n            this.options.exclusions = {\n                toll : false,\n                tunnel : false,\n                bridge : false\n            };\n        }\n\n        // option\n        if (exclusion && Object.keys(exclusion).length) {\n            for (var k in exclusion) {\n                if (exclusion.hasOwnProperty(k)) {\n                    if (exclusion.k) {\n                        this._currentExclusions.push(k);\n                    }\n                }\n            }\n        }\n\n        // TODO option sur le service\n        var serviceOptions = this.options.routeOptions;\n        if (L.Util.isArray(serviceOptions.exclusions)) {\n            this._currentExclusions = serviceOptions.exclusions;\n        }\n    },\n\n    // ################################################################### //\n    // ############################## other init ######################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by constructor\n     * and check the rights to resources\n     * FIXME à revoir...\n     *\n     * @private\n     */\n    _checkRightsManagement : function () {\n        var _opts = null;\n        var _res = [];\n        var _key = null;\n\n        // les ressources du service du calcul d'Itineraire\n        _key = this.options.routeOptions.apiKey;\n        _opts = this.options.routeOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = [\"Voiture\", \"Pieton\"];\n        }\n\n        var rightManagementRoute = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"Itineraire\"]\n        });\n\n        // les ressources du service d'autocompletion\n        _key = this.options.autocompleteOptions.apiKey;\n        _opts = this.options.autocompleteOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = [\n                \"StreetAddress\",\n                \"PositionOfInterest\"\n                // \"CadastralParcel\",\n                // \"Administratif\"\n            ];\n        }\n\n        var rightManagementAutoComplete = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"AutoCompletion\"]\n        });\n\n        // au cas où pas de droit !\n        if (!rightManagementRoute && !rightManagementAutoComplete) {\n            this._noRightManagement = true;\n        }\n\n        // FIXME je reconstruis differement la structure pour la gestion des clefs differentes\n        // pour chaque service...\n        if (rightManagementAutoComplete) {\n            this._resources[\"AutoCompletion\"] = {};\n            this._resources[\"AutoCompletion\"][\"resources\"] = rightManagementAutoComplete[\"AutoCompletion\"];\n            this._resources[\"AutoCompletion\"][\"key\"] = rightManagementAutoComplete[\"key\"];\n        }\n\n        if (rightManagementRoute) {\n            this._resources[\"Itineraire\"] = {};\n            this._resources[\"Itineraire\"][\"resources\"] = rightManagementRoute[\"Itineraire\"];\n            this._resources[\"Itineraire\"][\"key\"] = rightManagementRoute[\"key\"];\n        }\n    },\n\n    /**\n     * TODO this method is called by the constructor.\n     * this information is useful to switch to touch mode.\n     * Detection : test for desktop or tactile\n     *\n     * @returns {Boolean} is desktop\n     *\n     * @private\n     */\n    _detectSupport : function () {\n        // TODO\n        // Choix de gérer la détection dans le code du composant au lieu du DOM car :\n        // Utilisation de l'implémentation Leaflet\n        // http://leafletjs.com/reference.html#browser\n\n        var isDesktop = true;\n        var userAgent = window.navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf(\"iphone\") !== -1 ||\n            userAgent.indexOf(\"ipod\") !== -1 ||\n            userAgent.indexOf(\"ipad\") !== -1 ||\n            userAgent.indexOf(\"android\") !== -1 ||\n            userAgent.indexOf(\"mobile\") !== -1 ||\n            userAgent.indexOf(\"blackberry\") !== -1 ||\n            userAgent.indexOf(\"tablet\") !== -1 ||\n            userAgent.indexOf(\"phone\") !== -1 ||\n            userAgent.indexOf(\"touch\") !== -1) {\n            isDesktop = false;\n        }\n\n        if (userAgent.indexOf(\"msie\") !== -1 ||\n            userAgent.indexOf(\"trident\") !== -1) {\n            isDesktop = true;\n        }\n\n        return isDesktop;\n    },\n\n    // ################################################################### //\n    // ########################### init dom ############################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd(map)\n     * and initialize the container HTMLElement\n     *\n     * @param {Object} map - the map\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _initLayout : function (map) {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var inputShow = this._showRouteContainer = this._createShowRouteElement();\n        container.appendChild(inputShow);\n\n        // mode \"collapsed\"\n        if (!this.options.collapsed) {\n            inputShow.checked = true;\n        }\n\n        var picto = this._pictoRouteContainer = this._createShowRoutePictoElement();\n        container.appendChild(picto);\n\n        var routePanel = this._createRoutePanelElement();\n\n        // header form\n        var routeHeader = this._createRoutePanelHeaderElement();\n        routePanel.appendChild(routeHeader);\n\n        // form\n        var routeForm = this._formRouteContainer = this._createRoutePanelFormElement();\n\n        // form: menu des points\n        var points = this._createRoutePanelFormPointsElement(map);\n        for (var i = 0; i < points.length; i++) {\n            routeForm.appendChild(points[i]);\n        }\n\n        // form: menu des modes\n        var choice = this._createRoutePanelFormModeChoiceElement();\n        choice.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));\n        choice.appendChild(this._createRoutePanelFormModeChoiceComputeElement());\n        routeForm.appendChild(choice);\n\n        // form: menu des exclusions\n        routeForm.appendChild(this._createShowRouteExclusionsElement());\n        routeForm.appendChild(this._createShowRouteExclusionsPictoElement());\n        var exclusion = this._createRoutePanelFormExclusionsElement();\n        exclusion.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions));\n        routeForm.appendChild(exclusion);\n\n        // form: bouton du calcul\n        var submit = this._createRouteSubmitFormElement();\n        routeForm.appendChild(submit);\n\n        routePanel.appendChild(routeForm);\n\n        // results\n        var routeResults = this._resultsRouteContainer = this._createRoutePanelResultsElement();\n        routePanel.appendChild(routeResults);\n\n        // waiting\n        var waiting = this._waitingContainer = this._createRouteWaitingElement();\n        routePanel.appendChild(waiting);\n\n        container.appendChild(routePanel);\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ############################## DOM ################################ //\n    // ################################################################### //\n\n    /**\n     * Create List Points\n     * FIXME OVERWRITTEN RouteDOM._createRoutePanelFormPointsElement() !\n     *\n     * @param {Object} map - the map\n     *\n     * @returns {Array} List DOM element\n     *\n     * @private\n     */\n    _createRoutePanelFormPointsElement : function (map) {\n        var points = [];\n\n        var count = 1;\n        // point de depart\n        var start = new LocationSelector({\n            apiKey : this.options.apiKey || null,\n            tag : {\n                id : count,\n                unique : this._uid,\n                label : \"Départ\",\n                color : \"blue\",\n                display : true\n            },\n            disableReverse : this.options.disableReverse,\n            autocompleteOptions : this.options.autocompleteOptions || null\n        });\n        start.setMap(map);\n\n        var opts = this.options.routeOptions;\n\n        if (opts.startPoint) {\n            start._inputAutoCompleteContainer.value = opts.startPoint.x + \" , \" + opts.startPoint.y;\n            start.setCoordinate({\n                lng : opts.startPoint.x,\n                lat : opts.startPoint.y\n            });\n        }\n\n        points.push(start.getContainer());\n        this._currentPoints.push(start);\n        // points intermediaires\n        for (count = 2; count < 7; count++) {\n            var step = new LocationSelector({\n                apiKey : this.options.apiKey || null,\n                tag : {\n                    id : count,\n                    unique : this._uid,\n                    label : \"Etape\",\n                    color : \"green\",\n                    display : false,\n                    removeOption : true\n                },\n                disableReverse : this.options.disableReverse,\n                autocompleteOptions : this.options.autocompleteOptions || null\n            });\n            step.setMap(map);\n            points.push(step.getContainer());\n            this._currentPoints.push(step);\n        }\n        // point d'arrivé\n        var end = new LocationSelector({\n            apiKey : this.options.apiKey || null,\n            tag : {\n                id : count,\n                unique : this._uid,\n                label : \"Arrivée\",\n                color : \"red\",\n                display : true,\n                addOption : true,\n                removeOption : false\n            },\n            disableReverse : this.options.disableReverse,\n            autocompleteOptions : this.options.autocompleteOptions || null\n        });\n        end.setMap(map);\n\n        if (opts.endPoint) {\n            end._inputAutoCompleteContainer.value = opts.endPoint.x + \" , \" + opts.endPoint.y;\n            end.setCoordinate({\n                lng : opts.endPoint.x,\n                lat : opts.endPoint.y\n            });\n        }\n\n        points.push(end.getContainer());\n        this._currentPoints.push(end);\n\n        return points;\n    },\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on ''\n     * tag label (cf. this._createShowRoutePictoElement),\n     * and it cleans all value of input.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onShowRoutePanelClick : function (e) {\n        logger.log(\"onShowRoutePanelClick\", e);\n        // clean !\n        if (!this._geojsonSections) {\n            this._clear();\n        }\n    },\n\n    /**\n     * this method is called by event 'change' on '' tag select\n     * (cf. this.).\n     * this value is saved as a parameter for the service route.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onRouteModeComputationChange : function (e) {\n        logger.log(\"onRouteModeComputationChange\", e);\n        var idx = e.target.selectedIndex;\n        var value = e.target.options[idx].value;\n\n        if (!value) {\n            return;\n        }\n\n        logger.log(value);\n        this._currentComputation = value;\n    },\n\n    /**\n     * this method is called by event 'change' on '' tag select\n     * (cf. this.).\n     * this value is saved as a parameter for the service route,\n     * and this launches the route request !\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onRouteModeComputationChangeAndRun : function (e) {\n        logger.log(\"onRouteModeComputationChangeAndRun\", e);\n\n        // event choice computation\n        this.onRouteModeComputationChange(e);\n\n        // clean avant un nouveau calcul !\n        this._clearRouteResultsDetails();\n        this._clearRouteResultsGeometry();\n        this._clearRouteResultsFeatureGeometry();\n\n        // submit request\n        this.onRouteComputationSubmit({\n            computation : this._currentComputation,\n            transport : this._currentTransport,\n            exclusions : this._currentExclusions\n        });\n    },\n\n    /**\n     * this method is called by event 'change' on '' tag input\n     * (cf. this.).\n     * this value is saved as a parameter for the service route.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onRouteModeTransportChange : function (e) {\n        logger.log(\"onRouteModeTransportChange\", e);\n        var value = e.target.value;\n\n        if (!value) {\n            return;\n        }\n\n        logger.log(value);\n        this._currentTransport = value;\n    },\n\n    /**\n     * this method is called by event 'click' on '' tag input\n     * (cf. this.), and it displays the panel options of exclusions.\n     * Not use !\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onShowRouteExclusionsClick : function (e) {\n        logger.log(\"onShowRouteExclusionsClick\", e);\n        // not use !\n    },\n\n    /**\n     * this method is called by event 'change' on '' tag input\n     * (cf. this.).\n     * this value is saved as a parameter for the service route.\n     * Not use !\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onRouteExclusionsChange : function (e) {\n        logger.log(\"onRouteExclusionsChange\", e);\n        var value = e.target.value;\n        var checked = e.target.checked;\n\n        if (!value) {\n            return;\n        }\n\n        logger.log(value, checked);\n        var bFound = false;\n        var iFound = null;\n        for (var i = 0; i < this._currentExclusions.length; i++) {\n            if (this._currentExclusions[i] === value) {\n                iFound = i;\n                bFound = true;\n            }\n        }\n        // on l'ajoute si la valeur n'existe pas et est selectionnée\n        if (!bFound && checked) {\n            this._currentExclusions.push(value);\n        }\n        // on la retire si la valeur existe et est desselectionnée\n        if (bFound && !checked) {\n            this._currentExclusions[iFound] = null;\n        }\n    },\n\n    /**\n     * this method is called by event 'submit' on '' tag form\n     * (cf. this.), and it displays the results.\n     *\n     * @param {Object} options - options\n     *\n     * @private\n     */\n    onRouteComputationSubmit : function (options) {\n        logger.log(\"onRouteComputationSubmit\", options);\n\n        // FIXME on lance une requête en EPSG:4326, les coordonnées\n        // doivent donc être du type cad en lat/lon.\n        // hors, BUG du service du calcul d'itineraire car les\n        // coordonnées envoyées doivent être en lon/lat avec une SRS en EPSG:4326 !?\n        // sinon, ça plante...\n\n        // Liste des points\n        var points = this._currentPoints;\n\n        // - point de depart\n        var start = points[0].getCoordinate();\n        points[0].dragging(false);\n        logger.log(\"start\", start);\n        // - point d'arrivée\n        var end = points[points.length - 1].getCoordinate();\n        points[points.length - 1].dragging(false);\n        logger.log(\"end\", end);\n        // - les étapes\n        var step = [];\n        for (var i = 1; i < points.length - 1; i++) {\n            var coordinate = points[i].getCoordinate();\n            points[i].dragging(false);\n            if (coordinate) {\n                logger.log(\"step\", coordinate);\n                step.push(coordinate);\n            }\n        }\n\n        // oups, aucun droits !\n        // on evite donc une requête inutile ...\n        if (this._noRightManagement) {\n            return;\n        }\n\n        // valeurs selectionnées\n        this._currentTransport = options.transport;\n        this._currentComputation = options.computation;\n        this._currentExclusions = options.exclusions;\n\n        // mise en place de la patience\n        this._displayWaitingContainer();\n\n        // on met en place l'affichage des resultats dans la fenetre de resultats.\n        var context = this;\n        this._requestRouting({\n            startPoint : start,\n            endPoint : end,\n            viaPoints : step,\n            graph : this._currentTransport,\n            routePreference : this._currentComputation,\n            exclusions : this._currentExclusions,\n            geometryInInstructions : true, // surcharge obligatoire !\n            distanceUnit : \"m\", // surcharge obligatoire !\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(results);\n                if (results) {\n                    context._fillRouteResultsDetails(results);\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME mise à jour du controle mais le service ne repond pas en 200 !?\n                context._hideWaitingContainer();\n\n                context._clearRouteResultsDetails();\n                logger.log(error.message);\n            }\n        });\n    },\n\n    /**\n     * this method is called by event 'click' on ''\n     * tag label (cf. this.),\n     * and it cleans the old route geometry.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onShowRouteResultsNewClick : function (e) {\n        logger.log(\"onShowRouteResultsNewClick\", e);\n\n        // on reactive le drag&drop\n        var points = this._currentPoints;\n        for (var i = 0; i < points.length; i++) {\n            points[i].dragging(true);\n        }\n\n        // clean avant un nouveau calcul !\n        this._clearRouteResultsDetails();\n        this._clearRouteResultsGeometry();\n        this._clearRouteResultsFeatureGeometry();\n    },\n\n    /**\n     * this method is called by event 'mouseover' on ''\n     * tag label (cf. this.),\n     * and it makes a style on feature route.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onRouteResultsDetailsMouseOver : function (e) {\n        logger.log(\"onRouteResultsDetailsMouseOver\", e);\n\n        var idx = ID.index(e.target.id);\n\n        // valable uniquement pour le mode desktop !\n        if (!this._isDesktop) {\n            return;\n        }\n\n        if (!this._geojsonSections) {\n            return;\n        }\n\n        this._geojsonSections.eachLayer(function (layer) {\n            if (layer.feature.id === parseInt(idx, 10)) {\n                layer.setStyle({\n                    weight : 10,\n                    color : \"#0F9DE8\",\n                    opacity : 0.5\n                });\n            }\n        });\n    },\n\n    /**\n     * this method is called by event 'mouseout' on ''\n     * tag label (cf. this.),\n     * and it deletes a style on feature route.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onRouteResultsDetailsMouseOut : function (e) {\n        logger.log(\"onRouteResultsDetailsMouseOut\", e);\n\n        var idx = ID.index(e.target.id);\n\n        // valable uniquement pour le mode desktop !\n        if (!this._isDesktop) {\n            return;\n        }\n\n        if (!this._geojsonSections) {\n            return;\n        }\n\n        this._geojsonSections.eachLayer(function (layer) {\n            if (layer.feature.id === parseInt(idx, 10)) {\n                layer.setStyle({\n                    color : \"#ED7F10\",\n                    weight : 5,\n                    opacity : 0.75\n                });\n            }\n        });\n    },\n\n    /**\n     * this method is called by event 'click' on ''\n     * tag label (cf. this.),\n     * and it deletes a style on feature route.\n     * Only for mobile !\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onRouteResultsDetailsClick : function (e) {\n        logger.log(\"onRouteResultsDetailsClick\", e);\n\n        var idx = ID.index(e.target.id);\n\n        var self = this;\n\n        // valable uniquement pour le mode mobile !\n        if (this._isDesktop) {\n            return;\n        }\n\n        if (!this._geojsonSections) {\n            return;\n        }\n\n        // afficher le detail cumulé du parcours !\n        var newInstruction = e.target.title;\n        var oldInstruction = e.target.innerHTML;\n\n        this._geojsonSections.eachLayer(function (layer) {\n            if (layer.feature.id === parseInt(idx, 10)) {\n                e.target.innerHTML = newInstruction;\n                layer.setStyle({\n                    weight : 10,\n                    color : \"#0F9DE8\",\n                    opacity : 0.5\n                });\n            }\n        });\n\n        clearTimeout(1000);\n        setTimeout(function () {\n            self._geojsonSections.eachLayer(function (layer) {\n                if (layer.feature.id === parseInt(idx, 10)) {\n                    e.target.innerHTML = oldInstruction;\n                    layer.setStyle({\n                        color : \"#ED7F10\",\n                        weight : 5,\n                        opacity : 0.75\n                    });\n                }\n            });\n        }, 1000);\n    },\n\n    // ################################################################### //\n    // ########################### Routing ############################### //\n    // ############## (methods to request and results) ################### //\n\n    /**\n     * this method is called by this.onRouteComputationSubmit()\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     * @param {Function} settings.onSuccess - callback\n     * @param {Function} settings.onFailure - callback\n     *\n     * @private\n     */\n    _requestRouting : function (settings) {\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings || Object.keys(settings).length === 0) {\n            return;\n        }\n\n        // on ne fait pas de requête si\n        // - la parametre 'startPoint' est vide !\n        if (!settings.startPoint) {\n            return;\n        }\n        // - la parametre 'endPoint' est vide !\n        if (!settings.endPoint) {\n            return;\n        }\n\n        logger.log(settings);\n\n        // on ne fait pas de requête si aucun droit !\n        if (this._noRightManagement) {\n            logger.log(\"no rights for all service !?\");\n            return;\n        }\n\n        // gestion des droits !\n        if (!this._resources[\"Itineraire\"]) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        var resources = this._resources[\"Itineraire\"].resources;\n        if (!resources || Object.keys(resources).length === 0) {\n            return;\n        }\n\n        // gestion de la clef !\n        var key = this._resources[\"Itineraire\"][\"key\"];\n\n        var options = {};\n        // on recupere les options du service\n        L.Util.extend(options, this.options.routeOptions);\n        // ainsi que les parametres de saisie et les callbacks\n        L.Util.extend(options, settings);\n\n        // la ressource donne elle des droits ?\n        var bFound = false;\n        for (var i = 0; i < resources.length; i++) {\n            if (resources[i] === options.graph) {\n                bFound = true;\n            }\n        }\n\n        // on fait quoi ?\n        if (!bFound) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        L.Util.extend(options, {\n            apiKey : this.options.routeOptions.apiKey || this.options.apiKey || key\n        });\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        L.Util.extend(options, {\n            ssl : this.options.ssl\n        });\n\n        logger.log(options);\n\n        Gp.Services.route(options);\n    },\n\n    /**\n     * this method is called by this.onRouteComputationSubmit()\n     * and fills the container of the route instructions list, distance and time\n     * information, aslo, constructs the geometry route.\n     *\n     * @param {Object} results - results of the route calculation\n     *\n     * @private\n     */\n    _fillRouteResultsDetails : function (results) {\n        // FIXME\n        // gestion des temps de traitement avec des callback !?\n\n        // Distance et Durée\n        var distance = results.totalDistance;\n        var duration = results.totalTime;\n        // Détails avec simplifications des troncons\n        var instructions = this._simplifiedInstructions(results.routeInstructions);\n        // var instructions = results.routeInstructions;\n\n        if (instructions) {\n            this._fillRouteResultsDetailsContainer(distance, duration, instructions);\n        }\n\n        // Geometries simplifiées\n        var geometry = results.routeGeometry;\n        if (geometry) {\n            this._fillRouteResultsDetailsGeometry(geometry);\n        }\n\n        // existe t il une geometrie pour chaque troncon de route ?\n        var bGeometryInstructions = (instructions && Array.isArray(instructions) && instructions[0].geometry.length !== 0);\n\n        // Geometries des tronçon\n        if (instructions && bGeometryInstructions) {\n            this._fillRouteResultsDetailsFeatureGeometry(instructions);\n        }\n\n        // Emprise\n        var bbox = results.bbox;\n        if (bbox) {\n            var map = this._map;\n            var bounds = L.latLngBounds([bbox.bottom, bbox.left], [bbox.top, bbox.right]);\n            map.fitBounds(bounds, {\n                padding : [1, 1]\n            });\n        }\n\n        // sauvegarde de l'etat des resultats\n        this._currentRouteInformations = results;\n\n        // mise à jour du controle !\n        this._formRouteContainer.className = \"GProuteComponentHidden\";\n        this._hideWaitingContainer();\n        this._resultsRouteContainer.className = \"\";\n    },\n\n    /**\n     * this method is called by this._fillRouteResultsDetails()\n     * and fills the container of the route instructions list, distance and time\n     * information.\n     *\n     * @param {Number} distance - distance\n     * @param {Number} duration - duration\n     * @param {Object[]} instructions - list of instructions\n     *\n     * @private\n     */\n    _fillRouteResultsDetailsContainer : function (distance, duration, instructions) {\n        // FIXME callback\n\n        // Distance et Durée\n        this._resultsRouteValuesContainer = this._addRouteResultsValuesElement(distance, duration, this._convertSecondsToTime);\n\n        // Détails\n        this._resultsRouteDetailsContainer = this._addRouteResultsDetailsElement(instructions, this._convertSecondsToTime);\n    },\n\n    /**\n     * this method is called by this._fillRouteResultsDetails()\n     * and constructs the simplified geometry route.\n     *\n     * @param {Object} geometry - geometry\n     *\n     * @private\n     */\n    _fillRouteResultsDetailsGeometry : function (geometry) {\n        // FIXME callback\n\n        this._clearRouteResultsGeometry();\n\n        var map = this._map;\n\n        var _style = {\n            color : \"#ff7800\",\n            weight : 5,\n            opacity : 0.65\n        };\n\n        this._geojsonRoute = L.geoJson(geometry, {\n            style : _style\n        }).addTo(map);\n    },\n\n    /**\n     * this method is called by this._fillRouteResultsDetails()\n     * and constructs the geometries street with informations.\n     *\n     * @param {Object[]} instructions - instructions\n     *\n     * @private\n     */\n    _fillRouteResultsDetailsFeatureGeometry : function (instructions) {\n        // FIXME callback\n\n        this._clearRouteResultsFeatureGeometry();\n\n        var map = this._map;\n\n        var _style = {\n            color : \"#ED7F10\",\n            weight : 5,\n            opacity : 0.75\n        };\n\n        var _geometry = {\n            type : \"FeatureCollection\",\n            features : []\n        };\n\n        for (var i = 0; i < instructions.length; i++) {\n            var o = instructions[i];\n            var id = i + 1;\n\n            _geometry.features.push({\n                id : id,\n                type : \"Feature\",\n                geometry : o.geometry,\n                properties : {\n                    popupContent : \"(\" + id + \") distance : \" + this._convertDistance(o.distance) +\n                        \" / temps : \" + this._convertSecondsToTime(o.duration)\n                }\n            });\n        }\n\n        var self = this;\n\n        function resetHighlight (e) {\n            var layer = e.target;\n            self._geojsonSections.resetStyle(layer);\n            var div = L.DomUtil.get(\"GProuteResultsDetailsInstruction_\" + layer.feature.id + \"-\" + self._uid);\n            L.DomUtil.removeClass(div, \"GProuteResultsDetailsHighlight\");\n        }\n\n        function highlightFeature (e) {\n            var layer = e.target;\n            logger.log(layer);\n            layer.setStyle({\n                weight : 10,\n                color : \"#0F9DE8\",\n                opacity : 0.5\n            });\n            var div = L.DomUtil.get(\"GProuteResultsDetailsInstruction_\" + layer.feature.id + \"-\" + self._uid);\n            L.DomUtil.addClass(div, \"GProuteResultsDetailsHighlight\");\n        }\n\n        this._geojsonSections = L.geoJson(_geometry, {\n            style : _style,\n            // Function that will be called on each created feature layer.\n            onEachFeature : function (feature, layer) {\n                layer.on({\n                    mouseover : highlightFeature,\n                    mouseout : resetHighlight\n                });\n\n                layer.bindPopup(feature.properties.popupContent);\n            }\n        }).addTo(map);\n    },\n\n    // ################################################################### //\n    // ############################# Clean ############################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onShowRoutePanelClick()\n     * and it clears all elements (reinit).\n     *\n     * @private\n     */\n    _clear : function () {\n        this._currentTransport = null;\n        this._currentExclusions = [];\n        this._currentComputation = null;\n\n        // les resultats\n        this._clearRouteResultsDetails();\n        // la geometrie\n        this._clearRouteResultsGeometry();\n        this._clearRouteResultsFeatureGeometry();\n        // les points\n        for (var i = 0; i < this._currentPoints.length; i++) {\n            this._currentPoints[i].clear();\n        }\n    },\n\n    /**\n     * this method is called by this.onRouteComputationSubmit()\n     * and it clears all route instructions.\n     *\n     * @private\n     */\n    _clearRouteResultsDetails : function () {\n        this._currentRouteInformations = null;\n\n        // doit on nettoyer le container \"GProuteResultsDetails\" ?\n        // il sera de toute façon écrasé par la prochaine requête...\n        if (this._resultsRouteDetailsContainer) {\n            var divD = this._resultsRouteDetailsContainer;\n            if (divD.childElementCount) {\n                while (divD.firstChild) {\n                    divD.removeChild(divD.firstChild);\n                }\n            }\n        }\n\n        if (this._resultsRouteValuesContainer) {\n            var divV = this._resultsRouteValuesContainer;\n            if (divV.childElementCount) {\n                while (divV.firstChild) {\n                    divV.removeChild(divV.firstChild);\n                }\n            }\n        }\n    },\n\n    /**\n     * this method is called by this.onRouteComputationSubmit()\n     * and it clears all route geometries.\n     *\n     * @private\n     */\n    _clearRouteResultsGeometry : function () {\n        var map = this._map;\n\n        if (this._geojsonRoute != null) {\n            map.removeLayer(this._geojsonRoute);\n            this._geojsonRoute = null;\n        }\n    },\n\n    /**\n     * this method is called by this.onRouteComputationSubmit()\n     * and it clears all route geometries.\n     *\n     * @private\n     */\n    _clearRouteResultsFeatureGeometry : function () {\n        var map = this._map;\n\n        if (this._geojsonSections != null) {\n            map.removeLayer(this._geojsonSections);\n            this._geojsonSections = null;\n        }\n    },\n\n    // ################################################################### //\n    // ############################ Patience ############################# //\n    // ################################################################### //\n\n    /**\n     * this method displays waiting container and sets a timeout\n     *\n     * @private\n     */\n    _displayWaitingContainer : function () {\n        this._waitingContainer.className = \"GProuteCalcWaitingContainerVisible\";\n        this._waiting = true;\n\n        // mise en place d'un timeout pour réinitialiser le panel (cacher la patience)\n        // si on est toujours en attente (si la requête est bloquée par exemple)\n        if (this._timer) {\n            clearTimeout(this._timer);\n            this._timer = null;\n        }\n        var context = this;\n        this._timer = setTimeout(function () {\n            if (context._waiting === true) {\n                context._hideWaitingContainer();\n            } else {\n                if (context._timer) {\n                    clearTimeout(context._timer);\n                }\n            }\n        }, 16000);\n    },\n\n    /**\n     * this method hides waiting container and clears timeout\n     *\n     * @private\n     */\n    _hideWaitingContainer : function () {\n        if (this._waiting) {\n            this._waitingContainer.className = \"GProuteCalcWaitingContainerHidden\";\n            this._waiting = false;\n            clearTimeout(this._timer);\n            this._timer = null;\n        }\n    },\n\n    // ################################################################### //\n    // ########################## Geometry ############################### //\n    // ################################################################### //\n\n    /**\n     * simplifies instructions\n     *\n     * @param {Object[]} instructions - instructions\n     *\n     * @returns {Object[]} simplified instructions\n     *\n     * @private\n     */\n    _simplifiedInstructions : function (instructions) {\n        var newInstructions = [];\n\n        var current = instructions[0];\n        // cas où...\n        if (instructions.length === 1) {\n            newInstructions.push(current);\n        }\n\n        for (var i = 1; i < instructions.length; i++) {\n            var o = instructions[i];\n            if (o.instruction === current.instruction) {\n                current.distance = (parseFloat(o.distance) + parseFloat(current.distance)).toString();\n                current.duration = (parseFloat(o.duration) + parseFloat(current.duration)).toString();\n                for (var j = 1; j < o.geometry.coordinates.length; j++) {\n                    current.geometry.coordinates.push(o.geometry.coordinates[j]);\n                }\n                // last\n                if (i === instructions.length - 1) {\n                    newInstructions.push(current);\n                    current = null;\n                }\n            } else {\n                newInstructions.push(current);\n                current = o;\n                // last\n                if (i === instructions.length - 1) {\n                    newInstructions.push(o);\n                    current = null;\n                }\n            }\n        }\n        logger.log(newInstructions);\n        return newInstructions;\n    },\n\n    // ################################################################### //\n    // ################# Utils for Distance/Duration ##################### //\n    // ################################################################### //\n\n    /**\n     * convert seconds to time : HH:MM:SS\n     *\n     * @param {Number} duration - duration in seconds\n     *\n     * @returns {String} duration in HH:MM:SS\n     *\n     * @private\n     */\n    _convertSecondsToTime : function (duration) {\n        var time = \"\";\n\n        duration = Math.round(duration);\n        var hours = Math.floor(duration / (60 * 60));\n        if (!hours) {\n            hours = \"00\";\n        }\n\n        var divisor4minutes = duration % (60 * 60);\n        var minutes = Math.floor(divisor4minutes / 60);\n        if (!minutes) {\n            minutes = \"00\";\n        }\n\n        var divisor4seconds = divisor4minutes % 60;\n        var seconds = Math.ceil(divisor4seconds);\n        if (!seconds) {\n            seconds = \"00\";\n        }\n\n        time = hours + \"h \" + minutes + \"m \" + seconds + \"s\";\n        return time;\n    },\n\n    /**\n     * convert distance in meters or kilometers\n     *\n     * @param {Number} distance - distance in meters\n     *\n     * @returns {String} distance in km\n     *\n     * @private\n     */\n    _convertDistance : function (distance) {\n        var d = \"\";\n\n        var distanceKm = parseInt(distance / 1000, 10);\n        if (!distanceKm) {\n            d = parseInt(distance, 10) + \" m\"; // arrondi !\n        } else {\n            d = distanceKm + \" km\";\n        }\n\n        return d;\n    },\n\n    // ################################################################### //\n    // ###### METHODES PUBLIQUES (INTERFACE AVEC LE CONTROLE) ############ //\n    // ################################################################### //\n\n    /**\n     * This method is public.\n     * It allows to control the execution of a traitment.\n     *\n     * @param {Object} positions - positions = [{lng: , lat: }]\n     * @param {Object} options - options = {...}\n     */\n    compute : function (positions, options) {\n        if (!this._showRouteContainer.checked) {\n            this._pictoRouteContainer.click();\n        }\n\n        var map = this._map;\n        if (!map) {\n            return;\n        }\n\n        // Les options par defauts\n        var settings = {\n            computation : \"fastest\",\n            transport : \"Voiture\",\n            exclusions : []\n        };\n\n        // On recupere les options\n        L.Util.extend(settings, options);\n\n        // Liste des points !\n        var points = this._currentPoints;\n\n        var start = 0;\n        points[start].setCoordinate(positions[start]);\n        var startInput = L.DomUtil.get(\"GPlocationOrigin_\" + 1 + \"-\" + this._uid);\n        startInput.value = positions[start].lng + \" , \" + positions[start].lat;\n\n        var end = positions.length - 1;\n        points[6].setCoordinate(positions[end]);\n        var endInput = L.DomUtil.get(\"GPlocationOrigin_\" + 7 + \"-\" + this._uid);\n        endInput.value = positions[end].lng + \" , \" + positions[end].lat;\n\n        for (var i = 1; i < positions.length - 1; i++) {\n            points[i].setCoordinate(positions[i]);\n            var stepInput = L.DomUtil.get(\"GPlocationOrigin_\" + i + \"-\" + this._uid);\n            stepInput.value = positions[i].lng + \" , \" + positions[i].lat;\n        }\n\n        (settings.transport === \"Voiture\")\n            ? L.DomUtil.get(\"GProuteTransportCar-\" + this._uid).checked = true : L.DomUtil.get(\"GProuteTransportPedestrian-\" + this._uid).checked = true;\n\n        (settings.computation === \"fastest\")\n            ? L.DomUtil.get(\"GProuteComputationSelect-\" + this._uid).selectedIndex = 0 : L.DomUtil.get(\"GProuteComputationSelect-\" + this._uid).selectedIndex = 1;\n\n        // TODO exclusion !\n\n        // Calcul\n        this.onRouteComputationSubmit(settings);\n    }\n});\n\nexport default Route;\n","var SearchEngineUtils = {\n    /**\n     * Advanced Search Filters by default\n     */\n    advancedSearchFiltersByDefault : {\n        PositionOfInterest : [{\n            name : \"importance\",\n            title : \"Importance\"\n        }, {\n            name : \"nature\",\n            title : \"Nature\"\n        }, {\n            name : \"territory\",\n            title : \"Territoire\"\n        }, {\n            name : \"insee\",\n            title : \"Code INSEE\"\n        }, {\n            name : \"municipality\",\n            title : \"Ville\"\n        }, {\n            name : \"department\",\n            title : \"Département\"\n        }],\n        StreetAddress : [\n            // INFO\n            // ce ne sont pas des filtres mais une location dite structurée !\n            // {name : \"number\", title : \"Numéro\"},\n            // {name : \"street\", title : \"Rue\"},\n            // {name : \"postalCode\", title : \"Code Postal\"},\n            // {name : \"city\", title : \"Commune\"},\n            {\n                name : \"territory\",\n                title : \"Territoire\"\n            }, {\n                name : \"insee\",\n                title : \"Code INSEE\"\n            }, {\n                name : \"municipality\",\n                title : \"Ville\"\n            }, {\n                name : \"department\",\n                title : \"Département\"\n            }\n        ],\n        CadastralParcel : [{\n            name : \"department\",\n            title : \"Département\",\n            description : \"Numéro du département (ex: 01, 94)\"\n        }, {\n            name : \"commune\",\n            title : \"Code commune (INSEE)\",\n            description : \"Code commune (INSEE) : 3 chiffres (ex: 067)\"\n        },\n        // {\n        //     name : \"insee\",\n        //     title : \"Code INSEE\"\n        // },\n        {\n            name : \"absorbedCity\",\n            title : \"Commune absorbée\",\n            description : \"Commune absorbée : 3 chiffres (ex: 000, 001)\"\n        }, {\n            name : \"section\",\n            title : \"Section\",\n            description : \"Section : 2 caractères (ex: AA, 0D)\"\n        }, {\n            name : \"number\",\n            title : \"Numéro\",\n            description : \"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)\"\n        }\n        ],\n        Administratif : [{\n            name : \"prefecture\",\n            title : \"Préfecture\"\n        }, {\n            name : \"inseeRegion\",\n            title : \"Code région (INSEE)\"\n        }, {\n            name : \"inseeDepartment\",\n            title : \"Code département (INSEE)\"\n        }, {\n            name : \"municipality\",\n            title : \"Ville\"\n        }]\n    },\n\n    /**\n     * Provides default zoom based on results.\n     *\n     * @param {Object} info - location information\n     * @returns {Integer} zoom level\n     */\n    zoomToResultsByDefault : function (info) {\n        // FIXME\n        // la classification du geocodage est differente de l'importance de l'autocompletion !\n\n        var zoom = 15;\n\n        var service = info.service;\n        var fields = info.fields;\n        var type = info.type;\n\n        var importance = {\n            1 : 11,\n            2 : 12,\n            3 : 13,\n            4 : 14,\n            5 : 15,\n            6 : 16,\n            7 : 17,\n            8 : 17\n        };\n\n        // AutoCompletion POI\n        if (service === \"SuggestedLocation\") {\n            if (type === \"PositionOfInterest\") {\n                zoom = importance[fields.classification];\n            }\n        }\n\n        // Geocodage POI\n        if (service === \"DirectGeocodedLocation\") {\n            if (type === \"PositionOfInterest\") {\n                zoom = importance[fields.importance] || 14; // au cas où la recherche est en freeform !\n            }\n        }\n\n        if (type === \"StreetAddress\") {\n            zoom = 17;\n        }\n\n        if (type === \"CadastralParcel\") {\n            zoom = 17;\n        }\n\n        if (type === \"Administratif\") {\n            zoom = 12;\n        }\n\n        return zoom;\n    }\n};\n\nexport default SearchEngineUtils;\n","import ID from \"../Utils/SelectorID\";\n\nvar SearchEngineDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPsearchEngine\");\n        container.className = \"GPwidget\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################### Methods of main container ##################### //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowSearchEngineElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowSearchEngine\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Show search engine\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowSearchEnginePictoElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowSearchEnginePicto\");\n        label.className = \"GPshowAdvancedToolPicto\";\n        label.htmlFor = this._addUID(\"GPshowSearchEngine\");\n        label.title = \"Afficher/masquer la recherche par lieux\";\n\n        // Close all results and panels when minimizing the widget\n        label.addEventListener(\"click\", function () {\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n            var showAdvancedSearch = document.getElementById(self._addUID(\"GPshowAdvancedSearch\"));\n            if (showAdvancedSearch) {\n                showAdvancedSearch.style.display = null;\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).style.display = \"none\";\n            }\n            var id = \"#GPsearchInput-\" + self._uid;\n            document.querySelector(id + \" input\").disabled = false; // FIXME form[id^=GPsearchInput] = #GPsearchInput ?\n            self.onShowSearchEngineClick();\n        });\n\n        var spanOpen = document.createElement(\"span\");\n        spanOpen.id = this._addUID(\"GPshowSearchEngineOpen\");\n        spanOpen.className = \"GPshowAdvancedToolOpen\";\n        label.appendChild(spanOpen);\n\n        return label;\n    },\n\n    /**\n     * Simple search input\n     * @param {String} placeholder - placeholder\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createSearchInputElement : function (placeholder) {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GPsearchInput\");\n        // Open geocode results panel when submitting the input\n        form.addEventListener(\"submit\", function (e) {\n            e.preventDefault();\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"block\";\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n            // cf. FIXME\n            // document.querySelector(\"#GPsearchInput input\").blur ();\n\n            // gestionnaire d'evenement :\n            // on récupère la valeur de saisie pour requête sur le service de geocodage\n            self.onGeocodingSearchSubmit(e);\n            return false;\n        });\n\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPsearchInputText\");\n        input.type = \"text\";\n        input.placeholder = placeholder;\n        input.autocomplete = \"off\";\n        // Manage autocomplete list appearance when filling the address input\n        input.addEventListener(\"keyup\", function (e) {\n            var charCode = e.which || e.keyCode;\n            if (charCode === 13 || charCode === 10 || charCode === 38 || charCode === 40) {\n                return;\n            }\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n            if (input.value.length > 2) {\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"block\";\n            } else {\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n            }\n            // gestionnaire d'evenement :\n            // on récupère la valeur de saisie pour requête sur le service d'autocompletion\n            self.onAutoCompleteSearchText(e);\n        });\n\n        // FIXME ce code interfere avec le click sur la liste des suggested locations !\n        // input.addEventListener(\"blur\", function(e) {\n        //     document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n        // });\n\n        input.addEventListener(\"keydown\", function (e) {\n            // FIXME\n            // l'action clavier 'enter (13)' lance le submit de la form !\n            // Ce comportement n'est pas souhaité car le submit execute un geocodage !\n            // Il faut donc trouver le moyen d'eviter le submit sur un return venant\n            // seulement d'une selection de suggestion...\n\n            var charCode = e.which || e.keyCode;\n\n            var container = document.getElementById(self._addUID(\"GPautocompleteResults\"));\n\n            // si aucun container !?\n            if (!container) {\n                return;\n            }\n\n            var curr = container.getElementsByClassName(\"GPautoCompleteProposal current\");\n            var list = container.getElementsByClassName(\"GPautoCompleteProposal\");\n\n            // si aucune suggestion, on ne va pas plus loin !\n            var length = list.length;\n            if (!length) {\n                return;\n            }\n\n            var current = null;\n\n            // si aucun item courant, on prend le 1er !\n            if (!curr.length) {\n                current = list[0];\n                current.className = \"GPautoCompleteProposal current\";\n                current.style.color = \"#000000\";\n                current.style[\"background-color\"] = \"#CEDBEF\";\n                return;\n            } else {\n                current = curr[0];\n            }\n\n            var index = parseInt(ID.index(current.id), 10);\n            var next = (index === length - 1) ? list[0] : list[index + 1];\n            var prev = (index === 0) ? list[length - 1] : list[index - 1];\n\n            current.style[\"background-color\"] = \"\";\n            current.style.color = \"\";\n            prev.style[\"background-color\"] = \"\";\n            prev.style.color = \"\";\n            next.style[\"background-color\"] = \"\";\n            next.style.color = \"\";\n\n            switch (charCode) {\n                case 38: // arrow up\n                    current.className = \"GPautoCompleteProposal\";\n                    prev.className = \"GPautoCompleteProposal current\";\n                    prev.style.color = \"#000000\";\n                    prev.style[\"background-color\"] = \"#CEDBEF\";\n                    break;\n                case 40: // arrow down\n                    current.className = \"GPautoCompleteProposal\";\n                    next.className = \"GPautoCompleteProposal current\";\n                    next.style.color = \"#000000\";\n                    next.style[\"background-color\"] = \"#CEDBEF\";\n                    break;\n                case 13: // enter\n                    // cf. FIXME\n                    e.preventDefault();\n                    current.click(e);\n                    break;\n            }\n\n            current.focus();\n        });\n\n        form.appendChild(input);\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPsearchInputReset\");\n        // Reset input\n        div.addEventListener(\"click\", function () {\n            document.getElementById(self._addUID(\"GPsearchInputText\")).value = \"\";\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n            self.onSearchResetClick();\n        });\n        form.appendChild(div);\n\n        return form;\n    },\n\n    /**\n     * Show advanced search panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowAdvancedSearchElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPshowAdvancedSearch\");\n        div.className = \"GPshowAdvancedToolPicto\";\n        div.title = \"Ouvrir la recherche avancée\";\n\n        // Open advanced search\n        div.addEventListener(\"click\", function () {\n            var id = \"#GPsearchInput-\" + self._uid;\n            document.querySelector(id + \" input\").disabled = true;\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n            document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).style.display = \"none\";\n            document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).style.display = \"inline-block\";\n        });\n\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPshowAdvancedSearchOpen\");\n        span.className = \"GPshowAdvancedToolOpen\";\n        div.appendChild(span);\n\n        return div;\n    },\n\n    /**\n     * Advanced search panel\n     *\n     * FIXME\n     * don't call this._createAdvancedSearchPanelHeaderElement\n     * don't call this._createAdvancedSearchPanelFormElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchPanelElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPadvancedSearchPanel\");\n        div.className = \"GPpanel\";\n        div.style.display = \"none\";\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createAdvancedSearchPanelHeaderElement ());\n        // div.appendChild(this._createAdvancedSearchPanelFormElement ());\n\n        return div;\n    },\n\n    /**\n     * Geocoding results\n     *\n     * FIXME\n     * don't call this._createGeocodeResultsListElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createGeocodeResultsElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPgeocodeResultsList\");\n        div.className = \"GPpanel\";\n        div.style.display = \"none\";\n\n        div.appendChild(this._createGeocodeResultsHeaderElement());\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createGeocodeResultsListElement ());\n\n        return div;\n    },\n\n    /**\n     * Autocompletion results\n     *\n     * FIXME\n     * don't call this._createAutoCompleteListElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAutoCompleteElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPautoCompleteList\");\n        div.className = \"GPautoCompleteList\"; // GPpanel ?\n        div.style.display = \"none\";\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createAutoCompleteListElement ());\n\n        return div;\n    },\n\n    // ################################################################### //\n    // ################### Autocompletion container ###################### //\n    // ################################################################### //\n\n    /**\n     * Autocompletion results list.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAutoCompleteListElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPautocompleteResults\");\n\n        if (container.addEventListener) {\n            container.addEventListener(\"click\", function (e) {\n                self.onAutoCompletedResultsItemClick(e);\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n            }, false);\n        } else if (container.attachEvent) {\n            container.attachEvent(\"onclick\", function (e) {\n                self.onAutoCompletedResultsItemClick(e);\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n            });\n        }\n\n        // Proposals are dynamically filled in Javascript by autocomplete service\n        // <div class=\"GPautoCompleteProposal\">...</div>\n\n        return container;\n    },\n\n    /**\n     * Autocompletion result.\n     * Proposals are dynamically filled in Javascript by autocomplete service\n     *\n     * TODO formaliser le contenu des reponse\n     *\n     * @param {Object} location - suggested or geocoded location results\n     * @param {Number} id - ID\n     */\n    _createAutoCompletedLocationElement : function (location, id) {\n        var container = document.getElementById(this._addUID(\"GPautocompleteResults\"));\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"AutoCompletedLocation_\" + id);\n        div.className = \"GPautoCompleteProposal\";\n        div.innerHTML = location.fullText;\n        if (div.addEventListener) {\n            div.addEventListener(\"click\", function (e) {\n                container.click(e);\n            }, false);\n        } else if (div.attachEvent) {\n            div.attachEvent(\"onclick\", function (e) {\n                container.click(e);\n            });\n        }\n\n        container.appendChild(div);\n    },\n\n    // ################################################################### //\n    // ############### Geocoding with advanced container ################# //\n    // ################################################################### //\n\n    /**\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchPanelHeaderElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader\";\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle\";\n        divTitle.innerHTML = \"Recherche avancée\";\n        container.appendChild(divTitle);\n\n        var divClose = document.createElement(\"div\");\n        divClose.id = this._addUID(\"GPadvancedSearchClose\");\n        divClose.className = \"GPpanelClose\";\n        divClose.title = \"Fermer la recherche avancée\";\n\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                var id = \"#GPsearchInput-\" + self._uid;\n                document.querySelector(id + \" input\").disabled = false;\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n                document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).style.display = \"inline-block\";\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).style.display = \"none\";\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                var id = \"#GPsearchInput-\" + self._uid;\n                document.querySelector(id + \" input\").disabled = false;\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n                document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).style.display = \"inline-block\";\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).style.display = \"none\";\n            });\n        }\n\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * @param {Object[]} advancedSearchCodes - codes\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchPanelFormElement : function (advancedSearchCodes) {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GPadvancedSearchForm\");\n        form.addEventListener(\"submit\", function (e) {\n            e.preventDefault();\n            // data\n            var data = [];\n            // liste des attributs de la ressource de geocodage\n            var id = \"#GPadvancedSearchFilters-\" + self._uid;\n            var matchesFilters = document.querySelectorAll(id + \" > div > div > input\");\n            for (var i = 0; i < matchesFilters.length; i++) {\n                var element = matchesFilters[i];\n                data.push({\n                    key : element.name,\n                    value : element.value\n                });\n            }\n\n            // gestionnaire d'evenement :\n            // on récupère les valeurs de saisies pour requête sur le service de geocodage\n            self.onGeocodingAdvancedSearchSubmit(e, data);\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"block\";\n\n            return false;\n        });\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPflexInput\";\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPadvancedSearchCodeLabel\";\n        label.innerHTML = \"Recherche par\";\n        div.appendChild(label);\n\n        var select = this._createAdvancedSearchFormCodeElement(advancedSearchCodes);\n        div.appendChild(select);\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n\n        // var filters = this._createAdvancedSearchFormFiltersElement ();\n        // form.appendChild(filters);\n\n        // var input = this._createAdvancedSearchFormInputElement ();\n        // form.appendChild(input);\n\n        form.appendChild(div);\n\n        return form;\n    },\n\n    /**\n     * @param {Object[]} codes - codes\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFormCodeElement : function (codes) {\n        // contexte d'execution\n        var self = this;\n\n        var select = document.createElement(\"select\");\n        select.id = this._addUID(\"GPadvancedSearchCode\");\n        select.className = \"GPadvancedSearchCode\";\n        select.addEventListener(\"change\", function (e) {\n            // var idx   = e.target.selectedIndex;\n            // var value = e.target.options[idx].value;\n            // gestionnaire d'evenement :\n            // permet de recuperer des informations diverses...\n            self.onGeocodingAdvancedSearchCodeChange(e);\n        }, false);\n\n        // liste statique au cas où des codes n'ont pas été passés en entrée\n        if (!codes) {\n            codes = [{\n                id : \"PositionOfInterest\",\n                title : \"Lieux/toponymes\"\n            }, {\n                id : \"StreetAddress\",\n                title : \"Adresses\"\n            }, {\n                id : \"CadastralParcel\",\n                title : \"Parcelles cadastrales\"\n            }, {\n                id : \"Administratif\",\n                title : \"Administratif\"\n            }];\n        }\n\n        for (var i = 0; i < codes.length; i++) {\n            var option = document.createElement(\"option\");\n            option.value = codes[i].id;\n            option.text = codes[i].title;\n            select.appendChild(option);\n        }\n\n        return select;\n    },\n\n    /**\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFormInputElement : function () {\n        var input = document.createElement(\"input\");\n        input.type = \"submit\";\n        input.id = this._addUID(\"GPadvancedSearchSubmit\");\n        input.className = \"GPinputSubmit\";\n        input.value = \"Chercher\";\n\n        return input;\n    },\n\n    /**\n     * Filters geocoding.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFormFiltersElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPadvancedSearchFilters\");\n        return container;\n    },\n\n    /**\n     * Create filter container for resources :\n     * \"PositionOfInterest\", \"StreetAddress\", ...\n     *\n     * @param {String} code - code of geocoding resource\n     * @param {Boolean} display - display\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFiltersTableElement : function (code, display) {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(code);\n        if (!display) {\n            container.style.display = \"none\";\n        }\n\n        return container;\n    },\n\n    /**\n     * Create filter attribut for a resource :\n     * \"PositionOfInterest\", \"StreetAddress\", ...\n     * Research filters are filled in Javascript depending on developer choice\n     *\n     * @param {Object} filterAttributes - filter attributes :\n     * @param {String} filterAttributes.code - code of geocoding resource\n     * @param {String} filterAttributes.name - ID\n     * @param {String} filterAttributes.title - label\n     * @param {String} filterAttributes.description - description\n     * @param {String} filterAttributes.value - value\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFiltersAttributElement : function (filterAttributes) {\n        // INFORMATION\n        // cette methode peut être appelée si le document n'existe pas, elle\n        // permet ainsi de creer une div sans insertion dans le container...\n\n        var container = null;\n        var name = filterAttributes.name;\n        var title = filterAttributes.title;\n        var description = filterAttributes.description;\n        var code = filterAttributes.code;\n        var value = filterAttributes.value;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPflexInput\";\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPadvancedSearchFilterLabel\";\n        label.htmlFor = name;\n        label.title = description || title;\n        label.innerHTML = title;\n        div.appendChild(label);\n\n        var input = document.createElement(\"input\");\n        input.id = name;\n        input.className = \"GPadvancedSearchFilterInput\";\n        input.type = \"text\";\n        input.name = name;\n        if (value) {\n            input.value = value;\n        }\n        div.appendChild(input);\n\n        container = document.getElementById(this._addUID(code));\n\n        if (container) {\n            container.appendChild(div);\n        } else {\n            // le container, c'est la div !\n            container = div;\n        }\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ################## Geocoding results container #################### //\n    // ################################################################### //\n\n    /**\n     * @returns {DOMElement} DOM element\n     */\n    _createGeocodeResultsHeaderElement : function () {\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader\";\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle\";\n        divTitle.innerHTML = \"Résultats de la recherche\";\n        container.appendChild(divTitle);\n\n        var divClose = document.createElement(\"div\");\n        divClose.id = this._addUID(\"GPgeocodeResultsClose\");\n        divClose.className = \"GPpanelClose\";\n        divClose.title = \"Fermer la fenêtre de résultats\";\n\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n            });\n        }\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * Geocoding results list.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createGeocodeResultsListElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPgeocodeResults\");\n\n        if (container.addEventListener) {\n            container.addEventListener(\"click\", function (e) {\n                if (!e.ctrlKey) {\n                    document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n                }\n                self.onGeocodedResultsItemClick(e);\n            }, false);\n        } else if (container.attachEvent) {\n            container.attachEvent(\"onclick\", function (e) {\n                if (!e.ctrlKey) {\n                    document.getElementById(self._addUID(\"GPgeocodeResultsList\")).style.display = \"none\";\n                }\n                self.onGeocodedResultsItemClick(e);\n            });\n        }\n        // Results are dynamically filled in Javascript by geocoding service\n        // <div class=\"GPautoCompleteProposal\">...</div>\n\n        return container;\n    },\n\n    /**\n     * Geocoding result.\n     * Results are dynamically filled in Javascript by geocoding service\n     *\n     * TODO formaliser le contenu des reponses\n     * FIXME formater la reponse en amont !\n     *\n     * @param {Object} location - suggested or geocoded location results\n     * @param {Number} id - ID\n     */\n    _createGeocodedLocationElement : function (location, id) {\n        var container = document.getElementById(this._addUID(\"GPgeocodeResults\"));\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GeocodedLocation_\" + id);\n        div.className = \"GPautoCompleteProposal\";\n\n        if (typeof location === \"string\") {\n            div.innerHTML = location;\n        } else {\n            var places = location.placeAttributes;\n\n            if (places.freeform) {\n                // reponse en freeForm\n                div.innerHTML = places.freeform;\n            } else if (places.postalCode) {\n                // cas des StreetAddress, PositionOfInterest, Administratif\n                // on affiche uniquement ce qui est commun aux ressources ...\n                div.innerHTML = places.postalCode + \" \" + places.commune;\n            } else if (places.cadastralParcel) {\n                // cas des CadastralParcel\n                div.innerHTML = places.cadastralParcel;\n            } else {\n                div.innerHTML = \"...\";\n            }\n        }\n\n        container.appendChild(div);\n    }\n};\n\nexport default SearchEngineDOM;\n","/* global KeyboardEvent */\nimport Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport RightManagement from \"../../Common/Utils/CheckRightManagement\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport SearchEngineUtils from \"../../Common/Utils/SearchEngineUtils\";\nimport IconDefault from \"./Utils/IconDefault\";\nimport SearchEngineDOM from \"../../Common/Controls/SearchEngineDOM\";\n\nvar logger = Logger.getLogger(\"searchengine\");\n\n/**\n * @classdesc\n *\n * Leaflet Control Class to search positons of geographic identifiers (places names, address, cadastral parcel) using :\n *\n * - the [geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage.html}.\n * - the [autocompletion service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/autocompletion.html}\n * <br/>\n *\n * Use {@link module :Controls.SearchEngine L.geoportalControl.SearchEngine()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#control\" target=\"_blank\">L.Control</a> native class.\n *\n * @namespace\n * @alias L.geoportalControl.SearchEngine\n */\nvar SearchEngine = L.Control.extend(/** @lends L.geoportalControl.SearchEngine.prototype */ {\n\n    includes : SearchEngineDOM,\n\n    /**\n     * options by default\n     *\n     * @private\n     */\n    options : {\n        position : \"topleft\",\n        collapsed : true,\n        displayInfo : true,\n        zoomTo : \"\",\n        resources : [],\n        placeholder : \"Rechercher un lieu, une adresse\",\n        displayMarker : true,\n        markerStyle : \"blue\",\n        displayAdvancedSearch : true,\n        advancedSearch : {},\n        geocodeOptions : {},\n        autocompleteOptions : {\n            serviceOptions : {},\n            triggerGeocode : false,\n            triggerDelay : 1000\n        }\n    },\n\n    /**\n     * @constructor SearchEngine\n     *\n     * @private\n     * @alias SearchEngine\n     * @extends {L.Control}\n     * @param {Object} options - control options\n     * @param {String} [options.apiKey] - API key, mandatory if autoconf service has not been charged in advance\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Boolean} [options.collapsed] - collapse mode, false by default\n     * @param {String} [options.position] - position of component into the map, 'topleft' by default\n     * @param {Boolean} [options.displayInfo] - get informations on popup marker\n     * @param {String|Numeric|Function} [options.zoomTo] - zoom to results, by default, current zoom.\n     *       Value possible : auto or zoom level.\n     *       Possible to overload it with a function :\n     *       zoomTo : function (info) {\n     *           // do some stuff...\n     *           return zoom;\n     *       }\n     * @param {String}  [options.placeholder] - set placeholder in search bar. Default is \"Rechercher un lieu, une adresse\".\n     * @param {Boolean}  [options.displayMarker] - set a marker on search result, defaults to true.\n     * @param {String|Object}  [options.markerStyle] - set a marker style. Currently possible values are \"blue\" (default value), \"orange\", \"red\" and \"green\". But you can use an L.Icon object (see {@link http://leafletjs.com/reference-1.2.0.html#icon L.Icon }).\n     * @param {Object} [options.resources] - resources to be used by geocode and autocompletion services, by default : [\"StreetAddress\", \"PositionOfInterest\"]\n     * @param {Boolean} [options.displayAdvancedSearch] - False to disable advanced search tools (it will not be displayed). Default is true (displayed)\n     * @param {Object} [options.advancedSearch] - advanced search for geocoding (filters)\n     * @param {Object} [options.geocodeOptions] - options of geocode service\n     * @param {Object} [options.autocompleteOptions] - options of autocomplete service\n     * @param {Object} [options.autocompleteOptions.serviceOptions] - options of autocomplete service\n     * @param {Boolean} [options.autocompleteOptions.triggerGeocode] - trigger a geocoding request if the autocompletion does not return any suggestions, false by default\n     * @param {Number}  [options.autocompleteOptions.triggerDelay] - waiting time before sending the geocoding request, 1000ms by default\n     * @example\n     *  var SearchEngine = L.geoportalControl.SearchEngine({\n     *      position : \"topright\",\n     *      collapsed : true,\n     *      displayInfo : true,\n     *      displayAdvancedSearch : true,\n     *      placeholder : \"Rechercher un lieu, une adresse\",\n     *      displayMarker : true,\n     *      markerStyle : L.icon(iconUrl : 'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png');\n     *      zoomTo : 15,\n     *      resources : [\"PositionOfInterest\", \"StreetAddress\"],\n     *      advancedSearch : {\n     *          PositionOfInterest : [{name : \"municipality\", title : \"Ville\"}],\n     *          StreetAddress : [{...}],\n     *          CadastralParcel : null,\n     *      },\n     *      apiKey : \"zfgzrgffg57rfg8ar7gr4g5r4\",\n     *      geocodeOptions : {},\n     *      autocompleteOptions : {}\n     *  });\n     *\n     */\n    initialize : function (options) {\n        // on transmet les options au controle\n        L.Util.setOptions(this, options);\n\n        /** uuid */\n        this._uid = ID.generate();\n\n        /** affichage du container de saisie */\n        this._showContainer = null;\n        this._pictoContainer = null;\n\n        /** container de la saisie du la recherche */\n        this._inputContainer = null;\n\n        /** container des reponses de l'autocompletion */\n        this._suggestedContainer = null;\n\n        /** listes des reponses de l'autocompletion */\n        this._suggestedLocations = [];\n\n        /** container des reponses du geocodage */\n        this._geocodedContainer = null;\n\n        /** liste des reponses du geocodage */\n        this._geocodedLocations = [];\n\n        /** container des filtres du geocodage */\n        this._filterContainer = null;\n\n        /** ressource de geocodage selectionnée pour le geocodage avancé */\n        this._currentGeocodingCode = null;\n\n        /** localisant */\n        this._currentGeocodingLocation = null;\n\n        /** liste des filtres du geocodage pour le geocodage avancé */\n        this._advancedSearchFilters = {};\n\n        /** liste des ressources du geocodage pour le geocodage avancé */\n        this._advancedSearchCodes = [];\n\n        /** marker */\n        this._marker = null;\n\n        /** ressources des services d'autocompletion et de geocodage */\n        this._servicesRightManagement = {};\n\n        /**\n         * Droit sur les ressources sur les services.\n         * Par defaut, on n'en s'occupe pas\n         * sauf si l'autoconfiguration est chargée !\n         */\n        this._noRightManagement = false;\n\n        // gestion des droits sur les ressources/services\n        this._checkRightsManagement();\n\n        // trigger geocode\n        this._triggerHandler = null;\n    },\n\n    /**\n     * this method is called by this.addTo(map)\n     * and fills variable : this._container = this.onAdd(map)\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    onAdd : function (/* map */) {\n        // TODO initialisation des ressources du geocodage avancé\n        this._initAdvancedSearchCodes();\n\n        // initialisation des filtres du geocodage avancé\n        this._initAdvancedSearchFilters();\n\n        // initialisation du DOM du composant\n        var container = this._initLayout();\n\n        // deactivate of events that may interfere with the map\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        return container;\n    },\n\n    /**\n     * this method is called when the control is removed from the map\n     * and removes events on map.\n     *\n     * @param {Object} map - the map\n     *\n     * @private\n     */\n    onRemove : function (map) {\n        this._clearSuggestedLocation();\n        this._clearGeocodedLocation();\n\n        if (this._marker != null) {\n            map.removeLayer(this._marker);\n            this._marker = null;\n        }\n    },\n\n    // ################################################################### //\n    // ##################### methods rights management ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by constructor\n     * and check the rights to resources and services\n     *\n     * @private\n     */\n    _checkRightsManagement : function () {\n        // INFORMATION\n        // l'autoconfiguration n'est utile que pour récupérer la clef si elle\n        // n'est pas renseignée, et pour vérifier les droits sur les ressources\n        // et les services.\n\n        // si l'autoconfiguration n'est pas chargée,\n        // il est toujours possible de requeter le service avec une clef API,\n        // mais les droits sur les ressources ne sont pas garantis, on risque\n        // d'obtenir des erreurs 403 forbidden..., la responsabilité revient\n        // à l'utilisateur (message d'information)...\n        // par contre, sans clef API renseignée au niveau du controle,\n        // l'utilisateur doit la renseigner au niveau des services...,\n        // sinon, Exception du service\n\n        // si l'autoconfiguration est chargée,\n        // si une clef API est renseignée au niveau controle, on controle\n        // le mapping entre le contrat et la clef...\n        // on obtient la liste des ressources ayant droits,\n        // si on ne trouve pas de ressources ou certaines ressources ne sont\n        // pas disponible, on previent l'utilisateur (message d'information).\n\n        // les ressources en options pour les 2 services\n        // on en definit par defaut\n        if (!this.options.resources || this.options.resources.length === 0) {\n            this.options.resources = [\n                \"StreetAddress\",\n                \"PositionOfInterest\"\n                // FIXME choix par defaut ?\n                // \"CadastralParcel\",\n                // \"Administratif\"\n            ];\n        }\n\n        var _opts = null;\n        var _res = [];\n        var _key = null;\n\n        // les ressources du service de geocodage\n        // on prend celles des options du services en priorité\n        _key = this.options.geocodeOptions.apiKey;\n        _opts = this.options.geocodeOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = this.options.resources || [\n                \"StreetAddress\",\n                \"PositionOfInterest\"\n                // \"CadastralParcel\",\n                // \"Administratif\"\n            ];\n        }\n\n        var rightManagementGeocode = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"Geocode\"]\n        });\n\n        // les ressources du service d'autocompletion\n        // on prend celles des options du services en priorité\n        _key = this.options.autocompleteOptions.apiKey;\n        _opts = this.options.autocompleteOptions.filterOptions;\n        _res = (_opts) ? _opts.type : [];\n        if (!_res || _res.length === 0) {\n            _res = this.options.resources || [\n                \"StreetAddress\",\n                \"PositionOfInterest\"\n                // \"CadastralParcel\",\n                // \"Administratif\"\n            ];\n        }\n\n        var rightManagementAutoComplete = RightManagement.check({\n            key : _key || this.options.apiKey,\n            resources : _res,\n            services : [\"AutoCompletion\"]\n        });\n\n        // au cas où pas de droit !\n        if (!rightManagementGeocode && !rightManagementAutoComplete) {\n            this._noRightManagement = true;\n        }\n\n        // je reconstruis differement la structure pour la gestion des clefs differentes\n        // pour chaque service...\n        if (rightManagementAutoComplete) {\n            this._servicesRightManagement[\"AutoCompletion\"] = {};\n            this._servicesRightManagement[\"AutoCompletion\"][\"resources\"] = rightManagementAutoComplete[\"AutoCompletion\"];\n            this._servicesRightManagement[\"AutoCompletion\"][\"key\"] = rightManagementAutoComplete[\"key\"];\n        }\n\n        if (rightManagementGeocode) {\n            this._servicesRightManagement[\"Geocode\"] = {};\n            this._servicesRightManagement[\"Geocode\"][\"resources\"] = rightManagementGeocode[\"Geocode\"];\n            this._servicesRightManagement[\"Geocode\"][\"key\"] = rightManagementGeocode[\"key\"];\n        }\n\n        // FIXME doit on construire les menus du geocodage avancé en fonction des ressources\n        // disponibles ?\n        if (!this.options.advancedSearch || Object.keys(this.options.advancedSearch).length === 0) {\n            var r = this._servicesRightManagement[\"Geocode\"][\"resources\"];\n            for (var i = 0; i < r.length; i++) {\n                var code = r[i];\n                this.options.advancedSearch[code] = [];\n            }\n        }\n    },\n\n    // ################################################################### //\n    // ########################## methods DOM ############################ //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd(map)\n     * and initialize the container HTMLElement\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _initLayout : function () {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        // create show search engine element\n        var inputShow = this._showContainer = this._createShowSearchEngineElement();\n        container.appendChild(inputShow);\n\n        // mode \"collapsed\"\n        if (!this.options.collapsed) {\n            inputShow.checked = \"true\";\n        }\n\n        // create search engine picto\n        var picto = this._pictoContainer = this._createShowSearchEnginePictoElement();\n        container.appendChild(picto);\n\n        var search = this._createSearchInputElement(this.options.placeholder);\n        container.appendChild(search);\n\n        if (this.options.displayAdvancedSearch) {\n            var advancedShow = this._createShowAdvancedSearchElement();\n            container.appendChild(advancedShow);\n\n            // INFO je decompose les appels car j'ai besoin de recuperer le container\n            // des filtres\n            var advancedPanel = this._createAdvancedSearchPanelElement();\n            var advancedHeader = this._createAdvancedSearchPanelHeaderElement();\n            var advancedForm = this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes);\n            var advancedFormFilters = this._filterContainer = this._createAdvancedSearchFormFiltersElement();\n            this._setFilter(this._advancedSearchCodes[0].id); // ex \"PositionOfInterest\"\n            var advancedFormInput = this._createAdvancedSearchFormInputElement();\n            advancedForm.appendChild(advancedFormFilters);\n            advancedForm.appendChild(advancedFormInput);\n            advancedPanel.appendChild(advancedHeader);\n            advancedPanel.appendChild(advancedForm);\n            container.appendChild(advancedPanel);\n        }\n\n        // INFO je decompose les appels car j'ai besoin de recuperer le container\n        // des resultats de l'autocompletion\n        var autocomplete = this._createAutoCompleteElement();\n        var autocompleteList = this._suggestedContainer = this._createAutoCompleteListElement();\n        autocomplete.appendChild(autocompleteList);\n        container.appendChild(autocomplete);\n\n        // INFO je decompose les appels car j'ai besoin de recuperer le container\n        // des resultats du geocodage\n        var geocode = this._createGeocodeResultsElement();\n        var geocodeList = this._geocodedContainer = this._createGeocodeResultsListElement();\n        geocode.appendChild(geocodeList);\n        container.appendChild(geocode);\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ################# methods Filters Geocode Advanced ################ //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd()\n     * and initialize the geocoding resources.\n     * TODO\n     *\n     * @private\n     */\n    _initAdvancedSearchCodes : function () {\n        // INFORMATION\n        // on y ajoute les filtres attributaires pour une table de ressources\n        // selectionnée via un evenement (onchange) de la liste deroulante du\n        // menu avancé du geocodage.\n        // cf. onGeocodingAdvancedSearchCodeChange() pour la selection de la\n        // ressource de geocodage à afficher\n\n        // TODO la liste des ressources de geocodage est codée en statique\n        // dans le DOM, cad les 4 ressources sont donc disponibles dans le menu\n        // deroulant :\n        // - PositionOfInterest\n        // - StreetAddress\n        // - CadastralParcel\n        // - Administratif\n        // Cette liste doit elle être dynamique ? Ne doit on pas prendre en\n        // compte uniquement les ressources que le client a renseigné ?\n\n        var advancedSearchCodesByDefault = [{\n            id : \"PositionOfInterest\",\n            title : \"Lieux/toponymes\"\n        }, {\n            id : \"StreetAddress\",\n            title : \"Adresses\"\n        }, {\n            id : \"CadastralParcel\",\n            title : \"Parcelles cadastrales\"\n        }, {\n            id : \"Administratif\",\n            title : \"Administratif\"\n        }];\n\n        var _resources = Object.keys(this.options.advancedSearch);\n        for (var i = 0; i < _resources.length; i++) {\n            var id = _resources[i];\n            for (var j = 0; j < advancedSearchCodesByDefault.length; j++) {\n                if (advancedSearchCodesByDefault[j].id === id) {\n                    this._advancedSearchCodes.push(advancedSearchCodesByDefault[j]);\n                }\n            }\n        }\n\n        if (this._advancedSearchCodes.length === 0) {\n            this._advancedSearchCodes = advancedSearchCodesByDefault;\n        }\n\n        logger.log(\"advancedSearchCodes\", this._advancedSearchCodes);\n    },\n\n    /**\n     * this method is called by this.onAdd()\n     * and initialize the advanced geocoding filters.\n     * FIXME\n     *\n     * @private\n     */\n    _initAdvancedSearchFilters : function () {\n        // FIXME la liste des filtres attributaires doit elle être recuperée\n        // de l'objet geocode ? doit on tous les mettre ou doit on faire un choix ?\n\n        // liste des filtres par defauts pour toutes les ressources\n        var advancedSearchFiltersByDefault = {\n            PositionOfInterest : [{\n                name : \"city\", // municipality !?\n                title : \"Ville\",\n                filter : false,\n                sep : true\n            }, {\n                name : \"importance\",\n                title : \"Importance\",\n                filter : true\n            }, {\n                name : \"nature\",\n                title : \"Nature\",\n                filter : true\n            }, {\n                name : \"territory\",\n                title : \"Territoire\",\n                filter : true\n            }, {\n                name : \"insee\",\n                title : \"Code commune (INSEE)\",\n                filter : true\n            }, {\n                name : \"department\",\n                title : \"Département\",\n                filter : true\n            }],\n            StreetAddress : [\n                // INFO\n                // ce ne sont pas des filtres mais une location dite structurée !\n                {\n                    name : \"number\",\n                    title : \"Numéro\",\n                    filter : false,\n                    sep : true\n                }, {\n                    name : \"street\",\n                    title : \"Rue\",\n                    filter : false,\n                    sep : true\n                }, {\n                    name : \"postalCode\",\n                    title : \"Code Postal\",\n                    filter : false,\n                    sep : true\n                }, {\n                    name : \"city\", // municipality !?\n                    title : \"Ville\",\n                    filter : false,\n                    sep : true\n                },\n                // {\n                //     name : \"municipality\", // commune !?\n                //     title : \"Commune\",\n                //     filter : true,\n                //     sep : true\n                // },\n                {\n                    name : \"territory\",\n                    title : \"Territoire\",\n                    filter : true\n                }, {\n                    name : \"insee\",\n                    title : \"Code commune (INSEE)\",\n                    filter : true\n                }, {\n                    name : \"department\",\n                    title : \"Département\",\n                    filter : true\n                }\n            ],\n            CadastralParcel : [\n                // INFO\n                // ce ne sont pas des filtres mais une location dite structurée !\n                // ex 94 067 000 0D 0041\n                {\n                    name : \"department\",\n                    title : \"Département\",\n                    filter : false,\n                    sep : false,\n                    value : \"__\"\n                }, {\n                    name : \"commune\",\n                    title : \"Commune\",\n                    filter : false,\n                    sep : false,\n                    value : \"___\"\n                }, {\n                    name : \"absorbedCity\",\n                    title : \"Commune absorbée\",\n                    filter : false,\n                    sep : false,\n                    value : \"___\"\n                }, {\n                    name : \"section\",\n                    title : \"Section\",\n                    filter : false,\n                    sep : false,\n                    value : \"__\"\n                },\n                // {\n                //     name : \"sheet\",\n                //     title :  \"Feuille\",\n                //     filter : false,\n                //     sep : false\n                // },\n                {\n                    name : \"number\",\n                    title : \"Numéro\",\n                    filter : false,\n                    sep : false,\n                    value : \"____\"\n                }\n                // {\n                //     name : \"insee\",\n                //     title : \"Code commune (INSEE)\",\n                //     filter : false,\n                //     sep : false\n                // },\n                // {\n                //     name : \"municipality\",\n                //     title : \"Ville\",\n                //     filter : false,\n                //     sep : false\n                // }\n\n            ],\n            Administratif : [{\n                name : \"prefecture\",\n                title : \"Préfecture\",\n                filter : true\n            }, {\n                name : \"inseeRegion\",\n                title : \"Code région (INSEE)\",\n                filter : true\n            }, {\n                name : \"inseeDepartment\",\n                title : \"Code département (INSEE)\",\n                filter : true\n            }, {\n                name : \"city\", // municipality !?\n                title : \"Ville\",\n                filter : false,\n                sep : true\n            }]\n        };\n\n        // on merge les options avancées avec celles par defaut\n        var advancedSearchFiltersCustom = this.options.advancedSearch;\n        for (var code in advancedSearchFiltersCustom) {\n            if (advancedSearchFiltersCustom.hasOwnProperty(code)) {\n                // si object null ou vide (StreetAddress : [] || null), on prend les params. par defaut\n                // sauf si pas de droit !\n                if (!advancedSearchFiltersCustom[code] || advancedSearchFiltersCustom[code].length === 0) {\n                    advancedSearchFiltersCustom[code] = advancedSearchFiltersByDefault[code];\n                    continue;\n                }\n\n                // si la clef filter est absente, on l'ajoute...\n                // par defaut, le filtre municipality est dit structuré !\n                var filters = advancedSearchFiltersCustom[code];\n                for (var i = 0; i < filters.length; i++) {\n                    var o = filters[i];\n                    if (!o.hasOwnProperty(\"filter\")) {\n                        o.filter = o.name !== \"municipality\";\n                    }\n                }\n            }\n        }\n\n        L.Util.extend(this._advancedSearchFilters,\n            advancedSearchFiltersByDefault,\n            advancedSearchFiltersCustom\n        );\n\n        logger.log(\"advancedSearchFilters\", this._advancedSearchFilters);\n    },\n\n    /**\n     * this method is called by :\n     * - this._initLayout() : ...\n     * - this.onGeocodingAdvancedSearchCodeChoice() : ...\n     * and initialize or create the filters container HTMLElement\n     * to the geocoding advanced menu.\n     *\n     * @param {String} code - resource geocoding name\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _setFilter : function (code) {\n        // INFORMATION\n        // Nous avons 2 solutions possibles pour la mise en place des filtres.\n        // 1. Soit on decide de creer tous les filtres pour chaque ressource\n        // de geocodage à l'initialisation du composant, et on joue sur le\n        // mode 'hidden' pour n'afficher que la ressource selectionnée.\n        // 2. Soit on decide de creer à chaque fois les filtres pour la\n        // ressource selectionnée.\n        // Chaque solution a ses inconvenients/avantages.\n        // Implementation du choix 2 car elle offre plus de souplesse pour\n        // recuperer les 'form-data'...\n\n        var container = this._filterContainer;\n\n        var codeFound = false;\n        for (var i = 0; i < this._advancedSearchCodes.length; i++) {\n            if (this._advancedSearchCodes[i].id === code) {\n                codeFound = true;\n                break;\n            }\n        }\n\n        if (!codeFound) {\n            // cette ressource n'est pas disponible,\n            // on supprime les anciens enfants...\n            while (container.firstChild) {\n                container.removeChild(container.firstChild);\n            }\n            return;\n        }\n\n        // on sauvegarde la ressource de geocodage sélectionnée\n        this._currentGeocodingCode = code;\n\n        // on supprime les enfants...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        var lstAttributs = this._advancedSearchFilters[code];\n        if (!lstAttributs || lstAttributs.length === 0) {\n            // cette ressource n'est pas parametrable\n            return;\n        }\n\n        var divTable = this._createAdvancedSearchFiltersTableElement(code, true);\n\n        for (var j = 0; j < lstAttributs.length; j++) {\n            var divFilter = this._createAdvancedSearchFiltersAttributElement(lstAttributs[j]);\n            divTable.appendChild(divFilter);\n        }\n\n        container.appendChild(divTable);\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ################ methods to request and results ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAutoCompleteSearch()\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     * @param {String}   settings.text - text\n     * @param {Function} settings.onSuccess - callback\n     * @param {Function} settings.onFailure - callback\n     *\n     * @private\n     */\n    _requestAutoComplete : function (settings) {\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings || Object.keys(settings).length === 0) {\n            return;\n        }\n\n        // on ne fait pas de requête si la parametre 'text' est vide !\n        if (!settings.text) {\n            return;\n        }\n\n        logger.log(settings);\n\n        // on ne fait pas de requête si aucun droit !\n        if (this._noRightManagement) {\n            logger.log(\"no rights for all service !?\");\n            return;\n        }\n\n        // gestion des droits !\n        if (!this._servicesRightManagement[\"AutoCompletion\"]) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        var options = {};\n        // on recupere les options du service\n        L.Util.extend(options, this.options.autocompleteOptions.serviceOptions);\n        // ainsi que la recherche et les callbacks\n        L.Util.extend(options, settings);\n\n        var resources = this._servicesRightManagement[\"AutoCompletion\"].resources;\n        if (!resources || Object.keys(resources).length === 0) {\n            return;\n        }\n\n        // au cas où les options du services ne sont pas renseignées, on y ajoute\n        // les tables de ressources\n        if (L.Util.isArray(resources) && !options.filterOptions) {\n            options.filterOptions = {};\n            options.filterOptions.type = resources;\n        }\n\n        // gestion de la clef !\n        var key = this._servicesRightManagement[\"AutoCompletion\"][\"key\"];\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        L.Util.extend(options, {\n            apiKey : options.apiKey || this.options.apiKey || key\n        });\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        L.Util.extend(options, {\n            ssl : this.options.ssl\n        });\n\n        logger.log(options);\n\n        Gp.Services.autoComplete(options);\n    },\n\n    /**\n     * this method is called by this.onGeocodingSearch()\n     * and fills the container of the location list.\n     * it creates a HTML Element per location\n     * (cf. this. ...)\n     *\n     * @param {Array} locations - Array of Gp.Services.AutoComplete.SuggestedLocation corresponding to autocomplete results list\n     * @private\n     */\n    _fillAutoCompletedLocationListContainer : function (locations) {\n        if (!locations || locations.length === 0) {\n            return;\n        }\n\n        // on vide la liste avant de la construire\n        var element = this._suggestedContainer;\n        if (element.childElementCount) {\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n        }\n\n        for (var i = 0; i < locations.length; i++) {\n            // Proposals are dynamically filled in Javascript by autocomplete service\n            this._createAutoCompletedLocationElement(locations[i], i);\n        }\n    },\n\n    /**\n     * this method is called by this.onAutoCompleteSearch()\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     * @param {String}   settings.location - text\n     * @param {Function} settings.onSuccess - callback\n     * @param {Function} settings.onFailure - callback\n     *\n     * @private\n     */\n    _requestGeocoding : function (settings) {\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings || Object.keys(settings).length === 0) {\n            return;\n        }\n\n        // on ne fait pas de requête si la parametre 'text' est vide !\n        if (!settings.location) {\n            return;\n        }\n\n        logger.log(settings);\n\n        // on ne fait pas de requête si aucun droit !\n        if (this._noRightManagement) {\n            logger.log(\"no rights for all service !?\");\n            return;\n        }\n\n        // gestion des droits !\n        if (!this._servicesRightManagement[\"Geocode\"]) {\n            logger.log(\"no rights for this service !?\");\n            return;\n        }\n\n        var options = {};\n        // on recupere les options du service\n        L.Util.extend(options, this.options.geocodeOptions);\n        // ainsi que la recherche, les filtres du geocodage avancé et les callbacks\n        L.Util.extend(options, settings);\n        // on y force le param suivant, s'il n'a pas été surchargé :\n        if (!options.hasOwnProperty(\"returnFreeForm\")) {\n            L.Util.extend(options, {\n                returnFreeForm : true\n            });\n        }\n\n        var resources = this._servicesRightManagement[\"Geocode\"].resources;\n        if (!resources || Object.keys(resources).length === 0) {\n            return;\n        }\n\n        // au cas où les options du services ne sont pas renseignées, on y ajoute\n        // les tables de ressources\n        if (L.Util.isArray(resources) && !options.filterOptions) {\n            options.filterOptions = {};\n            options.filterOptions.type = resources;\n        }\n\n        // gestion de la clef !\n        var key = this._servicesRightManagement[\"Geocode\"][\"key\"];\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        L.Util.extend(options, {\n            apiKey : options.apiKey || this.options.apiKey || key\n        });\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        L.Util.extend(options, {\n            ssl : this.options.ssl\n        });\n\n        logger.log(options);\n        Gp.Services.geocode(options);\n    },\n\n    /**\n     * this method is called by this.onGeocodingSearch()\n     * and fills the container of the location results.\n     * it creates a HTML Element per location\n     * (cf. this. ...)\n     *\n     * @param {Object[]} locations - locations\n     *\n     * @private\n     */\n    _fillGeocodedLocationListContainer : function (locations) {\n        if (!locations || locations.length === 0) {\n            this._clearGeocodedLocation();\n            return;\n        }\n\n        // on vide la liste avant de la construire\n        var element = this._geocodedContainer;\n        if (element.childElementCount) {\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n        }\n\n        for (var i = 0; i < locations.length; i++) {\n            logger.log(locations[i]);\n            // Proposals are dynamically filled in Javascript by autocomplete service\n            this._createGeocodedLocationElement(locations[i], i);\n        }\n\n        // sauvegarde de l'etat des locations\n        this._geocodedLocations = locations;\n    },\n\n    /**\n     * this method is called by Gp.Services.autoComplete callback in case of success\n     * (cf. this.onAutoCompleteSearchText), for suggested locations with null coordinates\n     * (case of postalCode research for instance).\n     * Send a geocode request with suggested location 'fullText' attribute, to get its coordinates and display it in autocomplete results list container.\n     *\n     * @param {Gp.Services.AutoCompleteResponse.SuggestedLocation} suggestedLocation - autocompletion result (with null coordinates) to be geocoded\n     * @param {Number} i - suggestedLocation position in Gp.Services.AutoCompleteResponse.suggestedLocations autocomplete results list\n     * @private\n     */\n    _getGeocodeCoordinatesFromFullText : function (suggestedLocation, i) {\n        var _location = suggestedLocation.fullText;\n\n        var context = this;\n        this._requestGeocoding({\n            location : _location,\n            // callback onSuccess\n            onSuccess : function (response) {\n                logger.log(\"request from Geocoding (coordinates null)\", response);\n                if (response.locations && response.locations.length !== 0 && response.locations[0].position) {\n                    // on modifie les coordonnées du résultat en EPSG:4326 donc lat,lon\n                    if (context._suggestedLocations && context._suggestedLocations[i]) {\n                        context._suggestedLocations[i].position = {\n                            x : response.locations[0].position.y,\n                            y : response.locations[0].position.x\n                        };\n                        // et on l'affiche dans la liste\n                        context._locationsToBeDisplayed.unshift(context._suggestedLocations[i]);\n                        context._fillAutoCompletedLocationListContainer(context._locationsToBeDisplayed);\n                    }\n                }\n            },\n            /** callback onFailure */\n            onFailure : function () {\n                // si on n'a pas réussi à récupérer les coordonnées, on affiche quand même le résultat\n                if (context._suggestedLocations && context._suggestedLocations[i]) {\n                    context._createAutoCompletedLocationElement(context._suggestedLocations[i], i);\n                }\n            }\n        });\n    },\n\n    // ################################################################### //\n    // ######################### other methods ########################### //\n    // ################################################################### //\n\n    /**\n     * this sends the label to the input panel.\n     *\n     * FIXME appel en dur d'un identifiant CSS !\n     *\n     * @param {String} label - label suggested location\n     *\n     * @private\n     */\n    _setLabel : function (label) {\n        var element = L.DomUtil.get(\"GPsearchInputText-\" + this._uid);\n        element.value = label || \"\";\n    },\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and move/zoom on a position.\n     *\n     * @param {Object} position - {x : ..., y : ...}\n     * @param {Number} zoom - zoom level\n     *\n     * @private\n     */\n    _setPosition : function (position, zoom) {\n        var map = this._map;\n\n        map.setZoomAround(L.latLng(position.x, position.y), zoom, true);\n        map.panTo(L.latLng(position.x, position.y));\n    },\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and get zoom.\n     *\n     * @param {Object} info - info\n     *\n     * @returns {Integer} zoom level\n     *\n     * @private\n     */\n    _getZoom : function (info) {\n        var map = this._map;\n        var key = this.options.zoomTo;\n        var zoom = null;\n\n        // les valeurs du zooms sont determinées\n        // soit par les mots clefs suivants :  max, min ou auto\n        // soit par un niveau de zoom\n        // soit defini par l'utilisateur via une fonction\n\n        if (typeof key === \"function\") {\n            logger.trace(\"zoom function\");\n            zoom = key.call(this, info);\n        }\n\n        if (typeof key === \"number\") {\n            logger.trace(\"zoom level\");\n            zoom = key;\n        }\n\n        if (typeof key === \"string\") {\n            // if (key === \"max\") {\n            //     zoom = map.getMaxZoom();\n            // } else if (key === \"min\") {\n            //     zoom = map.getMinZoom();\n            // } else\n\n            if (key === \"auto\") {\n                logger.trace(\"zoom auto\");\n                zoom = SearchEngineUtils.zoomToResultsByDefault(info);\n            } else {\n                logger.trace(\"zoom level parsing\");\n                var value = parseInt(key, 10);\n                if (!isNaN(value)) {\n                    logger.trace(\"zoom parsing\");\n                    zoom = value;\n                }\n            }\n        }\n\n        // polyfill IE\n        Number.isInteger = Number.isInteger || function (value) {\n            return typeof value === \"number\" &&\n                isFinite(value) &&\n                Math.floor(value) === value;\n        };\n\n        // test de validité du zoom,\n        // on prend le zoom courant par defaut ...\n        if (!zoom || zoom === \"\" || !Number.isInteger(zoom)) {\n            logger.trace(\"zoom not found, current zoom...\");\n            zoom = map.getZoom();\n        }\n\n        // test si le zoom est dans l'espace de la carte\n        var min = map.getMinZoom();\n        var max = map.getMaxZoom();\n        if (zoom < min) {\n            logger.trace(\"zoom level min...\");\n            zoom = min;\n        }\n        if (zoom > max) {\n            logger.trace(\"zoom level max...\");\n            zoom = max;\n        }\n\n        logger.trace(\"zoom\", zoom);\n        return zoom;\n    },\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and displays a marker.\n     * FIXME\n     *\n     * @param {Object} position - position {x : ..., y : ...}\n     * @param {Object} information - suggested or geocoded information\n     * @param {Boolean} display - display a popup information\n     * @param {String} marker - style style\n     *\n     * @private\n     */\n    _setMarker : function (position, information, display, marker) {\n        var map = this._map;\n        if (this._marker != null) {\n            map.removeLayer(this._marker);\n            this._marker = null;\n        }\n\n        if (position) {\n            var _icon = null;\n            if (typeof marker === \"string\") {\n                _icon = new IconDefault(marker);\n            } else if (marker instanceof L.Icon) {\n                _icon = marker;\n            } else {\n                _icon = new IconDefault(\"blue\");\n                logger.log(\"Utilisation du marker par défaut !\");\n            }\n\n            // cf. http://leafletjs.com/reference.html#marker-options\n            var options = {\n                clickable : true,\n                zIndexOffset : 1000,\n                icon : _icon\n            };\n\n            this._marker = L.marker(L.latLng(position.x, position.y), options);\n            this._marker.addTo(map);\n\n            // FIXME\n            // doit on mettre une information\n            // - correctement construite ?\n            // - uniquement informatif ?\n            // - RIEN ?\n            if (display) {\n                var popupContent = null;\n\n                if (typeof information !== \"string\") {\n                    var values = [];\n                    if (information.service === \"DirectGeocodedLocation\") {\n                        if (information.fields.freeform) {\n                            popupContent = information.fields.freeform;\n                        } else {\n                            var attributs = this._advancedSearchFilters[information.type];\n                            for (var i = 0; i < attributs.length; i++) {\n                                var key = attributs[i].name;\n                                var value = information.fields[key];\n                                // on prend que les chaines de caractères\n                                if (typeof value === \"string\" || typeof value === \"number\") {\n                                    values.push(value);\n                                }\n                            }\n\n                            popupContent = values.join(\" - \");\n                        }\n                    } else if (information.service === \"SuggestedLocation\") {\n                        if (information.fields.fullText) {\n                            popupContent = information.fields.fullText;\n                        } else {\n                            values.push(information.fields.street || \"\");\n                            values.push(information.fields.postalCode || \"\");\n                            values.push(information.fields.commune || \"\");\n\n                            if (information.type === \"PositionOfInterest\") {\n                                values.push(information.fields.poi || \"\");\n                                values.push(information.fields.kind || \"\");\n                            }\n\n                            popupContent = values.join(\" - \");\n                        }\n                    } else {\n                        popupContent = \"sans informations.\";\n                    }\n                } else {\n                    popupContent = information;\n                }\n\n                this._marker.bindPopup(popupContent);\n            }\n        }\n    },\n\n    /**\n     * this method is called by this.onSearchReset()\n     * and it clears all results and the marker.\n     *\n     * @private\n     */\n    _clearResults : function () {\n        this._currentGeocodingLocation = null;\n\n        this._clearSuggestedLocation();\n        this._clearGeocodedLocation();\n\n        this._setMarker();\n    },\n\n    /**\n     * this method is called by this.onAutoCompleteSearchText()\n     * and it clears all suggested location.\n     *\n     * @private\n     */\n    _clearSuggestedLocation : function () {\n        this._suggestedLocations = [];\n        if (this._suggestedContainer) {\n            while (this._suggestedContainer.firstChild) {\n                this._suggestedContainer.removeChild(this._suggestedContainer.firstChild);\n            }\n        }\n    },\n\n    /**\n     * this method is called by this.onGeocodingAdvancedSearchSubmit()\n     * and it clears all geocoded location.\n     *\n     * @private\n     */\n    _clearGeocodedLocation : function () {\n        this._geocodedLocations = [];\n        if (this._geocodedContainer) {\n            while (this._geocodedContainer.firstChild) {\n                this._geocodedContainer.removeChild(this._geocodedContainer.firstChild);\n            }\n        }\n    },\n\n    // ################################################################### //\n    // ###################### other handlers events ###################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on 'GPshowSearchEnginePicto' tag label\n     * (cf. this._createShowSearchEnginePictoElement), and it cleans the component\n     * when it's closed.\n     * FIXME\n     *\n     * @private\n     */\n    onShowSearchEngineClick : function () {\n        // FIXME on nettoie ou pas ?\n        // this._clearResults();\n    },\n\n    /**\n     * this method is called by event 'click' on 'GPsearchInputReset' tag div\n     * (cf. this._createSearchInputElement), and it cleans the value of input.\n     *\n     * @private\n     */\n    onSearchResetClick : function () {\n        this._clearResults();\n    },\n\n    // ################################################################### //\n    // ################## handlers events AutoComplete ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'keyup' on 'GPsearchInputText' tag input\n     * (cf. this._createSearchInputElement), and it gets the value of input.\n     * this value is passed as a parameter for the service autocomplete (text).\n     * the results of the request are displayed into a drop down menu.\n     * FIXME\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onAutoCompleteSearchText : function (e) {\n        var value = e.target.value;\n        if (!value) {\n            return;\n        }\n\n        // aucun droits !\n        // on evite une requête...\n        if (this._noRightManagement) {\n            return;\n        }\n\n        // on sauvegarde le localisant\n        this._currentGeocodingLocation = value;\n\n        // on limite les requêtes à partir de 3 car. saisie !\n        if (value.length < 3) {\n            return;\n        }\n\n        var _triggerGeocode = this.options.autocompleteOptions.triggerGeocode;\n        var _triggerDelay = this.options.autocompleteOptions.triggerDelay;\n\n        // INFORMATION\n        // on effectue la requête au service d'autocompletion.\n        // on met en place des callbacks afin de recuperer les resultats ou\n        // les messages d'erreurs du service.\n        // les resultats sont affichés dans une liste deroulante.\n        // les messages d'erreurs sont affichés sur la console (?)\n\n        var context = this;\n        this._requestAutoComplete({\n            text : value,\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(\"request from AutoComplete\", results);\n                if (results) {\n                    // on sauvegarde l'etat des résultats\n                    context._suggestedLocations = results.suggestedLocations;\n                    context._locationsToBeDisplayed = [];\n                    if (context._servicesRightManagement[\"Geocode\"] && context._servicesRightManagement[\"Geocode\"][\"key\"]) {\n                        // on vérifie qu'on n'a pas récupéré des coordonnées nulles (par ex recherche par code postal)\n                        for (var i = 0; i < context._suggestedLocations.length; i++) {\n                            var ilocation = context._suggestedLocations[i];\n                            if (ilocation.position && ilocation.position.x === 0 && ilocation.position.y === 0 && ilocation.fullText) {\n                                // si les coordonnées sont nulles, il faut relancer une requête de géocodage avec l'attribut \"fullText\" récupéré\n                                context._getGeocodeCoordinatesFromFullText(ilocation, i);\n                            } else {\n                                // sinon on peut afficher normalement le résultat dans la liste\n                                context._locationsToBeDisplayed.push(ilocation);\n                            }\n                        };\n                    } else {\n                        // si on n'a aucun droit d'accès au géocodage, on affiche la liste telle quelle (pas d'autre option pour les coordonnées nulles)\n                        context._locationsToBeDisplayed = context._suggestedLocations;\n                    }\n                    // on affiche les résultats qui n'ont pas des coordonnées nulles\n                    context._fillAutoCompletedLocationListContainer(context._locationsToBeDisplayed);\n                    // on annule eventuellement une requete de geocodage en cours car on obtient des\n                    // de nouveau des resultats d'autocompletion...\n                    if (context._triggerHandler) {\n                        clearTimeout(context._triggerHandler);\n                        context._triggerHandler = null;\n                        logger.warn(\"Cancel a geocode request !\");\n                    }\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME\n                // où affiche t on les messages : ex. 'No suggestion matching the search' ?\n                context._clearSuggestedLocation();\n                logger.log(error.message);\n                // on envoie une requete de geocodage si aucun resultat d'autocompletion\n                // n'a été trouvé ! Et on n'oublie pas d'annuler celle qui est en cours !\n                if (error.message === \"No suggestion matching the search\" && _triggerGeocode) {\n                    if (context._triggerHandler) {\n                        clearTimeout(context._triggerHandler);\n                        logger.warn(\"Cancel the last geocode request !\");\n                    }\n                    context._triggerHandler = setTimeout(\n                        function () {\n                            logger.warn(\"Launch a geocode request (code postal) !\");\n                            context._requestGeocoding({\n                                location : value,\n                                returnFreeForm : true,\n                                // callback onSuccess\n                                onSuccess : function (results) {\n                                    logger.log(\"request from Geocoding\", results);\n                                    if (results) {\n                                        context._locationsToBeDisplayed = [];\n                                        // on modifie la structure des reponses pour être\n                                        // compatible avec l'autocompletion !\n                                        var locations = results.locations;\n                                        for (var i = 0; i < locations.length; i++) {\n                                            var location = locations[i];\n                                            location.fullText = location.placeAttributes.freeform;\n                                            location.position = {\n                                                x : location.position.y,\n                                                y : location.position.x\n                                            };\n                                            context._locationsToBeDisplayed.push(location);\n                                        }\n                                        context._fillAutoCompletedLocationListContainer(locations);\n                                    }\n                                },\n                                // callback onFailure\n                                onFailure : function (error) {\n                                    logger.log(error.message);\n                                }\n                            });\n                        }, _triggerDelay\n                    );\n                }\n            }\n        });\n    },\n\n    /**\n     * this method is called by event 'click' on 'GPautoCompleteResultsList' tag div\n     * (cf. this._createAutoCompleteListElement), and it selects the location.\n     * this location displays a marker on the map.\n     * FIXME\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onAutoCompletedResultsItemClick : function (e) {\n        var idx = ID.index(e.target.id);\n        var label = e.target.innerHTML;\n        logger.log(idx, label);\n        logger.log(this._locationsToBeDisplayed[idx]);\n\n        if (!idx) {\n            return;\n        }\n\n        // FIXME\n        // les coordonnées sont inversées entre les 2 services !?\n        // AutoCompletion : lon/lat\n        // Geocoding : lat/lon\n        var position = {\n            x : this._locationsToBeDisplayed[idx].position.y,\n            y : this._locationsToBeDisplayed[idx].position.x\n        };\n        var info = {\n            service : \"SuggestedLocation\",\n            type : this._locationsToBeDisplayed[idx].type,\n            fields : this._locationsToBeDisplayed[idx]\n        };\n\n        var zoom = this._getZoom(info);\n\n        this._setLabel(label);\n        this._setPosition(position, zoom);\n        if (this.options.displayMarker) {\n            this._setMarker(position, info, this.options.displayInfo, this.options.markerStyle);\n        }\n    },\n\n    // ################################################################### //\n    // ################### handlers events Geocode ####################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'submit' on 'GPsearchInput' tag form\n     * (cf. this._createSearchInputElement), and it gets the value of input.\n     * this value is passed as a parameter for the service geocoding.\n     * the results of the request are displayed into a window.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onGeocodingSearchSubmit : function (e) {\n        logger.log(e);\n        var value = e.target[0].value;\n        if (!value) {\n            return;\n        }\n\n        // aucun droits !\n        // on evite une requête...\n        if (this._noRightManagement) {\n            return;\n        }\n\n        // on sauvegarde le localisant\n        this._currentGeocodingLocation = value;\n\n        // on met en place l'affichage des resultats dans une fenetre de recherche.\n        var context = this;\n        this._requestGeocoding({\n            location : value,\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(\"request from Geocoding\", results);\n                if (results) {\n                    var locations = results.locations;\n                    context._fillGeocodedLocationListContainer(locations);\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME cf. this.onAutoCompleteSearch()\n                context._clearGeocodedLocation();\n                logger.log(error.message);\n            }\n        });\n    },\n\n    /**\n     * this method is called by event 'submit' on 'GPgeocodeResultsList' tag div\n     * (cf. this._createGeocodeResultsListElement), and it selects the location.\n     * this location displays a marker on the map.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onGeocodedResultsItemClick : function (e) {\n        var idx = ID.index(e.target.id);\n        var label = e.target.innerHTML;\n\n        logger.log(idx, label);\n        logger.log(this._geocodedLocations[idx]);\n\n        if (!idx) {\n            return;\n        }\n\n        var position = this._geocodedLocations[idx].position;\n        var info = {\n            service : \"DirectGeocodedLocation\",\n            type : this._geocodedLocations[idx].type,\n            fields : this._geocodedLocations[idx].placeAttributes\n        };\n\n        var zoom = this._getZoom(info);\n\n        this._setLabel(label);\n        this._setPosition(position, zoom);\n        if (this.options.displayMarker) {\n            this._setMarker(position, info, this.options.displayInfo, this.options.markerStyle);\n        }\n    },\n\n    // ################################################################### //\n    // ############## handlers events Geocode Advanced ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'change' on 'GPadvancedSearchCode' tag select\n     * (cf. this._createAdvancedSearchFormCodeElement), and it gets the value of\n     * option selected.\n     * this value is passed as a parameter to create the attributs container.\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onGeocodingAdvancedSearchCodeChange : function (e) {\n        logger.log(e);\n        var idx = e.target.selectedIndex;\n        var value = e.target.options[idx].value;\n\n        if (!value) {\n            return;\n        }\n\n        // INFORMATION\n        // le declenchement de l'evenement va creer un container de filtre à la volée...\n        // l'insertion des containers d'attributs dans le DOM sont :\n        // - soit GPadvancedSearchFilters > PositionOfInterest\n        // - soit GPadvancedSearchFilters > StreetAddress\n        // - soit GPadvancedSearchFilters > CadastralParcel\n        // cf. _setFilter() pour la creation du container\n\n        this._setFilter(value);\n    },\n\n    /**\n     * this method is called by event 'submit' on 'GPadvancedSearchForm' tag form\n     * (cf. this._createAdvancedSearchPanelFormElement), and it gets the value of all input.\n     * this value is passed as a parameter for the service geocoding.\n     * the results of the request are displayed into a window.\n     * TODO\n     *\n     * @param {Object} e - HTMLElement\n     * @param {Array} data - [{key : ..., value : ...}]\n     *\n     * @private\n     */\n    onGeocodingAdvancedSearchSubmit : function (e, data) {\n        logger.log(data);\n        if (!data || data.length === 0) {\n            return;\n        }\n\n        // recuperation des parametres des filtres pour les transmettre\n        // à la requête, ainsi que le type de table de ressources de geocodage,\n        // et le localisant\n        var _filterOptions = {};\n        _filterOptions[\"type\"] = [this._currentGeocodingCode];\n\n        var _location = this._currentGeocodingLocation || \"\";\n        if (this._currentGeocodingCode === \"CadastralParcel\") {\n            _location = \"\"; // on ne souhaite plus la saisie libre...\n        }\n\n        for (var i = 0; i < data.length; i++) {\n            var filter = data[i];\n            // on ne verifie pas les clefs sans valeur...\n            if (!filter.value) {\n                continue;\n            }\n\n            var filters = this._advancedSearchFilters[this._currentGeocodingCode];\n            for (var j = 0; j < filters.length; j++) {\n                var o = filters[j];\n\n                if (o.name === filter.key) {\n                    if (o.filter) {\n                        _filterOptions[filter.key] = filter.value;\n                    } else {\n                        // on concatene tous les valeurs des champs de recherche,\n                        // et on complete au besoin avec les valeur par defaut\n                        // (ex. '_')\n                        if (o.value) {\n                            var cur = filter.value.length;\n                            var max = o.value.length;\n                            if (max !== cur) {\n                                var masked = max - cur;\n                                var filler = o.value.charAt(0);\n                                while (filler.length < masked) {\n                                    filler += filler;\n                                }\n                                var fillerSlice = filler.slice(0, masked);\n                                filter.value = filter.value + fillerSlice;\n                            }\n                            // la location est de type concaténée dite \"freeform\"\n                            _location += filter.value;\n                        } else {\n                            // on est dans le cas où l'utilisateur utilise\n                            // la location structurée de la recherche avancée,\n                            // donc on ne tient plus compte de la saisie libre...\n                            if (typeof _location === \"string\") {\n                                _location = {};\n                            }\n                            _location[filter.key] = filter.value;\n                        }\n                    }\n                }\n            }\n        }\n\n        // on met en place l'affichage des resultats dans une fenetre de recherche.\n        var context = this;\n        this._requestGeocoding({\n            location : _location,\n            filterOptions : _filterOptions,\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(results);\n                if (results) {\n                    var locations = results.locations;\n                    context._fillGeocodedLocationListContainer(locations);\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME cf. this.onAutoCompleteSearch()\n                context._clearGeocodedLocation();\n                logger.log(error.message);\n            }\n        });\n    },\n\n    // ################################################################### //\n    // ###### METHODES PUBLIQUES (INTERFACE AVEC LE CONTROLE) ############ //\n    // ################################################################### //\n\n    /**\n     * This method is public.\n     * It allows to control the execution of a geocoding or an autocompletion.\n     *\n     * @param {String} text - location\n     * @param {Boolean} type - true (geocoding) / false (autocompletion)\n     * @param {Object} options - options\n     */\n    setText : function (text, type, options) {\n        if (!this._showContainer.checked) {\n            this._pictoContainer.click();\n        }\n\n        // on récupere les options des services\n        L.Util.extend(this.options, options);\n\n        var element = L.DomUtil.get(\"GPsearchInputText-\" + this._uid);\n        element.value = text;\n        if (type) {\n            var form = L.DomUtil.get(\"GPsearchInput-\" + this._uid);\n            form.dispatchEvent(new Event(\"submit\", {\n                bubbles : true,\n                cancelable : true\n            }));\n        } else {\n            element.dispatchEvent(new KeyboardEvent(\"keyup\"));\n        }\n    }\n});\n\nexport default SearchEngine;\n","var ElevationPathDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPelevationPath\");\n        container.className = \"GPwidget\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################# Methods to display Main Panel ################### //\n    // ################################################################### //\n\n    /**\n     * Hidden checkbox for minimizing/maximizing panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowElevationPathElement : function () {\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowElevationPath\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Show control\n     * see event !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowElevationPathPictoElement : function () {\n        // contexte d'execution\n        var context = this;\n\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPshowElevationPathPicto\");\n        label.className = \"GPshowAdvancedToolPicto\";\n        label.htmlFor = this._addUID(\"GPshowElevationPath\");\n        label.title = \"Calculer un profil\";\n\n        // gestionnaire d'evenement :\n        // on ouvre le menu de saisie de saisie\n        // L'ouverture/Fermeture permet de faire le menage\n        // (reinitialisation)\n        if (label.addEventListener) {\n            label.addEventListener(\"click\", function (e) {\n                context.onShowElevationPathClick(e);\n            });\n        } else if (label.attachEvent) {\n            label.attachEvent(\"onclick\", function (e) {\n                context.onShowElevationPathClick(e);\n            });\n        }\n\n        var spanOpen = document.createElement(\"span\");\n        spanOpen.id = this._addUID(\"GPshowElevationPathOpen\");\n        spanOpen.className = \"GPshowAdvancedToolOpen\";\n        label.appendChild(spanOpen);\n\n        return label;\n    },\n\n    // ################################################################### //\n    // ######################### Methods to Panel ######################## //\n    // ################################################################### //\n\n    /**\n     * Create Container Panel\n     *\n     * FIXME\n     * don't call this._createElevationPathPanelHeaderElement\n     * don't call this._createElevationPathPanelProfilElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathPanelElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPelevationPathPanel\");\n        div.className = \"GPpanel\";\n\n        // div.appendChild(this._createElevationPathPanelHeaderElement());\n        // div.appendChild(this._createElevationPathPanelProfilElement());\n\n        return div;\n    },\n\n    /**\n     * Create Header Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathPanelHeaderElement : function () {\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader\";\n\n        var divInfo = document.createElement(\"div\");\n        divInfo.id = this._addUID(\"GPelevationPathPanelInfo\");\n        divInfo.className = \"GPpanelInfo\";\n        divInfo.title = \"Informations\";\n        // add event on click\n        if (divInfo.addEventListener) {\n            divInfo.addEventListener(\n                \"click\",\n                function () {\n                    self.onOpenElevationPathInfoClick();\n                }\n            );\n        } else if (divInfo.attachEvent) {\n            // internet explorer\n            divInfo.attachEvent(\n                \"onclick\",\n                function () {\n                    self.onOpenElevationPathInfoClick();\n                }\n            );\n        }\n        container.appendChild(divInfo);\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle\";\n        divTitle.innerHTML = \"Profil Altimétrique\";\n        container.appendChild(divTitle);\n\n        var divReduce = document.createElement(\"div\");\n        divReduce.id = this._addUID(\"GPelevationPathPanelReduce\");\n        divReduce.className = \"GPpanelReduce\";\n        divReduce.title = \"Masquer le panneau\";\n\n        if (divReduce.addEventListener) {\n            divReduce.addEventListener(\"click\", function () {\n                if (typeof self.onReduceElevationPathPanelClick === \"function\") {\n                    document.getElementById(self._addUID(\"GPshowElevationPath\")).checked = false;\n                    self.onReduceElevationPathPanelClick();\n                }\n            }, false);\n        } else if (divReduce.attachEvent) {\n            divReduce.attachEvent(\"onclick\", function () {\n                if (typeof self.onReduceElevationPathPanelClick === \"function\") {\n                    document.getElementById(self._addUID(\"GPshowElevationPath\")).checked = false;\n                    self.onReduceElevationPathPanelClick();\n                }\n            });\n        }\n        container.appendChild(divReduce);\n\n        var divClose = document.createElement(\"div\");\n        divClose.id = this._addUID(\"GPelevationPathPanelClose\");\n        divClose.className = \"GPpanelClose\";\n        divClose.title = \"Fermer le panneau\";\n\n        // Link panel close / visibility checkbox\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowElevationPathPicto\")).click();\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowElevationPathPicto\")).click();\n            });\n        }\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * Create Form\n     * see evenement !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathPanelProfilElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = \"GPelevationPathProfil\";\n\n        return div;\n    },\n\n    /**\n     * Create Waiting Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathWaitingElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPelevationPathCalcWaitingContainer\");\n        div.className = \"GPelevationPathCalcWaitingContainerHidden\";\n\n        var p = document.createElement(\"p\");\n        p.className = \"GPelevationPathCalcWaiting\";\n        p.innerHTML = \"Calcul en cours...\";\n\n        div.appendChild(p);\n\n        return div;\n    },\n\n    /**\n     * Create information Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathInformationsElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPelevationPathInformationsContainer\");\n        div.className = \"GPelevationPathInformationsContainerHidden\";\n\n        var p = document.createElement(\"p\");\n        p.className = \"GPelevationPathInformations\";\n        p.innerHTML = \"Aucune information...\";\n        div.appendChild(p);\n\n        return div;\n    },\n\n    /**\n     * Add a information into Panel\n     *\n     * @param {String} value - value of item\n     * @returns {DOMElement} DOM element\n     */\n    _addElevationPathInformationsItem : function (value) {\n        var div = document.getElementById(this._addUID(\"GPelevationPathInformationsContainer\"));\n\n        if (div) {\n            var p = document.createElement(\"p\");\n            p.className = \"GPelevationPathInformations\";\n            p.innerHTML = value;\n            div.appendChild(p);\n        }\n\n        return div;\n    }\n};\n\nexport default ElevationPathDOM;\n","/* globals AmCharts, d3 */\nvar ProfileElevationPathDOM = {\n\n    /**\n     * Gets a css property from an element\n     *\n     * @param {String} element The element to get the property from\n     * @param {String} property The css property\n     * @returns {String} The value of the property\n     *\n     * @see https://stackoverflow.com/questions/7444451/how-to-get-the-actual-rendered-font-when-its-not-defined-in-css\n     */\n    _getCssProperty : function (element, property) {\n        return window.getComputedStyle(element, null).getPropertyValue(property);\n    },\n\n    /**\n     * Uses canvas.measureText to compute and return the width of the given text of given font in pixels.\n     *\n     * @param {String} text The text to be rendered.\n     * @param {String} container The container of the text\n     * @param {String} font The font of the container if known, format: 'weight size familiy'\n     * @returns {Number} The width of the text\n     *\n     * @see https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript/21015393#21015393\n     */\n    _getTextWidth : function (text, container, font = null) {\n        // re-use canvas object for better performance\n        var canvas = this.canvas || (this.canvas = document.createElement(\"canvas\"));\n        var context = canvas.getContext(\"2d\");\n        if (font === null) {\n            context.font = `${this._getCssProperty(container, \"font-weight\")} ${this._getCssProperty(container, \"font-size\")} ${this._getCssProperty(container, \"font-family\")}`;\n        } else {\n            context.font = font;\n        }\n\n        var metrics = context.measureText(text);\n        return metrics.width;\n    },\n\n    /**\n     * Converts a data point z to svg y coord\n     *\n     * @param {Object} z The z to convert.\n     * @param {Number} pathHeight The height of the path in the svg container in px\n     * @param {Number} minGraphZ Min z of the graph\n     * @param {Number} pxPerMZ Number of pixels per meter for the z (y) axis\n     * @returns {Number} The y svg coordinate of the point\n     *\n     */\n    _dataZToSvgY : function (z, pathHeight, minGraphZ, pxPerMZ) {\n        return pathHeight - (z - minGraphZ) * pxPerMZ - 0.5;\n    },\n\n    /**\n     * Converts a data point dist value to svg x coord\n     *\n     * @param {Number} dist The dist to convert\n     * @param {Number} svgWidth The witdth of the svg container in px\n     * @param {Number} pathWidth The witdth of the path in the svg container in px\n     * @param {Number} pxPerMX Number of pixels per meter for the x axis\n     * @returns {Array} The x svg coordinate of the point\n     *\n     */\n    _dataDistToSvgX : function (dist, svgWidth, pathWidth, pxPerMX) {\n        return (svgWidth - pathWidth) + dist * pxPerMX;\n    },\n\n    /**\n     * Converts a svg x coord to dist value\n     *\n     * @param {Number} svgX The dist to convert\n     * @param {Number} svgWidth The witdth of the svg container in px\n     * @param {Number} pathWidth The witdth of the path in the svg container in px\n     * @param {Number} pxPerMX Number of pixels per meter for the x axis\n     * @returns {Array} The dist value\n     *\n     */\n    _svgXToDataDist : function (svgX, svgWidth, pathWidth, pxPerMX) {\n        return (svgX + pathWidth - svgWidth) / pxPerMX;\n    },\n\n    /**\n     * Returns the index of value if it were inserted in sorted (by dist) array of data points.\n     *\n     * @param {Array} array Sorted array of data points (with dist property)\n     * @param {Number} value Value to test the index of.\n     * @returns {Number} The index the value would have.\n     *\n     */\n    _arrayBisect : function (array, value) {\n        let idx;\n        if (array.length === 0) {\n            return 0;\n        }\n        for (idx = 0; idx < array.length; idx++) {\n            if (value < array[idx].dist) {\n                return idx;\n            }\n        }\n        return idx - 1;\n    },\n\n    /**\n     * Display Profile function used by default : no additonal framework needed.\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileByDefault : function (data, container, context, className) {\n        var self = context;\n\n        if (!container) {\n            return;\n        }\n\n        if (!data) {\n            return;\n        }\n\n        // on nettoie toujours...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        const margin = {\n            top : 25,\n            right : 15,\n            bottom : 10,\n            left : 10\n        };\n\n        var _displayProfileOptions = self.options.displayProfileOptions;\n        var _points = data.points;\n\n        var sortedElev = JSON.parse(JSON.stringify(_points));\n        sortedElev.sort(function (e1, e2) {\n            return e1.z - e2.z;\n        });\n\n        var minZ = sortedElev[0].z;\n        var maxZ = sortedElev[sortedElev.length - 1].z;\n        var dist = data.distance;\n        let distUnit = \"m\";\n\n        const widgetDiv = document.createElement(\"div\");\n        widgetDiv.id = \"profileElevationByDefault\";\n        container.appendChild(widgetDiv);\n\n        // Détermination des tailles en pixels des éléments du widget\n        const widgetHeigth = container.clientHeight - margin.top - margin.bottom;\n        const widgetWidth = container.clientWidth - margin.left - margin.right;\n\n        const zLabelWidth = 17;\n        const zGradWidth = this._getTextWidth(Math.round(maxZ).toLocaleString() + \",88\", container, \"400 10 Verdana\");\n        const xLabelHeight = 17;\n        const xGradHeight = 15;\n\n        const minZguideHeigth = 15;\n        const minXguideWidth = this._getTextWidth(Math.round(dist).toLocaleString() + \",5\", container);\n        const minNumXGuides = 1;\n\n        const pathHeight = widgetHeigth - xLabelHeight - xGradHeight;\n        const pathWidth = widgetWidth - zLabelWidth - zGradWidth;\n\n        const elevationSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n        elevationSvg.id = \"profileElevationByDefaultSvg\";\n        elevationSvg.setAttribute(\"style\", \"display: block; margin: auto; overflow: visible; position: absolute; left: 10px;\");\n        elevationSvg.setAttribute(\"viewBox\", `0 0 ${container.clientWidth} ${container.clientHeight}`);\n        elevationSvg.setAttribute(\"width\", \"100%\");\n        elevationSvg.setAttribute(\"height\", \"100%\");\n\n        // Détermination des guides en ordonnée :\n        const maxNumZguides = Math.floor(pathHeight / minZguideHeigth);\n        let gradZ;\n        // Traitement du cas altitude max = altitude min\n        if (maxZ === minZ) {\n            gradZ = 0.1;\n        } else {\n            gradZ = Math.pow(10, (Math.ceil(Math.log((maxZ - minZ) / maxNumZguides) / Math.log(10)))) / 2;\n        }\n        let minGraphZ = Math.floor(minZ / gradZ) * gradZ;\n        let maxGraphZ = Math.ceil(maxZ / gradZ) * gradZ;\n        // cas où le path atteint pile les graduations extremes : ajout d'une gradiation\n        if (maxGraphZ === maxZ) {\n            maxGraphZ += gradZ;\n        }\n        // cas où gradZ < 1 : nombres flottants capricieux...\n        minGraphZ = Math.round(minGraphZ * 100) / 100;\n        maxGraphZ = Math.round(maxGraphZ * 100) / 100;\n\n        let numZguides = Math.round((maxGraphZ - minGraphZ) / gradZ);\n\n        // Si plus de guides que le max, on passe à une graduation de 10**x en 10**x (et non 10**x / 2)\n        if (numZguides + 1 > maxNumZguides) {\n            gradZ = Math.pow(10, (Math.ceil(Math.log((maxZ - minZ) / maxNumZguides) / Math.log(10))));\n            minGraphZ = Math.floor(minZ / gradZ) * gradZ;\n            maxGraphZ = Math.ceil(maxZ / gradZ) * gradZ;\n            // cas où le path atteint pile les graduations extremes : ajout d'une gradiation\n            if (maxGraphZ === maxZ) {\n                maxGraphZ += gradZ;\n            }\n            // cas où gradZ < 1 : nombres flottants capricieux...\n            minGraphZ = Math.round(minGraphZ * 100) / 100;\n            maxGraphZ = Math.round(maxGraphZ * 100) / 100;\n            numZguides = Math.floor((maxGraphZ - minGraphZ) / gradZ);\n        }\n\n        numZguides = Math.max(Math.round(numZguides), 1);\n\n        const axisZ = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        axisZ.setAttribute(\"class\", \"profile-z-vertical\");\n\n        const guidesZ = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        const gradZyOffsetPx = pathHeight / numZguides;\n        let pxPerMZ = pathHeight / (maxGraphZ - minGraphZ);\n        // Traitement du cas altitude max = altitude min\n        if (maxZ === minZ) {\n            pxPerMZ = pathHeight / 0.2;\n        } else {\n            pxPerMZ = pathHeight / (maxGraphZ - minGraphZ);\n        }\n\n        let gradZtext;\n        let yTextTranslation;\n        let yStrokeTranslation;\n        let gradZstroke;\n        let gradZpath;\n        let gradZgrad;\n        // Ajout des graduations au graphique\n        for (let i = 0; i <= numZguides; i++) {\n            gradZtext = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            gradZtext.setAttribute(\"class\", \"profile-z-graduation\");\n            gradZtext.setAttribute(\"font-family\", \"Verdana\");\n            gradZtext.setAttribute(\"font-size\", \"10px\");\n            gradZtext.setAttribute(\"fill\", \"#5E5E5E\");\n            // Cas où gradZ < 1 : nombres flottants capricieux...\n            // Le Math.round est pour éviter des ennuis du genre 3 * 0.1 = 0.300000000000004\n            gradZtext.textContent = (Math.round(100 * (minGraphZ + i * gradZ)) / 100).toLocaleString();\n\n            yTextTranslation = pathHeight - i * gradZyOffsetPx;\n\n            gradZtext.setAttribute(\"transform\", `translate(${zLabelWidth + zGradWidth - 8}, ${yTextTranslation + 5})`);\n            gradZtext.setAttribute(\"text-anchor\", \"end\");\n            axisZ.appendChild(gradZtext);\n\n            yStrokeTranslation = Math.round(yTextTranslation) - 0.5;\n\n            gradZstroke = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            gradZpath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradZpath.setAttribute(\"cs\", \"100,100\");\n            gradZpath.setAttribute(\"stroke-width\", \"1\");\n            if (i !== 0) {\n                gradZpath.setAttribute(\"stroke-opacity\", \"0.2\");\n            } else {\n                gradZpath.setAttribute(\"stroke-opacity\", \"1\");\n            }\n            gradZpath.setAttribute(\"stroke\", \"#000000\");\n            gradZpath.setAttribute(\"fill\", \"none\");\n            gradZpath.setAttribute(\"d\", `M${zLabelWidth + zGradWidth},${yStrokeTranslation} L${pathWidth + zLabelWidth + zGradWidth},${yStrokeTranslation}`);\n\n            gradZgrad = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradZgrad.setAttribute(\"cs\", \"100,100\");\n            gradZgrad.setAttribute(\"stroke-width\", \"1\");\n            gradZgrad.setAttribute(\"stroke-opacity\", \"1\");\n            gradZgrad.setAttribute(\"stroke\", \"#000000\");\n            gradZgrad.setAttribute(\"fill\", \"none\");\n            gradZgrad.setAttribute(\"d\", `M${zLabelWidth + zGradWidth},${yStrokeTranslation} L${zLabelWidth + zGradWidth + 5},${yStrokeTranslation}`);\n            gradZgrad.setAttribute(\"transform\", \"translate(-5, 0)\");\n\n            gradZstroke.appendChild(gradZgrad);\n            gradZstroke.appendChild(gradZpath);\n            guidesZ.appendChild(gradZstroke);\n        }\n\n        var axisZLegend = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        axisZLegend.setAttribute(\"class\", \"profile-z-legend\");\n        axisZLegend.setAttribute(\"font-family\", \"Verdana\");\n        axisZLegend.setAttribute(\"font-size\", \"11px\");\n        axisZLegend.setAttribute(\"fill\", \"#5E5E5E\");\n        axisZLegend.textContent = \"Altitude (m)\";\n\n        axisZLegend.setAttribute(\"transform\", `translate(${zLabelWidth - 8}, ${Math.round(pathHeight / 2)}) rotate(-90)`);\n        axisZLegend.setAttribute(\"text-anchor\", \"middle\");\n\n        axisZ.appendChild(axisZLegend);\n        elevationSvg.appendChild(axisZ);\n        elevationSvg.appendChild(guidesZ);\n\n        // Détermination des guides en abscisse :\n        // Passage éventuel en km\n        if (dist > 2000) {\n            dist /= 1000;\n            distUnit = \"km\";\n        }\n\n        const maxNumXguides = Math.floor(pathWidth / minXguideWidth);\n        let gradX = Math.pow(10, (Math.ceil(Math.log((dist) / maxNumXguides) / Math.log(10)))) / 2;\n        const maxGraphX = dist;\n\n        // Si plus de guides que le max, on passe à une graduation de 10**x en 10**x (et non 10**x / 2)\n        let numXguides = Math.floor(maxGraphX / gradX);\n        if (numXguides > maxNumXguides) {\n            gradX = Math.pow(10, (Math.ceil(Math.log((dist) / maxNumXguides) / Math.log(10))));\n            numXguides = Math.floor(maxGraphX / gradX);\n        } else if (numXguides < minNumXGuides) {\n            gradX = Math.pow(10, (Math.ceil(Math.log((dist) / maxNumXguides) / Math.log(10))) - 1);\n            numXguides = Math.floor(maxGraphX / gradX);\n        }\n\n        numXguides = Math.max(numXguides, 1);\n        const lastGradX = gradX * numXguides;\n\n        const axisX = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        axisX.setAttribute(\"class\", \"profile-x-vertical\");\n\n        const guidesX = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        // Décalage des graduations pour que la dernière corresponde à la distance max\n        const pxPerMX = pathWidth / maxGraphX;\n        const xOffset = (maxGraphX - lastGradX) * pxPerMX;\n        const gradXxOffsetPx = Math.round((pathWidth - xOffset) / numXguides);\n\n        let gradXtext;\n        let xTextTranslation;\n        let xStrokeTranslation;\n        let gradXstroke;\n        let gradXpath;\n        let gradXgrad;\n        // Ajout des graduations au graphique\n        for (let i = 0; i <= numXguides + 1; i++) {\n            gradXtext = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            gradXtext.setAttribute(\"class\", \"profile-x-graduation\");\n            gradXtext.setAttribute(\"font-family\", \"Verdana\");\n            gradXtext.setAttribute(\"font-size\", \"10px\");\n            gradXtext.setAttribute(\"fill\", \"#5E5E5E\");\n\n            // Exclusion du cas de la dernière graduation : correspond à la distance max : pas de texte\n            if (i !== numXguides + 1) {\n                // Cas où gradX < 1 : nombres flottants capricieux...\n                gradXtext.textContent = (Math.round(100 * i * gradX) / 100).toLocaleString();\n            }\n\n            xTextTranslation = zLabelWidth + zGradWidth + i * gradXxOffsetPx;\n            // Cas de la dernière graduation : correspond à la distance max\n            if (i === numXguides + 1) {\n                xTextTranslation = zLabelWidth + zGradWidth + pathWidth;\n            }\n\n            gradXtext.setAttribute(\"transform\", `translate(${xTextTranslation}, ${pathHeight + xGradHeight + 5})`);\n            gradXtext.setAttribute(\"text-anchor\", \"middle\");\n            axisX.appendChild(gradXtext);\n\n            xStrokeTranslation = xTextTranslation - 0.5;\n\n            gradXstroke = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            gradXpath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradXpath.setAttribute(\"cs\", \"100,100\");\n            gradXpath.setAttribute(\"stroke-width\", \"1\");\n            if (i !== 0) {\n                gradXpath.setAttribute(\"stroke-opacity\", \"0.2\");\n            } else {\n                gradXpath.setAttribute(\"stroke-opacity\", \"1\");\n            }\n            gradXpath.setAttribute(\"stroke\", \"#000000\");\n            gradXpath.setAttribute(\"fill\", \"none\");\n            gradXpath.setAttribute(\"d\", `M${xStrokeTranslation},${pathHeight} L${xStrokeTranslation},0`);\n\n            gradXgrad = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradXgrad.setAttribute(\"cs\", \"100,100\");\n            gradXgrad.setAttribute(\"stroke-width\", \"1\");\n            gradXgrad.setAttribute(\"stroke-opacity\", \"1\");\n            gradXgrad.setAttribute(\"stroke\", \"#000000\");\n            gradXgrad.setAttribute(\"fill\", \"none\");\n            gradXgrad.setAttribute(\"d\", `M${xStrokeTranslation},${pathHeight} L${xStrokeTranslation},${pathHeight - 5}`);\n            gradXgrad.setAttribute(\"transform\", \"translate(0, 5)\");\n\n            gradXstroke.appendChild(gradXgrad);\n            gradXstroke.appendChild(gradXpath);\n            guidesX.appendChild(gradXstroke);\n        }\n\n        var axisXLegend = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        axisXLegend.setAttribute(\"class\", \"profile-x-legend\");\n        axisXLegend.setAttribute(\"font-family\", \"Verdana\");\n        axisXLegend.setAttribute(\"font-size\", \"11px\");\n        axisXLegend.setAttribute(\"fill\", \"#5E5E5E\");\n        axisXLegend.textContent = `Distance (${distUnit})`;\n\n        axisXLegend.setAttribute(\"transform\", `translate(${zLabelWidth + zGradWidth + pathWidth / 2}, ${pathHeight + xGradHeight + xLabelHeight + 3})`);\n        axisXLegend.setAttribute(\"text-anchor\", \"middle\");\n\n        axisX.appendChild(axisXLegend);\n        elevationSvg.appendChild(axisX);\n        elevationSvg.appendChild(guidesX);\n\n        const elevationPathG = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        let factor = 1;\n        if (distUnit === \"km\") {\n            factor = 1000;\n        }\n\n        let pointX = this._dataDistToSvgX(_points[0].dist / factor, widgetWidth, pathWidth, pxPerMX);\n        let pointY = this._dataZToSvgY(_points[0].z, pathHeight, minGraphZ, pxPerMZ);\n        let pathD = `M${pointX},${pointY}`;\n\n        for (let i = 1; i < _points.length; i++) {\n            pointX = this._dataDistToSvgX(_points[i].dist / factor, widgetWidth, pathWidth, pxPerMX);\n            pointY = this._dataZToSvgY(_points[i].z, pathHeight, minGraphZ, pxPerMZ);\n            pathD += ` L${pointX},${pointY}`;\n        }\n\n        const pathPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        pathPath.setAttribute(\"cs\", \"100,100\");\n        pathPath.setAttribute(\"stroke-width\", \"1\");\n        pathPath.setAttribute(\"stroke-opacity\", \"1\");\n        pathPath.setAttribute(\"stroke\", \"#0B6BA7\");\n        pathPath.setAttribute(\"fill\", \"none\");\n        pathPath.setAttribute(\"d\", pathD);\n\n        // Fermeture du path pour le fill\n        pathD += ` L${pointX},${pathHeight}`;\n        pathD += ` L${widgetWidth - pathWidth},${pathHeight}`;\n\n        const pathFill = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        pathFill.setAttribute(\"cs\", \"100,100\");\n        pathFill.setAttribute(\"stroke-width\", \"1\");\n        pathFill.setAttribute(\"stroke-opacity\", \"0\");\n        pathFill.setAttribute(\"stroke\", \"#000000\");\n        pathFill.setAttribute(\"fill\", \"#00B798\");\n        pathFill.setAttribute(\"fill-opacity\", \"0.4\");\n        pathFill.setAttribute(\"d\", pathD);\n\n        elevationPathG.appendChild(pathPath);\n        elevationPathG.appendChild(pathFill);\n        elevationSvg.appendChild(elevationPathG);\n\n        // Mise en place de l'écouteur d'évènement : pour l'affichage dynamique\n        const dynamicsG = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        // Pour écouter la position de la souris\n        const pathRectangle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        pathRectangle.setAttribute(\"width\", pathWidth);\n        pathRectangle.setAttribute(\"height\", pathHeight);\n        pathRectangle.setAttribute(\"transform\", `translate(${widgetWidth - pathWidth},0)`);\n        pathRectangle.setAttribute(\"visibility\", \"hidden\");\n        pathRectangle.setAttribute(\"pointer-events\", \"all\");\n\n        const sortedDist = JSON.parse(JSON.stringify(_points));\n        sortedDist.sort(function (e1, e2) {\n            return e1.dist - e2.dist;\n        });\n\n        const focusLineX = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n        focusLineX.setAttribute(\"id\", \"focusLineX\");\n        focusLineX.setAttribute(\"class\", \"focusLine-default\");\n        focusLineX.setAttribute(\"fill\", \"none\");\n        focusLineX.setAttribute(\"stroke\", \"#F90\");\n        focusLineX.setAttribute(\"stroke-width\", \"0.5px\");\n        focusLineX.setAttribute(\"visibility\", \"hidden\");\n\n        const focusLineY = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n        focusLineY.setAttribute(\"id\", \"focusLineY\");\n        focusLineY.setAttribute(\"class\", \"focusLine-default\");\n        focusLineY.setAttribute(\"fill\", \"none\");\n        focusLineY.setAttribute(\"stroke\", \"#F90\");\n        focusLineY.setAttribute(\"stroke-width\", \"0.5px\");\n        focusLineY.setAttribute(\"visibility\", \"hidden\");\n\n        const focusCircle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n        focusCircle.setAttribute(\"id\", \"focusCircle\");\n        focusCircle.setAttribute(\"r\", 4);\n        focusCircle.setAttribute(\"class\", \"circle-default focusCircle-default\");\n        focusCircle.setAttribute(\"fill\", \"#F90\");\n        focusCircle.setAttribute(\"visibility\", \"hidden\");\n\n        dynamicsG.appendChild(focusCircle);\n        dynamicsG.appendChild(focusLineX);\n        dynamicsG.appendChild(focusLineY);\n\n        // Tooltip\n        const tooltipDiv = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        const altiSpan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n        const slopeSpan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n        const coordsSpan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n\n        tooltipDiv.setAttribute(\"style\", \"text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;\");\n        tooltipDiv.style.pointerEvents = \"none\";\n        tooltipDiv.style.position = \"fixed\";\n        // tooltipDiv.classList.add(\"tooltipInit\");\n        // IE...\n        tooltipDiv.setAttribute(\"class\", \"tooltipInit\");\n        tooltipDiv.setAttribute(\"text-anchor\", \"middle\");\n\n        widgetDiv.appendChild(tooltipDiv);\n\n        altiSpan.setAttribute(\"class\", \"altiPathValue\");\n        altiSpan.setAttribute(\"x\", \"0\");\n        altiSpan.setAttribute(\"dy\", \"-.7em\");\n\n        slopeSpan.setAttribute(\"class\", \"altiPathValue\");\n        slopeSpan.setAttribute(\"x\", \"0\");\n        slopeSpan.setAttribute(\"dy\", \"1em\");\n\n        coordsSpan.setAttribute(\"class\", \"altiPathCoords\");\n        coordsSpan.setAttribute(\"x\", \"0\");\n        coordsSpan.setAttribute(\"dy\", \"1em\");\n\n        tooltipDiv.appendChild(altiSpan);\n        if (_displayProfileOptions.currentSlope) {\n            tooltipDiv.appendChild(slopeSpan);\n        }\n        tooltipDiv.appendChild(coordsSpan);\n\n        const tooltipG = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        dynamicsG.appendChild(tooltipG);\n\n        const tooltipBubble = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        tooltipBubble.setAttribute(\"cs\", \"100,100\");\n        tooltipBubble.setAttribute(\"fill\", \"#FFFFFF\");\n        tooltipBubble.setAttribute(\"stroke\", \"#CCCCCC\");\n        tooltipBubble.setAttribute(\"fill-opacity\", \"0.8\");\n        tooltipBubble.setAttribute(\"stroke-width\", \"1\");\n        tooltipBubble.setAttribute(\"stroke-opacity\", \"1\");\n\n        const tooltipBubbleShadow = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        tooltipBubbleShadow.setAttribute(\"cs\", \"100,100\");\n        tooltipBubbleShadow.setAttribute(\"fill\", \"#FFFFFF\");\n        tooltipBubbleShadow.setAttribute(\"stroke\", \"#000000\");\n        tooltipBubbleShadow.setAttribute(\"fill-opacity\", \"0\");\n        tooltipBubbleShadow.setAttribute(\"stroke-width\", \"1\");\n        tooltipBubbleShadow.setAttribute(\"stroke-opacity\", \"0.4\");\n        tooltipBubbleShadow.setAttribute(\"transform\", \"translate(1,1)\");\n\n        tooltipG.appendChild(tooltipBubbleShadow);\n        tooltipG.appendChild(tooltipBubble);\n        tooltipG.appendChild(tooltipDiv);\n\n        // tooltipG.classList.add(\"tooltipInit\");\n        // IE... deprecated\n        tooltipG.setAttribute(\"class\", \"tooltipInit\");\n        tooltipG.style.pointerEvents = \"none\";\n\n        pathRectangle.addEventListener(\"mouseover\", function () {\n            focusLineX.setAttribute(\"visibility\", \"visible\");\n            focusLineY.setAttribute(\"visibility\", \"visible\");\n            focusCircle.setAttribute(\"visibility\", \"visible\");\n            className.__createProfileMarker(self, _points[0]);\n\n            // tooltips\n            // tooltipDiv.classList.remove(\"tooltipInit\");\n            // tooltipG.classList.remove(\"tooltipInit\");\n            // tooltipDiv.classList.remove(\"tooltipFadeOut\");\n            // tooltipG.classList.remove(\"tooltipFadeOut\");\n            // tooltipDiv.classList.add(\"tooltipFadeIn\");\n            // tooltipG.classList.add(\"tooltipFadeIn\");\n            // IE... deprecated\n            tooltipDiv.setAttribute(\"class\", \"tooltipFadeIn\");\n            tooltipG.setAttribute(\"class\", \"tooltipFadeIn\");\n        });\n\n        pathRectangle.addEventListener(\"mouseout\", function () {\n            focusLineX.setAttribute(\"visibility\", \"hidden\");\n            focusLineY.setAttribute(\"visibility\", \"hidden\");\n            focusCircle.setAttribute(\"visibility\", \"hidden\");\n            className.__removeProfileMarker(self);\n            // tooltips\n            // tooltipDiv.classList.remove(\"tooltipFadeIn\");\n            // tooltipG.classList.remove(\"tooltipFadeIn\");\n            // tooltipDiv.classList.add(\"tooltipFadeOut\");\n            // tooltipG.classList.add(\"tooltipFadeOut\");\n            // IE... deprecated\n            tooltipDiv.setAttribute(\"class\", \"tooltipFadeOut\");\n            tooltipG.setAttribute(\"class\", \"tooltipFadeOut\");\n        });\n\n        pathRectangle.addEventListener(\"mousemove\", function (e) {\n            const mousePoint = elevationSvg.createSVGPoint();\n            mousePoint.x = e.clientX;\n            mousePoint.y = e.clientY;\n            const svgMousePoint = mousePoint.matrixTransform(elevationSvg.getScreenCTM().inverse());\n            const mouseDist = this._svgXToDataDist(svgMousePoint.x, widgetWidth, pathWidth, pxPerMX) * factor;\n\n            // Math.max pour éviter de sortir de l'array\n            const distIndex = Math.max(1, this._arrayBisect(sortedDist, mouseDist));\n\n            const d0 = _points[distIndex - 1];\n            const d1 = _points[distIndex];\n            let d = d0;\n            if (mouseDist - d0.dist > d1.dist - mouseDist) {\n                d = d1;\n            }\n\n            const focusX = this._dataDistToSvgX(d.dist / factor, widgetWidth, pathWidth, pxPerMX);\n            const focusY = this._dataZToSvgY(d.z, pathHeight, minGraphZ, pxPerMZ);\n\n            // Mise à jour des éléments graphiques\n            focusCircle.setAttribute(\"cx\", focusX);\n            focusCircle.setAttribute(\"cy\", focusY);\n\n            focusLineX.setAttribute(\"x1\", focusX);\n            focusLineX.setAttribute(\"y1\", pathHeight);\n            focusLineX.setAttribute(\"x2\", focusX);\n            focusLineX.setAttribute(\"y2\", 0);\n\n            focusLineY.setAttribute(\"x1\", zLabelWidth + zGradWidth);\n            focusLineY.setAttribute(\"y1\", focusY);\n            focusLineY.setAttribute(\"x2\", pathWidth + zLabelWidth + zGradWidth);\n            focusLineY.setAttribute(\"y2\", focusY);\n\n            className.__updateProfileMarker(self, d);\n\n            // Mise à jour du tooltip\n            const altiSpanTxt = `Altitude : ${d.z.toLocaleString()} m`;\n            const slopeSpanTxt = `Pente : ${d.slope} %`;\n            const coordsSpanTxt = `(lat : ${d.lat.toLocaleString()} / lon : ${d.lon.toLocaleString()})`;\n\n            altiSpan.innerHTML = altiSpanTxt;\n            slopeSpan.innerHTML = slopeSpanTxt;\n            coordsSpan.innerHTML = coordsSpanTxt;\n\n            const tooltipTextWidth = Math.max(\n                this._getTextWidth(coordsSpanTxt, coordsSpan),\n                this._getTextWidth(altiSpanTxt, altiSpan)\n            );\n\n            let toolTipBubbleD;\n            if (d.dist > (dist * factor) / 2) {\n                toolTipBubbleD = `M -0.5 -0.5 l -6 6 l 0 16 l -${tooltipTextWidth + 10} 0 l 0 -44 l ${tooltipTextWidth + 10} 0 l 0 16 l 6 6`;\n                tooltipDiv.setAttribute(\"transform\", `translate(${-(tooltipTextWidth / 2 + 12)},0)`); // IE11 !\n            } else if (d.dist <= (dist * factor) / 2) {\n                toolTipBubbleD = `M -0.5 -0.5 l 6 6 l 0 16 l ${tooltipTextWidth + 10} 0 l 0 -44 l -${tooltipTextWidth + 10} 0 l 0 16 l -6 6`;\n                // Largeur de la fleche de la bulle du tooltip\n                tooltipDiv.setAttribute(\"transform\", `translate(${(tooltipTextWidth / 2 + 12)},0)`); // IE11 !\n            }\n\n            tooltipBubble.setAttribute(\"d\", toolTipBubbleD);\n            tooltipBubbleShadow.setAttribute(\"d\", toolTipBubbleD);\n\n            tooltipG.setAttribute(\"transform\", `translate(${focusX},${focusY})`); // IE11 !\n            tooltipG.style.transform = `translate(${focusX}px,${focusY}px)`;\n        }.bind(this));\n\n        dynamicsG.appendChild(pathRectangle);\n        elevationSvg.appendChild(dynamicsG);\n\n        widgetDiv.appendChild(elevationSvg);\n\n        return container;\n    },\n\n    /**\n     * Display Profile without graphical rendering (raw service response)\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileRaw : function (data, container, context, className) {\n        if (!container) {\n            return;\n        }\n\n        // on nettoie toujours...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        var _points = (data && data.points) ? data.points : {};\n\n        var div = document.createElement(\"textarea\");\n        div.id = \"profilElevationResults\";\n        div.rows = 10;\n        div.cols = 50;\n        div.style.width = \"100%\";\n        div.innerHTML = JSON.stringify(_points, undefined, 4);\n        div.addEventListener(\"mouseover\", function (e) {\n            className.__customRawProfileMouseOverEvent(context, e);\n        });\n\n        // TODO\n        // for (var i = 0; i < _points.length; i++) {\n        //     var point = _points[i];\n        //     var divC  = document.createElement(\"code\");\n        //     divC.id = \"point_\" + i;\n        //     divC.innerHTML = JSON.stringify(point, undefined, 4);\n        //     div.appendChild(divC);\n        //     divC.addEventListener(\"mouseover\", function (e) {\n        //          className.__customRawProfileMouseOverEvent(context, e);\n        //     });\n        // }\n\n        container.appendChild(div);\n\n        return container;\n    },\n\n    /**\n     * Display Profile using D3 javascript framework. This method needs D3 libraries to be loaded.\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileLibD3 : function (data, container, context, className) {\n        var self = context;\n\n        if (!container) {\n            return;\n        }\n\n        if (!data) {\n            return;\n        }\n\n        // on nettoie toujours...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        var _points = data.points;\n\n        if (data.distance > 2000) {\n            data.unit = \"km\";\n            for (let i = 0; i < _points.length; i++) {\n                _points[i].dist /= 1000;\n            }\n        }\n\n        var _displayProfileOptions = self.options.displayProfileOptions;\n\n        var margin = {\n            top : 20,\n            right : 20,\n            bottom : 30,\n            left : 40\n        };\n\n        var width = container.clientWidth - margin.left - margin.right;\n        var height = container.clientHeight - margin.top - margin.bottom;\n\n        var x = d3.scale.linear()\n            .range([0, width]);\n\n        var y = d3.scale.linear()\n            .range([height, 0]);\n\n        var xAxis = d3.svg.axis()\n            .scale(x)\n            .orient(\"bottom\")\n            .ticks(5);\n\n        var yAxis = d3.svg.axis()\n            .scale(y)\n            .orient(\"left\")\n            .ticks(5);\n\n        var line = d3.svg.line()\n            .interpolate(\"basis\")\n            .x(function (d) {\n                return x(d.dist);\n            })\n            .y(function (d) {\n                return y(d.z);\n            });\n\n        var area = d3.svg.area()\n            .interpolate(\"basis\")\n            .x(function (d) {\n                return x(d.dist);\n            })\n            .y0(height)\n            .y1(function (d) {\n                return y(d.z);\n            });\n\n        var svg = d3.select(container)\n            .append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        var xDomain = d3.extent(_points, function (d) {\n            return d.dist;\n        });\n        x.domain(xDomain);\n\n        var yDomain = [\n            0,\n            d3.max(_points, function (d) {\n                return d.z;\n            })\n        ];\n        y.domain(yDomain);\n\n        svg.append(\"path\")\n            .datum(_points)\n            .attr(\"class\", \"area-d3\")\n            .attr(\"d\", area);\n\n        svg.append(\"g\")\n            .attr(\"class\", \"x axis-d3\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            .append(\"text\")\n            .attr(\"y\", -15)\n            .attr(\"dy\", \".71em\")\n            .attr(\"x\", width)\n            .text(\"Distance (\" + data.unit + \")\");\n\n        svg.append(\"g\")\n            .attr(\"class\", \"y axis-d3\")\n            .call(yAxis)\n            .append(\"text\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .attr(\"y\", 6)\n            .attr(\"dy\", \".71em\")\n            .text(\"Altitude (m)\");\n\n        svg.append(\"g\")\n            .attr(\"class\", \"grid-d3 vertical\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis\n                .orient(\"bottom\")\n                .tickSize(-height, 0, 0)\n                .tickFormat(\"\")\n            );\n\n        svg.append(\"g\")\n            .attr(\"class\", \"grid-d3 horizontal\")\n            .call(yAxis\n                .orient(\"left\")\n                .tickSize(-width, 0, 0)\n                .tickFormat(\"\")\n            );\n\n        svg.append(\"path\")\n            .datum(_points)\n            .attr(\"class\", \"line-d3\")\n            .attr(\"d\", line);\n\n        svg.selectAll(\"circle\")\n            .data(_points)\n            .enter()\n            .append(\"circle\")\n            .attr(\"cx\", function (d) {\n                return x(d.dist);\n            })\n            .attr(\"cy\", function (d) {\n                return y(d.z);\n            })\n            .attr(\"r\", 0)\n            .attr(\"class\", \"circle-d3\");\n\n        var focus = svg.append(\"g\").style(\"display\", \"none\");\n\n        focus.append(\"line\")\n            .attr(\"id\", \"focusLineX\")\n            .attr(\"class\", \"focusLine-d3\");\n        focus.append(\"line\")\n            .attr(\"id\", \"focusLineY\")\n            .attr(\"class\", \"focusLine-d3\");\n        focus.append(\"circle\")\n            .attr(\"id\", \"focusCircle\")\n            .attr(\"r\", 4)\n            .attr(\"class\", \"circle-d3 focusCircle-d3\");\n\n        var div = d3.select(container).append(\"div\")\n            .attr(\"class\", \"tooltip-d3\")\n            .style(\"opacity\", 0);\n\n        var bisectDist = d3.bisector(function (d) {\n            return d.dist;\n        }).left;\n\n        svg.append(\"rect\")\n            .attr(\"class\", \"overlay-d3\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .on(\"mouseover\", function () {\n                focus.style(\"display\", null);\n                className.__createProfileMarker(self, _points[0]);\n            })\n            .on(\"mouseout\", function () {\n                focus.style(\"display\", \"none\");\n                className.__removeProfileMarker(self);\n\n                // tooltips\n                div.transition()\n                    .duration(500)\n                    .style(\"opacity\", 0);\n            })\n            .on(\"mousemove\", function () {\n                var m = d3.mouse(this);\n                var distance = x.invert(m[0]);\n                // Math.max pour éviter de sortir de l'array\n                var i = Math.max(1, bisectDist(_points, distance));\n\n                var d0 = _points[i - 1];\n                var d1 = _points[i];\n                var d = distance - d0[0] > d1[0] - distance ? d1 : d0;\n\n                var xc = x(d.dist);\n                var yc = y(d.z);\n\n                focus.select(\"#focusCircle\")\n                    .attr(\"cx\", xc)\n                    .attr(\"cy\", yc);\n                focus.select(\"#focusLineX\")\n                    .attr(\"x1\", xc).attr(\"y1\", y(yDomain[0]))\n                    .attr(\"x2\", xc).attr(\"y2\", y(yDomain[1]));\n                focus.select(\"#focusLineY\")\n                    .attr(\"x1\", x(xDomain[0])).attr(\"y1\", yc)\n                    .attr(\"x2\", x(xDomain[1])).attr(\"y2\", yc);\n\n                className.__updateProfileMarker(self, d);\n\n                // tooltips\n                div.transition()\n                    .duration(200)\n                    .style(\"opacity\", 0.9);\n\n                var _message = \"\";\n                _message += \" Altitude : \" + d.z + \" m\";\n                if (_displayProfileOptions.currentSlope) {\n                    _message += \"<br/> Pente : \" + d.slope + \" %\";\n                }\n                _message += \"<br/> (Lat : \" + d.lat + \"/ Lon : \" + d.lon + \")\";\n\n                div.html(_message)\n                    .style(\"left\", (d3.event.pageX) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\n            });\n\n        // return d3.selectAll(\"rect.overlay\")[0][0];\n        return svg;\n    },\n\n    /**\n     * Display Profile using Amcharts framework. This method needs AmCharts libraries to be loaded.\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileLibAmCharts : function (data, container, context, className) {\n        var self = context;\n\n        if (!container) {\n            return;\n        }\n\n        if (!data) {\n            return;\n        }\n\n        var _points = data.points;\n\n        var ballonText = \"<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>\";\n        var currentSlope = self.options.displayProfileOptions.currentSlope;\n        if (currentSlope) {\n            ballonText += \"<span class='altiPathValue'>Pente : [[slope]] %</span><br/>\";\n        }\n        ballonText += \"<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>\";\n\n        AmCharts.addInitHandler(function () {});\n\n        if (data.distance > 2000) {\n            data.unit = \"km\";\n            for (let i = 0; i < _points.length; i++) {\n                _points[i].dist /= 1000;\n            }\n        }\n\n        for (let i = 0; i < _points.length; i++) {\n            var dist = _points[i].dist;\n            var coeffArrond = 100;\n            if (dist > 100) {\n                coeffArrond = 1;\n            } else if (dist > 10) {\n                coeffArrond = 10;\n            }\n\n            // Correction arrondi distance totale\n            dist = Math.round(dist * coeffArrond) / coeffArrond;\n            _points[i].dist = dist;\n        }\n\n        var settings = {\n            type : \"serial\",\n            pathToImages : \"http://cdn.amcharts.com/lib/3/images/\",\n            categoryField : \"dist\",\n            autoMarginOffset : 0,\n            marginRight : 10,\n            marginTop : 10,\n            startDuration : 0,\n            color : \"#5E5E5E\",\n            fontSize : 8,\n            theme : \"light\",\n            thousandsSeparator : \"\",\n            numberFormatter : {\n                precision : -1,\n                decimalSeparator : \",\",\n                thousandsSeparator : \" \"\n            },\n            categoryAxis : {\n                color : \"#5E5E5E\",\n                gridPosition : \"start\",\n                minHorizontalGap : 40,\n                tickPosition : \"start\",\n                title : \"Distance (\" + data.unit + \")\",\n                titleColor : \"#5E5E5E\",\n                labelOffset : 0,\n                startOnAxis : true\n            },\n            chartCursor : {\n                animationDuration : 0,\n                bulletsEnabled : true,\n                bulletSize : 10,\n                categoryBalloonEnabled : false,\n                cursorColor : \"#F90\",\n                graphBulletAlpha : 1,\n                graphBulletSize : 1,\n                zoomable : false\n            },\n            trendLines : [],\n            graphs : [{\n                balloonColor : \"#CCCCCC\",\n                balloonText : ballonText,\n                bullet : \"round\",\n                bulletAlpha : 0,\n                bulletBorderColor : \"#FFF\",\n                bulletBorderThickness : 2,\n                bulletColor : \"#F90\",\n                bulletSize : 6,\n                hidden : false,\n                id : \"AmGraph-1\",\n                fillAlphas : 0.4,\n                fillColors : \"#C77A04\",\n                lineAlpha : 1,\n                lineColor : \"#C77A04\",\n                lineThickness : 1,\n                title : \"Altitude\",\n                valueField : \"z\"\n            }],\n            guides : [],\n            valueAxes : [{\n                id : \"ValueAxis-1\",\n                minVerticalGap : 20,\n                title : \"Altitude (m)\"\n            }],\n            balloon : {\n                borderColor : \"#CCCCCC\",\n                borderThickness : 1,\n                fillColor : \"#FFFFFF\",\n                showBullet : true\n            },\n            titles : [],\n            allLabels : [],\n            dataProvider : _points\n        };\n\n        var _containerProfile = AmCharts.makeChart(container, settings);\n\n        _containerProfile.addListener(\"changed\", function (e) {\n            var obj = e.chart.dataProvider[e.index];\n            className.__updateProfileMarker(self, obj);\n        });\n\n        return _containerProfile;\n    }\n};\n\nexport default ProfileElevationPathDOM;\n","/* globals AmCharts, d3 */\nimport Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport \"leaflet-draw\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport RightManagement from \"../../Common/Utils/CheckRightManagement\";\nimport ID from \"../../Common/Utils/SelectorID\";\nimport PositionFormater from \"./Utils/PositionFormater\";\nimport IconDefault from \"./Utils/IconDefault\";\nimport ElevationPathDOM from \"../../Common/Controls/ElevationPathDOM\";\nimport ProfileElevationPathDOM from \"../../Common/Controls/ProfileElevationPathDOM\";\n\nvar logger = Logger.getLogger(\"ElevationPath\");\n\n/**\n * @classdesc\n *\n * Leaflet Control Class to compute and display Profil Elevation.\n *\n * Use {@link module :Controls.ElevationPath L.geoportalControl.ElevationPath()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#control\" target=\"_blank\">L.Control</a> native class.\n *\n * @namespace\n * @alias L.geoportalControl.ElevationPath\n */\nvar ElevationPath = L.Control.extend(/** @lends L.geoportalControl.ElevationPath.prototype */ {\n\n    includes : ElevationPathDOM,\n\n    /**\n     * Options du service\n     *\n     * @private\n     */\n    options : {\n        position : \"topleft\",\n        active : false,\n        elevationPathOptions : {},\n        stylesOptions : {},\n        displayProfileOptions : {\n            greaterSlope : true,\n            meanSlope : true,\n            ascendingElevation : true,\n            descendingElevation : true,\n            currentSlope : true,\n            apply : null,\n            target : null\n        }\n    },\n\n    /**\n     * @constructor ElevationPath\n     *\n     * @private\n     * @param {Object} options - ElevationPath control options\n     * @param {String}   [options.apiKey] - API key for services call (isocurve and autocomplete services), mandatory if autoconf service has not been charged in advance\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Boolean} [options.active] - Specify if widget has to be actived to drawing (true) or not (false) on map loading. Default is false.\n     * @param {Object} [options.elevationPathOptions = {}] - elevation service options. See {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~getAltitude Gp.Services.getAltitude()} to know all elevation options\n     * @param {Object} [options.displayProfileOptions = {}] - profile options.\n     * @param {Function} [options.displayProfileOptions.apply] - function to display profil panel.\n     * @param {Object} [options.displayProfileOptions.target] - container DOM for the profil panel.\n     * @param {Boolean} [options.displayProfileOptions.greaterSlope = true] - display the greater slope into the graph\n     * @param {Boolean} [options.displayProfileOptions.meanSlope = true] -  display the mean slope into the graph\n     * @param {Boolean} [options.displayProfileOptions.ascendingElevation = true] -  display the ascending elevation into the graph\n     * @param {Boolean} [options.displayProfileOptions.descendingElevation = true] -  display the descending elevation into the graph\n     * @param {Boolean} [options.displayProfileOptions.currentSlope = true] -  display current slope value on profile mouseover\n     *\n     * @example\n     *  var e = L.geoportalControl.ElevationPath({\n     *      active : false,\n     *      stylesOptions : {},\n     *      elevationPathOptions : {},\n     *      displayProfileOptions : {\n     *       apply : null,\n     *       target : null\n     *      }\n     *  });\n     * Exemples :\n     * - displayProfileOptions.apply : null\n     * - displayProfileOptions.apply : function (elevations, container, context) {  // do some stuff... }\n     * - displayProfileOptions.apply : ol.control.ElevationPath.DISPLAY_PROFILE_{LIB_AMCHARTS | LIB_D3 | RAW}\n     * (detect auto lib. : d3 / AmCharts)\n     */\n    initialize : function (options) {\n        // on transmet les options au controle\n        L.Util.setOptions(this, options);\n\n        // uuid\n        this._uid = ID.generate();\n\n        // initialisation\n        this._initDisplayProfileOptions();\n\n        // les container\n        this._showContainer = null;\n        this._pictoContainer = null;\n        this._panelContainer = null;\n        this._profilContainer = null;\n        this._waitingContainer = null;\n        this._infoContainer = null;\n\n        // timer sur la fenetre d'informations des données\n        this._timerHdlr = null;\n\n        // detection si le panneau est reduit\n        this._reducePanel = false;\n\n        // couche vectorielle dans laquelle seront saisis les points (features ci-dessus)\n        this._featuresLayer = null;\n        this._lastIdLayer = 0;\n        this._currentIdLayer = 0;\n        this._currentFeature = null;\n\n        // graph\n        this._profile = null;\n        this._marker = null;\n\n        // geometry à transmettre au service :  { lon : [], lat : []}\n        this._geometry = null;\n\n        // distance du segment\n        this._distance = 0;\n\n        // data elevations\n        this._data = {};\n\n        // aucun droits sur les ressources\n        this._noRightManagement = false;\n\n        // gestion des droits sur les ressources/services\n        this._checkRightsManagement();\n    },\n\n    /**\n     * this method is called by this.addTo(map) when the control is added on the map\n     * and fills variable 'this._container = this.onAdd(map)',\n     * and create or disable events on map.\n     *\n     * @param {Object} map - the map\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    onAdd : function (map) {\n        // initialisation du DOM du composant\n        var container = this._container = this._initLayout();\n\n        if (map) {\n            // lors de l'ajout à la map, on active la saisie du point,\n            // mais seulement si le widget est ouvert\n            if (this.options.active) {\n                if (this._profile === null) {\n                    this._panelContainer.style.display = \"none\";\n                    // this._panelContainer.style.visibility = \"hidden\";\n                }\n                this._activateMapInteraction(map);\n            }\n        }\n\n        // deactivate of events that may interfere with the map\n        L.DomEvent\n            .disableClickPropagation(container)\n            .disableScrollPropagation(container);\n\n        return container;\n    },\n\n    /**\n     * TODO this method is called when the control is removed from the map\n     * and removes events on map.\n     *\n     * @private\n     */\n    onRemove : function (/* map */) {},\n\n    // ################################################################### //\n    // ########################## init resources ######################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by constructor\n     * and check the rights to resources\n     *\n     * @private\n     */\n    _checkRightsManagement : function () {\n        var rightManagement = RightManagement.check({\n            key : this.options.apiKey,\n            resources : [\"SERVICE_CALCUL_ALTIMETRIQUE_RSC\"],\n            services : [\"ElevationLine\"]\n        });\n\n        if (!rightManagement) {\n            this._noRightManagement = true;\n        }\n\n        // on recupère les informations utiles\n        // sur ce controle, on ne s'occupe pas de la ressource car elle est unique...\n        // Ex. la clef API issue de l'autoconfiguration si elle n'a pas\n        // été renseignée.\n        if (!this.options.apiKey) {\n            this.options.apiKey = rightManagement.key;\n        }\n    },\n\n    // ################################################################### //\n    // ####################### init application ########################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by the constructor and initialize the ...\n     *\n     * @private\n     */\n    _initDisplayProfileOptions : function () {\n        // gestion de l'affichage du profil\n        var _profileOpts = this.options.displayProfileOptions;\n\n        // gestion de la fonction du profil\n        var displayFunction = _profileOpts.apply;\n        _profileOpts.apply = (typeof displayFunction === \"function\")\n            ? displayFunction : ElevationPath.DISPLAY_PROFILE_BY_DEFAULT;\n\n        // gestion du container du profil\n        var displayContainer = _profileOpts.target;\n        _profileOpts.target = (typeof displayContainer !== \"undefined\")\n            ? displayContainer : null;\n\n        // les autres options\n        var _protoOpts = Object.getPrototypeOf(this.options);\n        if (typeof _profileOpts.meanSlope === \"undefined\") {\n            _profileOpts.meanSlope = _protoOpts.displayProfileOptions.meanSlope;\n        }\n        if (typeof _profileOpts.greaterSlope === \"undefined\") {\n            _profileOpts.greaterSlope = _protoOpts.displayProfileOptions.greaterSlope;\n        }\n        if (typeof _profileOpts.ascendingElevation === \"undefined\") {\n            _profileOpts.ascendingElevation = _protoOpts.displayProfileOptions.ascendingElevation;\n        }\n        if (typeof _profileOpts.descendingElevation === \"undefined\") {\n            _profileOpts.descendingElevation = _protoOpts.displayProfileOptions.descendingElevation;\n        }\n        if (typeof _profileOpts.currentSlope === \"undefined\") {\n            _profileOpts.currentSlope = _protoOpts.displayProfileOptions.currentSlope;\n        }\n    },\n\n    // ################################################################### //\n    // ########################### init dom ############################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAdd(map)\n     * and initialize the container HTMLElement\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    _initLayout : function () {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var inputShow = this._showContainer = this._createShowElevationPathElement();\n        container.appendChild(inputShow);\n\n        // mode \"collapsed\"\n        if (this.options.active) {\n            this._showContainer.checked = true;\n        }\n\n        var picto = this._pictoContainer = this._createShowElevationPathPictoElement();\n        container.appendChild(picto);\n\n        // panneau\n        var panel = this._panelContainer = this._createElevationPathPanelElement();\n\n        // header\n        var header = this._createElevationPathPanelHeaderElement();\n        panel.appendChild(header);\n\n        // profil\n        var profil = this._profilContainer = this._createElevationPathPanelProfilElement();\n        panel.appendChild(profil);\n\n        // waiting\n        var waiting = this._waitingContainer = this._createElevationPathWaitingElement();\n        panel.appendChild(waiting);\n\n        // info\n        var info = this._infoContainer = this._createElevationPathInformationsElement();\n        panel.appendChild(info);\n\n        container.appendChild(panel);\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on '' picto\n     * and ...\n     *\n     * @param {Object} e - HTMLElement\n     *\n     * @private\n     */\n    onShowElevationPathClick : function (e) {\n        logger.trace(e);\n        var map = this._map;\n\n        // interactions avec la carte\n        if (!this._reducePanel) {\n            if (this._showContainer.checked) {\n                this._pictoContainer.style.display = \"block\";\n                this._panelContainer.style.display = \"none\";\n                this._removeMapInteraction(map);\n                this._clear();\n            } else {\n                if (this._profile === null) {\n                    this._panelContainer.style.display = \"none\";\n                }\n                this._activateMapInteraction(map);\n            }\n        } else {\n            if (this._profile !== null) {\n                if (this.options.displayProfileOptions.target === null) {\n                    this._pictoContainer.style.display = \"none\";\n                }\n                this._panelContainer.style.display = \"block\";\n            }\n        }\n\n        this._reducePanel = false;\n    },\n\n    /**\n     * this method is called by event 'click' on '' picto\n     * (cf. this.),\n     * and reduce the panel\n     *\n     * @private\n     */\n    onReduceElevationPathPanelClick : function () {\n        this._reducePanel = true;\n        this._pictoContainer.style.display = \"block\";\n        this._panelContainer.style.display = \"none\";\n    },\n\n    /**\n     * this method is called by event 'click' on '' picto\n     * (cf. this.),\n     * and display the panel info\n     * TODO\n     *\n     * @private\n     */\n    onOpenElevationPathInfoClick : function () {\n        // options d'affichage\n        var meanSlope = this.options.displayProfileOptions.meanSlope;\n        var greaterSlope = this.options.displayProfileOptions.greaterSlope;\n        var ascendingElevation = this.options.displayProfileOptions.ascendingElevation;\n        var descendingElevation = this.options.displayProfileOptions.descendingElevation;\n\n        // clean\n        var div = this._infoContainer;\n        if (div.childElementCount) {\n            while (div.firstChild) {\n                div.removeChild(div.firstChild);\n            }\n        }\n\n        // creation des infomations\n\n        if (ascendingElevation) {\n            this._addElevationPathInformationsItem(\"Dénivelé positif : \" + this._data.ascendingElevation.toLocaleString() + \" m\");\n        }\n\n        if (descendingElevation) {\n            this._addElevationPathInformationsItem(\"Dénivelé négatif : \" + this._data.descendingElevation.toLocaleString() + \" m\");\n        }\n\n        if (meanSlope) {\n            this._addElevationPathInformationsItem(\"Pente moyenne : \" + this._data.meanSlope.toLocaleString() + \" %\");\n        }\n\n        if (greaterSlope) {\n            this._addElevationPathInformationsItem(\"Plus forte pente : \" + this._data.greaterSlope.toLocaleString() + \" %\");\n        }\n\n        // show des informations !\n        if (div.className === \"GPelevationPathInformationsContainerVisible\") {\n            clearTimeout(this._timerHdlr);\n            div.className = \"GPelevationPathInformationsContainerHidden\";\n        } else {\n            div.className = \"GPelevationPathInformationsContainerVisible\";\n        }\n\n        // hidden des informations !\n        this._timerHdlr = setTimeout(function () {\n            div.className = \"GPelevationPathInformationsContainerHidden\";\n        }, 4000);\n    },\n\n    // ################################################################### //\n    // ################### Map interactions management ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onShowElevationPathClick,\n     * and calls method corresponding to current delimitation, if widget is not collapsed.\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _activateMapInteraction : function (map) {\n        logger.info(\"_activateMapInteraction()\");\n\n        // Creation de la couche vectorielle sur laquelle on va dessiner\n        if (this._featuresLayer === null) {\n            this._featuresLayer = new L.FeatureGroup();\n            map.addLayer(this._featuresLayer);\n\n            var self = this;\n            /* evenements : on desactive le menu systeme pour la saisie */\n            map.on(\"contextmenu\", function () {});\n\n            /* evenement sur la carte lors d'une saisie,\n            on y ajoute le layer, et on y stocke les coordonnées */\n            map.on(\"draw:created\", function (e) {\n                logger.trace(\"draw:created\");\n\n                self._currentIdLayer = L.Util.stamp(e.layer);\n\n                self._getFeatureGeometry(e.layer);\n                self._addFeatureLayer(e.layer);\n            });\n\n            /* evenements */\n            map.on(\"draw:drawstart\", function () {\n                logger.trace(\"draw:drawstart\");\n                self._removeFeatureLayer(self._lastIdLayer);\n                self._lastIdLayer = self._currentIdLayer;\n            });\n\n            /* evenements */\n            map.on(\"draw:drawstop\", function () {\n                logger.trace(\"draw:drawstop\");\n                if (typeof self.options.elevationPathOptions.onSuccess === \"undefined\" && self.options.displayProfileOptions.target === null) {\n                    self._pictoContainer.style.display = \"none\";\n                    self._panelContainer.style.display = \"block\";\n                }\n                self._altiRequest();\n            });\n        }\n\n        this._activatePolyLineInteraction(map);\n    },\n\n    /**\n     * remove draw interaction from map (if exists)\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _removeMapInteraction : function (map) {\n        if (!map) {\n            return;\n        }\n\n        if (this._featuresLayer !== null) {\n            map.off(\"draw:created\");\n            map.off(\"draw:drawstart\");\n            map.off(\"draw:drawstop\");\n            map.removeLayer(this._featuresLayer);\n            this._featuresLayer = null;\n        }\n\n        this._lastIdLayer = this._currentIdLayer = 0;\n\n        // FIXME delete this._currentFeature ?\n        if (this._currentFeature) {\n            this._currentFeature.disable();\n        }\n    },\n\n    /**\n     * this method is called by this._activateMapInteraction,\n     * and creates map polyline drawing interaction.\n     *\n     * @param {Object} map - control map.\n     * @private\n     */\n    _activatePolyLineInteraction : function (map) {\n        if (this._currentFeature) {\n            this._currentFeature.disable();\n        }\n\n        // liste des options par defaut\n        // cf. https://leaflet.github.io/Leaflet.draw/docs/leaflet-draw-latest.html\n        // var polylineOptions = {\n        //     allowIntersection : true,\n        //     repeatMode : false,\n        //     drawError : {\n        //         color : \"#b00b00\",\n        //         timeout : 2500\n        //     },\n        //     icon : new L.DivIcon({\n        //         iconSize : new L.Point(8, 8),\n        //         className : 'leaflet-div-icon leaflet-editing-icon'\n        //     }),\n        //     touchIcon : new L.DivIcon({\n        //         iconSize : new L.Point(20, 20),\n        //         className : 'leaflet-div-icon leaflet-editing-icon leaflet-touch-icon'\n        //     }),\n        //     guidelineDistance : 20,\n        //     maxGuideLineLength : 4000,\n        //     shapeOptions : {\n        //         stroke : true,\n        //         color : '#f06eaa',\n        //         weight : 4,\n        //         opacity : 0.5,\n        //         fill : false,\n        //         clickable : true\n        //     },\n        //     metric : true, // Whether to use the metric measurement system or imperial\n        //     feet : true, // When not metric, to use feet instead of yards for display.\n        //     nautic : false, // When not metric, not feet use nautic mile for display\n        //     showLength : true, // Whether to display distance in the tooltip\n        //     zIndexOffset : 2000 // This should be > than the highest z-index any map layersallowIntersection : true,\n        // };\n\n        var styles = this.options.stylesOptions || {};\n        var _shapeOptions = (Object.keys(styles).length !== 0) ? styles : {\n            stroke : true,\n            color : \"#C77A04\",\n            weight : 4,\n            opacity : 0.5,\n            fill : false\n        };\n\n        this._currentFeature = new L.Draw.Polyline(map, {\n            shapeOptions : _shapeOptions\n        });\n        this._currentFeature.enable();\n    },\n\n    /**\n     * set current position of feature\n     *\n     * @param {Object} layer - layer\n     * @private\n     */\n    _getFeatureGeometry : function (layer) {\n        // on transmet toujours des coordonnées au service en EPSG:4326\n        logger.log(layer.getLatLngs());\n\n        if (this._geometry !== null) {\n            this._geometry = null;\n        }\n\n        this._geometry = [];\n        this._distance = 0;\n\n        var geometry = layer.getLatLngs();\n        for (var i = 0; i < geometry.length; i++) {\n            // on transmet au service des coordonnées en EPSG:4326\n            var LatLngI = geometry[i];\n            var LatLngJ = geometry[i + 1];\n            this._geometry.push({\n                lon : LatLngI.lng,\n                lat : LatLngI.lat\n            });\n            // on calcul la distance du segment\n            if (LatLngJ) {\n                this._distance += LatLngI.distanceTo(LatLngJ);\n            }\n        }\n\n        logger.log(\"Geometry\", this._geometry);\n        logger.log(\"Distance\", this._distance);\n    },\n\n    /**\n     * set current layer of feature\n     *\n     * @param {Object} layer - layer\n     * @private\n     */\n    _addFeatureLayer : function (layer) {\n        if (!this._featuresLayer) {\n            return;\n        }\n        this._featuresLayer.addLayer(layer);\n    },\n\n    /**\n     * remove layer feature from group\n     *\n     * @param {Integer} id - id\n     * @private\n     */\n    _removeFeatureLayer : function (id) {\n        if (!this._featuresLayer) {\n            return;\n        }\n\n        if (id === 0) {\n            return;\n        }\n\n        if (!id) {\n            this._featuresLayer.clearLayers();\n        } else {\n            this._featuresLayer.removeLayer(id);\n        }\n    },\n\n    // ################################################################### //\n    // ############################ Alti request ######################### //\n    // ################################################################### //\n\n    /**\n     * this methode is called by this. method,\n     * it generates and sends alti request, then displays results\n     *\n     * @private\n     */\n    _altiRequest : function () {\n        logger.log(\"_altiRequest\");\n\n        // les coordonnées sont obligatoires\n        if (!this._geometry) {\n            logger.log(\"missing position\");\n            return;\n        }\n\n        // oups, aucun droits !\n        if (this._noRightManagement) {\n            return;\n        }\n\n        // on construit les options pour la requête\n        var options = {};\n\n        // on surcharge avec les options de l'utilisateur\n        L.Util.extend(options, this.options.elevationPathOptions);\n\n        // au cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle de l'autoconf ou celle renseignée au niveau du controle\n        L.Util.extend(options, {\n            apiKey : options.apiKey || this.options.apiKey\n        });\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        L.Util.extend(options, {\n            ssl : this.options.ssl\n        });\n\n        // le sampling est soit defini par l'utilisateur (opts),\n        // ou soit calculé dynamiquement...\n        var _sampling = options.sampling;\n        if (!_sampling) {\n            // computing sampling\n            var _computeSampling;\n            var _length = this._currentFeature._measurementRunningTotal; // FIXME !!!\n            logger.trace(\"length\", _length);\n            var p = Math.floor(_length) / 5; // en mètre sur un pas moyen de 5m !\n            if (p >= 200) {\n                _computeSampling = 200;\n            } else {\n                _computeSampling = Math.floor(p);\n            }\n            _sampling = _computeSampling;\n        }\n\n        // on y ajoute les callbacks ainsi que les options par defaut\n        var self = this;\n        L.Util.extend(options, {\n\n            /** sampling à 200 (iso portail) */\n            sampling : _sampling,\n\n            // callback onSuccess\n            onSuccess : this.options.elevationPathOptions.onSuccess || function (result) {\n                logger.log(result);\n                if (result) {\n                    if (self.options.displayProfileOptions.target !== null) {\n                        self._pictoContainer.style.display = \"block\";\n                        self._panelContainer.style.display = \"block\";\n                    }\n                    self._displayProfil(result.elevations);\n                    self._waitingContainer.className = \"GPelevationPathCalcWaitingContainerHidden\";\n                    self._waiting = false;\n                }\n            },\n\n            // callback onFailure\n            onFailure : this.options.elevationPathOptions.onFailure || function (error) {\n                logger.log(error.message);\n                self._pictoContainer.style.display = \"block\";\n                self._panelContainer.style.display = \"none\";\n                self._waitingContainer.className = \"GPelevationPathCalcWaitingContainerHidden\";\n                self._waiting = false;\n                self._clear();\n            }\n        });\n\n        // et enfin, la geometrie\n        var positions = this._geometry;\n        L.Util.extend(options, {\n            positions : positions\n        });\n\n        logger.log(options);\n\n        // mise en place de la patience\n        this._waitingContainer.className = \"GPelevationPathCalcWaitingContainerVisible\";\n\n        // Request altitude service\n        Gp.Services.getAltitude(options);\n    },\n\n    // ################################################################### //\n    // ########################## Profil display ######################### //\n    // ################################################################### //\n\n    /**\n     * this method computes results elevations (Z and distance)\n     *\n     * @param {Array} elevations - array of elevation\n     * @return {Array} elevations\n     * @private\n     */\n    _computeElevationMeasure : function (elevations) {\n        // Returns the distance from c1 to c2 using the haversine formula\n        var _haversineDistance = function (c1, c2) {\n            var lat1 = PositionFormater.decimalToRadian(c1[1]);\n            var lat2 = PositionFormater.decimalToRadian(c2[1]);\n            var deltaLatBy2 = (lat2 - lat1) / 2;\n            var deltaLonBy2 = PositionFormater.decimalToRadian(c2[0] - c1[0]) / 2;\n            var a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n                Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n                Math.cos(lat1) * Math.cos(lat2);\n            return 2 * 6378137 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        };\n\n        var _data = elevations;\n\n        var _unit = \"m\";\n\n        var _sketchPoints = this._geometry;\n        // section actuelle du sketch sur laquelle on est\n        var _currentSection = 0;\n        // longueur cumulée des sections précédentes\n        var _previousSectionsLength = 0;\n        var _nextSectionBegining = _sketchPoints[1];\n\n        // Calcul de la distance au départ pour chaque point + arrondi des lat/lon\n        _data[0].dist = 0;\n        _data[0].slope = 0;\n        _data[0].lat = Math.round(_data[0].lat * 10000) / 10000;\n        _data[0].lon = Math.round(_data[0].lon * 10000) / 10000;\n\n        var _distanceMinus = 0;\n        var _distancePlus = 0;\n        var _ascendingElevation = 0;\n        var _descendingElevation = 0;\n        var _distance = 0;\n        var _slopes = 0;\n\n        var distances = [];\n\n        for (var i = 1; i < _data.length; i++) {\n            var a = [_data[i].lon, _data[i].lat];\n            var distanceToStart = _previousSectionsLength + _haversineDistance(a, [_sketchPoints[_currentSection].lon, _sketchPoints[_currentSection].lat]);\n            var dist = distanceToStart - _distance;\n\n            // Changement de section\n            if (a[0].toFixed(8) === _nextSectionBegining.lon.toFixed(8) && a[1].toFixed(8) === _nextSectionBegining.lat.toFixed(8)) {\n                _currentSection++;\n                _previousSectionsLength = distanceToStart;\n                // Pas de next section si on est sur le dernier point\n                if (i !== _data.length - 1) {\n                    _nextSectionBegining = _sketchPoints[_currentSection + 1];\n                }\n            }\n\n            var za = _data[i].z;\n            var zb = _data[i - 1].z;\n            if (za < 0) {\n                za = 0;\n            }\n            if (zb < 0) {\n                zb = 0;\n            }\n            var slope = za - zb;\n            if (slope < 0) {\n                _distanceMinus += dist;\n                _descendingElevation += slope;\n            } else if (slope > 0) {\n                _distancePlus += dist;\n                _ascendingElevation += slope;\n            }\n            _distance = distanceToStart;\n            _data[i].dist = distanceToStart;\n\n            distances.push(distanceToStart);\n\n            _slopes += (slope) ? Math.abs(Math.round(slope / dist * 100)) : 0;\n            _data[i].slope = (slope) ? Math.abs(Math.round(slope / dist * 100)) : 0;\n\n            // EVOL ?\n            // cf. gradiant\n            // http://www.color-hex.com/color/00b798\n            var value = _data[i].slope;\n            if (value > 15 && value < 30) {\n                _data[i].color = \"#005b4c\";\n            } else if (value > 30 && value < 45) {\n                _data[i].color = \"#00362d\";\n            } else if (value > 45) {\n                _data[i].color = \"#00120f\";\n            } else {\n                _data[i].color = \"#00B798\";\n            }\n\n            _data[i].lat = Math.round(_data[i].lat * 10000) / 10000;\n            _data[i].lon = Math.round(_data[i].lon * 10000) / 10000;\n        }\n\n        // check distance totale\n        logger.trace(\"List Distances\", distances);\n\n        // Correction des altitudes aberrantes + arrondi des calculs de distance + ...\n        var _altMin = _data[0].z;\n        var _altMax = _data[0].z;\n        var _greaterSlope = _data[0].slope;\n\n        for (var ji = 0; ji < _data.length; ji++) {\n            var d = _data[ji];\n            if (d.z < -100) {\n                d.z = 0;\n            }\n            if (d.z > _altMax) {\n                _altMax = d.z;\n            }\n            if (d.z < _altMin) {\n                _altMin = d.z;\n            }\n\n            if (d.slope > _greaterSlope) {\n                _greaterSlope = d.slope;\n            }\n        }\n        return {\n            greaterSlope : _greaterSlope, // pente max\n            meanSlope : Math.round(_slopes / _data.length), // pente moyenne\n            distancePlus : _distancePlus, // distance cumulée positive\n            distanceMinus : _distanceMinus, // distance cumulée négative\n            ascendingElevation : _ascendingElevation, // dénivelé cumulée positive\n            descendingElevation : _descendingElevation, // dénivelé cumulée négative\n            altMin : _altMin.toLocaleString(), // altitude min TODO: inutile ?\n            altMax : _altMax.toLocaleString(), // altitude max TODO: inutile ?\n            distance : this._distance, // distance totale\n            unit : _unit, // unité des mesures de distance\n            points : _data\n        };\n    },\n\n    /**\n     * this method is called by this. (in case of success)\n     * and display results\n     *\n     * @param {Array} elevations - array of elevation\n     * @private\n     */\n    _displayProfil : function (elevations) {\n        // on reactive le menu systeme en fin de saisie !\n        var map = this._map;\n        map.off(\"contextmenu\");\n\n        // data\n        if (this._data) {\n            this._data = {};\n        }\n\n        // sauvegarde des données\n        var data = this._data = this._computeElevationMeasure(elevations);\n\n        // container\n        var container = this.options.displayProfileOptions.target;\n        if (container) {\n            container.appendChild(this._panelContainer);\n        }\n        container = this._profilContainer;\n\n        // TODO contexte ?\n        var context = this;\n\n        var _profileOpts = this.options.displayProfileOptions;\n\n        // fonction\n        var displayFunction = _profileOpts.apply;\n\n        // Calcul du profil\n        if (typeof AmCharts !== \"undefined\" && typeof d3 !== \"undefined\") {\n            logger.trace(\"Aucune lib. n'est presente !\");\n        }\n\n        // execution...\n        displayFunction.call(this, data, container, context);\n\n        // affichage des informations du profil ?\n        var element = L.DomUtil.get(\"GPelevationPathPanelInfo-\" + this._uid);\n        if (_profileOpts.greaterSlope ||\n            _profileOpts.meanSlope ||\n            _profileOpts.ascendingElevation ||\n            _profileOpts.descendingElevation) {\n            // on affiche les informations\n            element.style.display = \"block\";\n        }\n    },\n\n    // ################################################################### //\n    // ################################ clean ############################ //\n    // ################################################################### //\n\n    /**\n     * this method clears all data\n     *\n     * @private\n     */\n    _clear : function () {\n        this._geometry = null;\n        this._profile = null;\n\n        // on vide le container\n        if (this._profilContainer) {\n            while (this._profilContainer.firstChild) {\n                this._profilContainer.removeChild(this._profilContainer.firstChild);\n            }\n        }\n\n        // on supprime le marker\n        var map = this._map;\n        if (this._marker) {\n            map.removeLayer(this._marker);\n            this._marker = null;\n        }\n    }\n});\n\n/**\n * create Profile Marker\n *\n * @param {Object} context - context\n * @param {Object} data - data\n */\nElevationPath.__createProfileMarker = function (context, data) {\n    logger.log(\"__createProfileMarker\");\n\n    var self = context;\n    var map = self._map;\n\n    // var _srs    = L.CRS.EPSG4326;\n    // var _pointA = _srs.latLngToPoint(L.latLng(self._geometry[0].lat, self._geometry[0].lon));\n    // var _pointB = _srs.latLngToPoint(L.latLng(self._geometry[self._geometry.length - 1].lat, self._geometry[self._geometry.length - 1].lon));\n    // var _point  = L.LineUtil.closestPointOnSegment(_srs.latLngToPoint(L.latLng(data.lat, data.lon)), _pointA, _pointB );\n\n    // creation d\"un marker\n    self._marker = L.marker(L.latLng(data), {\n        icon : new IconDefault(\"orange\"),\n        draggable : false,\n        clickable : false,\n        zIndexOffset : 1000\n    });\n\n    self._marker.addTo(map);\n};\n\n/**\n * update Profile Marker\n *\n * @param {Object} context - context\n * @param {Object} data - data\n */\nElevationPath.__updateProfileMarker = function (context, data) {\n    logger.log(\"__updateProfileMarker\");\n\n    var self = context;\n    var map = self._map;\n\n    // var _srs    = L.CRS.EPSG4326;\n    // var _pointA = _srs.latLngToPoint(L.latLng(self._geometry[0].lat, self._geometry[0].lon));\n    // var _pointB = _srs.latLngToPoint(L.latLng(self._geometry[self._geometry.length - 1].lat, self._geometry[self._geometry.length - 1].lon));\n    // var _point  = L.LineUtil.closestPointOnSegment( _srs.latLngToPoint(L.latLng(data.lat, data.lon)), _pointA, _pointB );\n\n    if (self._marker) {\n        self._marker.setLatLng(L.latLng(data));\n        self._marker.update();\n    } else {\n        // creation d\"un marker\n        self._marker = L.marker(L.latLng(data), {\n            icon : new IconDefault(\"orange\"),\n            draggable : false,\n            clickable : false,\n            zIndexOffset : 1000\n        });\n\n        self._marker.addTo(map);\n    }\n};\n\n/**\n * remove Profile Marker\n *\n * @param {Object} context - context\n */\nElevationPath.__removeProfileMarker = function (context) {\n    logger.log(\"__removeProfileMarker\");\n\n    var self = context;\n    var map = self._map;\n\n    if (self._marker) {\n        map.removeLayer(self._marker);\n        self._marker = null;\n    }\n};\n\n/**\n * custom operation into raw profil...\n * TODO\n */\nElevationPath.__customRawProfileOperation = function () {\n    logger.log(\"__customRawProfileOperation\");\n};\n\n/**\n * custom operation into raw profil...\n * TODO\n *\n * @param {Object} context - context\n * @param {Object} e - event\n */\nElevationPath.__customRawProfileMouseOverEvent = function (context, e) {\n    logger.log(\"__customRawProfileMouseOverEvent\", context, e);\n};\n\n/**\n * Display Profile function used by default : no additonal framework needed.\n *\n * @static\n * @param {Object} data - elevations values for profile\n * @param {HTMLElement} container - html container where to display profile\n * @param {Object} context - this control object\n */\nElevationPath.DISPLAY_PROFILE_BY_DEFAULT = function (data, container, context) {\n    logger.trace(\"ElevationPath.DISPLAY_PROFILE_BY_DEFAULT\");\n\n    var profile = ProfileElevationPathDOM.displayProfileByDefault(data, container, context, ElevationPath);\n    // on sauvegarde le profil du container dans l'objet\n    if (profile) {\n        this._profile = profile;\n    }\n};\n\n/**\n * Display Profile without graphical rendering (raw service response)\n *\n * @static\n * @param {Object} data - elevations values for profile\n * @param {HTMLElement} container - html container where to display profile\n * @param {Object} context - this control object\n */\nElevationPath.DISPLAY_PROFILE_RAW = function (data, container, context) {\n    logger.trace(\"ElevationPath.DISPLAY_PROFILE_RAW\");\n\n    var profile = ProfileElevationPathDOM.displayProfileRaw(data, container, context, ElevationPath);\n    // on sauvegarde le profil du container dans l'objet\n    if (profile) {\n        this._profile = profile;\n    }\n};\n\n/**\n * Display Profile using D3 javascript framework. This method needs D3 libraries to be loaded.\n *\n * @static\n * @param {Object} data - elevations values for profile\n * @param {HTMLElement} container - html container where to display profile\n * @param {Object} context - this control object\n */\nElevationPath.DISPLAY_PROFILE_LIB_D3 = function (data, container, context) {\n    logger.trace(\"ElevationPath.DISPLAY_PROFILE_LIB_D3\");\n\n    if (typeof d3 === \"undefined\") {\n        logger.log(\"Lib. D3 is not loaded !\");\n        return;\n    }\n\n    var profile = ProfileElevationPathDOM.displayProfileLibD3(data, container, context, ElevationPath);\n    // on sauvegarde le profil du container dans l'objet\n    if (profile) {\n        this._profile = profile;\n    }\n};\n\n/**\n * Display Profile using Amcharts framework. This method needs AmCharts libraries to be loaded.\n *\n * @static\n * @param {Object} data - elevations values for profile\n * @param {HTMLElement} container - html container where to display profile\n * @param {Object} context - this control object\n */\nElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS = function (data, container, context) {\n    logger.trace(\"ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS\");\n\n    // Calcul du profile\n    if (typeof AmCharts === \"undefined\") {\n        logger.log(\"Lib. AmCharts is not loaded !\");\n        return;\n    }\n\n    var profile = ProfileElevationPathDOM.displayProfileLibAmCharts(data, container, context, ElevationPath);\n    // on sauvegarde le profil du container dans l'objet\n    if (profile) {\n        this._profile = profile;\n    }\n};\n\nexport default ElevationPath;\n","import L from \"leaflet\";\n\n/**\n * @classdesc\n *\n * Control Logo\n *\n * @private\n * @constructor\n * @extends {L.Control}\n * @alias Logo\n * @param {Object} options - options for function call.\n * @param {String} options.position - 'topright' by default\n * @param {String} options.url - URL\n * @param {String} options.text - text\n * @param {String} options.picto - picto\n * @example\n * var map  = L.map('map').setView([48, 2], 4);\n * var logo = L.geoportalControl.Logo({\n *   position : \"topright\",\n *   picto : \"http://www.ign.fr/logo-ign.jpg\",\n *   url : \"http://www.ign.fr\",\n *   text : \"© IGN\",\n *   size : \"70px\"\n * });\n * logo.addTo(map);\n */\nvar Logo = L.Control.extend(/** @lends Logo.prototype */ {\n\n    /**\n     * Options du service\n     *\n     * @private\n     */\n    options : {\n        position : \"topright\",\n        picto : null,\n        url : null,\n        text : null,\n        size : \"30px\"\n    },\n\n    /**\n     * constructor\n     *\n     * @param {Object} options - options\n     * @private\n     */\n    initialize : function (options) {\n        L.setOptions(this, options);\n    },\n\n    /**\n     * event\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    onAdd : function (/* map */) {\n        var container = null;\n        container = L.DomUtil.create(\"div\", \"gp-control-logo\", container);\n\n        var bLink = !!(this.options.url || this.options.text);\n        var link = null;\n\n        if (bLink) {\n            link = L.DomUtil.create(\"a\", \"\", container);\n            link.target = \"_blank\";\n            if (this.options.url) {\n                link.href = this.options.url;\n                if (this.options.text) link.title = this.options.text;\n            }\n        }\n\n        // FIXME mise en forme à prévoir !\n        if (bLink && this.options.text) {\n            link.text = this.options.text;\n        }\n\n        var bImage = !!(this.options.picto);\n        var image = null;\n\n        if (bImage) {\n            if (bLink) {\n                image = L.DomUtil.create(\"img\", \"\", link);\n            } else {\n                image = L.DomUtil.create(\"img\", \"\", container);\n            }\n            image.src = this.options.picto;\n            if (typeof this.options.size === \"string\") {\n                image.style.height = image.style.width = this.options.size;\n            } else {\n                image.style.height = this.options.size.height;\n                image.style.width = this.options.size.width;\n            }\n        }\n\n        return container;\n    }\n});\n\nexport default Logo;\n","import LayerSwitcher from \"./LayerSwitcher\";\nimport Isocurve from \"./Isocurve\";\nimport MousePosition from \"./MousePosition\";\nimport ReverseGeocoding from \"./ReverseGeocoding\";\nimport Route from \"./Route\";\nimport SearchEngine from \"./SearchEngine\";\nimport ElevationPath from \"./ElevationPath\";\nimport Logo from \"./Logo\";\n\n/**\n * Geoportal Controls Factory to be used together with Leaflet Maps.\n *\n * @module Controls\n * @alias L.geoportalControl\n * @example\n * var layerSwitcher = L.geoportalControl.LayerSwitcher(options);\n */\nvar Controls = {\n\n    /**\n     * Factory function for LayerSwitcher Control creation.\n     *\n     * @method LayerSwitcher\n     * @static\n     * @alias L.geoportalControl.LayerSwitcher\n     * @param {Object} options - options for function call.\n     * @param {String}  [options.position] - position of component into the map, 'topleft' by default. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {Boolean} [options.collapsed = true] - collapse mode, false by default\n     * @param {Array}   [options.layers] - list of layers to be configured. Each array element is an object, with following properties :\n     * @param {Object}  [options.layers.layer] - layer object\n     * @param {Boolean} [options.layers.display] - display layer in widget layer list\n     * @param {Object}  [options.layers.config] - layer display config\n     * @param {String}  [options.layers.config.visibility] - layer visibility on map\n     * @param {String}  [options.layers.config.title] - layer alias, to be displayed in widget layer list. E.g. : \"Cartes IGN\"\n     * @param {String}  [options.layers.config.description] - layer description, to be displayed on title hover, or in layer information panel.\n     * @param {String}  [options.layers.config.quicklookUrl] - link to a quick look image for this layer.\n     * @param {Array}   [options.layers.config.legends] - array of layer legends. Each array element is an object, with following properties :\n     *      - url (String, mandatory) : link to a legend\n     *      - minScaleDenominator (Number, optional) : min scale denominator for legend validity.\n     * @param {Array} [options.layers.config.metadata] - array of layer metadata. Each array element is an object, with property url (String, mandatory) : link to a metadata\n     * @returns {L.geoportalControl.LayerSwitcher} - LayerSwitcher Object\n     * @example\n     *  layers = [\n     *      {\n     *          layer : wms1,\n     *          display : false,\n     *          config : {\n     *              title : \"test layer name 1\",\n     *              description : \"test layer desc 1\",\n     *          }\n     *      }\n     *  ];\n     *\n     *  options = {\n     *      position : \"topright\",\n     *      collapsed : true,\n     *      layers : layers\n     *  };\n     *\n     *  var layerSwitcher = L.geoportalControl.LayerSwitcher(options);\n     */\n    LayerSwitcher : function (options) {\n        return new LayerSwitcher(options);\n    },\n\n    /**\n     * Factory function for Isocurve Control creation.\n     *\n     * @method Isocurve\n     * @static\n     * @alias L.geoportalControl.Isocurve\n     * @param {Object} options - Isocurve control options\n     * @param {String}   [options.apiKey] - API key for services call (isocurve and autocomplete services), mandatory if autoconf service has not been charged in advance\n     * @param {String}  [options.position] - position of component into the map, 'topleft' by default. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {Boolean} [options.collapsed = true] - Specify if widget has to be collapsed (true) or not (false) on map loading. Default is true.\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Object}  [options.exclusions = {\"toll\" : false, \"tunnel\" : false, \"bridge\" : false}] - list of exclusions with status (true = checked), by default : [\"toll\":false, \"tunnel\":false, \"bridge\":false].\n     * @param {Array}   [options.graphs = [\"Voiture\", \"Pieton\"]] - list of graph resources to be used for isocurve calculation, by default : [\"Voiture\", \"Pieton\"]. The first element is selected.\n     * @param {Array}   [options.methods = [\"time\", \"distance\"]] - list of methods, by default : [\"time\", \"distance\"]. The first element is selected by default.\n     * @param {Array}   [options.directions = [\"departure\", \"arrival\"]] - list of directions to be displayed, by default : [\"departure\", \"arrival\"]. The first element is selected by default.\n     *      Directions enable to specify if input location point will be used as a departure point (\"departure\") or as an arrival point (\"arrival\")\n     * @param {Boolean} [options.disableReverse = false] - whether to enable/disable the reverse geocoding\n     * @param {Object} [options.isocurveOptions = {}] - isocurve service options. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~isoCurve Gp.Services.isoCurve}\n     * @param {Object} [options.autocompleteOptions = {}] - autocomplete service options. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~autoComplete Gp.Services.autoComplete}\n     * @returns {L.geoportalControl.Isocurve} - Isocurve Object\n     * @example\n     *  var iso = L.geoportalControl.Isocurve({\n     *      collapsed : false\n     *      methods : [\"time\", \"distance\"],\n     *      exclusions : {\n     *         toll : true,\n     *         bridge : false,\n     *         tunnel : true\n     *      },\n     *      graphs : [\"Pieton\", \"Voiture\"],\n     *      isocurveOptions : {},\n     *      autocompleteOptions : {}\n     *  });\n     */\n    Isocurve : function (options) {\n        return new Isocurve(options);\n    },\n\n    /**\n     * Factory function for Geoportal MousePosition Control creation.\n     *\n     * @method MousePosition\n     * @static\n     * @alias L.geoportalControl.MousePosition\n     * @param {Object} options - options for function call.\n     * @param {String}   [options.apiKey] - API key, mandatory if autoconf service has not been charged in advance\n     * @param {String}  [options.position] - position of component into the map, 'bottomleft' by default. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {Boolean} [options.collapsed = true] - collapse mode, false by default\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Array}   [options.systems] - list of projection systems, GEOGRAPHIC, MERCATOR, LAMB93 and LAMB2E by default\n     *      Each array element (=system) is an object with following properties :\n     * @param {String}  options.systems.crs - Proj4 crs alias (from proj4 defs). e.g. : \"EPSG:4326\". Required\n     * @param {String}  [options.systems.label] - CRS label to be displayed in control. Default is crs code (e.g. \"EPSG:4326\")\n     * @param {String}  [options.systems.type] - CRS units type for coordinates conversion : \"Geographical\" or \"Metric\". Default: \"Metric\"\n     * @param {Object}  [options.systems.geoBBox] - Aera covered by the system (WGS84 coordinates).\n     * @param {Number}  options.systems.geoBBox.right - Right bound.\n     * @param {Number}  options.systems.geoBBox.left - Left bound.\n     * @param {Number}  options.systems.geoBBox.top - Top bound.\n     * @param {Number}  options.systems.geoBBox.bottom - Bottom bound.\n     * @param {Array}   [options.units] - list of units by system, Geographical and Metric by default\n     *      Values may be \"DEC\" (decimal degrees), \"DMS\" (sexagecimal), \"RAD\" (radians) and \"GON\" (grades) for geographical coordinates,\n     *      and \"M\" or \"KM\" for metric coordinates\n     * @param {Boolean} [options.displayAltitude = true] - active/desactivate the altitude panel, if desactivate, have just the coordinate panel, true by default\n     * @param {Boolean} [options.displayCoordinates = true] - active/desactivate the coordinate panel, if desactivate, have just the altitude panel, true by default\n     * @param {Boolean} [options.editCoordinates = false] - If true, coordinates from the MousePosition control can be edited by users to re-center the view. False by default.\n     * @param {Object}  [options.altitude] - elevation configuration\n     * @param {Object}  [options.altitude.serviceOptions] - options of elevation service. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~getAltitude Gp.Services.getAltitude}\n     * @param {Number}  [options.altitude.responseDelay] - latency for altitude request, 500 ms by default\n     * @param {Number}  [options.altitude.triggerDelay] - immobilisation time of movement on the map to trigger the elevation calculation, 200 ms by default\n     * @param {Number}  [options.altitude.noDataValue] - value used for altitude service no data (default is -99999). In this case, \"---m\" will be displayed instead of \"-99999m\"\n     * @param {Number}  [options.altitude.noDataValueTolerance] - tolerance for no data value :\n     *                  values in [noDataValue - noDataValueTolerance ; noDataValue + noDataValueTolerance] interval will not be displayed, but \"---m\" will be displayed instead.\n     *                  Default is 90000\n     * @returns {L.geoportalControl.MousePosition} - MousePosition Object\n     * @example\n     *  var MousePosition = L.geoportalControl.MousePosition({\n     *      position : 'bottomleft',\n     *      collapsed : false,\n     *      displayAltitude : true,\n     *      editCoordinates : false,\n     *      altitude : {\n     *           triggerDelay : 100,\n     *           responseDelay : 500,\n     *           noDataValue : -99999,\n     *           noDataValueTolerance : 90000,\n     *           serviceOptions : {}\n     *      },\n     *      systems : [\n     *       {\n     *          crs : L.CRS.EPSG4326,\n     *          label : \"Lon,Lat\",\n     *          type : \"Geographical\"\n     *        },\n     *       {\n     *          crs : L.geoportalCRS.EPSG2154,\n     *          label : \"Lambert 93\",\n     *          type : \"Metric\"\n     *        }\n     *      ],\n     *      units : [\"DEC\", \"DMS\"]\n     *  });\n     */\n    MousePosition : function (options) {\n        return new MousePosition(options);\n    },\n\n    /**\n     * Factory function for Geoportal ReverseGeocode Control creation.\n     *\n     * @method ReverseGeocode\n     * @static\n     * @alias L.geoportalControl.ReverseGeocode\n     * @extends {L.Control}\n     * @param {Object} options - ReverseGeocoding control options\n     * @param {String}  [options.apiKey] - API key for services call (reverse geocode service), mandatory if autoconf service has not been charged in advance\n     * @param {String}  [options.position] - position of component into the map, 'topleft' by default. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {Boolean} [options.collapsed = true] - Specify if widget has to be collapsed (true) or not (false) on map loading. Default is true.\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Array}  [options.resources =  [\"StreetAddress\", \"PositionOfInterest\", \"CadastralParcel\"]] - resources for geocoding, by default : [\"StreetAddress\", \"PositionOfInterest\"]\n     * @param {Array}  [options.delimitations = [\"Point\", \"Circle\", \"Extent\"]] - delimitations for reverse geocoding, by default : [\"Point\", \"Circle\", \"Extent\"]\n     * @param {Object}  [options.ReverseGeocodeOptions = {}] - reverse geocode service options. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~reverseGeocode Gp.Services.reverseGeocode} to know all reverse geocode options.\n     * @returns {L.geoportalControl.ReverseGeocode} - ReverseGeocode Object\n     * @example\n     *  var iso = L.geoportalControl.ReverseGeocode({\n     *      collapsed : false,\n     *      position : \"topright\",\n     *      resources : [\"StreetAddress\", \"PositionOfInterest\"],\n     *      delimitations : [\"Point\", \"Circle\"],\n     *      reverseGeocodeOptions : {}\n     *  });\n     */\n    ReverseGeocode : function (options) {\n        return new ReverseGeocoding(options);\n    },\n\n    /**\n     * Factory function for Geoportal Route Control creation.\n     *\n     * @method Route\n     * @static\n     * @alias L.geoportalControl.Route\n     * @extends {L.Control}\n     * @param {Object} options - options for function call.\n     * @param {String}   [options.apiKey] - API key, mandatory if autoconf service has not been charged in advance\n     * @param {String}  [options.position = \"topleft\"] - position of component into the map, 'topleft' by default. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {Boolean} [options.collapsed = false] - collapse mode, false by default\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Boolean} [options.disableReverse = false] - whether to enable/disable the reverse geocoding when entering points.\n     *   Active by default. But, you can disable it when entering with the \"ctrl\" key on the keyboard\n     * @param {Object}  [options.exclusions = {\"toll\" : false, \"tunnel\" : false, \"bridge\" : false}] - list of exclusions with status\n     * @param {Array}   [options.graphs = [\"Voiture\", \"Pieton\"]] - list of resources, by default : [\"Voiture\", \"Pieton\"], and the first element is selected.\n     * @param {Object}  [options.autocompleteOptions = {}] - options of autocomplete service. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~autoComplete Gp.Services.autoComplete}\n     * @param {Object}  [options.routeOptions = {}] - options of route service. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~route Gp.Services.route}\n     * @returns {L.geoportalControl.Route} - Route Object\n     * @example\n     *  var route = L.geoportalControl.Route({\n     *      position : \"topright\",\n     *      collapsed : true,\n     *      exclusions : {\n     *         \"toll\" : true,\n     *         \"bridge\" : false,\n     *         \"tunnel\" : true\n     *      },\n     *      graphs : ['Pieton', 'Voiture'],\n     *      autocompleteOptions : {},\n     *      routeOptions : {}\n     *  });\n     */\n    Route : function (options) {\n        return new Route(options);\n    },\n\n    /**\n     * Factory function for Geoportal SearchEngine Control creation.\n     *\n     * @method SearchEngine\n     * @static\n     * @alias L.geoportalControl.SearchEngine\n     * @extends {L.Control}\n     * @param {Object}  options - control options\n     * @param {String}  [options.apiKey] - API key, mandatory if autoconf service has not been charged in advance\n     * @param {Boolean} [options.collapsed = false] - collapse mode\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {String}  [options.position = \"topleft\"] - position of component into the map. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {String}  [options.placeholder = \"Rechercher un lieu, une adresse\"] - set placeholder in search bar\n     * @param {Boolean} [options.displayMarker = true] - set a marker on search result\n     * @param {String|Object}  [options.markerStyle = \"blue\"] - set a marker style. Currently possible values are \"blue\" (default value), \"orange\", \"red\" and \"green\". But you can use an L.Icon object (see {@link http://leafletjs.com/reference-1.2.0.html#icon L.Icon })\n     * @param {Boolean} [options.displayInfo = true] - get informations on popup marker\n     * @param {String|Numeric|Function} [options.zoomTo] - zoom to results, by default, current zoom.\n     *       possible values : \"auto\", any fixed zoom level or a function retruning a zoom :\n     *\n     *       ```\n     *       zoomTo : function (info) {\n     *           // do some stuff...\n     *           return zoom; // required : return the zoom level !\n     *       }\n     *\n     *       With parameter 'info' : {\n     *           type : \"PositionOfInterest\" | \"StreetAddress\" | ...\n     *           service : \"SuggestedLocation\" | \"DirectGeocodedLocation\"\n     *           fields : { // fields of service response }\n     *       }\n     *       ```\n     * @param {String}   [options.apiKey] - API key, mandatory if autoconf service has not been charged in advance\n     * @param {Object}  [options.resources] - resources to be used by geocode and autocompletion services, by default : [\"StreetAddress\", \"PositionOfInterest\"]\n     * @param {Boolean} [options.displayAdvancedSearch] - False to disable advanced search tools (it will not be displayed). Default is true (displayed)\n     * @param {Object}  [options.advancedSearch] - advanced search for geocoding (filters)\n     * @param {Object}  [options.geocodeOptions] - options of geocode service. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~geocode Gp.Services.geocode}\n     * @param {Object}  [options.autocompleteOptions] - options of autocomplete service. see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~autoComplete Gp.Services.autoComplete}\n     * @param {Object}  [options.autocompleteOptions.serviceOptions] - options of autocomplete service\n     * @param {Boolean} [options.autocompleteOptions.triggerGeocode = false] - trigger a geocoding request if the autocompletion does not return any suggestions, false by default\n     * @param {Number}  [options.autocompleteOptions.triggerDelay = 1000] - waiting time before sending the geocoding request, 1000ms by default\n     * @returns {L.geoportalControl.SearchEngine} - SearchEngine Object\n     * @example\n     *  var SearchEngine = L.geoportalControl.SearchEngine({\n     *      position : \"topright\",\n     *      collapsed : true,\n     *      zoomTo : \"auto\",\n     *      displayInfo : true,\n     *      displayAdvancedSearch : true,\n     *      resources : [\"PositionOfInterest\", \"StreetAddress\"],\n     *      advancedSearch : {\n     *          PositionOfInterest : [{name : \"municipality\", title : \"Ville\"}],\n     *          StreetAddress : [{...}],\n     *          CadastralParcel : null,\n     *      },\n     *      apiKey : \"zfgzrgffg57rfg8ar7gr4g5r4\",\n     *      geocodeOptions : {},\n     *      autocompleteOptions : {}\n     *  });\n     */\n    SearchEngine : function (options) {\n        return new SearchEngine(options);\n    },\n\n    /**\n     * Factory function for ElevationPath Control creation.\n     *\n     * @method ElevationPath\n     * @static\n     * @alias L.geoportalControl.ElevationPath\n     * @param {Object} options - options for function call.\n     * @param {String}   [options.apiKey] - API key for elevation service call, mandatory if configuration service has not been loaded in advance. See {@link https://github.com/IGNF/geoportal-extensions/blob/master/README-leaflet.md#user-content-config \"Configuration de l'accès à la plateforme Géoportail\" documentation chapter} for more information.\n     * @param {String}  [options.position] - position of component into the map, 'topleft' by default. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n     * @param {Boolean} [options.active = false] - specify if control should be actived at startup. Default is false.\n     * @param {Object} [options.stylesOptions = DEFAULT_STYLES] - Styles to use when drawing. see [leaflet options](http://leafletjs.com/reference.html#path-options) for available properties.\n     * @param {Object} [options.elevationPathOptions = {}] - elevation path service options. See {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~getAltitude options} for available options\n     * @param {Object} [options.displayProfileOptions = {}] - profile options.\n     * @param {Function} [options.displayProfileOptions.apply] - function to display profile if you want to cutomise it. By default, [DISPLAY_PROFILE_BY_DEFAULT()](./L.geoportalControl.ElevationPath.html#.DISPLAY_PROFILE_BY_DEFAULT) is used. Helper functions to use with D3 [DISPLAY_PROFILE_LIB_D3()](./L.geoportalControl.ElevationPath.html#.DISPLAY_PROFILE_LIB_D3) or AmCharts [DISPLAY_PROFILE_LIB_AMCHARTS()](./L.geoportalControl.ElevationPath.html#.DISPLAY_PROFILE_LIB_AMCHARTS) frameworks are also provided. You may also provide your own function.\n     * @param {Object} [options.displayProfileOptions.target] - DOM container to use to display the profile.\n     * @param {Boolean} [options.displayProfileOptions.greaterSlope = true] - display the greater slope into the graph\n     * @param {Boolean} [options.displayProfileOptions.meanSlope = true] -  display the mean slope into the graph\n     * @param {Boolean} [options.displayProfileOptions.ascendingElevation = true] -  display the ascending elevation into the graph\n     * @param {Boolean} [options.displayProfileOptions.descendingElevation = true] -  display the descending elevation into the graph\n     * @param {Boolean} [options.displayProfileOptions.currentSlope = true] -  display current slope value on profile mouseover\n     *\n     * @returns {L.geoportalControl.ElevationPath} - ElevationPath Object\n     * @example\n     *  var e = L.geoportalControl.ElevationPath({\n     *      active : false\n     *      position : \"topleft\"\n     *      stylesOptions : {},\n     *      elevationPathOptions : {},\n     *      displayProfileOptions  : {\n     *          apply : L.geoportalControl.DISPLAY_PROFILE_LIB_AMCHARTS\n     *          target : null, // by default\n     *          meanSlope : true, // by default\n     *          greaterSlope : true, // by default\n     *          ascendingElevation : false,\n     *          descendingElevation : false,\n     *          currentSlope : false\n     *      }\n     *  });\n     */\n    ElevationPath : function (options) {\n        return new ElevationPath(options);\n    },\n\n    /**\n     * Control Logo\n     *\n     * @private\n     * @method Logo\n     * @extends {L.Control}\n     * @alias L.geoportalControl.Logo\n     * @param {Object} options - options for function call.\n     * @param {String} options.position - 'topright' by default. See {@link http://leafletjs.com/reference-1.0.2.html#control-option L.Control options} for available values.\n     * @param {String} options.url - URL\n     * @param {String} options.text - text\n     * @param {String} options.picto - picto\n     * @param {String|Object} options.size - picto size\n     * @returns {Logo} - Logo Object\n     * @example\n     * var map  = L.map('map').setView([48, 2], 4);\n     * var logo = L.geoportalControl.Logo({\n     *   position : \"topright\",\n     *   picto : \"http://www.ign.fr/logo-ign.jpg\",\n     *   url : \"http://www.ign.fr\",\n     *   text : \"© IGN\"\n     *   size : {width : '50px', height : '30px'}\n     * });\n     * logo.addTo(map);\n     */\n    Logo : function (options) {\n        return new Logo(options);\n    }\n};\n\nexport default Controls;\n","/**\n* @module LayerUtils\n* @alias Gp.LayerUtils\n* @description\n* ...\n*\n* @example\n* getZoomLevelFromScaleDenominator();\n* getAttributions();\n* intersects();\n*/\nvar LayerUtils = {\n\n    /**\n     * Obtenir le ZoomLevel à partir du ScaleDenominator\n     * @param {Number} scaleDenominator - the scale denominator\n     * @param {String} crs - the crs\n     *\n     * @returns {Integer} zoom level\n     */\n    getZoomLevelFromScaleDenominator : function (scaleDenominator, crs) {\n        // ------------------------------------------------- //\n        // Code issu de l'API Geoportal/Catalogue/Config.js  //\n        // ------------------------------------------------- //\n        //     var configuration = Gp.Config;\n        //     var general = configuration.generalOptions;\n        //     var layers  = configuration.layersContext;\n        //\n        //     for (var tms in general.tileMatrixSets) {\n        //         var tileMatrixSet = general.tileMatrixSets[tms];\n        //         // IGN's WMTS bug : epsg:nnnn instead of EPSG:nnnn\n        //         var crs = tileMatrixSet.supportedCRS = tileMatrixSet.supportedCRS.replace(/epsg/,\"EPSG\");\n        //\n        //         if (!Geoportal.Catalogue.CRSRESOLUTIONS.hasOwnProperty(crs)) {\n        //             var p= new OpenLayers.Projection(crs);\n        //             Geoportal.Catalogue.CRSRESOLUTIONS[crs]= [];\n        //             var matrixIds= tileMatrixSet.matrixIds;\n        //             for (var i= 0, li= matrixIds.length; i<li; ++i) {\n        //                 var mid= matrixIds[i];\n        //                 Geoportal.Catalogue.CRSRESOLUTIONS[crs].push(\n        //                     0.00028*mid.scaleDenominator\n        //                     /(OpenLayers.METERS_PER_INCH*OpenLayers.INCHES_PER_UNIT[p.getUnits()]));\n        //                     mid.supportedCRS= mid.supportedCRS.replace(/epsg/,\"EPSG\");\n        //                 }\n        //                 Geoportal.Catalogue.CRSRESOLUTIONS[crs].sort(function (a,b){ return b-a; });\n        //             }\n        //         }\n        //         var llR= Geoportal.Catalogue.CRSRESOLUTIONS['CRS:84'];\n        //         if (!llR) {\n        //             llR= Geoportal.Catalogue.CRSRESOLUTIONS['CRS:84']= general.resolutions.slice();\n        //         }\n        //         var wmR= Geoportal.Catalogue.CRSRESOLUTIONS['EPSG:3857'];\n        //         if (!wmR) {//FIXME : should never happened !!\n        //             // reproject resolutions from CRS84 to WebMercator (transform resolutions from degree/px to meter/px)\n        //             wmR= Geoportal.Catalogue.CRSRESOLUTIONS['EPSG:3857']= new Array(llR.length);\n        //             for (var i= 0, len= llR.length; i<len; i++) {\n        //                 var pt= new OpenLayers.LonLat(llR[i], 0);\n        //                 pt.transform(OpenLayers.Projection.CRS84, OpenLayers.Projection.WebMercator);\n        //                 wmR[i]= pt.lon;\n        //             }\n        //         }\n        //         Geoportal.Catalogue.RESOLUTIONS= wmR;\n        //\n        //         var getResolutionsFromCRS= function(crs) {\n        //             if (OpenLayers.Projection.WebMercator.isAliasOf(crs)) {\n        //                 return wmR;\n        //             }\n        //             if (OpenLayers.Projection.CRS84.isAliasOf(crs)) {\n        //                 return llR;\n        //             }\n        //             return Geoportal.Catalogue.CRSRESOLUTIONS[crs]?Geoportal.Catalogue.CRSRESOLUTIONS[crs]:null ;\n        //         };\n        //\n        //         var retrieveZoomFromResolution= function(resolutions, resolution) {\n        //             for (var i= 0, li= resolutions.length; i<li; i++) {\n        //                 if (resolutions[i]-resolution <= resolutions[li-1]) {\n        //                     return i;\n        //                 }\n        //             }\n        //             return -1;\n        //         };\n        //\n        //         var getZoomLevelFromScaleDenominator= function(scaleDenominator,crs) {\n        //             var resolution= scaleDenominator * 0.00028;\n        //             var R= getResolutionsFromCRS(crs);\n        //             if (R) {\n        //                 return retrieveZoomFromResolution(R,resolution);\n        //             }\n        //             resolution= resolution/(OpenLayers.METERS_PER_INCH * OpenLayers.INCHES_PER_UNIT[\"degrees\"]);\n        //             return retrieveZoomFromResolution(llR,resolution);\n        //         };\n        //\n        //         var getZoomLevelFromResolution= function(resolution,crs){\n        //             var R= getResolutionsFromCRS(crs);\n        //             if (R) {\n        //                 return retrieveZoomFromResolution(R,resolution);\n        //             }\n        //             var pt0= new OpenLayers.LonLat(0, 0);\n        //             var pt1= new OpenLayers.LonLat(1, 0);\n        //             pt0.transform(new OpenLayers.Projection(crs),OpenLayers.Projection.CRS84);\n        //             pt1.transform(new OpenLayers.Projection(crs),OpenLayers.Projection.CRS84);\n        //             resolution= resolution*(Math.abs(pt1.lon-pt0.lon));\n        //             return retrieveZoomFromResolution(llR,resolution);\n        //         };\n\n        // par defaut, on utilise la projection WebMercator (EPSG:3857 = PM)\n        // soit la liste des resolutions natives\n        var resolutionsNatives = {};\n        switch (crs) {\n            case \"EPSG:2154\":\n                resolutionsNatives = {\n                    0 : 104579.224549894,\n                    1 : 52277.5323537905,\n                    2 : 26135.4870785954,\n                    3 : 13066.8913818,\n                    4 : 6533.2286041135,\n                    5 : 3266.5595244627,\n                    6 : 1633.2660045974,\n                    7 : 816.629554986,\n                    8 : 408.3139146768,\n                    9 : 204.1567415109,\n                    10 : 102.0783167832,\n                    11 : 51.0391448966,\n                    12 : 25.5195690743,\n                    13 : 12.7597836936,\n                    14 : 6.379891636,\n                    15 : 3.1899457653,\n                    16 : 1.5949728695,\n                    17 : 0.7974864315,\n                    18 : 0.3987432149,\n                    19 : 0.1993716073,\n                    20 : 0.0996858037,\n                    21 : 0.0498429018\n                };\n                break;\n            default:\n                resolutionsNatives = {\n                    0 : 156543.033928041,\n                    1 : 78271.51696402048,\n                    2 : 39135.758482010235,\n                    3 : 19567.87924100512,\n                    4 : 9783.93962050256,\n                    5 : 4891.96981025128,\n                    6 : 2445.98490512564,\n                    7 : 1222.99245256282,\n                    8 : 611.49622628141,\n                    9 : 305.7481131407048,\n                    10 : 152.8740565703525,\n                    11 : 76.43702828517624,\n                    12 : 38.21851414258813,\n                    13 : 19.10925707129406,\n                    14 : 9.554628535647032,\n                    15 : 4.777314267823516,\n                    16 : 2.388657133911758,\n                    17 : 1.194328566955879,\n                    18 : 0.5971642834779395,\n                    19 : 0.2985821417389697,\n                    20 : 0.1492910708694849,\n                    21 : 0.0746455354347424\n                };\n                break;\n        }\n\n        // gestion des autres SRS\n        // TODO\n        // if (crs) {\n        // }\n\n        var resolution = scaleDenominator * 0.00028;\n\n        for (var index in resolutionsNatives) {\n            if (resolutionsNatives.hasOwnProperty(index)) {\n                if (resolutionsNatives[index] <= resolution) {\n                    index = parseInt(index, 10);\n                    return index;\n                }\n            }\n        }\n\n        return 0; // -1 ?\n    },\n\n    /**\n     * Get attributions list for a layer, based on current zoom and extent\n     *\n     * @param {Object} params - function params\n     * @param {Array.<Float>} params.extent - map current geographical extent (EPSG:4326) : [top, left, bottom, right] = [maxy, minx, miny, maxx]\n     * @param {Number} params.zoom - map current zoom\n     * @param {String} params.crs - map current projection code (ex \"EPSG:2154\")\n     * @param {Boolean} params.visibility - layer visibility\n     * @param {Gp.Services.Config.Originator} params.originators - resource originators (from Gp.Config.layers[].originators)\n     * @returns {Object} attributions - associative array, mapping originators url (keys) with their properties : html attributions elements\n     */\n    getAttributions : function (params) {\n        var zoom = params.zoom;\n\n        var attributions = [];\n\n        if (params.originators != null && params.visibility) {\n            // drawLogo = boolean, true if attribution should be displayed (zoom, extent), false otherwise\n            var drawLogo;\n            for (var j = 0, jl = params.originators.length; j < jl; j++) {\n                drawLogo = true;\n                var originator = params.originators[j];\n\n                var constraints = params.originators[j].constraints || [];\n                for (var k = 0, kl = constraints.length; k < kl; k++) {\n                    var constraint = constraints[k];\n                    drawLogo = true;\n\n                    var minZoomLevel = this.getZoomLevelFromScaleDenominator(constraint.maxScaleDenominator, params.crs);\n                    var maxZoomLevel = this.getZoomLevelFromScaleDenominator(constraint.minScaleDenominator, params.crs) || 21;\n\n                    // min zoom constraints\n                    if (minZoomLevel && (minZoomLevel > zoom)) {\n                        drawLogo = false;\n                    }\n\n                    // max zoom constraints\n                    if (drawLogo && maxZoomLevel && (maxZoomLevel < zoom)) {\n                        drawLogo = false;\n                    }\n\n                    // bbox constraints\n                    var bbox = constraint.bbox;\n                    if (drawLogo && bbox) {\n                        drawLogo = false;\n                        var viewExtent = params.extent;\n                        if (viewExtent) {\n                            var bounds = [bbox.top, bbox.left, bbox.bottom, bbox.right];\n                            if (this.intersects(viewExtent, bounds)) {\n                                // at least one constraint matches the map ones\n                                drawLogo = true;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (drawLogo) {\n                    // on a un originator qui correspond au zoom et à l'étendue.\n\n                    var logo = originator.logo;\n                    var url = originator.url;\n                    var name = originator.name ? originator.name : \"\";\n                    var text = originator.attribution;\n\n                    var container = document.createElement(\"div\");\n                    container.className = \"gp-control-attribution\";\n\n                    // on crée un lien dans tous les cas (même s'il ne pointe pas vers une référence), pour avoir accès à la class CSS (pour surcharge)\n                    var link = null;\n                    link = document.createElement(\"a\");\n                    link.className = \"gp-control-attribution-link\";\n                    link.target = \"_blank\";\n                    container.appendChild(link);\n                    if (url) {\n                        link.href = url;\n                    }\n\n                    var bImage = !!(logo);\n                    var image = null;\n                    // si on a un logo, on l'affiche à l'interieur du lien\n                    if (bImage) {\n                        image = document.createElement(\"img\");\n                        if (link) {\n                            image.className = \"gp-control-attribution-image\";\n                            link.appendChild(image);\n                        } else {\n                            image.className = \"\";\n                            container.appendChild(image);\n                        }\n                        image.src = logo; // FIXME : mixContent !\n                        image.title = text || name;\n                        image.style.height = \"30px\";\n                        image.style.width = \"30px\";\n                    } else {\n                        // sinon, on affiche le nom de l'originator, ou sa description ou l'url.\n                        if (name) {\n                            link.textContent = name;\n                        } else if (text) {\n                            link.textContent = text;\n                        } else if (url) {\n                            link.textContent = url;\n                        } else {\n                            link.textContent = \"\";\n                        }\n                    }\n\n                    attributions.push(container.innerHTML + \" \");\n                }\n            }\n        }\n\n        return attributions;\n    },\n\n    /**\n     * Determines if one extent (extent1) intersects another (extent2)\n     *\n     * @param {Array.<Float>} extent1 - First extent : [top, left, bottom, right] = [maxy, minx, miny, maxx]\n     * @param {Array.<Float>} extent2 - Second extent : [top, left, bottom, right] = [maxy, minx, miny, maxx]\n     * @return {Boolean} intersects - True if the two extents intersect, false otherwise.\n     */\n    intersects : function (extent1, extent2) {\n        var intersectsX = (extent1[1] <= extent2[3]) && (extent2[1] <= extent1[3]);\n        var intersectsY = (extent1[2] <= extent2[0]) && (extent2[2] <= extent1[0]);\n        return intersectsX && intersectsY;\n    }\n};\n\nexport default LayerUtils;\n","import Logger from \"../../Common/Utils/LoggerByDefault\";\nimport Config from \"../../Common/Utils/Config\";\nimport Util from \"../../Common/Utils/LayerUtils\";\n\nvar logger = Logger.getLogger(\"layer-config\");\n\n/**\n * @classdesc\n *\n * Configuration des couches Geoportail via l'appel du service d'autoconfiguration\n * @private\n */\nvar LayerConfig = {\n    /**\n     * options : key, layer, service\n     *\n     * @param {Object} options - options\n     *\n     * @returns {Object} layer parameters\n     */\n    get : function (options) {\n        var params = {};\n\n        // Gestion de l'autoconf\n        if (!Config.isConfigLoaded()) {\n            logger.warn(\"WARNING AUTOCONF_MISSING : contract key configuration has to be loaded to load Geoportal layers !\");\n            return;\n        }\n\n        // gestion des parametres\n        params = Config.getLayerParams(options.layer, options.service, options.key);\n\n        if (!params || Object.keys(params).length === 0) {\n            logger.warn(\"WARNING AUTOCONF_FAILED : params not found ?!\");\n            return;\n        }\n\n        // gestion des zoom\n        params.minZoom = Util.getZoomLevelFromScaleDenominator(params.maxScale) || 1;\n        params.maxZoom = Util.getZoomLevelFromScaleDenominator(params.minScale) || 21;\n\n        return params;\n    }\n};\n\nexport default LayerConfig;\n","\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport LayerUtil from \"../../Common/Utils/LayerUtils\";\n\nvar logger = Logger.getLogger(\"layer-event\");\n\n/**\n * @classdesc\n *\n * Evenement sur les couches Geoportail\n * @private\n */\nvar LayerEvent = {\n\n    _id : null,\n    _attributions : [],\n    _visibility : true,\n    _originators : [],\n\n    /**\n     * activation du controle attribution\n     *\n     * @param {Object} map - the map\n     *\n     * @return {Boolean} attribution controle is enable\n     */\n    isEnable : function (map) {\n        if (!map.attributionControl) {\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * visibilité de la couche\n     *\n     * @param {Boolean} visibility - true|false\n     */\n    setVisible : function (visibility) {\n        logger.log(\"visibility\", visibility);\n        this._visibility = visibility;\n        this.fire(\"visibilitychange\");\n    },\n\n    /**\n     * visibilité de la couche\n     *\n     * @returns {Boolean} visibility\n     */\n    getVisible : function () {\n        return this._visibility;\n    },\n\n    /**\n     * fonction de suppresion d'un layer du controle des layers\n     *\n     * @param {Object} e - event\n     */\n    _onRemoveLayer : function (e) {\n        logger.trace(\"onRemove event\", e);\n        if (e.layer._geoportal_id !== this._geoportal_id) {\n            return;\n        }\n        // attributions non visibles\n        this.setVisible(false);\n    },\n\n    /**\n     * fonction d'ajout d'un layer du controle des layers\n     *\n     * @param {Object} e - event\n     */\n    _onAddLayer : function (e) {\n        logger.trace(\"onAdd event\", e);\n        if (e.layer._geoportal_id !== this._geoportal_id) {\n            return;\n        }\n        // attributions visibles\n        this.setVisible(true);\n    },\n\n    /**\n     * fonction de deplacement d'un layer\n     *\n     * @param {Object} e - event\n     */\n    _onMoveEndLayer : function (e) {\n        logger.trace(\"moveend event\", e);\n        // mise à jour des attributions\n        this.updateAttributions(this._map, this);\n    },\n\n    /**\n     * updateAttributions\n     *\n     * @param {Object} map - the map\n     */\n    updateAttributions : function (map) {\n        // FIXME on peut realiser une mise à jour plus intelligente que cette manière brutale...\n        // Ex. mise en place de la notion 'hidden' de l'originators à desactiver\n\n        if (!this.isEnable(map)) {\n            return;\n        }\n\n        this.removeAttributions(map);\n        this.addAttributions(map);\n\n        this.fire(\"attributionchange\");\n    },\n\n    /**\n     * removeAttributions\n     *\n     * @param {Object} map - the map\n     */\n    removeAttributions : function (map) {\n        logger.trace(\"removeAttributions...\", this._geoportal_id);\n        // suppression des attributions\n        // L.Map utilise la methode getAttribution() du layer.\n        // La construction concerne le layer courant.\n        // Cet evenement declenche la construction des attributions\n\n        if (!this.isEnable(map)) {\n            return;\n        }\n\n        for (var i = 0; i < this._attributions.length; i++) {\n            map.attributionControl.removeAttribution(this._attributions[i]);\n        }\n\n        // suppression des attributions de liste\n        this._attributions = [];\n    },\n\n    /**\n     * addAttributions\n     *\n     * @param {Object} map - the map\n     */\n    addAttributions : function (map) {\n        logger.trace(\"addAttributions...\", this._geoportal_id);\n        // on interroge les originators en options pour obtenir les infos\n        // suivantes :\n        // - echelles\n        // - contraintes d'emprise\n        // - information sur le(s) proprietaire(s) du layer\n        // - ...\n        // mais on a besoin de qq informations sur la carte tels que :\n        // - zoom\n        // - bounds\n        // - ...\n\n        if (!this.isEnable(map)) {\n            return;\n        }\n\n        // ajout des attributions\n        var topLeft = map.getBounds().getNorthWest();\n        var bottomRight = map.getBounds().getSouthEast();\n        var arrayBounds = [topLeft.lat, topLeft.lng, bottomRight.lat, bottomRight.lng];\n        var params = {\n            extent : arrayBounds, // map.getBounds(),\n            zoom : map.getZoom(),\n            originators : this._originators,\n            visibility : this._visibility\n        };\n        logger.log(params);\n        var attributionsOriginators = LayerUtil.getAttributions(params);\n        logger.log(attributionsOriginators);\n        if (attributionsOriginators && attributionsOriginators.length !== 0) {\n            // on les ajoute dans la liste\n            // et on ajoute les attributions dans le controle Leaflet \"L.Control.Attribution\"\n            for (var i = 0; i < attributionsOriginators.length; i++) {\n                this._attributions.push(attributionsOriginators[i]);\n                map.attributionControl.addAttribution(attributionsOriginators[i]);\n            }\n        }\n    }\n\n};\n\nexport default LayerEvent;\n","/**\n* desativation JSHINT\n* W106 - Identifier '_geoportal_id' is not in camel case\n*/\n/* jshint -W106 */\n\nimport Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport LayerEvent from \"./LayerEvent\";\n// package.json (extract version)\nimport Pkg from \"../../../package.json\";\n\nvar logger = Logger.getLogger(\"wms\");\n\n/**\n * @namespace\n * @alias L.geoportalLayers.WMS\n * @classdesc\n *\n * Leaflet Layer Class for Geoportal or INSPIRE WMS Layers.\n *\n * Use {@link module:Layers.WMS L.geoportalLayer.WMS()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#tilelayer-wms\" target=\"_blank\">L.TileLayer.WMS</a> native class.\n *\n */\nvar WMS = L.TileLayer.WMS.extend(/** @lends WMS.prototype */ {\n\n    includes : LayerEvent,\n\n    /**\n     *\n     * @constructor\n     * @param {String} url - url service\n     * @param {Object} options - options for function call.\n     * @param {Array} [options.originators] - originators\n     * @param {Array} [options.legends] - legends\n     * @param {Array} [options.metadata] - metadata\n     * @param {String} [options.title] - title\n     * @param {String} [options.description] - description\n     * @param {String} [options.quicklookUrl] - quicklookUrl\n     * @param {Object} options.paramsWms - WMS options\n     * @param {String} options.paramsWms.layers - eg \"ORTHOIMAGERY.ORTHOPHOTOS.BDORTHO\",\n     * @param {String} options.paramsWms.styles - \"normal\",\n     * @param {String} options.paramsWms.format - \"image/jpeg\",\n     * @param {String} options.paramsWms.version - \"1.3.0\"\n     * @param {Object} [options.paramsNative] - other options for L.TileLayer.WMS function (see {@link http://leafletjs.com/reference.html#tilelayer-wms-options})\n     * @example\n     * var wms = new WMS(\"http://wxs.ign.fr/jhyvi0fgmnuxvfv0zjzorvdn/geoportail/r/wms\", {\n     *     paramsNative : {\n     *         minZoom : 1,\n     *         maxZoom : 21\n     *     },\n     *     paramsWms   : {\n     *         layers  : \"ORTHOIMAGERY.ORTHOPHOTOS.BDORTHO\",\n     *         styles  : \"normal\",\n     *         format  : \"image/jpeg\",\n     *         version : \"1.3.0\"\n     *     },\n     *     originators  : [],\n     *     legends      : [],\n     *     metadata     : [],\n     *     title        : \"\",\n     *     description  : \"\",\n     *     quicklookUrl : \"\"\n     * });\n     *\n     * @ignore\n     */\n    initialize : function (url, options) {\n        var settings = {};\n        L.Util.extend(settings, options.paramsWms, options.paramsNative);\n\n        // appel du constructeur de la classe étendue\n        L.TileLayer.WMS.prototype.initialize.call(\n            this,\n            // tracker extension leaflet\n            // FIXME : gp-ext version en mode AMD\n            Gp.Helper.normalyzeUrl(url, {\n                \"gp-leaflet-ext\" : Pkg.leafletExtVersion || Pkg.version\n            }, false),\n            settings\n        );\n\n        // sauvegarde\n        this._originators = options.originators;\n        this._legends = options.legends;\n        this._metadata = options.metadata;\n        this._title = options.title;\n        this._description = options.description;\n        this._quicklookUrl = options.quicklookUrl;\n\n        // init id du Layer\n        this._geoportal_id = 0; // FIXME L.stamp(this);\n    },\n\n    /**\n     * event\n     * (overwritten)\n     *\n     * @param {Object} map - map leaflet object\n     * @private\n     */\n    onAdd : function (map) {\n        logger.trace(\"onAdd layer\", this._geoportal_id);\n\n        // recuperation de la map\n        this._map = map;\n\n        // enregistrement de l'id Geoportal\n        this._geoportal_id = L.stamp(this);\n\n        // appel de la methode de la classe étendue\n        L.TileLayer.WMS.prototype.onAdd.call(this, map);\n\n        this.setVisible(true);\n\n        // y a t il des attributions/originators pour ce layer ?\n        this.updateAttributions(map);\n\n        /**\n         * Evenement sur l'ajout du layer sur la carte avec gestion des deplacements (zoom)\n         * Les deplacemnts sur la carte permettent de mettre à jour la liste des attributions.\n         */\n        map.on({\n\n            /**\n             * Permet de desactiver la visibilité des attributions sur le retrait\n             * d'un layer de type overlay.\n             * Les attributions ne doivent plus apparaitre si le layer est invisible !\n             */\n            overlayremove : this._onRemoveLayer,\n\n            /**\n             * Permet d'activer la visibilité des attributions sur l'ajout\n             * d'un layer de type overlay.\n             * Les attributions doivent apparaitre si le layer est visible !\n             */\n            overlayadd : this._onAddLayer,\n\n            /**\n             * Permet de desactiver la visibilité des attributions sur le retrait\n             * d'un layer de type layer.\n             * Les attributions ne doivent plus apparaitre si le layer est invisible !\n             */\n            layerremove : this._onRemoveLayer,\n\n            /**\n             * Permet d'activer la visibilité des attributions sur l'ajout\n             * d'un layer de type layer.\n             * Les attributions doivent apparaitre si le layer est visible !\n             */\n            layeradd : this._onAddLayer,\n\n            /**\n             * Permet d'ajouter des fonctionnalités lors de la creation du layer\n             * sur les evenements de fin de mouvemenent (move ou zoom)\n             */\n            moveend : this._onMoveEndLayer\n\n        }, this);\n\n        // if (map.attributionControl) {\n        //\n        //     // ceci permet de mofifier le prefixe leaflet !\n        //     // ce dernier etant obligatoire...\n        //     // Ex. map.attributionControl.setPrefix(\"Plugin © IGN with Leaflet - 2016\");\n        //     // map.attributionControl.setPrefix(\"Leaflet + Géoportail\");\n        //     map.attributionControl.setPrefix(\"Plugin © \" +\n        //         \"<a href=\\\"http://www.ign.fr\\\" \" +\n        //         \"title=\\\"Institut national de l'information géographique et forestière\\\">IGN</a>\" +\n        //         \" with \" +\n        //         \"<a href=\\\"http://leafletjs.com/\\\" \" +\n        //         \"title=\\\"an open-source JavaScript library for mobile-friendly interactive maps\\\">Leaflet</a>\" +\n        //         \" - 2016\");\n        // }\n    },\n\n    /**\n     * event\n     * (overwritten)\n     *\n     * @param {Object} map - map leaflet object\n     * @private\n     */\n    onRemove : function (map) {\n        logger.trace(\"onRemove layer\", this._geoportal_id);\n\n        // recuperation de la map\n        this._map = map;\n\n        // appel de la methode de la classe étendue\n        L.TileLayer.prototype.onRemove.call(this, map);\n\n        this.setVisible(false);\n\n        // suppression des attributions\n        this.removeAttributions(map);\n\n        // supprimer les evenements\n        map.off({\n            overlayremove : this._onRemoveLayer,\n            overlayadd : this._onAddLayer,\n            layerremove : this._onRemoveLayer,\n            layeradd : this._onAddLayer,\n            moveend : this._onMoveEndLayer\n        }, this);\n    },\n\n    /**\n     * event\n     * (overwritten)\n     *\n     * @param {Object} tilePoint - Point object\n     *\n     * @returns {String} url\n     * @private\n     */\n    getTileUrl : function (tilePoint) {\n        // (Point, Number) -> String\n\n        // FIXME\n        // on surcharge cette methode à cause d'un BUG Leaflet sur l'inversion de\n        // coordonnées sur les codes EPSG en geographiques en WMS 1.3.0.\n        // En attente de resolution du ticket suivant :\n        //   Axis option for crs, Issue 4253 on Leaflet/Leaflet\n        //   https://github.com/Leaflet/Leaflet/issues/4253\n\n        var lstProjEpsgGeographic = [\"EPSG:4326\"]; // ex. \"EPSG:4641\"\n\n        var map = this._map;\n        var tileSize = this.options.tileSize;\n\n        var nwPoint = tilePoint.multiplyBy(tileSize);\n        var sePoint = nwPoint.add([tileSize, tileSize]);\n\n        var nw = this._crs.project(map.unproject(nwPoint, tilePoint.z));\n        var se = this._crs.project(map.unproject(sePoint, tilePoint.z));\n\n        var bbox = (this._wmsVersion >= 1.3 && lstProjEpsgGeographic.indexOf(this._crs.code) !== -1) ? [se.y, nw.x, nw.y, se.x].join(\",\") : [nw.x, se.y, se.x, nw.y].join(\",\");\n\n        var url = L.Util.template(this._url, {\n            s : this._getSubdomain(tilePoint)\n        });\n\n        return url + L.Util.getParamString(this.wmsParams, url, true) + \"&BBOX=\" + bbox;\n    }\n\n});\n\nexport default WMS;\n","/**\n* desativation JSHINT\n* W106 - Identifier '_geoportal_id' is not in camel case\n*/\n\nimport Gp from \"geoportal-access-lib\";\nimport L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport LayerEvent from \"./LayerEvent\";\n// package.json (extract version)\nimport Pkg from \"../../../package.json\";\n\nvar logger = Logger.getLogger(\"wmts\");\n\n/**\n * @namespace\n * @alias L.geoportalLayers.WMTS\n * @classdesc\n *\n * Leaflet Layer Class for Geoportal WMTS Layers.\n *\n * Use {@link module:Layers.WMTS L.geoportalLayer.WMTS()} factory to create instances of that class.\n *\n * **Extends** Leaflet <a href=\"http://leafletjs.com/reference.html#tilelayer\" target=\"_blank\">L.TileLayer</a> native class.\n *\n */\nvar WMTS = L.TileLayer.extend(/** @lends WMTS.prototype */ {\n\n    includes : LayerEvent,\n\n    defaultWmtsParams : {\n        service : \"WMTS\",\n        request : \"GetTile\",\n        version : \"1.0.0\",\n        layer : \"\",\n        style : \"\",\n        tilematrixset : \"PM\",\n        format : \"image/jpeg\"\n    },\n\n    /**\n     *\n     * @constructor\n     * @param {String} url - url service\n     * @param {Object} options - options for function call.\n     * @param {Array} [options.originators] - originators\n     * @param {Array} [options.legends] - legends\n     * @param {Array} [options.metadata] - metadata\n     * @param {String} [options.title] - title\n     * @param {String} [options.description] - description\n     * @param {String} [options.quicklookUrl] - quicklookUrl\n     * @param {Object} options.paramsWmts - WMTS options\n     * @param {String} options.paramsWmts.service - \"WMTS\",\n     * @param {String} options.paramsWmts.request - \"GetTile\",\n     * @param {String} options.paramsWmts.version - \"1.0.0\",\n     * @param {String} options.paramsWmts.layer - \"\",\n     * @param {String} options.paramsWmts.style - \"\",\n     * @param {String} options.paramsWmts.tilematrixset - \"PM\",\n     * @param {String} options.paramsWmts.format - \"image/jpeg\"\n     * @param {Object} [options.paramsNative] - other options for L.TileLayer function (see {@link http://leafletjs.com/reference.html#tilelayer-options})\n     * @example\n     * var wmts = new WMTS(\"http://wxs.ign.fr/jhyvi0fgmnuxvfv0zjzorvdn/geoportail/wmts\", {\n     *     paramsNative : {\n     *         minZoom : 1,\n     *         maxZoom : 21\n     *     },\n     *     paramsWmts   : {\n     *         layer   : \"ORTHOIMAGERY.ORTHOPHOTOS\",\n     *         style   : \"normal\",\n     *         format  : \"image/jpeg\",\n     *         version : \"1.0.0\",\n     *         tilematrixset : \"PM\"\n     *     },\n     *     originators  : [],\n     *     legends      : [],\n     *     metadata     : [],\n     *     title        : \"\",\n     *     description  : \"\",\n     *     quicklookUrl : \"\"\n     * });\n     *\n     * @ignore\n     */\n    initialize : function (url, options) {\n        logger.log(\"initialize\");\n\n        // parametres WMTS\n        this._wmtsParams = {};\n        L.Util.extend(this._wmtsParams, this.defaultWmtsParams, options.paramsWmts);\n\n        // appel du constructeur de la classe étendue\n        L.TileLayer.prototype.initialize.call(\n            this,\n            // tracker extension leaflet\n            // FIXME : gp-ext version en mode AMD\n            Gp.Helper.normalyzeUrl(url, {\n                \"gp-leaflet-ext\" : Pkg.leafletExtVersion || Pkg.version\n            }, false),\n            options.paramsNative\n        );\n\n        // sauvegarde des originators\n        this._originators = options.originators;\n        this._legends = options.legends;\n        this._metadata = options.metadata;\n        this._title = options.title;\n        this._description = options.description;\n        this._quicklookUrl = options.quicklookUrl;\n\n        // id du Layer\n        this._geoportal_id = 0; // FIXME L.stamp(this);\n    },\n\n    /**\n     * event 'onAdd'\n     * (overwritten)\n     *\n     * @param {Object} map - map leaflet object\n     * @private\n     */\n    onAdd : function (map) {\n        logger.trace(\"onAdd layer\", this._geoportal_id);\n\n        // recuperation de la map\n        this._map = map;\n\n        // enregistrement de l'id Geoportal\n        this._geoportal_id = L.stamp(this);\n\n        // appel de la methode de la classe étendue\n        L.TileLayer.prototype.onAdd.call(this, map);\n\n        this.setVisible(true);\n\n        // y a t il des attributions/originators pour ce layer ?\n        this.updateAttributions(map);\n\n        /**\n         * Evenement sur l'ajout du layer sur la carte avec gestion des deplacements (zoom)\n         * Les deplacemnts sur la carte permettent de mettre à jour la liste des attributions.\n         */\n        map.on({\n\n            /**\n             * Permet de desactiver la visibilité des attributions sur le retrait\n             * d'un layer de type overlay.\n             * Les attributions ne doivent plus apparaitre si le layer est invisible !\n             */\n            overlayremove : this._onRemoveLayer,\n\n            /**\n             * Permet d'activer la visibilité des attributions sur l'ajout\n             * d'un layer de type overlay.\n             * Les attributions doivent apparaitre si le layer est visible !\n             */\n            overlayadd : this._onAddLayer,\n\n            /**\n             * Permet de desactiver la visibilité des attributions sur le retrait\n             * d'un layer de type layer.\n             * Les attributions ne doivent plus apparaitre si le layer est invisible !\n             */\n            layerremove : this._onRemoveLayer,\n\n            /**\n             * Permet d'activer la visibilité des attributions sur l'ajout\n             * d'un layer de type layer.\n             * Les attributions doivent apparaitre si le layer est visible !\n             */\n            layeradd : this._onAddLayer,\n\n            /**\n             * Permet d'ajouter des fonctionnalités lors de la creation du layer\n             * sur les evenements de fin de mouvemenent (move ou zoom)\n             */\n            moveend : this._onMoveEndLayer\n\n        }, this);\n\n        // if (map.attributionControl) {\n        //     // ceci permet de mofifier le prefixe leaflet !\n        //     // ce dernier etant obligatoire...\n        //     // Ex. map.attributionControl.setPrefix(\"Plugin © IGN with Leaflet - 2016\");\n        //     // map.attributionControl.setPrefix(\"Leaflet + Géoportail\");\n        //     map.attributionControl.setPrefix(\"Plugin © \" +\n        //         \"<a href=\\\"http://www.ign.fr\\\" \" +\n        //         \"title=\\\"Institut national de l'information géographique et forestière\\\">IGN</a>\" +\n        //         \" with \" +\n        //         \"<a href=\\\"http://leafletjs.com/\\\" \" +\n        //         \"title=\\\"an open-source JavaScript library for mobile-friendly interactive maps\\\">Leaflet</a>\" +\n        //         \" - 2016\");\n        // }\n    },\n\n    /**\n     * event 'onRemove'\n     * (overwritten)\n     *\n     * @param {Object} map - map leaflet object\n     * @private\n     */\n    onRemove : function (map) {\n        logger.trace(\"onRemove layer\", this._geoportal_id);\n\n        // recuperation de la map\n        this._map = map;\n\n        // appel de la methode de la classe étendue\n        L.TileLayer.prototype.onRemove.call(this, map);\n\n        this.setVisible(false);\n\n        // suppression des attributions\n        this.removeAttributions(map);\n\n        // supprimer les evenements\n        map.off({\n            overlayremove : this._onRemoveLayer,\n            overlayadd : this._onAddLayer,\n            layerremove : this._onRemoveLayer,\n            layeradd : this._onAddLayer,\n            moveend : this._onMoveEndLayer\n        }, this);\n    },\n\n    /**\n     * event 'getTileUrl'\n     * (overwritten)\n     *\n     * @param {Object} tilePoint - Point leaflet object\n     *\n     * @returns {String} url\n     * @private\n     */\n    getTileUrl : function (tilePoint) {\n        // (Point, Number) -> String\n\n        // ex http://wxs.ign.fr/j5tcdln4ya4xggpdu4j0f0cn/geoportail/wmts?\n        // SERVICE=WMTS&\n        // REQUEST=GetTile&\n        // VERSION=1.0.0&\n        // LAYER=ORTHOIMAGERY.ORTHOPHOTOS&\n        // STYLE=normal&\n        // TILEMATRIXSET=PM&\n        // TILEMATRIX=2&\n        // TILEROW=2&\n        // TILECOL=1&\n        // FORMAT=image%2Fjpeg\n\n        var zoom = this._getZoomForUrl();\n        var url = L.Util.template(this._url, {\n            s : this._getSubdomain(tilePoint)\n        });\n        return url + L.Util.getParamString(this._wmtsParams, url) +\n            \"&tilematrix=\" + zoom +\n            \"&tilerow=\" + tilePoint.y +\n            \"&tilecol=\" + tilePoint.x;\n    },\n\n    /**\n     * event 'setParams'\n     * (overwritten)\n     *\n     * @param {Object} params - parameters\n     * @param {Object} noRedraw - no redraw\n     *\n     * @returns {Object} this\n     * @private\n     */\n    setParams : function (params, noRedraw) {\n        L.extend(this._wmtsParams, params);\n\n        if (!noRedraw) {\n            this.redraw();\n        }\n\n        return this;\n    }\n});\n\nexport default WMTS;\n","import L from \"leaflet\";\nimport Logger from \"../../Common/Utils/LoggerByDefault\";\nimport LayerConfig from \"./LayerConfig\";\nimport WMS from \"./WMS\";\nimport WMTS from \"./WMTS\";\n\nvar logger = Logger.getLogger(\"layers\");\n\n/**\n * Geoportal Layers Factory to be used together with Leaflet Maps.\n *\n * @module Layers\n * @alias L.geoportalLayer\n * @example\n * var map = L.Map(...) ;\n * var layer = L.geoportalLayer.WMTS({\n *      layer : \"ORTHOIMAGERY.ORTHOPHOTOS\",\n * }).addTo(map) ;\n */\nvar Layers = {\n\n    options : {},\n    params : {},\n    protocol : null,\n\n    serviceUrl : \"http://localhost?no-rights-found-for=[{layer}]\",\n\n    /**\n     * initialize options\n     */\n    _initOptions : function () {\n        if (!this.options || Object.keys(this.options).length === 0) {\n            throw new Error(\"PARAM_MISSING : options !\");\n        }\n\n        if (!this.options.layer) {\n            throw new Error(\"PARAM_MISSING : layer !\");\n        }\n\n        // FIXME est ce utile de le preciser ?\n        if (!this.options.apiKey) {\n            logger.log(\"PARAM_MISSING : apiKey !\");\n        }\n\n        // par defaut\n        if (typeof this.options.ssl === \"undefined\") {\n            this.options.ssl = true;\n        }\n    },\n\n    /**\n     * get runtime context\n     */\n    _initContext : function () {\n        // si ssl = false on fait du http\n        // par défaut, ssl = true, on fait du https\n        this.protocol = this.options.ssl === false ? \"http://\" : \"https://\";\n    },\n\n    /**\n     * initialize parameters\n     *\n     * @param {String} service - service name, WMS or WMTS\n     */\n    _initParams : function (service) {\n        // par defaut...\n        if (!service) {\n            service = \"WMTS\";\n        }\n\n        // Gestion de l'autoconf\n        this.params = LayerConfig.get({\n            key : this.options.apiKey,\n            layer : this.options.layer,\n            service : service\n        });\n\n        if (!this.params || Object.keys(this.params).length === 0) {\n            this.params = {};\n            if (!this.options.apiKey) {\n                // FIXME on retire l'exception...\n                logger.log(\"WARNING PARAM_MISSING : parameter 'apiKey' is mandatory if the contract key configuration has not been loaded !\");\n            }\n        }\n    },\n\n    /**\n     * Factory function for Geoportal or INSPIRE WMS Layers creation.\n     *\n     * @method WMS\n     * @static\n     * @alias L.geoportalLayer.WMS\n     * @extends {L.TileLayer.WMS}\n     *\n     * @param {Object} options - options for function call.\n     * @param {String} options.layer - layer name (e.g. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {Boolean} [options.ssl] - if set true, enforce protocol https (only for nodejs)\n     * @param {String} [options.apiKey] - access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {Object} [settings] - other options for L.TileLayer.WMS function (see {@link http://leafletjs.com/reference.html#tilelayer-wms-options})\n     *\n     * @returns {L.geoportalLayer.WMS} WMS layer\n     *\n     * @example\n     *  var map = L.Map('divmap').setView();\n     *  var lyr = L.geoportalLayer.WMS(\n     *    {\n     *      layer : \"OI.OrthoimageCoverage\"\n     *    },\n     *    {\n     *      opacity : 1,\n     *      transparent : true,\n     *      minZoom : 1,\n     *      maxZoom : 21\n     *      ...\n     *    });\n     *\n     *  lyr.addTo(map); // ou map.addLayer(lyr);\n     */\n    WMS : function (options, settings) {\n        // gestion du logger\n        var logger = Logger.getLogger(\"layers-wms\");\n\n        /** options du plugins */\n        this.options = options || {};\n\n        // gestion des options\n        this._initOptions();\n\n        /** options natives de Leaflet */\n        this.settings = settings || {};\n\n        // env d'execution : browser ou non ?\n        this._initContext();\n\n        // gestion de l'autoconf\n        this._initParams(\"WMS\");\n        logger.log(this.params);\n\n        // url du service\n        var serviceUrl = null;\n        if (this.params.key || this.options.apiKey) {\n            // url de l'autoconf ou le service par defaut\n            serviceUrl = this.params.url || L.Util.template(\"https://wxs.ign.fr/{key}/geoportail/r/wms\", {\n                key : this.params.key || this.options.apiKey\n            });\n        } else {\n            // pas d'autoconf, ni de clef API !\n            // on évite l'exception en envoyant les requêtes vers localhost...\n            serviceUrl = L.Util.template(this.serviceUrl, {\n                layer : this.options.layer\n            });\n        }\n\n        // params du service WMS (par defaut)\n        var paramsWms = {\n            layers : this.options.layer,\n            styles : this.params.styles || \"normal\",\n            format : this.params.format || \"image/jpeg\",\n            version : this.params.version || \"1.3.0\"\n        };\n\n        // options natives de leaflet (par defaut)\n        var paramsNative = {\n            // zoom level\n            minZoom : this.params.minZoom || 1,\n            maxZoom : this.params.maxZoom || 21\n        };\n\n        // merge des options utilisateur pour le service WMS\n        L.Util.extend(paramsWms, this.settings);\n        // merge des options utilisateur aux options natives de leaflet\n        L.Util.extend(paramsNative, this.settings);\n\n        return new WMS(\n            serviceUrl.replace(/(http|https):\\/\\//, this.protocol), {\n                paramsNative : paramsNative,\n                paramsWms : paramsWms,\n                originators : this.params.originators || [],\n                legends : this.params.legends || [],\n                metadata : this.params.metadata || [],\n                title : this.params.title || null,\n                description : this.params.description || null,\n                quicklookUrl : this.params.quicklookUrl || null\n            }\n        );\n    },\n\n    /**\n     * Factory function for Geoportal WMTS Layers creation.\n     *\n     * @method WMTS\n     * @static\n     * @alias L.geoportalLayer.WMTS\n     * @extends {L.TileLayer}\n     *\n     * @param {Object} options - options for function call.\n     * @param {String} options.layer - layer name (e.g. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {Boolean} [options.ssl] - if set true, enforce protocol https (only for nodejs)\n     * @param {String} [options.apiKey] - access key to Geoportal platform, obtained [here]{@link http://professionnels.ign.fr/ign/contrats}.\n     * @param {Object} [settings] - other options for L.TileLayer function (see {@link http://leafletjs.com/reference.html#tilelayer-options})\n     *\n     * @returns {L.geoportalLayer.WMTS} WMTS layer\n     *\n     * @example\n     *  var map = L.Map('divmap').setView();\n     *  var lyr = L.geoportalLayer.WMTS(\n     *    {\n     *      layer : \"ORTHOIMAGERY.ORTHOPHOTOS\"\n     *    },\n     *    {\n     *      opacity : 1,\n     *      transparent : true,\n     *      minZoom : 1,\n     *      maxZoom : 21\n     *      ...\n     *    });\n     *\n     *  lyr.addTo(map); // ou map.addLayer(lyr);\n     */\n    WMTS : function (options, settings) {\n        // gestion du logger\n        var logger = Logger.getLogger(\"layers-wmts\");\n\n        /** options du plugins */\n        this.options = options || {};\n\n        // gestion des options\n        this._initOptions();\n\n        /** options natives de Leaflet */\n        this.settings = settings || {};\n\n        // env d'execution : browser ou non ?\n        this._initContext();\n\n        // gestion de l'autoconf\n        this._initParams(\"WMTS\");\n        logger.log(this.params);\n\n        // url du service (par defaut)\n        var serviceUrl = null;\n        if (this.params.key || this.options.apiKey) {\n            serviceUrl = this.params.url || L.Util.template(\"https://wxs.ign.fr/{key}/geoportail/wmts\", {\n                key : this.params.key || this.options.apiKey\n            });\n        } else {\n            // FIXME pas d'autoconf, ni clef API !\n            // on évite l'exception en envoyant les requêtes vers localhost\n            serviceUrl = L.Util.template(this.serviceUrl, {\n                layer : this.options.layer\n            });\n        }\n\n        // params du service WMTS (par defaut)\n        var paramsWmts = {\n            layer : this.options.layer,\n            style : this.params.styles || \"normal\",\n            format : this.params.format || \"image/jpeg\",\n            version : this.params.version || \"1.0.0\",\n            tilematrixset : this.params.TMSLink || \"PM\"\n        };\n\n        // options natives de leaflet (par defaut)\n        //    minZoom : 0\n        //    maxZoom : 18\n        //    tileSize : 256\n        //    subdomains : 'abc'\n        //    errorTileUrl : ''\n        //    attribution : ''\n        //    zoomOffset : 0\n        //    opacity : 1\n\n        var paramsNative = {\n            // zoom level\n            minZoom : this.params.minZoom || 1,\n            maxZoom : this.params.maxZoom || 21\n        };\n\n        // merge des options utilisateur pour le service WMTS\n        L.Util.extend(paramsWmts, this.settings);\n        // merge des options utilisateur aux options natives de leaflet\n        L.Util.extend(paramsNative, this.settings);\n\n        return new WMTS(\n            serviceUrl.replace(/(http|https):\\/\\//, this.protocol), {\n                paramsNative : paramsNative,\n                paramsWmts : paramsWmts,\n                originators : this.params.originators || [],\n                legends : this.params.legends || [],\n                metadata : this.params.metadata || [],\n                title : this.params.title || \"\",\n                description : this.params.description || \"\",\n                quicklookUrl : this.params.quicklookUrl || \"\"\n            }\n        );\n    }\n};\n\nexport default Layers;\n","import Gp from \"geoportal-access-lib\";\n\n(function () {\n    var scripts = document.getElementsByTagName(\"script\");\n\n    var key = scripts[scripts.length - 1].getAttribute(\"data-key\");\n    // in case of several keys\n    if (key) {\n        var splitKeys = key.split(/;|,|\\|/);\n        if (splitKeys.length > 1) {\n            var keys = [];\n            for (var i = 0; i < splitKeys.length; i++) {\n                keys.push(splitKeys[i]);\n            }\n            key = keys;\n        }\n    }\n    var url = scripts[scripts.length - 1].getAttribute(\"data-url\");\n    var timeout = scripts[scripts.length - 1].getAttribute(\"data-timeout\");\n\n    // callback\n    var success = function () {\n        // Pas de messages en mode prod\n        // console.log(\"GetConfig success!\");\n    };\n\n    // callback\n    var error = function (e) {\n        throw new Error(\"Configuration load failed : \" + e.message);\n    };\n\n    if (!key && !url) {\n        // pas de message d'information !\n        // console.log(\"WARNING : parameters missing 'data-key' and 'data-url', the loading of configuration can not be done !\");\n        return;\n    }\n\n    var options = {\n        apiKey : key,\n        onSuccess : success,\n        onFailure : error\n    };\n\n    if (url) {\n        options.serverUrl = url;\n        options.callbackSuffix = \"\";\n    }\n\n    if (timeout) {\n        options.timeOut = timeout;\n    }\n\n    // test d'existance de la varibale globale Gp.Config\n    if (!Gp.Config) {\n        // appel du service\n        Gp.Services.getConfig(options);\n    }\n})();\n","import Logger from \"../../Common/Utils/LoggerByDefault\";\n\n/**\n* @module ProxyUtils\n* @alias Gp.ProxyUtils\n* @description\n* ...\n*\n* @example\n* proxifyUrl();\n*/\nvar ProxyUtils = {\n    /**\n     * Ajoute un proxy aux url des couches vecteurs si besoin.\n     *\n     * @param {String} url - Url to proxify.\n     * @param {Object} [proxyOptions] - Object defining proxy options.\n     * @param {String} proxyOptions.proxyUrl - Proxy URL.\n     * @param {Array.<String>} [proxyOptions.noProxyDomains] - Proxy will not be used for this list of domain names.\n     *\n     * @returns {String} proxy url\n     */\n    proxifyUrl : function (url, proxyOptions) {\n        // logger\n\n        var logger = Logger.getLogger(\"proxifyUrl\");\n\n        if (!proxyOptions ||\n            !proxyOptions.hasOwnProperty(\"proxyUrl\") ||\n            proxyOptions.proxyUrl === null ||\n            proxyOptions.proxyUrl.trim().length === 0) {\n            return url;\n        }\n        // on regarde si l'url nest pas dans les domaines sans proxy\n        if (proxyOptions.noProxyDomains &&\n            Array.isArray(proxyOptions.noProxyDomains) &&\n            proxyOptions.noProxyDomains.length > 0) {\n            for (var i in proxyOptions.noProxyDomains) {\n                logger.trace(\"[ProxyUtils] proxifyUrl : analyzing \" + proxyOptions.noProxyDomains[i]);\n                if (url.indexOf(proxyOptions.noProxyDomains[i]) !== -1) {\n                    logger.info(\"[ProxyUtils] proxifyUrl : \" + url + \" found in noProxyDomains list (\" + proxyOptions.noProxyDomains[i] + \").\");\n                    return url;\n                }\n            }\n        }\n        return proxyOptions.proxyUrl + encodeURIComponent(url);\n    }\n};\n\nexport default ProxyUtils;\n","/**\n* Global variable Gp.\n*\n* @module Gp\n* @alias Gp\n* @desc\n*\n* This is the global variable that is exposed in the browser environment.\n* Content is composed of constructor, functions and properties...\n*\n* > Config:  (...)\n*\n* > ColorUtils: (...)\n* > LayerUtils: (...)\n* > MathUtils: (...)\n* > ProxyUtils: (...)\n* > Logger: (...)\n*\n* > LExtended: (...)\n*\n* > leafletExtDate: \"YYYY-MM-DD\"\n* > leafletExtVersion: \"X.X.X\"\n*\n* > Error: (...)\n* > Helper: (...)\n* > Protocols: (...)\n* > Services: (...)\n* > servicesDate: \"YYYY-MM-DD\"\n* > servicesVersion: \"X.X.X\"\n*\n* The following variables are aslo global :\n*   - proj4,\n*   - L\n*/\n\nimport Pkg from \"../../package.json\";\n\nimport L from \"leaflet\";\n\n// CSS communes aux extensions !\nimport \"../Common/Styles\";\nimport \"./Styles\";\n\nimport Controls from \"./Controls/Controls\";\nimport ElevationPath from \"./Controls/ElevationPath\";\nimport Layers from \"./Layers/Layers\";\n// import WMTS from \"./Layers/WMTS\";\n// import WMS from \"./Layers/WMS\";\n\nimport CRS from \"./CRS/CRS\";\n\n// Autoload...\nimport \"../Common/Utils/AutoLoadConfig\";\n\n// export des services\nimport Gp from \"geoportal-access-lib\";\n\n// reconstruction des ns\nvar Services = Gp.Services;\nvar Error = Gp.Error;\nvar Helper = Gp.Helper;\nvar Protocols = Gp.Protocols;\nvar servicesDate = Gp.servicesDate;\nvar servicesVersion = Gp.servicesVersion;\n\nexport {\n    /** Services\n    * @see {@link http://ignf.github.io/geoportal-access-lib/current/jsdoc/module-Services.html|geoportal-access-lib}\n    */\n    Services,\n    /** Error\n    * @see {@link http://ignf.github.io/geoportal-access-lib/current/jsdoc/Gp.Error.html|geoportal-access-lib}\n    */\n    Error,\n    /** Helper\n    * @see {@link http://ignf.github.io/geoportal-access-lib/current/jsdoc/module-Helper.html|geoportal-access-lib}\n    */\n    Helper,\n    /** Protocols\n    * @see {@link http://ignf.github.io/geoportal-access-lib/current/jsdoc/module-XHR.html|geoportal-access-lib}\n    */\n    Protocols,\n    /** servicesDate\n    * @see {@link http://ignf.github.io/geoportal-access-lib/current/jsdoc/module-Gp.html|geoportal-access-lib}\n    */\n    servicesDate,\n    /** servicesVersion\n    * @see {@link http://ignf.github.io/geoportal-access-lib/current/jsdoc/module-Gp.html|geoportal-access-lib}\n    */\n    servicesVersion\n};\n\n// Rajout des propriétés de l'extension dans le namespace\n/** Version */\nexport const leafletExtVersion = Pkg.leafletExtVersion || Pkg.version;\n/** Publication date */\nexport const leafletExtDate = Pkg.date;\n\n// Classes utilitaires\nexport { default as LayerUtils } from \"../Common/Utils/LayerUtils\";\nexport { default as ProxyUtils } from \"../Common/Utils/ProxyUtils\";\nexport { default as ColorUtils } from \"../Common/Utils/ColorUtils\";\nexport { default as MathUtils } from \"../Common/Utils/MathUtils\";\nexport { default as Logger } from \"../Common/Utils/LoggerByDefault\";\n\n// creation du namespace pour les extensions leaflet\nL.geoportalLayer = Layers; // WMS et WMTS\n// L.geoportalLayers = {};\n// L.geoportalLayers.WMTS = WMTS;\n// L.geoportalLayers.WMS = WMS;\nL.geoportalControl = Controls; // IsoChrone, SearchEngine, ...\n\nL.geoportalControl.ElevationPath.DISPLAY_PROFILE_LIB_D3 = ElevationPath.DISPLAY_PROFILE_LIB_D3;\nL.geoportalControl.ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS = ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS;\nL.geoportalControl.ElevationPath.DISPLAY_PROFILE_RAW = ElevationPath.DISPLAY_PROFILE_RAW;\nL.geoportalControl.ElevationPath.DISPLAY_PROFILE_BY_DEFAULT = ElevationPath.DISPLAY_PROFILE_BY_DEFAULT;\n\nL.geoportalCRS = CRS; // lambert 93 et lambert 2 étendu\nL.geoportalCRS.EPSG2154 = CRS.EPSG2154(); // lambert 93\nL.geoportalCRS.EPSG27572 = CRS.EPSG27572(); // lambert 2 étendu\nL.geoportalCRS.EPSG4326 = CRS.EPSG4326();\n\nexport {\n    /** Expose extensions leaflet extended */\n    L as LExtended\n};\n","import * as Log from \"loglevel\";\n\nvar LoggerByDefault = {\n    /**\n     * creation d'un logger statique\n     *\n     * @param {String} [name=\"default\"] - the logger name\n     * @returns {Object} logger\n     */\n    getLogger : function (name) {\n        // INFO :\n        // à la compilation en mode production, on substitue __PRODUCTION__\n        // avec \"true\", ceci desactive les loggers !\n        //\n        // à la compilation en mode developpement, on substitue __PRODUCTION__\n        // avec \"false\", ceci permet d'avoir les loggers actifs !\n        //\n        // lors d'une utilisation en module es6, il n'y a pas de substitution de __PRODUCTION__,\n        // les loggers sont donc actifs par defaut !\n        //\n        // > Substitute global constants configured at compile time\n        // cf. webpack.config.js\n        // on masque cette constante afin d'eviter \"referenceerror not defined\"\n        (\"__PRODUCTION__\".match(/true/)) ? Log.disableAll() : Log.enableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    },\n    /** desactive tous les loggers */\n    disableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.disableAll();\n            }\n        }\n    },\n    /** active tous les loggers */\n    enableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.enableAll();\n            }\n        }\n    }\n};\n\nexport default LoggerByDefault;\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","/* @preserve\n * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com\n * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.L = {})));\n}(this, (function (exports) { 'use strict';\n\n  var version = \"1.7.1\";\n\n  /*\r\n   * @namespace Util\r\n   *\r\n   * Various utility functions, used by Leaflet internally.\r\n   */\r\n\r\n  // @function extend(dest: Object, src?: Object): Object\r\n  // Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.\r\n  function extend(dest) {\r\n  \tvar i, j, len, src;\r\n\r\n  \tfor (j = 1, len = arguments.length; j < len; j++) {\r\n  \t\tsrc = arguments[j];\r\n  \t\tfor (i in src) {\r\n  \t\t\tdest[i] = src[i];\r\n  \t\t}\r\n  \t}\r\n  \treturn dest;\r\n  }\r\n\r\n  // @function create(proto: Object, properties?: Object): Object\r\n  // Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)\r\n  var create = Object.create || (function () {\r\n  \tfunction F() {}\r\n  \treturn function (proto) {\r\n  \t\tF.prototype = proto;\r\n  \t\treturn new F();\r\n  \t};\r\n  })();\r\n\r\n  // @function bind(fn: Function, …): Function\r\n  // Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\r\n  // Has a `L.bind()` shortcut.\r\n  function bind(fn, obj) {\r\n  \tvar slice = Array.prototype.slice;\r\n\r\n  \tif (fn.bind) {\r\n  \t\treturn fn.bind.apply(fn, slice.call(arguments, 1));\r\n  \t}\r\n\r\n  \tvar args = slice.call(arguments, 2);\r\n\r\n  \treturn function () {\r\n  \t\treturn fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\r\n  \t};\r\n  }\r\n\r\n  // @property lastId: Number\r\n  // Last unique ID used by [`stamp()`](#util-stamp)\r\n  var lastId = 0;\r\n\r\n  // @function stamp(obj: Object): Number\r\n  // Returns the unique ID of an object, assigning it one if it doesn't have it.\r\n  function stamp(obj) {\r\n  \t/*eslint-disable */\r\n  \tobj._leaflet_id = obj._leaflet_id || ++lastId;\r\n  \treturn obj._leaflet_id;\r\n  \t/* eslint-enable */\r\n  }\r\n\r\n  // @function throttle(fn: Function, time: Number, context: Object): Function\r\n  // Returns a function which executes function `fn` with the given scope `context`\r\n  // (so that the `this` keyword refers to `context` inside `fn`'s code). The function\r\n  // `fn` will be called no more than one time per given amount of `time`. The arguments\r\n  // received by the bound function will be any arguments passed when binding the\r\n  // function, followed by any arguments passed when invoking the bound function.\r\n  // Has an `L.throttle` shortcut.\r\n  function throttle(fn, time, context) {\r\n  \tvar lock, args, wrapperFn, later;\r\n\r\n  \tlater = function () {\r\n  \t\t// reset lock and call if queued\r\n  \t\tlock = false;\r\n  \t\tif (args) {\r\n  \t\t\twrapperFn.apply(context, args);\r\n  \t\t\targs = false;\r\n  \t\t}\r\n  \t};\r\n\r\n  \twrapperFn = function () {\r\n  \t\tif (lock) {\r\n  \t\t\t// called too soon, queue to call later\r\n  \t\t\targs = arguments;\r\n\r\n  \t\t} else {\r\n  \t\t\t// call and lock until later\r\n  \t\t\tfn.apply(context, arguments);\r\n  \t\t\tsetTimeout(later, time);\r\n  \t\t\tlock = true;\r\n  \t\t}\r\n  \t};\r\n\r\n  \treturn wrapperFn;\r\n  }\r\n\r\n  // @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number\r\n  // Returns the number `num` modulo `range` in such a way so it lies within\r\n  // `range[0]` and `range[1]`. The returned value will be always smaller than\r\n  // `range[1]` unless `includeMax` is set to `true`.\r\n  function wrapNum(x, range, includeMax) {\r\n  \tvar max = range[1],\r\n  \t    min = range[0],\r\n  \t    d = max - min;\r\n  \treturn x === max && includeMax ? x : ((x - min) % d + d) % d + min;\r\n  }\r\n\r\n  // @function falseFn(): Function\r\n  // Returns a function which always returns `false`.\r\n  function falseFn() { return false; }\r\n\r\n  // @function formatNum(num: Number, digits?: Number): Number\r\n  // Returns the number `num` rounded to `digits` decimals, or to 6 decimals by default.\r\n  function formatNum(num, digits) {\r\n  \tvar pow = Math.pow(10, (digits === undefined ? 6 : digits));\r\n  \treturn Math.round(num * pow) / pow;\r\n  }\r\n\r\n  // @function trim(str: String): String\r\n  // Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\r\n  function trim(str) {\r\n  \treturn str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\r\n  }\r\n\r\n  // @function splitWords(str: String): String[]\r\n  // Trims and splits the string on whitespace and returns the array of parts.\r\n  function splitWords(str) {\r\n  \treturn trim(str).split(/\\s+/);\r\n  }\r\n\r\n  // @function setOptions(obj: Object, options: Object): Object\r\n  // Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.\r\n  function setOptions(obj, options) {\r\n  \tif (!Object.prototype.hasOwnProperty.call(obj, 'options')) {\r\n  \t\tobj.options = obj.options ? create(obj.options) : {};\r\n  \t}\r\n  \tfor (var i in options) {\r\n  \t\tobj.options[i] = options[i];\r\n  \t}\r\n  \treturn obj.options;\r\n  }\r\n\r\n  // @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String\r\n  // Converts an object into a parameter URL string, e.g. `{a: \"foo\", b: \"bar\"}`\r\n  // translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will\r\n  // be appended at the end. If `uppercase` is `true`, the parameter names will\r\n  // be uppercased (e.g. `'?A=foo&B=bar'`)\r\n  function getParamString(obj, existingUrl, uppercase) {\r\n  \tvar params = [];\r\n  \tfor (var i in obj) {\r\n  \t\tparams.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\r\n  \t}\r\n  \treturn ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\r\n  }\r\n\r\n  var templateRe = /\\{ *([\\w_-]+) *\\}/g;\r\n\r\n  // @function template(str: String, data: Object): String\r\n  // Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`\r\n  // and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string\r\n  // `('Hello foo, bar')`. You can also specify functions instead of strings for\r\n  // data values — they will be evaluated passing `data` as an argument.\r\n  function template(str, data) {\r\n  \treturn str.replace(templateRe, function (str, key) {\r\n  \t\tvar value = data[key];\r\n\r\n  \t\tif (value === undefined) {\r\n  \t\t\tthrow new Error('No value provided for variable ' + str);\r\n\r\n  \t\t} else if (typeof value === 'function') {\r\n  \t\t\tvalue = value(data);\r\n  \t\t}\r\n  \t\treturn value;\r\n  \t});\r\n  }\r\n\r\n  // @function isArray(obj): Boolean\r\n  // Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)\r\n  var isArray = Array.isArray || function (obj) {\r\n  \treturn (Object.prototype.toString.call(obj) === '[object Array]');\r\n  };\r\n\r\n  // @function indexOf(array: Array, el: Object): Number\r\n  // Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)\r\n  function indexOf(array, el) {\r\n  \tfor (var i = 0; i < array.length; i++) {\r\n  \t\tif (array[i] === el) { return i; }\r\n  \t}\r\n  \treturn -1;\r\n  }\r\n\r\n  // @property emptyImageUrl: String\r\n  // Data URI string containing a base64-encoded empty GIF image.\r\n  // Used as a hack to free memory from unused images on WebKit-powered\r\n  // mobile devices (by setting image `src` to this string).\r\n  var emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\r\n\r\n  // inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\r\n  function getPrefixed(name) {\r\n  \treturn window['webkit' + name] || window['moz' + name] || window['ms' + name];\r\n  }\r\n\r\n  var lastTime = 0;\r\n\r\n  // fallback for IE 7-8\r\n  function timeoutDefer(fn) {\r\n  \tvar time = +new Date(),\r\n  \t    timeToCall = Math.max(0, 16 - (time - lastTime));\r\n\r\n  \tlastTime = time + timeToCall;\r\n  \treturn window.setTimeout(fn, timeToCall);\r\n  }\r\n\r\n  var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\r\n  var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\r\n  \t\tgetPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\r\n\r\n  // @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number\r\n  // Schedules `fn` to be executed when the browser repaints. `fn` is bound to\r\n  // `context` if given. When `immediate` is set, `fn` is called immediately if\r\n  // the browser doesn't have native support for\r\n  // [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),\r\n  // otherwise it's delayed. Returns a request ID that can be used to cancel the request.\r\n  function requestAnimFrame(fn, context, immediate) {\r\n  \tif (immediate && requestFn === timeoutDefer) {\r\n  \t\tfn.call(context);\r\n  \t} else {\r\n  \t\treturn requestFn.call(window, bind(fn, context));\r\n  \t}\r\n  }\r\n\r\n  // @function cancelAnimFrame(id: Number): undefined\r\n  // Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).\r\n  function cancelAnimFrame(id) {\r\n  \tif (id) {\r\n  \t\tcancelFn.call(window, id);\r\n  \t}\r\n  }\n\n  var Util = ({\n    extend: extend,\n    create: create,\n    bind: bind,\n    lastId: lastId,\n    stamp: stamp,\n    throttle: throttle,\n    wrapNum: wrapNum,\n    falseFn: falseFn,\n    formatNum: formatNum,\n    trim: trim,\n    splitWords: splitWords,\n    setOptions: setOptions,\n    getParamString: getParamString,\n    template: template,\n    isArray: isArray,\n    indexOf: indexOf,\n    emptyImageUrl: emptyImageUrl,\n    requestFn: requestFn,\n    cancelFn: cancelFn,\n    requestAnimFrame: requestAnimFrame,\n    cancelAnimFrame: cancelAnimFrame\n  });\n\n  // @class Class\r\n  // @aka L.Class\r\n\r\n  // @section\r\n  // @uninheritable\r\n\r\n  // Thanks to John Resig and Dean Edwards for inspiration!\r\n\r\n  function Class() {}\r\n\r\n  Class.extend = function (props) {\r\n\r\n  \t// @function extend(props: Object): Function\r\n  \t// [Extends the current class](#class-inheritance) given the properties to be included.\r\n  \t// Returns a Javascript function that is a class constructor (to be called with `new`).\r\n  \tvar NewClass = function () {\r\n\r\n  \t\t// call the constructor\r\n  \t\tif (this.initialize) {\r\n  \t\t\tthis.initialize.apply(this, arguments);\r\n  \t\t}\r\n\r\n  \t\t// call all constructor hooks\r\n  \t\tthis.callInitHooks();\r\n  \t};\r\n\r\n  \tvar parentProto = NewClass.__super__ = this.prototype;\r\n\r\n  \tvar proto = create(parentProto);\r\n  \tproto.constructor = NewClass;\r\n\r\n  \tNewClass.prototype = proto;\r\n\r\n  \t// inherit parent's statics\r\n  \tfor (var i in this) {\r\n  \t\tif (Object.prototype.hasOwnProperty.call(this, i) && i !== 'prototype' && i !== '__super__') {\r\n  \t\t\tNewClass[i] = this[i];\r\n  \t\t}\r\n  \t}\r\n\r\n  \t// mix static properties into the class\r\n  \tif (props.statics) {\r\n  \t\textend(NewClass, props.statics);\r\n  \t\tdelete props.statics;\r\n  \t}\r\n\r\n  \t// mix includes into the prototype\r\n  \tif (props.includes) {\r\n  \t\tcheckDeprecatedMixinEvents(props.includes);\r\n  \t\textend.apply(null, [proto].concat(props.includes));\r\n  \t\tdelete props.includes;\r\n  \t}\r\n\r\n  \t// merge options\r\n  \tif (proto.options) {\r\n  \t\tprops.options = extend(create(proto.options), props.options);\r\n  \t}\r\n\r\n  \t// mix given properties into the prototype\r\n  \textend(proto, props);\r\n\r\n  \tproto._initHooks = [];\r\n\r\n  \t// add method for calling all hooks\r\n  \tproto.callInitHooks = function () {\r\n\r\n  \t\tif (this._initHooksCalled) { return; }\r\n\r\n  \t\tif (parentProto.callInitHooks) {\r\n  \t\t\tparentProto.callInitHooks.call(this);\r\n  \t\t}\r\n\r\n  \t\tthis._initHooksCalled = true;\r\n\r\n  \t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n  \t\t\tproto._initHooks[i].call(this);\r\n  \t\t}\r\n  \t};\r\n\r\n  \treturn NewClass;\r\n  };\r\n\r\n\r\n  // @function include(properties: Object): this\r\n  // [Includes a mixin](#class-includes) into the current class.\r\n  Class.include = function (props) {\r\n  \textend(this.prototype, props);\r\n  \treturn this;\r\n  };\r\n\r\n  // @function mergeOptions(options: Object): this\r\n  // [Merges `options`](#class-options) into the defaults of the class.\r\n  Class.mergeOptions = function (options) {\r\n  \textend(this.prototype.options, options);\r\n  \treturn this;\r\n  };\r\n\r\n  // @function addInitHook(fn: Function): this\r\n  // Adds a [constructor hook](#class-constructor-hooks) to the class.\r\n  Class.addInitHook = function (fn) { // (Function) || (String, args...)\r\n  \tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n  \tvar init = typeof fn === 'function' ? fn : function () {\r\n  \t\tthis[fn].apply(this, args);\r\n  \t};\r\n\r\n  \tthis.prototype._initHooks = this.prototype._initHooks || [];\r\n  \tthis.prototype._initHooks.push(init);\r\n  \treturn this;\r\n  };\r\n\r\n  function checkDeprecatedMixinEvents(includes) {\r\n  \tif (typeof L === 'undefined' || !L || !L.Mixin) { return; }\r\n\r\n  \tincludes = isArray(includes) ? includes : [includes];\r\n\r\n  \tfor (var i = 0; i < includes.length; i++) {\r\n  \t\tif (includes[i] === L.Mixin.Events) {\r\n  \t\t\tconsole.warn('Deprecated include of L.Mixin.Events: ' +\r\n  \t\t\t\t'this property will be removed in future releases, ' +\r\n  \t\t\t\t'please inherit from L.Evented instead.', new Error().stack);\r\n  \t\t}\r\n  \t}\r\n  }\n\n  /*\r\n   * @class Evented\r\n   * @aka L.Evented\r\n   * @inherits Class\r\n   *\r\n   * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * map.on('click', function(e) {\r\n   * \talert(e.latlng);\r\n   * } );\r\n   * ```\r\n   *\r\n   * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:\r\n   *\r\n   * ```js\r\n   * function onClick(e) { ... }\r\n   *\r\n   * map.on('click', onClick);\r\n   * map.off('click', onClick);\r\n   * ```\r\n   */\r\n\r\n  var Events = {\r\n  \t/* @method on(type: String, fn: Function, context?: Object): this\r\n  \t * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).\r\n  \t *\r\n  \t * @alternative\r\n  \t * @method on(eventMap: Object): this\r\n  \t * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n  \t */\r\n  \ton: function (types, fn, context) {\r\n\r\n  \t\t// types can be a map of types/handlers\r\n  \t\tif (typeof types === 'object') {\r\n  \t\t\tfor (var type in types) {\r\n  \t\t\t\t// we don't process space-separated events here for performance;\r\n  \t\t\t\t// it's a hot path since Layer uses the on(obj) syntax\r\n  \t\t\t\tthis._on(type, types[type], fn);\r\n  \t\t\t}\r\n\r\n  \t\t} else {\r\n  \t\t\t// types can be a string of space-separated words\r\n  \t\t\ttypes = splitWords(types);\r\n\r\n  \t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n  \t\t\t\tthis._on(types[i], fn, context);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t/* @method off(type: String, fn?: Function, context?: Object): this\r\n  \t * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.\r\n  \t *\r\n  \t * @alternative\r\n  \t * @method off(eventMap: Object): this\r\n  \t * Removes a set of type/listener pairs.\r\n  \t *\r\n  \t * @alternative\r\n  \t * @method off: this\r\n  \t * Removes all listeners to all events on the object. This includes implicitly attached events.\r\n  \t */\r\n  \toff: function (types, fn, context) {\r\n\r\n  \t\tif (!types) {\r\n  \t\t\t// clear all listeners if called without arguments\r\n  \t\t\tdelete this._events;\r\n\r\n  \t\t} else if (typeof types === 'object') {\r\n  \t\t\tfor (var type in types) {\r\n  \t\t\t\tthis._off(type, types[type], fn);\r\n  \t\t\t}\r\n\r\n  \t\t} else {\r\n  \t\t\ttypes = splitWords(types);\r\n\r\n  \t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n  \t\t\t\tthis._off(types[i], fn, context);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// attach listener (without syntactic sugar now)\r\n  \t_on: function (type, fn, context) {\r\n  \t\tthis._events = this._events || {};\r\n\r\n  \t\t/* get/init listeners for type */\r\n  \t\tvar typeListeners = this._events[type];\r\n  \t\tif (!typeListeners) {\r\n  \t\t\ttypeListeners = [];\r\n  \t\t\tthis._events[type] = typeListeners;\r\n  \t\t}\r\n\r\n  \t\tif (context === this) {\r\n  \t\t\t// Less memory footprint.\r\n  \t\t\tcontext = undefined;\r\n  \t\t}\r\n  \t\tvar newListener = {fn: fn, ctx: context},\r\n  \t\t    listeners = typeListeners;\r\n\r\n  \t\t// check if fn already there\r\n  \t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n  \t\t\tif (listeners[i].fn === fn && listeners[i].ctx === context) {\r\n  \t\t\t\treturn;\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tlisteners.push(newListener);\r\n  \t},\r\n\r\n  \t_off: function (type, fn, context) {\r\n  \t\tvar listeners,\r\n  \t\t    i,\r\n  \t\t    len;\r\n\r\n  \t\tif (!this._events) { return; }\r\n\r\n  \t\tlisteners = this._events[type];\r\n\r\n  \t\tif (!listeners) {\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\tif (!fn) {\r\n  \t\t\t// Set all removed listeners to noop so they are not called if remove happens in fire\r\n  \t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n  \t\t\t\tlisteners[i].fn = falseFn;\r\n  \t\t\t}\r\n  \t\t\t// clear all listeners for a type if function isn't specified\r\n  \t\t\tdelete this._events[type];\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\tif (context === this) {\r\n  \t\t\tcontext = undefined;\r\n  \t\t}\r\n\r\n  \t\tif (listeners) {\r\n\r\n  \t\t\t// find fn and remove it\r\n  \t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n  \t\t\t\tvar l = listeners[i];\r\n  \t\t\t\tif (l.ctx !== context) { continue; }\r\n  \t\t\t\tif (l.fn === fn) {\r\n\r\n  \t\t\t\t\t// set the removed listener to noop so that's not called if remove happens in fire\r\n  \t\t\t\t\tl.fn = falseFn;\r\n\r\n  \t\t\t\t\tif (this._firingCount) {\r\n  \t\t\t\t\t\t/* copy array in case events are being fired */\r\n  \t\t\t\t\t\tthis._events[type] = listeners = listeners.slice();\r\n  \t\t\t\t\t}\r\n  \t\t\t\t\tlisteners.splice(i, 1);\r\n\r\n  \t\t\t\t\treturn;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @method fire(type: String, data?: Object, propagate?: Boolean): this\r\n  \t// Fires an event of the specified type. You can optionally provide an data\r\n  \t// object — the first argument of the listener function will contain its\r\n  \t// properties. The event can optionally be propagated to event parents.\r\n  \tfire: function (type, data, propagate) {\r\n  \t\tif (!this.listens(type, propagate)) { return this; }\r\n\r\n  \t\tvar event = extend({}, data, {\r\n  \t\t\ttype: type,\r\n  \t\t\ttarget: this,\r\n  \t\t\tsourceTarget: data && data.sourceTarget || this\r\n  \t\t});\r\n\r\n  \t\tif (this._events) {\r\n  \t\t\tvar listeners = this._events[type];\r\n\r\n  \t\t\tif (listeners) {\r\n  \t\t\t\tthis._firingCount = (this._firingCount + 1) || 1;\r\n  \t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n  \t\t\t\t\tvar l = listeners[i];\r\n  \t\t\t\t\tl.fn.call(l.ctx || this, event);\r\n  \t\t\t\t}\r\n\r\n  \t\t\t\tthis._firingCount--;\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tif (propagate) {\r\n  \t\t\t// propagate the event to parents (set with addEventParent)\r\n  \t\t\tthis._propagateEvent(event);\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method listens(type: String): Boolean\r\n  \t// Returns `true` if a particular event type has any listeners attached to it.\r\n  \tlistens: function (type, propagate) {\r\n  \t\tvar listeners = this._events && this._events[type];\r\n  \t\tif (listeners && listeners.length) { return true; }\r\n\r\n  \t\tif (propagate) {\r\n  \t\t\t// also check parents for listeners if event propagates\r\n  \t\t\tfor (var id in this._eventParents) {\r\n  \t\t\t\tif (this._eventParents[id].listens(type, propagate)) { return true; }\r\n  \t\t\t}\r\n  \t\t}\r\n  \t\treturn false;\r\n  \t},\r\n\r\n  \t// @method once(…): this\r\n  \t// Behaves as [`on(…)`](#evented-on), except the listener will only get fired once and then removed.\r\n  \tonce: function (types, fn, context) {\r\n\r\n  \t\tif (typeof types === 'object') {\r\n  \t\t\tfor (var type in types) {\r\n  \t\t\t\tthis.once(type, types[type], fn);\r\n  \t\t\t}\r\n  \t\t\treturn this;\r\n  \t\t}\r\n\r\n  \t\tvar handler = bind(function () {\r\n  \t\t\tthis\r\n  \t\t\t    .off(types, fn, context)\r\n  \t\t\t    .off(types, handler, context);\r\n  \t\t}, this);\r\n\r\n  \t\t// add a listener that's executed once and removed after that\r\n  \t\treturn this\r\n  \t\t    .on(types, fn, context)\r\n  \t\t    .on(types, handler, context);\r\n  \t},\r\n\r\n  \t// @method addEventParent(obj: Evented): this\r\n  \t// Adds an event parent - an `Evented` that will receive propagated events\r\n  \taddEventParent: function (obj) {\r\n  \t\tthis._eventParents = this._eventParents || {};\r\n  \t\tthis._eventParents[stamp(obj)] = obj;\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method removeEventParent(obj: Evented): this\r\n  \t// Removes an event parent, so it will stop receiving propagated events\r\n  \tremoveEventParent: function (obj) {\r\n  \t\tif (this._eventParents) {\r\n  \t\t\tdelete this._eventParents[stamp(obj)];\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_propagateEvent: function (e) {\r\n  \t\tfor (var id in this._eventParents) {\r\n  \t\t\tthis._eventParents[id].fire(e.type, extend({\r\n  \t\t\t\tlayer: e.target,\r\n  \t\t\t\tpropagatedFrom: e.target\r\n  \t\t\t}, e), true);\r\n  \t\t}\r\n  \t}\r\n  };\r\n\r\n  // aliases; we should ditch those eventually\r\n\r\n  // @method addEventListener(…): this\r\n  // Alias to [`on(…)`](#evented-on)\r\n  Events.addEventListener = Events.on;\r\n\r\n  // @method removeEventListener(…): this\r\n  // Alias to [`off(…)`](#evented-off)\r\n\r\n  // @method clearAllEventListeners(…): this\r\n  // Alias to [`off()`](#evented-off)\r\n  Events.removeEventListener = Events.clearAllEventListeners = Events.off;\r\n\r\n  // @method addOneTimeEventListener(…): this\r\n  // Alias to [`once(…)`](#evented-once)\r\n  Events.addOneTimeEventListener = Events.once;\r\n\r\n  // @method fireEvent(…): this\r\n  // Alias to [`fire(…)`](#evented-fire)\r\n  Events.fireEvent = Events.fire;\r\n\r\n  // @method hasEventListeners(…): Boolean\r\n  // Alias to [`listens(…)`](#evented-listens)\r\n  Events.hasEventListeners = Events.listens;\r\n\r\n  var Evented = Class.extend(Events);\n\n  /*\r\n   * @class Point\r\n   * @aka L.Point\r\n   *\r\n   * Represents a point with `x` and `y` coordinates in pixels.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var point = L.point(200, 300);\r\n   * ```\r\n   *\r\n   * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:\r\n   *\r\n   * ```js\r\n   * map.panBy([200, 300]);\r\n   * map.panBy(L.point(200, 300));\r\n   * ```\r\n   *\r\n   * Note that `Point` does not inherit from Leaflet's `Class` object,\r\n   * which means new classes can't inherit from it, and new methods\r\n   * can't be added to it with the `include` function.\r\n   */\r\n\r\n  function Point(x, y, round) {\r\n  \t// @property x: Number; The `x` coordinate of the point\r\n  \tthis.x = (round ? Math.round(x) : x);\r\n  \t// @property y: Number; The `y` coordinate of the point\r\n  \tthis.y = (round ? Math.round(y) : y);\r\n  }\r\n\r\n  var trunc = Math.trunc || function (v) {\r\n  \treturn v > 0 ? Math.floor(v) : Math.ceil(v);\r\n  };\r\n\r\n  Point.prototype = {\r\n\r\n  \t// @method clone(): Point\r\n  \t// Returns a copy of the current point.\r\n  \tclone: function () {\r\n  \t\treturn new Point(this.x, this.y);\r\n  \t},\r\n\r\n  \t// @method add(otherPoint: Point): Point\r\n  \t// Returns the result of addition of the current and the given points.\r\n  \tadd: function (point) {\r\n  \t\t// non-destructive, returns a new point\r\n  \t\treturn this.clone()._add(toPoint(point));\r\n  \t},\r\n\r\n  \t_add: function (point) {\r\n  \t\t// destructive, used directly for performance in situations where it's safe to modify existing point\r\n  \t\tthis.x += point.x;\r\n  \t\tthis.y += point.y;\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method subtract(otherPoint: Point): Point\r\n  \t// Returns the result of subtraction of the given point from the current.\r\n  \tsubtract: function (point) {\r\n  \t\treturn this.clone()._subtract(toPoint(point));\r\n  \t},\r\n\r\n  \t_subtract: function (point) {\r\n  \t\tthis.x -= point.x;\r\n  \t\tthis.y -= point.y;\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method divideBy(num: Number): Point\r\n  \t// Returns the result of division of the current point by the given number.\r\n  \tdivideBy: function (num) {\r\n  \t\treturn this.clone()._divideBy(num);\r\n  \t},\r\n\r\n  \t_divideBy: function (num) {\r\n  \t\tthis.x /= num;\r\n  \t\tthis.y /= num;\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method multiplyBy(num: Number): Point\r\n  \t// Returns the result of multiplication of the current point by the given number.\r\n  \tmultiplyBy: function (num) {\r\n  \t\treturn this.clone()._multiplyBy(num);\r\n  \t},\r\n\r\n  \t_multiplyBy: function (num) {\r\n  \t\tthis.x *= num;\r\n  \t\tthis.y *= num;\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method scaleBy(scale: Point): Point\r\n  \t// Multiply each coordinate of the current point by each coordinate of\r\n  \t// `scale`. In linear algebra terms, multiply the point by the\r\n  \t// [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)\r\n  \t// defined by `scale`.\r\n  \tscaleBy: function (point) {\r\n  \t\treturn new Point(this.x * point.x, this.y * point.y);\r\n  \t},\r\n\r\n  \t// @method unscaleBy(scale: Point): Point\r\n  \t// Inverse of `scaleBy`. Divide each coordinate of the current point by\r\n  \t// each coordinate of `scale`.\r\n  \tunscaleBy: function (point) {\r\n  \t\treturn new Point(this.x / point.x, this.y / point.y);\r\n  \t},\r\n\r\n  \t// @method round(): Point\r\n  \t// Returns a copy of the current point with rounded coordinates.\r\n  \tround: function () {\r\n  \t\treturn this.clone()._round();\r\n  \t},\r\n\r\n  \t_round: function () {\r\n  \t\tthis.x = Math.round(this.x);\r\n  \t\tthis.y = Math.round(this.y);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method floor(): Point\r\n  \t// Returns a copy of the current point with floored coordinates (rounded down).\r\n  \tfloor: function () {\r\n  \t\treturn this.clone()._floor();\r\n  \t},\r\n\r\n  \t_floor: function () {\r\n  \t\tthis.x = Math.floor(this.x);\r\n  \t\tthis.y = Math.floor(this.y);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method ceil(): Point\r\n  \t// Returns a copy of the current point with ceiled coordinates (rounded up).\r\n  \tceil: function () {\r\n  \t\treturn this.clone()._ceil();\r\n  \t},\r\n\r\n  \t_ceil: function () {\r\n  \t\tthis.x = Math.ceil(this.x);\r\n  \t\tthis.y = Math.ceil(this.y);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method trunc(): Point\r\n  \t// Returns a copy of the current point with truncated coordinates (rounded towards zero).\r\n  \ttrunc: function () {\r\n  \t\treturn this.clone()._trunc();\r\n  \t},\r\n\r\n  \t_trunc: function () {\r\n  \t\tthis.x = trunc(this.x);\r\n  \t\tthis.y = trunc(this.y);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method distanceTo(otherPoint: Point): Number\r\n  \t// Returns the cartesian distance between the current and the given points.\r\n  \tdistanceTo: function (point) {\r\n  \t\tpoint = toPoint(point);\r\n\r\n  \t\tvar x = point.x - this.x,\r\n  \t\t    y = point.y - this.y;\r\n\r\n  \t\treturn Math.sqrt(x * x + y * y);\r\n  \t},\r\n\r\n  \t// @method equals(otherPoint: Point): Boolean\r\n  \t// Returns `true` if the given point has the same coordinates.\r\n  \tequals: function (point) {\r\n  \t\tpoint = toPoint(point);\r\n\r\n  \t\treturn point.x === this.x &&\r\n  \t\t       point.y === this.y;\r\n  \t},\r\n\r\n  \t// @method contains(otherPoint: Point): Boolean\r\n  \t// Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).\r\n  \tcontains: function (point) {\r\n  \t\tpoint = toPoint(point);\r\n\r\n  \t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\r\n  \t\t       Math.abs(point.y) <= Math.abs(this.y);\r\n  \t},\r\n\r\n  \t// @method toString(): String\r\n  \t// Returns a string representation of the point for debugging purposes.\r\n  \ttoString: function () {\r\n  \t\treturn 'Point(' +\r\n  \t\t        formatNum(this.x) + ', ' +\r\n  \t\t        formatNum(this.y) + ')';\r\n  \t}\r\n  };\r\n\r\n  // @factory L.point(x: Number, y: Number, round?: Boolean)\r\n  // Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.\r\n\r\n  // @alternative\r\n  // @factory L.point(coords: Number[])\r\n  // Expects an array of the form `[x, y]` instead.\r\n\r\n  // @alternative\r\n  // @factory L.point(coords: Object)\r\n  // Expects a plain object of the form `{x: Number, y: Number}` instead.\r\n  function toPoint(x, y, round) {\r\n  \tif (x instanceof Point) {\r\n  \t\treturn x;\r\n  \t}\r\n  \tif (isArray(x)) {\r\n  \t\treturn new Point(x[0], x[1]);\r\n  \t}\r\n  \tif (x === undefined || x === null) {\r\n  \t\treturn x;\r\n  \t}\r\n  \tif (typeof x === 'object' && 'x' in x && 'y' in x) {\r\n  \t\treturn new Point(x.x, x.y);\r\n  \t}\r\n  \treturn new Point(x, y, round);\r\n  }\n\n  /*\r\n   * @class Bounds\r\n   * @aka L.Bounds\r\n   *\r\n   * Represents a rectangular area in pixel coordinates.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var p1 = L.point(10, 10),\r\n   * p2 = L.point(40, 60),\r\n   * bounds = L.bounds(p1, p2);\r\n   * ```\r\n   *\r\n   * All Leaflet methods that accept `Bounds` objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:\r\n   *\r\n   * ```js\r\n   * otherBounds.intersects([[10, 10], [40, 60]]);\r\n   * ```\r\n   *\r\n   * Note that `Bounds` does not inherit from Leaflet's `Class` object,\r\n   * which means new classes can't inherit from it, and new methods\r\n   * can't be added to it with the `include` function.\r\n   */\r\n\r\n  function Bounds(a, b) {\r\n  \tif (!a) { return; }\r\n\r\n  \tvar points = b ? [a, b] : a;\r\n\r\n  \tfor (var i = 0, len = points.length; i < len; i++) {\r\n  \t\tthis.extend(points[i]);\r\n  \t}\r\n  }\r\n\r\n  Bounds.prototype = {\r\n  \t// @method extend(point: Point): this\r\n  \t// Extends the bounds to contain the given point.\r\n  \textend: function (point) { // (Point)\r\n  \t\tpoint = toPoint(point);\r\n\r\n  \t\t// @property min: Point\r\n  \t\t// The top left corner of the rectangle.\r\n  \t\t// @property max: Point\r\n  \t\t// The bottom right corner of the rectangle.\r\n  \t\tif (!this.min && !this.max) {\r\n  \t\t\tthis.min = point.clone();\r\n  \t\t\tthis.max = point.clone();\r\n  \t\t} else {\r\n  \t\t\tthis.min.x = Math.min(point.x, this.min.x);\r\n  \t\t\tthis.max.x = Math.max(point.x, this.max.x);\r\n  \t\t\tthis.min.y = Math.min(point.y, this.min.y);\r\n  \t\t\tthis.max.y = Math.max(point.y, this.max.y);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method getCenter(round?: Boolean): Point\r\n  \t// Returns the center point of the bounds.\r\n  \tgetCenter: function (round) {\r\n  \t\treturn new Point(\r\n  \t\t        (this.min.x + this.max.x) / 2,\r\n  \t\t        (this.min.y + this.max.y) / 2, round);\r\n  \t},\r\n\r\n  \t// @method getBottomLeft(): Point\r\n  \t// Returns the bottom-left point of the bounds.\r\n  \tgetBottomLeft: function () {\r\n  \t\treturn new Point(this.min.x, this.max.y);\r\n  \t},\r\n\r\n  \t// @method getTopRight(): Point\r\n  \t// Returns the top-right point of the bounds.\r\n  \tgetTopRight: function () { // -> Point\r\n  \t\treturn new Point(this.max.x, this.min.y);\r\n  \t},\r\n\r\n  \t// @method getTopLeft(): Point\r\n  \t// Returns the top-left point of the bounds (i.e. [`this.min`](#bounds-min)).\r\n  \tgetTopLeft: function () {\r\n  \t\treturn this.min; // left, top\r\n  \t},\r\n\r\n  \t// @method getBottomRight(): Point\r\n  \t// Returns the bottom-right point of the bounds (i.e. [`this.max`](#bounds-max)).\r\n  \tgetBottomRight: function () {\r\n  \t\treturn this.max; // right, bottom\r\n  \t},\r\n\r\n  \t// @method getSize(): Point\r\n  \t// Returns the size of the given bounds\r\n  \tgetSize: function () {\r\n  \t\treturn this.max.subtract(this.min);\r\n  \t},\r\n\r\n  \t// @method contains(otherBounds: Bounds): Boolean\r\n  \t// Returns `true` if the rectangle contains the given one.\r\n  \t// @alternative\r\n  \t// @method contains(point: Point): Boolean\r\n  \t// Returns `true` if the rectangle contains the given point.\r\n  \tcontains: function (obj) {\r\n  \t\tvar min, max;\r\n\r\n  \t\tif (typeof obj[0] === 'number' || obj instanceof Point) {\r\n  \t\t\tobj = toPoint(obj);\r\n  \t\t} else {\r\n  \t\t\tobj = toBounds(obj);\r\n  \t\t}\r\n\r\n  \t\tif (obj instanceof Bounds) {\r\n  \t\t\tmin = obj.min;\r\n  \t\t\tmax = obj.max;\r\n  \t\t} else {\r\n  \t\t\tmin = max = obj;\r\n  \t\t}\r\n\r\n  \t\treturn (min.x >= this.min.x) &&\r\n  \t\t       (max.x <= this.max.x) &&\r\n  \t\t       (min.y >= this.min.y) &&\r\n  \t\t       (max.y <= this.max.y);\r\n  \t},\r\n\r\n  \t// @method intersects(otherBounds: Bounds): Boolean\r\n  \t// Returns `true` if the rectangle intersects the given bounds. Two bounds\r\n  \t// intersect if they have at least one point in common.\r\n  \tintersects: function (bounds) { // (Bounds) -> Boolean\r\n  \t\tbounds = toBounds(bounds);\r\n\r\n  \t\tvar min = this.min,\r\n  \t\t    max = this.max,\r\n  \t\t    min2 = bounds.min,\r\n  \t\t    max2 = bounds.max,\r\n  \t\t    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),\r\n  \t\t    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);\r\n\r\n  \t\treturn xIntersects && yIntersects;\r\n  \t},\r\n\r\n  \t// @method overlaps(otherBounds: Bounds): Boolean\r\n  \t// Returns `true` if the rectangle overlaps the given bounds. Two bounds\r\n  \t// overlap if their intersection is an area.\r\n  \toverlaps: function (bounds) { // (Bounds) -> Boolean\r\n  \t\tbounds = toBounds(bounds);\r\n\r\n  \t\tvar min = this.min,\r\n  \t\t    max = this.max,\r\n  \t\t    min2 = bounds.min,\r\n  \t\t    max2 = bounds.max,\r\n  \t\t    xOverlaps = (max2.x > min.x) && (min2.x < max.x),\r\n  \t\t    yOverlaps = (max2.y > min.y) && (min2.y < max.y);\r\n\r\n  \t\treturn xOverlaps && yOverlaps;\r\n  \t},\r\n\r\n  \tisValid: function () {\r\n  \t\treturn !!(this.min && this.max);\r\n  \t}\r\n  };\r\n\r\n\r\n  // @factory L.bounds(corner1: Point, corner2: Point)\r\n  // Creates a Bounds object from two corners coordinate pairs.\r\n  // @alternative\r\n  // @factory L.bounds(points: Point[])\r\n  // Creates a Bounds object from the given array of points.\r\n  function toBounds(a, b) {\r\n  \tif (!a || a instanceof Bounds) {\r\n  \t\treturn a;\r\n  \t}\r\n  \treturn new Bounds(a, b);\r\n  }\n\n  /*\r\n   * @class LatLngBounds\r\n   * @aka L.LatLngBounds\r\n   *\r\n   * Represents a rectangular geographical area on a map.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var corner1 = L.latLng(40.712, -74.227),\r\n   * corner2 = L.latLng(40.774, -74.125),\r\n   * bounds = L.latLngBounds(corner1, corner2);\r\n   * ```\r\n   *\r\n   * All Leaflet methods that accept LatLngBounds objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:\r\n   *\r\n   * ```js\r\n   * map.fitBounds([\r\n   * \t[40.712, -74.227],\r\n   * \t[40.774, -74.125]\r\n   * ]);\r\n   * ```\r\n   *\r\n   * Caution: if the area crosses the antimeridian (often confused with the International Date Line), you must specify corners _outside_ the [-180, 180] degrees longitude range.\r\n   *\r\n   * Note that `LatLngBounds` does not inherit from Leaflet's `Class` object,\r\n   * which means new classes can't inherit from it, and new methods\r\n   * can't be added to it with the `include` function.\r\n   */\r\n\r\n  function LatLngBounds(corner1, corner2) { // (LatLng, LatLng) or (LatLng[])\r\n  \tif (!corner1) { return; }\r\n\r\n  \tvar latlngs = corner2 ? [corner1, corner2] : corner1;\r\n\r\n  \tfor (var i = 0, len = latlngs.length; i < len; i++) {\r\n  \t\tthis.extend(latlngs[i]);\r\n  \t}\r\n  }\r\n\r\n  LatLngBounds.prototype = {\r\n\r\n  \t// @method extend(latlng: LatLng): this\r\n  \t// Extend the bounds to contain the given point\r\n\r\n  \t// @alternative\r\n  \t// @method extend(otherBounds: LatLngBounds): this\r\n  \t// Extend the bounds to contain the given bounds\r\n  \textend: function (obj) {\r\n  \t\tvar sw = this._southWest,\r\n  \t\t    ne = this._northEast,\r\n  \t\t    sw2, ne2;\r\n\r\n  \t\tif (obj instanceof LatLng) {\r\n  \t\t\tsw2 = obj;\r\n  \t\t\tne2 = obj;\r\n\r\n  \t\t} else if (obj instanceof LatLngBounds) {\r\n  \t\t\tsw2 = obj._southWest;\r\n  \t\t\tne2 = obj._northEast;\r\n\r\n  \t\t\tif (!sw2 || !ne2) { return this; }\r\n\r\n  \t\t} else {\r\n  \t\t\treturn obj ? this.extend(toLatLng(obj) || toLatLngBounds(obj)) : this;\r\n  \t\t}\r\n\r\n  \t\tif (!sw && !ne) {\r\n  \t\t\tthis._southWest = new LatLng(sw2.lat, sw2.lng);\r\n  \t\t\tthis._northEast = new LatLng(ne2.lat, ne2.lng);\r\n  \t\t} else {\r\n  \t\t\tsw.lat = Math.min(sw2.lat, sw.lat);\r\n  \t\t\tsw.lng = Math.min(sw2.lng, sw.lng);\r\n  \t\t\tne.lat = Math.max(ne2.lat, ne.lat);\r\n  \t\t\tne.lng = Math.max(ne2.lng, ne.lng);\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method pad(bufferRatio: Number): LatLngBounds\r\n  \t// Returns bounds created by extending or retracting the current bounds by a given ratio in each direction.\r\n  \t// For example, a ratio of 0.5 extends the bounds by 50% in each direction.\r\n  \t// Negative values will retract the bounds.\r\n  \tpad: function (bufferRatio) {\r\n  \t\tvar sw = this._southWest,\r\n  \t\t    ne = this._northEast,\r\n  \t\t    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,\r\n  \t\t    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;\r\n\r\n  \t\treturn new LatLngBounds(\r\n  \t\t        new LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),\r\n  \t\t        new LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));\r\n  \t},\r\n\r\n  \t// @method getCenter(): LatLng\r\n  \t// Returns the center point of the bounds.\r\n  \tgetCenter: function () {\r\n  \t\treturn new LatLng(\r\n  \t\t        (this._southWest.lat + this._northEast.lat) / 2,\r\n  \t\t        (this._southWest.lng + this._northEast.lng) / 2);\r\n  \t},\r\n\r\n  \t// @method getSouthWest(): LatLng\r\n  \t// Returns the south-west point of the bounds.\r\n  \tgetSouthWest: function () {\r\n  \t\treturn this._southWest;\r\n  \t},\r\n\r\n  \t// @method getNorthEast(): LatLng\r\n  \t// Returns the north-east point of the bounds.\r\n  \tgetNorthEast: function () {\r\n  \t\treturn this._northEast;\r\n  \t},\r\n\r\n  \t// @method getNorthWest(): LatLng\r\n  \t// Returns the north-west point of the bounds.\r\n  \tgetNorthWest: function () {\r\n  \t\treturn new LatLng(this.getNorth(), this.getWest());\r\n  \t},\r\n\r\n  \t// @method getSouthEast(): LatLng\r\n  \t// Returns the south-east point of the bounds.\r\n  \tgetSouthEast: function () {\r\n  \t\treturn new LatLng(this.getSouth(), this.getEast());\r\n  \t},\r\n\r\n  \t// @method getWest(): Number\r\n  \t// Returns the west longitude of the bounds\r\n  \tgetWest: function () {\r\n  \t\treturn this._southWest.lng;\r\n  \t},\r\n\r\n  \t// @method getSouth(): Number\r\n  \t// Returns the south latitude of the bounds\r\n  \tgetSouth: function () {\r\n  \t\treturn this._southWest.lat;\r\n  \t},\r\n\r\n  \t// @method getEast(): Number\r\n  \t// Returns the east longitude of the bounds\r\n  \tgetEast: function () {\r\n  \t\treturn this._northEast.lng;\r\n  \t},\r\n\r\n  \t// @method getNorth(): Number\r\n  \t// Returns the north latitude of the bounds\r\n  \tgetNorth: function () {\r\n  \t\treturn this._northEast.lat;\r\n  \t},\r\n\r\n  \t// @method contains(otherBounds: LatLngBounds): Boolean\r\n  \t// Returns `true` if the rectangle contains the given one.\r\n\r\n  \t// @alternative\r\n  \t// @method contains (latlng: LatLng): Boolean\r\n  \t// Returns `true` if the rectangle contains the given point.\r\n  \tcontains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean\r\n  \t\tif (typeof obj[0] === 'number' || obj instanceof LatLng || 'lat' in obj) {\r\n  \t\t\tobj = toLatLng(obj);\r\n  \t\t} else {\r\n  \t\t\tobj = toLatLngBounds(obj);\r\n  \t\t}\r\n\r\n  \t\tvar sw = this._southWest,\r\n  \t\t    ne = this._northEast,\r\n  \t\t    sw2, ne2;\r\n\r\n  \t\tif (obj instanceof LatLngBounds) {\r\n  \t\t\tsw2 = obj.getSouthWest();\r\n  \t\t\tne2 = obj.getNorthEast();\r\n  \t\t} else {\r\n  \t\t\tsw2 = ne2 = obj;\r\n  \t\t}\r\n\r\n  \t\treturn (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&\r\n  \t\t       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);\r\n  \t},\r\n\r\n  \t// @method intersects(otherBounds: LatLngBounds): Boolean\r\n  \t// Returns `true` if the rectangle intersects the given bounds. Two bounds intersect if they have at least one point in common.\r\n  \tintersects: function (bounds) {\r\n  \t\tbounds = toLatLngBounds(bounds);\r\n\r\n  \t\tvar sw = this._southWest,\r\n  \t\t    ne = this._northEast,\r\n  \t\t    sw2 = bounds.getSouthWest(),\r\n  \t\t    ne2 = bounds.getNorthEast(),\r\n\r\n  \t\t    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),\r\n  \t\t    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);\r\n\r\n  \t\treturn latIntersects && lngIntersects;\r\n  \t},\r\n\r\n  \t// @method overlaps(otherBounds: LatLngBounds): Boolean\r\n  \t// Returns `true` if the rectangle overlaps the given bounds. Two bounds overlap if their intersection is an area.\r\n  \toverlaps: function (bounds) {\r\n  \t\tbounds = toLatLngBounds(bounds);\r\n\r\n  \t\tvar sw = this._southWest,\r\n  \t\t    ne = this._northEast,\r\n  \t\t    sw2 = bounds.getSouthWest(),\r\n  \t\t    ne2 = bounds.getNorthEast(),\r\n\r\n  \t\t    latOverlaps = (ne2.lat > sw.lat) && (sw2.lat < ne.lat),\r\n  \t\t    lngOverlaps = (ne2.lng > sw.lng) && (sw2.lng < ne.lng);\r\n\r\n  \t\treturn latOverlaps && lngOverlaps;\r\n  \t},\r\n\r\n  \t// @method toBBoxString(): String\r\n  \t// Returns a string with bounding box coordinates in a 'southwest_lng,southwest_lat,northeast_lng,northeast_lat' format. Useful for sending requests to web services that return geo data.\r\n  \ttoBBoxString: function () {\r\n  \t\treturn [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');\r\n  \t},\r\n\r\n  \t// @method equals(otherBounds: LatLngBounds, maxMargin?: Number): Boolean\r\n  \t// Returns `true` if the rectangle is equivalent (within a small margin of error) to the given bounds. The margin of error can be overridden by setting `maxMargin` to a small number.\r\n  \tequals: function (bounds, maxMargin) {\r\n  \t\tif (!bounds) { return false; }\r\n\r\n  \t\tbounds = toLatLngBounds(bounds);\r\n\r\n  \t\treturn this._southWest.equals(bounds.getSouthWest(), maxMargin) &&\r\n  \t\t       this._northEast.equals(bounds.getNorthEast(), maxMargin);\r\n  \t},\r\n\r\n  \t// @method isValid(): Boolean\r\n  \t// Returns `true` if the bounds are properly initialized.\r\n  \tisValid: function () {\r\n  \t\treturn !!(this._southWest && this._northEast);\r\n  \t}\r\n  };\r\n\r\n  // TODO International date line?\r\n\r\n  // @factory L.latLngBounds(corner1: LatLng, corner2: LatLng)\r\n  // Creates a `LatLngBounds` object by defining two diagonally opposite corners of the rectangle.\r\n\r\n  // @alternative\r\n  // @factory L.latLngBounds(latlngs: LatLng[])\r\n  // Creates a `LatLngBounds` object defined by the geographical points it contains. Very useful for zooming the map to fit a particular set of locations with [`fitBounds`](#map-fitbounds).\r\n  function toLatLngBounds(a, b) {\r\n  \tif (a instanceof LatLngBounds) {\r\n  \t\treturn a;\r\n  \t}\r\n  \treturn new LatLngBounds(a, b);\r\n  }\n\n  /* @class LatLng\r\n   * @aka L.LatLng\r\n   *\r\n   * Represents a geographical point with a certain latitude and longitude.\r\n   *\r\n   * @example\r\n   *\r\n   * ```\r\n   * var latlng = L.latLng(50.5, 30.5);\r\n   * ```\r\n   *\r\n   * All Leaflet methods that accept LatLng objects also accept them in a simple Array form and simple object form (unless noted otherwise), so these lines are equivalent:\r\n   *\r\n   * ```\r\n   * map.panTo([50, 30]);\r\n   * map.panTo({lon: 30, lat: 50});\r\n   * map.panTo({lat: 50, lng: 30});\r\n   * map.panTo(L.latLng(50, 30));\r\n   * ```\r\n   *\r\n   * Note that `LatLng` does not inherit from Leaflet's `Class` object,\r\n   * which means new classes can't inherit from it, and new methods\r\n   * can't be added to it with the `include` function.\r\n   */\r\n\r\n  function LatLng(lat, lng, alt) {\r\n  \tif (isNaN(lat) || isNaN(lng)) {\r\n  \t\tthrow new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');\r\n  \t}\r\n\r\n  \t// @property lat: Number\r\n  \t// Latitude in degrees\r\n  \tthis.lat = +lat;\r\n\r\n  \t// @property lng: Number\r\n  \t// Longitude in degrees\r\n  \tthis.lng = +lng;\r\n\r\n  \t// @property alt: Number\r\n  \t// Altitude in meters (optional)\r\n  \tif (alt !== undefined) {\r\n  \t\tthis.alt = +alt;\r\n  \t}\r\n  }\r\n\r\n  LatLng.prototype = {\r\n  \t// @method equals(otherLatLng: LatLng, maxMargin?: Number): Boolean\r\n  \t// Returns `true` if the given `LatLng` point is at the same position (within a small margin of error). The margin of error can be overridden by setting `maxMargin` to a small number.\r\n  \tequals: function (obj, maxMargin) {\r\n  \t\tif (!obj) { return false; }\r\n\r\n  \t\tobj = toLatLng(obj);\r\n\r\n  \t\tvar margin = Math.max(\r\n  \t\t        Math.abs(this.lat - obj.lat),\r\n  \t\t        Math.abs(this.lng - obj.lng));\r\n\r\n  \t\treturn margin <= (maxMargin === undefined ? 1.0E-9 : maxMargin);\r\n  \t},\r\n\r\n  \t// @method toString(): String\r\n  \t// Returns a string representation of the point (for debugging purposes).\r\n  \ttoString: function (precision) {\r\n  \t\treturn 'LatLng(' +\r\n  \t\t        formatNum(this.lat, precision) + ', ' +\r\n  \t\t        formatNum(this.lng, precision) + ')';\r\n  \t},\r\n\r\n  \t// @method distanceTo(otherLatLng: LatLng): Number\r\n  \t// Returns the distance (in meters) to the given `LatLng` calculated using the [Spherical Law of Cosines](https://en.wikipedia.org/wiki/Spherical_law_of_cosines).\r\n  \tdistanceTo: function (other) {\r\n  \t\treturn Earth.distance(this, toLatLng(other));\r\n  \t},\r\n\r\n  \t// @method wrap(): LatLng\r\n  \t// Returns a new `LatLng` object with the longitude wrapped so it's always between -180 and +180 degrees.\r\n  \twrap: function () {\r\n  \t\treturn Earth.wrapLatLng(this);\r\n  \t},\r\n\r\n  \t// @method toBounds(sizeInMeters: Number): LatLngBounds\r\n  \t// Returns a new `LatLngBounds` object in which each boundary is `sizeInMeters/2` meters apart from the `LatLng`.\r\n  \ttoBounds: function (sizeInMeters) {\r\n  \t\tvar latAccuracy = 180 * sizeInMeters / 40075017,\r\n  \t\t    lngAccuracy = latAccuracy / Math.cos((Math.PI / 180) * this.lat);\r\n\r\n  \t\treturn toLatLngBounds(\r\n  \t\t        [this.lat - latAccuracy, this.lng - lngAccuracy],\r\n  \t\t        [this.lat + latAccuracy, this.lng + lngAccuracy]);\r\n  \t},\r\n\r\n  \tclone: function () {\r\n  \t\treturn new LatLng(this.lat, this.lng, this.alt);\r\n  \t}\r\n  };\r\n\r\n\r\n\r\n  // @factory L.latLng(latitude: Number, longitude: Number, altitude?: Number): LatLng\r\n  // Creates an object representing a geographical point with the given latitude and longitude (and optionally altitude).\r\n\r\n  // @alternative\r\n  // @factory L.latLng(coords: Array): LatLng\r\n  // Expects an array of the form `[Number, Number]` or `[Number, Number, Number]` instead.\r\n\r\n  // @alternative\r\n  // @factory L.latLng(coords: Object): LatLng\r\n  // Expects an plain object of the form `{lat: Number, lng: Number}` or `{lat: Number, lng: Number, alt: Number}` instead.\r\n\r\n  function toLatLng(a, b, c) {\r\n  \tif (a instanceof LatLng) {\r\n  \t\treturn a;\r\n  \t}\r\n  \tif (isArray(a) && typeof a[0] !== 'object') {\r\n  \t\tif (a.length === 3) {\r\n  \t\t\treturn new LatLng(a[0], a[1], a[2]);\r\n  \t\t}\r\n  \t\tif (a.length === 2) {\r\n  \t\t\treturn new LatLng(a[0], a[1]);\r\n  \t\t}\r\n  \t\treturn null;\r\n  \t}\r\n  \tif (a === undefined || a === null) {\r\n  \t\treturn a;\r\n  \t}\r\n  \tif (typeof a === 'object' && 'lat' in a) {\r\n  \t\treturn new LatLng(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);\r\n  \t}\r\n  \tif (b === undefined) {\r\n  \t\treturn null;\r\n  \t}\r\n  \treturn new LatLng(a, b, c);\r\n  }\n\n  /*\r\n   * @namespace CRS\r\n   * @crs L.CRS.Base\r\n   * Object that defines coordinate reference systems for projecting\r\n   * geographical points into pixel (screen) coordinates and back (and to\r\n   * coordinates in other units for [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services). See\r\n   * [spatial reference system](http://en.wikipedia.org/wiki/Coordinate_reference_system).\r\n   *\r\n   * Leaflet defines the most usual CRSs by default. If you want to use a\r\n   * CRS not defined by default, take a look at the\r\n   * [Proj4Leaflet](https://github.com/kartena/Proj4Leaflet) plugin.\r\n   *\r\n   * Note that the CRS instances do not inherit from Leaflet's `Class` object,\r\n   * and can't be instantiated. Also, new classes can't inherit from them,\r\n   * and methods can't be added to them with the `include` function.\r\n   */\r\n\r\n  var CRS = {\r\n  \t// @method latLngToPoint(latlng: LatLng, zoom: Number): Point\r\n  \t// Projects geographical coordinates into pixel coordinates for a given zoom.\r\n  \tlatLngToPoint: function (latlng, zoom) {\r\n  \t\tvar projectedPoint = this.projection.project(latlng),\r\n  \t\t    scale = this.scale(zoom);\r\n\r\n  \t\treturn this.transformation._transform(projectedPoint, scale);\r\n  \t},\r\n\r\n  \t// @method pointToLatLng(point: Point, zoom: Number): LatLng\r\n  \t// The inverse of `latLngToPoint`. Projects pixel coordinates on a given\r\n  \t// zoom into geographical coordinates.\r\n  \tpointToLatLng: function (point, zoom) {\r\n  \t\tvar scale = this.scale(zoom),\r\n  \t\t    untransformedPoint = this.transformation.untransform(point, scale);\r\n\r\n  \t\treturn this.projection.unproject(untransformedPoint);\r\n  \t},\r\n\r\n  \t// @method project(latlng: LatLng): Point\r\n  \t// Projects geographical coordinates into coordinates in units accepted for\r\n  \t// this CRS (e.g. meters for EPSG:3857, for passing it to WMS services).\r\n  \tproject: function (latlng) {\r\n  \t\treturn this.projection.project(latlng);\r\n  \t},\r\n\r\n  \t// @method unproject(point: Point): LatLng\r\n  \t// Given a projected coordinate returns the corresponding LatLng.\r\n  \t// The inverse of `project`.\r\n  \tunproject: function (point) {\r\n  \t\treturn this.projection.unproject(point);\r\n  \t},\r\n\r\n  \t// @method scale(zoom: Number): Number\r\n  \t// Returns the scale used when transforming projected coordinates into\r\n  \t// pixel coordinates for a particular zoom. For example, it returns\r\n  \t// `256 * 2^zoom` for Mercator-based CRS.\r\n  \tscale: function (zoom) {\r\n  \t\treturn 256 * Math.pow(2, zoom);\r\n  \t},\r\n\r\n  \t// @method zoom(scale: Number): Number\r\n  \t// Inverse of `scale()`, returns the zoom level corresponding to a scale\r\n  \t// factor of `scale`.\r\n  \tzoom: function (scale) {\r\n  \t\treturn Math.log(scale / 256) / Math.LN2;\r\n  \t},\r\n\r\n  \t// @method getProjectedBounds(zoom: Number): Bounds\r\n  \t// Returns the projection's bounds scaled and transformed for the provided `zoom`.\r\n  \tgetProjectedBounds: function (zoom) {\r\n  \t\tif (this.infinite) { return null; }\r\n\r\n  \t\tvar b = this.projection.bounds,\r\n  \t\t    s = this.scale(zoom),\r\n  \t\t    min = this.transformation.transform(b.min, s),\r\n  \t\t    max = this.transformation.transform(b.max, s);\r\n\r\n  \t\treturn new Bounds(min, max);\r\n  \t},\r\n\r\n  \t// @method distance(latlng1: LatLng, latlng2: LatLng): Number\r\n  \t// Returns the distance between two geographical coordinates.\r\n\r\n  \t// @property code: String\r\n  \t// Standard code name of the CRS passed into WMS services (e.g. `'EPSG:3857'`)\r\n  \t//\r\n  \t// @property wrapLng: Number[]\r\n  \t// An array of two numbers defining whether the longitude (horizontal) coordinate\r\n  \t// axis wraps around a given range and how. Defaults to `[-180, 180]` in most\r\n  \t// geographical CRSs. If `undefined`, the longitude axis does not wrap around.\r\n  \t//\r\n  \t// @property wrapLat: Number[]\r\n  \t// Like `wrapLng`, but for the latitude (vertical) axis.\r\n\r\n  \t// wrapLng: [min, max],\r\n  \t// wrapLat: [min, max],\r\n\r\n  \t// @property infinite: Boolean\r\n  \t// If true, the coordinate space will be unbounded (infinite in both axes)\r\n  \tinfinite: false,\r\n\r\n  \t// @method wrapLatLng(latlng: LatLng): LatLng\r\n  \t// Returns a `LatLng` where lat and lng has been wrapped according to the\r\n  \t// CRS's `wrapLat` and `wrapLng` properties, if they are outside the CRS's bounds.\r\n  \twrapLatLng: function (latlng) {\r\n  \t\tvar lng = this.wrapLng ? wrapNum(latlng.lng, this.wrapLng, true) : latlng.lng,\r\n  \t\t    lat = this.wrapLat ? wrapNum(latlng.lat, this.wrapLat, true) : latlng.lat,\r\n  \t\t    alt = latlng.alt;\r\n\r\n  \t\treturn new LatLng(lat, lng, alt);\r\n  \t},\r\n\r\n  \t// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds\r\n  \t// Returns a `LatLngBounds` with the same size as the given one, ensuring\r\n  \t// that its center is within the CRS's bounds.\r\n  \t// Only accepts actual `L.LatLngBounds` instances, not arrays.\r\n  \twrapLatLngBounds: function (bounds) {\r\n  \t\tvar center = bounds.getCenter(),\r\n  \t\t    newCenter = this.wrapLatLng(center),\r\n  \t\t    latShift = center.lat - newCenter.lat,\r\n  \t\t    lngShift = center.lng - newCenter.lng;\r\n\r\n  \t\tif (latShift === 0 && lngShift === 0) {\r\n  \t\t\treturn bounds;\r\n  \t\t}\r\n\r\n  \t\tvar sw = bounds.getSouthWest(),\r\n  \t\t    ne = bounds.getNorthEast(),\r\n  \t\t    newSw = new LatLng(sw.lat - latShift, sw.lng - lngShift),\r\n  \t\t    newNe = new LatLng(ne.lat - latShift, ne.lng - lngShift);\r\n\r\n  \t\treturn new LatLngBounds(newSw, newNe);\r\n  \t}\r\n  };\n\n  /*\n   * @namespace CRS\n   * @crs L.CRS.Earth\n   *\n   * Serves as the base for CRS that are global such that they cover the earth.\n   * Can only be used as the base for other CRS and cannot be used directly,\n   * since it does not have a `code`, `projection` or `transformation`. `distance()` returns\n   * meters.\n   */\n\n  var Earth = extend({}, CRS, {\n  \twrapLng: [-180, 180],\n\n  \t// Mean Earth Radius, as recommended for use by\n  \t// the International Union of Geodesy and Geophysics,\n  \t// see http://rosettacode.org/wiki/Haversine_formula\n  \tR: 6371000,\n\n  \t// distance between two geographical points using spherical law of cosines approximation\n  \tdistance: function (latlng1, latlng2) {\n  \t\tvar rad = Math.PI / 180,\n  \t\t    lat1 = latlng1.lat * rad,\n  \t\t    lat2 = latlng2.lat * rad,\n  \t\t    sinDLat = Math.sin((latlng2.lat - latlng1.lat) * rad / 2),\n  \t\t    sinDLon = Math.sin((latlng2.lng - latlng1.lng) * rad / 2),\n  \t\t    a = sinDLat * sinDLat + Math.cos(lat1) * Math.cos(lat2) * sinDLon * sinDLon,\n  \t\t    c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  \t\treturn this.R * c;\n  \t}\n  });\n\n  /*\r\n   * @namespace Projection\r\n   * @projection L.Projection.SphericalMercator\r\n   *\r\n   * Spherical Mercator projection — the most common projection for online maps,\r\n   * used by almost all free and commercial tile providers. Assumes that Earth is\r\n   * a sphere. Used by the `EPSG:3857` CRS.\r\n   */\r\n\r\n  var earthRadius = 6378137;\r\n\r\n  var SphericalMercator = {\r\n\r\n  \tR: earthRadius,\r\n  \tMAX_LATITUDE: 85.0511287798,\r\n\r\n  \tproject: function (latlng) {\r\n  \t\tvar d = Math.PI / 180,\r\n  \t\t    max = this.MAX_LATITUDE,\r\n  \t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\r\n  \t\t    sin = Math.sin(lat * d);\r\n\r\n  \t\treturn new Point(\r\n  \t\t\tthis.R * latlng.lng * d,\r\n  \t\t\tthis.R * Math.log((1 + sin) / (1 - sin)) / 2);\r\n  \t},\r\n\r\n  \tunproject: function (point) {\r\n  \t\tvar d = 180 / Math.PI;\r\n\r\n  \t\treturn new LatLng(\r\n  \t\t\t(2 * Math.atan(Math.exp(point.y / this.R)) - (Math.PI / 2)) * d,\r\n  \t\t\tpoint.x * d / this.R);\r\n  \t},\r\n\r\n  \tbounds: (function () {\r\n  \t\tvar d = earthRadius * Math.PI;\r\n  \t\treturn new Bounds([-d, -d], [d, d]);\r\n  \t})()\r\n  };\n\n  /*\r\n   * @class Transformation\r\n   * @aka L.Transformation\r\n   *\r\n   * Represents an affine transformation: a set of coefficients `a`, `b`, `c`, `d`\r\n   * for transforming a point of a form `(x, y)` into `(a*x + b, c*y + d)` and doing\r\n   * the reverse. Used by Leaflet in its projections code.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var transformation = L.transformation(2, 5, -1, 10),\r\n   * \tp = L.point(1, 2),\r\n   * \tp2 = transformation.transform(p), //  L.point(7, 8)\r\n   * \tp3 = transformation.untransform(p2); //  L.point(1, 2)\r\n   * ```\r\n   */\r\n\r\n\r\n  // factory new L.Transformation(a: Number, b: Number, c: Number, d: Number)\r\n  // Creates a `Transformation` object with the given coefficients.\r\n  function Transformation(a, b, c, d) {\r\n  \tif (isArray(a)) {\r\n  \t\t// use array properties\r\n  \t\tthis._a = a[0];\r\n  \t\tthis._b = a[1];\r\n  \t\tthis._c = a[2];\r\n  \t\tthis._d = a[3];\r\n  \t\treturn;\r\n  \t}\r\n  \tthis._a = a;\r\n  \tthis._b = b;\r\n  \tthis._c = c;\r\n  \tthis._d = d;\r\n  }\r\n\r\n  Transformation.prototype = {\r\n  \t// @method transform(point: Point, scale?: Number): Point\r\n  \t// Returns a transformed point, optionally multiplied by the given scale.\r\n  \t// Only accepts actual `L.Point` instances, not arrays.\r\n  \ttransform: function (point, scale) { // (Point, Number) -> Point\r\n  \t\treturn this._transform(point.clone(), scale);\r\n  \t},\r\n\r\n  \t// destructive transform (faster)\r\n  \t_transform: function (point, scale) {\r\n  \t\tscale = scale || 1;\r\n  \t\tpoint.x = scale * (this._a * point.x + this._b);\r\n  \t\tpoint.y = scale * (this._c * point.y + this._d);\r\n  \t\treturn point;\r\n  \t},\r\n\r\n  \t// @method untransform(point: Point, scale?: Number): Point\r\n  \t// Returns the reverse transformation of the given point, optionally divided\r\n  \t// by the given scale. Only accepts actual `L.Point` instances, not arrays.\r\n  \tuntransform: function (point, scale) {\r\n  \t\tscale = scale || 1;\r\n  \t\treturn new Point(\r\n  \t\t        (point.x / scale - this._b) / this._a,\r\n  \t\t        (point.y / scale - this._d) / this._c);\r\n  \t}\r\n  };\r\n\r\n  // factory L.transformation(a: Number, b: Number, c: Number, d: Number)\r\n\r\n  // @factory L.transformation(a: Number, b: Number, c: Number, d: Number)\r\n  // Instantiates a Transformation object with the given coefficients.\r\n\r\n  // @alternative\r\n  // @factory L.transformation(coefficients: Array): Transformation\r\n  // Expects an coefficients array of the form\r\n  // `[a: Number, b: Number, c: Number, d: Number]`.\r\n\r\n  function toTransformation(a, b, c, d) {\r\n  \treturn new Transformation(a, b, c, d);\r\n  }\n\n  /*\r\n   * @namespace CRS\r\n   * @crs L.CRS.EPSG3857\r\n   *\r\n   * The most common CRS for online maps, used by almost all free and commercial\r\n   * tile providers. Uses Spherical Mercator projection. Set in by default in\r\n   * Map's `crs` option.\r\n   */\r\n\r\n  var EPSG3857 = extend({}, Earth, {\r\n  \tcode: 'EPSG:3857',\r\n  \tprojection: SphericalMercator,\r\n\r\n  \ttransformation: (function () {\r\n  \t\tvar scale = 0.5 / (Math.PI * SphericalMercator.R);\r\n  \t\treturn toTransformation(scale, 0.5, -scale, 0.5);\r\n  \t}())\r\n  });\r\n\r\n  var EPSG900913 = extend({}, EPSG3857, {\r\n  \tcode: 'EPSG:900913'\r\n  });\n\n  // @namespace SVG; @section\n  // There are several static functions which can be called without instantiating L.SVG:\n\n  // @function create(name: String): SVGElement\n  // Returns a instance of [SVGElement](https://developer.mozilla.org/docs/Web/API/SVGElement),\n  // corresponding to the class name passed. For example, using 'line' will return\n  // an instance of [SVGLineElement](https://developer.mozilla.org/docs/Web/API/SVGLineElement).\n  function svgCreate(name) {\n  \treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n  }\n\n  // @function pointsToPath(rings: Point[], closed: Boolean): String\n  // Generates a SVG path string for multiple rings, with each ring turning\n  // into \"M..L..L..\" instructions\n  function pointsToPath(rings, closed) {\n  \tvar str = '',\n  \ti, j, len, len2, points, p;\n\n  \tfor (i = 0, len = rings.length; i < len; i++) {\n  \t\tpoints = rings[i];\n\n  \t\tfor (j = 0, len2 = points.length; j < len2; j++) {\n  \t\t\tp = points[j];\n  \t\t\tstr += (j ? 'L' : 'M') + p.x + ' ' + p.y;\n  \t\t}\n\n  \t\t// closes the ring for polygons; \"x\" is VML syntax\n  \t\tstr += closed ? (svg ? 'z' : 'x') : '';\n  \t}\n\n  \t// SVG complains about empty path strings\n  \treturn str || 'M0 0';\n  }\n\n  /*\r\n   * @namespace Browser\r\n   * @aka L.Browser\r\n   *\r\n   * A namespace with static properties for browser/feature detection used by Leaflet internally.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * if (L.Browser.ielt9) {\r\n   *   alert('Upgrade your browser, dude!');\r\n   * }\r\n   * ```\r\n   */\r\n\r\n  var style$1 = document.documentElement.style;\r\n\r\n  // @property ie: Boolean; `true` for all Internet Explorer versions (not Edge).\r\n  var ie = 'ActiveXObject' in window;\r\n\r\n  // @property ielt9: Boolean; `true` for Internet Explorer versions less than 9.\r\n  var ielt9 = ie && !document.addEventListener;\r\n\r\n  // @property edge: Boolean; `true` for the Edge web browser.\r\n  var edge = 'msLaunchUri' in navigator && !('documentMode' in document);\r\n\r\n  // @property webkit: Boolean;\r\n  // `true` for webkit-based browsers like Chrome and Safari (including mobile versions).\r\n  var webkit = userAgentContains('webkit');\r\n\r\n  // @property android: Boolean\r\n  // `true` for any browser running on an Android platform.\r\n  var android = userAgentContains('android');\r\n\r\n  // @property android23: Boolean; `true` for browsers running on Android 2 or Android 3.\r\n  var android23 = userAgentContains('android 2') || userAgentContains('android 3');\r\n\r\n  /* See https://stackoverflow.com/a/17961266 for details on detecting stock Android */\r\n  var webkitVer = parseInt(/WebKit\\/([0-9]+)|$/.exec(navigator.userAgent)[1], 10); // also matches AppleWebKit\r\n  // @property androidStock: Boolean; `true` for the Android stock browser (i.e. not Chrome)\r\n  var androidStock = android && userAgentContains('Google') && webkitVer < 537 && !('AudioNode' in window);\r\n\r\n  // @property opera: Boolean; `true` for the Opera browser\r\n  var opera = !!window.opera;\r\n\r\n  // @property chrome: Boolean; `true` for the Chrome browser.\r\n  var chrome = !edge && userAgentContains('chrome');\r\n\r\n  // @property gecko: Boolean; `true` for gecko-based browsers like Firefox.\r\n  var gecko = userAgentContains('gecko') && !webkit && !opera && !ie;\r\n\r\n  // @property safari: Boolean; `true` for the Safari browser.\r\n  var safari = !chrome && userAgentContains('safari');\r\n\r\n  var phantom = userAgentContains('phantom');\r\n\r\n  // @property opera12: Boolean\r\n  // `true` for the Opera browser supporting CSS transforms (version 12 or later).\r\n  var opera12 = 'OTransition' in style$1;\r\n\r\n  // @property win: Boolean; `true` when the browser is running in a Windows platform\r\n  var win = navigator.platform.indexOf('Win') === 0;\r\n\r\n  // @property ie3d: Boolean; `true` for all Internet Explorer versions supporting CSS transforms.\r\n  var ie3d = ie && ('transition' in style$1);\r\n\r\n  // @property webkit3d: Boolean; `true` for webkit-based browsers supporting CSS transforms.\r\n  var webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23;\r\n\r\n  // @property gecko3d: Boolean; `true` for gecko-based browsers supporting CSS transforms.\r\n  var gecko3d = 'MozPerspective' in style$1;\r\n\r\n  // @property any3d: Boolean\r\n  // `true` for all browsers supporting CSS transforms.\r\n  var any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantom;\r\n\r\n  // @property mobile: Boolean; `true` for all browsers running in a mobile device.\r\n  var mobile = typeof orientation !== 'undefined' || userAgentContains('mobile');\r\n\r\n  // @property mobileWebkit: Boolean; `true` for all webkit-based browsers in a mobile device.\r\n  var mobileWebkit = mobile && webkit;\r\n\r\n  // @property mobileWebkit3d: Boolean\r\n  // `true` for all webkit-based browsers in a mobile device supporting CSS transforms.\r\n  var mobileWebkit3d = mobile && webkit3d;\r\n\r\n  // @property msPointer: Boolean\r\n  // `true` for browsers implementing the Microsoft touch events model (notably IE10).\r\n  var msPointer = !window.PointerEvent && window.MSPointerEvent;\r\n\r\n  // @property pointer: Boolean\r\n  // `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).\r\n  var pointer = !!(window.PointerEvent || msPointer);\r\n\r\n  // @property touch: Boolean\r\n  // `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).\r\n  // This does not necessarily mean that the browser is running in a computer with\r\n  // a touchscreen, it only means that the browser is capable of understanding\r\n  // touch events.\r\n  var touch = !window.L_NO_TOUCH && (pointer || 'ontouchstart' in window ||\r\n  \t\t(window.DocumentTouch && document instanceof window.DocumentTouch));\r\n\r\n  // @property mobileOpera: Boolean; `true` for the Opera browser in a mobile device.\r\n  var mobileOpera = mobile && opera;\r\n\r\n  // @property mobileGecko: Boolean\r\n  // `true` for gecko-based browsers running in a mobile device.\r\n  var mobileGecko = mobile && gecko;\r\n\r\n  // @property retina: Boolean\r\n  // `true` for browsers on a high-resolution \"retina\" screen or on any screen when browser's display zoom is more than 100%.\r\n  var retina = (window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI)) > 1;\r\n\r\n  // @property passiveEvents: Boolean\r\n  // `true` for browsers that support passive events.\r\n  var passiveEvents = (function () {\r\n  \tvar supportsPassiveOption = false;\r\n  \ttry {\r\n  \t\tvar opts = Object.defineProperty({}, 'passive', {\r\n  \t\t\tget: function () { // eslint-disable-line getter-return\r\n  \t\t\t\tsupportsPassiveOption = true;\r\n  \t\t\t}\r\n  \t\t});\r\n  \t\twindow.addEventListener('testPassiveEventSupport', falseFn, opts);\r\n  \t\twindow.removeEventListener('testPassiveEventSupport', falseFn, opts);\r\n  \t} catch (e) {\r\n  \t\t// Errors can safely be ignored since this is only a browser support test.\r\n  \t}\r\n  \treturn supportsPassiveOption;\r\n  }());\r\n\r\n  // @property canvas: Boolean\r\n  // `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).\r\n  var canvas = (function () {\r\n  \treturn !!document.createElement('canvas').getContext;\r\n  }());\r\n\r\n  // @property svg: Boolean\r\n  // `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).\r\n  var svg = !!(document.createElementNS && svgCreate('svg').createSVGRect);\r\n\r\n  // @property vml: Boolean\r\n  // `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).\r\n  var vml = !svg && (function () {\r\n  \ttry {\r\n  \t\tvar div = document.createElement('div');\r\n  \t\tdiv.innerHTML = '<v:shape adj=\"1\"/>';\r\n\r\n  \t\tvar shape = div.firstChild;\r\n  \t\tshape.style.behavior = 'url(#default#VML)';\r\n\r\n  \t\treturn shape && (typeof shape.adj === 'object');\r\n\r\n  \t} catch (e) {\r\n  \t\treturn false;\r\n  \t}\r\n  }());\r\n\r\n\r\n  function userAgentContains(str) {\r\n  \treturn navigator.userAgent.toLowerCase().indexOf(str) >= 0;\r\n  }\n\n  var Browser = ({\n    ie: ie,\n    ielt9: ielt9,\n    edge: edge,\n    webkit: webkit,\n    android: android,\n    android23: android23,\n    androidStock: androidStock,\n    opera: opera,\n    chrome: chrome,\n    gecko: gecko,\n    safari: safari,\n    phantom: phantom,\n    opera12: opera12,\n    win: win,\n    ie3d: ie3d,\n    webkit3d: webkit3d,\n    gecko3d: gecko3d,\n    any3d: any3d,\n    mobile: mobile,\n    mobileWebkit: mobileWebkit,\n    mobileWebkit3d: mobileWebkit3d,\n    msPointer: msPointer,\n    pointer: pointer,\n    touch: touch,\n    mobileOpera: mobileOpera,\n    mobileGecko: mobileGecko,\n    retina: retina,\n    passiveEvents: passiveEvents,\n    canvas: canvas,\n    svg: svg,\n    vml: vml\n  });\n\n  /*\n   * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n   */\n\n\n  var POINTER_DOWN =   msPointer ? 'MSPointerDown'   : 'pointerdown';\n  var POINTER_MOVE =   msPointer ? 'MSPointerMove'   : 'pointermove';\n  var POINTER_UP =     msPointer ? 'MSPointerUp'     : 'pointerup';\n  var POINTER_CANCEL = msPointer ? 'MSPointerCancel' : 'pointercancel';\n\n  var _pointers = {};\n  var _pointerDocListener = false;\n\n  // Provides a touch events wrapper for (ms)pointer events.\n  // ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\n  function addPointerListener(obj, type, handler, id) {\n  \tif (type === 'touchstart') {\n  \t\t_addPointerStart(obj, handler, id);\n\n  \t} else if (type === 'touchmove') {\n  \t\t_addPointerMove(obj, handler, id);\n\n  \t} else if (type === 'touchend') {\n  \t\t_addPointerEnd(obj, handler, id);\n  \t}\n\n  \treturn this;\n  }\n\n  function removePointerListener(obj, type, id) {\n  \tvar handler = obj['_leaflet_' + type + id];\n\n  \tif (type === 'touchstart') {\n  \t\tobj.removeEventListener(POINTER_DOWN, handler, false);\n\n  \t} else if (type === 'touchmove') {\n  \t\tobj.removeEventListener(POINTER_MOVE, handler, false);\n\n  \t} else if (type === 'touchend') {\n  \t\tobj.removeEventListener(POINTER_UP, handler, false);\n  \t\tobj.removeEventListener(POINTER_CANCEL, handler, false);\n  \t}\n\n  \treturn this;\n  }\n\n  function _addPointerStart(obj, handler, id) {\n  \tvar onDown = bind(function (e) {\n  \t\t// IE10 specific: MsTouch needs preventDefault. See #2000\n  \t\tif (e.MSPOINTER_TYPE_TOUCH && e.pointerType === e.MSPOINTER_TYPE_TOUCH) {\n  \t\t\tpreventDefault(e);\n  \t\t}\n\n  \t\t_handlePointer(e, handler);\n  \t});\n\n  \tobj['_leaflet_touchstart' + id] = onDown;\n  \tobj.addEventListener(POINTER_DOWN, onDown, false);\n\n  \t// need to keep track of what pointers and how many are active to provide e.touches emulation\n  \tif (!_pointerDocListener) {\n  \t\t// we listen document as any drags that end by moving the touch off the screen get fired there\n  \t\tdocument.addEventListener(POINTER_DOWN, _globalPointerDown, true);\n  \t\tdocument.addEventListener(POINTER_MOVE, _globalPointerMove, true);\n  \t\tdocument.addEventListener(POINTER_UP, _globalPointerUp, true);\n  \t\tdocument.addEventListener(POINTER_CANCEL, _globalPointerUp, true);\n\n  \t\t_pointerDocListener = true;\n  \t}\n  }\n\n  function _globalPointerDown(e) {\n  \t_pointers[e.pointerId] = e;\n  }\n\n  function _globalPointerMove(e) {\n  \tif (_pointers[e.pointerId]) {\n  \t\t_pointers[e.pointerId] = e;\n  \t}\n  }\n\n  function _globalPointerUp(e) {\n  \tdelete _pointers[e.pointerId];\n  }\n\n  function _handlePointer(e, handler) {\n  \te.touches = [];\n  \tfor (var i in _pointers) {\n  \t\te.touches.push(_pointers[i]);\n  \t}\n  \te.changedTouches = [e];\n\n  \thandler(e);\n  }\n\n  function _addPointerMove(obj, handler, id) {\n  \tvar onMove = function (e) {\n  \t\t// don't fire touch moves when mouse isn't down\n  \t\tif ((e.pointerType === (e.MSPOINTER_TYPE_MOUSE || 'mouse')) && e.buttons === 0) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\t_handlePointer(e, handler);\n  \t};\n\n  \tobj['_leaflet_touchmove' + id] = onMove;\n  \tobj.addEventListener(POINTER_MOVE, onMove, false);\n  }\n\n  function _addPointerEnd(obj, handler, id) {\n  \tvar onUp = function (e) {\n  \t\t_handlePointer(e, handler);\n  \t};\n\n  \tobj['_leaflet_touchend' + id] = onUp;\n  \tobj.addEventListener(POINTER_UP, onUp, false);\n  \tobj.addEventListener(POINTER_CANCEL, onUp, false);\n  }\n\n  /*\r\n   * Extends the event handling code with double tap support for mobile browsers.\r\n   */\r\n\r\n  var _touchstart = msPointer ? 'MSPointerDown' : pointer ? 'pointerdown' : 'touchstart';\r\n  var _touchend = msPointer ? 'MSPointerUp' : pointer ? 'pointerup' : 'touchend';\r\n  var _pre = '_leaflet_';\r\n\r\n  // inspired by Zepto touch code by Thomas Fuchs\r\n  function addDoubleTapListener(obj, handler, id) {\r\n  \tvar last, touch$$1,\r\n  \t    doubleTap = false,\r\n  \t    delay = 250;\r\n\r\n  \tfunction onTouchStart(e) {\r\n\r\n  \t\tif (pointer) {\r\n  \t\t\tif (!e.isPrimary) { return; }\r\n  \t\t\tif (e.pointerType === 'mouse') { return; } // mouse fires native dblclick\r\n  \t\t} else if (e.touches.length > 1) {\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\tvar now = Date.now(),\r\n  \t\t    delta = now - (last || now);\r\n\r\n  \t\ttouch$$1 = e.touches ? e.touches[0] : e;\r\n  \t\tdoubleTap = (delta > 0 && delta <= delay);\r\n  \t\tlast = now;\r\n  \t}\r\n\r\n  \tfunction onTouchEnd(e) {\r\n  \t\tif (doubleTap && !touch$$1.cancelBubble) {\r\n  \t\t\tif (pointer) {\r\n  \t\t\t\tif (e.pointerType === 'mouse') { return; }\r\n  \t\t\t\t// work around .type being readonly with MSPointer* events\r\n  \t\t\t\tvar newTouch = {},\r\n  \t\t\t\t    prop, i;\r\n\r\n  \t\t\t\tfor (i in touch$$1) {\r\n  \t\t\t\t\tprop = touch$$1[i];\r\n  \t\t\t\t\tnewTouch[i] = prop && prop.bind ? prop.bind(touch$$1) : prop;\r\n  \t\t\t\t}\r\n  \t\t\t\ttouch$$1 = newTouch;\r\n  \t\t\t}\r\n  \t\t\ttouch$$1.type = 'dblclick';\r\n  \t\t\ttouch$$1.button = 0;\r\n  \t\t\thandler(touch$$1);\r\n  \t\t\tlast = null;\r\n  \t\t}\r\n  \t}\r\n\r\n  \tobj[_pre + _touchstart + id] = onTouchStart;\r\n  \tobj[_pre + _touchend + id] = onTouchEnd;\r\n  \tobj[_pre + 'dblclick' + id] = handler;\r\n\r\n  \tobj.addEventListener(_touchstart, onTouchStart, passiveEvents ? {passive: false} : false);\r\n  \tobj.addEventListener(_touchend, onTouchEnd, passiveEvents ? {passive: false} : false);\r\n\r\n  \t// On some platforms (notably, chrome<55 on win10 + touchscreen + mouse),\r\n  \t// the browser doesn't fire touchend/pointerup events but does fire\r\n  \t// native dblclicks. See #4127.\r\n  \t// Edge 14 also fires native dblclicks, but only for pointerType mouse, see #5180.\r\n  \tobj.addEventListener('dblclick', handler, false);\r\n\r\n  \treturn this;\r\n  }\r\n\r\n  function removeDoubleTapListener(obj, id) {\r\n  \tvar touchstart = obj[_pre + _touchstart + id],\r\n  \t    touchend = obj[_pre + _touchend + id],\r\n  \t    dblclick = obj[_pre + 'dblclick' + id];\r\n\r\n  \tobj.removeEventListener(_touchstart, touchstart, passiveEvents ? {passive: false} : false);\r\n  \tobj.removeEventListener(_touchend, touchend, passiveEvents ? {passive: false} : false);\r\n  \tobj.removeEventListener('dblclick', dblclick, false);\r\n\r\n  \treturn this;\r\n  }\n\n  /*\r\n   * @namespace DomUtil\r\n   *\r\n   * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)\r\n   * tree, used by Leaflet internally.\r\n   *\r\n   * Most functions expecting or returning a `HTMLElement` also work for\r\n   * SVG elements. The only difference is that classes refer to CSS classes\r\n   * in HTML and SVG classes in SVG.\r\n   */\r\n\r\n\r\n  // @property TRANSFORM: String\r\n  // Vendor-prefixed transform style name (e.g. `'webkitTransform'` for WebKit).\r\n  var TRANSFORM = testProp(\r\n  \t['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\r\n\r\n  // webkitTransition comes first because some browser versions that drop vendor prefix don't do\r\n  // the same for the transitionend event, in particular the Android 4.1 stock browser\r\n\r\n  // @property TRANSITION: String\r\n  // Vendor-prefixed transition style name.\r\n  var TRANSITION = testProp(\r\n  \t['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\r\n\r\n  // @property TRANSITION_END: String\r\n  // Vendor-prefixed transitionend event name.\r\n  var TRANSITION_END =\r\n  \tTRANSITION === 'webkitTransition' || TRANSITION === 'OTransition' ? TRANSITION + 'End' : 'transitionend';\r\n\r\n\r\n  // @function get(id: String|HTMLElement): HTMLElement\r\n  // Returns an element given its DOM id, or returns the element itself\r\n  // if it was passed directly.\r\n  function get(id) {\r\n  \treturn typeof id === 'string' ? document.getElementById(id) : id;\r\n  }\r\n\r\n  // @function getStyle(el: HTMLElement, styleAttrib: String): String\r\n  // Returns the value for a certain style attribute on an element,\r\n  // including computed values or values set through CSS.\r\n  function getStyle(el, style) {\r\n  \tvar value = el.style[style] || (el.currentStyle && el.currentStyle[style]);\r\n\r\n  \tif ((!value || value === 'auto') && document.defaultView) {\r\n  \t\tvar css = document.defaultView.getComputedStyle(el, null);\r\n  \t\tvalue = css ? css[style] : null;\r\n  \t}\r\n  \treturn value === 'auto' ? null : value;\r\n  }\r\n\r\n  // @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement\r\n  // Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.\r\n  function create$1(tagName, className, container) {\r\n  \tvar el = document.createElement(tagName);\r\n  \tel.className = className || '';\r\n\r\n  \tif (container) {\r\n  \t\tcontainer.appendChild(el);\r\n  \t}\r\n  \treturn el;\r\n  }\r\n\r\n  // @function remove(el: HTMLElement)\r\n  // Removes `el` from its parent element\r\n  function remove(el) {\r\n  \tvar parent = el.parentNode;\r\n  \tif (parent) {\r\n  \t\tparent.removeChild(el);\r\n  \t}\r\n  }\r\n\r\n  // @function empty(el: HTMLElement)\r\n  // Removes all of `el`'s children elements from `el`\r\n  function empty(el) {\r\n  \twhile (el.firstChild) {\r\n  \t\tel.removeChild(el.firstChild);\r\n  \t}\r\n  }\r\n\r\n  // @function toFront(el: HTMLElement)\r\n  // Makes `el` the last child of its parent, so it renders in front of the other children.\r\n  function toFront(el) {\r\n  \tvar parent = el.parentNode;\r\n  \tif (parent && parent.lastChild !== el) {\r\n  \t\tparent.appendChild(el);\r\n  \t}\r\n  }\r\n\r\n  // @function toBack(el: HTMLElement)\r\n  // Makes `el` the first child of its parent, so it renders behind the other children.\r\n  function toBack(el) {\r\n  \tvar parent = el.parentNode;\r\n  \tif (parent && parent.firstChild !== el) {\r\n  \t\tparent.insertBefore(el, parent.firstChild);\r\n  \t}\r\n  }\r\n\r\n  // @function hasClass(el: HTMLElement, name: String): Boolean\r\n  // Returns `true` if the element's class attribute contains `name`.\r\n  function hasClass(el, name) {\r\n  \tif (el.classList !== undefined) {\r\n  \t\treturn el.classList.contains(name);\r\n  \t}\r\n  \tvar className = getClass(el);\r\n  \treturn className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\r\n  }\r\n\r\n  // @function addClass(el: HTMLElement, name: String)\r\n  // Adds `name` to the element's class attribute.\r\n  function addClass(el, name) {\r\n  \tif (el.classList !== undefined) {\r\n  \t\tvar classes = splitWords(name);\r\n  \t\tfor (var i = 0, len = classes.length; i < len; i++) {\r\n  \t\t\tel.classList.add(classes[i]);\r\n  \t\t}\r\n  \t} else if (!hasClass(el, name)) {\r\n  \t\tvar className = getClass(el);\r\n  \t\tsetClass(el, (className ? className + ' ' : '') + name);\r\n  \t}\r\n  }\r\n\r\n  // @function removeClass(el: HTMLElement, name: String)\r\n  // Removes `name` from the element's class attribute.\r\n  function removeClass(el, name) {\r\n  \tif (el.classList !== undefined) {\r\n  \t\tel.classList.remove(name);\r\n  \t} else {\r\n  \t\tsetClass(el, trim((' ' + getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\r\n  \t}\r\n  }\r\n\r\n  // @function setClass(el: HTMLElement, name: String)\r\n  // Sets the element's class.\r\n  function setClass(el, name) {\r\n  \tif (el.className.baseVal === undefined) {\r\n  \t\tel.className = name;\r\n  \t} else {\r\n  \t\t// in case of SVG element\r\n  \t\tel.className.baseVal = name;\r\n  \t}\r\n  }\r\n\r\n  // @function getClass(el: HTMLElement): String\r\n  // Returns the element's class.\r\n  function getClass(el) {\r\n  \t// Check if the element is an SVGElementInstance and use the correspondingElement instead\r\n  \t// (Required for linked SVG elements in IE11.)\r\n  \tif (el.correspondingElement) {\r\n  \t\tel = el.correspondingElement;\r\n  \t}\r\n  \treturn el.className.baseVal === undefined ? el.className : el.className.baseVal;\r\n  }\r\n\r\n  // @function setOpacity(el: HTMLElement, opacity: Number)\r\n  // Set the opacity of an element (including old IE support).\r\n  // `opacity` must be a number from `0` to `1`.\r\n  function setOpacity(el, value) {\r\n  \tif ('opacity' in el.style) {\r\n  \t\tel.style.opacity = value;\r\n  \t} else if ('filter' in el.style) {\r\n  \t\t_setOpacityIE(el, value);\r\n  \t}\r\n  }\r\n\r\n  function _setOpacityIE(el, value) {\r\n  \tvar filter = false,\r\n  \t    filterName = 'DXImageTransform.Microsoft.Alpha';\r\n\r\n  \t// filters collection throws an error if we try to retrieve a filter that doesn't exist\r\n  \ttry {\r\n  \t\tfilter = el.filters.item(filterName);\r\n  \t} catch (e) {\r\n  \t\t// don't set opacity to 1 if we haven't already set an opacity,\r\n  \t\t// it isn't needed and breaks transparent pngs.\r\n  \t\tif (value === 1) { return; }\r\n  \t}\r\n\r\n  \tvalue = Math.round(value * 100);\r\n\r\n  \tif (filter) {\r\n  \t\tfilter.Enabled = (value !== 100);\r\n  \t\tfilter.Opacity = value;\r\n  \t} else {\r\n  \t\tel.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\r\n  \t}\r\n  }\r\n\r\n  // @function testProp(props: String[]): String|false\r\n  // Goes through the array of style names and returns the first name\r\n  // that is a valid style name for an element. If no such name is found,\r\n  // it returns false. Useful for vendor-prefixed styles like `transform`.\r\n  function testProp(props) {\r\n  \tvar style = document.documentElement.style;\r\n\r\n  \tfor (var i = 0; i < props.length; i++) {\r\n  \t\tif (props[i] in style) {\r\n  \t\t\treturn props[i];\r\n  \t\t}\r\n  \t}\r\n  \treturn false;\r\n  }\r\n\r\n  // @function setTransform(el: HTMLElement, offset: Point, scale?: Number)\r\n  // Resets the 3D CSS transform of `el` so it is translated by `offset` pixels\r\n  // and optionally scaled by `scale`. Does not have an effect if the\r\n  // browser doesn't support 3D CSS transforms.\r\n  function setTransform(el, offset, scale) {\r\n  \tvar pos = offset || new Point(0, 0);\r\n\r\n  \tel.style[TRANSFORM] =\r\n  \t\t(ie3d ?\r\n  \t\t\t'translate(' + pos.x + 'px,' + pos.y + 'px)' :\r\n  \t\t\t'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +\r\n  \t\t(scale ? ' scale(' + scale + ')' : '');\r\n  }\r\n\r\n  // @function setPosition(el: HTMLElement, position: Point)\r\n  // Sets the position of `el` to coordinates specified by `position`,\r\n  // using CSS translate or top/left positioning depending on the browser\r\n  // (used by Leaflet internally to position its layers).\r\n  function setPosition(el, point) {\r\n\r\n  \t/*eslint-disable */\r\n  \tel._leaflet_pos = point;\r\n  \t/* eslint-enable */\r\n\r\n  \tif (any3d) {\r\n  \t\tsetTransform(el, point);\r\n  \t} else {\r\n  \t\tel.style.left = point.x + 'px';\r\n  \t\tel.style.top = point.y + 'px';\r\n  \t}\r\n  }\r\n\r\n  // @function getPosition(el: HTMLElement): Point\r\n  // Returns the coordinates of an element previously positioned with setPosition.\r\n  function getPosition(el) {\r\n  \t// this method is only used for elements previously positioned using setPosition,\r\n  \t// so it's safe to cache the position for performance\r\n\r\n  \treturn el._leaflet_pos || new Point(0, 0);\r\n  }\r\n\r\n  // @function disableTextSelection()\r\n  // Prevents the user from generating `selectstart` DOM events, usually generated\r\n  // when the user drags the mouse through a page with text. Used internally\r\n  // by Leaflet to override the behaviour of any click-and-drag interaction on\r\n  // the map. Affects drag interactions on the whole document.\r\n\r\n  // @function enableTextSelection()\r\n  // Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).\r\n  var disableTextSelection;\r\n  var enableTextSelection;\r\n  var _userSelect;\r\n  if ('onselectstart' in document) {\r\n  \tdisableTextSelection = function () {\r\n  \t\ton(window, 'selectstart', preventDefault);\r\n  \t};\r\n  \tenableTextSelection = function () {\r\n  \t\toff(window, 'selectstart', preventDefault);\r\n  \t};\r\n  } else {\r\n  \tvar userSelectProperty = testProp(\r\n  \t\t['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\r\n\r\n  \tdisableTextSelection = function () {\r\n  \t\tif (userSelectProperty) {\r\n  \t\t\tvar style = document.documentElement.style;\r\n  \t\t\t_userSelect = style[userSelectProperty];\r\n  \t\t\tstyle[userSelectProperty] = 'none';\r\n  \t\t}\r\n  \t};\r\n  \tenableTextSelection = function () {\r\n  \t\tif (userSelectProperty) {\r\n  \t\t\tdocument.documentElement.style[userSelectProperty] = _userSelect;\r\n  \t\t\t_userSelect = undefined;\r\n  \t\t}\r\n  \t};\r\n  }\r\n\r\n  // @function disableImageDrag()\r\n  // As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but\r\n  // for `dragstart` DOM events, usually generated when the user drags an image.\r\n  function disableImageDrag() {\r\n  \ton(window, 'dragstart', preventDefault);\r\n  }\r\n\r\n  // @function enableImageDrag()\r\n  // Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).\r\n  function enableImageDrag() {\r\n  \toff(window, 'dragstart', preventDefault);\r\n  }\r\n\r\n  var _outlineElement, _outlineStyle;\r\n  // @function preventOutline(el: HTMLElement)\r\n  // Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)\r\n  // of the element `el` invisible. Used internally by Leaflet to prevent\r\n  // focusable elements from displaying an outline when the user performs a\r\n  // drag interaction on them.\r\n  function preventOutline(element) {\r\n  \twhile (element.tabIndex === -1) {\r\n  \t\telement = element.parentNode;\r\n  \t}\r\n  \tif (!element.style) { return; }\r\n  \trestoreOutline();\r\n  \t_outlineElement = element;\r\n  \t_outlineStyle = element.style.outline;\r\n  \telement.style.outline = 'none';\r\n  \ton(window, 'keydown', restoreOutline);\r\n  }\r\n\r\n  // @function restoreOutline()\r\n  // Cancels the effects of a previous [`L.DomUtil.preventOutline`]().\r\n  function restoreOutline() {\r\n  \tif (!_outlineElement) { return; }\r\n  \t_outlineElement.style.outline = _outlineStyle;\r\n  \t_outlineElement = undefined;\r\n  \t_outlineStyle = undefined;\r\n  \toff(window, 'keydown', restoreOutline);\r\n  }\r\n\r\n  // @function getSizedParentNode(el: HTMLElement): HTMLElement\r\n  // Finds the closest parent node which size (width and height) is not null.\r\n  function getSizedParentNode(element) {\r\n  \tdo {\r\n  \t\telement = element.parentNode;\r\n  \t} while ((!element.offsetWidth || !element.offsetHeight) && element !== document.body);\r\n  \treturn element;\r\n  }\r\n\r\n  // @function getScale(el: HTMLElement): Object\r\n  // Computes the CSS scale currently applied on the element.\r\n  // Returns an object with `x` and `y` members as horizontal and vertical scales respectively,\r\n  // and `boundingClientRect` as the result of [`getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect).\r\n  function getScale(element) {\r\n  \tvar rect = element.getBoundingClientRect(); // Read-only in old browsers.\r\n\r\n  \treturn {\r\n  \t\tx: rect.width / element.offsetWidth || 1,\r\n  \t\ty: rect.height / element.offsetHeight || 1,\r\n  \t\tboundingClientRect: rect\r\n  \t};\r\n  }\n\n  var DomUtil = ({\n    TRANSFORM: TRANSFORM,\n    TRANSITION: TRANSITION,\n    TRANSITION_END: TRANSITION_END,\n    get: get,\n    getStyle: getStyle,\n    create: create$1,\n    remove: remove,\n    empty: empty,\n    toFront: toFront,\n    toBack: toBack,\n    hasClass: hasClass,\n    addClass: addClass,\n    removeClass: removeClass,\n    setClass: setClass,\n    getClass: getClass,\n    setOpacity: setOpacity,\n    testProp: testProp,\n    setTransform: setTransform,\n    setPosition: setPosition,\n    getPosition: getPosition,\n    disableTextSelection: disableTextSelection,\n    enableTextSelection: enableTextSelection,\n    disableImageDrag: disableImageDrag,\n    enableImageDrag: enableImageDrag,\n    preventOutline: preventOutline,\n    restoreOutline: restoreOutline,\n    getSizedParentNode: getSizedParentNode,\n    getScale: getScale\n  });\n\n  /*\r\n   * @namespace DomEvent\r\n   * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.\r\n   */\r\n\r\n  // Inspired by John Resig, Dean Edwards and YUI addEvent implementations.\r\n\r\n  // @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n  // Adds a listener function (`fn`) to a particular DOM event type of the\r\n  // element `el`. You can optionally specify the context of the listener\r\n  // (object the `this` keyword will point to). You can also pass several\r\n  // space-separated types (e.g. `'click dblclick'`).\r\n\r\n  // @alternative\r\n  // @function on(el: HTMLElement, eventMap: Object, context?: Object): this\r\n  // Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n  function on(obj, types, fn, context) {\r\n\r\n  \tif (typeof types === 'object') {\r\n  \t\tfor (var type in types) {\r\n  \t\t\taddOne(obj, type, types[type], fn);\r\n  \t\t}\r\n  \t} else {\r\n  \t\ttypes = splitWords(types);\r\n\r\n  \t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n  \t\t\taddOne(obj, types[i], fn, context);\r\n  \t\t}\r\n  \t}\r\n\r\n  \treturn this;\r\n  }\r\n\r\n  var eventsKey = '_leaflet_events';\r\n\r\n  // @function off(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n  // Removes a previously added listener function.\r\n  // Note that if you passed a custom context to on, you must pass the same\r\n  // context to `off` in order to remove the listener.\r\n\r\n  // @alternative\r\n  // @function off(el: HTMLElement, eventMap: Object, context?: Object): this\r\n  // Removes a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n  function off(obj, types, fn, context) {\r\n\r\n  \tif (typeof types === 'object') {\r\n  \t\tfor (var type in types) {\r\n  \t\t\tremoveOne(obj, type, types[type], fn);\r\n  \t\t}\r\n  \t} else if (types) {\r\n  \t\ttypes = splitWords(types);\r\n\r\n  \t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n  \t\t\tremoveOne(obj, types[i], fn, context);\r\n  \t\t}\r\n  \t} else {\r\n  \t\tfor (var j in obj[eventsKey]) {\r\n  \t\t\tremoveOne(obj, j, obj[eventsKey][j]);\r\n  \t\t}\r\n  \t\tdelete obj[eventsKey];\r\n  \t}\r\n\r\n  \treturn this;\r\n  }\r\n\r\n  function browserFiresNativeDblClick() {\r\n  \t// See https://github.com/w3c/pointerevents/issues/171\r\n  \tif (pointer) {\r\n  \t\treturn !(edge || safari);\r\n  \t}\r\n  }\r\n\r\n  var mouseSubst = {\r\n  \tmouseenter: 'mouseover',\r\n  \tmouseleave: 'mouseout',\r\n  \twheel: !('onwheel' in window) && 'mousewheel'\r\n  };\r\n\r\n  function addOne(obj, type, fn, context) {\r\n  \tvar id = type + stamp(fn) + (context ? '_' + stamp(context) : '');\r\n\r\n  \tif (obj[eventsKey] && obj[eventsKey][id]) { return this; }\r\n\r\n  \tvar handler = function (e) {\r\n  \t\treturn fn.call(context || obj, e || window.event);\r\n  \t};\r\n\r\n  \tvar originalHandler = handler;\r\n\r\n  \tif (pointer && type.indexOf('touch') === 0) {\r\n  \t\t// Needs DomEvent.Pointer.js\r\n  \t\taddPointerListener(obj, type, handler, id);\r\n\r\n  \t} else if (touch && (type === 'dblclick') && !browserFiresNativeDblClick()) {\r\n  \t\taddDoubleTapListener(obj, handler, id);\r\n\r\n  \t} else if ('addEventListener' in obj) {\r\n\r\n  \t\tif (type === 'touchstart' || type === 'touchmove' || type === 'wheel' ||  type === 'mousewheel') {\r\n  \t\t\tobj.addEventListener(mouseSubst[type] || type, handler, passiveEvents ? {passive: false} : false);\r\n\r\n  \t\t} else if (type === 'mouseenter' || type === 'mouseleave') {\r\n  \t\t\thandler = function (e) {\r\n  \t\t\t\te = e || window.event;\r\n  \t\t\t\tif (isExternalTarget(obj, e)) {\r\n  \t\t\t\t\toriginalHandler(e);\r\n  \t\t\t\t}\r\n  \t\t\t};\r\n  \t\t\tobj.addEventListener(mouseSubst[type], handler, false);\r\n\r\n  \t\t} else {\r\n  \t\t\tobj.addEventListener(type, originalHandler, false);\r\n  \t\t}\r\n\r\n  \t} else if ('attachEvent' in obj) {\r\n  \t\tobj.attachEvent('on' + type, handler);\r\n  \t}\r\n\r\n  \tobj[eventsKey] = obj[eventsKey] || {};\r\n  \tobj[eventsKey][id] = handler;\r\n  }\r\n\r\n  function removeOne(obj, type, fn, context) {\r\n\r\n  \tvar id = type + stamp(fn) + (context ? '_' + stamp(context) : ''),\r\n  \t    handler = obj[eventsKey] && obj[eventsKey][id];\r\n\r\n  \tif (!handler) { return this; }\r\n\r\n  \tif (pointer && type.indexOf('touch') === 0) {\r\n  \t\tremovePointerListener(obj, type, id);\r\n\r\n  \t} else if (touch && (type === 'dblclick') && !browserFiresNativeDblClick()) {\r\n  \t\tremoveDoubleTapListener(obj, id);\r\n\r\n  \t} else if ('removeEventListener' in obj) {\r\n\r\n  \t\tobj.removeEventListener(mouseSubst[type] || type, handler, false);\r\n\r\n  \t} else if ('detachEvent' in obj) {\r\n  \t\tobj.detachEvent('on' + type, handler);\r\n  \t}\r\n\r\n  \tobj[eventsKey][id] = null;\r\n  }\r\n\r\n  // @function stopPropagation(ev: DOMEvent): this\r\n  // Stop the given event from propagation to parent elements. Used inside the listener functions:\r\n  // ```js\r\n  // L.DomEvent.on(div, 'click', function (ev) {\r\n  // \tL.DomEvent.stopPropagation(ev);\r\n  // });\r\n  // ```\r\n  function stopPropagation(e) {\r\n\r\n  \tif (e.stopPropagation) {\r\n  \t\te.stopPropagation();\r\n  \t} else if (e.originalEvent) {  // In case of Leaflet event.\r\n  \t\te.originalEvent._stopped = true;\r\n  \t} else {\r\n  \t\te.cancelBubble = true;\r\n  \t}\r\n  \tskipped(e);\r\n\r\n  \treturn this;\r\n  }\r\n\r\n  // @function disableScrollPropagation(el: HTMLElement): this\r\n  // Adds `stopPropagation` to the element's `'wheel'` events (plus browser variants).\r\n  function disableScrollPropagation(el) {\r\n  \taddOne(el, 'wheel', stopPropagation);\r\n  \treturn this;\r\n  }\r\n\r\n  // @function disableClickPropagation(el: HTMLElement): this\r\n  // Adds `stopPropagation` to the element's `'click'`, `'doubleclick'`,\r\n  // `'mousedown'` and `'touchstart'` events (plus browser variants).\r\n  function disableClickPropagation(el) {\r\n  \ton(el, 'mousedown touchstart dblclick', stopPropagation);\r\n  \taddOne(el, 'click', fakeStop);\r\n  \treturn this;\r\n  }\r\n\r\n  // @function preventDefault(ev: DOMEvent): this\r\n  // Prevents the default action of the DOM Event `ev` from happening (such as\r\n  // following a link in the href of the a element, or doing a POST request\r\n  // with page reload when a `<form>` is submitted).\r\n  // Use it inside listener functions.\r\n  function preventDefault(e) {\r\n  \tif (e.preventDefault) {\r\n  \t\te.preventDefault();\r\n  \t} else {\r\n  \t\te.returnValue = false;\r\n  \t}\r\n  \treturn this;\r\n  }\r\n\r\n  // @function stop(ev: DOMEvent): this\r\n  // Does `stopPropagation` and `preventDefault` at the same time.\r\n  function stop(e) {\r\n  \tpreventDefault(e);\r\n  \tstopPropagation(e);\r\n  \treturn this;\r\n  }\r\n\r\n  // @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point\r\n  // Gets normalized mouse position from a DOM event relative to the\r\n  // `container` (border excluded) or to the whole page if not specified.\r\n  function getMousePosition(e, container) {\r\n  \tif (!container) {\r\n  \t\treturn new Point(e.clientX, e.clientY);\r\n  \t}\r\n\r\n  \tvar scale = getScale(container),\r\n  \t    offset = scale.boundingClientRect; // left and top  values are in page scale (like the event clientX/Y)\r\n\r\n  \treturn new Point(\r\n  \t\t// offset.left/top values are in page scale (like clientX/Y),\r\n  \t\t// whereas clientLeft/Top (border width) values are the original values (before CSS scale applies).\r\n  \t\t(e.clientX - offset.left) / scale.x - container.clientLeft,\r\n  \t\t(e.clientY - offset.top) / scale.y - container.clientTop\r\n  \t);\r\n  }\r\n\r\n  // Chrome on Win scrolls double the pixels as in other platforms (see #4538),\r\n  // and Firefox scrolls device pixels, not CSS pixels\r\n  var wheelPxFactor =\r\n  \t(win && chrome) ? 2 * window.devicePixelRatio :\r\n  \tgecko ? window.devicePixelRatio : 1;\r\n\r\n  // @function getWheelDelta(ev: DOMEvent): Number\r\n  // Gets normalized wheel delta from a wheel DOM event, in vertical\r\n  // pixels scrolled (negative if scrolling down).\r\n  // Events from pointing devices without precise scrolling are mapped to\r\n  // a best guess of 60 pixels.\r\n  function getWheelDelta(e) {\r\n  \treturn (edge) ? e.wheelDeltaY / 2 : // Don't trust window-geometry-based delta\r\n  \t       (e.deltaY && e.deltaMode === 0) ? -e.deltaY / wheelPxFactor : // Pixels\r\n  \t       (e.deltaY && e.deltaMode === 1) ? -e.deltaY * 20 : // Lines\r\n  \t       (e.deltaY && e.deltaMode === 2) ? -e.deltaY * 60 : // Pages\r\n  \t       (e.deltaX || e.deltaZ) ? 0 :\t// Skip horizontal/depth wheel events\r\n  \t       e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels\r\n  \t       (e.detail && Math.abs(e.detail) < 32765) ? -e.detail * 20 : // Legacy Moz lines\r\n  \t       e.detail ? e.detail / -32765 * 60 : // Legacy Moz pages\r\n  \t       0;\r\n  }\r\n\r\n  var skipEvents = {};\r\n\r\n  function fakeStop(e) {\r\n  \t// fakes stopPropagation by setting a special event flag, checked/reset with skipped(e)\r\n  \tskipEvents[e.type] = true;\r\n  }\r\n\r\n  function skipped(e) {\r\n  \tvar events = skipEvents[e.type];\r\n  \t// reset when checking, as it's only used in map container and propagates outside of the map\r\n  \tskipEvents[e.type] = false;\r\n  \treturn events;\r\n  }\r\n\r\n  // check if element really left/entered the event target (for mouseenter/mouseleave)\r\n  function isExternalTarget(el, e) {\r\n\r\n  \tvar related = e.relatedTarget;\r\n\r\n  \tif (!related) { return true; }\r\n\r\n  \ttry {\r\n  \t\twhile (related && (related !== el)) {\r\n  \t\t\trelated = related.parentNode;\r\n  \t\t}\r\n  \t} catch (err) {\r\n  \t\treturn false;\r\n  \t}\r\n  \treturn (related !== el);\r\n  }\n\n  var DomEvent = ({\n    on: on,\n    off: off,\n    stopPropagation: stopPropagation,\n    disableScrollPropagation: disableScrollPropagation,\n    disableClickPropagation: disableClickPropagation,\n    preventDefault: preventDefault,\n    stop: stop,\n    getMousePosition: getMousePosition,\n    getWheelDelta: getWheelDelta,\n    fakeStop: fakeStop,\n    skipped: skipped,\n    isExternalTarget: isExternalTarget,\n    addListener: on,\n    removeListener: off\n  });\n\n  /*\n   * @class PosAnimation\n   * @aka L.PosAnimation\n   * @inherits Evented\n   * Used internally for panning animations, utilizing CSS3 Transitions for modern browsers and a timer fallback for IE6-9.\n   *\n   * @example\n   * ```js\n   * var fx = new L.PosAnimation();\n   * fx.run(el, [300, 500], 0.5);\n   * ```\n   *\n   * @constructor L.PosAnimation()\n   * Creates a `PosAnimation` object.\n   *\n   */\n\n  var PosAnimation = Evented.extend({\n\n  \t// @method run(el: HTMLElement, newPos: Point, duration?: Number, easeLinearity?: Number)\n  \t// Run an animation of a given element to a new position, optionally setting\n  \t// duration in seconds (`0.25` by default) and easing linearity factor (3rd\n  \t// argument of the [cubic bezier curve](http://cubic-bezier.com/#0,0,.5,1),\n  \t// `0.5` by default).\n  \trun: function (el, newPos, duration, easeLinearity) {\n  \t\tthis.stop();\n\n  \t\tthis._el = el;\n  \t\tthis._inProgress = true;\n  \t\tthis._duration = duration || 0.25;\n  \t\tthis._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);\n\n  \t\tthis._startPos = getPosition(el);\n  \t\tthis._offset = newPos.subtract(this._startPos);\n  \t\tthis._startTime = +new Date();\n\n  \t\t// @event start: Event\n  \t\t// Fired when the animation starts\n  \t\tthis.fire('start');\n\n  \t\tthis._animate();\n  \t},\n\n  \t// @method stop()\n  \t// Stops the animation (if currently running).\n  \tstop: function () {\n  \t\tif (!this._inProgress) { return; }\n\n  \t\tthis._step(true);\n  \t\tthis._complete();\n  \t},\n\n  \t_animate: function () {\n  \t\t// animation loop\n  \t\tthis._animId = requestAnimFrame(this._animate, this);\n  \t\tthis._step();\n  \t},\n\n  \t_step: function (round) {\n  \t\tvar elapsed = (+new Date()) - this._startTime,\n  \t\t    duration = this._duration * 1000;\n\n  \t\tif (elapsed < duration) {\n  \t\t\tthis._runFrame(this._easeOut(elapsed / duration), round);\n  \t\t} else {\n  \t\t\tthis._runFrame(1);\n  \t\t\tthis._complete();\n  \t\t}\n  \t},\n\n  \t_runFrame: function (progress, round) {\n  \t\tvar pos = this._startPos.add(this._offset.multiplyBy(progress));\n  \t\tif (round) {\n  \t\t\tpos._round();\n  \t\t}\n  \t\tsetPosition(this._el, pos);\n\n  \t\t// @event step: Event\n  \t\t// Fired continuously during the animation.\n  \t\tthis.fire('step');\n  \t},\n\n  \t_complete: function () {\n  \t\tcancelAnimFrame(this._animId);\n\n  \t\tthis._inProgress = false;\n  \t\t// @event end: Event\n  \t\t// Fired when the animation ends.\n  \t\tthis.fire('end');\n  \t},\n\n  \t_easeOut: function (t) {\n  \t\treturn 1 - Math.pow(1 - t, this._easeOutPower);\n  \t}\n  });\n\n  /*\r\n   * @class Map\r\n   * @aka L.Map\r\n   * @inherits Evented\r\n   *\r\n   * The central class of the API — it is used to create a map on a page and manipulate it.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * // initialize the map on the \"map\" div with a given center and zoom\r\n   * var map = L.map('map', {\r\n   * \tcenter: [51.505, -0.09],\r\n   * \tzoom: 13\r\n   * });\r\n   * ```\r\n   *\r\n   */\r\n\r\n  var Map = Evented.extend({\r\n\r\n  \toptions: {\r\n  \t\t// @section Map State Options\r\n  \t\t// @option crs: CRS = L.CRS.EPSG3857\r\n  \t\t// The [Coordinate Reference System](#crs) to use. Don't change this if you're not\r\n  \t\t// sure what it means.\r\n  \t\tcrs: EPSG3857,\r\n\r\n  \t\t// @option center: LatLng = undefined\r\n  \t\t// Initial geographic center of the map\r\n  \t\tcenter: undefined,\r\n\r\n  \t\t// @option zoom: Number = undefined\r\n  \t\t// Initial map zoom level\r\n  \t\tzoom: undefined,\r\n\r\n  \t\t// @option minZoom: Number = *\r\n  \t\t// Minimum zoom level of the map.\r\n  \t\t// If not specified and at least one `GridLayer` or `TileLayer` is in the map,\r\n  \t\t// the lowest of their `minZoom` options will be used instead.\r\n  \t\tminZoom: undefined,\r\n\r\n  \t\t// @option maxZoom: Number = *\r\n  \t\t// Maximum zoom level of the map.\r\n  \t\t// If not specified and at least one `GridLayer` or `TileLayer` is in the map,\r\n  \t\t// the highest of their `maxZoom` options will be used instead.\r\n  \t\tmaxZoom: undefined,\r\n\r\n  \t\t// @option layers: Layer[] = []\r\n  \t\t// Array of layers that will be added to the map initially\r\n  \t\tlayers: [],\r\n\r\n  \t\t// @option maxBounds: LatLngBounds = null\r\n  \t\t// When this option is set, the map restricts the view to the given\r\n  \t\t// geographical bounds, bouncing the user back if the user tries to pan\r\n  \t\t// outside the view. To set the restriction dynamically, use\r\n  \t\t// [`setMaxBounds`](#map-setmaxbounds) method.\r\n  \t\tmaxBounds: undefined,\r\n\r\n  \t\t// @option renderer: Renderer = *\r\n  \t\t// The default method for drawing vector layers on the map. `L.SVG`\r\n  \t\t// or `L.Canvas` by default depending on browser support.\r\n  \t\trenderer: undefined,\r\n\r\n\r\n  \t\t// @section Animation Options\r\n  \t\t// @option zoomAnimation: Boolean = true\r\n  \t\t// Whether the map zoom animation is enabled. By default it's enabled\r\n  \t\t// in all browsers that support CSS3 Transitions except Android.\r\n  \t\tzoomAnimation: true,\r\n\r\n  \t\t// @option zoomAnimationThreshold: Number = 4\r\n  \t\t// Won't animate zoom if the zoom difference exceeds this value.\r\n  \t\tzoomAnimationThreshold: 4,\r\n\r\n  \t\t// @option fadeAnimation: Boolean = true\r\n  \t\t// Whether the tile fade animation is enabled. By default it's enabled\r\n  \t\t// in all browsers that support CSS3 Transitions except Android.\r\n  \t\tfadeAnimation: true,\r\n\r\n  \t\t// @option markerZoomAnimation: Boolean = true\r\n  \t\t// Whether markers animate their zoom with the zoom animation, if disabled\r\n  \t\t// they will disappear for the length of the animation. By default it's\r\n  \t\t// enabled in all browsers that support CSS3 Transitions except Android.\r\n  \t\tmarkerZoomAnimation: true,\r\n\r\n  \t\t// @option transform3DLimit: Number = 2^23\r\n  \t\t// Defines the maximum size of a CSS translation transform. The default\r\n  \t\t// value should not be changed unless a web browser positions layers in\r\n  \t\t// the wrong place after doing a large `panBy`.\r\n  \t\ttransform3DLimit: 8388608, // Precision limit of a 32-bit float\r\n\r\n  \t\t// @section Interaction Options\r\n  \t\t// @option zoomSnap: Number = 1\r\n  \t\t// Forces the map's zoom level to always be a multiple of this, particularly\r\n  \t\t// right after a [`fitBounds()`](#map-fitbounds) or a pinch-zoom.\r\n  \t\t// By default, the zoom level snaps to the nearest integer; lower values\r\n  \t\t// (e.g. `0.5` or `0.1`) allow for greater granularity. A value of `0`\r\n  \t\t// means the zoom level will not be snapped after `fitBounds` or a pinch-zoom.\r\n  \t\tzoomSnap: 1,\r\n\r\n  \t\t// @option zoomDelta: Number = 1\r\n  \t\t// Controls how much the map's zoom level will change after a\r\n  \t\t// [`zoomIn()`](#map-zoomin), [`zoomOut()`](#map-zoomout), pressing `+`\r\n  \t\t// or `-` on the keyboard, or using the [zoom controls](#control-zoom).\r\n  \t\t// Values smaller than `1` (e.g. `0.5`) allow for greater granularity.\r\n  \t\tzoomDelta: 1,\r\n\r\n  \t\t// @option trackResize: Boolean = true\r\n  \t\t// Whether the map automatically handles browser window resize to update itself.\r\n  \t\ttrackResize: true\r\n  \t},\r\n\r\n  \tinitialize: function (id, options) { // (HTMLElement or String, Object)\r\n  \t\toptions = setOptions(this, options);\r\n\r\n  \t\t// Make sure to assign internal flags at the beginning,\r\n  \t\t// to avoid inconsistent state in some edge cases.\r\n  \t\tthis._handlers = [];\r\n  \t\tthis._layers = {};\r\n  \t\tthis._zoomBoundLayers = {};\r\n  \t\tthis._sizeChanged = true;\r\n\r\n  \t\tthis._initContainer(id);\r\n  \t\tthis._initLayout();\r\n\r\n  \t\t// hack for https://github.com/Leaflet/Leaflet/issues/1980\r\n  \t\tthis._onResize = bind(this._onResize, this);\r\n\r\n  \t\tthis._initEvents();\r\n\r\n  \t\tif (options.maxBounds) {\r\n  \t\t\tthis.setMaxBounds(options.maxBounds);\r\n  \t\t}\r\n\r\n  \t\tif (options.zoom !== undefined) {\r\n  \t\t\tthis._zoom = this._limitZoom(options.zoom);\r\n  \t\t}\r\n\r\n  \t\tif (options.center && options.zoom !== undefined) {\r\n  \t\t\tthis.setView(toLatLng(options.center), options.zoom, {reset: true});\r\n  \t\t}\r\n\r\n  \t\tthis.callInitHooks();\r\n\r\n  \t\t// don't animate on browsers without hardware-accelerated transitions or old Android/Opera\r\n  \t\tthis._zoomAnimated = TRANSITION && any3d && !mobileOpera &&\r\n  \t\t\t\tthis.options.zoomAnimation;\r\n\r\n  \t\t// zoom transitions run with the same duration for all layers, so if one of transitionend events\r\n  \t\t// happens after starting zoom animation (propagating to the map pane), we know that it ended globally\r\n  \t\tif (this._zoomAnimated) {\r\n  \t\t\tthis._createAnimProxy();\r\n  \t\t\ton(this._proxy, TRANSITION_END, this._catchTransitionEnd, this);\r\n  \t\t}\r\n\r\n  \t\tthis._addLayers(this.options.layers);\r\n  \t},\r\n\r\n\r\n  \t// @section Methods for modifying map state\r\n\r\n  \t// @method setView(center: LatLng, zoom: Number, options?: Zoom/pan options): this\r\n  \t// Sets the view of the map (geographical center and zoom) with the given\r\n  \t// animation options.\r\n  \tsetView: function (center, zoom, options) {\r\n\r\n  \t\tzoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);\r\n  \t\tcenter = this._limitCenter(toLatLng(center), zoom, this.options.maxBounds);\r\n  \t\toptions = options || {};\r\n\r\n  \t\tthis._stop();\r\n\r\n  \t\tif (this._loaded && !options.reset && options !== true) {\r\n\r\n  \t\t\tif (options.animate !== undefined) {\r\n  \t\t\t\toptions.zoom = extend({animate: options.animate}, options.zoom);\r\n  \t\t\t\toptions.pan = extend({animate: options.animate, duration: options.duration}, options.pan);\r\n  \t\t\t}\r\n\r\n  \t\t\t// try animating pan or zoom\r\n  \t\t\tvar moved = (this._zoom !== zoom) ?\r\n  \t\t\t\tthis._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :\r\n  \t\t\t\tthis._tryAnimatedPan(center, options.pan);\r\n\r\n  \t\t\tif (moved) {\r\n  \t\t\t\t// prevent resize handler call, the view will refresh after animation anyway\r\n  \t\t\t\tclearTimeout(this._sizeTimer);\r\n  \t\t\t\treturn this;\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\t// animation didn't start, just reset the map view\r\n  \t\tthis._resetView(center, zoom);\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method setZoom(zoom: Number, options?: Zoom/pan options): this\r\n  \t// Sets the zoom of the map.\r\n  \tsetZoom: function (zoom, options) {\r\n  \t\tif (!this._loaded) {\r\n  \t\t\tthis._zoom = zoom;\r\n  \t\t\treturn this;\r\n  \t\t}\r\n  \t\treturn this.setView(this.getCenter(), zoom, {zoom: options});\r\n  \t},\r\n\r\n  \t// @method zoomIn(delta?: Number, options?: Zoom options): this\r\n  \t// Increases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).\r\n  \tzoomIn: function (delta, options) {\r\n  \t\tdelta = delta || (any3d ? this.options.zoomDelta : 1);\r\n  \t\treturn this.setZoom(this._zoom + delta, options);\r\n  \t},\r\n\r\n  \t// @method zoomOut(delta?: Number, options?: Zoom options): this\r\n  \t// Decreases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).\r\n  \tzoomOut: function (delta, options) {\r\n  \t\tdelta = delta || (any3d ? this.options.zoomDelta : 1);\r\n  \t\treturn this.setZoom(this._zoom - delta, options);\r\n  \t},\r\n\r\n  \t// @method setZoomAround(latlng: LatLng, zoom: Number, options: Zoom options): this\r\n  \t// Zooms the map while keeping a specified geographical point on the map\r\n  \t// stationary (e.g. used internally for scroll zoom and double-click zoom).\r\n  \t// @alternative\r\n  \t// @method setZoomAround(offset: Point, zoom: Number, options: Zoom options): this\r\n  \t// Zooms the map while keeping a specified pixel on the map (relative to the top-left corner) stationary.\r\n  \tsetZoomAround: function (latlng, zoom, options) {\r\n  \t\tvar scale = this.getZoomScale(zoom),\r\n  \t\t    viewHalf = this.getSize().divideBy(2),\r\n  \t\t    containerPoint = latlng instanceof Point ? latlng : this.latLngToContainerPoint(latlng),\r\n\r\n  \t\t    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),\r\n  \t\t    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));\r\n\r\n  \t\treturn this.setView(newCenter, zoom, {zoom: options});\r\n  \t},\r\n\r\n  \t_getBoundsCenterZoom: function (bounds, options) {\r\n\r\n  \t\toptions = options || {};\r\n  \t\tbounds = bounds.getBounds ? bounds.getBounds() : toLatLngBounds(bounds);\r\n\r\n  \t\tvar paddingTL = toPoint(options.paddingTopLeft || options.padding || [0, 0]),\r\n  \t\t    paddingBR = toPoint(options.paddingBottomRight || options.padding || [0, 0]),\r\n\r\n  \t\t    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));\r\n\r\n  \t\tzoom = (typeof options.maxZoom === 'number') ? Math.min(options.maxZoom, zoom) : zoom;\r\n\r\n  \t\tif (zoom === Infinity) {\r\n  \t\t\treturn {\r\n  \t\t\t\tcenter: bounds.getCenter(),\r\n  \t\t\t\tzoom: zoom\r\n  \t\t\t};\r\n  \t\t}\r\n\r\n  \t\tvar paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),\r\n\r\n  \t\t    swPoint = this.project(bounds.getSouthWest(), zoom),\r\n  \t\t    nePoint = this.project(bounds.getNorthEast(), zoom),\r\n  \t\t    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);\r\n\r\n  \t\treturn {\r\n  \t\t\tcenter: center,\r\n  \t\t\tzoom: zoom\r\n  \t\t};\r\n  \t},\r\n\r\n  \t// @method fitBounds(bounds: LatLngBounds, options?: fitBounds options): this\r\n  \t// Sets a map view that contains the given geographical bounds with the\r\n  \t// maximum zoom level possible.\r\n  \tfitBounds: function (bounds, options) {\r\n\r\n  \t\tbounds = toLatLngBounds(bounds);\r\n\r\n  \t\tif (!bounds.isValid()) {\r\n  \t\t\tthrow new Error('Bounds are not valid.');\r\n  \t\t}\r\n\r\n  \t\tvar target = this._getBoundsCenterZoom(bounds, options);\r\n  \t\treturn this.setView(target.center, target.zoom, options);\r\n  \t},\r\n\r\n  \t// @method fitWorld(options?: fitBounds options): this\r\n  \t// Sets a map view that mostly contains the whole world with the maximum\r\n  \t// zoom level possible.\r\n  \tfitWorld: function (options) {\r\n  \t\treturn this.fitBounds([[-90, -180], [90, 180]], options);\r\n  \t},\r\n\r\n  \t// @method panTo(latlng: LatLng, options?: Pan options): this\r\n  \t// Pans the map to a given center.\r\n  \tpanTo: function (center, options) { // (LatLng)\r\n  \t\treturn this.setView(center, this._zoom, {pan: options});\r\n  \t},\r\n\r\n  \t// @method panBy(offset: Point, options?: Pan options): this\r\n  \t// Pans the map by a given number of pixels (animated).\r\n  \tpanBy: function (offset, options) {\r\n  \t\toffset = toPoint(offset).round();\r\n  \t\toptions = options || {};\r\n\r\n  \t\tif (!offset.x && !offset.y) {\r\n  \t\t\treturn this.fire('moveend');\r\n  \t\t}\r\n  \t\t// If we pan too far, Chrome gets issues with tiles\r\n  \t\t// and makes them disappear or appear in the wrong place (slightly offset) #2602\r\n  \t\tif (options.animate !== true && !this.getSize().contains(offset)) {\r\n  \t\t\tthis._resetView(this.unproject(this.project(this.getCenter()).add(offset)), this.getZoom());\r\n  \t\t\treturn this;\r\n  \t\t}\r\n\r\n  \t\tif (!this._panAnim) {\r\n  \t\t\tthis._panAnim = new PosAnimation();\r\n\r\n  \t\t\tthis._panAnim.on({\r\n  \t\t\t\t'step': this._onPanTransitionStep,\r\n  \t\t\t\t'end': this._onPanTransitionEnd\r\n  \t\t\t}, this);\r\n  \t\t}\r\n\r\n  \t\t// don't fire movestart if animating inertia\r\n  \t\tif (!options.noMoveStart) {\r\n  \t\t\tthis.fire('movestart');\r\n  \t\t}\r\n\r\n  \t\t// animate pan unless animate: false specified\r\n  \t\tif (options.animate !== false) {\r\n  \t\t\taddClass(this._mapPane, 'leaflet-pan-anim');\r\n\r\n  \t\t\tvar newPos = this._getMapPanePos().subtract(offset).round();\r\n  \t\t\tthis._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);\r\n  \t\t} else {\r\n  \t\t\tthis._rawPanBy(offset);\r\n  \t\t\tthis.fire('move').fire('moveend');\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method flyTo(latlng: LatLng, zoom?: Number, options?: Zoom/pan options): this\r\n  \t// Sets the view of the map (geographical center and zoom) performing a smooth\r\n  \t// pan-zoom animation.\r\n  \tflyTo: function (targetCenter, targetZoom, options) {\r\n\r\n  \t\toptions = options || {};\r\n  \t\tif (options.animate === false || !any3d) {\r\n  \t\t\treturn this.setView(targetCenter, targetZoom, options);\r\n  \t\t}\r\n\r\n  \t\tthis._stop();\r\n\r\n  \t\tvar from = this.project(this.getCenter()),\r\n  \t\t    to = this.project(targetCenter),\r\n  \t\t    size = this.getSize(),\r\n  \t\t    startZoom = this._zoom;\r\n\r\n  \t\ttargetCenter = toLatLng(targetCenter);\r\n  \t\ttargetZoom = targetZoom === undefined ? startZoom : targetZoom;\r\n\r\n  \t\tvar w0 = Math.max(size.x, size.y),\r\n  \t\t    w1 = w0 * this.getZoomScale(startZoom, targetZoom),\r\n  \t\t    u1 = (to.distanceTo(from)) || 1,\r\n  \t\t    rho = 1.42,\r\n  \t\t    rho2 = rho * rho;\r\n\r\n  \t\tfunction r(i) {\r\n  \t\t\tvar s1 = i ? -1 : 1,\r\n  \t\t\t    s2 = i ? w1 : w0,\r\n  \t\t\t    t1 = w1 * w1 - w0 * w0 + s1 * rho2 * rho2 * u1 * u1,\r\n  \t\t\t    b1 = 2 * s2 * rho2 * u1,\r\n  \t\t\t    b = t1 / b1,\r\n  \t\t\t    sq = Math.sqrt(b * b + 1) - b;\r\n\r\n  \t\t\t    // workaround for floating point precision bug when sq = 0, log = -Infinite,\r\n  \t\t\t    // thus triggering an infinite loop in flyTo\r\n  \t\t\t    var log = sq < 0.000000001 ? -18 : Math.log(sq);\r\n\r\n  \t\t\treturn log;\r\n  \t\t}\r\n\r\n  \t\tfunction sinh(n) { return (Math.exp(n) - Math.exp(-n)) / 2; }\r\n  \t\tfunction cosh(n) { return (Math.exp(n) + Math.exp(-n)) / 2; }\r\n  \t\tfunction tanh(n) { return sinh(n) / cosh(n); }\r\n\r\n  \t\tvar r0 = r(0);\r\n\r\n  \t\tfunction w(s) { return w0 * (cosh(r0) / cosh(r0 + rho * s)); }\r\n  \t\tfunction u(s) { return w0 * (cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2; }\r\n\r\n  \t\tfunction easeOut(t) { return 1 - Math.pow(1 - t, 1.5); }\r\n\r\n  \t\tvar start = Date.now(),\r\n  \t\t    S = (r(1) - r0) / rho,\r\n  \t\t    duration = options.duration ? 1000 * options.duration : 1000 * S * 0.8;\r\n\r\n  \t\tfunction frame() {\r\n  \t\t\tvar t = (Date.now() - start) / duration,\r\n  \t\t\t    s = easeOut(t) * S;\r\n\r\n  \t\t\tif (t <= 1) {\r\n  \t\t\t\tthis._flyToFrame = requestAnimFrame(frame, this);\r\n\r\n  \t\t\t\tthis._move(\r\n  \t\t\t\t\tthis.unproject(from.add(to.subtract(from).multiplyBy(u(s) / u1)), startZoom),\r\n  \t\t\t\t\tthis.getScaleZoom(w0 / w(s), startZoom),\r\n  \t\t\t\t\t{flyTo: true});\r\n\r\n  \t\t\t} else {\r\n  \t\t\t\tthis\r\n  \t\t\t\t\t._move(targetCenter, targetZoom)\r\n  \t\t\t\t\t._moveEnd(true);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tthis._moveStart(true, options.noMoveStart);\r\n\r\n  \t\tframe.call(this);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method flyToBounds(bounds: LatLngBounds, options?: fitBounds options): this\r\n  \t// Sets the view of the map with a smooth animation like [`flyTo`](#map-flyto),\r\n  \t// but takes a bounds parameter like [`fitBounds`](#map-fitbounds).\r\n  \tflyToBounds: function (bounds, options) {\r\n  \t\tvar target = this._getBoundsCenterZoom(bounds, options);\r\n  \t\treturn this.flyTo(target.center, target.zoom, options);\r\n  \t},\r\n\r\n  \t// @method setMaxBounds(bounds: LatLngBounds): this\r\n  \t// Restricts the map view to the given bounds (see the [maxBounds](#map-maxbounds) option).\r\n  \tsetMaxBounds: function (bounds) {\r\n  \t\tbounds = toLatLngBounds(bounds);\r\n\r\n  \t\tif (!bounds.isValid()) {\r\n  \t\t\tthis.options.maxBounds = null;\r\n  \t\t\treturn this.off('moveend', this._panInsideMaxBounds);\r\n  \t\t} else if (this.options.maxBounds) {\r\n  \t\t\tthis.off('moveend', this._panInsideMaxBounds);\r\n  \t\t}\r\n\r\n  \t\tthis.options.maxBounds = bounds;\r\n\r\n  \t\tif (this._loaded) {\r\n  \t\t\tthis._panInsideMaxBounds();\r\n  \t\t}\r\n\r\n  \t\treturn this.on('moveend', this._panInsideMaxBounds);\r\n  \t},\r\n\r\n  \t// @method setMinZoom(zoom: Number): this\r\n  \t// Sets the lower limit for the available zoom levels (see the [minZoom](#map-minzoom) option).\r\n  \tsetMinZoom: function (zoom) {\r\n  \t\tvar oldZoom = this.options.minZoom;\r\n  \t\tthis.options.minZoom = zoom;\r\n\r\n  \t\tif (this._loaded && oldZoom !== zoom) {\r\n  \t\t\tthis.fire('zoomlevelschange');\r\n\r\n  \t\t\tif (this.getZoom() < this.options.minZoom) {\r\n  \t\t\t\treturn this.setZoom(zoom);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method setMaxZoom(zoom: Number): this\r\n  \t// Sets the upper limit for the available zoom levels (see the [maxZoom](#map-maxzoom) option).\r\n  \tsetMaxZoom: function (zoom) {\r\n  \t\tvar oldZoom = this.options.maxZoom;\r\n  \t\tthis.options.maxZoom = zoom;\r\n\r\n  \t\tif (this._loaded && oldZoom !== zoom) {\r\n  \t\t\tthis.fire('zoomlevelschange');\r\n\r\n  \t\t\tif (this.getZoom() > this.options.maxZoom) {\r\n  \t\t\t\treturn this.setZoom(zoom);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method panInsideBounds(bounds: LatLngBounds, options?: Pan options): this\r\n  \t// Pans the map to the closest view that would lie inside the given bounds (if it's not already), controlling the animation using the options specific, if any.\r\n  \tpanInsideBounds: function (bounds, options) {\r\n  \t\tthis._enforcingBounds = true;\r\n  \t\tvar center = this.getCenter(),\r\n  \t\t    newCenter = this._limitCenter(center, this._zoom, toLatLngBounds(bounds));\r\n\r\n  \t\tif (!center.equals(newCenter)) {\r\n  \t\t\tthis.panTo(newCenter, options);\r\n  \t\t}\r\n\r\n  \t\tthis._enforcingBounds = false;\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method panInside(latlng: LatLng, options?: options): this\r\n  \t// Pans the map the minimum amount to make the `latlng` visible. Use\r\n  \t// `padding`, `paddingTopLeft` and `paddingTopRight` options to fit\r\n  \t// the display to more restricted bounds, like [`fitBounds`](#map-fitbounds).\r\n  \t// If `latlng` is already within the (optionally padded) display bounds,\r\n  \t// the map will not be panned.\r\n  \tpanInside: function (latlng, options) {\r\n  \t\toptions = options || {};\r\n\r\n  \t\tvar paddingTL = toPoint(options.paddingTopLeft || options.padding || [0, 0]),\r\n  \t\t    paddingBR = toPoint(options.paddingBottomRight || options.padding || [0, 0]),\r\n  \t\t    center = this.getCenter(),\r\n  \t\t    pixelCenter = this.project(center),\r\n  \t\t    pixelPoint = this.project(latlng),\r\n  \t\t    pixelBounds = this.getPixelBounds(),\r\n  \t\t    halfPixelBounds = pixelBounds.getSize().divideBy(2),\r\n  \t\t    paddedBounds = toBounds([pixelBounds.min.add(paddingTL), pixelBounds.max.subtract(paddingBR)]);\r\n\r\n  \t\tif (!paddedBounds.contains(pixelPoint)) {\r\n  \t\t\tthis._enforcingBounds = true;\r\n  \t\t\tvar diff = pixelCenter.subtract(pixelPoint),\r\n  \t\t\t    newCenter = toPoint(pixelPoint.x + diff.x, pixelPoint.y + diff.y);\r\n\r\n  \t\t\tif (pixelPoint.x < paddedBounds.min.x || pixelPoint.x > paddedBounds.max.x) {\r\n  \t\t\t\tnewCenter.x = pixelCenter.x - diff.x;\r\n  \t\t\t\tif (diff.x > 0) {\r\n  \t\t\t\t\tnewCenter.x += halfPixelBounds.x - paddingTL.x;\r\n  \t\t\t\t} else {\r\n  \t\t\t\t\tnewCenter.x -= halfPixelBounds.x - paddingBR.x;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t\tif (pixelPoint.y < paddedBounds.min.y || pixelPoint.y > paddedBounds.max.y) {\r\n  \t\t\t\tnewCenter.y = pixelCenter.y - diff.y;\r\n  \t\t\t\tif (diff.y > 0) {\r\n  \t\t\t\t\tnewCenter.y += halfPixelBounds.y - paddingTL.y;\r\n  \t\t\t\t} else {\r\n  \t\t\t\t\tnewCenter.y -= halfPixelBounds.y - paddingBR.y;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t\tthis.panTo(this.unproject(newCenter), options);\r\n  \t\t\tthis._enforcingBounds = false;\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method invalidateSize(options: Zoom/pan options): this\r\n  \t// Checks if the map container size changed and updates the map if so —\r\n  \t// call it after you've changed the map size dynamically, also animating\r\n  \t// pan by default. If `options.pan` is `false`, panning will not occur.\r\n  \t// If `options.debounceMoveend` is `true`, it will delay `moveend` event so\r\n  \t// that it doesn't happen often even if the method is called many\r\n  \t// times in a row.\r\n\r\n  \t// @alternative\r\n  \t// @method invalidateSize(animate: Boolean): this\r\n  \t// Checks if the map container size changed and updates the map if so —\r\n  \t// call it after you've changed the map size dynamically, also animating\r\n  \t// pan by default.\r\n  \tinvalidateSize: function (options) {\r\n  \t\tif (!this._loaded) { return this; }\r\n\r\n  \t\toptions = extend({\r\n  \t\t\tanimate: false,\r\n  \t\t\tpan: true\r\n  \t\t}, options === true ? {animate: true} : options);\r\n\r\n  \t\tvar oldSize = this.getSize();\r\n  \t\tthis._sizeChanged = true;\r\n  \t\tthis._lastCenter = null;\r\n\r\n  \t\tvar newSize = this.getSize(),\r\n  \t\t    oldCenter = oldSize.divideBy(2).round(),\r\n  \t\t    newCenter = newSize.divideBy(2).round(),\r\n  \t\t    offset = oldCenter.subtract(newCenter);\r\n\r\n  \t\tif (!offset.x && !offset.y) { return this; }\r\n\r\n  \t\tif (options.animate && options.pan) {\r\n  \t\t\tthis.panBy(offset);\r\n\r\n  \t\t} else {\r\n  \t\t\tif (options.pan) {\r\n  \t\t\t\tthis._rawPanBy(offset);\r\n  \t\t\t}\r\n\r\n  \t\t\tthis.fire('move');\r\n\r\n  \t\t\tif (options.debounceMoveend) {\r\n  \t\t\t\tclearTimeout(this._sizeTimer);\r\n  \t\t\t\tthis._sizeTimer = setTimeout(bind(this.fire, this, 'moveend'), 200);\r\n  \t\t\t} else {\r\n  \t\t\t\tthis.fire('moveend');\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\t// @section Map state change events\r\n  \t\t// @event resize: ResizeEvent\r\n  \t\t// Fired when the map is resized.\r\n  \t\treturn this.fire('resize', {\r\n  \t\t\toldSize: oldSize,\r\n  \t\t\tnewSize: newSize\r\n  \t\t});\r\n  \t},\r\n\r\n  \t// @section Methods for modifying map state\r\n  \t// @method stop(): this\r\n  \t// Stops the currently running `panTo` or `flyTo` animation, if any.\r\n  \tstop: function () {\r\n  \t\tthis.setZoom(this._limitZoom(this._zoom));\r\n  \t\tif (!this.options.zoomSnap) {\r\n  \t\t\tthis.fire('viewreset');\r\n  \t\t}\r\n  \t\treturn this._stop();\r\n  \t},\r\n\r\n  \t// @section Geolocation methods\r\n  \t// @method locate(options?: Locate options): this\r\n  \t// Tries to locate the user using the Geolocation API, firing a [`locationfound`](#map-locationfound)\r\n  \t// event with location data on success or a [`locationerror`](#map-locationerror) event on failure,\r\n  \t// and optionally sets the map view to the user's location with respect to\r\n  \t// detection accuracy (or to the world view if geolocation failed).\r\n  \t// Note that, if your page doesn't use HTTPS, this method will fail in\r\n  \t// modern browsers ([Chrome 50 and newer](https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins))\r\n  \t// See `Locate options` for more details.\r\n  \tlocate: function (options) {\r\n\r\n  \t\toptions = this._locateOptions = extend({\r\n  \t\t\ttimeout: 10000,\r\n  \t\t\twatch: false\r\n  \t\t\t// setView: false\r\n  \t\t\t// maxZoom: <Number>\r\n  \t\t\t// maximumAge: 0\r\n  \t\t\t// enableHighAccuracy: false\r\n  \t\t}, options);\r\n\r\n  \t\tif (!('geolocation' in navigator)) {\r\n  \t\t\tthis._handleGeolocationError({\r\n  \t\t\t\tcode: 0,\r\n  \t\t\t\tmessage: 'Geolocation not supported.'\r\n  \t\t\t});\r\n  \t\t\treturn this;\r\n  \t\t}\r\n\r\n  \t\tvar onResponse = bind(this._handleGeolocationResponse, this),\r\n  \t\t    onError = bind(this._handleGeolocationError, this);\r\n\r\n  \t\tif (options.watch) {\r\n  \t\t\tthis._locationWatchId =\r\n  \t\t\t        navigator.geolocation.watchPosition(onResponse, onError, options);\r\n  \t\t} else {\r\n  \t\t\tnavigator.geolocation.getCurrentPosition(onResponse, onError, options);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method stopLocate(): this\r\n  \t// Stops watching location previously initiated by `map.locate({watch: true})`\r\n  \t// and aborts resetting the map view if map.locate was called with\r\n  \t// `{setView: true}`.\r\n  \tstopLocate: function () {\r\n  \t\tif (navigator.geolocation && navigator.geolocation.clearWatch) {\r\n  \t\t\tnavigator.geolocation.clearWatch(this._locationWatchId);\r\n  \t\t}\r\n  \t\tif (this._locateOptions) {\r\n  \t\t\tthis._locateOptions.setView = false;\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_handleGeolocationError: function (error) {\r\n  \t\tvar c = error.code,\r\n  \t\t    message = error.message ||\r\n  \t\t            (c === 1 ? 'permission denied' :\r\n  \t\t            (c === 2 ? 'position unavailable' : 'timeout'));\r\n\r\n  \t\tif (this._locateOptions.setView && !this._loaded) {\r\n  \t\t\tthis.fitWorld();\r\n  \t\t}\r\n\r\n  \t\t// @section Location events\r\n  \t\t// @event locationerror: ErrorEvent\r\n  \t\t// Fired when geolocation (using the [`locate`](#map-locate) method) failed.\r\n  \t\tthis.fire('locationerror', {\r\n  \t\t\tcode: c,\r\n  \t\t\tmessage: 'Geolocation error: ' + message + '.'\r\n  \t\t});\r\n  \t},\r\n\r\n  \t_handleGeolocationResponse: function (pos) {\r\n  \t\tvar lat = pos.coords.latitude,\r\n  \t\t    lng = pos.coords.longitude,\r\n  \t\t    latlng = new LatLng(lat, lng),\r\n  \t\t    bounds = latlng.toBounds(pos.coords.accuracy * 2),\r\n  \t\t    options = this._locateOptions;\r\n\r\n  \t\tif (options.setView) {\r\n  \t\t\tvar zoom = this.getBoundsZoom(bounds);\r\n  \t\t\tthis.setView(latlng, options.maxZoom ? Math.min(zoom, options.maxZoom) : zoom);\r\n  \t\t}\r\n\r\n  \t\tvar data = {\r\n  \t\t\tlatlng: latlng,\r\n  \t\t\tbounds: bounds,\r\n  \t\t\ttimestamp: pos.timestamp\r\n  \t\t};\r\n\r\n  \t\tfor (var i in pos.coords) {\r\n  \t\t\tif (typeof pos.coords[i] === 'number') {\r\n  \t\t\t\tdata[i] = pos.coords[i];\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\t// @event locationfound: LocationEvent\r\n  \t\t// Fired when geolocation (using the [`locate`](#map-locate) method)\r\n  \t\t// went successfully.\r\n  \t\tthis.fire('locationfound', data);\r\n  \t},\r\n\r\n  \t// TODO Appropriate docs section?\r\n  \t// @section Other Methods\r\n  \t// @method addHandler(name: String, HandlerClass: Function): this\r\n  \t// Adds a new `Handler` to the map, given its name and constructor function.\r\n  \taddHandler: function (name, HandlerClass) {\r\n  \t\tif (!HandlerClass) { return this; }\r\n\r\n  \t\tvar handler = this[name] = new HandlerClass(this);\r\n\r\n  \t\tthis._handlers.push(handler);\r\n\r\n  \t\tif (this.options[name]) {\r\n  \t\t\thandler.enable();\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method remove(): this\r\n  \t// Destroys the map and clears all related event listeners.\r\n  \tremove: function () {\r\n\r\n  \t\tthis._initEvents(true);\r\n  \t\tthis.off('moveend', this._panInsideMaxBounds);\r\n\r\n  \t\tif (this._containerId !== this._container._leaflet_id) {\r\n  \t\t\tthrow new Error('Map container is being reused by another instance');\r\n  \t\t}\r\n\r\n  \t\ttry {\r\n  \t\t\t// throws error in IE6-8\r\n  \t\t\tdelete this._container._leaflet_id;\r\n  \t\t\tdelete this._containerId;\r\n  \t\t} catch (e) {\r\n  \t\t\t/*eslint-disable */\r\n  \t\t\tthis._container._leaflet_id = undefined;\r\n  \t\t\t/* eslint-enable */\r\n  \t\t\tthis._containerId = undefined;\r\n  \t\t}\r\n\r\n  \t\tif (this._locationWatchId !== undefined) {\r\n  \t\t\tthis.stopLocate();\r\n  \t\t}\r\n\r\n  \t\tthis._stop();\r\n\r\n  \t\tremove(this._mapPane);\r\n\r\n  \t\tif (this._clearControlPos) {\r\n  \t\t\tthis._clearControlPos();\r\n  \t\t}\r\n  \t\tif (this._resizeRequest) {\r\n  \t\t\tcancelAnimFrame(this._resizeRequest);\r\n  \t\t\tthis._resizeRequest = null;\r\n  \t\t}\r\n\r\n  \t\tthis._clearHandlers();\r\n\r\n  \t\tif (this._loaded) {\r\n  \t\t\t// @section Map state change events\r\n  \t\t\t// @event unload: Event\r\n  \t\t\t// Fired when the map is destroyed with [remove](#map-remove) method.\r\n  \t\t\tthis.fire('unload');\r\n  \t\t}\r\n\r\n  \t\tvar i;\r\n  \t\tfor (i in this._layers) {\r\n  \t\t\tthis._layers[i].remove();\r\n  \t\t}\r\n  \t\tfor (i in this._panes) {\r\n  \t\t\tremove(this._panes[i]);\r\n  \t\t}\r\n\r\n  \t\tthis._layers = [];\r\n  \t\tthis._panes = [];\r\n  \t\tdelete this._mapPane;\r\n  \t\tdelete this._renderer;\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @section Other Methods\r\n  \t// @method createPane(name: String, container?: HTMLElement): HTMLElement\r\n  \t// Creates a new [map pane](#map-pane) with the given name if it doesn't exist already,\r\n  \t// then returns it. The pane is created as a child of `container`, or\r\n  \t// as a child of the main map pane if not set.\r\n  \tcreatePane: function (name, container) {\r\n  \t\tvar className = 'leaflet-pane' + (name ? ' leaflet-' + name.replace('Pane', '') + '-pane' : ''),\r\n  \t\t    pane = create$1('div', className, container || this._mapPane);\r\n\r\n  \t\tif (name) {\r\n  \t\t\tthis._panes[name] = pane;\r\n  \t\t}\r\n  \t\treturn pane;\r\n  \t},\r\n\r\n  \t// @section Methods for Getting Map State\r\n\r\n  \t// @method getCenter(): LatLng\r\n  \t// Returns the geographical center of the map view\r\n  \tgetCenter: function () {\r\n  \t\tthis._checkIfLoaded();\r\n\r\n  \t\tif (this._lastCenter && !this._moved()) {\r\n  \t\t\treturn this._lastCenter;\r\n  \t\t}\r\n  \t\treturn this.layerPointToLatLng(this._getCenterLayerPoint());\r\n  \t},\r\n\r\n  \t// @method getZoom(): Number\r\n  \t// Returns the current zoom level of the map view\r\n  \tgetZoom: function () {\r\n  \t\treturn this._zoom;\r\n  \t},\r\n\r\n  \t// @method getBounds(): LatLngBounds\r\n  \t// Returns the geographical bounds visible in the current map view\r\n  \tgetBounds: function () {\r\n  \t\tvar bounds = this.getPixelBounds(),\r\n  \t\t    sw = this.unproject(bounds.getBottomLeft()),\r\n  \t\t    ne = this.unproject(bounds.getTopRight());\r\n\r\n  \t\treturn new LatLngBounds(sw, ne);\r\n  \t},\r\n\r\n  \t// @method getMinZoom(): Number\r\n  \t// Returns the minimum zoom level of the map (if set in the `minZoom` option of the map or of any layers), or `0` by default.\r\n  \tgetMinZoom: function () {\r\n  \t\treturn this.options.minZoom === undefined ? this._layersMinZoom || 0 : this.options.minZoom;\r\n  \t},\r\n\r\n  \t// @method getMaxZoom(): Number\r\n  \t// Returns the maximum zoom level of the map (if set in the `maxZoom` option of the map or of any layers).\r\n  \tgetMaxZoom: function () {\r\n  \t\treturn this.options.maxZoom === undefined ?\r\n  \t\t\t(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :\r\n  \t\t\tthis.options.maxZoom;\r\n  \t},\r\n\r\n  \t// @method getBoundsZoom(bounds: LatLngBounds, inside?: Boolean, padding?: Point): Number\r\n  \t// Returns the maximum zoom level on which the given bounds fit to the map\r\n  \t// view in its entirety. If `inside` (optional) is set to `true`, the method\r\n  \t// instead returns the minimum zoom level on which the map view fits into\r\n  \t// the given bounds in its entirety.\r\n  \tgetBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number\r\n  \t\tbounds = toLatLngBounds(bounds);\r\n  \t\tpadding = toPoint(padding || [0, 0]);\r\n\r\n  \t\tvar zoom = this.getZoom() || 0,\r\n  \t\t    min = this.getMinZoom(),\r\n  \t\t    max = this.getMaxZoom(),\r\n  \t\t    nw = bounds.getNorthWest(),\r\n  \t\t    se = bounds.getSouthEast(),\r\n  \t\t    size = this.getSize().subtract(padding),\r\n  \t\t    boundsSize = toBounds(this.project(se, zoom), this.project(nw, zoom)).getSize(),\r\n  \t\t    snap = any3d ? this.options.zoomSnap : 1,\r\n  \t\t    scalex = size.x / boundsSize.x,\r\n  \t\t    scaley = size.y / boundsSize.y,\r\n  \t\t    scale = inside ? Math.max(scalex, scaley) : Math.min(scalex, scaley);\r\n\r\n  \t\tzoom = this.getScaleZoom(scale, zoom);\r\n\r\n  \t\tif (snap) {\r\n  \t\t\tzoom = Math.round(zoom / (snap / 100)) * (snap / 100); // don't jump if within 1% of a snap level\r\n  \t\t\tzoom = inside ? Math.ceil(zoom / snap) * snap : Math.floor(zoom / snap) * snap;\r\n  \t\t}\r\n\r\n  \t\treturn Math.max(min, Math.min(max, zoom));\r\n  \t},\r\n\r\n  \t// @method getSize(): Point\r\n  \t// Returns the current size of the map container (in pixels).\r\n  \tgetSize: function () {\r\n  \t\tif (!this._size || this._sizeChanged) {\r\n  \t\t\tthis._size = new Point(\r\n  \t\t\t\tthis._container.clientWidth || 0,\r\n  \t\t\t\tthis._container.clientHeight || 0);\r\n\r\n  \t\t\tthis._sizeChanged = false;\r\n  \t\t}\r\n  \t\treturn this._size.clone();\r\n  \t},\r\n\r\n  \t// @method getPixelBounds(): Bounds\r\n  \t// Returns the bounds of the current map view in projected pixel\r\n  \t// coordinates (sometimes useful in layer and overlay implementations).\r\n  \tgetPixelBounds: function (center, zoom) {\r\n  \t\tvar topLeftPoint = this._getTopLeftPoint(center, zoom);\r\n  \t\treturn new Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));\r\n  \t},\r\n\r\n  \t// TODO: Check semantics - isn't the pixel origin the 0,0 coord relative to\r\n  \t// the map pane? \"left point of the map layer\" can be confusing, specially\r\n  \t// since there can be negative offsets.\r\n  \t// @method getPixelOrigin(): Point\r\n  \t// Returns the projected pixel coordinates of the top left point of\r\n  \t// the map layer (useful in custom layer and overlay implementations).\r\n  \tgetPixelOrigin: function () {\r\n  \t\tthis._checkIfLoaded();\r\n  \t\treturn this._pixelOrigin;\r\n  \t},\r\n\r\n  \t// @method getPixelWorldBounds(zoom?: Number): Bounds\r\n  \t// Returns the world's bounds in pixel coordinates for zoom level `zoom`.\r\n  \t// If `zoom` is omitted, the map's current zoom level is used.\r\n  \tgetPixelWorldBounds: function (zoom) {\r\n  \t\treturn this.options.crs.getProjectedBounds(zoom === undefined ? this.getZoom() : zoom);\r\n  \t},\r\n\r\n  \t// @section Other Methods\r\n\r\n  \t// @method getPane(pane: String|HTMLElement): HTMLElement\r\n  \t// Returns a [map pane](#map-pane), given its name or its HTML element (its identity).\r\n  \tgetPane: function (pane) {\r\n  \t\treturn typeof pane === 'string' ? this._panes[pane] : pane;\r\n  \t},\r\n\r\n  \t// @method getPanes(): Object\r\n  \t// Returns a plain object containing the names of all [panes](#map-pane) as keys and\r\n  \t// the panes as values.\r\n  \tgetPanes: function () {\r\n  \t\treturn this._panes;\r\n  \t},\r\n\r\n  \t// @method getContainer: HTMLElement\r\n  \t// Returns the HTML element that contains the map.\r\n  \tgetContainer: function () {\r\n  \t\treturn this._container;\r\n  \t},\r\n\r\n\r\n  \t// @section Conversion Methods\r\n\r\n  \t// @method getZoomScale(toZoom: Number, fromZoom: Number): Number\r\n  \t// Returns the scale factor to be applied to a map transition from zoom level\r\n  \t// `fromZoom` to `toZoom`. Used internally to help with zoom animations.\r\n  \tgetZoomScale: function (toZoom, fromZoom) {\r\n  \t\t// TODO replace with universal implementation after refactoring projections\r\n  \t\tvar crs = this.options.crs;\r\n  \t\tfromZoom = fromZoom === undefined ? this._zoom : fromZoom;\r\n  \t\treturn crs.scale(toZoom) / crs.scale(fromZoom);\r\n  \t},\r\n\r\n  \t// @method getScaleZoom(scale: Number, fromZoom: Number): Number\r\n  \t// Returns the zoom level that the map would end up at, if it is at `fromZoom`\r\n  \t// level and everything is scaled by a factor of `scale`. Inverse of\r\n  \t// [`getZoomScale`](#map-getZoomScale).\r\n  \tgetScaleZoom: function (scale, fromZoom) {\r\n  \t\tvar crs = this.options.crs;\r\n  \t\tfromZoom = fromZoom === undefined ? this._zoom : fromZoom;\r\n  \t\tvar zoom = crs.zoom(scale * crs.scale(fromZoom));\r\n  \t\treturn isNaN(zoom) ? Infinity : zoom;\r\n  \t},\r\n\r\n  \t// @method project(latlng: LatLng, zoom: Number): Point\r\n  \t// Projects a geographical coordinate `LatLng` according to the projection\r\n  \t// of the map's CRS, then scales it according to `zoom` and the CRS's\r\n  \t// `Transformation`. The result is pixel coordinate relative to\r\n  \t// the CRS origin.\r\n  \tproject: function (latlng, zoom) {\r\n  \t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n  \t\treturn this.options.crs.latLngToPoint(toLatLng(latlng), zoom);\r\n  \t},\r\n\r\n  \t// @method unproject(point: Point, zoom: Number): LatLng\r\n  \t// Inverse of [`project`](#map-project).\r\n  \tunproject: function (point, zoom) {\r\n  \t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n  \t\treturn this.options.crs.pointToLatLng(toPoint(point), zoom);\r\n  \t},\r\n\r\n  \t// @method layerPointToLatLng(point: Point): LatLng\r\n  \t// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),\r\n  \t// returns the corresponding geographical coordinate (for the current zoom level).\r\n  \tlayerPointToLatLng: function (point) {\r\n  \t\tvar projectedPoint = toPoint(point).add(this.getPixelOrigin());\r\n  \t\treturn this.unproject(projectedPoint);\r\n  \t},\r\n\r\n  \t// @method latLngToLayerPoint(latlng: LatLng): Point\r\n  \t// Given a geographical coordinate, returns the corresponding pixel coordinate\r\n  \t// relative to the [origin pixel](#map-getpixelorigin).\r\n  \tlatLngToLayerPoint: function (latlng) {\r\n  \t\tvar projectedPoint = this.project(toLatLng(latlng))._round();\r\n  \t\treturn projectedPoint._subtract(this.getPixelOrigin());\r\n  \t},\r\n\r\n  \t// @method wrapLatLng(latlng: LatLng): LatLng\r\n  \t// Returns a `LatLng` where `lat` and `lng` has been wrapped according to the\r\n  \t// map's CRS's `wrapLat` and `wrapLng` properties, if they are outside the\r\n  \t// CRS's bounds.\r\n  \t// By default this means longitude is wrapped around the dateline so its\r\n  \t// value is between -180 and +180 degrees.\r\n  \twrapLatLng: function (latlng) {\r\n  \t\treturn this.options.crs.wrapLatLng(toLatLng(latlng));\r\n  \t},\r\n\r\n  \t// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds\r\n  \t// Returns a `LatLngBounds` with the same size as the given one, ensuring that\r\n  \t// its center is within the CRS's bounds.\r\n  \t// By default this means the center longitude is wrapped around the dateline so its\r\n  \t// value is between -180 and +180 degrees, and the majority of the bounds\r\n  \t// overlaps the CRS's bounds.\r\n  \twrapLatLngBounds: function (latlng) {\r\n  \t\treturn this.options.crs.wrapLatLngBounds(toLatLngBounds(latlng));\r\n  \t},\r\n\r\n  \t// @method distance(latlng1: LatLng, latlng2: LatLng): Number\r\n  \t// Returns the distance between two geographical coordinates according to\r\n  \t// the map's CRS. By default this measures distance in meters.\r\n  \tdistance: function (latlng1, latlng2) {\r\n  \t\treturn this.options.crs.distance(toLatLng(latlng1), toLatLng(latlng2));\r\n  \t},\r\n\r\n  \t// @method containerPointToLayerPoint(point: Point): Point\r\n  \t// Given a pixel coordinate relative to the map container, returns the corresponding\r\n  \t// pixel coordinate relative to the [origin pixel](#map-getpixelorigin).\r\n  \tcontainerPointToLayerPoint: function (point) { // (Point)\r\n  \t\treturn toPoint(point).subtract(this._getMapPanePos());\r\n  \t},\r\n\r\n  \t// @method layerPointToContainerPoint(point: Point): Point\r\n  \t// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),\r\n  \t// returns the corresponding pixel coordinate relative to the map container.\r\n  \tlayerPointToContainerPoint: function (point) { // (Point)\r\n  \t\treturn toPoint(point).add(this._getMapPanePos());\r\n  \t},\r\n\r\n  \t// @method containerPointToLatLng(point: Point): LatLng\r\n  \t// Given a pixel coordinate relative to the map container, returns\r\n  \t// the corresponding geographical coordinate (for the current zoom level).\r\n  \tcontainerPointToLatLng: function (point) {\r\n  \t\tvar layerPoint = this.containerPointToLayerPoint(toPoint(point));\r\n  \t\treturn this.layerPointToLatLng(layerPoint);\r\n  \t},\r\n\r\n  \t// @method latLngToContainerPoint(latlng: LatLng): Point\r\n  \t// Given a geographical coordinate, returns the corresponding pixel coordinate\r\n  \t// relative to the map container.\r\n  \tlatLngToContainerPoint: function (latlng) {\r\n  \t\treturn this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(latlng)));\r\n  \t},\r\n\r\n  \t// @method mouseEventToContainerPoint(ev: MouseEvent): Point\r\n  \t// Given a MouseEvent object, returns the pixel coordinate relative to the\r\n  \t// map container where the event took place.\r\n  \tmouseEventToContainerPoint: function (e) {\r\n  \t\treturn getMousePosition(e, this._container);\r\n  \t},\r\n\r\n  \t// @method mouseEventToLayerPoint(ev: MouseEvent): Point\r\n  \t// Given a MouseEvent object, returns the pixel coordinate relative to\r\n  \t// the [origin pixel](#map-getpixelorigin) where the event took place.\r\n  \tmouseEventToLayerPoint: function (e) {\r\n  \t\treturn this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));\r\n  \t},\r\n\r\n  \t// @method mouseEventToLatLng(ev: MouseEvent): LatLng\r\n  \t// Given a MouseEvent object, returns geographical coordinate where the\r\n  \t// event took place.\r\n  \tmouseEventToLatLng: function (e) { // (MouseEvent)\r\n  \t\treturn this.layerPointToLatLng(this.mouseEventToLayerPoint(e));\r\n  \t},\r\n\r\n\r\n  \t// map initialization methods\r\n\r\n  \t_initContainer: function (id) {\r\n  \t\tvar container = this._container = get(id);\r\n\r\n  \t\tif (!container) {\r\n  \t\t\tthrow new Error('Map container not found.');\r\n  \t\t} else if (container._leaflet_id) {\r\n  \t\t\tthrow new Error('Map container is already initialized.');\r\n  \t\t}\r\n\r\n  \t\ton(container, 'scroll', this._onScroll, this);\r\n  \t\tthis._containerId = stamp(container);\r\n  \t},\r\n\r\n  \t_initLayout: function () {\r\n  \t\tvar container = this._container;\r\n\r\n  \t\tthis._fadeAnimated = this.options.fadeAnimation && any3d;\r\n\r\n  \t\taddClass(container, 'leaflet-container' +\r\n  \t\t\t(touch ? ' leaflet-touch' : '') +\r\n  \t\t\t(retina ? ' leaflet-retina' : '') +\r\n  \t\t\t(ielt9 ? ' leaflet-oldie' : '') +\r\n  \t\t\t(safari ? ' leaflet-safari' : '') +\r\n  \t\t\t(this._fadeAnimated ? ' leaflet-fade-anim' : ''));\r\n\r\n  \t\tvar position = getStyle(container, 'position');\r\n\r\n  \t\tif (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {\r\n  \t\t\tcontainer.style.position = 'relative';\r\n  \t\t}\r\n\r\n  \t\tthis._initPanes();\r\n\r\n  \t\tif (this._initControlPos) {\r\n  \t\t\tthis._initControlPos();\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_initPanes: function () {\r\n  \t\tvar panes = this._panes = {};\r\n  \t\tthis._paneRenderers = {};\r\n\r\n  \t\t// @section\r\n  \t\t//\r\n  \t\t// Panes are DOM elements used to control the ordering of layers on the map. You\r\n  \t\t// can access panes with [`map.getPane`](#map-getpane) or\r\n  \t\t// [`map.getPanes`](#map-getpanes) methods. New panes can be created with the\r\n  \t\t// [`map.createPane`](#map-createpane) method.\r\n  \t\t//\r\n  \t\t// Every map has the following default panes that differ only in zIndex.\r\n  \t\t//\r\n  \t\t// @pane mapPane: HTMLElement = 'auto'\r\n  \t\t// Pane that contains all other map panes\r\n\r\n  \t\tthis._mapPane = this.createPane('mapPane', this._container);\r\n  \t\tsetPosition(this._mapPane, new Point(0, 0));\r\n\r\n  \t\t// @pane tilePane: HTMLElement = 200\r\n  \t\t// Pane for `GridLayer`s and `TileLayer`s\r\n  \t\tthis.createPane('tilePane');\r\n  \t\t// @pane overlayPane: HTMLElement = 400\r\n  \t\t// Pane for overlay shadows (e.g. `Marker` shadows)\r\n  \t\tthis.createPane('shadowPane');\r\n  \t\t// @pane shadowPane: HTMLElement = 500\r\n  \t\t// Pane for vectors (`Path`s, like `Polyline`s and `Polygon`s), `ImageOverlay`s and `VideoOverlay`s\r\n  \t\tthis.createPane('overlayPane');\r\n  \t\t// @pane markerPane: HTMLElement = 600\r\n  \t\t// Pane for `Icon`s of `Marker`s\r\n  \t\tthis.createPane('markerPane');\r\n  \t\t// @pane tooltipPane: HTMLElement = 650\r\n  \t\t// Pane for `Tooltip`s.\r\n  \t\tthis.createPane('tooltipPane');\r\n  \t\t// @pane popupPane: HTMLElement = 700\r\n  \t\t// Pane for `Popup`s.\r\n  \t\tthis.createPane('popupPane');\r\n\r\n  \t\tif (!this.options.markerZoomAnimation) {\r\n  \t\t\taddClass(panes.markerPane, 'leaflet-zoom-hide');\r\n  \t\t\taddClass(panes.shadowPane, 'leaflet-zoom-hide');\r\n  \t\t}\r\n  \t},\r\n\r\n\r\n  \t// private methods that modify map state\r\n\r\n  \t// @section Map state change events\r\n  \t_resetView: function (center, zoom) {\r\n  \t\tsetPosition(this._mapPane, new Point(0, 0));\r\n\r\n  \t\tvar loading = !this._loaded;\r\n  \t\tthis._loaded = true;\r\n  \t\tzoom = this._limitZoom(zoom);\r\n\r\n  \t\tthis.fire('viewprereset');\r\n\r\n  \t\tvar zoomChanged = this._zoom !== zoom;\r\n  \t\tthis\r\n  \t\t\t._moveStart(zoomChanged, false)\r\n  \t\t\t._move(center, zoom)\r\n  \t\t\t._moveEnd(zoomChanged);\r\n\r\n  \t\t// @event viewreset: Event\r\n  \t\t// Fired when the map needs to redraw its content (this usually happens\r\n  \t\t// on map zoom or load). Very useful for creating custom overlays.\r\n  \t\tthis.fire('viewreset');\r\n\r\n  \t\t// @event load: Event\r\n  \t\t// Fired when the map is initialized (when its center and zoom are set\r\n  \t\t// for the first time).\r\n  \t\tif (loading) {\r\n  \t\t\tthis.fire('load');\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_moveStart: function (zoomChanged, noMoveStart) {\r\n  \t\t// @event zoomstart: Event\r\n  \t\t// Fired when the map zoom is about to change (e.g. before zoom animation).\r\n  \t\t// @event movestart: Event\r\n  \t\t// Fired when the view of the map starts changing (e.g. user starts dragging the map).\r\n  \t\tif (zoomChanged) {\r\n  \t\t\tthis.fire('zoomstart');\r\n  \t\t}\r\n  \t\tif (!noMoveStart) {\r\n  \t\t\tthis.fire('movestart');\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_move: function (center, zoom, data) {\r\n  \t\tif (zoom === undefined) {\r\n  \t\t\tzoom = this._zoom;\r\n  \t\t}\r\n  \t\tvar zoomChanged = this._zoom !== zoom;\r\n\r\n  \t\tthis._zoom = zoom;\r\n  \t\tthis._lastCenter = center;\r\n  \t\tthis._pixelOrigin = this._getNewPixelOrigin(center);\r\n\r\n  \t\t// @event zoom: Event\r\n  \t\t// Fired repeatedly during any change in zoom level, including zoom\r\n  \t\t// and fly animations.\r\n  \t\tif (zoomChanged || (data && data.pinch)) {\t// Always fire 'zoom' if pinching because #3530\r\n  \t\t\tthis.fire('zoom', data);\r\n  \t\t}\r\n\r\n  \t\t// @event move: Event\r\n  \t\t// Fired repeatedly during any movement of the map, including pan and\r\n  \t\t// fly animations.\r\n  \t\treturn this.fire('move', data);\r\n  \t},\r\n\r\n  \t_moveEnd: function (zoomChanged) {\r\n  \t\t// @event zoomend: Event\r\n  \t\t// Fired when the map has changed, after any animations.\r\n  \t\tif (zoomChanged) {\r\n  \t\t\tthis.fire('zoomend');\r\n  \t\t}\r\n\r\n  \t\t// @event moveend: Event\r\n  \t\t// Fired when the center of the map stops changing (e.g. user stopped\r\n  \t\t// dragging the map).\r\n  \t\treturn this.fire('moveend');\r\n  \t},\r\n\r\n  \t_stop: function () {\r\n  \t\tcancelAnimFrame(this._flyToFrame);\r\n  \t\tif (this._panAnim) {\r\n  \t\t\tthis._panAnim.stop();\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_rawPanBy: function (offset) {\r\n  \t\tsetPosition(this._mapPane, this._getMapPanePos().subtract(offset));\r\n  \t},\r\n\r\n  \t_getZoomSpan: function () {\r\n  \t\treturn this.getMaxZoom() - this.getMinZoom();\r\n  \t},\r\n\r\n  \t_panInsideMaxBounds: function () {\r\n  \t\tif (!this._enforcingBounds) {\r\n  \t\t\tthis.panInsideBounds(this.options.maxBounds);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_checkIfLoaded: function () {\r\n  \t\tif (!this._loaded) {\r\n  \t\t\tthrow new Error('Set map center and zoom first.');\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// DOM event handling\r\n\r\n  \t// @section Interaction events\r\n  \t_initEvents: function (remove$$1) {\r\n  \t\tthis._targets = {};\r\n  \t\tthis._targets[stamp(this._container)] = this;\r\n\r\n  \t\tvar onOff = remove$$1 ? off : on;\r\n\r\n  \t\t// @event click: MouseEvent\r\n  \t\t// Fired when the user clicks (or taps) the map.\r\n  \t\t// @event dblclick: MouseEvent\r\n  \t\t// Fired when the user double-clicks (or double-taps) the map.\r\n  \t\t// @event mousedown: MouseEvent\r\n  \t\t// Fired when the user pushes the mouse button on the map.\r\n  \t\t// @event mouseup: MouseEvent\r\n  \t\t// Fired when the user releases the mouse button on the map.\r\n  \t\t// @event mouseover: MouseEvent\r\n  \t\t// Fired when the mouse enters the map.\r\n  \t\t// @event mouseout: MouseEvent\r\n  \t\t// Fired when the mouse leaves the map.\r\n  \t\t// @event mousemove: MouseEvent\r\n  \t\t// Fired while the mouse moves over the map.\r\n  \t\t// @event contextmenu: MouseEvent\r\n  \t\t// Fired when the user pushes the right mouse button on the map, prevents\r\n  \t\t// default browser context menu from showing if there are listeners on\r\n  \t\t// this event. Also fired on mobile when the user holds a single touch\r\n  \t\t// for a second (also called long press).\r\n  \t\t// @event keypress: KeyboardEvent\r\n  \t\t// Fired when the user presses a key from the keyboard that produces a character value while the map is focused.\r\n  \t\t// @event keydown: KeyboardEvent\r\n  \t\t// Fired when the user presses a key from the keyboard while the map is focused. Unlike the `keypress` event,\r\n  \t\t// the `keydown` event is fired for keys that produce a character value and for keys\r\n  \t\t// that do not produce a character value.\r\n  \t\t// @event keyup: KeyboardEvent\r\n  \t\t// Fired when the user releases a key from the keyboard while the map is focused.\r\n  \t\tonOff(this._container, 'click dblclick mousedown mouseup ' +\r\n  \t\t\t'mouseover mouseout mousemove contextmenu keypress keydown keyup', this._handleDOMEvent, this);\r\n\r\n  \t\tif (this.options.trackResize) {\r\n  \t\t\tonOff(window, 'resize', this._onResize, this);\r\n  \t\t}\r\n\r\n  \t\tif (any3d && this.options.transform3DLimit) {\r\n  \t\t\t(remove$$1 ? this.off : this.on).call(this, 'moveend', this._onMoveEnd);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_onResize: function () {\r\n  \t\tcancelAnimFrame(this._resizeRequest);\r\n  \t\tthis._resizeRequest = requestAnimFrame(\r\n  \t\t        function () { this.invalidateSize({debounceMoveend: true}); }, this);\r\n  \t},\r\n\r\n  \t_onScroll: function () {\r\n  \t\tthis._container.scrollTop  = 0;\r\n  \t\tthis._container.scrollLeft = 0;\r\n  \t},\r\n\r\n  \t_onMoveEnd: function () {\r\n  \t\tvar pos = this._getMapPanePos();\r\n  \t\tif (Math.max(Math.abs(pos.x), Math.abs(pos.y)) >= this.options.transform3DLimit) {\r\n  \t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1203873 but Webkit also have\r\n  \t\t\t// a pixel offset on very high values, see: http://jsfiddle.net/dg6r5hhb/\r\n  \t\t\tthis._resetView(this.getCenter(), this.getZoom());\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_findEventTargets: function (e, type) {\r\n  \t\tvar targets = [],\r\n  \t\t    target,\r\n  \t\t    isHover = type === 'mouseout' || type === 'mouseover',\r\n  \t\t    src = e.target || e.srcElement,\r\n  \t\t    dragging = false;\r\n\r\n  \t\twhile (src) {\r\n  \t\t\ttarget = this._targets[stamp(src)];\r\n  \t\t\tif (target && (type === 'click' || type === 'preclick') && !e._simulated && this._draggableMoved(target)) {\r\n  \t\t\t\t// Prevent firing click after you just dragged an object.\r\n  \t\t\t\tdragging = true;\r\n  \t\t\t\tbreak;\r\n  \t\t\t}\r\n  \t\t\tif (target && target.listens(type, true)) {\r\n  \t\t\t\tif (isHover && !isExternalTarget(src, e)) { break; }\r\n  \t\t\t\ttargets.push(target);\r\n  \t\t\t\tif (isHover) { break; }\r\n  \t\t\t}\r\n  \t\t\tif (src === this._container) { break; }\r\n  \t\t\tsrc = src.parentNode;\r\n  \t\t}\r\n  \t\tif (!targets.length && !dragging && !isHover && isExternalTarget(src, e)) {\r\n  \t\t\ttargets = [this];\r\n  \t\t}\r\n  \t\treturn targets;\r\n  \t},\r\n\r\n  \t_handleDOMEvent: function (e) {\r\n  \t\tif (!this._loaded || skipped(e)) { return; }\r\n\r\n  \t\tvar type = e.type;\r\n\r\n  \t\tif (type === 'mousedown' || type === 'keypress' || type === 'keyup' || type === 'keydown') {\r\n  \t\t\t// prevents outline when clicking on keyboard-focusable element\r\n  \t\t\tpreventOutline(e.target || e.srcElement);\r\n  \t\t}\r\n\r\n  \t\tthis._fireDOMEvent(e, type);\r\n  \t},\r\n\r\n  \t_mouseEvents: ['click', 'dblclick', 'mouseover', 'mouseout', 'contextmenu'],\r\n\r\n  \t_fireDOMEvent: function (e, type, targets) {\r\n\r\n  \t\tif (e.type === 'click') {\r\n  \t\t\t// Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).\r\n  \t\t\t// @event preclick: MouseEvent\r\n  \t\t\t// Fired before mouse click on the map (sometimes useful when you\r\n  \t\t\t// want something to happen on click before any existing click\r\n  \t\t\t// handlers start running).\r\n  \t\t\tvar synth = extend({}, e);\r\n  \t\t\tsynth.type = 'preclick';\r\n  \t\t\tthis._fireDOMEvent(synth, synth.type, targets);\r\n  \t\t}\r\n\r\n  \t\tif (e._stopped) { return; }\r\n\r\n  \t\t// Find the layer the event is propagating from and its parents.\r\n  \t\ttargets = (targets || []).concat(this._findEventTargets(e, type));\r\n\r\n  \t\tif (!targets.length) { return; }\r\n\r\n  \t\tvar target = targets[0];\r\n  \t\tif (type === 'contextmenu' && target.listens(type, true)) {\r\n  \t\t\tpreventDefault(e);\r\n  \t\t}\r\n\r\n  \t\tvar data = {\r\n  \t\t\toriginalEvent: e\r\n  \t\t};\r\n\r\n  \t\tif (e.type !== 'keypress' && e.type !== 'keydown' && e.type !== 'keyup') {\r\n  \t\t\tvar isMarker = target.getLatLng && (!target._radius || target._radius <= 10);\r\n  \t\t\tdata.containerPoint = isMarker ?\r\n  \t\t\t\tthis.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);\r\n  \t\t\tdata.layerPoint = this.containerPointToLayerPoint(data.containerPoint);\r\n  \t\t\tdata.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);\r\n  \t\t}\r\n\r\n  \t\tfor (var i = 0; i < targets.length; i++) {\r\n  \t\t\ttargets[i].fire(type, data, true);\r\n  \t\t\tif (data.originalEvent._stopped ||\r\n  \t\t\t\t(targets[i].options.bubblingMouseEvents === false && indexOf(this._mouseEvents, type) !== -1)) { return; }\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_draggableMoved: function (obj) {\r\n  \t\tobj = obj.dragging && obj.dragging.enabled() ? obj : this;\r\n  \t\treturn (obj.dragging && obj.dragging.moved()) || (this.boxZoom && this.boxZoom.moved());\r\n  \t},\r\n\r\n  \t_clearHandlers: function () {\r\n  \t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\r\n  \t\t\tthis._handlers[i].disable();\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @section Other Methods\r\n\r\n  \t// @method whenReady(fn: Function, context?: Object): this\r\n  \t// Runs the given function `fn` when the map gets initialized with\r\n  \t// a view (center and zoom) and at least one layer, or immediately\r\n  \t// if it's already initialized, optionally passing a function context.\r\n  \twhenReady: function (callback, context) {\r\n  \t\tif (this._loaded) {\r\n  \t\t\tcallback.call(context || this, {target: this});\r\n  \t\t} else {\r\n  \t\t\tthis.on('load', callback, context);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n\r\n  \t// private methods for getting map state\r\n\r\n  \t_getMapPanePos: function () {\r\n  \t\treturn getPosition(this._mapPane) || new Point(0, 0);\r\n  \t},\r\n\r\n  \t_moved: function () {\r\n  \t\tvar pos = this._getMapPanePos();\r\n  \t\treturn pos && !pos.equals([0, 0]);\r\n  \t},\r\n\r\n  \t_getTopLeftPoint: function (center, zoom) {\r\n  \t\tvar pixelOrigin = center && zoom !== undefined ?\r\n  \t\t\tthis._getNewPixelOrigin(center, zoom) :\r\n  \t\t\tthis.getPixelOrigin();\r\n  \t\treturn pixelOrigin.subtract(this._getMapPanePos());\r\n  \t},\r\n\r\n  \t_getNewPixelOrigin: function (center, zoom) {\r\n  \t\tvar viewHalf = this.getSize()._divideBy(2);\r\n  \t\treturn this.project(center, zoom)._subtract(viewHalf)._add(this._getMapPanePos())._round();\r\n  \t},\r\n\r\n  \t_latLngToNewLayerPoint: function (latlng, zoom, center) {\r\n  \t\tvar topLeft = this._getNewPixelOrigin(center, zoom);\r\n  \t\treturn this.project(latlng, zoom)._subtract(topLeft);\r\n  \t},\r\n\r\n  \t_latLngBoundsToNewLayerBounds: function (latLngBounds, zoom, center) {\r\n  \t\tvar topLeft = this._getNewPixelOrigin(center, zoom);\r\n  \t\treturn toBounds([\r\n  \t\t\tthis.project(latLngBounds.getSouthWest(), zoom)._subtract(topLeft),\r\n  \t\t\tthis.project(latLngBounds.getNorthWest(), zoom)._subtract(topLeft),\r\n  \t\t\tthis.project(latLngBounds.getSouthEast(), zoom)._subtract(topLeft),\r\n  \t\t\tthis.project(latLngBounds.getNorthEast(), zoom)._subtract(topLeft)\r\n  \t\t]);\r\n  \t},\r\n\r\n  \t// layer point of the current center\r\n  \t_getCenterLayerPoint: function () {\r\n  \t\treturn this.containerPointToLayerPoint(this.getSize()._divideBy(2));\r\n  \t},\r\n\r\n  \t// offset of the specified place to the current center in pixels\r\n  \t_getCenterOffset: function (latlng) {\r\n  \t\treturn this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());\r\n  \t},\r\n\r\n  \t// adjust center for view to get inside bounds\r\n  \t_limitCenter: function (center, zoom, bounds) {\r\n\r\n  \t\tif (!bounds) { return center; }\r\n\r\n  \t\tvar centerPoint = this.project(center, zoom),\r\n  \t\t    viewHalf = this.getSize().divideBy(2),\r\n  \t\t    viewBounds = new Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),\r\n  \t\t    offset = this._getBoundsOffset(viewBounds, bounds, zoom);\r\n\r\n  \t\t// If offset is less than a pixel, ignore.\r\n  \t\t// This prevents unstable projections from getting into\r\n  \t\t// an infinite loop of tiny offsets.\r\n  \t\tif (offset.round().equals([0, 0])) {\r\n  \t\t\treturn center;\r\n  \t\t}\r\n\r\n  \t\treturn this.unproject(centerPoint.add(offset), zoom);\r\n  \t},\r\n\r\n  \t// adjust offset for view to get inside bounds\r\n  \t_limitOffset: function (offset, bounds) {\r\n  \t\tif (!bounds) { return offset; }\r\n\r\n  \t\tvar viewBounds = this.getPixelBounds(),\r\n  \t\t    newBounds = new Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));\r\n\r\n  \t\treturn offset.add(this._getBoundsOffset(newBounds, bounds));\r\n  \t},\r\n\r\n  \t// returns offset needed for pxBounds to get inside maxBounds at a specified zoom\r\n  \t_getBoundsOffset: function (pxBounds, maxBounds, zoom) {\r\n  \t\tvar projectedMaxBounds = toBounds(\r\n  \t\t        this.project(maxBounds.getNorthEast(), zoom),\r\n  \t\t        this.project(maxBounds.getSouthWest(), zoom)\r\n  \t\t    ),\r\n  \t\t    minOffset = projectedMaxBounds.min.subtract(pxBounds.min),\r\n  \t\t    maxOffset = projectedMaxBounds.max.subtract(pxBounds.max),\r\n\r\n  \t\t    dx = this._rebound(minOffset.x, -maxOffset.x),\r\n  \t\t    dy = this._rebound(minOffset.y, -maxOffset.y);\r\n\r\n  \t\treturn new Point(dx, dy);\r\n  \t},\r\n\r\n  \t_rebound: function (left, right) {\r\n  \t\treturn left + right > 0 ?\r\n  \t\t\tMath.round(left - right) / 2 :\r\n  \t\t\tMath.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));\r\n  \t},\r\n\r\n  \t_limitZoom: function (zoom) {\r\n  \t\tvar min = this.getMinZoom(),\r\n  \t\t    max = this.getMaxZoom(),\r\n  \t\t    snap = any3d ? this.options.zoomSnap : 1;\r\n  \t\tif (snap) {\r\n  \t\t\tzoom = Math.round(zoom / snap) * snap;\r\n  \t\t}\r\n  \t\treturn Math.max(min, Math.min(max, zoom));\r\n  \t},\r\n\r\n  \t_onPanTransitionStep: function () {\r\n  \t\tthis.fire('move');\r\n  \t},\r\n\r\n  \t_onPanTransitionEnd: function () {\r\n  \t\tremoveClass(this._mapPane, 'leaflet-pan-anim');\r\n  \t\tthis.fire('moveend');\r\n  \t},\r\n\r\n  \t_tryAnimatedPan: function (center, options) {\r\n  \t\t// difference between the new and current centers in pixels\r\n  \t\tvar offset = this._getCenterOffset(center)._trunc();\r\n\r\n  \t\t// don't animate too far unless animate: true specified in options\r\n  \t\tif ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }\r\n\r\n  \t\tthis.panBy(offset, options);\r\n\r\n  \t\treturn true;\r\n  \t},\r\n\r\n  \t_createAnimProxy: function () {\r\n\r\n  \t\tvar proxy = this._proxy = create$1('div', 'leaflet-proxy leaflet-zoom-animated');\r\n  \t\tthis._panes.mapPane.appendChild(proxy);\r\n\r\n  \t\tthis.on('zoomanim', function (e) {\r\n  \t\t\tvar prop = TRANSFORM,\r\n  \t\t\t    transform = this._proxy.style[prop];\r\n\r\n  \t\t\tsetTransform(this._proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1));\r\n\r\n  \t\t\t// workaround for case when transform is the same and so transitionend event is not fired\r\n  \t\t\tif (transform === this._proxy.style[prop] && this._animatingZoom) {\r\n  \t\t\t\tthis._onZoomTransitionEnd();\r\n  \t\t\t}\r\n  \t\t}, this);\r\n\r\n  \t\tthis.on('load moveend', this._animMoveEnd, this);\r\n\r\n  \t\tthis._on('unload', this._destroyAnimProxy, this);\r\n  \t},\r\n\r\n  \t_destroyAnimProxy: function () {\r\n  \t\tremove(this._proxy);\r\n  \t\tthis.off('load moveend', this._animMoveEnd, this);\r\n  \t\tdelete this._proxy;\r\n  \t},\r\n\r\n  \t_animMoveEnd: function () {\r\n  \t\tvar c = this.getCenter(),\r\n  \t\t    z = this.getZoom();\r\n  \t\tsetTransform(this._proxy, this.project(c, z), this.getZoomScale(z, 1));\r\n  \t},\r\n\r\n  \t_catchTransitionEnd: function (e) {\r\n  \t\tif (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {\r\n  \t\t\tthis._onZoomTransitionEnd();\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_nothingToAnimate: function () {\r\n  \t\treturn !this._container.getElementsByClassName('leaflet-zoom-animated').length;\r\n  \t},\r\n\r\n  \t_tryAnimatedZoom: function (center, zoom, options) {\r\n\r\n  \t\tif (this._animatingZoom) { return true; }\r\n\r\n  \t\toptions = options || {};\r\n\r\n  \t\t// don't animate if disabled, not supported or zoom difference is too large\r\n  \t\tif (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||\r\n  \t\t        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }\r\n\r\n  \t\t// offset is the pixel coords of the zoom origin relative to the current center\r\n  \t\tvar scale = this.getZoomScale(zoom),\r\n  \t\t    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale);\r\n\r\n  \t\t// don't animate if the zoom origin isn't within one screen from the current center, unless forced\r\n  \t\tif (options.animate !== true && !this.getSize().contains(offset)) { return false; }\r\n\r\n  \t\trequestAnimFrame(function () {\r\n  \t\t\tthis\r\n  \t\t\t    ._moveStart(true, false)\r\n  \t\t\t    ._animateZoom(center, zoom, true);\r\n  \t\t}, this);\r\n\r\n  \t\treturn true;\r\n  \t},\r\n\r\n  \t_animateZoom: function (center, zoom, startAnim, noUpdate) {\r\n  \t\tif (!this._mapPane) { return; }\r\n\r\n  \t\tif (startAnim) {\r\n  \t\t\tthis._animatingZoom = true;\r\n\r\n  \t\t\t// remember what center/zoom to set after animation\r\n  \t\t\tthis._animateToCenter = center;\r\n  \t\t\tthis._animateToZoom = zoom;\r\n\r\n  \t\t\taddClass(this._mapPane, 'leaflet-zoom-anim');\r\n  \t\t}\r\n\r\n  \t\t// @section Other Events\r\n  \t\t// @event zoomanim: ZoomAnimEvent\r\n  \t\t// Fired at least once per zoom animation. For continuous zoom, like pinch zooming, fired once per frame during zoom.\r\n  \t\tthis.fire('zoomanim', {\r\n  \t\t\tcenter: center,\r\n  \t\t\tzoom: zoom,\r\n  \t\t\tnoUpdate: noUpdate\r\n  \t\t});\r\n\r\n  \t\t// Work around webkit not firing 'transitionend', see https://github.com/Leaflet/Leaflet/issues/3689, 2693\r\n  \t\tsetTimeout(bind(this._onZoomTransitionEnd, this), 250);\r\n  \t},\r\n\r\n  \t_onZoomTransitionEnd: function () {\r\n  \t\tif (!this._animatingZoom) { return; }\r\n\r\n  \t\tif (this._mapPane) {\r\n  \t\t\tremoveClass(this._mapPane, 'leaflet-zoom-anim');\r\n  \t\t}\r\n\r\n  \t\tthis._animatingZoom = false;\r\n\r\n  \t\tthis._move(this._animateToCenter, this._animateToZoom);\r\n\r\n  \t\t// This anim frame should prevent an obscure iOS webkit tile loading race condition.\r\n  \t\trequestAnimFrame(function () {\r\n  \t\t\tthis._moveEnd(true);\r\n  \t\t}, this);\r\n  \t}\r\n  });\r\n\r\n  // @section\r\n\r\n  // @factory L.map(id: String, options?: Map options)\r\n  // Instantiates a map object given the DOM ID of a `<div>` element\r\n  // and optionally an object literal with `Map options`.\r\n  //\r\n  // @alternative\r\n  // @factory L.map(el: HTMLElement, options?: Map options)\r\n  // Instantiates a map object given an instance of a `<div>` HTML element\r\n  // and optionally an object literal with `Map options`.\r\n  function createMap(id, options) {\r\n  \treturn new Map(id, options);\r\n  }\n\n  /*\r\n   * @class Control\r\n   * @aka L.Control\r\n   * @inherits Class\r\n   *\r\n   * L.Control is a base class for implementing map controls. Handles positioning.\r\n   * All other controls extend from this class.\r\n   */\r\n\r\n  var Control = Class.extend({\r\n  \t// @section\r\n  \t// @aka Control options\r\n  \toptions: {\r\n  \t\t// @option position: String = 'topright'\r\n  \t\t// The position of the control (one of the map corners). Possible values are `'topleft'`,\r\n  \t\t// `'topright'`, `'bottomleft'` or `'bottomright'`\r\n  \t\tposition: 'topright'\r\n  \t},\r\n\r\n  \tinitialize: function (options) {\r\n  \t\tsetOptions(this, options);\r\n  \t},\r\n\r\n  \t/* @section\r\n  \t * Classes extending L.Control will inherit the following methods:\r\n  \t *\r\n  \t * @method getPosition: string\r\n  \t * Returns the position of the control.\r\n  \t */\r\n  \tgetPosition: function () {\r\n  \t\treturn this.options.position;\r\n  \t},\r\n\r\n  \t// @method setPosition(position: string): this\r\n  \t// Sets the position of the control.\r\n  \tsetPosition: function (position) {\r\n  \t\tvar map = this._map;\r\n\r\n  \t\tif (map) {\r\n  \t\t\tmap.removeControl(this);\r\n  \t\t}\r\n\r\n  \t\tthis.options.position = position;\r\n\r\n  \t\tif (map) {\r\n  \t\t\tmap.addControl(this);\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method getContainer: HTMLElement\r\n  \t// Returns the HTMLElement that contains the control.\r\n  \tgetContainer: function () {\r\n  \t\treturn this._container;\r\n  \t},\r\n\r\n  \t// @method addTo(map: Map): this\r\n  \t// Adds the control to the given map.\r\n  \taddTo: function (map) {\r\n  \t\tthis.remove();\r\n  \t\tthis._map = map;\r\n\r\n  \t\tvar container = this._container = this.onAdd(map),\r\n  \t\t    pos = this.getPosition(),\r\n  \t\t    corner = map._controlCorners[pos];\r\n\r\n  \t\taddClass(container, 'leaflet-control');\r\n\r\n  \t\tif (pos.indexOf('bottom') !== -1) {\r\n  \t\t\tcorner.insertBefore(container, corner.firstChild);\r\n  \t\t} else {\r\n  \t\t\tcorner.appendChild(container);\r\n  \t\t}\r\n\r\n  \t\tthis._map.on('unload', this.remove, this);\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method remove: this\r\n  \t// Removes the control from the map it is currently active on.\r\n  \tremove: function () {\r\n  \t\tif (!this._map) {\r\n  \t\t\treturn this;\r\n  \t\t}\r\n\r\n  \t\tremove(this._container);\r\n\r\n  \t\tif (this.onRemove) {\r\n  \t\t\tthis.onRemove(this._map);\r\n  \t\t}\r\n\r\n  \t\tthis._map.off('unload', this.remove, this);\r\n  \t\tthis._map = null;\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_refocusOnMap: function (e) {\r\n  \t\t// if map exists and event is not a keyboard event\r\n  \t\tif (this._map && e && e.screenX > 0 && e.screenY > 0) {\r\n  \t\t\tthis._map.getContainer().focus();\r\n  \t\t}\r\n  \t}\r\n  });\r\n\r\n  var control = function (options) {\r\n  \treturn new Control(options);\r\n  };\r\n\r\n  /* @section Extension methods\r\n   * @uninheritable\r\n   *\r\n   * Every control should extend from `L.Control` and (re-)implement the following methods.\r\n   *\r\n   * @method onAdd(map: Map): HTMLElement\r\n   * Should return the container DOM element for the control and add listeners on relevant map events. Called on [`control.addTo(map)`](#control-addTo).\r\n   *\r\n   * @method onRemove(map: Map)\r\n   * Optional method. Should contain all clean up code that removes the listeners previously added in [`onAdd`](#control-onadd). Called on [`control.remove()`](#control-remove).\r\n   */\r\n\r\n  /* @namespace Map\r\n   * @section Methods for Layers and Controls\r\n   */\r\n  Map.include({\r\n  \t// @method addControl(control: Control): this\r\n  \t// Adds the given control to the map\r\n  \taddControl: function (control) {\r\n  \t\tcontrol.addTo(this);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method removeControl(control: Control): this\r\n  \t// Removes the given control from the map\r\n  \tremoveControl: function (control) {\r\n  \t\tcontrol.remove();\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_initControlPos: function () {\r\n  \t\tvar corners = this._controlCorners = {},\r\n  \t\t    l = 'leaflet-',\r\n  \t\t    container = this._controlContainer =\r\n  \t\t            create$1('div', l + 'control-container', this._container);\r\n\r\n  \t\tfunction createCorner(vSide, hSide) {\r\n  \t\t\tvar className = l + vSide + ' ' + l + hSide;\r\n\r\n  \t\t\tcorners[vSide + hSide] = create$1('div', className, container);\r\n  \t\t}\r\n\r\n  \t\tcreateCorner('top', 'left');\r\n  \t\tcreateCorner('top', 'right');\r\n  \t\tcreateCorner('bottom', 'left');\r\n  \t\tcreateCorner('bottom', 'right');\r\n  \t},\r\n\r\n  \t_clearControlPos: function () {\r\n  \t\tfor (var i in this._controlCorners) {\r\n  \t\t\tremove(this._controlCorners[i]);\r\n  \t\t}\r\n  \t\tremove(this._controlContainer);\r\n  \t\tdelete this._controlCorners;\r\n  \t\tdelete this._controlContainer;\r\n  \t}\r\n  });\n\n  /*\r\n   * @class Control.Layers\r\n   * @aka L.Control.Layers\r\n   * @inherits Control\r\n   *\r\n   * The layers control gives users the ability to switch between different base layers and switch overlays on/off (check out the [detailed example](http://leafletjs.com/examples/layers-control/)). Extends `Control`.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var baseLayers = {\r\n   * \t\"Mapbox\": mapbox,\r\n   * \t\"OpenStreetMap\": osm\r\n   * };\r\n   *\r\n   * var overlays = {\r\n   * \t\"Marker\": marker,\r\n   * \t\"Roads\": roadsLayer\r\n   * };\r\n   *\r\n   * L.control.layers(baseLayers, overlays).addTo(map);\r\n   * ```\r\n   *\r\n   * The `baseLayers` and `overlays` parameters are object literals with layer names as keys and `Layer` objects as values:\r\n   *\r\n   * ```js\r\n   * {\r\n   *     \"<someName1>\": layer1,\r\n   *     \"<someName2>\": layer2\r\n   * }\r\n   * ```\r\n   *\r\n   * The layer names can contain HTML, which allows you to add additional styling to the items:\r\n   *\r\n   * ```js\r\n   * {\"<img src='my-layer-icon' /> <span class='my-layer-item'>My Layer</span>\": myLayer}\r\n   * ```\r\n   */\r\n\r\n  var Layers = Control.extend({\r\n  \t// @section\r\n  \t// @aka Control.Layers options\r\n  \toptions: {\r\n  \t\t// @option collapsed: Boolean = true\r\n  \t\t// If `true`, the control will be collapsed into an icon and expanded on mouse hover or touch.\r\n  \t\tcollapsed: true,\r\n  \t\tposition: 'topright',\r\n\r\n  \t\t// @option autoZIndex: Boolean = true\r\n  \t\t// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.\r\n  \t\tautoZIndex: true,\r\n\r\n  \t\t// @option hideSingleBase: Boolean = false\r\n  \t\t// If `true`, the base layers in the control will be hidden when there is only one.\r\n  \t\thideSingleBase: false,\r\n\r\n  \t\t// @option sortLayers: Boolean = false\r\n  \t\t// Whether to sort the layers. When `false`, layers will keep the order\r\n  \t\t// in which they were added to the control.\r\n  \t\tsortLayers: false,\r\n\r\n  \t\t// @option sortFunction: Function = *\r\n  \t\t// A [compare function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)\r\n  \t\t// that will be used for sorting the layers, when `sortLayers` is `true`.\r\n  \t\t// The function receives both the `L.Layer` instances and their names, as in\r\n  \t\t// `sortFunction(layerA, layerB, nameA, nameB)`.\r\n  \t\t// By default, it sorts layers alphabetically by their name.\r\n  \t\tsortFunction: function (layerA, layerB, nameA, nameB) {\r\n  \t\t\treturn nameA < nameB ? -1 : (nameB < nameA ? 1 : 0);\r\n  \t\t}\r\n  \t},\r\n\r\n  \tinitialize: function (baseLayers, overlays, options) {\r\n  \t\tsetOptions(this, options);\r\n\r\n  \t\tthis._layerControlInputs = [];\r\n  \t\tthis._layers = [];\r\n  \t\tthis._lastZIndex = 0;\r\n  \t\tthis._handlingClick = false;\r\n\r\n  \t\tfor (var i in baseLayers) {\r\n  \t\t\tthis._addLayer(baseLayers[i], i);\r\n  \t\t}\r\n\r\n  \t\tfor (i in overlays) {\r\n  \t\t\tthis._addLayer(overlays[i], i, true);\r\n  \t\t}\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n  \t\tthis._initLayout();\r\n  \t\tthis._update();\r\n\r\n  \t\tthis._map = map;\r\n  \t\tmap.on('zoomend', this._checkDisabledLayers, this);\r\n\r\n  \t\tfor (var i = 0; i < this._layers.length; i++) {\r\n  \t\t\tthis._layers[i].layer.on('add remove', this._onLayerChange, this);\r\n  \t\t}\r\n\r\n  \t\treturn this._container;\r\n  \t},\r\n\r\n  \taddTo: function (map) {\r\n  \t\tControl.prototype.addTo.call(this, map);\r\n  \t\t// Trigger expand after Layers Control has been inserted into DOM so that is now has an actual height.\r\n  \t\treturn this._expandIfNotCollapsed();\r\n  \t},\r\n\r\n  \tonRemove: function () {\r\n  \t\tthis._map.off('zoomend', this._checkDisabledLayers, this);\r\n\r\n  \t\tfor (var i = 0; i < this._layers.length; i++) {\r\n  \t\t\tthis._layers[i].layer.off('add remove', this._onLayerChange, this);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @method addBaseLayer(layer: Layer, name: String): this\r\n  \t// Adds a base layer (radio button entry) with the given name to the control.\r\n  \taddBaseLayer: function (layer, name) {\r\n  \t\tthis._addLayer(layer, name);\r\n  \t\treturn (this._map) ? this._update() : this;\r\n  \t},\r\n\r\n  \t// @method addOverlay(layer: Layer, name: String): this\r\n  \t// Adds an overlay (checkbox entry) with the given name to the control.\r\n  \taddOverlay: function (layer, name) {\r\n  \t\tthis._addLayer(layer, name, true);\r\n  \t\treturn (this._map) ? this._update() : this;\r\n  \t},\r\n\r\n  \t// @method removeLayer(layer: Layer): this\r\n  \t// Remove the given layer from the control.\r\n  \tremoveLayer: function (layer) {\r\n  \t\tlayer.off('add remove', this._onLayerChange, this);\r\n\r\n  \t\tvar obj = this._getLayer(stamp(layer));\r\n  \t\tif (obj) {\r\n  \t\t\tthis._layers.splice(this._layers.indexOf(obj), 1);\r\n  \t\t}\r\n  \t\treturn (this._map) ? this._update() : this;\r\n  \t},\r\n\r\n  \t// @method expand(): this\r\n  \t// Expand the control container if collapsed.\r\n  \texpand: function () {\r\n  \t\taddClass(this._container, 'leaflet-control-layers-expanded');\r\n  \t\tthis._section.style.height = null;\r\n  \t\tvar acceptableHeight = this._map.getSize().y - (this._container.offsetTop + 50);\r\n  \t\tif (acceptableHeight < this._section.clientHeight) {\r\n  \t\t\taddClass(this._section, 'leaflet-control-layers-scrollbar');\r\n  \t\t\tthis._section.style.height = acceptableHeight + 'px';\r\n  \t\t} else {\r\n  \t\t\tremoveClass(this._section, 'leaflet-control-layers-scrollbar');\r\n  \t\t}\r\n  \t\tthis._checkDisabledLayers();\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method collapse(): this\r\n  \t// Collapse the control container if expanded.\r\n  \tcollapse: function () {\r\n  \t\tremoveClass(this._container, 'leaflet-control-layers-expanded');\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_initLayout: function () {\r\n  \t\tvar className = 'leaflet-control-layers',\r\n  \t\t    container = this._container = create$1('div', className),\r\n  \t\t    collapsed = this.options.collapsed;\r\n\r\n  \t\t// makes this work on IE touch devices by stopping it from firing a mouseout event when the touch is released\r\n  \t\tcontainer.setAttribute('aria-haspopup', true);\r\n\r\n  \t\tdisableClickPropagation(container);\r\n  \t\tdisableScrollPropagation(container);\r\n\r\n  \t\tvar section = this._section = create$1('section', className + '-list');\r\n\r\n  \t\tif (collapsed) {\r\n  \t\t\tthis._map.on('click', this.collapse, this);\r\n\r\n  \t\t\tif (!android) {\r\n  \t\t\t\ton(container, {\r\n  \t\t\t\t\tmouseenter: this.expand,\r\n  \t\t\t\t\tmouseleave: this.collapse\r\n  \t\t\t\t}, this);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tvar link = this._layersLink = create$1('a', className + '-toggle', container);\r\n  \t\tlink.href = '#';\r\n  \t\tlink.title = 'Layers';\r\n\r\n  \t\tif (touch) {\r\n  \t\t\ton(link, 'click', stop);\r\n  \t\t\ton(link, 'click', this.expand, this);\r\n  \t\t} else {\r\n  \t\t\ton(link, 'focus', this.expand, this);\r\n  \t\t}\r\n\r\n  \t\tif (!collapsed) {\r\n  \t\t\tthis.expand();\r\n  \t\t}\r\n\r\n  \t\tthis._baseLayersList = create$1('div', className + '-base', section);\r\n  \t\tthis._separator = create$1('div', className + '-separator', section);\r\n  \t\tthis._overlaysList = create$1('div', className + '-overlays', section);\r\n\r\n  \t\tcontainer.appendChild(section);\r\n  \t},\r\n\r\n  \t_getLayer: function (id) {\r\n  \t\tfor (var i = 0; i < this._layers.length; i++) {\r\n\r\n  \t\t\tif (this._layers[i] && stamp(this._layers[i].layer) === id) {\r\n  \t\t\t\treturn this._layers[i];\r\n  \t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_addLayer: function (layer, name, overlay) {\r\n  \t\tif (this._map) {\r\n  \t\t\tlayer.on('add remove', this._onLayerChange, this);\r\n  \t\t}\r\n\r\n  \t\tthis._layers.push({\r\n  \t\t\tlayer: layer,\r\n  \t\t\tname: name,\r\n  \t\t\toverlay: overlay\r\n  \t\t});\r\n\r\n  \t\tif (this.options.sortLayers) {\r\n  \t\t\tthis._layers.sort(bind(function (a, b) {\r\n  \t\t\t\treturn this.options.sortFunction(a.layer, b.layer, a.name, b.name);\r\n  \t\t\t}, this));\r\n  \t\t}\r\n\r\n  \t\tif (this.options.autoZIndex && layer.setZIndex) {\r\n  \t\t\tthis._lastZIndex++;\r\n  \t\t\tlayer.setZIndex(this._lastZIndex);\r\n  \t\t}\r\n\r\n  \t\tthis._expandIfNotCollapsed();\r\n  \t},\r\n\r\n  \t_update: function () {\r\n  \t\tif (!this._container) { return this; }\r\n\r\n  \t\tempty(this._baseLayersList);\r\n  \t\tempty(this._overlaysList);\r\n\r\n  \t\tthis._layerControlInputs = [];\r\n  \t\tvar baseLayersPresent, overlaysPresent, i, obj, baseLayersCount = 0;\r\n\r\n  \t\tfor (i = 0; i < this._layers.length; i++) {\r\n  \t\t\tobj = this._layers[i];\r\n  \t\t\tthis._addItem(obj);\r\n  \t\t\toverlaysPresent = overlaysPresent || obj.overlay;\r\n  \t\t\tbaseLayersPresent = baseLayersPresent || !obj.overlay;\r\n  \t\t\tbaseLayersCount += !obj.overlay ? 1 : 0;\r\n  \t\t}\r\n\r\n  \t\t// Hide base layers section if there's only one layer.\r\n  \t\tif (this.options.hideSingleBase) {\r\n  \t\t\tbaseLayersPresent = baseLayersPresent && baseLayersCount > 1;\r\n  \t\t\tthis._baseLayersList.style.display = baseLayersPresent ? '' : 'none';\r\n  \t\t}\r\n\r\n  \t\tthis._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_onLayerChange: function (e) {\r\n  \t\tif (!this._handlingClick) {\r\n  \t\t\tthis._update();\r\n  \t\t}\r\n\r\n  \t\tvar obj = this._getLayer(stamp(e.target));\r\n\r\n  \t\t// @namespace Map\r\n  \t\t// @section Layer events\r\n  \t\t// @event baselayerchange: LayersControlEvent\r\n  \t\t// Fired when the base layer is changed through the [layers control](#control-layers).\r\n  \t\t// @event overlayadd: LayersControlEvent\r\n  \t\t// Fired when an overlay is selected through the [layers control](#control-layers).\r\n  \t\t// @event overlayremove: LayersControlEvent\r\n  \t\t// Fired when an overlay is deselected through the [layers control](#control-layers).\r\n  \t\t// @namespace Control.Layers\r\n  \t\tvar type = obj.overlay ?\r\n  \t\t\t(e.type === 'add' ? 'overlayadd' : 'overlayremove') :\r\n  \t\t\t(e.type === 'add' ? 'baselayerchange' : null);\r\n\r\n  \t\tif (type) {\r\n  \t\t\tthis._map.fire(type, obj);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)\r\n  \t_createRadioElement: function (name, checked) {\r\n\r\n  \t\tvar radioHtml = '<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\"' +\r\n  \t\t\t\tname + '\"' + (checked ? ' checked=\"checked\"' : '') + '/>';\r\n\r\n  \t\tvar radioFragment = document.createElement('div');\r\n  \t\tradioFragment.innerHTML = radioHtml;\r\n\r\n  \t\treturn radioFragment.firstChild;\r\n  \t},\r\n\r\n  \t_addItem: function (obj) {\r\n  \t\tvar label = document.createElement('label'),\r\n  \t\t    checked = this._map.hasLayer(obj.layer),\r\n  \t\t    input;\r\n\r\n  \t\tif (obj.overlay) {\r\n  \t\t\tinput = document.createElement('input');\r\n  \t\t\tinput.type = 'checkbox';\r\n  \t\t\tinput.className = 'leaflet-control-layers-selector';\r\n  \t\t\tinput.defaultChecked = checked;\r\n  \t\t} else {\r\n  \t\t\tinput = this._createRadioElement('leaflet-base-layers_' + stamp(this), checked);\r\n  \t\t}\r\n\r\n  \t\tthis._layerControlInputs.push(input);\r\n  \t\tinput.layerId = stamp(obj.layer);\r\n\r\n  \t\ton(input, 'click', this._onInputClick, this);\r\n\r\n  \t\tvar name = document.createElement('span');\r\n  \t\tname.innerHTML = ' ' + obj.name;\r\n\r\n  \t\t// Helps from preventing layer control flicker when checkboxes are disabled\r\n  \t\t// https://github.com/Leaflet/Leaflet/issues/2771\r\n  \t\tvar holder = document.createElement('div');\r\n\r\n  \t\tlabel.appendChild(holder);\r\n  \t\tholder.appendChild(input);\r\n  \t\tholder.appendChild(name);\r\n\r\n  \t\tvar container = obj.overlay ? this._overlaysList : this._baseLayersList;\r\n  \t\tcontainer.appendChild(label);\r\n\r\n  \t\tthis._checkDisabledLayers();\r\n  \t\treturn label;\r\n  \t},\r\n\r\n  \t_onInputClick: function () {\r\n  \t\tvar inputs = this._layerControlInputs,\r\n  \t\t    input, layer;\r\n  \t\tvar addedLayers = [],\r\n  \t\t    removedLayers = [];\r\n\r\n  \t\tthis._handlingClick = true;\r\n\r\n  \t\tfor (var i = inputs.length - 1; i >= 0; i--) {\r\n  \t\t\tinput = inputs[i];\r\n  \t\t\tlayer = this._getLayer(input.layerId).layer;\r\n\r\n  \t\t\tif (input.checked) {\r\n  \t\t\t\taddedLayers.push(layer);\r\n  \t\t\t} else if (!input.checked) {\r\n  \t\t\t\tremovedLayers.push(layer);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\t// Bugfix issue 2318: Should remove all old layers before readding new ones\r\n  \t\tfor (i = 0; i < removedLayers.length; i++) {\r\n  \t\t\tif (this._map.hasLayer(removedLayers[i])) {\r\n  \t\t\t\tthis._map.removeLayer(removedLayers[i]);\r\n  \t\t\t}\r\n  \t\t}\r\n  \t\tfor (i = 0; i < addedLayers.length; i++) {\r\n  \t\t\tif (!this._map.hasLayer(addedLayers[i])) {\r\n  \t\t\t\tthis._map.addLayer(addedLayers[i]);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tthis._handlingClick = false;\r\n\r\n  \t\tthis._refocusOnMap();\r\n  \t},\r\n\r\n  \t_checkDisabledLayers: function () {\r\n  \t\tvar inputs = this._layerControlInputs,\r\n  \t\t    input,\r\n  \t\t    layer,\r\n  \t\t    zoom = this._map.getZoom();\r\n\r\n  \t\tfor (var i = inputs.length - 1; i >= 0; i--) {\r\n  \t\t\tinput = inputs[i];\r\n  \t\t\tlayer = this._getLayer(input.layerId).layer;\r\n  \t\t\tinput.disabled = (layer.options.minZoom !== undefined && zoom < layer.options.minZoom) ||\r\n  \t\t\t                 (layer.options.maxZoom !== undefined && zoom > layer.options.maxZoom);\r\n\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_expandIfNotCollapsed: function () {\r\n  \t\tif (this._map && !this.options.collapsed) {\r\n  \t\t\tthis.expand();\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_expand: function () {\r\n  \t\t// Backward compatibility, remove me in 1.1.\r\n  \t\treturn this.expand();\r\n  \t},\r\n\r\n  \t_collapse: function () {\r\n  \t\t// Backward compatibility, remove me in 1.1.\r\n  \t\treturn this.collapse();\r\n  \t}\r\n\r\n  });\r\n\r\n\r\n  // @factory L.control.layers(baselayers?: Object, overlays?: Object, options?: Control.Layers options)\r\n  // Creates a layers control with the given layers. Base layers will be switched with radio buttons, while overlays will be switched with checkboxes. Note that all base layers should be passed in the base layers object, but only one should be added to the map during map instantiation.\r\n  var layers = function (baseLayers, overlays, options) {\r\n  \treturn new Layers(baseLayers, overlays, options);\r\n  };\n\n  /*\r\n   * @class Control.Zoom\r\n   * @aka L.Control.Zoom\r\n   * @inherits Control\r\n   *\r\n   * A basic zoom control with two buttons (zoom in and zoom out). It is put on the map by default unless you set its [`zoomControl` option](#map-zoomcontrol) to `false`. Extends `Control`.\r\n   */\r\n\r\n  var Zoom = Control.extend({\r\n  \t// @section\r\n  \t// @aka Control.Zoom options\r\n  \toptions: {\r\n  \t\tposition: 'topleft',\r\n\r\n  \t\t// @option zoomInText: String = '+'\r\n  \t\t// The text set on the 'zoom in' button.\r\n  \t\tzoomInText: '+',\r\n\r\n  \t\t// @option zoomInTitle: String = 'Zoom in'\r\n  \t\t// The title set on the 'zoom in' button.\r\n  \t\tzoomInTitle: 'Zoom in',\r\n\r\n  \t\t// @option zoomOutText: String = '&#x2212;'\r\n  \t\t// The text set on the 'zoom out' button.\r\n  \t\tzoomOutText: '&#x2212;',\r\n\r\n  \t\t// @option zoomOutTitle: String = 'Zoom out'\r\n  \t\t// The title set on the 'zoom out' button.\r\n  \t\tzoomOutTitle: 'Zoom out'\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n  \t\tvar zoomName = 'leaflet-control-zoom',\r\n  \t\t    container = create$1('div', zoomName + ' leaflet-bar'),\r\n  \t\t    options = this.options;\r\n\r\n  \t\tthis._zoomInButton  = this._createButton(options.zoomInText, options.zoomInTitle,\r\n  \t\t        zoomName + '-in',  container, this._zoomIn);\r\n  \t\tthis._zoomOutButton = this._createButton(options.zoomOutText, options.zoomOutTitle,\r\n  \t\t        zoomName + '-out', container, this._zoomOut);\r\n\r\n  \t\tthis._updateDisabled();\r\n  \t\tmap.on('zoomend zoomlevelschange', this._updateDisabled, this);\r\n\r\n  \t\treturn container;\r\n  \t},\r\n\r\n  \tonRemove: function (map) {\r\n  \t\tmap.off('zoomend zoomlevelschange', this._updateDisabled, this);\r\n  \t},\r\n\r\n  \tdisable: function () {\r\n  \t\tthis._disabled = true;\r\n  \t\tthis._updateDisabled();\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \tenable: function () {\r\n  \t\tthis._disabled = false;\r\n  \t\tthis._updateDisabled();\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_zoomIn: function (e) {\r\n  \t\tif (!this._disabled && this._map._zoom < this._map.getMaxZoom()) {\r\n  \t\t\tthis._map.zoomIn(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_zoomOut: function (e) {\r\n  \t\tif (!this._disabled && this._map._zoom > this._map.getMinZoom()) {\r\n  \t\t\tthis._map.zoomOut(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_createButton: function (html, title, className, container, fn) {\r\n  \t\tvar link = create$1('a', className, container);\r\n  \t\tlink.innerHTML = html;\r\n  \t\tlink.href = '#';\r\n  \t\tlink.title = title;\r\n\r\n  \t\t/*\r\n  \t\t * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\r\n  \t\t */\r\n  \t\tlink.setAttribute('role', 'button');\r\n  \t\tlink.setAttribute('aria-label', title);\r\n\r\n  \t\tdisableClickPropagation(link);\r\n  \t\ton(link, 'click', stop);\r\n  \t\ton(link, 'click', fn, this);\r\n  \t\ton(link, 'click', this._refocusOnMap, this);\r\n\r\n  \t\treturn link;\r\n  \t},\r\n\r\n  \t_updateDisabled: function () {\r\n  \t\tvar map = this._map,\r\n  \t\t    className = 'leaflet-disabled';\r\n\r\n  \t\tremoveClass(this._zoomInButton, className);\r\n  \t\tremoveClass(this._zoomOutButton, className);\r\n\r\n  \t\tif (this._disabled || map._zoom === map.getMinZoom()) {\r\n  \t\t\taddClass(this._zoomOutButton, className);\r\n  \t\t}\r\n  \t\tif (this._disabled || map._zoom === map.getMaxZoom()) {\r\n  \t\t\taddClass(this._zoomInButton, className);\r\n  \t\t}\r\n  \t}\r\n  });\r\n\r\n  // @namespace Map\r\n  // @section Control options\r\n  // @option zoomControl: Boolean = true\r\n  // Whether a [zoom control](#control-zoom) is added to the map by default.\r\n  Map.mergeOptions({\r\n  \tzoomControl: true\r\n  });\r\n\r\n  Map.addInitHook(function () {\r\n  \tif (this.options.zoomControl) {\r\n  \t\t// @section Controls\r\n  \t\t// @property zoomControl: Control.Zoom\r\n  \t\t// The default zoom control (only available if the\r\n  \t\t// [`zoomControl` option](#map-zoomcontrol) was `true` when creating the map).\r\n  \t\tthis.zoomControl = new Zoom();\r\n  \t\tthis.addControl(this.zoomControl);\r\n  \t}\r\n  });\r\n\r\n  // @namespace Control.Zoom\r\n  // @factory L.control.zoom(options: Control.Zoom options)\r\n  // Creates a zoom control\r\n  var zoom = function (options) {\r\n  \treturn new Zoom(options);\r\n  };\n\n  /*\n   * @class Control.Scale\n   * @aka L.Control.Scale\n   * @inherits Control\n   *\n   * A simple scale control that shows the scale of the current center of screen in metric (m/km) and imperial (mi/ft) systems. Extends `Control`.\n   *\n   * @example\n   *\n   * ```js\n   * L.control.scale().addTo(map);\n   * ```\n   */\n\n  var Scale = Control.extend({\n  \t// @section\n  \t// @aka Control.Scale options\n  \toptions: {\n  \t\tposition: 'bottomleft',\n\n  \t\t// @option maxWidth: Number = 100\n  \t\t// Maximum width of the control in pixels. The width is set dynamically to show round values (e.g. 100, 200, 500).\n  \t\tmaxWidth: 100,\n\n  \t\t// @option metric: Boolean = True\n  \t\t// Whether to show the metric scale line (m/km).\n  \t\tmetric: true,\n\n  \t\t// @option imperial: Boolean = True\n  \t\t// Whether to show the imperial scale line (mi/ft).\n  \t\timperial: true\n\n  \t\t// @option updateWhenIdle: Boolean = false\n  \t\t// If `true`, the control is updated on [`moveend`](#map-moveend), otherwise it's always up-to-date (updated on [`move`](#map-move)).\n  \t},\n\n  \tonAdd: function (map) {\n  \t\tvar className = 'leaflet-control-scale',\n  \t\t    container = create$1('div', className),\n  \t\t    options = this.options;\n\n  \t\tthis._addScales(options, className + '-line', container);\n\n  \t\tmap.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n  \t\tmap.whenReady(this._update, this);\n\n  \t\treturn container;\n  \t},\n\n  \tonRemove: function (map) {\n  \t\tmap.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n  \t},\n\n  \t_addScales: function (options, className, container) {\n  \t\tif (options.metric) {\n  \t\t\tthis._mScale = create$1('div', className, container);\n  \t\t}\n  \t\tif (options.imperial) {\n  \t\t\tthis._iScale = create$1('div', className, container);\n  \t\t}\n  \t},\n\n  \t_update: function () {\n  \t\tvar map = this._map,\n  \t\t    y = map.getSize().y / 2;\n\n  \t\tvar maxMeters = map.distance(\n  \t\t\tmap.containerPointToLatLng([0, y]),\n  \t\t\tmap.containerPointToLatLng([this.options.maxWidth, y]));\n\n  \t\tthis._updateScales(maxMeters);\n  \t},\n\n  \t_updateScales: function (maxMeters) {\n  \t\tif (this.options.metric && maxMeters) {\n  \t\t\tthis._updateMetric(maxMeters);\n  \t\t}\n  \t\tif (this.options.imperial && maxMeters) {\n  \t\t\tthis._updateImperial(maxMeters);\n  \t\t}\n  \t},\n\n  \t_updateMetric: function (maxMeters) {\n  \t\tvar meters = this._getRoundNum(maxMeters),\n  \t\t    label = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';\n\n  \t\tthis._updateScale(this._mScale, label, meters / maxMeters);\n  \t},\n\n  \t_updateImperial: function (maxMeters) {\n  \t\tvar maxFeet = maxMeters * 3.2808399,\n  \t\t    maxMiles, miles, feet;\n\n  \t\tif (maxFeet > 5280) {\n  \t\t\tmaxMiles = maxFeet / 5280;\n  \t\t\tmiles = this._getRoundNum(maxMiles);\n  \t\t\tthis._updateScale(this._iScale, miles + ' mi', miles / maxMiles);\n\n  \t\t} else {\n  \t\t\tfeet = this._getRoundNum(maxFeet);\n  \t\t\tthis._updateScale(this._iScale, feet + ' ft', feet / maxFeet);\n  \t\t}\n  \t},\n\n  \t_updateScale: function (scale, text, ratio) {\n  \t\tscale.style.width = Math.round(this.options.maxWidth * ratio) + 'px';\n  \t\tscale.innerHTML = text;\n  \t},\n\n  \t_getRoundNum: function (num) {\n  \t\tvar pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),\n  \t\t    d = num / pow10;\n\n  \t\td = d >= 10 ? 10 :\n  \t\t    d >= 5 ? 5 :\n  \t\t    d >= 3 ? 3 :\n  \t\t    d >= 2 ? 2 : 1;\n\n  \t\treturn pow10 * d;\n  \t}\n  });\n\n\n  // @factory L.control.scale(options?: Control.Scale options)\n  // Creates an scale control with the given options.\n  var scale = function (options) {\n  \treturn new Scale(options);\n  };\n\n  /*\r\n   * @class Control.Attribution\r\n   * @aka L.Control.Attribution\r\n   * @inherits Control\r\n   *\r\n   * The attribution control allows you to display attribution data in a small text box on a map. It is put on the map by default unless you set its [`attributionControl` option](#map-attributioncontrol) to `false`, and it fetches attribution texts from layers with the [`getAttribution` method](#layer-getattribution) automatically. Extends Control.\r\n   */\r\n\r\n  var Attribution = Control.extend({\r\n  \t// @section\r\n  \t// @aka Control.Attribution options\r\n  \toptions: {\r\n  \t\tposition: 'bottomright',\r\n\r\n  \t\t// @option prefix: String = 'Leaflet'\r\n  \t\t// The HTML text shown before the attributions. Pass `false` to disable.\r\n  \t\tprefix: '<a href=\"https://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>'\r\n  \t},\r\n\r\n  \tinitialize: function (options) {\r\n  \t\tsetOptions(this, options);\r\n\r\n  \t\tthis._attributions = {};\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n  \t\tmap.attributionControl = this;\r\n  \t\tthis._container = create$1('div', 'leaflet-control-attribution');\r\n  \t\tdisableClickPropagation(this._container);\r\n\r\n  \t\t// TODO ugly, refactor\r\n  \t\tfor (var i in map._layers) {\r\n  \t\t\tif (map._layers[i].getAttribution) {\r\n  \t\t\t\tthis.addAttribution(map._layers[i].getAttribution());\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tthis._update();\r\n\r\n  \t\treturn this._container;\r\n  \t},\r\n\r\n  \t// @method setPrefix(prefix: String): this\r\n  \t// Sets the text before the attributions.\r\n  \tsetPrefix: function (prefix) {\r\n  \t\tthis.options.prefix = prefix;\r\n  \t\tthis._update();\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method addAttribution(text: String): this\r\n  \t// Adds an attribution text (e.g. `'Vector data &copy; Mapbox'`).\r\n  \taddAttribution: function (text) {\r\n  \t\tif (!text) { return this; }\r\n\r\n  \t\tif (!this._attributions[text]) {\r\n  \t\t\tthis._attributions[text] = 0;\r\n  \t\t}\r\n  \t\tthis._attributions[text]++;\r\n\r\n  \t\tthis._update();\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method removeAttribution(text: String): this\r\n  \t// Removes an attribution text.\r\n  \tremoveAttribution: function (text) {\r\n  \t\tif (!text) { return this; }\r\n\r\n  \t\tif (this._attributions[text]) {\r\n  \t\t\tthis._attributions[text]--;\r\n  \t\t\tthis._update();\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_update: function () {\r\n  \t\tif (!this._map) { return; }\r\n\r\n  \t\tvar attribs = [];\r\n\r\n  \t\tfor (var i in this._attributions) {\r\n  \t\t\tif (this._attributions[i]) {\r\n  \t\t\t\tattribs.push(i);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tvar prefixAndAttribs = [];\r\n\r\n  \t\tif (this.options.prefix) {\r\n  \t\t\tprefixAndAttribs.push(this.options.prefix);\r\n  \t\t}\r\n  \t\tif (attribs.length) {\r\n  \t\t\tprefixAndAttribs.push(attribs.join(', '));\r\n  \t\t}\r\n\r\n  \t\tthis._container.innerHTML = prefixAndAttribs.join(' | ');\r\n  \t}\r\n  });\r\n\r\n  // @namespace Map\r\n  // @section Control options\r\n  // @option attributionControl: Boolean = true\r\n  // Whether a [attribution control](#control-attribution) is added to the map by default.\r\n  Map.mergeOptions({\r\n  \tattributionControl: true\r\n  });\r\n\r\n  Map.addInitHook(function () {\r\n  \tif (this.options.attributionControl) {\r\n  \t\tnew Attribution().addTo(this);\r\n  \t}\r\n  });\r\n\r\n  // @namespace Control.Attribution\r\n  // @factory L.control.attribution(options: Control.Attribution options)\r\n  // Creates an attribution control.\r\n  var attribution = function (options) {\r\n  \treturn new Attribution(options);\r\n  };\n\n  Control.Layers = Layers;\n  Control.Zoom = Zoom;\n  Control.Scale = Scale;\n  Control.Attribution = Attribution;\n\n  control.layers = layers;\n  control.zoom = zoom;\n  control.scale = scale;\n  control.attribution = attribution;\n\n  /*\n  \tL.Handler is a base class for handler classes that are used internally to inject\n  \tinteraction features like dragging to classes like Map and Marker.\n  */\n\n  // @class Handler\n  // @aka L.Handler\n  // Abstract class for map interaction handlers\n\n  var Handler = Class.extend({\n  \tinitialize: function (map) {\n  \t\tthis._map = map;\n  \t},\n\n  \t// @method enable(): this\n  \t// Enables the handler\n  \tenable: function () {\n  \t\tif (this._enabled) { return this; }\n\n  \t\tthis._enabled = true;\n  \t\tthis.addHooks();\n  \t\treturn this;\n  \t},\n\n  \t// @method disable(): this\n  \t// Disables the handler\n  \tdisable: function () {\n  \t\tif (!this._enabled) { return this; }\n\n  \t\tthis._enabled = false;\n  \t\tthis.removeHooks();\n  \t\treturn this;\n  \t},\n\n  \t// @method enabled(): Boolean\n  \t// Returns `true` if the handler is enabled\n  \tenabled: function () {\n  \t\treturn !!this._enabled;\n  \t}\n\n  \t// @section Extension methods\n  \t// Classes inheriting from `Handler` must implement the two following methods:\n  \t// @method addHooks()\n  \t// Called when the handler is enabled, should add event hooks.\n  \t// @method removeHooks()\n  \t// Called when the handler is disabled, should remove the event hooks added previously.\n  });\n\n  // @section There is static function which can be called without instantiating L.Handler:\n  // @function addTo(map: Map, name: String): this\n  // Adds a new Handler to the given map with the given name.\n  Handler.addTo = function (map, name) {\n  \tmap.addHandler(name, this);\n  \treturn this;\n  };\n\n  var Mixin = {Events: Events};\n\n  /*\r\n   * @class Draggable\r\n   * @aka L.Draggable\r\n   * @inherits Evented\r\n   *\r\n   * A class for making DOM elements draggable (including touch support).\r\n   * Used internally for map and marker dragging. Only works for elements\r\n   * that were positioned with [`L.DomUtil.setPosition`](#domutil-setposition).\r\n   *\r\n   * @example\r\n   * ```js\r\n   * var draggable = new L.Draggable(elementToDrag);\r\n   * draggable.enable();\r\n   * ```\r\n   */\r\n\r\n  var START = touch ? 'touchstart mousedown' : 'mousedown';\r\n  var END = {\r\n  \tmousedown: 'mouseup',\r\n  \ttouchstart: 'touchend',\r\n  \tpointerdown: 'touchend',\r\n  \tMSPointerDown: 'touchend'\r\n  };\r\n  var MOVE = {\r\n  \tmousedown: 'mousemove',\r\n  \ttouchstart: 'touchmove',\r\n  \tpointerdown: 'touchmove',\r\n  \tMSPointerDown: 'touchmove'\r\n  };\r\n\r\n\r\n  var Draggable = Evented.extend({\r\n\r\n  \toptions: {\r\n  \t\t// @section\r\n  \t\t// @aka Draggable options\r\n  \t\t// @option clickTolerance: Number = 3\r\n  \t\t// The max number of pixels a user can shift the mouse pointer during a click\r\n  \t\t// for it to be considered a valid click (as opposed to a mouse drag).\r\n  \t\tclickTolerance: 3\r\n  \t},\r\n\r\n  \t// @constructor L.Draggable(el: HTMLElement, dragHandle?: HTMLElement, preventOutline?: Boolean, options?: Draggable options)\r\n  \t// Creates a `Draggable` object for moving `el` when you start dragging the `dragHandle` element (equals `el` itself by default).\r\n  \tinitialize: function (element, dragStartTarget, preventOutline$$1, options) {\r\n  \t\tsetOptions(this, options);\r\n\r\n  \t\tthis._element = element;\r\n  \t\tthis._dragStartTarget = dragStartTarget || element;\r\n  \t\tthis._preventOutline = preventOutline$$1;\r\n  \t},\r\n\r\n  \t// @method enable()\r\n  \t// Enables the dragging ability\r\n  \tenable: function () {\r\n  \t\tif (this._enabled) { return; }\r\n\r\n  \t\ton(this._dragStartTarget, START, this._onDown, this);\r\n\r\n  \t\tthis._enabled = true;\r\n  \t},\r\n\r\n  \t// @method disable()\r\n  \t// Disables the dragging ability\r\n  \tdisable: function () {\r\n  \t\tif (!this._enabled) { return; }\r\n\r\n  \t\t// If we're currently dragging this draggable,\r\n  \t\t// disabling it counts as first ending the drag.\r\n  \t\tif (Draggable._dragging === this) {\r\n  \t\t\tthis.finishDrag();\r\n  \t\t}\r\n\r\n  \t\toff(this._dragStartTarget, START, this._onDown, this);\r\n\r\n  \t\tthis._enabled = false;\r\n  \t\tthis._moved = false;\r\n  \t},\r\n\r\n  \t_onDown: function (e) {\r\n  \t\t// Ignore simulated events, since we handle both touch and\r\n  \t\t// mouse explicitly; otherwise we risk getting duplicates of\r\n  \t\t// touch events, see #4315.\r\n  \t\t// Also ignore the event if disabled; this happens in IE11\r\n  \t\t// under some circumstances, see #3666.\r\n  \t\tif (e._simulated || !this._enabled) { return; }\r\n\r\n  \t\tthis._moved = false;\r\n\r\n  \t\tif (hasClass(this._element, 'leaflet-zoom-anim')) { return; }\r\n\r\n  \t\tif (Draggable._dragging || e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }\r\n  \t\tDraggable._dragging = this;  // Prevent dragging multiple objects at once.\r\n\r\n  \t\tif (this._preventOutline) {\r\n  \t\t\tpreventOutline(this._element);\r\n  \t\t}\r\n\r\n  \t\tdisableImageDrag();\r\n  \t\tdisableTextSelection();\r\n\r\n  \t\tif (this._moving) { return; }\r\n\r\n  \t\t// @event down: Event\r\n  \t\t// Fired when a drag is about to start.\r\n  \t\tthis.fire('down');\r\n\r\n  \t\tvar first = e.touches ? e.touches[0] : e,\r\n  \t\t    sizedParent = getSizedParentNode(this._element);\r\n\r\n  \t\tthis._startPoint = new Point(first.clientX, first.clientY);\r\n\r\n  \t\t// Cache the scale, so that we can continuously compensate for it during drag (_onMove).\r\n  \t\tthis._parentScale = getScale(sizedParent);\r\n\r\n  \t\ton(document, MOVE[e.type], this._onMove, this);\r\n  \t\ton(document, END[e.type], this._onUp, this);\r\n  \t},\r\n\r\n  \t_onMove: function (e) {\r\n  \t\t// Ignore simulated events, since we handle both touch and\r\n  \t\t// mouse explicitly; otherwise we risk getting duplicates of\r\n  \t\t// touch events, see #4315.\r\n  \t\t// Also ignore the event if disabled; this happens in IE11\r\n  \t\t// under some circumstances, see #3666.\r\n  \t\tif (e._simulated || !this._enabled) { return; }\r\n\r\n  \t\tif (e.touches && e.touches.length > 1) {\r\n  \t\t\tthis._moved = true;\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\tvar first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),\r\n  \t\t    offset = new Point(first.clientX, first.clientY)._subtract(this._startPoint);\r\n\r\n  \t\tif (!offset.x && !offset.y) { return; }\r\n  \t\tif (Math.abs(offset.x) + Math.abs(offset.y) < this.options.clickTolerance) { return; }\r\n\r\n  \t\t// We assume that the parent container's position, border and scale do not change for the duration of the drag.\r\n  \t\t// Therefore there is no need to account for the position and border (they are eliminated by the subtraction)\r\n  \t\t// and we can use the cached value for the scale.\r\n  \t\toffset.x /= this._parentScale.x;\r\n  \t\toffset.y /= this._parentScale.y;\r\n\r\n  \t\tpreventDefault(e);\r\n\r\n  \t\tif (!this._moved) {\r\n  \t\t\t// @event dragstart: Event\r\n  \t\t\t// Fired when a drag starts\r\n  \t\t\tthis.fire('dragstart');\r\n\r\n  \t\t\tthis._moved = true;\r\n  \t\t\tthis._startPos = getPosition(this._element).subtract(offset);\r\n\r\n  \t\t\taddClass(document.body, 'leaflet-dragging');\r\n\r\n  \t\t\tthis._lastTarget = e.target || e.srcElement;\r\n  \t\t\t// IE and Edge do not give the <use> element, so fetch it\r\n  \t\t\t// if necessary\r\n  \t\t\tif (window.SVGElementInstance && this._lastTarget instanceof window.SVGElementInstance) {\r\n  \t\t\t\tthis._lastTarget = this._lastTarget.correspondingUseElement;\r\n  \t\t\t}\r\n  \t\t\taddClass(this._lastTarget, 'leaflet-drag-target');\r\n  \t\t}\r\n\r\n  \t\tthis._newPos = this._startPos.add(offset);\r\n  \t\tthis._moving = true;\r\n\r\n  \t\tcancelAnimFrame(this._animRequest);\r\n  \t\tthis._lastEvent = e;\r\n  \t\tthis._animRequest = requestAnimFrame(this._updatePosition, this, true);\r\n  \t},\r\n\r\n  \t_updatePosition: function () {\r\n  \t\tvar e = {originalEvent: this._lastEvent};\r\n\r\n  \t\t// @event predrag: Event\r\n  \t\t// Fired continuously during dragging *before* each corresponding\r\n  \t\t// update of the element's position.\r\n  \t\tthis.fire('predrag', e);\r\n  \t\tsetPosition(this._element, this._newPos);\r\n\r\n  \t\t// @event drag: Event\r\n  \t\t// Fired continuously during dragging.\r\n  \t\tthis.fire('drag', e);\r\n  \t},\r\n\r\n  \t_onUp: function (e) {\r\n  \t\t// Ignore simulated events, since we handle both touch and\r\n  \t\t// mouse explicitly; otherwise we risk getting duplicates of\r\n  \t\t// touch events, see #4315.\r\n  \t\t// Also ignore the event if disabled; this happens in IE11\r\n  \t\t// under some circumstances, see #3666.\r\n  \t\tif (e._simulated || !this._enabled) { return; }\r\n  \t\tthis.finishDrag();\r\n  \t},\r\n\r\n  \tfinishDrag: function () {\r\n  \t\tremoveClass(document.body, 'leaflet-dragging');\r\n\r\n  \t\tif (this._lastTarget) {\r\n  \t\t\tremoveClass(this._lastTarget, 'leaflet-drag-target');\r\n  \t\t\tthis._lastTarget = null;\r\n  \t\t}\r\n\r\n  \t\tfor (var i in MOVE) {\r\n  \t\t\toff(document, MOVE[i], this._onMove, this);\r\n  \t\t\toff(document, END[i], this._onUp, this);\r\n  \t\t}\r\n\r\n  \t\tenableImageDrag();\r\n  \t\tenableTextSelection();\r\n\r\n  \t\tif (this._moved && this._moving) {\r\n  \t\t\t// ensure drag is not fired after dragend\r\n  \t\t\tcancelAnimFrame(this._animRequest);\r\n\r\n  \t\t\t// @event dragend: DragEndEvent\r\n  \t\t\t// Fired when the drag ends.\r\n  \t\t\tthis.fire('dragend', {\r\n  \t\t\t\tdistance: this._newPos.distanceTo(this._startPos)\r\n  \t\t\t});\r\n  \t\t}\r\n\r\n  \t\tthis._moving = false;\r\n  \t\tDraggable._dragging = false;\r\n  \t}\r\n\r\n  });\n\n  /*\r\n   * @namespace LineUtil\r\n   *\r\n   * Various utility functions for polyline points processing, used by Leaflet internally to make polylines lightning-fast.\r\n   */\r\n\r\n  // Simplify polyline with vertex reduction and Douglas-Peucker simplification.\r\n  // Improves rendering performance dramatically by lessening the number of points to draw.\r\n\r\n  // @function simplify(points: Point[], tolerance: Number): Point[]\r\n  // Dramatically reduces the number of points in a polyline while retaining\r\n  // its shape and returns a new array of simplified points, using the\r\n  // [Douglas-Peucker algorithm](http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm).\r\n  // Used for a huge performance boost when processing/displaying Leaflet polylines for\r\n  // each zoom level and also reducing visual noise. tolerance affects the amount of\r\n  // simplification (lesser value means higher quality but slower and with more points).\r\n  // Also released as a separated micro-library [Simplify.js](http://mourner.github.com/simplify-js/).\r\n  function simplify(points, tolerance) {\r\n  \tif (!tolerance || !points.length) {\r\n  \t\treturn points.slice();\r\n  \t}\r\n\r\n  \tvar sqTolerance = tolerance * tolerance;\r\n\r\n  \t    // stage 1: vertex reduction\r\n  \t    points = _reducePoints(points, sqTolerance);\r\n\r\n  \t    // stage 2: Douglas-Peucker simplification\r\n  \t    points = _simplifyDP(points, sqTolerance);\r\n\r\n  \treturn points;\r\n  }\r\n\r\n  // @function pointToSegmentDistance(p: Point, p1: Point, p2: Point): Number\r\n  // Returns the distance between point `p` and segment `p1` to `p2`.\r\n  function pointToSegmentDistance(p, p1, p2) {\r\n  \treturn Math.sqrt(_sqClosestPointOnSegment(p, p1, p2, true));\r\n  }\r\n\r\n  // @function closestPointOnSegment(p: Point, p1: Point, p2: Point): Number\r\n  // Returns the closest point from a point `p` on a segment `p1` to `p2`.\r\n  function closestPointOnSegment(p, p1, p2) {\r\n  \treturn _sqClosestPointOnSegment(p, p1, p2);\r\n  }\r\n\r\n  // Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm\r\n  function _simplifyDP(points, sqTolerance) {\r\n\r\n  \tvar len = points.length,\r\n  \t    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,\r\n  \t    markers = new ArrayConstructor(len);\r\n\r\n  \t    markers[0] = markers[len - 1] = 1;\r\n\r\n  \t_simplifyDPStep(points, markers, sqTolerance, 0, len - 1);\r\n\r\n  \tvar i,\r\n  \t    newPoints = [];\r\n\r\n  \tfor (i = 0; i < len; i++) {\r\n  \t\tif (markers[i]) {\r\n  \t\t\tnewPoints.push(points[i]);\r\n  \t\t}\r\n  \t}\r\n\r\n  \treturn newPoints;\r\n  }\r\n\r\n  function _simplifyDPStep(points, markers, sqTolerance, first, last) {\r\n\r\n  \tvar maxSqDist = 0,\r\n  \tindex, i, sqDist;\r\n\r\n  \tfor (i = first + 1; i <= last - 1; i++) {\r\n  \t\tsqDist = _sqClosestPointOnSegment(points[i], points[first], points[last], true);\r\n\r\n  \t\tif (sqDist > maxSqDist) {\r\n  \t\t\tindex = i;\r\n  \t\t\tmaxSqDist = sqDist;\r\n  \t\t}\r\n  \t}\r\n\r\n  \tif (maxSqDist > sqTolerance) {\r\n  \t\tmarkers[index] = 1;\r\n\r\n  \t\t_simplifyDPStep(points, markers, sqTolerance, first, index);\r\n  \t\t_simplifyDPStep(points, markers, sqTolerance, index, last);\r\n  \t}\r\n  }\r\n\r\n  // reduce points that are too close to each other to a single point\r\n  function _reducePoints(points, sqTolerance) {\r\n  \tvar reducedPoints = [points[0]];\r\n\r\n  \tfor (var i = 1, prev = 0, len = points.length; i < len; i++) {\r\n  \t\tif (_sqDist(points[i], points[prev]) > sqTolerance) {\r\n  \t\t\treducedPoints.push(points[i]);\r\n  \t\t\tprev = i;\r\n  \t\t}\r\n  \t}\r\n  \tif (prev < len - 1) {\r\n  \t\treducedPoints.push(points[len - 1]);\r\n  \t}\r\n  \treturn reducedPoints;\r\n  }\r\n\r\n  var _lastCode;\r\n\r\n  // @function clipSegment(a: Point, b: Point, bounds: Bounds, useLastCode?: Boolean, round?: Boolean): Point[]|Boolean\r\n  // Clips the segment a to b by rectangular bounds with the\r\n  // [Cohen-Sutherland algorithm](https://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)\r\n  // (modifying the segment points directly!). Used by Leaflet to only show polyline\r\n  // points that are on the screen or near, increasing performance.\r\n  function clipSegment(a, b, bounds, useLastCode, round) {\r\n  \tvar codeA = useLastCode ? _lastCode : _getBitCode(a, bounds),\r\n  \t    codeB = _getBitCode(b, bounds),\r\n\r\n  \t    codeOut, p, newCode;\r\n\r\n  \t    // save 2nd code to avoid calculating it on the next segment\r\n  \t    _lastCode = codeB;\r\n\r\n  \twhile (true) {\r\n  \t\t// if a,b is inside the clip window (trivial accept)\r\n  \t\tif (!(codeA | codeB)) {\r\n  \t\t\treturn [a, b];\r\n  \t\t}\r\n\r\n  \t\t// if a,b is outside the clip window (trivial reject)\r\n  \t\tif (codeA & codeB) {\r\n  \t\t\treturn false;\r\n  \t\t}\r\n\r\n  \t\t// other cases\r\n  \t\tcodeOut = codeA || codeB;\r\n  \t\tp = _getEdgeIntersection(a, b, codeOut, bounds, round);\r\n  \t\tnewCode = _getBitCode(p, bounds);\r\n\r\n  \t\tif (codeOut === codeA) {\r\n  \t\t\ta = p;\r\n  \t\t\tcodeA = newCode;\r\n  \t\t} else {\r\n  \t\t\tb = p;\r\n  \t\t\tcodeB = newCode;\r\n  \t\t}\r\n  \t}\r\n  }\r\n\r\n  function _getEdgeIntersection(a, b, code, bounds, round) {\r\n  \tvar dx = b.x - a.x,\r\n  \t    dy = b.y - a.y,\r\n  \t    min = bounds.min,\r\n  \t    max = bounds.max,\r\n  \t    x, y;\r\n\r\n  \tif (code & 8) { // top\r\n  \t\tx = a.x + dx * (max.y - a.y) / dy;\r\n  \t\ty = max.y;\r\n\r\n  \t} else if (code & 4) { // bottom\r\n  \t\tx = a.x + dx * (min.y - a.y) / dy;\r\n  \t\ty = min.y;\r\n\r\n  \t} else if (code & 2) { // right\r\n  \t\tx = max.x;\r\n  \t\ty = a.y + dy * (max.x - a.x) / dx;\r\n\r\n  \t} else if (code & 1) { // left\r\n  \t\tx = min.x;\r\n  \t\ty = a.y + dy * (min.x - a.x) / dx;\r\n  \t}\r\n\r\n  \treturn new Point(x, y, round);\r\n  }\r\n\r\n  function _getBitCode(p, bounds) {\r\n  \tvar code = 0;\r\n\r\n  \tif (p.x < bounds.min.x) { // left\r\n  \t\tcode |= 1;\r\n  \t} else if (p.x > bounds.max.x) { // right\r\n  \t\tcode |= 2;\r\n  \t}\r\n\r\n  \tif (p.y < bounds.min.y) { // bottom\r\n  \t\tcode |= 4;\r\n  \t} else if (p.y > bounds.max.y) { // top\r\n  \t\tcode |= 8;\r\n  \t}\r\n\r\n  \treturn code;\r\n  }\r\n\r\n  // square distance (to avoid unnecessary Math.sqrt calls)\r\n  function _sqDist(p1, p2) {\r\n  \tvar dx = p2.x - p1.x,\r\n  \t    dy = p2.y - p1.y;\r\n  \treturn dx * dx + dy * dy;\r\n  }\r\n\r\n  // return closest point on segment or distance to that point\r\n  function _sqClosestPointOnSegment(p, p1, p2, sqDist) {\r\n  \tvar x = p1.x,\r\n  \t    y = p1.y,\r\n  \t    dx = p2.x - x,\r\n  \t    dy = p2.y - y,\r\n  \t    dot = dx * dx + dy * dy,\r\n  \t    t;\r\n\r\n  \tif (dot > 0) {\r\n  \t\tt = ((p.x - x) * dx + (p.y - y) * dy) / dot;\r\n\r\n  \t\tif (t > 1) {\r\n  \t\t\tx = p2.x;\r\n  \t\t\ty = p2.y;\r\n  \t\t} else if (t > 0) {\r\n  \t\t\tx += dx * t;\r\n  \t\t\ty += dy * t;\r\n  \t\t}\r\n  \t}\r\n\r\n  \tdx = p.x - x;\r\n  \tdy = p.y - y;\r\n\r\n  \treturn sqDist ? dx * dx + dy * dy : new Point(x, y);\r\n  }\r\n\r\n\r\n  // @function isFlat(latlngs: LatLng[]): Boolean\r\n  // Returns true if `latlngs` is a flat array, false is nested.\r\n  function isFlat(latlngs) {\r\n  \treturn !isArray(latlngs[0]) || (typeof latlngs[0][0] !== 'object' && typeof latlngs[0][0] !== 'undefined');\r\n  }\r\n\r\n  function _flat(latlngs) {\r\n  \tconsole.warn('Deprecated use of _flat, please use L.LineUtil.isFlat instead.');\r\n  \treturn isFlat(latlngs);\r\n  }\n\n  var LineUtil = ({\n    simplify: simplify,\n    pointToSegmentDistance: pointToSegmentDistance,\n    closestPointOnSegment: closestPointOnSegment,\n    clipSegment: clipSegment,\n    _getEdgeIntersection: _getEdgeIntersection,\n    _getBitCode: _getBitCode,\n    _sqClosestPointOnSegment: _sqClosestPointOnSegment,\n    isFlat: isFlat,\n    _flat: _flat\n  });\n\n  /*\r\n   * @namespace PolyUtil\r\n   * Various utility functions for polygon geometries.\r\n   */\r\n\r\n  /* @function clipPolygon(points: Point[], bounds: Bounds, round?: Boolean): Point[]\r\n   * Clips the polygon geometry defined by the given `points` by the given bounds (using the [Sutherland-Hodgman algorithm](https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm)).\r\n   * Used by Leaflet to only show polygon points that are on the screen or near, increasing\r\n   * performance. Note that polygon points needs different algorithm for clipping\r\n   * than polyline, so there's a separate method for it.\r\n   */\r\n  function clipPolygon(points, bounds, round) {\r\n  \tvar clippedPoints,\r\n  \t    edges = [1, 4, 2, 8],\r\n  \t    i, j, k,\r\n  \t    a, b,\r\n  \t    len, edge, p;\r\n\r\n  \tfor (i = 0, len = points.length; i < len; i++) {\r\n  \t\tpoints[i]._code = _getBitCode(points[i], bounds);\r\n  \t}\r\n\r\n  \t// for each edge (left, bottom, right, top)\r\n  \tfor (k = 0; k < 4; k++) {\r\n  \t\tedge = edges[k];\r\n  \t\tclippedPoints = [];\r\n\r\n  \t\tfor (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\r\n  \t\t\ta = points[i];\r\n  \t\t\tb = points[j];\r\n\r\n  \t\t\t// if a is inside the clip window\r\n  \t\t\tif (!(a._code & edge)) {\r\n  \t\t\t\t// if b is outside the clip window (a->b goes out of screen)\r\n  \t\t\t\tif (b._code & edge) {\r\n  \t\t\t\t\tp = _getEdgeIntersection(b, a, edge, bounds, round);\r\n  \t\t\t\t\tp._code = _getBitCode(p, bounds);\r\n  \t\t\t\t\tclippedPoints.push(p);\r\n  \t\t\t\t}\r\n  \t\t\t\tclippedPoints.push(a);\r\n\r\n  \t\t\t// else if b is inside the clip window (a->b enters the screen)\r\n  \t\t\t} else if (!(b._code & edge)) {\r\n  \t\t\t\tp = _getEdgeIntersection(b, a, edge, bounds, round);\r\n  \t\t\t\tp._code = _getBitCode(p, bounds);\r\n  \t\t\t\tclippedPoints.push(p);\r\n  \t\t\t}\r\n  \t\t}\r\n  \t\tpoints = clippedPoints;\r\n  \t}\r\n\r\n  \treturn points;\r\n  }\n\n  var PolyUtil = ({\n    clipPolygon: clipPolygon\n  });\n\n  /*\r\n   * @namespace Projection\r\n   * @section\r\n   * Leaflet comes with a set of already defined Projections out of the box:\r\n   *\r\n   * @projection L.Projection.LonLat\r\n   *\r\n   * Equirectangular, or Plate Carree projection — the most simple projection,\r\n   * mostly used by GIS enthusiasts. Directly maps `x` as longitude, and `y` as\r\n   * latitude. Also suitable for flat worlds, e.g. game maps. Used by the\r\n   * `EPSG:4326` and `Simple` CRS.\r\n   */\r\n\r\n  var LonLat = {\r\n  \tproject: function (latlng) {\r\n  \t\treturn new Point(latlng.lng, latlng.lat);\r\n  \t},\r\n\r\n  \tunproject: function (point) {\r\n  \t\treturn new LatLng(point.y, point.x);\r\n  \t},\r\n\r\n  \tbounds: new Bounds([-180, -90], [180, 90])\r\n  };\n\n  /*\r\n   * @namespace Projection\r\n   * @projection L.Projection.Mercator\r\n   *\r\n   * Elliptical Mercator projection — more complex than Spherical Mercator. Assumes that Earth is an ellipsoid. Used by the EPSG:3395 CRS.\r\n   */\r\n\r\n  var Mercator = {\r\n  \tR: 6378137,\r\n  \tR_MINOR: 6356752.314245179,\r\n\r\n  \tbounds: new Bounds([-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]),\r\n\r\n  \tproject: function (latlng) {\r\n  \t\tvar d = Math.PI / 180,\r\n  \t\t    r = this.R,\r\n  \t\t    y = latlng.lat * d,\r\n  \t\t    tmp = this.R_MINOR / r,\r\n  \t\t    e = Math.sqrt(1 - tmp * tmp),\r\n  \t\t    con = e * Math.sin(y);\r\n\r\n  \t\tvar ts = Math.tan(Math.PI / 4 - y / 2) / Math.pow((1 - con) / (1 + con), e / 2);\r\n  \t\ty = -r * Math.log(Math.max(ts, 1E-10));\r\n\r\n  \t\treturn new Point(latlng.lng * d * r, y);\r\n  \t},\r\n\r\n  \tunproject: function (point) {\r\n  \t\tvar d = 180 / Math.PI,\r\n  \t\t    r = this.R,\r\n  \t\t    tmp = this.R_MINOR / r,\r\n  \t\t    e = Math.sqrt(1 - tmp * tmp),\r\n  \t\t    ts = Math.exp(-point.y / r),\r\n  \t\t    phi = Math.PI / 2 - 2 * Math.atan(ts);\r\n\r\n  \t\tfor (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {\r\n  \t\t\tcon = e * Math.sin(phi);\r\n  \t\t\tcon = Math.pow((1 - con) / (1 + con), e / 2);\r\n  \t\t\tdphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;\r\n  \t\t\tphi += dphi;\r\n  \t\t}\r\n\r\n  \t\treturn new LatLng(phi * d, point.x * d / r);\r\n  \t}\r\n  };\n\n  /*\n   * @class Projection\n\n   * An object with methods for projecting geographical coordinates of the world onto\n   * a flat surface (and back). See [Map projection](http://en.wikipedia.org/wiki/Map_projection).\n\n   * @property bounds: Bounds\n   * The bounds (specified in CRS units) where the projection is valid\n\n   * @method project(latlng: LatLng): Point\n   * Projects geographical coordinates into a 2D point.\n   * Only accepts actual `L.LatLng` instances, not arrays.\n\n   * @method unproject(point: Point): LatLng\n   * The inverse of `project`. Projects a 2D point into a geographical location.\n   * Only accepts actual `L.Point` instances, not arrays.\n\n   * Note that the projection instances do not inherit from Leaflet's `Class` object,\n   * and can't be instantiated. Also, new classes can't inherit from them,\n   * and methods can't be added to them with the `include` function.\n\n   */\n\n  var index = ({\n    LonLat: LonLat,\n    Mercator: Mercator,\n    SphericalMercator: SphericalMercator\n  });\n\n  /*\r\n   * @namespace CRS\r\n   * @crs L.CRS.EPSG3395\r\n   *\r\n   * Rarely used by some commercial tile providers. Uses Elliptical Mercator projection.\r\n   */\r\n  var EPSG3395 = extend({}, Earth, {\r\n  \tcode: 'EPSG:3395',\r\n  \tprojection: Mercator,\r\n\r\n  \ttransformation: (function () {\r\n  \t\tvar scale = 0.5 / (Math.PI * Mercator.R);\r\n  \t\treturn toTransformation(scale, 0.5, -scale, 0.5);\r\n  \t}())\r\n  });\n\n  /*\r\n   * @namespace CRS\r\n   * @crs L.CRS.EPSG4326\r\n   *\r\n   * A common CRS among GIS enthusiasts. Uses simple Equirectangular projection.\r\n   *\r\n   * Leaflet 1.0.x complies with the [TMS coordinate scheme for EPSG:4326](https://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#global-geodetic),\r\n   * which is a breaking change from 0.7.x behaviour.  If you are using a `TileLayer`\r\n   * with this CRS, ensure that there are two 256x256 pixel tiles covering the\r\n   * whole earth at zoom level zero, and that the tile coordinate origin is (-180,+90),\r\n   * or (-180,-90) for `TileLayer`s with [the `tms` option](#tilelayer-tms) set.\r\n   */\r\n\r\n  var EPSG4326 = extend({}, Earth, {\r\n  \tcode: 'EPSG:4326',\r\n  \tprojection: LonLat,\r\n  \ttransformation: toTransformation(1 / 180, 1, -1 / 180, 0.5)\r\n  });\n\n  /*\n   * @namespace CRS\n   * @crs L.CRS.Simple\n   *\n   * A simple CRS that maps longitude and latitude into `x` and `y` directly.\n   * May be used for maps of flat surfaces (e.g. game maps). Note that the `y`\n   * axis should still be inverted (going from bottom to top). `distance()` returns\n   * simple euclidean distance.\n   */\n\n  var Simple = extend({}, CRS, {\n  \tprojection: LonLat,\n  \ttransformation: toTransformation(1, 0, -1, 0),\n\n  \tscale: function (zoom) {\n  \t\treturn Math.pow(2, zoom);\n  \t},\n\n  \tzoom: function (scale) {\n  \t\treturn Math.log(scale) / Math.LN2;\n  \t},\n\n  \tdistance: function (latlng1, latlng2) {\n  \t\tvar dx = latlng2.lng - latlng1.lng,\n  \t\t    dy = latlng2.lat - latlng1.lat;\n\n  \t\treturn Math.sqrt(dx * dx + dy * dy);\n  \t},\n\n  \tinfinite: true\n  });\n\n  CRS.Earth = Earth;\n  CRS.EPSG3395 = EPSG3395;\n  CRS.EPSG3857 = EPSG3857;\n  CRS.EPSG900913 = EPSG900913;\n  CRS.EPSG4326 = EPSG4326;\n  CRS.Simple = Simple;\n\n  /*\n   * @class Layer\n   * @inherits Evented\n   * @aka L.Layer\n   * @aka ILayer\n   *\n   * A set of methods from the Layer base class that all Leaflet layers use.\n   * Inherits all methods, options and events from `L.Evented`.\n   *\n   * @example\n   *\n   * ```js\n   * var layer = L.marker(latlng).addTo(map);\n   * layer.addTo(map);\n   * layer.remove();\n   * ```\n   *\n   * @event add: Event\n   * Fired after the layer is added to a map\n   *\n   * @event remove: Event\n   * Fired after the layer is removed from a map\n   */\n\n\n  var Layer = Evented.extend({\n\n  \t// Classes extending `L.Layer` will inherit the following options:\n  \toptions: {\n  \t\t// @option pane: String = 'overlayPane'\n  \t\t// By default the layer will be added to the map's [overlay pane](#map-overlaypane). Overriding this option will cause the layer to be placed on another pane by default.\n  \t\tpane: 'overlayPane',\n\n  \t\t// @option attribution: String = null\n  \t\t// String to be shown in the attribution control, e.g. \"© OpenStreetMap contributors\". It describes the layer data and is often a legal obligation towards copyright holders and tile providers.\n  \t\tattribution: null,\n\n  \t\tbubblingMouseEvents: true\n  \t},\n\n  \t/* @section\n  \t * Classes extending `L.Layer` will inherit the following methods:\n  \t *\n  \t * @method addTo(map: Map|LayerGroup): this\n  \t * Adds the layer to the given map or layer group.\n  \t */\n  \taddTo: function (map) {\n  \t\tmap.addLayer(this);\n  \t\treturn this;\n  \t},\n\n  \t// @method remove: this\n  \t// Removes the layer from the map it is currently active on.\n  \tremove: function () {\n  \t\treturn this.removeFrom(this._map || this._mapToAdd);\n  \t},\n\n  \t// @method removeFrom(map: Map): this\n  \t// Removes the layer from the given map\n  \t//\n  \t// @alternative\n  \t// @method removeFrom(group: LayerGroup): this\n  \t// Removes the layer from the given `LayerGroup`\n  \tremoveFrom: function (obj) {\n  \t\tif (obj) {\n  \t\t\tobj.removeLayer(this);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method getPane(name? : String): HTMLElement\n  \t// Returns the `HTMLElement` representing the named pane on the map. If `name` is omitted, returns the pane for this layer.\n  \tgetPane: function (name) {\n  \t\treturn this._map.getPane(name ? (this.options[name] || name) : this.options.pane);\n  \t},\n\n  \taddInteractiveTarget: function (targetEl) {\n  \t\tthis._map._targets[stamp(targetEl)] = this;\n  \t\treturn this;\n  \t},\n\n  \tremoveInteractiveTarget: function (targetEl) {\n  \t\tdelete this._map._targets[stamp(targetEl)];\n  \t\treturn this;\n  \t},\n\n  \t// @method getAttribution: String\n  \t// Used by the `attribution control`, returns the [attribution option](#gridlayer-attribution).\n  \tgetAttribution: function () {\n  \t\treturn this.options.attribution;\n  \t},\n\n  \t_layerAdd: function (e) {\n  \t\tvar map = e.target;\n\n  \t\t// check in case layer gets added and then removed before the map is ready\n  \t\tif (!map.hasLayer(this)) { return; }\n\n  \t\tthis._map = map;\n  \t\tthis._zoomAnimated = map._zoomAnimated;\n\n  \t\tif (this.getEvents) {\n  \t\t\tvar events = this.getEvents();\n  \t\t\tmap.on(events, this);\n  \t\t\tthis.once('remove', function () {\n  \t\t\t\tmap.off(events, this);\n  \t\t\t}, this);\n  \t\t}\n\n  \t\tthis.onAdd(map);\n\n  \t\tif (this.getAttribution && map.attributionControl) {\n  \t\t\tmap.attributionControl.addAttribution(this.getAttribution());\n  \t\t}\n\n  \t\tthis.fire('add');\n  \t\tmap.fire('layeradd', {layer: this});\n  \t}\n  });\n\n  /* @section Extension methods\n   * @uninheritable\n   *\n   * Every layer should extend from `L.Layer` and (re-)implement the following methods.\n   *\n   * @method onAdd(map: Map): this\n   * Should contain code that creates DOM elements for the layer, adds them to `map panes` where they should belong and puts listeners on relevant map events. Called on [`map.addLayer(layer)`](#map-addlayer).\n   *\n   * @method onRemove(map: Map): this\n   * Should contain all clean up code that removes the layer's elements from the DOM and removes listeners previously added in [`onAdd`](#layer-onadd). Called on [`map.removeLayer(layer)`](#map-removelayer).\n   *\n   * @method getEvents(): Object\n   * This optional method should return an object like `{ viewreset: this._reset }` for [`addEventListener`](#evented-addeventlistener). The event handlers in this object will be automatically added and removed from the map with your layer.\n   *\n   * @method getAttribution(): String\n   * This optional method should return a string containing HTML to be shown on the `Attribution control` whenever the layer is visible.\n   *\n   * @method beforeAdd(map: Map): this\n   * Optional method. Called on [`map.addLayer(layer)`](#map-addlayer), before the layer is added to the map, before events are initialized, without waiting until the map is in a usable state. Use for early initialization only.\n   */\n\n\n  /* @namespace Map\n   * @section Layer events\n   *\n   * @event layeradd: LayerEvent\n   * Fired when a new layer is added to the map.\n   *\n   * @event layerremove: LayerEvent\n   * Fired when some layer is removed from the map\n   *\n   * @section Methods for Layers and Controls\n   */\n  Map.include({\n  \t// @method addLayer(layer: Layer): this\n  \t// Adds the given layer to the map\n  \taddLayer: function (layer) {\n  \t\tif (!layer._layerAdd) {\n  \t\t\tthrow new Error('The provided object is not a Layer.');\n  \t\t}\n\n  \t\tvar id = stamp(layer);\n  \t\tif (this._layers[id]) { return this; }\n  \t\tthis._layers[id] = layer;\n\n  \t\tlayer._mapToAdd = this;\n\n  \t\tif (layer.beforeAdd) {\n  \t\t\tlayer.beforeAdd(this);\n  \t\t}\n\n  \t\tthis.whenReady(layer._layerAdd, layer);\n\n  \t\treturn this;\n  \t},\n\n  \t// @method removeLayer(layer: Layer): this\n  \t// Removes the given layer from the map.\n  \tremoveLayer: function (layer) {\n  \t\tvar id = stamp(layer);\n\n  \t\tif (!this._layers[id]) { return this; }\n\n  \t\tif (this._loaded) {\n  \t\t\tlayer.onRemove(this);\n  \t\t}\n\n  \t\tif (layer.getAttribution && this.attributionControl) {\n  \t\t\tthis.attributionControl.removeAttribution(layer.getAttribution());\n  \t\t}\n\n  \t\tdelete this._layers[id];\n\n  \t\tif (this._loaded) {\n  \t\t\tthis.fire('layerremove', {layer: layer});\n  \t\t\tlayer.fire('remove');\n  \t\t}\n\n  \t\tlayer._map = layer._mapToAdd = null;\n\n  \t\treturn this;\n  \t},\n\n  \t// @method hasLayer(layer: Layer): Boolean\n  \t// Returns `true` if the given layer is currently added to the map\n  \thasLayer: function (layer) {\n  \t\treturn !!layer && (stamp(layer) in this._layers);\n  \t},\n\n  \t/* @method eachLayer(fn: Function, context?: Object): this\n  \t * Iterates over the layers of the map, optionally specifying context of the iterator function.\n  \t * ```\n  \t * map.eachLayer(function(layer){\n  \t *     layer.bindPopup('Hello');\n  \t * });\n  \t * ```\n  \t */\n  \teachLayer: function (method, context) {\n  \t\tfor (var i in this._layers) {\n  \t\t\tmethod.call(context, this._layers[i]);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t_addLayers: function (layers) {\n  \t\tlayers = layers ? (isArray(layers) ? layers : [layers]) : [];\n\n  \t\tfor (var i = 0, len = layers.length; i < len; i++) {\n  \t\t\tthis.addLayer(layers[i]);\n  \t\t}\n  \t},\n\n  \t_addZoomLimit: function (layer) {\n  \t\tif (isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom)) {\n  \t\t\tthis._zoomBoundLayers[stamp(layer)] = layer;\n  \t\t\tthis._updateZoomLevels();\n  \t\t}\n  \t},\n\n  \t_removeZoomLimit: function (layer) {\n  \t\tvar id = stamp(layer);\n\n  \t\tif (this._zoomBoundLayers[id]) {\n  \t\t\tdelete this._zoomBoundLayers[id];\n  \t\t\tthis._updateZoomLevels();\n  \t\t}\n  \t},\n\n  \t_updateZoomLevels: function () {\n  \t\tvar minZoom = Infinity,\n  \t\t    maxZoom = -Infinity,\n  \t\t    oldZoomSpan = this._getZoomSpan();\n\n  \t\tfor (var i in this._zoomBoundLayers) {\n  \t\t\tvar options = this._zoomBoundLayers[i].options;\n\n  \t\t\tminZoom = options.minZoom === undefined ? minZoom : Math.min(minZoom, options.minZoom);\n  \t\t\tmaxZoom = options.maxZoom === undefined ? maxZoom : Math.max(maxZoom, options.maxZoom);\n  \t\t}\n\n  \t\tthis._layersMaxZoom = maxZoom === -Infinity ? undefined : maxZoom;\n  \t\tthis._layersMinZoom = minZoom === Infinity ? undefined : minZoom;\n\n  \t\t// @section Map state change events\n  \t\t// @event zoomlevelschange: Event\n  \t\t// Fired when the number of zoomlevels on the map is changed due\n  \t\t// to adding or removing a layer.\n  \t\tif (oldZoomSpan !== this._getZoomSpan()) {\n  \t\t\tthis.fire('zoomlevelschange');\n  \t\t}\n\n  \t\tif (this.options.maxZoom === undefined && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom) {\n  \t\t\tthis.setZoom(this._layersMaxZoom);\n  \t\t}\n  \t\tif (this.options.minZoom === undefined && this._layersMinZoom && this.getZoom() < this._layersMinZoom) {\n  \t\t\tthis.setZoom(this._layersMinZoom);\n  \t\t}\n  \t}\n  });\n\n  /*\r\n   * @class LayerGroup\r\n   * @aka L.LayerGroup\r\n   * @inherits Layer\r\n   *\r\n   * Used to group several layers and handle them as one. If you add it to the map,\r\n   * any layers added or removed from the group will be added/removed on the map as\r\n   * well. Extends `Layer`.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * L.layerGroup([marker1, marker2])\r\n   * \t.addLayer(polyline)\r\n   * \t.addTo(map);\r\n   * ```\r\n   */\r\n\r\n  var LayerGroup = Layer.extend({\r\n\r\n  \tinitialize: function (layers, options) {\r\n  \t\tsetOptions(this, options);\r\n\r\n  \t\tthis._layers = {};\r\n\r\n  \t\tvar i, len;\r\n\r\n  \t\tif (layers) {\r\n  \t\t\tfor (i = 0, len = layers.length; i < len; i++) {\r\n  \t\t\t\tthis.addLayer(layers[i]);\r\n  \t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @method addLayer(layer: Layer): this\r\n  \t// Adds the given layer to the group.\r\n  \taddLayer: function (layer) {\r\n  \t\tvar id = this.getLayerId(layer);\r\n\r\n  \t\tthis._layers[id] = layer;\r\n\r\n  \t\tif (this._map) {\r\n  \t\t\tthis._map.addLayer(layer);\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method removeLayer(layer: Layer): this\r\n  \t// Removes the given layer from the group.\r\n  \t// @alternative\r\n  \t// @method removeLayer(id: Number): this\r\n  \t// Removes the layer with the given internal ID from the group.\r\n  \tremoveLayer: function (layer) {\r\n  \t\tvar id = layer in this._layers ? layer : this.getLayerId(layer);\r\n\r\n  \t\tif (this._map && this._layers[id]) {\r\n  \t\t\tthis._map.removeLayer(this._layers[id]);\r\n  \t\t}\r\n\r\n  \t\tdelete this._layers[id];\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method hasLayer(layer: Layer): Boolean\r\n  \t// Returns `true` if the given layer is currently added to the group.\r\n  \t// @alternative\r\n  \t// @method hasLayer(id: Number): Boolean\r\n  \t// Returns `true` if the given internal ID is currently added to the group.\r\n  \thasLayer: function (layer) {\r\n  \t\tif (!layer) { return false; }\r\n  \t\tvar layerId = typeof layer === 'number' ? layer : this.getLayerId(layer);\r\n  \t\treturn layerId in this._layers;\r\n  \t},\r\n\r\n  \t// @method clearLayers(): this\r\n  \t// Removes all the layers from the group.\r\n  \tclearLayers: function () {\r\n  \t\treturn this.eachLayer(this.removeLayer, this);\r\n  \t},\r\n\r\n  \t// @method invoke(methodName: String, …): this\r\n  \t// Calls `methodName` on every layer contained in this group, passing any\r\n  \t// additional parameters. Has no effect if the layers contained do not\r\n  \t// implement `methodName`.\r\n  \tinvoke: function (methodName) {\r\n  \t\tvar args = Array.prototype.slice.call(arguments, 1),\r\n  \t\t    i, layer;\r\n\r\n  \t\tfor (i in this._layers) {\r\n  \t\t\tlayer = this._layers[i];\r\n\r\n  \t\t\tif (layer[methodName]) {\r\n  \t\t\t\tlayer[methodName].apply(layer, args);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n  \t\tthis.eachLayer(map.addLayer, map);\r\n  \t},\r\n\r\n  \tonRemove: function (map) {\r\n  \t\tthis.eachLayer(map.removeLayer, map);\r\n  \t},\r\n\r\n  \t// @method eachLayer(fn: Function, context?: Object): this\r\n  \t// Iterates over the layers of the group, optionally specifying context of the iterator function.\r\n  \t// ```js\r\n  \t// group.eachLayer(function (layer) {\r\n  \t// \tlayer.bindPopup('Hello');\r\n  \t// });\r\n  \t// ```\r\n  \teachLayer: function (method, context) {\r\n  \t\tfor (var i in this._layers) {\r\n  \t\t\tmethod.call(context, this._layers[i]);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method getLayer(id: Number): Layer\r\n  \t// Returns the layer with the given internal ID.\r\n  \tgetLayer: function (id) {\r\n  \t\treturn this._layers[id];\r\n  \t},\r\n\r\n  \t// @method getLayers(): Layer[]\r\n  \t// Returns an array of all the layers added to the group.\r\n  \tgetLayers: function () {\r\n  \t\tvar layers = [];\r\n  \t\tthis.eachLayer(layers.push, layers);\r\n  \t\treturn layers;\r\n  \t},\r\n\r\n  \t// @method setZIndex(zIndex: Number): this\r\n  \t// Calls `setZIndex` on every layer contained in this group, passing the z-index.\r\n  \tsetZIndex: function (zIndex) {\r\n  \t\treturn this.invoke('setZIndex', zIndex);\r\n  \t},\r\n\r\n  \t// @method getLayerId(layer: Layer): Number\r\n  \t// Returns the internal ID for a layer\r\n  \tgetLayerId: function (layer) {\r\n  \t\treturn stamp(layer);\r\n  \t}\r\n  });\r\n\r\n\r\n  // @factory L.layerGroup(layers?: Layer[], options?: Object)\r\n  // Create a layer group, optionally given an initial set of layers and an `options` object.\r\n  var layerGroup = function (layers, options) {\r\n  \treturn new LayerGroup(layers, options);\r\n  };\n\n  /*\r\n   * @class FeatureGroup\r\n   * @aka L.FeatureGroup\r\n   * @inherits LayerGroup\r\n   *\r\n   * Extended `LayerGroup` that makes it easier to do the same thing to all its member layers:\r\n   *  * [`bindPopup`](#layer-bindpopup) binds a popup to all of the layers at once (likewise with [`bindTooltip`](#layer-bindtooltip))\r\n   *  * Events are propagated to the `FeatureGroup`, so if the group has an event\r\n   * handler, it will handle events from any of the layers. This includes mouse events\r\n   * and custom events.\r\n   *  * Has `layeradd` and `layerremove` events\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * L.featureGroup([marker1, marker2, polyline])\r\n   * \t.bindPopup('Hello world!')\r\n   * \t.on('click', function() { alert('Clicked on a member of the group!'); })\r\n   * \t.addTo(map);\r\n   * ```\r\n   */\r\n\r\n  var FeatureGroup = LayerGroup.extend({\r\n\r\n  \taddLayer: function (layer) {\r\n  \t\tif (this.hasLayer(layer)) {\r\n  \t\t\treturn this;\r\n  \t\t}\r\n\r\n  \t\tlayer.addEventParent(this);\r\n\r\n  \t\tLayerGroup.prototype.addLayer.call(this, layer);\r\n\r\n  \t\t// @event layeradd: LayerEvent\r\n  \t\t// Fired when a layer is added to this `FeatureGroup`\r\n  \t\treturn this.fire('layeradd', {layer: layer});\r\n  \t},\r\n\r\n  \tremoveLayer: function (layer) {\r\n  \t\tif (!this.hasLayer(layer)) {\r\n  \t\t\treturn this;\r\n  \t\t}\r\n  \t\tif (layer in this._layers) {\r\n  \t\t\tlayer = this._layers[layer];\r\n  \t\t}\r\n\r\n  \t\tlayer.removeEventParent(this);\r\n\r\n  \t\tLayerGroup.prototype.removeLayer.call(this, layer);\r\n\r\n  \t\t// @event layerremove: LayerEvent\r\n  \t\t// Fired when a layer is removed from this `FeatureGroup`\r\n  \t\treturn this.fire('layerremove', {layer: layer});\r\n  \t},\r\n\r\n  \t// @method setStyle(style: Path options): this\r\n  \t// Sets the given path options to each layer of the group that has a `setStyle` method.\r\n  \tsetStyle: function (style) {\r\n  \t\treturn this.invoke('setStyle', style);\r\n  \t},\r\n\r\n  \t// @method bringToFront(): this\r\n  \t// Brings the layer group to the top of all other layers\r\n  \tbringToFront: function () {\r\n  \t\treturn this.invoke('bringToFront');\r\n  \t},\r\n\r\n  \t// @method bringToBack(): this\r\n  \t// Brings the layer group to the back of all other layers\r\n  \tbringToBack: function () {\r\n  \t\treturn this.invoke('bringToBack');\r\n  \t},\r\n\r\n  \t// @method getBounds(): LatLngBounds\r\n  \t// Returns the LatLngBounds of the Feature Group (created from bounds and coordinates of its children).\r\n  \tgetBounds: function () {\r\n  \t\tvar bounds = new LatLngBounds();\r\n\r\n  \t\tfor (var id in this._layers) {\r\n  \t\t\tvar layer = this._layers[id];\r\n  \t\t\tbounds.extend(layer.getBounds ? layer.getBounds() : layer.getLatLng());\r\n  \t\t}\r\n  \t\treturn bounds;\r\n  \t}\r\n  });\r\n\r\n  // @factory L.featureGroup(layers?: Layer[], options?: Object)\r\n  // Create a feature group, optionally given an initial set of layers and an `options` object.\r\n  var featureGroup = function (layers, options) {\r\n  \treturn new FeatureGroup(layers, options);\r\n  };\n\n  /*\r\n   * @class Icon\r\n   * @aka L.Icon\r\n   *\r\n   * Represents an icon to provide when creating a marker.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var myIcon = L.icon({\r\n   *     iconUrl: 'my-icon.png',\r\n   *     iconRetinaUrl: 'my-icon@2x.png',\r\n   *     iconSize: [38, 95],\r\n   *     iconAnchor: [22, 94],\r\n   *     popupAnchor: [-3, -76],\r\n   *     shadowUrl: 'my-icon-shadow.png',\r\n   *     shadowRetinaUrl: 'my-icon-shadow@2x.png',\r\n   *     shadowSize: [68, 95],\r\n   *     shadowAnchor: [22, 94]\r\n   * });\r\n   *\r\n   * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);\r\n   * ```\r\n   *\r\n   * `L.Icon.Default` extends `L.Icon` and is the blue icon Leaflet uses for markers by default.\r\n   *\r\n   */\r\n\r\n  var Icon = Class.extend({\r\n\r\n  \t/* @section\r\n  \t * @aka Icon options\r\n  \t *\r\n  \t * @option iconUrl: String = null\r\n  \t * **(required)** The URL to the icon image (absolute or relative to your script path).\r\n  \t *\r\n  \t * @option iconRetinaUrl: String = null\r\n  \t * The URL to a retina sized version of the icon image (absolute or relative to your\r\n  \t * script path). Used for Retina screen devices.\r\n  \t *\r\n  \t * @option iconSize: Point = null\r\n  \t * Size of the icon image in pixels.\r\n  \t *\r\n  \t * @option iconAnchor: Point = null\r\n  \t * The coordinates of the \"tip\" of the icon (relative to its top left corner). The icon\r\n  \t * will be aligned so that this point is at the marker's geographical location. Centered\r\n  \t * by default if size is specified, also can be set in CSS with negative margins.\r\n  \t *\r\n  \t * @option popupAnchor: Point = [0, 0]\r\n  \t * The coordinates of the point from which popups will \"open\", relative to the icon anchor.\r\n  \t *\r\n  \t * @option tooltipAnchor: Point = [0, 0]\r\n  \t * The coordinates of the point from which tooltips will \"open\", relative to the icon anchor.\r\n  \t *\r\n  \t * @option shadowUrl: String = null\r\n  \t * The URL to the icon shadow image. If not specified, no shadow image will be created.\r\n  \t *\r\n  \t * @option shadowRetinaUrl: String = null\r\n  \t *\r\n  \t * @option shadowSize: Point = null\r\n  \t * Size of the shadow image in pixels.\r\n  \t *\r\n  \t * @option shadowAnchor: Point = null\r\n  \t * The coordinates of the \"tip\" of the shadow (relative to its top left corner) (the same\r\n  \t * as iconAnchor if not specified).\r\n  \t *\r\n  \t * @option className: String = ''\r\n  \t * A custom class name to assign to both icon and shadow images. Empty by default.\r\n  \t */\r\n\r\n  \toptions: {\r\n  \t\tpopupAnchor: [0, 0],\r\n  \t\ttooltipAnchor: [0, 0]\r\n  \t},\r\n\r\n  \tinitialize: function (options) {\r\n  \t\tsetOptions(this, options);\r\n  \t},\r\n\r\n  \t// @method createIcon(oldIcon?: HTMLElement): HTMLElement\r\n  \t// Called internally when the icon has to be shown, returns a `<img>` HTML element\r\n  \t// styled according to the options.\r\n  \tcreateIcon: function (oldIcon) {\r\n  \t\treturn this._createIcon('icon', oldIcon);\r\n  \t},\r\n\r\n  \t// @method createShadow(oldIcon?: HTMLElement): HTMLElement\r\n  \t// As `createIcon`, but for the shadow beneath it.\r\n  \tcreateShadow: function (oldIcon) {\r\n  \t\treturn this._createIcon('shadow', oldIcon);\r\n  \t},\r\n\r\n  \t_createIcon: function (name, oldIcon) {\r\n  \t\tvar src = this._getIconUrl(name);\r\n\r\n  \t\tif (!src) {\r\n  \t\t\tif (name === 'icon') {\r\n  \t\t\t\tthrow new Error('iconUrl not set in Icon options (see the docs).');\r\n  \t\t\t}\r\n  \t\t\treturn null;\r\n  \t\t}\r\n\r\n  \t\tvar img = this._createImg(src, oldIcon && oldIcon.tagName === 'IMG' ? oldIcon : null);\r\n  \t\tthis._setIconStyles(img, name);\r\n\r\n  \t\treturn img;\r\n  \t},\r\n\r\n  \t_setIconStyles: function (img, name) {\r\n  \t\tvar options = this.options;\r\n  \t\tvar sizeOption = options[name + 'Size'];\r\n\r\n  \t\tif (typeof sizeOption === 'number') {\r\n  \t\t\tsizeOption = [sizeOption, sizeOption];\r\n  \t\t}\r\n\r\n  \t\tvar size = toPoint(sizeOption),\r\n  \t\t    anchor = toPoint(name === 'shadow' && options.shadowAnchor || options.iconAnchor ||\r\n  \t\t            size && size.divideBy(2, true));\r\n\r\n  \t\timg.className = 'leaflet-marker-' + name + ' ' + (options.className || '');\r\n\r\n  \t\tif (anchor) {\r\n  \t\t\timg.style.marginLeft = (-anchor.x) + 'px';\r\n  \t\t\timg.style.marginTop  = (-anchor.y) + 'px';\r\n  \t\t}\r\n\r\n  \t\tif (size) {\r\n  \t\t\timg.style.width  = size.x + 'px';\r\n  \t\t\timg.style.height = size.y + 'px';\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_createImg: function (src, el) {\r\n  \t\tel = el || document.createElement('img');\r\n  \t\tel.src = src;\r\n  \t\treturn el;\r\n  \t},\r\n\r\n  \t_getIconUrl: function (name) {\r\n  \t\treturn retina && this.options[name + 'RetinaUrl'] || this.options[name + 'Url'];\r\n  \t}\r\n  });\r\n\r\n\r\n  // @factory L.icon(options: Icon options)\r\n  // Creates an icon instance with the given options.\r\n  function icon(options) {\r\n  \treturn new Icon(options);\r\n  }\n\n  /*\n   * @miniclass Icon.Default (Icon)\n   * @aka L.Icon.Default\n   * @section\n   *\n   * A trivial subclass of `Icon`, represents the icon to use in `Marker`s when\n   * no icon is specified. Points to the blue marker image distributed with Leaflet\n   * releases.\n   *\n   * In order to customize the default icon, just change the properties of `L.Icon.Default.prototype.options`\n   * (which is a set of `Icon options`).\n   *\n   * If you want to _completely_ replace the default icon, override the\n   * `L.Marker.prototype.options.icon` with your own icon instead.\n   */\n\n  var IconDefault = Icon.extend({\n\n  \toptions: {\n  \t\ticonUrl:       'marker-icon.png',\n  \t\ticonRetinaUrl: 'marker-icon-2x.png',\n  \t\tshadowUrl:     'marker-shadow.png',\n  \t\ticonSize:    [25, 41],\n  \t\ticonAnchor:  [12, 41],\n  \t\tpopupAnchor: [1, -34],\n  \t\ttooltipAnchor: [16, -28],\n  \t\tshadowSize:  [41, 41]\n  \t},\n\n  \t_getIconUrl: function (name) {\n  \t\tif (!IconDefault.imagePath) {\t// Deprecated, backwards-compatibility only\n  \t\t\tIconDefault.imagePath = this._detectIconPath();\n  \t\t}\n\n  \t\t// @option imagePath: String\n  \t\t// `Icon.Default` will try to auto-detect the location of the\n  \t\t// blue icon images. If you are placing these images in a non-standard\n  \t\t// way, set this option to point to the right path.\n  \t\treturn (this.options.imagePath || IconDefault.imagePath) + Icon.prototype._getIconUrl.call(this, name);\n  \t},\n\n  \t_detectIconPath: function () {\n  \t\tvar el = create$1('div',  'leaflet-default-icon-path', document.body);\n  \t\tvar path = getStyle(el, 'background-image') ||\n  \t\t           getStyle(el, 'backgroundImage');\t// IE8\n\n  \t\tdocument.body.removeChild(el);\n\n  \t\tif (path === null || path.indexOf('url') !== 0) {\n  \t\t\tpath = '';\n  \t\t} else {\n  \t\t\tpath = path.replace(/^url\\([\"']?/, '').replace(/marker-icon\\.png[\"']?\\)$/, '');\n  \t\t}\n\n  \t\treturn path;\n  \t}\n  });\n\n  /*\n   * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.\n   */\n\n\n  /* @namespace Marker\n   * @section Interaction handlers\n   *\n   * Interaction handlers are properties of a marker instance that allow you to control interaction behavior in runtime, enabling or disabling certain features such as dragging (see `Handler` methods). Example:\n   *\n   * ```js\n   * marker.dragging.disable();\n   * ```\n   *\n   * @property dragging: Handler\n   * Marker dragging handler (by both mouse and touch). Only valid when the marker is on the map (Otherwise set [`marker.options.draggable`](#marker-draggable)).\n   */\n\n  var MarkerDrag = Handler.extend({\n  \tinitialize: function (marker) {\n  \t\tthis._marker = marker;\n  \t},\n\n  \taddHooks: function () {\n  \t\tvar icon = this._marker._icon;\n\n  \t\tif (!this._draggable) {\n  \t\t\tthis._draggable = new Draggable(icon, icon, true);\n  \t\t}\n\n  \t\tthis._draggable.on({\n  \t\t\tdragstart: this._onDragStart,\n  \t\t\tpredrag: this._onPreDrag,\n  \t\t\tdrag: this._onDrag,\n  \t\t\tdragend: this._onDragEnd\n  \t\t}, this).enable();\n\n  \t\taddClass(icon, 'leaflet-marker-draggable');\n  \t},\n\n  \tremoveHooks: function () {\n  \t\tthis._draggable.off({\n  \t\t\tdragstart: this._onDragStart,\n  \t\t\tpredrag: this._onPreDrag,\n  \t\t\tdrag: this._onDrag,\n  \t\t\tdragend: this._onDragEnd\n  \t\t}, this).disable();\n\n  \t\tif (this._marker._icon) {\n  \t\t\tremoveClass(this._marker._icon, 'leaflet-marker-draggable');\n  \t\t}\n  \t},\n\n  \tmoved: function () {\n  \t\treturn this._draggable && this._draggable._moved;\n  \t},\n\n  \t_adjustPan: function (e) {\n  \t\tvar marker = this._marker,\n  \t\t    map = marker._map,\n  \t\t    speed = this._marker.options.autoPanSpeed,\n  \t\t    padding = this._marker.options.autoPanPadding,\n  \t\t    iconPos = getPosition(marker._icon),\n  \t\t    bounds = map.getPixelBounds(),\n  \t\t    origin = map.getPixelOrigin();\n\n  \t\tvar panBounds = toBounds(\n  \t\t\tbounds.min._subtract(origin).add(padding),\n  \t\t\tbounds.max._subtract(origin).subtract(padding)\n  \t\t);\n\n  \t\tif (!panBounds.contains(iconPos)) {\n  \t\t\t// Compute incremental movement\n  \t\t\tvar movement = toPoint(\n  \t\t\t\t(Math.max(panBounds.max.x, iconPos.x) - panBounds.max.x) / (bounds.max.x - panBounds.max.x) -\n  \t\t\t\t(Math.min(panBounds.min.x, iconPos.x) - panBounds.min.x) / (bounds.min.x - panBounds.min.x),\n\n  \t\t\t\t(Math.max(panBounds.max.y, iconPos.y) - panBounds.max.y) / (bounds.max.y - panBounds.max.y) -\n  \t\t\t\t(Math.min(panBounds.min.y, iconPos.y) - panBounds.min.y) / (bounds.min.y - panBounds.min.y)\n  \t\t\t).multiplyBy(speed);\n\n  \t\t\tmap.panBy(movement, {animate: false});\n\n  \t\t\tthis._draggable._newPos._add(movement);\n  \t\t\tthis._draggable._startPos._add(movement);\n\n  \t\t\tsetPosition(marker._icon, this._draggable._newPos);\n  \t\t\tthis._onDrag(e);\n\n  \t\t\tthis._panRequest = requestAnimFrame(this._adjustPan.bind(this, e));\n  \t\t}\n  \t},\n\n  \t_onDragStart: function () {\n  \t\t// @section Dragging events\n  \t\t// @event dragstart: Event\n  \t\t// Fired when the user starts dragging the marker.\n\n  \t\t// @event movestart: Event\n  \t\t// Fired when the marker starts moving (because of dragging).\n\n  \t\tthis._oldLatLng = this._marker.getLatLng();\n\n  \t\t// When using ES6 imports it could not be set when `Popup` was not imported as well\n  \t\tthis._marker.closePopup && this._marker.closePopup();\n\n  \t\tthis._marker\n  \t\t\t.fire('movestart')\n  \t\t\t.fire('dragstart');\n  \t},\n\n  \t_onPreDrag: function (e) {\n  \t\tif (this._marker.options.autoPan) {\n  \t\t\tcancelAnimFrame(this._panRequest);\n  \t\t\tthis._panRequest = requestAnimFrame(this._adjustPan.bind(this, e));\n  \t\t}\n  \t},\n\n  \t_onDrag: function (e) {\n  \t\tvar marker = this._marker,\n  \t\t    shadow = marker._shadow,\n  \t\t    iconPos = getPosition(marker._icon),\n  \t\t    latlng = marker._map.layerPointToLatLng(iconPos);\n\n  \t\t// update shadow position\n  \t\tif (shadow) {\n  \t\t\tsetPosition(shadow, iconPos);\n  \t\t}\n\n  \t\tmarker._latlng = latlng;\n  \t\te.latlng = latlng;\n  \t\te.oldLatLng = this._oldLatLng;\n\n  \t\t// @event drag: Event\n  \t\t// Fired repeatedly while the user drags the marker.\n  \t\tmarker\n  \t\t    .fire('move', e)\n  \t\t    .fire('drag', e);\n  \t},\n\n  \t_onDragEnd: function (e) {\n  \t\t// @event dragend: DragEndEvent\n  \t\t// Fired when the user stops dragging the marker.\n\n  \t\t cancelAnimFrame(this._panRequest);\n\n  \t\t// @event moveend: Event\n  \t\t// Fired when the marker stops moving (because of dragging).\n  \t\tdelete this._oldLatLng;\n  \t\tthis._marker\n  \t\t    .fire('moveend')\n  \t\t    .fire('dragend', e);\n  \t}\n  });\n\n  /*\r\n   * @class Marker\r\n   * @inherits Interactive layer\r\n   * @aka L.Marker\r\n   * L.Marker is used to display clickable/draggable icons on the map. Extends `Layer`.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * L.marker([50.5, 30.5]).addTo(map);\r\n   * ```\r\n   */\r\n\r\n  var Marker = Layer.extend({\r\n\r\n  \t// @section\r\n  \t// @aka Marker options\r\n  \toptions: {\r\n  \t\t// @option icon: Icon = *\r\n  \t\t// Icon instance to use for rendering the marker.\r\n  \t\t// See [Icon documentation](#L.Icon) for details on how to customize the marker icon.\r\n  \t\t// If not specified, a common instance of `L.Icon.Default` is used.\r\n  \t\ticon: new IconDefault(),\r\n\r\n  \t\t// Option inherited from \"Interactive layer\" abstract class\r\n  \t\tinteractive: true,\r\n\r\n  \t\t// @option keyboard: Boolean = true\r\n  \t\t// Whether the marker can be tabbed to with a keyboard and clicked by pressing enter.\r\n  \t\tkeyboard: true,\r\n\r\n  \t\t// @option title: String = ''\r\n  \t\t// Text for the browser tooltip that appear on marker hover (no tooltip by default).\r\n  \t\ttitle: '',\r\n\r\n  \t\t// @option alt: String = ''\r\n  \t\t// Text for the `alt` attribute of the icon image (useful for accessibility).\r\n  \t\talt: '',\r\n\r\n  \t\t// @option zIndexOffset: Number = 0\r\n  \t\t// By default, marker images zIndex is set automatically based on its latitude. Use this option if you want to put the marker on top of all others (or below), specifying a high value like `1000` (or high negative value, respectively).\r\n  \t\tzIndexOffset: 0,\r\n\r\n  \t\t// @option opacity: Number = 1.0\r\n  \t\t// The opacity of the marker.\r\n  \t\topacity: 1,\r\n\r\n  \t\t// @option riseOnHover: Boolean = false\r\n  \t\t// If `true`, the marker will get on top of others when you hover the mouse over it.\r\n  \t\triseOnHover: false,\r\n\r\n  \t\t// @option riseOffset: Number = 250\r\n  \t\t// The z-index offset used for the `riseOnHover` feature.\r\n  \t\triseOffset: 250,\r\n\r\n  \t\t// @option pane: String = 'markerPane'\r\n  \t\t// `Map pane` where the markers icon will be added.\r\n  \t\tpane: 'markerPane',\r\n\r\n  \t\t// @option shadowPane: String = 'shadowPane'\r\n  \t\t// `Map pane` where the markers shadow will be added.\r\n  \t\tshadowPane: 'shadowPane',\r\n\r\n  \t\t// @option bubblingMouseEvents: Boolean = false\r\n  \t\t// When `true`, a mouse event on this marker will trigger the same event on the map\r\n  \t\t// (unless [`L.DomEvent.stopPropagation`](#domevent-stoppropagation) is used).\r\n  \t\tbubblingMouseEvents: false,\r\n\r\n  \t\t// @section Draggable marker options\r\n  \t\t// @option draggable: Boolean = false\r\n  \t\t// Whether the marker is draggable with mouse/touch or not.\r\n  \t\tdraggable: false,\r\n\r\n  \t\t// @option autoPan: Boolean = false\r\n  \t\t// Whether to pan the map when dragging this marker near its edge or not.\r\n  \t\tautoPan: false,\r\n\r\n  \t\t// @option autoPanPadding: Point = Point(50, 50)\r\n  \t\t// Distance (in pixels to the left/right and to the top/bottom) of the\r\n  \t\t// map edge to start panning the map.\r\n  \t\tautoPanPadding: [50, 50],\r\n\r\n  \t\t// @option autoPanSpeed: Number = 10\r\n  \t\t// Number of pixels the map should pan by.\r\n  \t\tautoPanSpeed: 10\r\n  \t},\r\n\r\n  \t/* @section\r\n  \t *\r\n  \t * In addition to [shared layer methods](#Layer) like `addTo()` and `remove()` and [popup methods](#Popup) like bindPopup() you can also use the following methods:\r\n  \t */\r\n\r\n  \tinitialize: function (latlng, options) {\r\n  \t\tsetOptions(this, options);\r\n  \t\tthis._latlng = toLatLng(latlng);\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n  \t\tthis._zoomAnimated = this._zoomAnimated && map.options.markerZoomAnimation;\r\n\r\n  \t\tif (this._zoomAnimated) {\r\n  \t\t\tmap.on('zoomanim', this._animateZoom, this);\r\n  \t\t}\r\n\r\n  \t\tthis._initIcon();\r\n  \t\tthis.update();\r\n  \t},\r\n\r\n  \tonRemove: function (map) {\r\n  \t\tif (this.dragging && this.dragging.enabled()) {\r\n  \t\t\tthis.options.draggable = true;\r\n  \t\t\tthis.dragging.removeHooks();\r\n  \t\t}\r\n  \t\tdelete this.dragging;\r\n\r\n  \t\tif (this._zoomAnimated) {\r\n  \t\t\tmap.off('zoomanim', this._animateZoom, this);\r\n  \t\t}\r\n\r\n  \t\tthis._removeIcon();\r\n  \t\tthis._removeShadow();\r\n  \t},\r\n\r\n  \tgetEvents: function () {\r\n  \t\treturn {\r\n  \t\t\tzoom: this.update,\r\n  \t\t\tviewreset: this.update\r\n  \t\t};\r\n  \t},\r\n\r\n  \t// @method getLatLng: LatLng\r\n  \t// Returns the current geographical position of the marker.\r\n  \tgetLatLng: function () {\r\n  \t\treturn this._latlng;\r\n  \t},\r\n\r\n  \t// @method setLatLng(latlng: LatLng): this\r\n  \t// Changes the marker position to the given point.\r\n  \tsetLatLng: function (latlng) {\r\n  \t\tvar oldLatLng = this._latlng;\r\n  \t\tthis._latlng = toLatLng(latlng);\r\n  \t\tthis.update();\r\n\r\n  \t\t// @event move: Event\r\n  \t\t// Fired when the marker is moved via [`setLatLng`](#marker-setlatlng) or by [dragging](#marker-dragging). Old and new coordinates are included in event arguments as `oldLatLng`, `latlng`.\r\n  \t\treturn this.fire('move', {oldLatLng: oldLatLng, latlng: this._latlng});\r\n  \t},\r\n\r\n  \t// @method setZIndexOffset(offset: Number): this\r\n  \t// Changes the [zIndex offset](#marker-zindexoffset) of the marker.\r\n  \tsetZIndexOffset: function (offset) {\r\n  \t\tthis.options.zIndexOffset = offset;\r\n  \t\treturn this.update();\r\n  \t},\r\n\r\n  \t// @method getIcon: Icon\r\n  \t// Returns the current icon used by the marker\r\n  \tgetIcon: function () {\r\n  \t\treturn this.options.icon;\r\n  \t},\r\n\r\n  \t// @method setIcon(icon: Icon): this\r\n  \t// Changes the marker icon.\r\n  \tsetIcon: function (icon) {\r\n\r\n  \t\tthis.options.icon = icon;\r\n\r\n  \t\tif (this._map) {\r\n  \t\t\tthis._initIcon();\r\n  \t\t\tthis.update();\r\n  \t\t}\r\n\r\n  \t\tif (this._popup) {\r\n  \t\t\tthis.bindPopup(this._popup, this._popup.options);\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \tgetElement: function () {\r\n  \t\treturn this._icon;\r\n  \t},\r\n\r\n  \tupdate: function () {\r\n\r\n  \t\tif (this._icon && this._map) {\r\n  \t\t\tvar pos = this._map.latLngToLayerPoint(this._latlng).round();\r\n  \t\t\tthis._setPos(pos);\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_initIcon: function () {\r\n  \t\tvar options = this.options,\r\n  \t\t    classToAdd = 'leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');\r\n\r\n  \t\tvar icon = options.icon.createIcon(this._icon),\r\n  \t\t    addIcon = false;\r\n\r\n  \t\t// if we're not reusing the icon, remove the old one and init new one\r\n  \t\tif (icon !== this._icon) {\r\n  \t\t\tif (this._icon) {\r\n  \t\t\t\tthis._removeIcon();\r\n  \t\t\t}\r\n  \t\t\taddIcon = true;\r\n\r\n  \t\t\tif (options.title) {\r\n  \t\t\t\ticon.title = options.title;\r\n  \t\t\t}\r\n\r\n  \t\t\tif (icon.tagName === 'IMG') {\r\n  \t\t\t\ticon.alt = options.alt || '';\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\taddClass(icon, classToAdd);\r\n\r\n  \t\tif (options.keyboard) {\r\n  \t\t\ticon.tabIndex = '0';\r\n  \t\t}\r\n\r\n  \t\tthis._icon = icon;\r\n\r\n  \t\tif (options.riseOnHover) {\r\n  \t\t\tthis.on({\r\n  \t\t\t\tmouseover: this._bringToFront,\r\n  \t\t\t\tmouseout: this._resetZIndex\r\n  \t\t\t});\r\n  \t\t}\r\n\r\n  \t\tvar newShadow = options.icon.createShadow(this._shadow),\r\n  \t\t    addShadow = false;\r\n\r\n  \t\tif (newShadow !== this._shadow) {\r\n  \t\t\tthis._removeShadow();\r\n  \t\t\taddShadow = true;\r\n  \t\t}\r\n\r\n  \t\tif (newShadow) {\r\n  \t\t\taddClass(newShadow, classToAdd);\r\n  \t\t\tnewShadow.alt = '';\r\n  \t\t}\r\n  \t\tthis._shadow = newShadow;\r\n\r\n\r\n  \t\tif (options.opacity < 1) {\r\n  \t\t\tthis._updateOpacity();\r\n  \t\t}\r\n\r\n\r\n  \t\tif (addIcon) {\r\n  \t\t\tthis.getPane().appendChild(this._icon);\r\n  \t\t}\r\n  \t\tthis._initInteraction();\r\n  \t\tif (newShadow && addShadow) {\r\n  \t\t\tthis.getPane(options.shadowPane).appendChild(this._shadow);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_removeIcon: function () {\r\n  \t\tif (this.options.riseOnHover) {\r\n  \t\t\tthis.off({\r\n  \t\t\t\tmouseover: this._bringToFront,\r\n  \t\t\t\tmouseout: this._resetZIndex\r\n  \t\t\t});\r\n  \t\t}\r\n\r\n  \t\tremove(this._icon);\r\n  \t\tthis.removeInteractiveTarget(this._icon);\r\n\r\n  \t\tthis._icon = null;\r\n  \t},\r\n\r\n  \t_removeShadow: function () {\r\n  \t\tif (this._shadow) {\r\n  \t\t\tremove(this._shadow);\r\n  \t\t}\r\n  \t\tthis._shadow = null;\r\n  \t},\r\n\r\n  \t_setPos: function (pos) {\r\n\r\n  \t\tif (this._icon) {\r\n  \t\t\tsetPosition(this._icon, pos);\r\n  \t\t}\r\n\r\n  \t\tif (this._shadow) {\r\n  \t\t\tsetPosition(this._shadow, pos);\r\n  \t\t}\r\n\r\n  \t\tthis._zIndex = pos.y + this.options.zIndexOffset;\r\n\r\n  \t\tthis._resetZIndex();\r\n  \t},\r\n\r\n  \t_updateZIndex: function (offset) {\r\n  \t\tif (this._icon) {\r\n  \t\t\tthis._icon.style.zIndex = this._zIndex + offset;\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_animateZoom: function (opt) {\r\n  \t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\r\n\r\n  \t\tthis._setPos(pos);\r\n  \t},\r\n\r\n  \t_initInteraction: function () {\r\n\r\n  \t\tif (!this.options.interactive) { return; }\r\n\r\n  \t\taddClass(this._icon, 'leaflet-interactive');\r\n\r\n  \t\tthis.addInteractiveTarget(this._icon);\r\n\r\n  \t\tif (MarkerDrag) {\r\n  \t\t\tvar draggable = this.options.draggable;\r\n  \t\t\tif (this.dragging) {\r\n  \t\t\t\tdraggable = this.dragging.enabled();\r\n  \t\t\t\tthis.dragging.disable();\r\n  \t\t\t}\r\n\r\n  \t\t\tthis.dragging = new MarkerDrag(this);\r\n\r\n  \t\t\tif (draggable) {\r\n  \t\t\t\tthis.dragging.enable();\r\n  \t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @method setOpacity(opacity: Number): this\r\n  \t// Changes the opacity of the marker.\r\n  \tsetOpacity: function (opacity) {\r\n  \t\tthis.options.opacity = opacity;\r\n  \t\tif (this._map) {\r\n  \t\t\tthis._updateOpacity();\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_updateOpacity: function () {\r\n  \t\tvar opacity = this.options.opacity;\r\n\r\n  \t\tif (this._icon) {\r\n  \t\t\tsetOpacity(this._icon, opacity);\r\n  \t\t}\r\n\r\n  \t\tif (this._shadow) {\r\n  \t\t\tsetOpacity(this._shadow, opacity);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_bringToFront: function () {\r\n  \t\tthis._updateZIndex(this.options.riseOffset);\r\n  \t},\r\n\r\n  \t_resetZIndex: function () {\r\n  \t\tthis._updateZIndex(0);\r\n  \t},\r\n\r\n  \t_getPopupAnchor: function () {\r\n  \t\treturn this.options.icon.options.popupAnchor;\r\n  \t},\r\n\r\n  \t_getTooltipAnchor: function () {\r\n  \t\treturn this.options.icon.options.tooltipAnchor;\r\n  \t}\r\n  });\r\n\r\n\r\n  // factory L.marker(latlng: LatLng, options? : Marker options)\r\n\r\n  // @factory L.marker(latlng: LatLng, options? : Marker options)\r\n  // Instantiates a Marker object given a geographical point and optionally an options object.\r\n  function marker(latlng, options) {\r\n  \treturn new Marker(latlng, options);\r\n  }\n\n  /*\n   * @class Path\n   * @aka L.Path\n   * @inherits Interactive layer\n   *\n   * An abstract class that contains options and constants shared between vector\n   * overlays (Polygon, Polyline, Circle). Do not use it directly. Extends `Layer`.\n   */\n\n  var Path = Layer.extend({\n\n  \t// @section\n  \t// @aka Path options\n  \toptions: {\n  \t\t// @option stroke: Boolean = true\n  \t\t// Whether to draw stroke along the path. Set it to `false` to disable borders on polygons or circles.\n  \t\tstroke: true,\n\n  \t\t// @option color: String = '#3388ff'\n  \t\t// Stroke color\n  \t\tcolor: '#3388ff',\n\n  \t\t// @option weight: Number = 3\n  \t\t// Stroke width in pixels\n  \t\tweight: 3,\n\n  \t\t// @option opacity: Number = 1.0\n  \t\t// Stroke opacity\n  \t\topacity: 1,\n\n  \t\t// @option lineCap: String= 'round'\n  \t\t// A string that defines [shape to be used at the end](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linecap) of the stroke.\n  \t\tlineCap: 'round',\n\n  \t\t// @option lineJoin: String = 'round'\n  \t\t// A string that defines [shape to be used at the corners](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linejoin) of the stroke.\n  \t\tlineJoin: 'round',\n\n  \t\t// @option dashArray: String = null\n  \t\t// A string that defines the stroke [dash pattern](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dasharray). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).\n  \t\tdashArray: null,\n\n  \t\t// @option dashOffset: String = null\n  \t\t// A string that defines the [distance into the dash pattern to start the dash](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dashoffset). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).\n  \t\tdashOffset: null,\n\n  \t\t// @option fill: Boolean = depends\n  \t\t// Whether to fill the path with color. Set it to `false` to disable filling on polygons or circles.\n  \t\tfill: false,\n\n  \t\t// @option fillColor: String = *\n  \t\t// Fill color. Defaults to the value of the [`color`](#path-color) option\n  \t\tfillColor: null,\n\n  \t\t// @option fillOpacity: Number = 0.2\n  \t\t// Fill opacity.\n  \t\tfillOpacity: 0.2,\n\n  \t\t// @option fillRule: String = 'evenodd'\n  \t\t// A string that defines [how the inside of a shape](https://developer.mozilla.org/docs/Web/SVG/Attribute/fill-rule) is determined.\n  \t\tfillRule: 'evenodd',\n\n  \t\t// className: '',\n\n  \t\t// Option inherited from \"Interactive layer\" abstract class\n  \t\tinteractive: true,\n\n  \t\t// @option bubblingMouseEvents: Boolean = true\n  \t\t// When `true`, a mouse event on this path will trigger the same event on the map\n  \t\t// (unless [`L.DomEvent.stopPropagation`](#domevent-stoppropagation) is used).\n  \t\tbubblingMouseEvents: true\n  \t},\n\n  \tbeforeAdd: function (map) {\n  \t\t// Renderer is set here because we need to call renderer.getEvents\n  \t\t// before this.getEvents.\n  \t\tthis._renderer = map.getRenderer(this);\n  \t},\n\n  \tonAdd: function () {\n  \t\tthis._renderer._initPath(this);\n  \t\tthis._reset();\n  \t\tthis._renderer._addPath(this);\n  \t},\n\n  \tonRemove: function () {\n  \t\tthis._renderer._removePath(this);\n  \t},\n\n  \t// @method redraw(): this\n  \t// Redraws the layer. Sometimes useful after you changed the coordinates that the path uses.\n  \tredraw: function () {\n  \t\tif (this._map) {\n  \t\t\tthis._renderer._updatePath(this);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method setStyle(style: Path options): this\n  \t// Changes the appearance of a Path based on the options in the `Path options` object.\n  \tsetStyle: function (style) {\n  \t\tsetOptions(this, style);\n  \t\tif (this._renderer) {\n  \t\t\tthis._renderer._updateStyle(this);\n  \t\t\tif (this.options.stroke && style && Object.prototype.hasOwnProperty.call(style, 'weight')) {\n  \t\t\t\tthis._updateBounds();\n  \t\t\t}\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method bringToFront(): this\n  \t// Brings the layer to the top of all path layers.\n  \tbringToFront: function () {\n  \t\tif (this._renderer) {\n  \t\t\tthis._renderer._bringToFront(this);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method bringToBack(): this\n  \t// Brings the layer to the bottom of all path layers.\n  \tbringToBack: function () {\n  \t\tif (this._renderer) {\n  \t\t\tthis._renderer._bringToBack(this);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \tgetElement: function () {\n  \t\treturn this._path;\n  \t},\n\n  \t_reset: function () {\n  \t\t// defined in child classes\n  \t\tthis._project();\n  \t\tthis._update();\n  \t},\n\n  \t_clickTolerance: function () {\n  \t\t// used when doing hit detection for Canvas layers\n  \t\treturn (this.options.stroke ? this.options.weight / 2 : 0) + this._renderer.options.tolerance;\n  \t}\n  });\n\n  /*\n   * @class CircleMarker\n   * @aka L.CircleMarker\n   * @inherits Path\n   *\n   * A circle of a fixed size with radius specified in pixels. Extends `Path`.\n   */\n\n  var CircleMarker = Path.extend({\n\n  \t// @section\n  \t// @aka CircleMarker options\n  \toptions: {\n  \t\tfill: true,\n\n  \t\t// @option radius: Number = 10\n  \t\t// Radius of the circle marker, in pixels\n  \t\tradius: 10\n  \t},\n\n  \tinitialize: function (latlng, options) {\n  \t\tsetOptions(this, options);\n  \t\tthis._latlng = toLatLng(latlng);\n  \t\tthis._radius = this.options.radius;\n  \t},\n\n  \t// @method setLatLng(latLng: LatLng): this\n  \t// Sets the position of a circle marker to a new location.\n  \tsetLatLng: function (latlng) {\n  \t\tvar oldLatLng = this._latlng;\n  \t\tthis._latlng = toLatLng(latlng);\n  \t\tthis.redraw();\n\n  \t\t// @event move: Event\n  \t\t// Fired when the marker is moved via [`setLatLng`](#circlemarker-setlatlng). Old and new coordinates are included in event arguments as `oldLatLng`, `latlng`.\n  \t\treturn this.fire('move', {oldLatLng: oldLatLng, latlng: this._latlng});\n  \t},\n\n  \t// @method getLatLng(): LatLng\n  \t// Returns the current geographical position of the circle marker\n  \tgetLatLng: function () {\n  \t\treturn this._latlng;\n  \t},\n\n  \t// @method setRadius(radius: Number): this\n  \t// Sets the radius of a circle marker. Units are in pixels.\n  \tsetRadius: function (radius) {\n  \t\tthis.options.radius = this._radius = radius;\n  \t\treturn this.redraw();\n  \t},\n\n  \t// @method getRadius(): Number\n  \t// Returns the current radius of the circle\n  \tgetRadius: function () {\n  \t\treturn this._radius;\n  \t},\n\n  \tsetStyle : function (options) {\n  \t\tvar radius = options && options.radius || this._radius;\n  \t\tPath.prototype.setStyle.call(this, options);\n  \t\tthis.setRadius(radius);\n  \t\treturn this;\n  \t},\n\n  \t_project: function () {\n  \t\tthis._point = this._map.latLngToLayerPoint(this._latlng);\n  \t\tthis._updateBounds();\n  \t},\n\n  \t_updateBounds: function () {\n  \t\tvar r = this._radius,\n  \t\t    r2 = this._radiusY || r,\n  \t\t    w = this._clickTolerance(),\n  \t\t    p = [r + w, r2 + w];\n  \t\tthis._pxBounds = new Bounds(this._point.subtract(p), this._point.add(p));\n  \t},\n\n  \t_update: function () {\n  \t\tif (this._map) {\n  \t\t\tthis._updatePath();\n  \t\t}\n  \t},\n\n  \t_updatePath: function () {\n  \t\tthis._renderer._updateCircle(this);\n  \t},\n\n  \t_empty: function () {\n  \t\treturn this._radius && !this._renderer._bounds.intersects(this._pxBounds);\n  \t},\n\n  \t// Needed by the `Canvas` renderer for interactivity\n  \t_containsPoint: function (p) {\n  \t\treturn p.distanceTo(this._point) <= this._radius + this._clickTolerance();\n  \t}\n  });\n\n\n  // @factory L.circleMarker(latlng: LatLng, options?: CircleMarker options)\n  // Instantiates a circle marker object given a geographical point, and an optional options object.\n  function circleMarker(latlng, options) {\n  \treturn new CircleMarker(latlng, options);\n  }\n\n  /*\n   * @class Circle\n   * @aka L.Circle\n   * @inherits CircleMarker\n   *\n   * A class for drawing circle overlays on a map. Extends `CircleMarker`.\n   *\n   * It's an approximation and starts to diverge from a real circle closer to poles (due to projection distortion).\n   *\n   * @example\n   *\n   * ```js\n   * L.circle([50.5, 30.5], {radius: 200}).addTo(map);\n   * ```\n   */\n\n  var Circle = CircleMarker.extend({\n\n  \tinitialize: function (latlng, options, legacyOptions) {\n  \t\tif (typeof options === 'number') {\n  \t\t\t// Backwards compatibility with 0.7.x factory (latlng, radius, options?)\n  \t\t\toptions = extend({}, legacyOptions, {radius: options});\n  \t\t}\n  \t\tsetOptions(this, options);\n  \t\tthis._latlng = toLatLng(latlng);\n\n  \t\tif (isNaN(this.options.radius)) { throw new Error('Circle radius cannot be NaN'); }\n\n  \t\t// @section\n  \t\t// @aka Circle options\n  \t\t// @option radius: Number; Radius of the circle, in meters.\n  \t\tthis._mRadius = this.options.radius;\n  \t},\n\n  \t// @method setRadius(radius: Number): this\n  \t// Sets the radius of a circle. Units are in meters.\n  \tsetRadius: function (radius) {\n  \t\tthis._mRadius = radius;\n  \t\treturn this.redraw();\n  \t},\n\n  \t// @method getRadius(): Number\n  \t// Returns the current radius of a circle. Units are in meters.\n  \tgetRadius: function () {\n  \t\treturn this._mRadius;\n  \t},\n\n  \t// @method getBounds(): LatLngBounds\n  \t// Returns the `LatLngBounds` of the path.\n  \tgetBounds: function () {\n  \t\tvar half = [this._radius, this._radiusY || this._radius];\n\n  \t\treturn new LatLngBounds(\n  \t\t\tthis._map.layerPointToLatLng(this._point.subtract(half)),\n  \t\t\tthis._map.layerPointToLatLng(this._point.add(half)));\n  \t},\n\n  \tsetStyle: Path.prototype.setStyle,\n\n  \t_project: function () {\n\n  \t\tvar lng = this._latlng.lng,\n  \t\t    lat = this._latlng.lat,\n  \t\t    map = this._map,\n  \t\t    crs = map.options.crs;\n\n  \t\tif (crs.distance === Earth.distance) {\n  \t\t\tvar d = Math.PI / 180,\n  \t\t\t    latR = (this._mRadius / Earth.R) / d,\n  \t\t\t    top = map.project([lat + latR, lng]),\n  \t\t\t    bottom = map.project([lat - latR, lng]),\n  \t\t\t    p = top.add(bottom).divideBy(2),\n  \t\t\t    lat2 = map.unproject(p).lat,\n  \t\t\t    lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /\n  \t\t\t            (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;\n\n  \t\t\tif (isNaN(lngR) || lngR === 0) {\n  \t\t\t\tlngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425\n  \t\t\t}\n\n  \t\t\tthis._point = p.subtract(map.getPixelOrigin());\n  \t\t\tthis._radius = isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\n  \t\t\tthis._radiusY = p.y - top.y;\n\n  \t\t} else {\n  \t\t\tvar latlng2 = crs.unproject(crs.project(this._latlng).subtract([this._mRadius, 0]));\n\n  \t\t\tthis._point = map.latLngToLayerPoint(this._latlng);\n  \t\t\tthis._radius = this._point.x - map.latLngToLayerPoint(latlng2).x;\n  \t\t}\n\n  \t\tthis._updateBounds();\n  \t}\n  });\n\n  // @factory L.circle(latlng: LatLng, options?: Circle options)\n  // Instantiates a circle object given a geographical point, and an options object\n  // which contains the circle radius.\n  // @alternative\n  // @factory L.circle(latlng: LatLng, radius: Number, options?: Circle options)\n  // Obsolete way of instantiating a circle, for compatibility with 0.7.x code.\n  // Do not use in new applications or plugins.\n  function circle(latlng, options, legacyOptions) {\n  \treturn new Circle(latlng, options, legacyOptions);\n  }\n\n  /*\n   * @class Polyline\n   * @aka L.Polyline\n   * @inherits Path\n   *\n   * A class for drawing polyline overlays on a map. Extends `Path`.\n   *\n   * @example\n   *\n   * ```js\n   * // create a red polyline from an array of LatLng points\n   * var latlngs = [\n   * \t[45.51, -122.68],\n   * \t[37.77, -122.43],\n   * \t[34.04, -118.2]\n   * ];\n   *\n   * var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);\n   *\n   * // zoom the map to the polyline\n   * map.fitBounds(polyline.getBounds());\n   * ```\n   *\n   * You can also pass a multi-dimensional array to represent a `MultiPolyline` shape:\n   *\n   * ```js\n   * // create a red polyline from an array of arrays of LatLng points\n   * var latlngs = [\n   * \t[[45.51, -122.68],\n   * \t [37.77, -122.43],\n   * \t [34.04, -118.2]],\n   * \t[[40.78, -73.91],\n   * \t [41.83, -87.62],\n   * \t [32.76, -96.72]]\n   * ];\n   * ```\n   */\n\n\n  var Polyline = Path.extend({\n\n  \t// @section\n  \t// @aka Polyline options\n  \toptions: {\n  \t\t// @option smoothFactor: Number = 1.0\n  \t\t// How much to simplify the polyline on each zoom level. More means\n  \t\t// better performance and smoother look, and less means more accurate representation.\n  \t\tsmoothFactor: 1.0,\n\n  \t\t// @option noClip: Boolean = false\n  \t\t// Disable polyline clipping.\n  \t\tnoClip: false\n  \t},\n\n  \tinitialize: function (latlngs, options) {\n  \t\tsetOptions(this, options);\n  \t\tthis._setLatLngs(latlngs);\n  \t},\n\n  \t// @method getLatLngs(): LatLng[]\n  \t// Returns an array of the points in the path, or nested arrays of points in case of multi-polyline.\n  \tgetLatLngs: function () {\n  \t\treturn this._latlngs;\n  \t},\n\n  \t// @method setLatLngs(latlngs: LatLng[]): this\n  \t// Replaces all the points in the polyline with the given array of geographical points.\n  \tsetLatLngs: function (latlngs) {\n  \t\tthis._setLatLngs(latlngs);\n  \t\treturn this.redraw();\n  \t},\n\n  \t// @method isEmpty(): Boolean\n  \t// Returns `true` if the Polyline has no LatLngs.\n  \tisEmpty: function () {\n  \t\treturn !this._latlngs.length;\n  \t},\n\n  \t// @method closestLayerPoint(p: Point): Point\n  \t// Returns the point closest to `p` on the Polyline.\n  \tclosestLayerPoint: function (p) {\n  \t\tvar minDistance = Infinity,\n  \t\t    minPoint = null,\n  \t\t    closest = _sqClosestPointOnSegment,\n  \t\t    p1, p2;\n\n  \t\tfor (var j = 0, jLen = this._parts.length; j < jLen; j++) {\n  \t\t\tvar points = this._parts[j];\n\n  \t\t\tfor (var i = 1, len = points.length; i < len; i++) {\n  \t\t\t\tp1 = points[i - 1];\n  \t\t\t\tp2 = points[i];\n\n  \t\t\t\tvar sqDist = closest(p, p1, p2, true);\n\n  \t\t\t\tif (sqDist < minDistance) {\n  \t\t\t\t\tminDistance = sqDist;\n  \t\t\t\t\tminPoint = closest(p, p1, p2);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t\tif (minPoint) {\n  \t\t\tminPoint.distance = Math.sqrt(minDistance);\n  \t\t}\n  \t\treturn minPoint;\n  \t},\n\n  \t// @method getCenter(): LatLng\n  \t// Returns the center ([centroid](http://en.wikipedia.org/wiki/Centroid)) of the polyline.\n  \tgetCenter: function () {\n  \t\t// throws error when not yet added to map as this center calculation requires projected coordinates\n  \t\tif (!this._map) {\n  \t\t\tthrow new Error('Must add layer to map before using getCenter()');\n  \t\t}\n\n  \t\tvar i, halfDist, segDist, dist, p1, p2, ratio,\n  \t\t    points = this._rings[0],\n  \t\t    len = points.length;\n\n  \t\tif (!len) { return null; }\n\n  \t\t// polyline centroid algorithm; only uses the first ring if there are multiple\n\n  \t\tfor (i = 0, halfDist = 0; i < len - 1; i++) {\n  \t\t\thalfDist += points[i].distanceTo(points[i + 1]) / 2;\n  \t\t}\n\n  \t\t// The line is so small in the current view that all points are on the same pixel.\n  \t\tif (halfDist === 0) {\n  \t\t\treturn this._map.layerPointToLatLng(points[0]);\n  \t\t}\n\n  \t\tfor (i = 0, dist = 0; i < len - 1; i++) {\n  \t\t\tp1 = points[i];\n  \t\t\tp2 = points[i + 1];\n  \t\t\tsegDist = p1.distanceTo(p2);\n  \t\t\tdist += segDist;\n\n  \t\t\tif (dist > halfDist) {\n  \t\t\t\tratio = (dist - halfDist) / segDist;\n  \t\t\t\treturn this._map.layerPointToLatLng([\n  \t\t\t\t\tp2.x - ratio * (p2.x - p1.x),\n  \t\t\t\t\tp2.y - ratio * (p2.y - p1.y)\n  \t\t\t\t]);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t// @method getBounds(): LatLngBounds\n  \t// Returns the `LatLngBounds` of the path.\n  \tgetBounds: function () {\n  \t\treturn this._bounds;\n  \t},\n\n  \t// @method addLatLng(latlng: LatLng, latlngs?: LatLng[]): this\n  \t// Adds a given point to the polyline. By default, adds to the first ring of\n  \t// the polyline in case of a multi-polyline, but can be overridden by passing\n  \t// a specific ring as a LatLng array (that you can earlier access with [`getLatLngs`](#polyline-getlatlngs)).\n  \taddLatLng: function (latlng, latlngs) {\n  \t\tlatlngs = latlngs || this._defaultShape();\n  \t\tlatlng = toLatLng(latlng);\n  \t\tlatlngs.push(latlng);\n  \t\tthis._bounds.extend(latlng);\n  \t\treturn this.redraw();\n  \t},\n\n  \t_setLatLngs: function (latlngs) {\n  \t\tthis._bounds = new LatLngBounds();\n  \t\tthis._latlngs = this._convertLatLngs(latlngs);\n  \t},\n\n  \t_defaultShape: function () {\n  \t\treturn isFlat(this._latlngs) ? this._latlngs : this._latlngs[0];\n  \t},\n\n  \t// recursively convert latlngs input into actual LatLng instances; calculate bounds along the way\n  \t_convertLatLngs: function (latlngs) {\n  \t\tvar result = [],\n  \t\t    flat = isFlat(latlngs);\n\n  \t\tfor (var i = 0, len = latlngs.length; i < len; i++) {\n  \t\t\tif (flat) {\n  \t\t\t\tresult[i] = toLatLng(latlngs[i]);\n  \t\t\t\tthis._bounds.extend(result[i]);\n  \t\t\t} else {\n  \t\t\t\tresult[i] = this._convertLatLngs(latlngs[i]);\n  \t\t\t}\n  \t\t}\n\n  \t\treturn result;\n  \t},\n\n  \t_project: function () {\n  \t\tvar pxBounds = new Bounds();\n  \t\tthis._rings = [];\n  \t\tthis._projectLatlngs(this._latlngs, this._rings, pxBounds);\n\n  \t\tif (this._bounds.isValid() && pxBounds.isValid()) {\n  \t\t\tthis._rawPxBounds = pxBounds;\n  \t\t\tthis._updateBounds();\n  \t\t}\n  \t},\n\n  \t_updateBounds: function () {\n  \t\tvar w = this._clickTolerance(),\n  \t\t    p = new Point(w, w);\n  \t\tthis._pxBounds = new Bounds([\n  \t\t\tthis._rawPxBounds.min.subtract(p),\n  \t\t\tthis._rawPxBounds.max.add(p)\n  \t\t]);\n  \t},\n\n  \t// recursively turns latlngs into a set of rings with projected coordinates\n  \t_projectLatlngs: function (latlngs, result, projectedBounds) {\n  \t\tvar flat = latlngs[0] instanceof LatLng,\n  \t\t    len = latlngs.length,\n  \t\t    i, ring;\n\n  \t\tif (flat) {\n  \t\t\tring = [];\n  \t\t\tfor (i = 0; i < len; i++) {\n  \t\t\t\tring[i] = this._map.latLngToLayerPoint(latlngs[i]);\n  \t\t\t\tprojectedBounds.extend(ring[i]);\n  \t\t\t}\n  \t\t\tresult.push(ring);\n  \t\t} else {\n  \t\t\tfor (i = 0; i < len; i++) {\n  \t\t\t\tthis._projectLatlngs(latlngs[i], result, projectedBounds);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t// clip polyline by renderer bounds so that we have less to render for performance\n  \t_clipPoints: function () {\n  \t\tvar bounds = this._renderer._bounds;\n\n  \t\tthis._parts = [];\n  \t\tif (!this._pxBounds || !this._pxBounds.intersects(bounds)) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (this.options.noClip) {\n  \t\t\tthis._parts = this._rings;\n  \t\t\treturn;\n  \t\t}\n\n  \t\tvar parts = this._parts,\n  \t\t    i, j, k, len, len2, segment, points;\n\n  \t\tfor (i = 0, k = 0, len = this._rings.length; i < len; i++) {\n  \t\t\tpoints = this._rings[i];\n\n  \t\t\tfor (j = 0, len2 = points.length; j < len2 - 1; j++) {\n  \t\t\t\tsegment = clipSegment(points[j], points[j + 1], bounds, j, true);\n\n  \t\t\t\tif (!segment) { continue; }\n\n  \t\t\t\tparts[k] = parts[k] || [];\n  \t\t\t\tparts[k].push(segment[0]);\n\n  \t\t\t\t// if segment goes out of screen, or it's the last one, it's the end of the line part\n  \t\t\t\tif ((segment[1] !== points[j + 1]) || (j === len2 - 2)) {\n  \t\t\t\t\tparts[k].push(segment[1]);\n  \t\t\t\t\tk++;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t// simplify each clipped part of the polyline for performance\n  \t_simplifyPoints: function () {\n  \t\tvar parts = this._parts,\n  \t\t    tolerance = this.options.smoothFactor;\n\n  \t\tfor (var i = 0, len = parts.length; i < len; i++) {\n  \t\t\tparts[i] = simplify(parts[i], tolerance);\n  \t\t}\n  \t},\n\n  \t_update: function () {\n  \t\tif (!this._map) { return; }\n\n  \t\tthis._clipPoints();\n  \t\tthis._simplifyPoints();\n  \t\tthis._updatePath();\n  \t},\n\n  \t_updatePath: function () {\n  \t\tthis._renderer._updatePoly(this);\n  \t},\n\n  \t// Needed by the `Canvas` renderer for interactivity\n  \t_containsPoint: function (p, closed) {\n  \t\tvar i, j, k, len, len2, part,\n  \t\t    w = this._clickTolerance();\n\n  \t\tif (!this._pxBounds || !this._pxBounds.contains(p)) { return false; }\n\n  \t\t// hit detection for polylines\n  \t\tfor (i = 0, len = this._parts.length; i < len; i++) {\n  \t\t\tpart = this._parts[i];\n\n  \t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\n  \t\t\t\tif (!closed && (j === 0)) { continue; }\n\n  \t\t\t\tif (pointToSegmentDistance(p, part[k], part[j]) <= w) {\n  \t\t\t\t\treturn true;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t\treturn false;\n  \t}\n  });\n\n  // @factory L.polyline(latlngs: LatLng[], options?: Polyline options)\n  // Instantiates a polyline object given an array of geographical points and\n  // optionally an options object. You can create a `Polyline` object with\n  // multiple separate lines (`MultiPolyline`) by passing an array of arrays\n  // of geographic points.\n  function polyline(latlngs, options) {\n  \treturn new Polyline(latlngs, options);\n  }\n\n  // Retrocompat. Allow plugins to support Leaflet versions before and after 1.1.\n  Polyline._flat = _flat;\n\n  /*\n   * @class Polygon\n   * @aka L.Polygon\n   * @inherits Polyline\n   *\n   * A class for drawing polygon overlays on a map. Extends `Polyline`.\n   *\n   * Note that points you pass when creating a polygon shouldn't have an additional last point equal to the first one — it's better to filter out such points.\n   *\n   *\n   * @example\n   *\n   * ```js\n   * // create a red polygon from an array of LatLng points\n   * var latlngs = [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]];\n   *\n   * var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);\n   *\n   * // zoom the map to the polygon\n   * map.fitBounds(polygon.getBounds());\n   * ```\n   *\n   * You can also pass an array of arrays of latlngs, with the first array representing the outer shape and the other arrays representing holes in the outer shape:\n   *\n   * ```js\n   * var latlngs = [\n   *   [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring\n   *   [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole\n   * ];\n   * ```\n   *\n   * Additionally, you can pass a multi-dimensional array to represent a MultiPolygon shape.\n   *\n   * ```js\n   * var latlngs = [\n   *   [ // first polygon\n   *     [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring\n   *     [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole\n   *   ],\n   *   [ // second polygon\n   *     [[41, -111.03],[45, -111.04],[45, -104.05],[41, -104.05]]\n   *   ]\n   * ];\n   * ```\n   */\n\n  var Polygon = Polyline.extend({\n\n  \toptions: {\n  \t\tfill: true\n  \t},\n\n  \tisEmpty: function () {\n  \t\treturn !this._latlngs.length || !this._latlngs[0].length;\n  \t},\n\n  \tgetCenter: function () {\n  \t\t// throws error when not yet added to map as this center calculation requires projected coordinates\n  \t\tif (!this._map) {\n  \t\t\tthrow new Error('Must add layer to map before using getCenter()');\n  \t\t}\n\n  \t\tvar i, j, p1, p2, f, area, x, y, center,\n  \t\t    points = this._rings[0],\n  \t\t    len = points.length;\n\n  \t\tif (!len) { return null; }\n\n  \t\t// polygon centroid algorithm; only uses the first ring if there are multiple\n\n  \t\tarea = x = y = 0;\n\n  \t\tfor (i = 0, j = len - 1; i < len; j = i++) {\n  \t\t\tp1 = points[i];\n  \t\t\tp2 = points[j];\n\n  \t\t\tf = p1.y * p2.x - p2.y * p1.x;\n  \t\t\tx += (p1.x + p2.x) * f;\n  \t\t\ty += (p1.y + p2.y) * f;\n  \t\t\tarea += f * 3;\n  \t\t}\n\n  \t\tif (area === 0) {\n  \t\t\t// Polygon is so small that all points are on same pixel.\n  \t\t\tcenter = points[0];\n  \t\t} else {\n  \t\t\tcenter = [x / area, y / area];\n  \t\t}\n  \t\treturn this._map.layerPointToLatLng(center);\n  \t},\n\n  \t_convertLatLngs: function (latlngs) {\n  \t\tvar result = Polyline.prototype._convertLatLngs.call(this, latlngs),\n  \t\t    len = result.length;\n\n  \t\t// remove last point if it equals first one\n  \t\tif (len >= 2 && result[0] instanceof LatLng && result[0].equals(result[len - 1])) {\n  \t\t\tresult.pop();\n  \t\t}\n  \t\treturn result;\n  \t},\n\n  \t_setLatLngs: function (latlngs) {\n  \t\tPolyline.prototype._setLatLngs.call(this, latlngs);\n  \t\tif (isFlat(this._latlngs)) {\n  \t\t\tthis._latlngs = [this._latlngs];\n  \t\t}\n  \t},\n\n  \t_defaultShape: function () {\n  \t\treturn isFlat(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0];\n  \t},\n\n  \t_clipPoints: function () {\n  \t\t// polygons need a different clipping algorithm so we redefine that\n\n  \t\tvar bounds = this._renderer._bounds,\n  \t\t    w = this.options.weight,\n  \t\t    p = new Point(w, w);\n\n  \t\t// increase clip padding by stroke width to avoid stroke on clip edges\n  \t\tbounds = new Bounds(bounds.min.subtract(p), bounds.max.add(p));\n\n  \t\tthis._parts = [];\n  \t\tif (!this._pxBounds || !this._pxBounds.intersects(bounds)) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tif (this.options.noClip) {\n  \t\t\tthis._parts = this._rings;\n  \t\t\treturn;\n  \t\t}\n\n  \t\tfor (var i = 0, len = this._rings.length, clipped; i < len; i++) {\n  \t\t\tclipped = clipPolygon(this._rings[i], bounds, true);\n  \t\t\tif (clipped.length) {\n  \t\t\t\tthis._parts.push(clipped);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t_updatePath: function () {\n  \t\tthis._renderer._updatePoly(this, true);\n  \t},\n\n  \t// Needed by the `Canvas` renderer for interactivity\n  \t_containsPoint: function (p) {\n  \t\tvar inside = false,\n  \t\t    part, p1, p2, i, j, k, len, len2;\n\n  \t\tif (!this._pxBounds || !this._pxBounds.contains(p)) { return false; }\n\n  \t\t// ray casting algorithm for detecting if point is in polygon\n  \t\tfor (i = 0, len = this._parts.length; i < len; i++) {\n  \t\t\tpart = this._parts[i];\n\n  \t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\n  \t\t\t\tp1 = part[j];\n  \t\t\t\tp2 = part[k];\n\n  \t\t\t\tif (((p1.y > p.y) !== (p2.y > p.y)) && (p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {\n  \t\t\t\t\tinside = !inside;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\t// also check if it's on polygon stroke\n  \t\treturn inside || Polyline.prototype._containsPoint.call(this, p, true);\n  \t}\n\n  });\n\n\n  // @factory L.polygon(latlngs: LatLng[], options?: Polyline options)\n  function polygon(latlngs, options) {\n  \treturn new Polygon(latlngs, options);\n  }\n\n  /*\r\n   * @class GeoJSON\r\n   * @aka L.GeoJSON\r\n   * @inherits FeatureGroup\r\n   *\r\n   * Represents a GeoJSON object or an array of GeoJSON objects. Allows you to parse\r\n   * GeoJSON data and display it on the map. Extends `FeatureGroup`.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * L.geoJSON(data, {\r\n   * \tstyle: function (feature) {\r\n   * \t\treturn {color: feature.properties.color};\r\n   * \t}\r\n   * }).bindPopup(function (layer) {\r\n   * \treturn layer.feature.properties.description;\r\n   * }).addTo(map);\r\n   * ```\r\n   */\r\n\r\n  var GeoJSON = FeatureGroup.extend({\r\n\r\n  \t/* @section\r\n  \t * @aka GeoJSON options\r\n  \t *\r\n  \t * @option pointToLayer: Function = *\r\n  \t * A `Function` defining how GeoJSON points spawn Leaflet layers. It is internally\r\n  \t * called when data is added, passing the GeoJSON point feature and its `LatLng`.\r\n  \t * The default is to spawn a default `Marker`:\r\n  \t * ```js\r\n  \t * function(geoJsonPoint, latlng) {\r\n  \t * \treturn L.marker(latlng);\r\n  \t * }\r\n  \t * ```\r\n  \t *\r\n  \t * @option style: Function = *\r\n  \t * A `Function` defining the `Path options` for styling GeoJSON lines and polygons,\r\n  \t * called internally when data is added.\r\n  \t * The default value is to not override any defaults:\r\n  \t * ```js\r\n  \t * function (geoJsonFeature) {\r\n  \t * \treturn {}\r\n  \t * }\r\n  \t * ```\r\n  \t *\r\n  \t * @option onEachFeature: Function = *\r\n  \t * A `Function` that will be called once for each created `Feature`, after it has\r\n  \t * been created and styled. Useful for attaching events and popups to features.\r\n  \t * The default is to do nothing with the newly created layers:\r\n  \t * ```js\r\n  \t * function (feature, layer) {}\r\n  \t * ```\r\n  \t *\r\n  \t * @option filter: Function = *\r\n  \t * A `Function` that will be used to decide whether to include a feature or not.\r\n  \t * The default is to include all features:\r\n  \t * ```js\r\n  \t * function (geoJsonFeature) {\r\n  \t * \treturn true;\r\n  \t * }\r\n  \t * ```\r\n  \t * Note: dynamically changing the `filter` option will have effect only on newly\r\n  \t * added data. It will _not_ re-evaluate already included features.\r\n  \t *\r\n  \t * @option coordsToLatLng: Function = *\r\n  \t * A `Function` that will be used for converting GeoJSON coordinates to `LatLng`s.\r\n  \t * The default is the `coordsToLatLng` static method.\r\n  \t *\r\n  \t * @option markersInheritOptions: Boolean = false\r\n  \t * Whether default Markers for \"Point\" type Features inherit from group options.\r\n  \t */\r\n\r\n  \tinitialize: function (geojson, options) {\r\n  \t\tsetOptions(this, options);\r\n\r\n  \t\tthis._layers = {};\r\n\r\n  \t\tif (geojson) {\r\n  \t\t\tthis.addData(geojson);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @method addData( <GeoJSON> data ): this\r\n  \t// Adds a GeoJSON object to the layer.\r\n  \taddData: function (geojson) {\r\n  \t\tvar features = isArray(geojson) ? geojson : geojson.features,\r\n  \t\t    i, len, feature;\r\n\r\n  \t\tif (features) {\r\n  \t\t\tfor (i = 0, len = features.length; i < len; i++) {\r\n  \t\t\t\t// only add this if geometry or geometries are set and not null\r\n  \t\t\t\tfeature = features[i];\r\n  \t\t\t\tif (feature.geometries || feature.geometry || feature.features || feature.coordinates) {\r\n  \t\t\t\t\tthis.addData(feature);\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t\treturn this;\r\n  \t\t}\r\n\r\n  \t\tvar options = this.options;\r\n\r\n  \t\tif (options.filter && !options.filter(geojson)) { return this; }\r\n\r\n  \t\tvar layer = geometryToLayer(geojson, options);\r\n  \t\tif (!layer) {\r\n  \t\t\treturn this;\r\n  \t\t}\r\n  \t\tlayer.feature = asFeature(geojson);\r\n\r\n  \t\tlayer.defaultOptions = layer.options;\r\n  \t\tthis.resetStyle(layer);\r\n\r\n  \t\tif (options.onEachFeature) {\r\n  \t\t\toptions.onEachFeature(geojson, layer);\r\n  \t\t}\r\n\r\n  \t\treturn this.addLayer(layer);\r\n  \t},\r\n\r\n  \t// @method resetStyle( <Path> layer? ): this\r\n  \t// Resets the given vector layer's style to the original GeoJSON style, useful for resetting style after hover events.\r\n  \t// If `layer` is omitted, the style of all features in the current layer is reset.\r\n  \tresetStyle: function (layer) {\r\n  \t\tif (layer === undefined) {\r\n  \t\t\treturn this.eachLayer(this.resetStyle, this);\r\n  \t\t}\r\n  \t\t// reset any custom styles\r\n  \t\tlayer.options = extend({}, layer.defaultOptions);\r\n  \t\tthis._setLayerStyle(layer, this.options.style);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method setStyle( <Function> style ): this\r\n  \t// Changes styles of GeoJSON vector layers with the given style function.\r\n  \tsetStyle: function (style) {\r\n  \t\treturn this.eachLayer(function (layer) {\r\n  \t\t\tthis._setLayerStyle(layer, style);\r\n  \t\t}, this);\r\n  \t},\r\n\r\n  \t_setLayerStyle: function (layer, style) {\r\n  \t\tif (layer.setStyle) {\r\n  \t\t\tif (typeof style === 'function') {\r\n  \t\t\t\tstyle = style(layer.feature);\r\n  \t\t\t}\r\n  \t\t\tlayer.setStyle(style);\r\n  \t\t}\r\n  \t}\r\n  });\r\n\r\n  // @section\r\n  // There are several static functions which can be called without instantiating L.GeoJSON:\r\n\r\n  // @function geometryToLayer(featureData: Object, options?: GeoJSON options): Layer\r\n  // Creates a `Layer` from a given GeoJSON feature. Can use a custom\r\n  // [`pointToLayer`](#geojson-pointtolayer) and/or [`coordsToLatLng`](#geojson-coordstolatlng)\r\n  // functions if provided as options.\r\n  function geometryToLayer(geojson, options) {\r\n\r\n  \tvar geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,\r\n  \t    coords = geometry ? geometry.coordinates : null,\r\n  \t    layers = [],\r\n  \t    pointToLayer = options && options.pointToLayer,\r\n  \t    _coordsToLatLng = options && options.coordsToLatLng || coordsToLatLng,\r\n  \t    latlng, latlngs, i, len;\r\n\r\n  \tif (!coords && !geometry) {\r\n  \t\treturn null;\r\n  \t}\r\n\r\n  \tswitch (geometry.type) {\r\n  \tcase 'Point':\r\n  \t\tlatlng = _coordsToLatLng(coords);\r\n  \t\treturn _pointToLayer(pointToLayer, geojson, latlng, options);\r\n\r\n  \tcase 'MultiPoint':\r\n  \t\tfor (i = 0, len = coords.length; i < len; i++) {\r\n  \t\t\tlatlng = _coordsToLatLng(coords[i]);\r\n  \t\t\tlayers.push(_pointToLayer(pointToLayer, geojson, latlng, options));\r\n  \t\t}\r\n  \t\treturn new FeatureGroup(layers);\r\n\r\n  \tcase 'LineString':\r\n  \tcase 'MultiLineString':\r\n  \t\tlatlngs = coordsToLatLngs(coords, geometry.type === 'LineString' ? 0 : 1, _coordsToLatLng);\r\n  \t\treturn new Polyline(latlngs, options);\r\n\r\n  \tcase 'Polygon':\r\n  \tcase 'MultiPolygon':\r\n  \t\tlatlngs = coordsToLatLngs(coords, geometry.type === 'Polygon' ? 1 : 2, _coordsToLatLng);\r\n  \t\treturn new Polygon(latlngs, options);\r\n\r\n  \tcase 'GeometryCollection':\r\n  \t\tfor (i = 0, len = geometry.geometries.length; i < len; i++) {\r\n  \t\t\tvar layer = geometryToLayer({\r\n  \t\t\t\tgeometry: geometry.geometries[i],\r\n  \t\t\t\ttype: 'Feature',\r\n  \t\t\t\tproperties: geojson.properties\r\n  \t\t\t}, options);\r\n\r\n  \t\t\tif (layer) {\r\n  \t\t\t\tlayers.push(layer);\r\n  \t\t\t}\r\n  \t\t}\r\n  \t\treturn new FeatureGroup(layers);\r\n\r\n  \tdefault:\r\n  \t\tthrow new Error('Invalid GeoJSON object.');\r\n  \t}\r\n  }\r\n\r\n  function _pointToLayer(pointToLayerFn, geojson, latlng, options) {\r\n  \treturn pointToLayerFn ?\r\n  \t\tpointToLayerFn(geojson, latlng) :\r\n  \t\tnew Marker(latlng, options && options.markersInheritOptions && options);\r\n  }\r\n\r\n  // @function coordsToLatLng(coords: Array): LatLng\r\n  // Creates a `LatLng` object from an array of 2 numbers (longitude, latitude)\r\n  // or 3 numbers (longitude, latitude, altitude) used in GeoJSON for points.\r\n  function coordsToLatLng(coords) {\r\n  \treturn new LatLng(coords[1], coords[0], coords[2]);\r\n  }\r\n\r\n  // @function coordsToLatLngs(coords: Array, levelsDeep?: Number, coordsToLatLng?: Function): Array\r\n  // Creates a multidimensional array of `LatLng`s from a GeoJSON coordinates array.\r\n  // `levelsDeep` specifies the nesting level (0 is for an array of points, 1 for an array of arrays of points, etc., 0 by default).\r\n  // Can use a custom [`coordsToLatLng`](#geojson-coordstolatlng) function.\r\n  function coordsToLatLngs(coords, levelsDeep, _coordsToLatLng) {\r\n  \tvar latlngs = [];\r\n\r\n  \tfor (var i = 0, len = coords.length, latlng; i < len; i++) {\r\n  \t\tlatlng = levelsDeep ?\r\n  \t\t\tcoordsToLatLngs(coords[i], levelsDeep - 1, _coordsToLatLng) :\r\n  \t\t\t(_coordsToLatLng || coordsToLatLng)(coords[i]);\r\n\r\n  \t\tlatlngs.push(latlng);\r\n  \t}\r\n\r\n  \treturn latlngs;\r\n  }\r\n\r\n  // @function latLngToCoords(latlng: LatLng, precision?: Number): Array\r\n  // Reverse of [`coordsToLatLng`](#geojson-coordstolatlng)\r\n  function latLngToCoords(latlng, precision) {\r\n  \tprecision = typeof precision === 'number' ? precision : 6;\r\n  \treturn latlng.alt !== undefined ?\r\n  \t\t[formatNum(latlng.lng, precision), formatNum(latlng.lat, precision), formatNum(latlng.alt, precision)] :\r\n  \t\t[formatNum(latlng.lng, precision), formatNum(latlng.lat, precision)];\r\n  }\r\n\r\n  // @function latLngsToCoords(latlngs: Array, levelsDeep?: Number, closed?: Boolean): Array\r\n  // Reverse of [`coordsToLatLngs`](#geojson-coordstolatlngs)\r\n  // `closed` determines whether the first point should be appended to the end of the array to close the feature, only used when `levelsDeep` is 0. False by default.\r\n  function latLngsToCoords(latlngs, levelsDeep, closed, precision) {\r\n  \tvar coords = [];\r\n\r\n  \tfor (var i = 0, len = latlngs.length; i < len; i++) {\r\n  \t\tcoords.push(levelsDeep ?\r\n  \t\t\tlatLngsToCoords(latlngs[i], levelsDeep - 1, closed, precision) :\r\n  \t\t\tlatLngToCoords(latlngs[i], precision));\r\n  \t}\r\n\r\n  \tif (!levelsDeep && closed) {\r\n  \t\tcoords.push(coords[0]);\r\n  \t}\r\n\r\n  \treturn coords;\r\n  }\r\n\r\n  function getFeature(layer, newGeometry) {\r\n  \treturn layer.feature ?\r\n  \t\textend({}, layer.feature, {geometry: newGeometry}) :\r\n  \t\tasFeature(newGeometry);\r\n  }\r\n\r\n  // @function asFeature(geojson: Object): Object\r\n  // Normalize GeoJSON geometries/features into GeoJSON features.\r\n  function asFeature(geojson) {\r\n  \tif (geojson.type === 'Feature' || geojson.type === 'FeatureCollection') {\r\n  \t\treturn geojson;\r\n  \t}\r\n\r\n  \treturn {\r\n  \t\ttype: 'Feature',\r\n  \t\tproperties: {},\r\n  \t\tgeometry: geojson\r\n  \t};\r\n  }\r\n\r\n  var PointToGeoJSON = {\r\n  \ttoGeoJSON: function (precision) {\r\n  \t\treturn getFeature(this, {\r\n  \t\t\ttype: 'Point',\r\n  \t\t\tcoordinates: latLngToCoords(this.getLatLng(), precision)\r\n  \t\t});\r\n  \t}\r\n  };\r\n\r\n  // @namespace Marker\r\n  // @section Other methods\r\n  // @method toGeoJSON(precision?: Number): Object\r\n  // `precision` is the number of decimal places for coordinates.\r\n  // The default value is 6 places.\r\n  // Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the marker (as a GeoJSON `Point` Feature).\r\n  Marker.include(PointToGeoJSON);\r\n\r\n  // @namespace CircleMarker\r\n  // @method toGeoJSON(precision?: Number): Object\r\n  // `precision` is the number of decimal places for coordinates.\r\n  // The default value is 6 places.\r\n  // Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the circle marker (as a GeoJSON `Point` Feature).\r\n  Circle.include(PointToGeoJSON);\r\n  CircleMarker.include(PointToGeoJSON);\r\n\r\n\r\n  // @namespace Polyline\r\n  // @method toGeoJSON(precision?: Number): Object\r\n  // `precision` is the number of decimal places for coordinates.\r\n  // The default value is 6 places.\r\n  // Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polyline (as a GeoJSON `LineString` or `MultiLineString` Feature).\r\n  Polyline.include({\r\n  \ttoGeoJSON: function (precision) {\r\n  \t\tvar multi = !isFlat(this._latlngs);\r\n\r\n  \t\tvar coords = latLngsToCoords(this._latlngs, multi ? 1 : 0, false, precision);\r\n\r\n  \t\treturn getFeature(this, {\r\n  \t\t\ttype: (multi ? 'Multi' : '') + 'LineString',\r\n  \t\t\tcoordinates: coords\r\n  \t\t});\r\n  \t}\r\n  });\r\n\r\n  // @namespace Polygon\r\n  // @method toGeoJSON(precision?: Number): Object\r\n  // `precision` is the number of decimal places for coordinates.\r\n  // The default value is 6 places.\r\n  // Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polygon (as a GeoJSON `Polygon` or `MultiPolygon` Feature).\r\n  Polygon.include({\r\n  \ttoGeoJSON: function (precision) {\r\n  \t\tvar holes = !isFlat(this._latlngs),\r\n  \t\t    multi = holes && !isFlat(this._latlngs[0]);\r\n\r\n  \t\tvar coords = latLngsToCoords(this._latlngs, multi ? 2 : holes ? 1 : 0, true, precision);\r\n\r\n  \t\tif (!holes) {\r\n  \t\t\tcoords = [coords];\r\n  \t\t}\r\n\r\n  \t\treturn getFeature(this, {\r\n  \t\t\ttype: (multi ? 'Multi' : '') + 'Polygon',\r\n  \t\t\tcoordinates: coords\r\n  \t\t});\r\n  \t}\r\n  });\r\n\r\n\r\n  // @namespace LayerGroup\r\n  LayerGroup.include({\r\n  \ttoMultiPoint: function (precision) {\r\n  \t\tvar coords = [];\r\n\r\n  \t\tthis.eachLayer(function (layer) {\r\n  \t\t\tcoords.push(layer.toGeoJSON(precision).geometry.coordinates);\r\n  \t\t});\r\n\r\n  \t\treturn getFeature(this, {\r\n  \t\t\ttype: 'MultiPoint',\r\n  \t\t\tcoordinates: coords\r\n  \t\t});\r\n  \t},\r\n\r\n  \t// @method toGeoJSON(precision?: Number): Object\r\n  \t// `precision` is the number of decimal places for coordinates.\r\n  \t// The default value is 6 places.\r\n  \t// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the layer group (as a GeoJSON `FeatureCollection`, `GeometryCollection`, or `MultiPoint`).\r\n  \ttoGeoJSON: function (precision) {\r\n\r\n  \t\tvar type = this.feature && this.feature.geometry && this.feature.geometry.type;\r\n\r\n  \t\tif (type === 'MultiPoint') {\r\n  \t\t\treturn this.toMultiPoint(precision);\r\n  \t\t}\r\n\r\n  \t\tvar isGeometryCollection = type === 'GeometryCollection',\r\n  \t\t    jsons = [];\r\n\r\n  \t\tthis.eachLayer(function (layer) {\r\n  \t\t\tif (layer.toGeoJSON) {\r\n  \t\t\t\tvar json = layer.toGeoJSON(precision);\r\n  \t\t\t\tif (isGeometryCollection) {\r\n  \t\t\t\t\tjsons.push(json.geometry);\r\n  \t\t\t\t} else {\r\n  \t\t\t\t\tvar feature = asFeature(json);\r\n  \t\t\t\t\t// Squash nested feature collections\r\n  \t\t\t\t\tif (feature.type === 'FeatureCollection') {\r\n  \t\t\t\t\t\tjsons.push.apply(jsons, feature.features);\r\n  \t\t\t\t\t} else {\r\n  \t\t\t\t\t\tjsons.push(feature);\r\n  \t\t\t\t\t}\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t});\r\n\r\n  \t\tif (isGeometryCollection) {\r\n  \t\t\treturn getFeature(this, {\r\n  \t\t\t\tgeometries: jsons,\r\n  \t\t\t\ttype: 'GeometryCollection'\r\n  \t\t\t});\r\n  \t\t}\r\n\r\n  \t\treturn {\r\n  \t\t\ttype: 'FeatureCollection',\r\n  \t\t\tfeatures: jsons\r\n  \t\t};\r\n  \t}\r\n  });\r\n\r\n  // @namespace GeoJSON\r\n  // @factory L.geoJSON(geojson?: Object, options?: GeoJSON options)\r\n  // Creates a GeoJSON layer. Optionally accepts an object in\r\n  // [GeoJSON format](https://tools.ietf.org/html/rfc7946) to display on the map\r\n  // (you can alternatively add it later with `addData` method) and an `options` object.\r\n  function geoJSON(geojson, options) {\r\n  \treturn new GeoJSON(geojson, options);\r\n  }\r\n\r\n  // Backward compatibility.\r\n  var geoJson = geoJSON;\n\n  /*\r\n   * @class ImageOverlay\r\n   * @aka L.ImageOverlay\r\n   * @inherits Interactive layer\r\n   *\r\n   * Used to load and display a single image over specific bounds of the map. Extends `Layer`.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var imageUrl = 'http://www.lib.utexas.edu/maps/historical/newark_nj_1922.jpg',\r\n   * \timageBounds = [[40.712216, -74.22655], [40.773941, -74.12544]];\r\n   * L.imageOverlay(imageUrl, imageBounds).addTo(map);\r\n   * ```\r\n   */\r\n\r\n  var ImageOverlay = Layer.extend({\r\n\r\n  \t// @section\r\n  \t// @aka ImageOverlay options\r\n  \toptions: {\r\n  \t\t// @option opacity: Number = 1.0\r\n  \t\t// The opacity of the image overlay.\r\n  \t\topacity: 1,\r\n\r\n  \t\t// @option alt: String = ''\r\n  \t\t// Text for the `alt` attribute of the image (useful for accessibility).\r\n  \t\talt: '',\r\n\r\n  \t\t// @option interactive: Boolean = false\r\n  \t\t// If `true`, the image overlay will emit [mouse events](#interactive-layer) when clicked or hovered.\r\n  \t\tinteractive: false,\r\n\r\n  \t\t// @option crossOrigin: Boolean|String = false\r\n  \t\t// Whether the crossOrigin attribute will be added to the image.\r\n  \t\t// If a String is provided, the image will have its crossOrigin attribute set to the String provided. This is needed if you want to access image pixel data.\r\n  \t\t// Refer to [CORS Settings](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes) for valid String values.\r\n  \t\tcrossOrigin: false,\r\n\r\n  \t\t// @option errorOverlayUrl: String = ''\r\n  \t\t// URL to the overlay image to show in place of the overlay that failed to load.\r\n  \t\terrorOverlayUrl: '',\r\n\r\n  \t\t// @option zIndex: Number = 1\r\n  \t\t// The explicit [zIndex](https://developer.mozilla.org/docs/Web/CSS/CSS_Positioning/Understanding_z_index) of the overlay layer.\r\n  \t\tzIndex: 1,\r\n\r\n  \t\t// @option className: String = ''\r\n  \t\t// A custom class name to assign to the image. Empty by default.\r\n  \t\tclassName: ''\r\n  \t},\r\n\r\n  \tinitialize: function (url, bounds, options) { // (String, LatLngBounds, Object)\r\n  \t\tthis._url = url;\r\n  \t\tthis._bounds = toLatLngBounds(bounds);\r\n\r\n  \t\tsetOptions(this, options);\r\n  \t},\r\n\r\n  \tonAdd: function () {\r\n  \t\tif (!this._image) {\r\n  \t\t\tthis._initImage();\r\n\r\n  \t\t\tif (this.options.opacity < 1) {\r\n  \t\t\t\tthis._updateOpacity();\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tif (this.options.interactive) {\r\n  \t\t\taddClass(this._image, 'leaflet-interactive');\r\n  \t\t\tthis.addInteractiveTarget(this._image);\r\n  \t\t}\r\n\r\n  \t\tthis.getPane().appendChild(this._image);\r\n  \t\tthis._reset();\r\n  \t},\r\n\r\n  \tonRemove: function () {\r\n  \t\tremove(this._image);\r\n  \t\tif (this.options.interactive) {\r\n  \t\t\tthis.removeInteractiveTarget(this._image);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @method setOpacity(opacity: Number): this\r\n  \t// Sets the opacity of the overlay.\r\n  \tsetOpacity: function (opacity) {\r\n  \t\tthis.options.opacity = opacity;\r\n\r\n  \t\tif (this._image) {\r\n  \t\t\tthis._updateOpacity();\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \tsetStyle: function (styleOpts) {\r\n  \t\tif (styleOpts.opacity) {\r\n  \t\t\tthis.setOpacity(styleOpts.opacity);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method bringToFront(): this\r\n  \t// Brings the layer to the top of all overlays.\r\n  \tbringToFront: function () {\r\n  \t\tif (this._map) {\r\n  \t\t\ttoFront(this._image);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method bringToBack(): this\r\n  \t// Brings the layer to the bottom of all overlays.\r\n  \tbringToBack: function () {\r\n  \t\tif (this._map) {\r\n  \t\t\ttoBack(this._image);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method setUrl(url: String): this\r\n  \t// Changes the URL of the image.\r\n  \tsetUrl: function (url) {\r\n  \t\tthis._url = url;\r\n\r\n  \t\tif (this._image) {\r\n  \t\t\tthis._image.src = url;\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method setBounds(bounds: LatLngBounds): this\r\n  \t// Update the bounds that this ImageOverlay covers\r\n  \tsetBounds: function (bounds) {\r\n  \t\tthis._bounds = toLatLngBounds(bounds);\r\n\r\n  \t\tif (this._map) {\r\n  \t\t\tthis._reset();\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \tgetEvents: function () {\r\n  \t\tvar events = {\r\n  \t\t\tzoom: this._reset,\r\n  \t\t\tviewreset: this._reset\r\n  \t\t};\r\n\r\n  \t\tif (this._zoomAnimated) {\r\n  \t\t\tevents.zoomanim = this._animateZoom;\r\n  \t\t}\r\n\r\n  \t\treturn events;\r\n  \t},\r\n\r\n  \t// @method setZIndex(value: Number): this\r\n  \t// Changes the [zIndex](#imageoverlay-zindex) of the image overlay.\r\n  \tsetZIndex: function (value) {\r\n  \t\tthis.options.zIndex = value;\r\n  \t\tthis._updateZIndex();\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method getBounds(): LatLngBounds\r\n  \t// Get the bounds that this ImageOverlay covers\r\n  \tgetBounds: function () {\r\n  \t\treturn this._bounds;\r\n  \t},\r\n\r\n  \t// @method getElement(): HTMLElement\r\n  \t// Returns the instance of [`HTMLImageElement`](https://developer.mozilla.org/docs/Web/API/HTMLImageElement)\r\n  \t// used by this overlay.\r\n  \tgetElement: function () {\r\n  \t\treturn this._image;\r\n  \t},\r\n\r\n  \t_initImage: function () {\r\n  \t\tvar wasElementSupplied = this._url.tagName === 'IMG';\r\n  \t\tvar img = this._image = wasElementSupplied ? this._url : create$1('img');\r\n\r\n  \t\taddClass(img, 'leaflet-image-layer');\r\n  \t\tif (this._zoomAnimated) { addClass(img, 'leaflet-zoom-animated'); }\r\n  \t\tif (this.options.className) { addClass(img, this.options.className); }\r\n\r\n  \t\timg.onselectstart = falseFn;\r\n  \t\timg.onmousemove = falseFn;\r\n\r\n  \t\t// @event load: Event\r\n  \t\t// Fired when the ImageOverlay layer has loaded its image\r\n  \t\timg.onload = bind(this.fire, this, 'load');\r\n  \t\timg.onerror = bind(this._overlayOnError, this, 'error');\r\n\r\n  \t\tif (this.options.crossOrigin || this.options.crossOrigin === '') {\r\n  \t\t\timg.crossOrigin = this.options.crossOrigin === true ? '' : this.options.crossOrigin;\r\n  \t\t}\r\n\r\n  \t\tif (this.options.zIndex) {\r\n  \t\t\tthis._updateZIndex();\r\n  \t\t}\r\n\r\n  \t\tif (wasElementSupplied) {\r\n  \t\t\tthis._url = img.src;\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\timg.src = this._url;\r\n  \t\timg.alt = this.options.alt;\r\n  \t},\r\n\r\n  \t_animateZoom: function (e) {\r\n  \t\tvar scale = this._map.getZoomScale(e.zoom),\r\n  \t\t    offset = this._map._latLngBoundsToNewLayerBounds(this._bounds, e.zoom, e.center).min;\r\n\r\n  \t\tsetTransform(this._image, offset, scale);\r\n  \t},\r\n\r\n  \t_reset: function () {\r\n  \t\tvar image = this._image,\r\n  \t\t    bounds = new Bounds(\r\n  \t\t        this._map.latLngToLayerPoint(this._bounds.getNorthWest()),\r\n  \t\t        this._map.latLngToLayerPoint(this._bounds.getSouthEast())),\r\n  \t\t    size = bounds.getSize();\r\n\r\n  \t\tsetPosition(image, bounds.min);\r\n\r\n  \t\timage.style.width  = size.x + 'px';\r\n  \t\timage.style.height = size.y + 'px';\r\n  \t},\r\n\r\n  \t_updateOpacity: function () {\r\n  \t\tsetOpacity(this._image, this.options.opacity);\r\n  \t},\r\n\r\n  \t_updateZIndex: function () {\r\n  \t\tif (this._image && this.options.zIndex !== undefined && this.options.zIndex !== null) {\r\n  \t\t\tthis._image.style.zIndex = this.options.zIndex;\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_overlayOnError: function () {\r\n  \t\t// @event error: Event\r\n  \t\t// Fired when the ImageOverlay layer fails to load its image\r\n  \t\tthis.fire('error');\r\n\r\n  \t\tvar errorUrl = this.options.errorOverlayUrl;\r\n  \t\tif (errorUrl && this._url !== errorUrl) {\r\n  \t\t\tthis._url = errorUrl;\r\n  \t\t\tthis._image.src = errorUrl;\r\n  \t\t}\r\n  \t}\r\n  });\r\n\r\n  // @factory L.imageOverlay(imageUrl: String, bounds: LatLngBounds, options?: ImageOverlay options)\r\n  // Instantiates an image overlay object given the URL of the image and the\r\n  // geographical bounds it is tied to.\r\n  var imageOverlay = function (url, bounds, options) {\r\n  \treturn new ImageOverlay(url, bounds, options);\r\n  };\n\n  /*\r\n   * @class VideoOverlay\r\n   * @aka L.VideoOverlay\r\n   * @inherits ImageOverlay\r\n   *\r\n   * Used to load and display a video player over specific bounds of the map. Extends `ImageOverlay`.\r\n   *\r\n   * A video overlay uses the [`<video>`](https://developer.mozilla.org/docs/Web/HTML/Element/video)\r\n   * HTML5 element.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var videoUrl = 'https://www.mapbox.com/bites/00188/patricia_nasa.webm',\r\n   * \tvideoBounds = [[ 32, -130], [ 13, -100]];\r\n   * L.videoOverlay(videoUrl, videoBounds ).addTo(map);\r\n   * ```\r\n   */\r\n\r\n  var VideoOverlay = ImageOverlay.extend({\r\n\r\n  \t// @section\r\n  \t// @aka VideoOverlay options\r\n  \toptions: {\r\n  \t\t// @option autoplay: Boolean = true\r\n  \t\t// Whether the video starts playing automatically when loaded.\r\n  \t\tautoplay: true,\r\n\r\n  \t\t// @option loop: Boolean = true\r\n  \t\t// Whether the video will loop back to the beginning when played.\r\n  \t\tloop: true,\r\n\r\n  \t\t// @option keepAspectRatio: Boolean = true\r\n  \t\t// Whether the video will save aspect ratio after the projection.\r\n  \t\t// Relevant for supported browsers. Browser compatibility- https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit\r\n  \t\tkeepAspectRatio: true,\r\n\r\n  \t\t// @option muted: Boolean = false\r\n  \t\t// Whether the video starts on mute when loaded.\r\n  \t\tmuted: false\r\n  \t},\r\n\r\n  \t_initImage: function () {\r\n  \t\tvar wasElementSupplied = this._url.tagName === 'VIDEO';\r\n  \t\tvar vid = this._image = wasElementSupplied ? this._url : create$1('video');\r\n\r\n  \t\taddClass(vid, 'leaflet-image-layer');\r\n  \t\tif (this._zoomAnimated) { addClass(vid, 'leaflet-zoom-animated'); }\r\n  \t\tif (this.options.className) { addClass(vid, this.options.className); }\r\n\r\n  \t\tvid.onselectstart = falseFn;\r\n  \t\tvid.onmousemove = falseFn;\r\n\r\n  \t\t// @event load: Event\r\n  \t\t// Fired when the video has finished loading the first frame\r\n  \t\tvid.onloadeddata = bind(this.fire, this, 'load');\r\n\r\n  \t\tif (wasElementSupplied) {\r\n  \t\t\tvar sourceElements = vid.getElementsByTagName('source');\r\n  \t\t\tvar sources = [];\r\n  \t\t\tfor (var j = 0; j < sourceElements.length; j++) {\r\n  \t\t\t\tsources.push(sourceElements[j].src);\r\n  \t\t\t}\r\n\r\n  \t\t\tthis._url = (sourceElements.length > 0) ? sources : [vid.src];\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\tif (!isArray(this._url)) { this._url = [this._url]; }\r\n\r\n  \t\tif (!this.options.keepAspectRatio && Object.prototype.hasOwnProperty.call(vid.style, 'objectFit')) {\r\n  \t\t\tvid.style['objectFit'] = 'fill';\r\n  \t\t}\r\n  \t\tvid.autoplay = !!this.options.autoplay;\r\n  \t\tvid.loop = !!this.options.loop;\r\n  \t\tvid.muted = !!this.options.muted;\r\n  \t\tfor (var i = 0; i < this._url.length; i++) {\r\n  \t\t\tvar source = create$1('source');\r\n  \t\t\tsource.src = this._url[i];\r\n  \t\t\tvid.appendChild(source);\r\n  \t\t}\r\n  \t}\r\n\r\n  \t// @method getElement(): HTMLVideoElement\r\n  \t// Returns the instance of [`HTMLVideoElement`](https://developer.mozilla.org/docs/Web/API/HTMLVideoElement)\r\n  \t// used by this overlay.\r\n  });\r\n\r\n\r\n  // @factory L.videoOverlay(video: String|Array|HTMLVideoElement, bounds: LatLngBounds, options?: VideoOverlay options)\r\n  // Instantiates an image overlay object given the URL of the video (or array of URLs, or even a video element) and the\r\n  // geographical bounds it is tied to.\r\n\r\n  function videoOverlay(video, bounds, options) {\r\n  \treturn new VideoOverlay(video, bounds, options);\r\n  }\n\n  /*\n   * @class SVGOverlay\n   * @aka L.SVGOverlay\n   * @inherits ImageOverlay\n   *\n   * Used to load, display and provide DOM access to an SVG file over specific bounds of the map. Extends `ImageOverlay`.\n   *\n   * An SVG overlay uses the [`<svg>`](https://developer.mozilla.org/docs/Web/SVG/Element/svg) element.\n   *\n   * @example\n   *\n   * ```js\n   * var svgElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n   * svgElement.setAttribute('xmlns', \"http://www.w3.org/2000/svg\");\n   * svgElement.setAttribute('viewBox', \"0 0 200 200\");\n   * svgElement.innerHTML = '<rect width=\"200\" height=\"200\"/><rect x=\"75\" y=\"23\" width=\"50\" height=\"50\" style=\"fill:red\"/><rect x=\"75\" y=\"123\" width=\"50\" height=\"50\" style=\"fill:#0013ff\"/>';\n   * var svgElementBounds = [ [ 32, -130 ], [ 13, -100 ] ];\n   * L.svgOverlay(svgElement, svgElementBounds).addTo(map);\n   * ```\n   */\n\n  var SVGOverlay = ImageOverlay.extend({\n  \t_initImage: function () {\n  \t\tvar el = this._image = this._url;\n\n  \t\taddClass(el, 'leaflet-image-layer');\n  \t\tif (this._zoomAnimated) { addClass(el, 'leaflet-zoom-animated'); }\n  \t\tif (this.options.className) { addClass(el, this.options.className); }\n\n  \t\tel.onselectstart = falseFn;\n  \t\tel.onmousemove = falseFn;\n  \t}\n\n  \t// @method getElement(): SVGElement\n  \t// Returns the instance of [`SVGElement`](https://developer.mozilla.org/docs/Web/API/SVGElement)\n  \t// used by this overlay.\n  });\n\n\n  // @factory L.svgOverlay(svg: String|SVGElement, bounds: LatLngBounds, options?: SVGOverlay options)\n  // Instantiates an image overlay object given an SVG element and the geographical bounds it is tied to.\n  // A viewBox attribute is required on the SVG element to zoom in and out properly.\n\n  function svgOverlay(el, bounds, options) {\n  \treturn new SVGOverlay(el, bounds, options);\n  }\n\n  /*\r\n   * @class DivOverlay\r\n   * @inherits Layer\r\n   * @aka L.DivOverlay\r\n   * Base model for L.Popup and L.Tooltip. Inherit from it for custom popup like plugins.\r\n   */\r\n\r\n  // @namespace DivOverlay\r\n  var DivOverlay = Layer.extend({\r\n\r\n  \t// @section\r\n  \t// @aka DivOverlay options\r\n  \toptions: {\r\n  \t\t// @option offset: Point = Point(0, 7)\r\n  \t\t// The offset of the popup position. Useful to control the anchor\r\n  \t\t// of the popup when opening it on some overlays.\r\n  \t\toffset: [0, 7],\r\n\r\n  \t\t// @option className: String = ''\r\n  \t\t// A custom CSS class name to assign to the popup.\r\n  \t\tclassName: '',\r\n\r\n  \t\t// @option pane: String = 'popupPane'\r\n  \t\t// `Map pane` where the popup will be added.\r\n  \t\tpane: 'popupPane'\r\n  \t},\r\n\r\n  \tinitialize: function (options, source) {\r\n  \t\tsetOptions(this, options);\r\n\r\n  \t\tthis._source = source;\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n  \t\tthis._zoomAnimated = map._zoomAnimated;\r\n\r\n  \t\tif (!this._container) {\r\n  \t\t\tthis._initLayout();\r\n  \t\t}\r\n\r\n  \t\tif (map._fadeAnimated) {\r\n  \t\t\tsetOpacity(this._container, 0);\r\n  \t\t}\r\n\r\n  \t\tclearTimeout(this._removeTimeout);\r\n  \t\tthis.getPane().appendChild(this._container);\r\n  \t\tthis.update();\r\n\r\n  \t\tif (map._fadeAnimated) {\r\n  \t\t\tsetOpacity(this._container, 1);\r\n  \t\t}\r\n\r\n  \t\tthis.bringToFront();\r\n  \t},\r\n\r\n  \tonRemove: function (map) {\r\n  \t\tif (map._fadeAnimated) {\r\n  \t\t\tsetOpacity(this._container, 0);\r\n  \t\t\tthis._removeTimeout = setTimeout(bind(remove, undefined, this._container), 200);\r\n  \t\t} else {\r\n  \t\t\tremove(this._container);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @namespace Popup\r\n  \t// @method getLatLng: LatLng\r\n  \t// Returns the geographical point of popup.\r\n  \tgetLatLng: function () {\r\n  \t\treturn this._latlng;\r\n  \t},\r\n\r\n  \t// @method setLatLng(latlng: LatLng): this\r\n  \t// Sets the geographical point where the popup will open.\r\n  \tsetLatLng: function (latlng) {\r\n  \t\tthis._latlng = toLatLng(latlng);\r\n  \t\tif (this._map) {\r\n  \t\t\tthis._updatePosition();\r\n  \t\t\tthis._adjustPan();\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method getContent: String|HTMLElement\r\n  \t// Returns the content of the popup.\r\n  \tgetContent: function () {\r\n  \t\treturn this._content;\r\n  \t},\r\n\r\n  \t// @method setContent(htmlContent: String|HTMLElement|Function): this\r\n  \t// Sets the HTML content of the popup. If a function is passed the source layer will be passed to the function. The function should return a `String` or `HTMLElement` to be used in the popup.\r\n  \tsetContent: function (content) {\r\n  \t\tthis._content = content;\r\n  \t\tthis.update();\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method getElement: String|HTMLElement\r\n  \t// Returns the HTML container of the popup.\r\n  \tgetElement: function () {\r\n  \t\treturn this._container;\r\n  \t},\r\n\r\n  \t// @method update: null\r\n  \t// Updates the popup content, layout and position. Useful for updating the popup after something inside changed, e.g. image loaded.\r\n  \tupdate: function () {\r\n  \t\tif (!this._map) { return; }\r\n\r\n  \t\tthis._container.style.visibility = 'hidden';\r\n\r\n  \t\tthis._updateContent();\r\n  \t\tthis._updateLayout();\r\n  \t\tthis._updatePosition();\r\n\r\n  \t\tthis._container.style.visibility = '';\r\n\r\n  \t\tthis._adjustPan();\r\n  \t},\r\n\r\n  \tgetEvents: function () {\r\n  \t\tvar events = {\r\n  \t\t\tzoom: this._updatePosition,\r\n  \t\t\tviewreset: this._updatePosition\r\n  \t\t};\r\n\r\n  \t\tif (this._zoomAnimated) {\r\n  \t\t\tevents.zoomanim = this._animateZoom;\r\n  \t\t}\r\n  \t\treturn events;\r\n  \t},\r\n\r\n  \t// @method isOpen: Boolean\r\n  \t// Returns `true` when the popup is visible on the map.\r\n  \tisOpen: function () {\r\n  \t\treturn !!this._map && this._map.hasLayer(this);\r\n  \t},\r\n\r\n  \t// @method bringToFront: this\r\n  \t// Brings this popup in front of other popups (in the same map pane).\r\n  \tbringToFront: function () {\r\n  \t\tif (this._map) {\r\n  \t\t\ttoFront(this._container);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method bringToBack: this\r\n  \t// Brings this popup to the back of other popups (in the same map pane).\r\n  \tbringToBack: function () {\r\n  \t\tif (this._map) {\r\n  \t\t\ttoBack(this._container);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t_prepareOpen: function (parent, layer, latlng) {\r\n  \t\tif (!(layer instanceof Layer)) {\r\n  \t\t\tlatlng = layer;\r\n  \t\t\tlayer = parent;\r\n  \t\t}\r\n\r\n  \t\tif (layer instanceof FeatureGroup) {\r\n  \t\t\tfor (var id in parent._layers) {\r\n  \t\t\t\tlayer = parent._layers[id];\r\n  \t\t\t\tbreak;\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tif (!latlng) {\r\n  \t\t\tif (layer.getCenter) {\r\n  \t\t\t\tlatlng = layer.getCenter();\r\n  \t\t\t} else if (layer.getLatLng) {\r\n  \t\t\t\tlatlng = layer.getLatLng();\r\n  \t\t\t} else {\r\n  \t\t\t\tthrow new Error('Unable to get source layer LatLng.');\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\t// set overlay source to this layer\r\n  \t\tthis._source = layer;\r\n\r\n  \t\t// update the overlay (content, layout, ect...)\r\n  \t\tthis.update();\r\n\r\n  \t\treturn latlng;\r\n  \t},\r\n\r\n  \t_updateContent: function () {\r\n  \t\tif (!this._content) { return; }\r\n\r\n  \t\tvar node = this._contentNode;\r\n  \t\tvar content = (typeof this._content === 'function') ? this._content(this._source || this) : this._content;\r\n\r\n  \t\tif (typeof content === 'string') {\r\n  \t\t\tnode.innerHTML = content;\r\n  \t\t} else {\r\n  \t\t\twhile (node.hasChildNodes()) {\r\n  \t\t\t\tnode.removeChild(node.firstChild);\r\n  \t\t\t}\r\n  \t\t\tnode.appendChild(content);\r\n  \t\t}\r\n  \t\tthis.fire('contentupdate');\r\n  \t},\r\n\r\n  \t_updatePosition: function () {\r\n  \t\tif (!this._map) { return; }\r\n\r\n  \t\tvar pos = this._map.latLngToLayerPoint(this._latlng),\r\n  \t\t    offset = toPoint(this.options.offset),\r\n  \t\t    anchor = this._getAnchor();\r\n\r\n  \t\tif (this._zoomAnimated) {\r\n  \t\t\tsetPosition(this._container, pos.add(anchor));\r\n  \t\t} else {\r\n  \t\t\toffset = offset.add(pos).add(anchor);\r\n  \t\t}\r\n\r\n  \t\tvar bottom = this._containerBottom = -offset.y,\r\n  \t\t    left = this._containerLeft = -Math.round(this._containerWidth / 2) + offset.x;\r\n\r\n  \t\t// bottom position the popup in case the height of the popup changes (images loading etc)\r\n  \t\tthis._container.style.bottom = bottom + 'px';\r\n  \t\tthis._container.style.left = left + 'px';\r\n  \t},\r\n\r\n  \t_getAnchor: function () {\r\n  \t\treturn [0, 0];\r\n  \t}\r\n\r\n  });\n\n  /*\r\n   * @class Popup\r\n   * @inherits DivOverlay\r\n   * @aka L.Popup\r\n   * Used to open popups in certain places of the map. Use [Map.openPopup](#map-openpopup) to\r\n   * open popups while making sure that only one popup is open at one time\r\n   * (recommended for usability), or use [Map.addLayer](#map-addlayer) to open as many as you want.\r\n   *\r\n   * @example\r\n   *\r\n   * If you want to just bind a popup to marker click and then open it, it's really easy:\r\n   *\r\n   * ```js\r\n   * marker.bindPopup(popupContent).openPopup();\r\n   * ```\r\n   * Path overlays like polylines also have a `bindPopup` method.\r\n   * Here's a more complicated way to open a popup on a map:\r\n   *\r\n   * ```js\r\n   * var popup = L.popup()\r\n   * \t.setLatLng(latlng)\r\n   * \t.setContent('<p>Hello world!<br />This is a nice popup.</p>')\r\n   * \t.openOn(map);\r\n   * ```\r\n   */\r\n\r\n\r\n  // @namespace Popup\r\n  var Popup = DivOverlay.extend({\r\n\r\n  \t// @section\r\n  \t// @aka Popup options\r\n  \toptions: {\r\n  \t\t// @option maxWidth: Number = 300\r\n  \t\t// Max width of the popup, in pixels.\r\n  \t\tmaxWidth: 300,\r\n\r\n  \t\t// @option minWidth: Number = 50\r\n  \t\t// Min width of the popup, in pixels.\r\n  \t\tminWidth: 50,\r\n\r\n  \t\t// @option maxHeight: Number = null\r\n  \t\t// If set, creates a scrollable container of the given height\r\n  \t\t// inside a popup if its content exceeds it.\r\n  \t\tmaxHeight: null,\r\n\r\n  \t\t// @option autoPan: Boolean = true\r\n  \t\t// Set it to `false` if you don't want the map to do panning animation\r\n  \t\t// to fit the opened popup.\r\n  \t\tautoPan: true,\r\n\r\n  \t\t// @option autoPanPaddingTopLeft: Point = null\r\n  \t\t// The margin between the popup and the top left corner of the map\r\n  \t\t// view after autopanning was performed.\r\n  \t\tautoPanPaddingTopLeft: null,\r\n\r\n  \t\t// @option autoPanPaddingBottomRight: Point = null\r\n  \t\t// The margin between the popup and the bottom right corner of the map\r\n  \t\t// view after autopanning was performed.\r\n  \t\tautoPanPaddingBottomRight: null,\r\n\r\n  \t\t// @option autoPanPadding: Point = Point(5, 5)\r\n  \t\t// Equivalent of setting both top left and bottom right autopan padding to the same value.\r\n  \t\tautoPanPadding: [5, 5],\r\n\r\n  \t\t// @option keepInView: Boolean = false\r\n  \t\t// Set it to `true` if you want to prevent users from panning the popup\r\n  \t\t// off of the screen while it is open.\r\n  \t\tkeepInView: false,\r\n\r\n  \t\t// @option closeButton: Boolean = true\r\n  \t\t// Controls the presence of a close button in the popup.\r\n  \t\tcloseButton: true,\r\n\r\n  \t\t// @option autoClose: Boolean = true\r\n  \t\t// Set it to `false` if you want to override the default behavior of\r\n  \t\t// the popup closing when another popup is opened.\r\n  \t\tautoClose: true,\r\n\r\n  \t\t// @option closeOnEscapeKey: Boolean = true\r\n  \t\t// Set it to `false` if you want to override the default behavior of\r\n  \t\t// the ESC key for closing of the popup.\r\n  \t\tcloseOnEscapeKey: true,\r\n\r\n  \t\t// @option closeOnClick: Boolean = *\r\n  \t\t// Set it if you want to override the default behavior of the popup closing when user clicks\r\n  \t\t// on the map. Defaults to the map's [`closePopupOnClick`](#map-closepopuponclick) option.\r\n\r\n  \t\t// @option className: String = ''\r\n  \t\t// A custom CSS class name to assign to the popup.\r\n  \t\tclassName: ''\r\n  \t},\r\n\r\n  \t// @namespace Popup\r\n  \t// @method openOn(map: Map): this\r\n  \t// Adds the popup to the map and closes the previous one. The same as `map.openPopup(popup)`.\r\n  \topenOn: function (map) {\r\n  \t\tmap.openPopup(this);\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n  \t\tDivOverlay.prototype.onAdd.call(this, map);\r\n\r\n  \t\t// @namespace Map\r\n  \t\t// @section Popup events\r\n  \t\t// @event popupopen: PopupEvent\r\n  \t\t// Fired when a popup is opened in the map\r\n  \t\tmap.fire('popupopen', {popup: this});\r\n\r\n  \t\tif (this._source) {\r\n  \t\t\t// @namespace Layer\r\n  \t\t\t// @section Popup events\r\n  \t\t\t// @event popupopen: PopupEvent\r\n  \t\t\t// Fired when a popup bound to this layer is opened\r\n  \t\t\tthis._source.fire('popupopen', {popup: this}, true);\r\n  \t\t\t// For non-path layers, we toggle the popup when clicking\r\n  \t\t\t// again the layer, so prevent the map to reopen it.\r\n  \t\t\tif (!(this._source instanceof Path)) {\r\n  \t\t\t\tthis._source.on('preclick', stopPropagation);\r\n  \t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n  \tonRemove: function (map) {\r\n  \t\tDivOverlay.prototype.onRemove.call(this, map);\r\n\r\n  \t\t// @namespace Map\r\n  \t\t// @section Popup events\r\n  \t\t// @event popupclose: PopupEvent\r\n  \t\t// Fired when a popup in the map is closed\r\n  \t\tmap.fire('popupclose', {popup: this});\r\n\r\n  \t\tif (this._source) {\r\n  \t\t\t// @namespace Layer\r\n  \t\t\t// @section Popup events\r\n  \t\t\t// @event popupclose: PopupEvent\r\n  \t\t\t// Fired when a popup bound to this layer is closed\r\n  \t\t\tthis._source.fire('popupclose', {popup: this}, true);\r\n  \t\t\tif (!(this._source instanceof Path)) {\r\n  \t\t\t\tthis._source.off('preclick', stopPropagation);\r\n  \t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n  \tgetEvents: function () {\r\n  \t\tvar events = DivOverlay.prototype.getEvents.call(this);\r\n\r\n  \t\tif (this.options.closeOnClick !== undefined ? this.options.closeOnClick : this._map.options.closePopupOnClick) {\r\n  \t\t\tevents.preclick = this._close;\r\n  \t\t}\r\n\r\n  \t\tif (this.options.keepInView) {\r\n  \t\t\tevents.moveend = this._adjustPan;\r\n  \t\t}\r\n\r\n  \t\treturn events;\r\n  \t},\r\n\r\n  \t_close: function () {\r\n  \t\tif (this._map) {\r\n  \t\t\tthis._map.closePopup(this);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_initLayout: function () {\r\n  \t\tvar prefix = 'leaflet-popup',\r\n  \t\t    container = this._container = create$1('div',\r\n  \t\t\tprefix + ' ' + (this.options.className || '') +\r\n  \t\t\t' leaflet-zoom-animated');\r\n\r\n  \t\tvar wrapper = this._wrapper = create$1('div', prefix + '-content-wrapper', container);\r\n  \t\tthis._contentNode = create$1('div', prefix + '-content', wrapper);\r\n\r\n  \t\tdisableClickPropagation(container);\r\n  \t\tdisableScrollPropagation(this._contentNode);\r\n  \t\ton(container, 'contextmenu', stopPropagation);\r\n\r\n  \t\tthis._tipContainer = create$1('div', prefix + '-tip-container', container);\r\n  \t\tthis._tip = create$1('div', prefix + '-tip', this._tipContainer);\r\n\r\n  \t\tif (this.options.closeButton) {\r\n  \t\t\tvar closeButton = this._closeButton = create$1('a', prefix + '-close-button', container);\r\n  \t\t\tcloseButton.href = '#close';\r\n  \t\t\tcloseButton.innerHTML = '&#215;';\r\n\r\n  \t\t\ton(closeButton, 'click', this._onCloseButtonClick, this);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_updateLayout: function () {\r\n  \t\tvar container = this._contentNode,\r\n  \t\t    style = container.style;\r\n\r\n  \t\tstyle.width = '';\r\n  \t\tstyle.whiteSpace = 'nowrap';\r\n\r\n  \t\tvar width = container.offsetWidth;\r\n  \t\twidth = Math.min(width, this.options.maxWidth);\r\n  \t\twidth = Math.max(width, this.options.minWidth);\r\n\r\n  \t\tstyle.width = (width + 1) + 'px';\r\n  \t\tstyle.whiteSpace = '';\r\n\r\n  \t\tstyle.height = '';\r\n\r\n  \t\tvar height = container.offsetHeight,\r\n  \t\t    maxHeight = this.options.maxHeight,\r\n  \t\t    scrolledClass = 'leaflet-popup-scrolled';\r\n\r\n  \t\tif (maxHeight && height > maxHeight) {\r\n  \t\t\tstyle.height = maxHeight + 'px';\r\n  \t\t\taddClass(container, scrolledClass);\r\n  \t\t} else {\r\n  \t\t\tremoveClass(container, scrolledClass);\r\n  \t\t}\r\n\r\n  \t\tthis._containerWidth = this._container.offsetWidth;\r\n  \t},\r\n\r\n  \t_animateZoom: function (e) {\r\n  \t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center),\r\n  \t\t    anchor = this._getAnchor();\r\n  \t\tsetPosition(this._container, pos.add(anchor));\r\n  \t},\r\n\r\n  \t_adjustPan: function () {\r\n  \t\tif (!this.options.autoPan) { return; }\r\n  \t\tif (this._map._panAnim) { this._map._panAnim.stop(); }\r\n\r\n  \t\tvar map = this._map,\r\n  \t\t    marginBottom = parseInt(getStyle(this._container, 'marginBottom'), 10) || 0,\r\n  \t\t    containerHeight = this._container.offsetHeight + marginBottom,\r\n  \t\t    containerWidth = this._containerWidth,\r\n  \t\t    layerPos = new Point(this._containerLeft, -containerHeight - this._containerBottom);\r\n\r\n  \t\tlayerPos._add(getPosition(this._container));\r\n\r\n  \t\tvar containerPos = map.layerPointToContainerPoint(layerPos),\r\n  \t\t    padding = toPoint(this.options.autoPanPadding),\r\n  \t\t    paddingTL = toPoint(this.options.autoPanPaddingTopLeft || padding),\r\n  \t\t    paddingBR = toPoint(this.options.autoPanPaddingBottomRight || padding),\r\n  \t\t    size = map.getSize(),\r\n  \t\t    dx = 0,\r\n  \t\t    dy = 0;\r\n\r\n  \t\tif (containerPos.x + containerWidth + paddingBR.x > size.x) { // right\r\n  \t\t\tdx = containerPos.x + containerWidth - size.x + paddingBR.x;\r\n  \t\t}\r\n  \t\tif (containerPos.x - dx - paddingTL.x < 0) { // left\r\n  \t\t\tdx = containerPos.x - paddingTL.x;\r\n  \t\t}\r\n  \t\tif (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom\r\n  \t\t\tdy = containerPos.y + containerHeight - size.y + paddingBR.y;\r\n  \t\t}\r\n  \t\tif (containerPos.y - dy - paddingTL.y < 0) { // top\r\n  \t\t\tdy = containerPos.y - paddingTL.y;\r\n  \t\t}\r\n\r\n  \t\t// @namespace Map\r\n  \t\t// @section Popup events\r\n  \t\t// @event autopanstart: Event\r\n  \t\t// Fired when the map starts autopanning when opening a popup.\r\n  \t\tif (dx || dy) {\r\n  \t\t\tmap\r\n  \t\t\t    .fire('autopanstart')\r\n  \t\t\t    .panBy([dx, dy]);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_onCloseButtonClick: function (e) {\r\n  \t\tthis._close();\r\n  \t\tstop(e);\r\n  \t},\r\n\r\n  \t_getAnchor: function () {\r\n  \t\t// Where should we anchor the popup on the source layer?\r\n  \t\treturn toPoint(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]);\r\n  \t}\r\n\r\n  });\r\n\r\n  // @namespace Popup\r\n  // @factory L.popup(options?: Popup options, source?: Layer)\r\n  // Instantiates a `Popup` object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the popup with a reference to the Layer to which it refers.\r\n  var popup = function (options, source) {\r\n  \treturn new Popup(options, source);\r\n  };\r\n\r\n\r\n  /* @namespace Map\r\n   * @section Interaction Options\r\n   * @option closePopupOnClick: Boolean = true\r\n   * Set it to `false` if you don't want popups to close when user clicks the map.\r\n   */\r\n  Map.mergeOptions({\r\n  \tclosePopupOnClick: true\r\n  });\r\n\r\n\r\n  // @namespace Map\r\n  // @section Methods for Layers and Controls\r\n  Map.include({\r\n  \t// @method openPopup(popup: Popup): this\r\n  \t// Opens the specified popup while closing the previously opened (to make sure only one is opened at one time for usability).\r\n  \t// @alternative\r\n  \t// @method openPopup(content: String|HTMLElement, latlng: LatLng, options?: Popup options): this\r\n  \t// Creates a popup with the specified content and options and opens it in the given point on a map.\r\n  \topenPopup: function (popup, latlng, options) {\r\n  \t\tif (!(popup instanceof Popup)) {\r\n  \t\t\tpopup = new Popup(options).setContent(popup);\r\n  \t\t}\r\n\r\n  \t\tif (latlng) {\r\n  \t\t\tpopup.setLatLng(latlng);\r\n  \t\t}\r\n\r\n  \t\tif (this.hasLayer(popup)) {\r\n  \t\t\treturn this;\r\n  \t\t}\r\n\r\n  \t\tif (this._popup && this._popup.options.autoClose) {\r\n  \t\t\tthis.closePopup();\r\n  \t\t}\r\n\r\n  \t\tthis._popup = popup;\r\n  \t\treturn this.addLayer(popup);\r\n  \t},\r\n\r\n  \t// @method closePopup(popup?: Popup): this\r\n  \t// Closes the popup previously opened with [openPopup](#map-openpopup) (or the given one).\r\n  \tclosePopup: function (popup) {\r\n  \t\tif (!popup || popup === this._popup) {\r\n  \t\t\tpopup = this._popup;\r\n  \t\t\tthis._popup = null;\r\n  \t\t}\r\n  \t\tif (popup) {\r\n  \t\t\tthis.removeLayer(popup);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t}\r\n  });\r\n\r\n  /*\r\n   * @namespace Layer\r\n   * @section Popup methods example\r\n   *\r\n   * All layers share a set of methods convenient for binding popups to it.\r\n   *\r\n   * ```js\r\n   * var layer = L.Polygon(latlngs).bindPopup('Hi There!').addTo(map);\r\n   * layer.openPopup();\r\n   * layer.closePopup();\r\n   * ```\r\n   *\r\n   * Popups will also be automatically opened when the layer is clicked on and closed when the layer is removed from the map or another popup is opened.\r\n   */\r\n\r\n  // @section Popup methods\r\n  Layer.include({\r\n\r\n  \t// @method bindPopup(content: String|HTMLElement|Function|Popup, options?: Popup options): this\r\n  \t// Binds a popup to the layer with the passed `content` and sets up the\r\n  \t// necessary event listeners. If a `Function` is passed it will receive\r\n  \t// the layer as the first argument and should return a `String` or `HTMLElement`.\r\n  \tbindPopup: function (content, options) {\r\n\r\n  \t\tif (content instanceof Popup) {\r\n  \t\t\tsetOptions(content, options);\r\n  \t\t\tthis._popup = content;\r\n  \t\t\tcontent._source = this;\r\n  \t\t} else {\r\n  \t\t\tif (!this._popup || options) {\r\n  \t\t\t\tthis._popup = new Popup(options, this);\r\n  \t\t\t}\r\n  \t\t\tthis._popup.setContent(content);\r\n  \t\t}\r\n\r\n  \t\tif (!this._popupHandlersAdded) {\r\n  \t\t\tthis.on({\r\n  \t\t\t\tclick: this._openPopup,\r\n  \t\t\t\tkeypress: this._onKeyPress,\r\n  \t\t\t\tremove: this.closePopup,\r\n  \t\t\t\tmove: this._movePopup\r\n  \t\t\t});\r\n  \t\t\tthis._popupHandlersAdded = true;\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method unbindPopup(): this\r\n  \t// Removes the popup previously bound with `bindPopup`.\r\n  \tunbindPopup: function () {\r\n  \t\tif (this._popup) {\r\n  \t\t\tthis.off({\r\n  \t\t\t\tclick: this._openPopup,\r\n  \t\t\t\tkeypress: this._onKeyPress,\r\n  \t\t\t\tremove: this.closePopup,\r\n  \t\t\t\tmove: this._movePopup\r\n  \t\t\t});\r\n  \t\t\tthis._popupHandlersAdded = false;\r\n  \t\t\tthis._popup = null;\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method openPopup(latlng?: LatLng): this\r\n  \t// Opens the bound popup at the specified `latlng` or at the default popup anchor if no `latlng` is passed.\r\n  \topenPopup: function (layer, latlng) {\r\n  \t\tif (this._popup && this._map) {\r\n  \t\t\tlatlng = this._popup._prepareOpen(this, layer, latlng);\r\n\r\n  \t\t\t// open the popup on the map\r\n  \t\t\tthis._map.openPopup(this._popup, latlng);\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method closePopup(): this\r\n  \t// Closes the popup bound to this layer if it is open.\r\n  \tclosePopup: function () {\r\n  \t\tif (this._popup) {\r\n  \t\t\tthis._popup._close();\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method togglePopup(): this\r\n  \t// Opens or closes the popup bound to this layer depending on its current state.\r\n  \ttogglePopup: function (target) {\r\n  \t\tif (this._popup) {\r\n  \t\t\tif (this._popup._map) {\r\n  \t\t\t\tthis.closePopup();\r\n  \t\t\t} else {\r\n  \t\t\t\tthis.openPopup(target);\r\n  \t\t\t}\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method isPopupOpen(): boolean\r\n  \t// Returns `true` if the popup bound to this layer is currently open.\r\n  \tisPopupOpen: function () {\r\n  \t\treturn (this._popup ? this._popup.isOpen() : false);\r\n  \t},\r\n\r\n  \t// @method setPopupContent(content: String|HTMLElement|Popup): this\r\n  \t// Sets the content of the popup bound to this layer.\r\n  \tsetPopupContent: function (content) {\r\n  \t\tif (this._popup) {\r\n  \t\t\tthis._popup.setContent(content);\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method getPopup(): Popup\r\n  \t// Returns the popup bound to this layer.\r\n  \tgetPopup: function () {\r\n  \t\treturn this._popup;\r\n  \t},\r\n\r\n  \t_openPopup: function (e) {\r\n  \t\tvar layer = e.layer || e.target;\r\n\r\n  \t\tif (!this._popup) {\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\tif (!this._map) {\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\t// prevent map click\r\n  \t\tstop(e);\r\n\r\n  \t\t// if this inherits from Path its a vector and we can just\r\n  \t\t// open the popup at the new location\r\n  \t\tif (layer instanceof Path) {\r\n  \t\t\tthis.openPopup(e.layer || e.target, e.latlng);\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\t// otherwise treat it like a marker and figure out\r\n  \t\t// if we should toggle it open/closed\r\n  \t\tif (this._map.hasLayer(this._popup) && this._popup._source === layer) {\r\n  \t\t\tthis.closePopup();\r\n  \t\t} else {\r\n  \t\t\tthis.openPopup(layer, e.latlng);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_movePopup: function (e) {\r\n  \t\tthis._popup.setLatLng(e.latlng);\r\n  \t},\r\n\r\n  \t_onKeyPress: function (e) {\r\n  \t\tif (e.originalEvent.keyCode === 13) {\r\n  \t\t\tthis._openPopup(e);\r\n  \t\t}\r\n  \t}\r\n  });\n\n  /*\n   * @class Tooltip\n   * @inherits DivOverlay\n   * @aka L.Tooltip\n   * Used to display small texts on top of map layers.\n   *\n   * @example\n   *\n   * ```js\n   * marker.bindTooltip(\"my tooltip text\").openTooltip();\n   * ```\n   * Note about tooltip offset. Leaflet takes two options in consideration\n   * for computing tooltip offsetting:\n   * - the `offset` Tooltip option: it defaults to [0, 0], and it's specific to one tooltip.\n   *   Add a positive x offset to move the tooltip to the right, and a positive y offset to\n   *   move it to the bottom. Negatives will move to the left and top.\n   * - the `tooltipAnchor` Icon option: this will only be considered for Marker. You\n   *   should adapt this value if you use a custom icon.\n   */\n\n\n  // @namespace Tooltip\n  var Tooltip = DivOverlay.extend({\n\n  \t// @section\n  \t// @aka Tooltip options\n  \toptions: {\n  \t\t// @option pane: String = 'tooltipPane'\n  \t\t// `Map pane` where the tooltip will be added.\n  \t\tpane: 'tooltipPane',\n\n  \t\t// @option offset: Point = Point(0, 0)\n  \t\t// Optional offset of the tooltip position.\n  \t\toffset: [0, 0],\n\n  \t\t// @option direction: String = 'auto'\n  \t\t// Direction where to open the tooltip. Possible values are: `right`, `left`,\n  \t\t// `top`, `bottom`, `center`, `auto`.\n  \t\t// `auto` will dynamically switch between `right` and `left` according to the tooltip\n  \t\t// position on the map.\n  \t\tdirection: 'auto',\n\n  \t\t// @option permanent: Boolean = false\n  \t\t// Whether to open the tooltip permanently or only on mouseover.\n  \t\tpermanent: false,\n\n  \t\t// @option sticky: Boolean = false\n  \t\t// If true, the tooltip will follow the mouse instead of being fixed at the feature center.\n  \t\tsticky: false,\n\n  \t\t// @option interactive: Boolean = false\n  \t\t// If true, the tooltip will listen to the feature events.\n  \t\tinteractive: false,\n\n  \t\t// @option opacity: Number = 0.9\n  \t\t// Tooltip container opacity.\n  \t\topacity: 0.9\n  \t},\n\n  \tonAdd: function (map) {\n  \t\tDivOverlay.prototype.onAdd.call(this, map);\n  \t\tthis.setOpacity(this.options.opacity);\n\n  \t\t// @namespace Map\n  \t\t// @section Tooltip events\n  \t\t// @event tooltipopen: TooltipEvent\n  \t\t// Fired when a tooltip is opened in the map.\n  \t\tmap.fire('tooltipopen', {tooltip: this});\n\n  \t\tif (this._source) {\n  \t\t\t// @namespace Layer\n  \t\t\t// @section Tooltip events\n  \t\t\t// @event tooltipopen: TooltipEvent\n  \t\t\t// Fired when a tooltip bound to this layer is opened.\n  \t\t\tthis._source.fire('tooltipopen', {tooltip: this}, true);\n  \t\t}\n  \t},\n\n  \tonRemove: function (map) {\n  \t\tDivOverlay.prototype.onRemove.call(this, map);\n\n  \t\t// @namespace Map\n  \t\t// @section Tooltip events\n  \t\t// @event tooltipclose: TooltipEvent\n  \t\t// Fired when a tooltip in the map is closed.\n  \t\tmap.fire('tooltipclose', {tooltip: this});\n\n  \t\tif (this._source) {\n  \t\t\t// @namespace Layer\n  \t\t\t// @section Tooltip events\n  \t\t\t// @event tooltipclose: TooltipEvent\n  \t\t\t// Fired when a tooltip bound to this layer is closed.\n  \t\t\tthis._source.fire('tooltipclose', {tooltip: this}, true);\n  \t\t}\n  \t},\n\n  \tgetEvents: function () {\n  \t\tvar events = DivOverlay.prototype.getEvents.call(this);\n\n  \t\tif (touch && !this.options.permanent) {\n  \t\t\tevents.preclick = this._close;\n  \t\t}\n\n  \t\treturn events;\n  \t},\n\n  \t_close: function () {\n  \t\tif (this._map) {\n  \t\t\tthis._map.closeTooltip(this);\n  \t\t}\n  \t},\n\n  \t_initLayout: function () {\n  \t\tvar prefix = 'leaflet-tooltip',\n  \t\t    className = prefix + ' ' + (this.options.className || '') + ' leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');\n\n  \t\tthis._contentNode = this._container = create$1('div', className);\n  \t},\n\n  \t_updateLayout: function () {},\n\n  \t_adjustPan: function () {},\n\n  \t_setPosition: function (pos) {\n  \t\tvar subX, subY,\n  \t\t    map = this._map,\n  \t\t    container = this._container,\n  \t\t    centerPoint = map.latLngToContainerPoint(map.getCenter()),\n  \t\t    tooltipPoint = map.layerPointToContainerPoint(pos),\n  \t\t    direction = this.options.direction,\n  \t\t    tooltipWidth = container.offsetWidth,\n  \t\t    tooltipHeight = container.offsetHeight,\n  \t\t    offset = toPoint(this.options.offset),\n  \t\t    anchor = this._getAnchor();\n\n  \t\tif (direction === 'top') {\n  \t\t\tsubX = tooltipWidth / 2;\n  \t\t\tsubY = tooltipHeight;\n  \t\t} else if (direction === 'bottom') {\n  \t\t\tsubX = tooltipWidth / 2;\n  \t\t\tsubY = 0;\n  \t\t} else if (direction === 'center') {\n  \t\t\tsubX = tooltipWidth / 2;\n  \t\t\tsubY = tooltipHeight / 2;\n  \t\t} else if (direction === 'right') {\n  \t\t\tsubX = 0;\n  \t\t\tsubY = tooltipHeight / 2;\n  \t\t} else if (direction === 'left') {\n  \t\t\tsubX = tooltipWidth;\n  \t\t\tsubY = tooltipHeight / 2;\n  \t\t} else if (tooltipPoint.x < centerPoint.x) {\n  \t\t\tdirection = 'right';\n  \t\t\tsubX = 0;\n  \t\t\tsubY = tooltipHeight / 2;\n  \t\t} else {\n  \t\t\tdirection = 'left';\n  \t\t\tsubX = tooltipWidth + (offset.x + anchor.x) * 2;\n  \t\t\tsubY = tooltipHeight / 2;\n  \t\t}\n\n  \t\tpos = pos.subtract(toPoint(subX, subY, true)).add(offset).add(anchor);\n\n  \t\tremoveClass(container, 'leaflet-tooltip-right');\n  \t\tremoveClass(container, 'leaflet-tooltip-left');\n  \t\tremoveClass(container, 'leaflet-tooltip-top');\n  \t\tremoveClass(container, 'leaflet-tooltip-bottom');\n  \t\taddClass(container, 'leaflet-tooltip-' + direction);\n  \t\tsetPosition(container, pos);\n  \t},\n\n  \t_updatePosition: function () {\n  \t\tvar pos = this._map.latLngToLayerPoint(this._latlng);\n  \t\tthis._setPosition(pos);\n  \t},\n\n  \tsetOpacity: function (opacity) {\n  \t\tthis.options.opacity = opacity;\n\n  \t\tif (this._container) {\n  \t\t\tsetOpacity(this._container, opacity);\n  \t\t}\n  \t},\n\n  \t_animateZoom: function (e) {\n  \t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center);\n  \t\tthis._setPosition(pos);\n  \t},\n\n  \t_getAnchor: function () {\n  \t\t// Where should we anchor the tooltip on the source layer?\n  \t\treturn toPoint(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]);\n  \t}\n\n  });\n\n  // @namespace Tooltip\n  // @factory L.tooltip(options?: Tooltip options, source?: Layer)\n  // Instantiates a Tooltip object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the tooltip with a reference to the Layer to which it refers.\n  var tooltip = function (options, source) {\n  \treturn new Tooltip(options, source);\n  };\n\n  // @namespace Map\n  // @section Methods for Layers and Controls\n  Map.include({\n\n  \t// @method openTooltip(tooltip: Tooltip): this\n  \t// Opens the specified tooltip.\n  \t// @alternative\n  \t// @method openTooltip(content: String|HTMLElement, latlng: LatLng, options?: Tooltip options): this\n  \t// Creates a tooltip with the specified content and options and open it.\n  \topenTooltip: function (tooltip, latlng, options) {\n  \t\tif (!(tooltip instanceof Tooltip)) {\n  \t\t\ttooltip = new Tooltip(options).setContent(tooltip);\n  \t\t}\n\n  \t\tif (latlng) {\n  \t\t\ttooltip.setLatLng(latlng);\n  \t\t}\n\n  \t\tif (this.hasLayer(tooltip)) {\n  \t\t\treturn this;\n  \t\t}\n\n  \t\treturn this.addLayer(tooltip);\n  \t},\n\n  \t// @method closeTooltip(tooltip?: Tooltip): this\n  \t// Closes the tooltip given as parameter.\n  \tcloseTooltip: function (tooltip) {\n  \t\tif (tooltip) {\n  \t\t\tthis.removeLayer(tooltip);\n  \t\t}\n  \t\treturn this;\n  \t}\n\n  });\n\n  /*\n   * @namespace Layer\n   * @section Tooltip methods example\n   *\n   * All layers share a set of methods convenient for binding tooltips to it.\n   *\n   * ```js\n   * var layer = L.Polygon(latlngs).bindTooltip('Hi There!').addTo(map);\n   * layer.openTooltip();\n   * layer.closeTooltip();\n   * ```\n   */\n\n  // @section Tooltip methods\n  Layer.include({\n\n  \t// @method bindTooltip(content: String|HTMLElement|Function|Tooltip, options?: Tooltip options): this\n  \t// Binds a tooltip to the layer with the passed `content` and sets up the\n  \t// necessary event listeners. If a `Function` is passed it will receive\n  \t// the layer as the first argument and should return a `String` or `HTMLElement`.\n  \tbindTooltip: function (content, options) {\n\n  \t\tif (content instanceof Tooltip) {\n  \t\t\tsetOptions(content, options);\n  \t\t\tthis._tooltip = content;\n  \t\t\tcontent._source = this;\n  \t\t} else {\n  \t\t\tif (!this._tooltip || options) {\n  \t\t\t\tthis._tooltip = new Tooltip(options, this);\n  \t\t\t}\n  \t\t\tthis._tooltip.setContent(content);\n\n  \t\t}\n\n  \t\tthis._initTooltipInteractions();\n\n  \t\tif (this._tooltip.options.permanent && this._map && this._map.hasLayer(this)) {\n  \t\t\tthis.openTooltip();\n  \t\t}\n\n  \t\treturn this;\n  \t},\n\n  \t// @method unbindTooltip(): this\n  \t// Removes the tooltip previously bound with `bindTooltip`.\n  \tunbindTooltip: function () {\n  \t\tif (this._tooltip) {\n  \t\t\tthis._initTooltipInteractions(true);\n  \t\t\tthis.closeTooltip();\n  \t\t\tthis._tooltip = null;\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t_initTooltipInteractions: function (remove$$1) {\n  \t\tif (!remove$$1 && this._tooltipHandlersAdded) { return; }\n  \t\tvar onOff = remove$$1 ? 'off' : 'on',\n  \t\t    events = {\n  \t\t\tremove: this.closeTooltip,\n  \t\t\tmove: this._moveTooltip\n  \t\t    };\n  \t\tif (!this._tooltip.options.permanent) {\n  \t\t\tevents.mouseover = this._openTooltip;\n  \t\t\tevents.mouseout = this.closeTooltip;\n  \t\t\tif (this._tooltip.options.sticky) {\n  \t\t\t\tevents.mousemove = this._moveTooltip;\n  \t\t\t}\n  \t\t\tif (touch) {\n  \t\t\t\tevents.click = this._openTooltip;\n  \t\t\t}\n  \t\t} else {\n  \t\t\tevents.add = this._openTooltip;\n  \t\t}\n  \t\tthis[onOff](events);\n  \t\tthis._tooltipHandlersAdded = !remove$$1;\n  \t},\n\n  \t// @method openTooltip(latlng?: LatLng): this\n  \t// Opens the bound tooltip at the specified `latlng` or at the default tooltip anchor if no `latlng` is passed.\n  \topenTooltip: function (layer, latlng) {\n  \t\tif (this._tooltip && this._map) {\n  \t\t\tlatlng = this._tooltip._prepareOpen(this, layer, latlng);\n\n  \t\t\t// open the tooltip on the map\n  \t\t\tthis._map.openTooltip(this._tooltip, latlng);\n\n  \t\t\t// Tooltip container may not be defined if not permanent and never\n  \t\t\t// opened.\n  \t\t\tif (this._tooltip.options.interactive && this._tooltip._container) {\n  \t\t\t\taddClass(this._tooltip._container, 'leaflet-clickable');\n  \t\t\t\tthis.addInteractiveTarget(this._tooltip._container);\n  \t\t\t}\n  \t\t}\n\n  \t\treturn this;\n  \t},\n\n  \t// @method closeTooltip(): this\n  \t// Closes the tooltip bound to this layer if it is open.\n  \tcloseTooltip: function () {\n  \t\tif (this._tooltip) {\n  \t\t\tthis._tooltip._close();\n  \t\t\tif (this._tooltip.options.interactive && this._tooltip._container) {\n  \t\t\t\tremoveClass(this._tooltip._container, 'leaflet-clickable');\n  \t\t\t\tthis.removeInteractiveTarget(this._tooltip._container);\n  \t\t\t}\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method toggleTooltip(): this\n  \t// Opens or closes the tooltip bound to this layer depending on its current state.\n  \ttoggleTooltip: function (target) {\n  \t\tif (this._tooltip) {\n  \t\t\tif (this._tooltip._map) {\n  \t\t\t\tthis.closeTooltip();\n  \t\t\t} else {\n  \t\t\t\tthis.openTooltip(target);\n  \t\t\t}\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method isTooltipOpen(): boolean\n  \t// Returns `true` if the tooltip bound to this layer is currently open.\n  \tisTooltipOpen: function () {\n  \t\treturn this._tooltip.isOpen();\n  \t},\n\n  \t// @method setTooltipContent(content: String|HTMLElement|Tooltip): this\n  \t// Sets the content of the tooltip bound to this layer.\n  \tsetTooltipContent: function (content) {\n  \t\tif (this._tooltip) {\n  \t\t\tthis._tooltip.setContent(content);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method getTooltip(): Tooltip\n  \t// Returns the tooltip bound to this layer.\n  \tgetTooltip: function () {\n  \t\treturn this._tooltip;\n  \t},\n\n  \t_openTooltip: function (e) {\n  \t\tvar layer = e.layer || e.target;\n\n  \t\tif (!this._tooltip || !this._map) {\n  \t\t\treturn;\n  \t\t}\n  \t\tthis.openTooltip(layer, this._tooltip.options.sticky ? e.latlng : undefined);\n  \t},\n\n  \t_moveTooltip: function (e) {\n  \t\tvar latlng = e.latlng, containerPoint, layerPoint;\n  \t\tif (this._tooltip.options.sticky && e.originalEvent) {\n  \t\t\tcontainerPoint = this._map.mouseEventToContainerPoint(e.originalEvent);\n  \t\t\tlayerPoint = this._map.containerPointToLayerPoint(containerPoint);\n  \t\t\tlatlng = this._map.layerPointToLatLng(layerPoint);\n  \t\t}\n  \t\tthis._tooltip.setLatLng(latlng);\n  \t}\n  });\n\n  /*\n   * @class DivIcon\n   * @aka L.DivIcon\n   * @inherits Icon\n   *\n   * Represents a lightweight icon for markers that uses a simple `<div>`\n   * element instead of an image. Inherits from `Icon` but ignores the `iconUrl` and shadow options.\n   *\n   * @example\n   * ```js\n   * var myIcon = L.divIcon({className: 'my-div-icon'});\n   * // you can set .my-div-icon styles in CSS\n   *\n   * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);\n   * ```\n   *\n   * By default, it has a 'leaflet-div-icon' CSS class and is styled as a little white square with a shadow.\n   */\n\n  var DivIcon = Icon.extend({\n  \toptions: {\n  \t\t// @section\n  \t\t// @aka DivIcon options\n  \t\ticonSize: [12, 12], // also can be set through CSS\n\n  \t\t// iconAnchor: (Point),\n  \t\t// popupAnchor: (Point),\n\n  \t\t// @option html: String|HTMLElement = ''\n  \t\t// Custom HTML code to put inside the div element, empty by default. Alternatively,\n  \t\t// an instance of `HTMLElement`.\n  \t\thtml: false,\n\n  \t\t// @option bgPos: Point = [0, 0]\n  \t\t// Optional relative position of the background, in pixels\n  \t\tbgPos: null,\n\n  \t\tclassName: 'leaflet-div-icon'\n  \t},\n\n  \tcreateIcon: function (oldIcon) {\n  \t\tvar div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),\n  \t\t    options = this.options;\n\n  \t\tif (options.html instanceof Element) {\n  \t\t\tempty(div);\n  \t\t\tdiv.appendChild(options.html);\n  \t\t} else {\n  \t\t\tdiv.innerHTML = options.html !== false ? options.html : '';\n  \t\t}\n\n  \t\tif (options.bgPos) {\n  \t\t\tvar bgPos = toPoint(options.bgPos);\n  \t\t\tdiv.style.backgroundPosition = (-bgPos.x) + 'px ' + (-bgPos.y) + 'px';\n  \t\t}\n  \t\tthis._setIconStyles(div, 'icon');\n\n  \t\treturn div;\n  \t},\n\n  \tcreateShadow: function () {\n  \t\treturn null;\n  \t}\n  });\n\n  // @factory L.divIcon(options: DivIcon options)\n  // Creates a `DivIcon` instance with the given options.\n  function divIcon(options) {\n  \treturn new DivIcon(options);\n  }\n\n  Icon.Default = IconDefault;\n\n  /*\n   * @class GridLayer\n   * @inherits Layer\n   * @aka L.GridLayer\n   *\n   * Generic class for handling a tiled grid of HTML elements. This is the base class for all tile layers and replaces `TileLayer.Canvas`.\n   * GridLayer can be extended to create a tiled grid of HTML elements like `<canvas>`, `<img>` or `<div>`. GridLayer will handle creating and animating these DOM elements for you.\n   *\n   *\n   * @section Synchronous usage\n   * @example\n   *\n   * To create a custom layer, extend GridLayer and implement the `createTile()` method, which will be passed a `Point` object with the `x`, `y`, and `z` (zoom level) coordinates to draw your tile.\n   *\n   * ```js\n   * var CanvasLayer = L.GridLayer.extend({\n   *     createTile: function(coords){\n   *         // create a <canvas> element for drawing\n   *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');\n   *\n   *         // setup tile width and height according to the options\n   *         var size = this.getTileSize();\n   *         tile.width = size.x;\n   *         tile.height = size.y;\n   *\n   *         // get a canvas context and draw something on it using coords.x, coords.y and coords.z\n   *         var ctx = tile.getContext('2d');\n   *\n   *         // return the tile so it can be rendered on screen\n   *         return tile;\n   *     }\n   * });\n   * ```\n   *\n   * @section Asynchronous usage\n   * @example\n   *\n   * Tile creation can also be asynchronous, this is useful when using a third-party drawing library. Once the tile is finished drawing it can be passed to the `done()` callback.\n   *\n   * ```js\n   * var CanvasLayer = L.GridLayer.extend({\n   *     createTile: function(coords, done){\n   *         var error;\n   *\n   *         // create a <canvas> element for drawing\n   *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');\n   *\n   *         // setup tile width and height according to the options\n   *         var size = this.getTileSize();\n   *         tile.width = size.x;\n   *         tile.height = size.y;\n   *\n   *         // draw something asynchronously and pass the tile to the done() callback\n   *         setTimeout(function() {\n   *             done(error, tile);\n   *         }, 1000);\n   *\n   *         return tile;\n   *     }\n   * });\n   * ```\n   *\n   * @section\n   */\n\n\n  var GridLayer = Layer.extend({\n\n  \t// @section\n  \t// @aka GridLayer options\n  \toptions: {\n  \t\t// @option tileSize: Number|Point = 256\n  \t\t// Width and height of tiles in the grid. Use a number if width and height are equal, or `L.point(width, height)` otherwise.\n  \t\ttileSize: 256,\n\n  \t\t// @option opacity: Number = 1.0\n  \t\t// Opacity of the tiles. Can be used in the `createTile()` function.\n  \t\topacity: 1,\n\n  \t\t// @option updateWhenIdle: Boolean = (depends)\n  \t\t// Load new tiles only when panning ends.\n  \t\t// `true` by default on mobile browsers, in order to avoid too many requests and keep smooth navigation.\n  \t\t// `false` otherwise in order to display new tiles _during_ panning, since it is easy to pan outside the\n  \t\t// [`keepBuffer`](#gridlayer-keepbuffer) option in desktop browsers.\n  \t\tupdateWhenIdle: mobile,\n\n  \t\t// @option updateWhenZooming: Boolean = true\n  \t\t// By default, a smooth zoom animation (during a [touch zoom](#map-touchzoom) or a [`flyTo()`](#map-flyto)) will update grid layers every integer zoom level. Setting this option to `false` will update the grid layer only when the smooth animation ends.\n  \t\tupdateWhenZooming: true,\n\n  \t\t// @option updateInterval: Number = 200\n  \t\t// Tiles will not update more than once every `updateInterval` milliseconds when panning.\n  \t\tupdateInterval: 200,\n\n  \t\t// @option zIndex: Number = 1\n  \t\t// The explicit zIndex of the tile layer.\n  \t\tzIndex: 1,\n\n  \t\t// @option bounds: LatLngBounds = undefined\n  \t\t// If set, tiles will only be loaded inside the set `LatLngBounds`.\n  \t\tbounds: null,\n\n  \t\t// @option minZoom: Number = 0\n  \t\t// The minimum zoom level down to which this layer will be displayed (inclusive).\n  \t\tminZoom: 0,\n\n  \t\t// @option maxZoom: Number = undefined\n  \t\t// The maximum zoom level up to which this layer will be displayed (inclusive).\n  \t\tmaxZoom: undefined,\n\n  \t\t// @option maxNativeZoom: Number = undefined\n  \t\t// Maximum zoom number the tile source has available. If it is specified,\n  \t\t// the tiles on all zoom levels higher than `maxNativeZoom` will be loaded\n  \t\t// from `maxNativeZoom` level and auto-scaled.\n  \t\tmaxNativeZoom: undefined,\n\n  \t\t// @option minNativeZoom: Number = undefined\n  \t\t// Minimum zoom number the tile source has available. If it is specified,\n  \t\t// the tiles on all zoom levels lower than `minNativeZoom` will be loaded\n  \t\t// from `minNativeZoom` level and auto-scaled.\n  \t\tminNativeZoom: undefined,\n\n  \t\t// @option noWrap: Boolean = false\n  \t\t// Whether the layer is wrapped around the antimeridian. If `true`, the\n  \t\t// GridLayer will only be displayed once at low zoom levels. Has no\n  \t\t// effect when the [map CRS](#map-crs) doesn't wrap around. Can be used\n  \t\t// in combination with [`bounds`](#gridlayer-bounds) to prevent requesting\n  \t\t// tiles outside the CRS limits.\n  \t\tnoWrap: false,\n\n  \t\t// @option pane: String = 'tilePane'\n  \t\t// `Map pane` where the grid layer will be added.\n  \t\tpane: 'tilePane',\n\n  \t\t// @option className: String = ''\n  \t\t// A custom class name to assign to the tile layer. Empty by default.\n  \t\tclassName: '',\n\n  \t\t// @option keepBuffer: Number = 2\n  \t\t// When panning the map, keep this many rows and columns of tiles before unloading them.\n  \t\tkeepBuffer: 2\n  \t},\n\n  \tinitialize: function (options) {\n  \t\tsetOptions(this, options);\n  \t},\n\n  \tonAdd: function () {\n  \t\tthis._initContainer();\n\n  \t\tthis._levels = {};\n  \t\tthis._tiles = {};\n\n  \t\tthis._resetView();\n  \t\tthis._update();\n  \t},\n\n  \tbeforeAdd: function (map) {\n  \t\tmap._addZoomLimit(this);\n  \t},\n\n  \tonRemove: function (map) {\n  \t\tthis._removeAllTiles();\n  \t\tremove(this._container);\n  \t\tmap._removeZoomLimit(this);\n  \t\tthis._container = null;\n  \t\tthis._tileZoom = undefined;\n  \t},\n\n  \t// @method bringToFront: this\n  \t// Brings the tile layer to the top of all tile layers.\n  \tbringToFront: function () {\n  \t\tif (this._map) {\n  \t\t\ttoFront(this._container);\n  \t\t\tthis._setAutoZIndex(Math.max);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method bringToBack: this\n  \t// Brings the tile layer to the bottom of all tile layers.\n  \tbringToBack: function () {\n  \t\tif (this._map) {\n  \t\t\ttoBack(this._container);\n  \t\t\tthis._setAutoZIndex(Math.min);\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \t// @method getContainer: HTMLElement\n  \t// Returns the HTML element that contains the tiles for this layer.\n  \tgetContainer: function () {\n  \t\treturn this._container;\n  \t},\n\n  \t// @method setOpacity(opacity: Number): this\n  \t// Changes the [opacity](#gridlayer-opacity) of the grid layer.\n  \tsetOpacity: function (opacity) {\n  \t\tthis.options.opacity = opacity;\n  \t\tthis._updateOpacity();\n  \t\treturn this;\n  \t},\n\n  \t// @method setZIndex(zIndex: Number): this\n  \t// Changes the [zIndex](#gridlayer-zindex) of the grid layer.\n  \tsetZIndex: function (zIndex) {\n  \t\tthis.options.zIndex = zIndex;\n  \t\tthis._updateZIndex();\n\n  \t\treturn this;\n  \t},\n\n  \t// @method isLoading: Boolean\n  \t// Returns `true` if any tile in the grid layer has not finished loading.\n  \tisLoading: function () {\n  \t\treturn this._loading;\n  \t},\n\n  \t// @method redraw: this\n  \t// Causes the layer to clear all the tiles and request them again.\n  \tredraw: function () {\n  \t\tif (this._map) {\n  \t\t\tthis._removeAllTiles();\n  \t\t\tthis._update();\n  \t\t}\n  \t\treturn this;\n  \t},\n\n  \tgetEvents: function () {\n  \t\tvar events = {\n  \t\t\tviewprereset: this._invalidateAll,\n  \t\t\tviewreset: this._resetView,\n  \t\t\tzoom: this._resetView,\n  \t\t\tmoveend: this._onMoveEnd\n  \t\t};\n\n  \t\tif (!this.options.updateWhenIdle) {\n  \t\t\t// update tiles on move, but not more often than once per given interval\n  \t\t\tif (!this._onMove) {\n  \t\t\t\tthis._onMove = throttle(this._onMoveEnd, this.options.updateInterval, this);\n  \t\t\t}\n\n  \t\t\tevents.move = this._onMove;\n  \t\t}\n\n  \t\tif (this._zoomAnimated) {\n  \t\t\tevents.zoomanim = this._animateZoom;\n  \t\t}\n\n  \t\treturn events;\n  \t},\n\n  \t// @section Extension methods\n  \t// Layers extending `GridLayer` shall reimplement the following method.\n  \t// @method createTile(coords: Object, done?: Function): HTMLElement\n  \t// Called only internally, must be overridden by classes extending `GridLayer`.\n  \t// Returns the `HTMLElement` corresponding to the given `coords`. If the `done` callback\n  \t// is specified, it must be called when the tile has finished loading and drawing.\n  \tcreateTile: function () {\n  \t\treturn document.createElement('div');\n  \t},\n\n  \t// @section\n  \t// @method getTileSize: Point\n  \t// Normalizes the [tileSize option](#gridlayer-tilesize) into a point. Used by the `createTile()` method.\n  \tgetTileSize: function () {\n  \t\tvar s = this.options.tileSize;\n  \t\treturn s instanceof Point ? s : new Point(s, s);\n  \t},\n\n  \t_updateZIndex: function () {\n  \t\tif (this._container && this.options.zIndex !== undefined && this.options.zIndex !== null) {\n  \t\t\tthis._container.style.zIndex = this.options.zIndex;\n  \t\t}\n  \t},\n\n  \t_setAutoZIndex: function (compare) {\n  \t\t// go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)\n\n  \t\tvar layers = this.getPane().children,\n  \t\t    edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min\n\n  \t\tfor (var i = 0, len = layers.length, zIndex; i < len; i++) {\n\n  \t\t\tzIndex = layers[i].style.zIndex;\n\n  \t\t\tif (layers[i] !== this._container && zIndex) {\n  \t\t\t\tedgeZIndex = compare(edgeZIndex, +zIndex);\n  \t\t\t}\n  \t\t}\n\n  \t\tif (isFinite(edgeZIndex)) {\n  \t\t\tthis.options.zIndex = edgeZIndex + compare(-1, 1);\n  \t\t\tthis._updateZIndex();\n  \t\t}\n  \t},\n\n  \t_updateOpacity: function () {\n  \t\tif (!this._map) { return; }\n\n  \t\t// IE doesn't inherit filter opacity properly, so we're forced to set it on tiles\n  \t\tif (ielt9) { return; }\n\n  \t\tsetOpacity(this._container, this.options.opacity);\n\n  \t\tvar now = +new Date(),\n  \t\t    nextFrame = false,\n  \t\t    willPrune = false;\n\n  \t\tfor (var key in this._tiles) {\n  \t\t\tvar tile = this._tiles[key];\n  \t\t\tif (!tile.current || !tile.loaded) { continue; }\n\n  \t\t\tvar fade = Math.min(1, (now - tile.loaded) / 200);\n\n  \t\t\tsetOpacity(tile.el, fade);\n  \t\t\tif (fade < 1) {\n  \t\t\t\tnextFrame = true;\n  \t\t\t} else {\n  \t\t\t\tif (tile.active) {\n  \t\t\t\t\twillPrune = true;\n  \t\t\t\t} else {\n  \t\t\t\t\tthis._onOpaqueTile(tile);\n  \t\t\t\t}\n  \t\t\t\ttile.active = true;\n  \t\t\t}\n  \t\t}\n\n  \t\tif (willPrune && !this._noPrune) { this._pruneTiles(); }\n\n  \t\tif (nextFrame) {\n  \t\t\tcancelAnimFrame(this._fadeFrame);\n  \t\t\tthis._fadeFrame = requestAnimFrame(this._updateOpacity, this);\n  \t\t}\n  \t},\n\n  \t_onOpaqueTile: falseFn,\n\n  \t_initContainer: function () {\n  \t\tif (this._container) { return; }\n\n  \t\tthis._container = create$1('div', 'leaflet-layer ' + (this.options.className || ''));\n  \t\tthis._updateZIndex();\n\n  \t\tif (this.options.opacity < 1) {\n  \t\t\tthis._updateOpacity();\n  \t\t}\n\n  \t\tthis.getPane().appendChild(this._container);\n  \t},\n\n  \t_updateLevels: function () {\n\n  \t\tvar zoom = this._tileZoom,\n  \t\t    maxZoom = this.options.maxZoom;\n\n  \t\tif (zoom === undefined) { return undefined; }\n\n  \t\tfor (var z in this._levels) {\n  \t\t\tz = Number(z);\n  \t\t\tif (this._levels[z].el.children.length || z === zoom) {\n  \t\t\t\tthis._levels[z].el.style.zIndex = maxZoom - Math.abs(zoom - z);\n  \t\t\t\tthis._onUpdateLevel(z);\n  \t\t\t} else {\n  \t\t\t\tremove(this._levels[z].el);\n  \t\t\t\tthis._removeTilesAtZoom(z);\n  \t\t\t\tthis._onRemoveLevel(z);\n  \t\t\t\tdelete this._levels[z];\n  \t\t\t}\n  \t\t}\n\n  \t\tvar level = this._levels[zoom],\n  \t\t    map = this._map;\n\n  \t\tif (!level) {\n  \t\t\tlevel = this._levels[zoom] = {};\n\n  \t\t\tlevel.el = create$1('div', 'leaflet-tile-container leaflet-zoom-animated', this._container);\n  \t\t\tlevel.el.style.zIndex = maxZoom;\n\n  \t\t\tlevel.origin = map.project(map.unproject(map.getPixelOrigin()), zoom).round();\n  \t\t\tlevel.zoom = zoom;\n\n  \t\t\tthis._setZoomTransform(level, map.getCenter(), map.getZoom());\n\n  \t\t\t// force the browser to consider the newly added element for transition\n  \t\t\tfalseFn(level.el.offsetWidth);\n\n  \t\t\tthis._onCreateLevel(level);\n  \t\t}\n\n  \t\tthis._level = level;\n\n  \t\treturn level;\n  \t},\n\n  \t_onUpdateLevel: falseFn,\n\n  \t_onRemoveLevel: falseFn,\n\n  \t_onCreateLevel: falseFn,\n\n  \t_pruneTiles: function () {\n  \t\tif (!this._map) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tvar key, tile;\n\n  \t\tvar zoom = this._map.getZoom();\n  \t\tif (zoom > this.options.maxZoom ||\n  \t\t\tzoom < this.options.minZoom) {\n  \t\t\tthis._removeAllTiles();\n  \t\t\treturn;\n  \t\t}\n\n  \t\tfor (key in this._tiles) {\n  \t\t\ttile = this._tiles[key];\n  \t\t\ttile.retain = tile.current;\n  \t\t}\n\n  \t\tfor (key in this._tiles) {\n  \t\t\ttile = this._tiles[key];\n  \t\t\tif (tile.current && !tile.active) {\n  \t\t\t\tvar coords = tile.coords;\n  \t\t\t\tif (!this._retainParent(coords.x, coords.y, coords.z, coords.z - 5)) {\n  \t\t\t\t\tthis._retainChildren(coords.x, coords.y, coords.z, coords.z + 2);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\tfor (key in this._tiles) {\n  \t\t\tif (!this._tiles[key].retain) {\n  \t\t\t\tthis._removeTile(key);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t_removeTilesAtZoom: function (zoom) {\n  \t\tfor (var key in this._tiles) {\n  \t\t\tif (this._tiles[key].coords.z !== zoom) {\n  \t\t\t\tcontinue;\n  \t\t\t}\n  \t\t\tthis._removeTile(key);\n  \t\t}\n  \t},\n\n  \t_removeAllTiles: function () {\n  \t\tfor (var key in this._tiles) {\n  \t\t\tthis._removeTile(key);\n  \t\t}\n  \t},\n\n  \t_invalidateAll: function () {\n  \t\tfor (var z in this._levels) {\n  \t\t\tremove(this._levels[z].el);\n  \t\t\tthis._onRemoveLevel(Number(z));\n  \t\t\tdelete this._levels[z];\n  \t\t}\n  \t\tthis._removeAllTiles();\n\n  \t\tthis._tileZoom = undefined;\n  \t},\n\n  \t_retainParent: function (x, y, z, minZoom) {\n  \t\tvar x2 = Math.floor(x / 2),\n  \t\t    y2 = Math.floor(y / 2),\n  \t\t    z2 = z - 1,\n  \t\t    coords2 = new Point(+x2, +y2);\n  \t\tcoords2.z = +z2;\n\n  \t\tvar key = this._tileCoordsToKey(coords2),\n  \t\t    tile = this._tiles[key];\n\n  \t\tif (tile && tile.active) {\n  \t\t\ttile.retain = true;\n  \t\t\treturn true;\n\n  \t\t} else if (tile && tile.loaded) {\n  \t\t\ttile.retain = true;\n  \t\t}\n\n  \t\tif (z2 > minZoom) {\n  \t\t\treturn this._retainParent(x2, y2, z2, minZoom);\n  \t\t}\n\n  \t\treturn false;\n  \t},\n\n  \t_retainChildren: function (x, y, z, maxZoom) {\n\n  \t\tfor (var i = 2 * x; i < 2 * x + 2; i++) {\n  \t\t\tfor (var j = 2 * y; j < 2 * y + 2; j++) {\n\n  \t\t\t\tvar coords = new Point(i, j);\n  \t\t\t\tcoords.z = z + 1;\n\n  \t\t\t\tvar key = this._tileCoordsToKey(coords),\n  \t\t\t\t    tile = this._tiles[key];\n\n  \t\t\t\tif (tile && tile.active) {\n  \t\t\t\t\ttile.retain = true;\n  \t\t\t\t\tcontinue;\n\n  \t\t\t\t} else if (tile && tile.loaded) {\n  \t\t\t\t\ttile.retain = true;\n  \t\t\t\t}\n\n  \t\t\t\tif (z + 1 < maxZoom) {\n  \t\t\t\t\tthis._retainChildren(i, j, z + 1, maxZoom);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t_resetView: function (e) {\n  \t\tvar animating = e && (e.pinch || e.flyTo);\n  \t\tthis._setView(this._map.getCenter(), this._map.getZoom(), animating, animating);\n  \t},\n\n  \t_animateZoom: function (e) {\n  \t\tthis._setView(e.center, e.zoom, true, e.noUpdate);\n  \t},\n\n  \t_clampZoom: function (zoom) {\n  \t\tvar options = this.options;\n\n  \t\tif (undefined !== options.minNativeZoom && zoom < options.minNativeZoom) {\n  \t\t\treturn options.minNativeZoom;\n  \t\t}\n\n  \t\tif (undefined !== options.maxNativeZoom && options.maxNativeZoom < zoom) {\n  \t\t\treturn options.maxNativeZoom;\n  \t\t}\n\n  \t\treturn zoom;\n  \t},\n\n  \t_setView: function (center, zoom, noPrune, noUpdate) {\n  \t\tvar tileZoom = Math.round(zoom);\n  \t\tif ((this.options.maxZoom !== undefined && tileZoom > this.options.maxZoom) ||\n  \t\t    (this.options.minZoom !== undefined && tileZoom < this.options.minZoom)) {\n  \t\t\ttileZoom = undefined;\n  \t\t} else {\n  \t\t\ttileZoom = this._clampZoom(tileZoom);\n  \t\t}\n\n  \t\tvar tileZoomChanged = this.options.updateWhenZooming && (tileZoom !== this._tileZoom);\n\n  \t\tif (!noUpdate || tileZoomChanged) {\n\n  \t\t\tthis._tileZoom = tileZoom;\n\n  \t\t\tif (this._abortLoading) {\n  \t\t\t\tthis._abortLoading();\n  \t\t\t}\n\n  \t\t\tthis._updateLevels();\n  \t\t\tthis._resetGrid();\n\n  \t\t\tif (tileZoom !== undefined) {\n  \t\t\t\tthis._update(center);\n  \t\t\t}\n\n  \t\t\tif (!noPrune) {\n  \t\t\t\tthis._pruneTiles();\n  \t\t\t}\n\n  \t\t\t// Flag to prevent _updateOpacity from pruning tiles during\n  \t\t\t// a zoom anim or a pinch gesture\n  \t\t\tthis._noPrune = !!noPrune;\n  \t\t}\n\n  \t\tthis._setZoomTransforms(center, zoom);\n  \t},\n\n  \t_setZoomTransforms: function (center, zoom) {\n  \t\tfor (var i in this._levels) {\n  \t\t\tthis._setZoomTransform(this._levels[i], center, zoom);\n  \t\t}\n  \t},\n\n  \t_setZoomTransform: function (level, center, zoom) {\n  \t\tvar scale = this._map.getZoomScale(zoom, level.zoom),\n  \t\t    translate = level.origin.multiplyBy(scale)\n  \t\t        .subtract(this._map._getNewPixelOrigin(center, zoom)).round();\n\n  \t\tif (any3d) {\n  \t\t\tsetTransform(level.el, translate, scale);\n  \t\t} else {\n  \t\t\tsetPosition(level.el, translate);\n  \t\t}\n  \t},\n\n  \t_resetGrid: function () {\n  \t\tvar map = this._map,\n  \t\t    crs = map.options.crs,\n  \t\t    tileSize = this._tileSize = this.getTileSize(),\n  \t\t    tileZoom = this._tileZoom;\n\n  \t\tvar bounds = this._map.getPixelWorldBounds(this._tileZoom);\n  \t\tif (bounds) {\n  \t\t\tthis._globalTileRange = this._pxBoundsToTileRange(bounds);\n  \t\t}\n\n  \t\tthis._wrapX = crs.wrapLng && !this.options.noWrap && [\n  \t\t\tMath.floor(map.project([0, crs.wrapLng[0]], tileZoom).x / tileSize.x),\n  \t\t\tMath.ceil(map.project([0, crs.wrapLng[1]], tileZoom).x / tileSize.y)\n  \t\t];\n  \t\tthis._wrapY = crs.wrapLat && !this.options.noWrap && [\n  \t\t\tMath.floor(map.project([crs.wrapLat[0], 0], tileZoom).y / tileSize.x),\n  \t\t\tMath.ceil(map.project([crs.wrapLat[1], 0], tileZoom).y / tileSize.y)\n  \t\t];\n  \t},\n\n  \t_onMoveEnd: function () {\n  \t\tif (!this._map || this._map._animatingZoom) { return; }\n\n  \t\tthis._update();\n  \t},\n\n  \t_getTiledPixelBounds: function (center) {\n  \t\tvar map = this._map,\n  \t\t    mapZoom = map._animatingZoom ? Math.max(map._animateToZoom, map.getZoom()) : map.getZoom(),\n  \t\t    scale = map.getZoomScale(mapZoom, this._tileZoom),\n  \t\t    pixelCenter = map.project(center, this._tileZoom).floor(),\n  \t\t    halfSize = map.getSize().divideBy(scale * 2);\n\n  \t\treturn new Bounds(pixelCenter.subtract(halfSize), pixelCenter.add(halfSize));\n  \t},\n\n  \t// Private method to load tiles in the grid's active zoom level according to map bounds\n  \t_update: function (center) {\n  \t\tvar map = this._map;\n  \t\tif (!map) { return; }\n  \t\tvar zoom = this._clampZoom(map.getZoom());\n\n  \t\tif (center === undefined) { center = map.getCenter(); }\n  \t\tif (this._tileZoom === undefined) { return; }\t// if out of minzoom/maxzoom\n\n  \t\tvar pixelBounds = this._getTiledPixelBounds(center),\n  \t\t    tileRange = this._pxBoundsToTileRange(pixelBounds),\n  \t\t    tileCenter = tileRange.getCenter(),\n  \t\t    queue = [],\n  \t\t    margin = this.options.keepBuffer,\n  \t\t    noPruneRange = new Bounds(tileRange.getBottomLeft().subtract([margin, -margin]),\n  \t\t                              tileRange.getTopRight().add([margin, -margin]));\n\n  \t\t// Sanity check: panic if the tile range contains Infinity somewhere.\n  \t\tif (!(isFinite(tileRange.min.x) &&\n  \t\t      isFinite(tileRange.min.y) &&\n  \t\t      isFinite(tileRange.max.x) &&\n  \t\t      isFinite(tileRange.max.y))) { throw new Error('Attempted to load an infinite number of tiles'); }\n\n  \t\tfor (var key in this._tiles) {\n  \t\t\tvar c = this._tiles[key].coords;\n  \t\t\tif (c.z !== this._tileZoom || !noPruneRange.contains(new Point(c.x, c.y))) {\n  \t\t\t\tthis._tiles[key].current = false;\n  \t\t\t}\n  \t\t}\n\n  \t\t// _update just loads more tiles. If the tile zoom level differs too much\n  \t\t// from the map's, let _setView reset levels and prune old tiles.\n  \t\tif (Math.abs(zoom - this._tileZoom) > 1) { this._setView(center, zoom); return; }\n\n  \t\t// create a queue of coordinates to load tiles from\n  \t\tfor (var j = tileRange.min.y; j <= tileRange.max.y; j++) {\n  \t\t\tfor (var i = tileRange.min.x; i <= tileRange.max.x; i++) {\n  \t\t\t\tvar coords = new Point(i, j);\n  \t\t\t\tcoords.z = this._tileZoom;\n\n  \t\t\t\tif (!this._isValidTile(coords)) { continue; }\n\n  \t\t\t\tvar tile = this._tiles[this._tileCoordsToKey(coords)];\n  \t\t\t\tif (tile) {\n  \t\t\t\t\ttile.current = true;\n  \t\t\t\t} else {\n  \t\t\t\t\tqueue.push(coords);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n\n  \t\t// sort tile queue to load tiles in order of their distance to center\n  \t\tqueue.sort(function (a, b) {\n  \t\t\treturn a.distanceTo(tileCenter) - b.distanceTo(tileCenter);\n  \t\t});\n\n  \t\tif (queue.length !== 0) {\n  \t\t\t// if it's the first batch of tiles to load\n  \t\t\tif (!this._loading) {\n  \t\t\t\tthis._loading = true;\n  \t\t\t\t// @event loading: Event\n  \t\t\t\t// Fired when the grid layer starts loading tiles.\n  \t\t\t\tthis.fire('loading');\n  \t\t\t}\n\n  \t\t\t// create DOM fragment to append tiles in one batch\n  \t\t\tvar fragment = document.createDocumentFragment();\n\n  \t\t\tfor (i = 0; i < queue.length; i++) {\n  \t\t\t\tthis._addTile(queue[i], fragment);\n  \t\t\t}\n\n  \t\t\tthis._level.el.appendChild(fragment);\n  \t\t}\n  \t},\n\n  \t_isValidTile: function (coords) {\n  \t\tvar crs = this._map.options.crs;\n\n  \t\tif (!crs.infinite) {\n  \t\t\t// don't load tile if it's out of bounds and not wrapped\n  \t\t\tvar bounds = this._globalTileRange;\n  \t\t\tif ((!crs.wrapLng && (coords.x < bounds.min.x || coords.x > bounds.max.x)) ||\n  \t\t\t    (!crs.wrapLat && (coords.y < bounds.min.y || coords.y > bounds.max.y))) { return false; }\n  \t\t}\n\n  \t\tif (!this.options.bounds) { return true; }\n\n  \t\t// don't load tile if it doesn't intersect the bounds in options\n  \t\tvar tileBounds = this._tileCoordsToBounds(coords);\n  \t\treturn toLatLngBounds(this.options.bounds).overlaps(tileBounds);\n  \t},\n\n  \t_keyToBounds: function (key) {\n  \t\treturn this._tileCoordsToBounds(this._keyToTileCoords(key));\n  \t},\n\n  \t_tileCoordsToNwSe: function (coords) {\n  \t\tvar map = this._map,\n  \t\t    tileSize = this.getTileSize(),\n  \t\t    nwPoint = coords.scaleBy(tileSize),\n  \t\t    sePoint = nwPoint.add(tileSize),\n  \t\t    nw = map.unproject(nwPoint, coords.z),\n  \t\t    se = map.unproject(sePoint, coords.z);\n  \t\treturn [nw, se];\n  \t},\n\n  \t// converts tile coordinates to its geographical bounds\n  \t_tileCoordsToBounds: function (coords) {\n  \t\tvar bp = this._tileCoordsToNwSe(coords),\n  \t\t    bounds = new LatLngBounds(bp[0], bp[1]);\n\n  \t\tif (!this.options.noWrap) {\n  \t\t\tbounds = this._map.wrapLatLngBounds(bounds);\n  \t\t}\n  \t\treturn bounds;\n  \t},\n  \t// converts tile coordinates to key for the tile cache\n  \t_tileCoordsToKey: function (coords) {\n  \t\treturn coords.x + ':' + coords.y + ':' + coords.z;\n  \t},\n\n  \t// converts tile cache key to coordinates\n  \t_keyToTileCoords: function (key) {\n  \t\tvar k = key.split(':'),\n  \t\t    coords = new Point(+k[0], +k[1]);\n  \t\tcoords.z = +k[2];\n  \t\treturn coords;\n  \t},\n\n  \t_removeTile: function (key) {\n  \t\tvar tile = this._tiles[key];\n  \t\tif (!tile) { return; }\n\n  \t\tremove(tile.el);\n\n  \t\tdelete this._tiles[key];\n\n  \t\t// @event tileunload: TileEvent\n  \t\t// Fired when a tile is removed (e.g. when a tile goes off the screen).\n  \t\tthis.fire('tileunload', {\n  \t\t\ttile: tile.el,\n  \t\t\tcoords: this._keyToTileCoords(key)\n  \t\t});\n  \t},\n\n  \t_initTile: function (tile) {\n  \t\taddClass(tile, 'leaflet-tile');\n\n  \t\tvar tileSize = this.getTileSize();\n  \t\ttile.style.width = tileSize.x + 'px';\n  \t\ttile.style.height = tileSize.y + 'px';\n\n  \t\ttile.onselectstart = falseFn;\n  \t\ttile.onmousemove = falseFn;\n\n  \t\t// update opacity on tiles in IE7-8 because of filter inheritance problems\n  \t\tif (ielt9 && this.options.opacity < 1) {\n  \t\t\tsetOpacity(tile, this.options.opacity);\n  \t\t}\n\n  \t\t// without this hack, tiles disappear after zoom on Chrome for Android\n  \t\t// https://github.com/Leaflet/Leaflet/issues/2078\n  \t\tif (android && !android23) {\n  \t\t\ttile.style.WebkitBackfaceVisibility = 'hidden';\n  \t\t}\n  \t},\n\n  \t_addTile: function (coords, container) {\n  \t\tvar tilePos = this._getTilePos(coords),\n  \t\t    key = this._tileCoordsToKey(coords);\n\n  \t\tvar tile = this.createTile(this._wrapCoords(coords), bind(this._tileReady, this, coords));\n\n  \t\tthis._initTile(tile);\n\n  \t\t// if createTile is defined with a second argument (\"done\" callback),\n  \t\t// we know that tile is async and will be ready later; otherwise\n  \t\tif (this.createTile.length < 2) {\n  \t\t\t// mark tile as ready, but delay one frame for opacity animation to happen\n  \t\t\trequestAnimFrame(bind(this._tileReady, this, coords, null, tile));\n  \t\t}\n\n  \t\tsetPosition(tile, tilePos);\n\n  \t\t// save tile in cache\n  \t\tthis._tiles[key] = {\n  \t\t\tel: tile,\n  \t\t\tcoords: coords,\n  \t\t\tcurrent: true\n  \t\t};\n\n  \t\tcontainer.appendChild(tile);\n  \t\t// @event tileloadstart: TileEvent\n  \t\t// Fired when a tile is requested and starts loading.\n  \t\tthis.fire('tileloadstart', {\n  \t\t\ttile: tile,\n  \t\t\tcoords: coords\n  \t\t});\n  \t},\n\n  \t_tileReady: function (coords, err, tile) {\n  \t\tif (err) {\n  \t\t\t// @event tileerror: TileErrorEvent\n  \t\t\t// Fired when there is an error loading a tile.\n  \t\t\tthis.fire('tileerror', {\n  \t\t\t\terror: err,\n  \t\t\t\ttile: tile,\n  \t\t\t\tcoords: coords\n  \t\t\t});\n  \t\t}\n\n  \t\tvar key = this._tileCoordsToKey(coords);\n\n  \t\ttile = this._tiles[key];\n  \t\tif (!tile) { return; }\n\n  \t\ttile.loaded = +new Date();\n  \t\tif (this._map._fadeAnimated) {\n  \t\t\tsetOpacity(tile.el, 0);\n  \t\t\tcancelAnimFrame(this._fadeFrame);\n  \t\t\tthis._fadeFrame = requestAnimFrame(this._updateOpacity, this);\n  \t\t} else {\n  \t\t\ttile.active = true;\n  \t\t\tthis._pruneTiles();\n  \t\t}\n\n  \t\tif (!err) {\n  \t\t\taddClass(tile.el, 'leaflet-tile-loaded');\n\n  \t\t\t// @event tileload: TileEvent\n  \t\t\t// Fired when a tile loads.\n  \t\t\tthis.fire('tileload', {\n  \t\t\t\ttile: tile.el,\n  \t\t\t\tcoords: coords\n  \t\t\t});\n  \t\t}\n\n  \t\tif (this._noTilesToLoad()) {\n  \t\t\tthis._loading = false;\n  \t\t\t// @event load: Event\n  \t\t\t// Fired when the grid layer loaded all visible tiles.\n  \t\t\tthis.fire('load');\n\n  \t\t\tif (ielt9 || !this._map._fadeAnimated) {\n  \t\t\t\trequestAnimFrame(this._pruneTiles, this);\n  \t\t\t} else {\n  \t\t\t\t// Wait a bit more than 0.2 secs (the duration of the tile fade-in)\n  \t\t\t\t// to trigger a pruning.\n  \t\t\t\tsetTimeout(bind(this._pruneTiles, this), 250);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t_getTilePos: function (coords) {\n  \t\treturn coords.scaleBy(this.getTileSize()).subtract(this._level.origin);\n  \t},\n\n  \t_wrapCoords: function (coords) {\n  \t\tvar newCoords = new Point(\n  \t\t\tthis._wrapX ? wrapNum(coords.x, this._wrapX) : coords.x,\n  \t\t\tthis._wrapY ? wrapNum(coords.y, this._wrapY) : coords.y);\n  \t\tnewCoords.z = coords.z;\n  \t\treturn newCoords;\n  \t},\n\n  \t_pxBoundsToTileRange: function (bounds) {\n  \t\tvar tileSize = this.getTileSize();\n  \t\treturn new Bounds(\n  \t\t\tbounds.min.unscaleBy(tileSize).floor(),\n  \t\t\tbounds.max.unscaleBy(tileSize).ceil().subtract([1, 1]));\n  \t},\n\n  \t_noTilesToLoad: function () {\n  \t\tfor (var key in this._tiles) {\n  \t\t\tif (!this._tiles[key].loaded) { return false; }\n  \t\t}\n  \t\treturn true;\n  \t}\n  });\n\n  // @factory L.gridLayer(options?: GridLayer options)\n  // Creates a new instance of GridLayer with the supplied options.\n  function gridLayer(options) {\n  \treturn new GridLayer(options);\n  }\n\n  /*\r\n   * @class TileLayer\r\n   * @inherits GridLayer\r\n   * @aka L.TileLayer\r\n   * Used to load and display tile layers on the map. Note that most tile servers require attribution, which you can set under `Layer`. Extends `GridLayer`.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar', attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>'}).addTo(map);\r\n   * ```\r\n   *\r\n   * @section URL template\r\n   * @example\r\n   *\r\n   * A string of the following form:\r\n   *\r\n   * ```\r\n   * 'http://{s}.somedomain.com/blabla/{z}/{x}/{y}{r}.png'\r\n   * ```\r\n   *\r\n   * `{s}` means one of the available subdomains (used sequentially to help with browser parallel requests per domain limitation; subdomain values are specified in options; `a`, `b` or `c` by default, can be omitted), `{z}` — zoom level, `{x}` and `{y}` — tile coordinates. `{r}` can be used to add \"&commat;2x\" to the URL to load retina tiles.\r\n   *\r\n   * You can use custom keys in the template, which will be [evaluated](#util-template) from TileLayer options, like this:\r\n   *\r\n   * ```\r\n   * L.tileLayer('http://{s}.somedomain.com/{foo}/{z}/{x}/{y}.png', {foo: 'bar'});\r\n   * ```\r\n   */\r\n\r\n\r\n  var TileLayer = GridLayer.extend({\r\n\r\n  \t// @section\r\n  \t// @aka TileLayer options\r\n  \toptions: {\r\n  \t\t// @option minZoom: Number = 0\r\n  \t\t// The minimum zoom level down to which this layer will be displayed (inclusive).\r\n  \t\tminZoom: 0,\r\n\r\n  \t\t// @option maxZoom: Number = 18\r\n  \t\t// The maximum zoom level up to which this layer will be displayed (inclusive).\r\n  \t\tmaxZoom: 18,\r\n\r\n  \t\t// @option subdomains: String|String[] = 'abc'\r\n  \t\t// Subdomains of the tile service. Can be passed in the form of one string (where each letter is a subdomain name) or an array of strings.\r\n  \t\tsubdomains: 'abc',\r\n\r\n  \t\t// @option errorTileUrl: String = ''\r\n  \t\t// URL to the tile image to show in place of the tile that failed to load.\r\n  \t\terrorTileUrl: '',\r\n\r\n  \t\t// @option zoomOffset: Number = 0\r\n  \t\t// The zoom number used in tile URLs will be offset with this value.\r\n  \t\tzoomOffset: 0,\r\n\r\n  \t\t// @option tms: Boolean = false\r\n  \t\t// If `true`, inverses Y axis numbering for tiles (turn this on for [TMS](https://en.wikipedia.org/wiki/Tile_Map_Service) services).\r\n  \t\ttms: false,\r\n\r\n  \t\t// @option zoomReverse: Boolean = false\r\n  \t\t// If set to true, the zoom number used in tile URLs will be reversed (`maxZoom - zoom` instead of `zoom`)\r\n  \t\tzoomReverse: false,\r\n\r\n  \t\t// @option detectRetina: Boolean = false\r\n  \t\t// If `true` and user is on a retina display, it will request four tiles of half the specified size and a bigger zoom level in place of one to utilize the high resolution.\r\n  \t\tdetectRetina: false,\r\n\r\n  \t\t// @option crossOrigin: Boolean|String = false\r\n  \t\t// Whether the crossOrigin attribute will be added to the tiles.\r\n  \t\t// If a String is provided, all tiles will have their crossOrigin attribute set to the String provided. This is needed if you want to access tile pixel data.\r\n  \t\t// Refer to [CORS Settings](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes) for valid String values.\r\n  \t\tcrossOrigin: false\r\n  \t},\r\n\r\n  \tinitialize: function (url, options) {\r\n\r\n  \t\tthis._url = url;\r\n\r\n  \t\toptions = setOptions(this, options);\r\n\r\n  \t\t// detecting retina displays, adjusting tileSize and zoom levels\r\n  \t\tif (options.detectRetina && retina && options.maxZoom > 0) {\r\n\r\n  \t\t\toptions.tileSize = Math.floor(options.tileSize / 2);\r\n\r\n  \t\t\tif (!options.zoomReverse) {\r\n  \t\t\t\toptions.zoomOffset++;\r\n  \t\t\t\toptions.maxZoom--;\r\n  \t\t\t} else {\r\n  \t\t\t\toptions.zoomOffset--;\r\n  \t\t\t\toptions.minZoom++;\r\n  \t\t\t}\r\n\r\n  \t\t\toptions.minZoom = Math.max(0, options.minZoom);\r\n  \t\t}\r\n\r\n  \t\tif (typeof options.subdomains === 'string') {\r\n  \t\t\toptions.subdomains = options.subdomains.split('');\r\n  \t\t}\r\n\r\n  \t\t// for https://github.com/Leaflet/Leaflet/issues/137\r\n  \t\tif (!android) {\r\n  \t\t\tthis.on('tileunload', this._onTileRemove);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t// @method setUrl(url: String, noRedraw?: Boolean): this\r\n  \t// Updates the layer's URL template and redraws it (unless `noRedraw` is set to `true`).\r\n  \t// If the URL does not change, the layer will not be redrawn unless\r\n  \t// the noRedraw parameter is set to false.\r\n  \tsetUrl: function (url, noRedraw) {\r\n  \t\tif (this._url === url && noRedraw === undefined) {\r\n  \t\t\tnoRedraw = true;\r\n  \t\t}\r\n\r\n  \t\tthis._url = url;\r\n\r\n  \t\tif (!noRedraw) {\r\n  \t\t\tthis.redraw();\r\n  \t\t}\r\n  \t\treturn this;\r\n  \t},\r\n\r\n  \t// @method createTile(coords: Object, done?: Function): HTMLElement\r\n  \t// Called only internally, overrides GridLayer's [`createTile()`](#gridlayer-createtile)\r\n  \t// to return an `<img>` HTML element with the appropriate image URL given `coords`. The `done`\r\n  \t// callback is called when the tile has been loaded.\r\n  \tcreateTile: function (coords, done) {\r\n  \t\tvar tile = document.createElement('img');\r\n\r\n  \t\ton(tile, 'load', bind(this._tileOnLoad, this, done, tile));\r\n  \t\ton(tile, 'error', bind(this._tileOnError, this, done, tile));\r\n\r\n  \t\tif (this.options.crossOrigin || this.options.crossOrigin === '') {\r\n  \t\t\ttile.crossOrigin = this.options.crossOrigin === true ? '' : this.options.crossOrigin;\r\n  \t\t}\r\n\r\n  \t\t/*\r\n  \t\t Alt tag is set to empty string to keep screen readers from reading URL and for compliance reasons\r\n  \t\t http://www.w3.org/TR/WCAG20-TECHS/H67\r\n  \t\t*/\r\n  \t\ttile.alt = '';\r\n\r\n  \t\t/*\r\n  \t\t Set role=\"presentation\" to force screen readers to ignore this\r\n  \t\t https://www.w3.org/TR/wai-aria/roles#textalternativecomputation\r\n  \t\t*/\r\n  \t\ttile.setAttribute('role', 'presentation');\r\n\r\n  \t\ttile.src = this.getTileUrl(coords);\r\n\r\n  \t\treturn tile;\r\n  \t},\r\n\r\n  \t// @section Extension methods\r\n  \t// @uninheritable\r\n  \t// Layers extending `TileLayer` might reimplement the following method.\r\n  \t// @method getTileUrl(coords: Object): String\r\n  \t// Called only internally, returns the URL for a tile given its coordinates.\r\n  \t// Classes extending `TileLayer` can override this function to provide custom tile URL naming schemes.\r\n  \tgetTileUrl: function (coords) {\r\n  \t\tvar data = {\r\n  \t\t\tr: retina ? '@2x' : '',\r\n  \t\t\ts: this._getSubdomain(coords),\r\n  \t\t\tx: coords.x,\r\n  \t\t\ty: coords.y,\r\n  \t\t\tz: this._getZoomForUrl()\r\n  \t\t};\r\n  \t\tif (this._map && !this._map.options.crs.infinite) {\r\n  \t\t\tvar invertedY = this._globalTileRange.max.y - coords.y;\r\n  \t\t\tif (this.options.tms) {\r\n  \t\t\t\tdata['y'] = invertedY;\r\n  \t\t\t}\r\n  \t\t\tdata['-y'] = invertedY;\r\n  \t\t}\r\n\r\n  \t\treturn template(this._url, extend(data, this.options));\r\n  \t},\r\n\r\n  \t_tileOnLoad: function (done, tile) {\r\n  \t\t// For https://github.com/Leaflet/Leaflet/issues/3332\r\n  \t\tif (ielt9) {\r\n  \t\t\tsetTimeout(bind(done, this, null, tile), 0);\r\n  \t\t} else {\r\n  \t\t\tdone(null, tile);\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_tileOnError: function (done, tile, e) {\r\n  \t\tvar errorUrl = this.options.errorTileUrl;\r\n  \t\tif (errorUrl && tile.getAttribute('src') !== errorUrl) {\r\n  \t\t\ttile.src = errorUrl;\r\n  \t\t}\r\n  \t\tdone(e, tile);\r\n  \t},\r\n\r\n  \t_onTileRemove: function (e) {\r\n  \t\te.tile.onload = null;\r\n  \t},\r\n\r\n  \t_getZoomForUrl: function () {\r\n  \t\tvar zoom = this._tileZoom,\r\n  \t\tmaxZoom = this.options.maxZoom,\r\n  \t\tzoomReverse = this.options.zoomReverse,\r\n  \t\tzoomOffset = this.options.zoomOffset;\r\n\r\n  \t\tif (zoomReverse) {\r\n  \t\t\tzoom = maxZoom - zoom;\r\n  \t\t}\r\n\r\n  \t\treturn zoom + zoomOffset;\r\n  \t},\r\n\r\n  \t_getSubdomain: function (tilePoint) {\r\n  \t\tvar index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;\r\n  \t\treturn this.options.subdomains[index];\r\n  \t},\r\n\r\n  \t// stops loading all tiles in the background layer\r\n  \t_abortLoading: function () {\r\n  \t\tvar i, tile;\r\n  \t\tfor (i in this._tiles) {\r\n  \t\t\tif (this._tiles[i].coords.z !== this._tileZoom) {\r\n  \t\t\t\ttile = this._tiles[i].el;\r\n\r\n  \t\t\t\ttile.onload = falseFn;\r\n  \t\t\t\ttile.onerror = falseFn;\r\n\r\n  \t\t\t\tif (!tile.complete) {\r\n  \t\t\t\t\ttile.src = emptyImageUrl;\r\n  \t\t\t\t\tremove(tile);\r\n  \t\t\t\t\tdelete this._tiles[i];\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t}\r\n  \t},\r\n\r\n  \t_removeTile: function (key) {\r\n  \t\tvar tile = this._tiles[key];\r\n  \t\tif (!tile) { return; }\r\n\r\n  \t\t// Cancels any pending http requests associated with the tile\r\n  \t\t// unless we're on Android's stock browser,\r\n  \t\t// see https://github.com/Leaflet/Leaflet/issues/137\r\n  \t\tif (!androidStock) {\r\n  \t\t\ttile.el.setAttribute('src', emptyImageUrl);\r\n  \t\t}\r\n\r\n  \t\treturn GridLayer.prototype._removeTile.call(this, key);\r\n  \t},\r\n\r\n  \t_tileReady: function (coords, err, tile) {\r\n  \t\tif (!this._map || (tile && tile.getAttribute('src') === emptyImageUrl)) {\r\n  \t\t\treturn;\r\n  \t\t}\r\n\r\n  \t\treturn GridLayer.prototype._tileReady.call(this, coords, err, tile);\r\n  \t}\r\n  });\r\n\r\n\r\n  // @factory L.tilelayer(urlTemplate: String, options?: TileLayer options)\r\n  // Instantiates a tile layer object given a `URL template` and optionally an options object.\r\n\r\n  function tileLayer(url, options) {\r\n  \treturn new TileLayer(url, options);\r\n  }\n\n  /*\r\n   * @class TileLayer.WMS\r\n   * @inherits TileLayer\r\n   * @aka L.TileLayer.WMS\r\n   * Used to display [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services as tile layers on the map. Extends `TileLayer`.\r\n   *\r\n   * @example\r\n   *\r\n   * ```js\r\n   * var nexrad = L.tileLayer.wms(\"http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi\", {\r\n   * \tlayers: 'nexrad-n0r-900913',\r\n   * \tformat: 'image/png',\r\n   * \ttransparent: true,\r\n   * \tattribution: \"Weather data © 2012 IEM Nexrad\"\r\n   * });\r\n   * ```\r\n   */\r\n\r\n  var TileLayerWMS = TileLayer.extend({\r\n\r\n  \t// @section\r\n  \t// @aka TileLayer.WMS options\r\n  \t// If any custom options not documented here are used, they will be sent to the\r\n  \t// WMS server as extra parameters in each request URL. This can be useful for\r\n  \t// [non-standard vendor WMS parameters](http://docs.geoserver.org/stable/en/user/services/wms/vendor.html).\r\n  \tdefaultWmsParams: {\r\n  \t\tservice: 'WMS',\r\n  \t\trequest: 'GetMap',\r\n\r\n  \t\t// @option layers: String = ''\r\n  \t\t// **(required)** Comma-separated list of WMS layers to show.\r\n  \t\tlayers: '',\r\n\r\n  \t\t// @option styles: String = ''\r\n  \t\t// Comma-separated list of WMS styles.\r\n  \t\tstyles: '',\r\n\r\n  \t\t// @option format: String = 'image/jpeg'\r\n  \t\t// WMS image format (use `'image/png'` for layers with transparency).\r\n  \t\tformat: 'image/jpeg',\r\n\r\n  \t\t// @option transparent: Boolean = false\r\n  \t\t// If `true`, the WMS service will return images with transparency.\r\n  \t\ttransparent: false,\r\n\r\n  \t\t// @option version: String = '1.1.1'\r\n  \t\t// Version of the WMS service to use\r\n  \t\tversion: '1.1.1'\r\n  \t},\r\n\r\n  \toptions: {\r\n  \t\t// @option crs: CRS = null\r\n  \t\t// Coordinate Reference System to use for the WMS requests, defaults to\r\n  \t\t// map CRS. Don't change this if you're not sure what it means.\r\n  \t\tcrs: null,\r\n\r\n  \t\t// @option uppercase: Boolean = false\r\n  \t\t// If `true`, WMS request parameter keys will be uppercase.\r\n  \t\tuppercase: false\r\n  \t},\r\n\r\n  \tinitialize: function (url, options) {\r\n\r\n  \t\tthis._url = url;\r\n\r\n  \t\tvar wmsParams = extend({}, this.defaultWmsParams);\r\n\r\n  \t\t// all keys that are not TileLayer options go to WMS params\r\n  \t\tfor (var i in options) {\r\n  \t\t\tif (!(i in this.options)) {\r\n  \t\t\t\twmsParams[i] = options[i];\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\toptions = setOptions(this, options);\r\n\r\n  \t\tvar realRetina = options.detectRetina && retina ? 2 : 1;\r\n  \t\tvar tileSize = this.getTileSize();\r\n  \t\twmsParams.width = tileSize.x * realRetina;\r\n  \t\twmsParams.height = tileSize.y * realRetina;\r\n\r\n  \t\tthis.wmsParams = wmsParams;\r\n  \t},\r\n\r\n  \tonAdd: function (map) {\r\n\r\n  \t\tthis._crs = this.options.crs || map.options.crs;\r\n  \t\tthis._wmsVersion = parseFloat(this.wmsParams.version);\r\n\r\n  \t\tvar projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\r\n  \t\tthis.wmsParams[projectionKey] = this._crs.code;\r\n\r\n  \t\tTileLayer.prototype.onAdd.call(this, map);\r\n  \t},\r\n\r\n  \tgetTileUrl: function (coords) {\r\n\r\n  \t\tvar tileBounds = this._tileCoordsToNwSe(coords),\r\n  \t\t    crs = this._crs,\r\n  \t\t    bounds = toBounds(crs.project(tileBounds[0]), crs.project(tileBounds[1])),\r\n  \t\t    min = bounds.min,\r\n  \t\t    max = bounds.max,\r\n  \t\t    bbox = (this._wmsVersion >= 1.3 && this._crs === EPSG4326 ?\r\n  \t\t    [min.y, min.x, max.y, max.x] :\r\n  \t\t    [min.x, min.y, max.x, max.y]).join(','),\r\n  \t\t    url = TileLayer.prototype.getTileUrl.call(this, coords);\r\n  \t\treturn url +\r\n  \t\t\tgetParamString(this.wmsParams, url, this.options.uppercase) +\r\n  \t\t\t(this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\r\n  \t},\r\n\r\n  \t// @method setParams(params: Object, noRedraw?: Boolean): this\r\n  \t// Merges an object with the new parameters and re-requests tiles on the current screen (unless `noRedraw` was set to true).\r\n  \tsetParams: function (params, noRedraw) {\r\n\r\n  \t\textend(this.wmsParams, params);\r\n\r\n  \t\tif (!noRedraw) {\r\n  \t\t\tthis.redraw();\r\n  \t\t}\r\n\r\n  \t\treturn this;\r\n  \t}\r\n  });\r\n\r\n\r\n  // @factory L.tileLayer.wms(baseUrl: String, options: TileLayer.WMS options)\r\n  // Instantiates a WMS tile layer object given a base URL of the WMS service and a WMS parameters/options object.\r\n  function tileLayerWMS(url, options) {\r\n  \treturn new TileLayerWMS(url, options);\r\n  }\n\n  TileLayer.WMS = TileLayerWMS;\n  tileLayer.wms = tileLayerWMS;\n\n  /*\n   * @class Renderer\n   * @inherits Layer\n   * @aka L.Renderer\n   *\n   * Base class for vector renderer implementations (`SVG`, `Canvas`). Handles the\n   * DOM container of the renderer, its bounds, and its zoom animation.\n   *\n   * A `Renderer` works as an implicit layer group for all `Path`s - the renderer\n   * itself can be added or removed to the map. All paths use a renderer, which can\n   * be implicit (the map will decide the type of renderer and use it automatically)\n   * or explicit (using the [`renderer`](#path-renderer) option of the path).\n   *\n   * Do not use this class directly, use `SVG` and `Canvas` instead.\n   *\n   * @event update: Event\n   * Fired when the renderer updates its bounds, center and zoom, for example when\n   * its map has moved\n   */\n\n  var Renderer = Layer.extend({\n\n  \t// @section\n  \t// @aka Renderer options\n  \toptions: {\n  \t\t// @option padding: Number = 0.1\n  \t\t// How much to extend the clip area around the map view (relative to its size)\n  \t\t// e.g. 0.1 would be 10% of map view in each direction\n  \t\tpadding: 0.1,\n\n  \t\t// @option tolerance: Number = 0\n  \t\t// How much to extend click tolerance round a path/object on the map\n  \t\ttolerance : 0\n  \t},\n\n  \tinitialize: function (options) {\n  \t\tsetOptions(this, options);\n  \t\tstamp(this);\n  \t\tthis._layers = this._layers || {};\n  \t},\n\n  \tonAdd: function () {\n  \t\tif (!this._container) {\n  \t\t\tthis._initContainer(); // defined by renderer implementations\n\n  \t\t\tif (this._zoomAnimated) {\n  \t\t\t\taddClass(this._container, 'leaflet-zoom-animated');\n  \t\t\t}\n  \t\t}\n\n  \t\tthis.getPane().appendChild(this._container);\n  \t\tthis._update();\n  \t\tthis.on('update', this._updatePaths, this);\n  \t},\n\n  \tonRemove: function () {\n  \t\tthis.off('update', this._updatePaths, this);\n  \t\tthis._destroyContainer();\n  \t},\n\n  \tgetEvents: function () {\n  \t\tvar events = {\n  \t\t\tviewreset: this._reset,\n  \t\t\tzoom: this._onZoom,\n  \t\t\tmoveend: this._update,\n  \t\t\tzoomend: this._onZoomEnd\n  \t\t};\n  \t\tif (this._zoomAnimated) {\n  \t\t\tevents.zoomanim = this._onAnimZoom;\n  \t\t}\n  \t\treturn events;\n  \t},\n\n  \t_onAnimZoom: function (ev) {\n  \t\tthis._updateTransform(ev.center, ev.zoom);\n  \t},\n\n  \t_onZoom: function () {\n  \t\tthis._updateTransform(this._map.getCenter(), this._map.getZoom());\n  \t},\n\n  \t_updateTransform: function (center, zoom) {\n  \t\tvar scale = this._map.getZoomScale(zoom, this._zoom),\n  \t\t    position = getPosition(this._container),\n  \t\t    viewHalf = this._map.getSize().multiplyBy(0.5 + this.options.padding),\n  \t\t    currentCenterPoint = this._map.project(this._center, zoom),\n  \t\t    destCenterPoint = this._map.project(center, zoom),\n  \t\t    centerOffset = destCenterPoint.subtract(currentCenterPoint),\n\n  \t\t    topLeftOffset = viewHalf.multiplyBy(-scale).add(position).add(viewHalf).subtract(centerOffset);\n\n  \t\tif (any3d) {\n  \t\t\tsetTransform(this._container, topLeftOffset, scale);\n  \t\t} else {\n  \t\t\tsetPosition(this._container, topLeftOffset);\n  \t\t}\n  \t},\n\n  \t_reset: function () {\n  \t\tthis._update();\n  \t\tthis._updateTransform(this._center, this._zoom);\n\n  \t\tfor (var id in this._layers) {\n  \t\t\tthis._layers[id]._reset();\n  \t\t}\n  \t},\n\n  \t_onZoomEnd: function () {\n  \t\tfor (var id in this._layers) {\n  \t\t\tthis._layers[id]._project();\n  \t\t}\n  \t},\n\n  \t_updatePaths: function () {\n  \t\tfor (var id in this._layers) {\n  \t\t\tthis._layers[id]._update();\n  \t\t}\n  \t},\n\n  \t_update: function () {\n  \t\t// Update pixel bounds of renderer container (for positioning/sizing/clipping later)\n  \t\t// Subclasses are responsible of firing the 'update' event.\n  \t\tvar p = this.options.padding,\n  \t\t    size = this._map.getSize(),\n  \t\t    min = this._map.containerPointToLayerPoint(size.multiplyBy(-p)).round();\n\n  \t\tthis._bounds = new Bounds(min, min.add(size.multiplyBy(1 + p * 2)).round());\n\n  \t\tthis._center = this._map.getCenter();\n  \t\tthis._zoom = this._map.getZoom();\n  \t}\n  });\n\n  /*\n   * @class Canvas\n   * @inherits Renderer\n   * @aka L.Canvas\n   *\n   * Allows vector layers to be displayed with [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).\n   * Inherits `Renderer`.\n   *\n   * Due to [technical limitations](http://caniuse.com/#search=canvas), Canvas is not\n   * available in all web browsers, notably IE8, and overlapping geometries might\n   * not display properly in some edge cases.\n   *\n   * @example\n   *\n   * Use Canvas by default for all paths in the map:\n   *\n   * ```js\n   * var map = L.map('map', {\n   * \trenderer: L.canvas()\n   * });\n   * ```\n   *\n   * Use a Canvas renderer with extra padding for specific vector geometries:\n   *\n   * ```js\n   * var map = L.map('map');\n   * var myRenderer = L.canvas({ padding: 0.5 });\n   * var line = L.polyline( coordinates, { renderer: myRenderer } );\n   * var circle = L.circle( center, { renderer: myRenderer } );\n   * ```\n   */\n\n  var Canvas = Renderer.extend({\n  \tgetEvents: function () {\n  \t\tvar events = Renderer.prototype.getEvents.call(this);\n  \t\tevents.viewprereset = this._onViewPreReset;\n  \t\treturn events;\n  \t},\n\n  \t_onViewPreReset: function () {\n  \t\t// Set a flag so that a viewprereset+moveend+viewreset only updates&redraws once\n  \t\tthis._postponeUpdatePaths = true;\n  \t},\n\n  \tonAdd: function () {\n  \t\tRenderer.prototype.onAdd.call(this);\n\n  \t\t// Redraw vectors since canvas is cleared upon removal,\n  \t\t// in case of removing the renderer itself from the map.\n  \t\tthis._draw();\n  \t},\n\n  \t_initContainer: function () {\n  \t\tvar container = this._container = document.createElement('canvas');\n\n  \t\ton(container, 'mousemove', this._onMouseMove, this);\n  \t\ton(container, 'click dblclick mousedown mouseup contextmenu', this._onClick, this);\n  \t\ton(container, 'mouseout', this._handleMouseOut, this);\n\n  \t\tthis._ctx = container.getContext('2d');\n  \t},\n\n  \t_destroyContainer: function () {\n  \t\tcancelAnimFrame(this._redrawRequest);\n  \t\tdelete this._ctx;\n  \t\tremove(this._container);\n  \t\toff(this._container);\n  \t\tdelete this._container;\n  \t},\n\n  \t_updatePaths: function () {\n  \t\tif (this._postponeUpdatePaths) { return; }\n\n  \t\tvar layer;\n  \t\tthis._redrawBounds = null;\n  \t\tfor (var id in this._layers) {\n  \t\t\tlayer = this._layers[id];\n  \t\t\tlayer._update();\n  \t\t}\n  \t\tthis._redraw();\n  \t},\n\n  \t_update: function () {\n  \t\tif (this._map._animatingZoom && this._bounds) { return; }\n\n  \t\tRenderer.prototype._update.call(this);\n\n  \t\tvar b = this._bounds,\n  \t\t    container = this._container,\n  \t\t    size = b.getSize(),\n  \t\t    m = retina ? 2 : 1;\n\n  \t\tsetPosition(container, b.min);\n\n  \t\t// set canvas size (also clearing it); use double size on retina\n  \t\tcontainer.width = m * size.x;\n  \t\tcontainer.height = m * size.y;\n  \t\tcontainer.style.width = size.x + 'px';\n  \t\tcontainer.style.height = size.y + 'px';\n\n  \t\tif (retina) {\n  \t\t\tthis._ctx.scale(2, 2);\n  \t\t}\n\n  \t\t// translate so we use the same path coordinates after canvas element moves\n  \t\tthis._ctx.translate(-b.min.x, -b.min.y);\n\n  \t\t// Tell paths to redraw themselves\n  \t\tthis.fire('update');\n  \t},\n\n  \t_reset: function () {\n  \t\tRenderer.prototype._reset.call(this);\n\n  \t\tif (this._postponeUpdatePaths) {\n  \t\t\tthis._postponeUpdatePaths = false;\n  \t\t\tthis._updatePaths();\n  \t\t}\n  \t},\n\n  \t_initPath: function (layer) {\n  \t\tthis._updateDashArray(layer);\n  \t\tthis._layers[stamp(layer)] = layer;\n\n  \t\tvar order = layer._order = {\n  \t\t\tlayer: layer,\n  \t\t\tprev: this._drawLast,\n  \t\t\tnext: null\n  \t\t};\n  \t\tif (this._drawLast) { this._drawLast.next = order; }\n  \t\tthis._drawLast = order;\n  \t\tthis._drawFirst = this._drawFirst || this._drawLast;\n  \t},\n\n  \t_addPath: function (layer) {\n  \t\tthis._requestRedraw(layer);\n  \t},\n\n  \t_removePath: function (layer) {\n  \t\tvar order = layer._order;\n  \t\tvar next = order.next;\n  \t\tvar prev = order.prev;\n\n  \t\tif (next) {\n  \t\t\tnext.prev = prev;\n  \t\t} else {\n  \t\t\tthis._drawLast = prev;\n  \t\t}\n  \t\tif (prev) {\n  \t\t\tprev.next = next;\n  \t\t} else {\n  \t\t\tthis._drawFirst = next;\n  \t\t}\n\n  \t\tdelete layer._order;\n\n  \t\tdelete this._layers[stamp(layer)];\n\n  \t\tthis._requestRedraw(layer);\n  \t},\n\n  \t_updatePath: function (layer) {\n  \t\t// Redraw the union of the layer's old pixel\n  \t\t// bounds and the new pixel bounds.\n  \t\tthis._extendRedrawBounds(layer);\n  \t\tlayer._project();\n  \t\tlayer._update();\n  \t\t// The redraw will extend the redraw bounds\n  \t\t// with the new pixel bounds.\n  \t\tthis._requestRedraw(layer);\n  \t},\n\n  \t_updateStyle: function (layer) {\n  \t\tthis._updateDashArray(layer);\n  \t\tthis._requestRedraw(layer);\n  \t},\n\n  \t_updateDashArray: function (layer) {\n  \t\tif (typeof layer.options.dashArray === 'string') {\n  \t\t\tvar parts = layer.options.dashArray.split(/[, ]+/),\n  \t\t\t    dashArray = [],\n  \t\t\t    dashValue,\n  \t\t\t    i;\n  \t\t\tfor (i = 0; i < parts.length; i++) {\n  \t\t\t\tdashValue = Number(parts[i]);\n  \t\t\t\t// Ignore dash array containing invalid lengths\n  \t\t\t\tif (isNaN(dashValue)) { return; }\n  \t\t\t\tdashArray.push(dashValue);\n  \t\t\t}\n  \t\t\tlayer.options._dashArray = dashArray;\n  \t\t} else {\n  \t\t\tlayer.options._dashArray = layer.options.dashArray;\n  \t\t}\n  \t},\n\n  \t_requestRedraw: function (layer) {\n  \t\tif (!this._map) { return; }\n\n  \t\tthis._extendRedrawBounds(layer);\n  \t\tthis._redrawRequest = this._redrawRequest || requestAnimFrame(this._redraw, this);\n  \t},\n\n  \t_extendRedrawBounds: function (layer) {\n  \t\tif (layer._pxBounds) {\n  \t\t\tvar padding = (layer.options.weight || 0) + 1;\n  \t\t\tthis._redrawBounds = this._redrawBounds || new Bounds();\n  \t\t\tthis._redrawBounds.extend(layer._pxBounds.min.subtract([padding, padding]));\n  \t\t\tthis._redrawBounds.extend(layer._pxBounds.max.add([padding, padding]));\n  \t\t}\n  \t},\n\n  \t_redraw: function () {\n  \t\tthis._redrawRequest = null;\n\n  \t\tif (this._redrawBounds) {\n  \t\t\tthis._redrawBounds.min._floor();\n  \t\t\tthis._redrawBounds.max._ceil();\n  \t\t}\n\n  \t\tthis._clear(); // clear layers in redraw bounds\n  \t\tthis._draw(); // draw layers\n\n  \t\tthis._redrawBounds = null;\n  \t},\n\n  \t_clear: function () {\n  \t\tvar bounds = this._redrawBounds;\n  \t\tif (bounds) {\n  \t\t\tvar size = bounds.getSize();\n  \t\t\tthis._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y);\n  \t\t} else {\n  \t\t\tthis._ctx.save();\n  \t\t\tthis._ctx.setTransform(1, 0, 0, 1, 0, 0);\n  \t\t\tthis._ctx.clearRect(0, 0, this._container.width, this._container.height);\n  \t\t\tthis._ctx.restore();\n  \t\t}\n  \t},\n\n  \t_draw: function () {\n  \t\tvar layer, bounds = this._redrawBounds;\n  \t\tthis._ctx.save();\n  \t\tif (bounds) {\n  \t\t\tvar size = bounds.getSize();\n  \t\t\tthis._ctx.beginPath();\n  \t\t\tthis._ctx.rect(bounds.min.x, bounds.min.y, size.x, size.y);\n  \t\t\tthis._ctx.clip();\n  \t\t}\n\n  \t\tthis._drawing = true;\n\n  \t\tfor (var order = this._drawFirst; order; order = order.next) {\n  \t\t\tlayer = order.layer;\n  \t\t\tif (!bounds || (layer._pxBounds && layer._pxBounds.intersects(bounds))) {\n  \t\t\t\tlayer._updatePath();\n  \t\t\t}\n  \t\t}\n\n  \t\tthis._drawing = false;\n\n  \t\tthis._ctx.restore();  // Restore state before clipping.\n  \t},\n\n  \t_updatePoly: function (layer, closed) {\n  \t\tif (!this._drawing) { return; }\n\n  \t\tvar i, j, len2, p,\n  \t\t    parts = layer._parts,\n  \t\t    len = parts.length,\n  \t\t    ctx = this._ctx;\n\n  \t\tif (!len) { return; }\n\n  \t\tctx.beginPath();\n\n  \t\tfor (i = 0; i < len; i++) {\n  \t\t\tfor (j = 0, len2 = parts[i].length; j < len2; j++) {\n  \t\t\t\tp = parts[i][j];\n  \t\t\t\tctx[j ? 'lineTo' : 'moveTo'](p.x, p.y);\n  \t\t\t}\n  \t\t\tif (closed) {\n  \t\t\t\tctx.closePath();\n  \t\t\t}\n  \t\t}\n\n  \t\tthis._fillStroke(ctx, layer);\n\n  \t\t// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature\n  \t},\n\n  \t_updateCircle: function (layer) {\n\n  \t\tif (!this._drawing || layer._empty()) { return; }\n\n  \t\tvar p = layer._point,\n  \t\t    ctx = this._ctx,\n  \t\t    r = Math.max(Math.round(layer._radius), 1),\n  \t\t    s = (Math.max(Math.round(layer._radiusY), 1) || r) / r;\n\n  \t\tif (s !== 1) {\n  \t\t\tctx.save();\n  \t\t\tctx.scale(1, s);\n  \t\t}\n\n  \t\tctx.beginPath();\n  \t\tctx.arc(p.x, p.y / s, r, 0, Math.PI * 2, false);\n\n  \t\tif (s !== 1) {\n  \t\t\tctx.restore();\n  \t\t}\n\n  \t\tthis._fillStroke(ctx, layer);\n  \t},\n\n  \t_fillStroke: function (ctx, layer) {\n  \t\tvar options = layer.options;\n\n  \t\tif (options.fill) {\n  \t\t\tctx.globalAlpha = options.fillOpacity;\n  \t\t\tctx.fillStyle = options.fillColor || options.color;\n  \t\t\tctx.fill(options.fillRule || 'evenodd');\n  \t\t}\n\n  \t\tif (options.stroke && options.weight !== 0) {\n  \t\t\tif (ctx.setLineDash) {\n  \t\t\t\tctx.setLineDash(layer.options && layer.options._dashArray || []);\n  \t\t\t}\n  \t\t\tctx.globalAlpha = options.opacity;\n  \t\t\tctx.lineWidth = options.weight;\n  \t\t\tctx.strokeStyle = options.color;\n  \t\t\tctx.lineCap = options.lineCap;\n  \t\t\tctx.lineJoin = options.lineJoin;\n  \t\t\tctx.stroke();\n  \t\t}\n  \t},\n\n  \t// Canvas obviously doesn't have mouse events for individual drawn objects,\n  \t// so we emulate that by calculating what's under the mouse on mousemove/click manually\n\n  \t_onClick: function (e) {\n  \t\tvar point = this._map.mouseEventToLayerPoint(e), layer, clickedLayer;\n\n  \t\tfor (var order = this._drawFirst; order; order = order.next) {\n  \t\t\tlayer = order.layer;\n  \t\t\tif (layer.options.interactive && layer._containsPoint(point)) {\n  \t\t\t\tif (!(e.type === 'click' || e.type !== 'preclick') || !this._map._draggableMoved(layer)) {\n  \t\t\t\t\tclickedLayer = layer;\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t\tif (clickedLayer)  {\n  \t\t\tfakeStop(e);\n  \t\t\tthis._fireEvent([clickedLayer], e);\n  \t\t}\n  \t},\n\n  \t_onMouseMove: function (e) {\n  \t\tif (!this._map || this._map.dragging.moving() || this._map._animatingZoom) { return; }\n\n  \t\tvar point = this._map.mouseEventToLayerPoint(e);\n  \t\tthis._handleMouseHover(e, point);\n  \t},\n\n\n  \t_handleMouseOut: function (e) {\n  \t\tvar layer = this._hoveredLayer;\n  \t\tif (layer) {\n  \t\t\t// if we're leaving the layer, fire mouseout\n  \t\t\tremoveClass(this._container, 'leaflet-interactive');\n  \t\t\tthis._fireEvent([layer], e, 'mouseout');\n  \t\t\tthis._hoveredLayer = null;\n  \t\t\tthis._mouseHoverThrottled = false;\n  \t\t}\n  \t},\n\n  \t_handleMouseHover: function (e, point) {\n  \t\tif (this._mouseHoverThrottled) {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tvar layer, candidateHoveredLayer;\n\n  \t\tfor (var order = this._drawFirst; order; order = order.next) {\n  \t\t\tlayer = order.layer;\n  \t\t\tif (layer.options.interactive && layer._containsPoint(point)) {\n  \t\t\t\tcandidateHoveredLayer = layer;\n  \t\t\t}\n  \t\t}\n\n  \t\tif (candidateHoveredLayer !== this._hoveredLayer) {\n  \t\t\tthis._handleMouseOut(e);\n\n  \t\t\tif (candidateHoveredLayer) {\n  \t\t\t\taddClass(this._container, 'leaflet-interactive'); // change cursor\n  \t\t\t\tthis._fireEvent([candidateHoveredLayer], e, 'mouseover');\n  \t\t\t\tthis._hoveredLayer = candidateHoveredLayer;\n  \t\t\t}\n  \t\t}\n\n  \t\tif (this._hoveredLayer) {\n  \t\t\tthis._fireEvent([this._hoveredLayer], e);\n  \t\t}\n\n  \t\tthis._mouseHoverThrottled = true;\n  \t\tsetTimeout(bind(function () {\n  \t\t\tthis._mouseHoverThrottled = false;\n  \t\t}, this), 32);\n  \t},\n\n  \t_fireEvent: function (layers, e, type) {\n  \t\tthis._map._fireDOMEvent(e, type || e.type, layers);\n  \t},\n\n  \t_bringToFront: function (layer) {\n  \t\tvar order = layer._order;\n\n  \t\tif (!order) { return; }\n\n  \t\tvar next = order.next;\n  \t\tvar prev = order.prev;\n\n  \t\tif (next) {\n  \t\t\tnext.prev = prev;\n  \t\t} else {\n  \t\t\t// Already last\n  \t\t\treturn;\n  \t\t}\n  \t\tif (prev) {\n  \t\t\tprev.next = next;\n  \t\t} else if (next) {\n  \t\t\t// Update first entry unless this is the\n  \t\t\t// single entry\n  \t\t\tthis._drawFirst = next;\n  \t\t}\n\n  \t\torder.prev = this._drawLast;\n  \t\tthis._drawLast.next = order;\n\n  \t\torder.next = null;\n  \t\tthis._drawLast = order;\n\n  \t\tthis._requestRedraw(layer);\n  \t},\n\n  \t_bringToBack: function (layer) {\n  \t\tvar order = layer._order;\n\n  \t\tif (!order) { return; }\n\n  \t\tvar next = order.next;\n  \t\tvar prev = order.prev;\n\n  \t\tif (prev) {\n  \t\t\tprev.next = next;\n  \t\t} else {\n  \t\t\t// Already first\n  \t\t\treturn;\n  \t\t}\n  \t\tif (next) {\n  \t\t\tnext.prev = prev;\n  \t\t} else if (prev) {\n  \t\t\t// Update last entry unless this is the\n  \t\t\t// single entry\n  \t\t\tthis._drawLast = prev;\n  \t\t}\n\n  \t\torder.prev = null;\n\n  \t\torder.next = this._drawFirst;\n  \t\tthis._drawFirst.prev = order;\n  \t\tthis._drawFirst = order;\n\n  \t\tthis._requestRedraw(layer);\n  \t}\n  });\n\n  // @factory L.canvas(options?: Renderer options)\n  // Creates a Canvas renderer with the given options.\n  function canvas$1(options) {\n  \treturn canvas ? new Canvas(options) : null;\n  }\n\n  /*\n   * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!\n   */\n\n\n  var vmlCreate = (function () {\n  \ttry {\n  \t\tdocument.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');\n  \t\treturn function (name) {\n  \t\t\treturn document.createElement('<lvml:' + name + ' class=\"lvml\">');\n  \t\t};\n  \t} catch (e) {\n  \t\treturn function (name) {\n  \t\t\treturn document.createElement('<' + name + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">');\n  \t\t};\n  \t}\n  })();\n\n\n  /*\n   * @class SVG\n   *\n   *\n   * VML was deprecated in 2012, which means VML functionality exists only for backwards compatibility\n   * with old versions of Internet Explorer.\n   */\n\n  // mixin to redefine some SVG methods to handle VML syntax which is similar but with some differences\n  var vmlMixin = {\n\n  \t_initContainer: function () {\n  \t\tthis._container = create$1('div', 'leaflet-vml-container');\n  \t},\n\n  \t_update: function () {\n  \t\tif (this._map._animatingZoom) { return; }\n  \t\tRenderer.prototype._update.call(this);\n  \t\tthis.fire('update');\n  \t},\n\n  \t_initPath: function (layer) {\n  \t\tvar container = layer._container = vmlCreate('shape');\n\n  \t\taddClass(container, 'leaflet-vml-shape ' + (this.options.className || ''));\n\n  \t\tcontainer.coordsize = '1 1';\n\n  \t\tlayer._path = vmlCreate('path');\n  \t\tcontainer.appendChild(layer._path);\n\n  \t\tthis._updateStyle(layer);\n  \t\tthis._layers[stamp(layer)] = layer;\n  \t},\n\n  \t_addPath: function (layer) {\n  \t\tvar container = layer._container;\n  \t\tthis._container.appendChild(container);\n\n  \t\tif (layer.options.interactive) {\n  \t\t\tlayer.addInteractiveTarget(container);\n  \t\t}\n  \t},\n\n  \t_removePath: function (layer) {\n  \t\tvar container = layer._container;\n  \t\tremove(container);\n  \t\tlayer.removeInteractiveTarget(container);\n  \t\tdelete this._layers[stamp(layer)];\n  \t},\n\n  \t_updateStyle: function (layer) {\n  \t\tvar stroke = layer._stroke,\n  \t\t    fill = layer._fill,\n  \t\t    options = layer.options,\n  \t\t    container = layer._container;\n\n  \t\tcontainer.stroked = !!options.stroke;\n  \t\tcontainer.filled = !!options.fill;\n\n  \t\tif (options.stroke) {\n  \t\t\tif (!stroke) {\n  \t\t\t\tstroke = layer._stroke = vmlCreate('stroke');\n  \t\t\t}\n  \t\t\tcontainer.appendChild(stroke);\n  \t\t\tstroke.weight = options.weight + 'px';\n  \t\t\tstroke.color = options.color;\n  \t\t\tstroke.opacity = options.opacity;\n\n  \t\t\tif (options.dashArray) {\n  \t\t\t\tstroke.dashStyle = isArray(options.dashArray) ?\n  \t\t\t\t    options.dashArray.join(' ') :\n  \t\t\t\t    options.dashArray.replace(/( *, *)/g, ' ');\n  \t\t\t} else {\n  \t\t\t\tstroke.dashStyle = '';\n  \t\t\t}\n  \t\t\tstroke.endcap = options.lineCap.replace('butt', 'flat');\n  \t\t\tstroke.joinstyle = options.lineJoin;\n\n  \t\t} else if (stroke) {\n  \t\t\tcontainer.removeChild(stroke);\n  \t\t\tlayer._stroke = null;\n  \t\t}\n\n  \t\tif (options.fill) {\n  \t\t\tif (!fill) {\n  \t\t\t\tfill = layer._fill = vmlCreate('fill');\n  \t\t\t}\n  \t\t\tcontainer.appendChild(fill);\n  \t\t\tfill.color = options.fillColor || options.color;\n  \t\t\tfill.opacity = options.fillOpacity;\n\n  \t\t} else if (fill) {\n  \t\t\tcontainer.removeChild(fill);\n  \t\t\tlayer._fill = null;\n  \t\t}\n  \t},\n\n  \t_updateCircle: function (layer) {\n  \t\tvar p = layer._point.round(),\n  \t\t    r = Math.round(layer._radius),\n  \t\t    r2 = Math.round(layer._radiusY || r);\n\n  \t\tthis._setPath(layer, layer._empty() ? 'M0 0' :\n  \t\t\t'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r2 + ' 0,' + (65535 * 360));\n  \t},\n\n  \t_setPath: function (layer, path) {\n  \t\tlayer._path.v = path;\n  \t},\n\n  \t_bringToFront: function (layer) {\n  \t\ttoFront(layer._container);\n  \t},\n\n  \t_bringToBack: function (layer) {\n  \t\ttoBack(layer._container);\n  \t}\n  };\n\n  var create$2 = vml ? vmlCreate : svgCreate;\n\n  /*\n   * @class SVG\n   * @inherits Renderer\n   * @aka L.SVG\n   *\n   * Allows vector layers to be displayed with [SVG](https://developer.mozilla.org/docs/Web/SVG).\n   * Inherits `Renderer`.\n   *\n   * Due to [technical limitations](http://caniuse.com/#search=svg), SVG is not\n   * available in all web browsers, notably Android 2.x and 3.x.\n   *\n   * Although SVG is not available on IE7 and IE8, these browsers support\n   * [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language)\n   * (a now deprecated technology), and the SVG renderer will fall back to VML in\n   * this case.\n   *\n   * @example\n   *\n   * Use SVG by default for all paths in the map:\n   *\n   * ```js\n   * var map = L.map('map', {\n   * \trenderer: L.svg()\n   * });\n   * ```\n   *\n   * Use a SVG renderer with extra padding for specific vector geometries:\n   *\n   * ```js\n   * var map = L.map('map');\n   * var myRenderer = L.svg({ padding: 0.5 });\n   * var line = L.polyline( coordinates, { renderer: myRenderer } );\n   * var circle = L.circle( center, { renderer: myRenderer } );\n   * ```\n   */\n\n  var SVG = Renderer.extend({\n\n  \tgetEvents: function () {\n  \t\tvar events = Renderer.prototype.getEvents.call(this);\n  \t\tevents.zoomstart = this._onZoomStart;\n  \t\treturn events;\n  \t},\n\n  \t_initContainer: function () {\n  \t\tthis._container = create$2('svg');\n\n  \t\t// makes it possible to click through svg root; we'll reset it back in individual paths\n  \t\tthis._container.setAttribute('pointer-events', 'none');\n\n  \t\tthis._rootGroup = create$2('g');\n  \t\tthis._container.appendChild(this._rootGroup);\n  \t},\n\n  \t_destroyContainer: function () {\n  \t\tremove(this._container);\n  \t\toff(this._container);\n  \t\tdelete this._container;\n  \t\tdelete this._rootGroup;\n  \t\tdelete this._svgSize;\n  \t},\n\n  \t_onZoomStart: function () {\n  \t\t// Drag-then-pinch interactions might mess up the center and zoom.\n  \t\t// In this case, the easiest way to prevent this is re-do the renderer\n  \t\t//   bounds and padding when the zooming starts.\n  \t\tthis._update();\n  \t},\n\n  \t_update: function () {\n  \t\tif (this._map._animatingZoom && this._bounds) { return; }\n\n  \t\tRenderer.prototype._update.call(this);\n\n  \t\tvar b = this._bounds,\n  \t\t    size = b.getSize(),\n  \t\t    container = this._container;\n\n  \t\t// set size of svg-container if changed\n  \t\tif (!this._svgSize || !this._svgSize.equals(size)) {\n  \t\t\tthis._svgSize = size;\n  \t\t\tcontainer.setAttribute('width', size.x);\n  \t\t\tcontainer.setAttribute('height', size.y);\n  \t\t}\n\n  \t\t// movement: update container viewBox so that we don't have to change coordinates of individual layers\n  \t\tsetPosition(container, b.min);\n  \t\tcontainer.setAttribute('viewBox', [b.min.x, b.min.y, size.x, size.y].join(' '));\n\n  \t\tthis.fire('update');\n  \t},\n\n  \t// methods below are called by vector layers implementations\n\n  \t_initPath: function (layer) {\n  \t\tvar path = layer._path = create$2('path');\n\n  \t\t// @namespace Path\n  \t\t// @option className: String = null\n  \t\t// Custom class name set on an element. Only for SVG renderer.\n  \t\tif (layer.options.className) {\n  \t\t\taddClass(path, layer.options.className);\n  \t\t}\n\n  \t\tif (layer.options.interactive) {\n  \t\t\taddClass(path, 'leaflet-interactive');\n  \t\t}\n\n  \t\tthis._updateStyle(layer);\n  \t\tthis._layers[stamp(layer)] = layer;\n  \t},\n\n  \t_addPath: function (layer) {\n  \t\tif (!this._rootGroup) { this._initContainer(); }\n  \t\tthis._rootGroup.appendChild(layer._path);\n  \t\tlayer.addInteractiveTarget(layer._path);\n  \t},\n\n  \t_removePath: function (layer) {\n  \t\tremove(layer._path);\n  \t\tlayer.removeInteractiveTarget(layer._path);\n  \t\tdelete this._layers[stamp(layer)];\n  \t},\n\n  \t_updatePath: function (layer) {\n  \t\tlayer._project();\n  \t\tlayer._update();\n  \t},\n\n  \t_updateStyle: function (layer) {\n  \t\tvar path = layer._path,\n  \t\t    options = layer.options;\n\n  \t\tif (!path) { return; }\n\n  \t\tif (options.stroke) {\n  \t\t\tpath.setAttribute('stroke', options.color);\n  \t\t\tpath.setAttribute('stroke-opacity', options.opacity);\n  \t\t\tpath.setAttribute('stroke-width', options.weight);\n  \t\t\tpath.setAttribute('stroke-linecap', options.lineCap);\n  \t\t\tpath.setAttribute('stroke-linejoin', options.lineJoin);\n\n  \t\t\tif (options.dashArray) {\n  \t\t\t\tpath.setAttribute('stroke-dasharray', options.dashArray);\n  \t\t\t} else {\n  \t\t\t\tpath.removeAttribute('stroke-dasharray');\n  \t\t\t}\n\n  \t\t\tif (options.dashOffset) {\n  \t\t\t\tpath.setAttribute('stroke-dashoffset', options.dashOffset);\n  \t\t\t} else {\n  \t\t\t\tpath.removeAttribute('stroke-dashoffset');\n  \t\t\t}\n  \t\t} else {\n  \t\t\tpath.setAttribute('stroke', 'none');\n  \t\t}\n\n  \t\tif (options.fill) {\n  \t\t\tpath.setAttribute('fill', options.fillColor || options.color);\n  \t\t\tpath.setAttribute('fill-opacity', options.fillOpacity);\n  \t\t\tpath.setAttribute('fill-rule', options.fillRule || 'evenodd');\n  \t\t} else {\n  \t\t\tpath.setAttribute('fill', 'none');\n  \t\t}\n  \t},\n\n  \t_updatePoly: function (layer, closed) {\n  \t\tthis._setPath(layer, pointsToPath(layer._parts, closed));\n  \t},\n\n  \t_updateCircle: function (layer) {\n  \t\tvar p = layer._point,\n  \t\t    r = Math.max(Math.round(layer._radius), 1),\n  \t\t    r2 = Math.max(Math.round(layer._radiusY), 1) || r,\n  \t\t    arc = 'a' + r + ',' + r2 + ' 0 1,0 ';\n\n  \t\t// drawing a circle with two half-arcs\n  \t\tvar d = layer._empty() ? 'M0 0' :\n  \t\t\t'M' + (p.x - r) + ',' + p.y +\n  \t\t\tarc + (r * 2) + ',0 ' +\n  \t\t\tarc + (-r * 2) + ',0 ';\n\n  \t\tthis._setPath(layer, d);\n  \t},\n\n  \t_setPath: function (layer, path) {\n  \t\tlayer._path.setAttribute('d', path);\n  \t},\n\n  \t// SVG does not have the concept of zIndex so we resort to changing the DOM order of elements\n  \t_bringToFront: function (layer) {\n  \t\ttoFront(layer._path);\n  \t},\n\n  \t_bringToBack: function (layer) {\n  \t\ttoBack(layer._path);\n  \t}\n  });\n\n  if (vml) {\n  \tSVG.include(vmlMixin);\n  }\n\n  // @namespace SVG\n  // @factory L.svg(options?: Renderer options)\n  // Creates a SVG renderer with the given options.\n  function svg$1(options) {\n  \treturn svg || vml ? new SVG(options) : null;\n  }\n\n  Map.include({\n  \t// @namespace Map; @method getRenderer(layer: Path): Renderer\n  \t// Returns the instance of `Renderer` that should be used to render the given\n  \t// `Path`. It will ensure that the `renderer` options of the map and paths\n  \t// are respected, and that the renderers do exist on the map.\n  \tgetRenderer: function (layer) {\n  \t\t// @namespace Path; @option renderer: Renderer\n  \t\t// Use this specific instance of `Renderer` for this path. Takes\n  \t\t// precedence over the map's [default renderer](#map-renderer).\n  \t\tvar renderer = layer.options.renderer || this._getPaneRenderer(layer.options.pane) || this.options.renderer || this._renderer;\n\n  \t\tif (!renderer) {\n  \t\t\trenderer = this._renderer = this._createRenderer();\n  \t\t}\n\n  \t\tif (!this.hasLayer(renderer)) {\n  \t\t\tthis.addLayer(renderer);\n  \t\t}\n  \t\treturn renderer;\n  \t},\n\n  \t_getPaneRenderer: function (name) {\n  \t\tif (name === 'overlayPane' || name === undefined) {\n  \t\t\treturn false;\n  \t\t}\n\n  \t\tvar renderer = this._paneRenderers[name];\n  \t\tif (renderer === undefined) {\n  \t\t\trenderer = this._createRenderer({pane: name});\n  \t\t\tthis._paneRenderers[name] = renderer;\n  \t\t}\n  \t\treturn renderer;\n  \t},\n\n  \t_createRenderer: function (options) {\n  \t\t// @namespace Map; @option preferCanvas: Boolean = false\n  \t\t// Whether `Path`s should be rendered on a `Canvas` renderer.\n  \t\t// By default, all `Path`s are rendered in a `SVG` renderer.\n  \t\treturn (this.options.preferCanvas && canvas$1(options)) || svg$1(options);\n  \t}\n  });\n\n  /*\n   * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.\n   */\n\n  /*\n   * @class Rectangle\n   * @aka L.Rectangle\n   * @inherits Polygon\n   *\n   * A class for drawing rectangle overlays on a map. Extends `Polygon`.\n   *\n   * @example\n   *\n   * ```js\n   * // define rectangle geographical bounds\n   * var bounds = [[54.559322, -5.767822], [56.1210604, -3.021240]];\n   *\n   * // create an orange rectangle\n   * L.rectangle(bounds, {color: \"#ff7800\", weight: 1}).addTo(map);\n   *\n   * // zoom the map to the rectangle bounds\n   * map.fitBounds(bounds);\n   * ```\n   *\n   */\n\n\n  var Rectangle = Polygon.extend({\n  \tinitialize: function (latLngBounds, options) {\n  \t\tPolygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);\n  \t},\n\n  \t// @method setBounds(latLngBounds: LatLngBounds): this\n  \t// Redraws the rectangle with the passed bounds.\n  \tsetBounds: function (latLngBounds) {\n  \t\treturn this.setLatLngs(this._boundsToLatLngs(latLngBounds));\n  \t},\n\n  \t_boundsToLatLngs: function (latLngBounds) {\n  \t\tlatLngBounds = toLatLngBounds(latLngBounds);\n  \t\treturn [\n  \t\t\tlatLngBounds.getSouthWest(),\n  \t\t\tlatLngBounds.getNorthWest(),\n  \t\t\tlatLngBounds.getNorthEast(),\n  \t\t\tlatLngBounds.getSouthEast()\n  \t\t];\n  \t}\n  });\n\n\n  // @factory L.rectangle(latLngBounds: LatLngBounds, options?: Polyline options)\n  function rectangle(latLngBounds, options) {\n  \treturn new Rectangle(latLngBounds, options);\n  }\n\n  SVG.create = create$2;\n  SVG.pointsToPath = pointsToPath;\n\n  GeoJSON.geometryToLayer = geometryToLayer;\n  GeoJSON.coordsToLatLng = coordsToLatLng;\n  GeoJSON.coordsToLatLngs = coordsToLatLngs;\n  GeoJSON.latLngToCoords = latLngToCoords;\n  GeoJSON.latLngsToCoords = latLngsToCoords;\n  GeoJSON.getFeature = getFeature;\n  GeoJSON.asFeature = asFeature;\n\n  /*\n   * L.Handler.BoxZoom is used to add shift-drag zoom interaction to the map\n   * (zoom to a selected bounding box), enabled by default.\n   */\n\n  // @namespace Map\n  // @section Interaction Options\n  Map.mergeOptions({\n  \t// @option boxZoom: Boolean = true\n  \t// Whether the map can be zoomed to a rectangular area specified by\n  \t// dragging the mouse while pressing the shift key.\n  \tboxZoom: true\n  });\n\n  var BoxZoom = Handler.extend({\n  \tinitialize: function (map) {\n  \t\tthis._map = map;\n  \t\tthis._container = map._container;\n  \t\tthis._pane = map._panes.overlayPane;\n  \t\tthis._resetStateTimeout = 0;\n  \t\tmap.on('unload', this._destroy, this);\n  \t},\n\n  \taddHooks: function () {\n  \t\ton(this._container, 'mousedown', this._onMouseDown, this);\n  \t},\n\n  \tremoveHooks: function () {\n  \t\toff(this._container, 'mousedown', this._onMouseDown, this);\n  \t},\n\n  \tmoved: function () {\n  \t\treturn this._moved;\n  \t},\n\n  \t_destroy: function () {\n  \t\tremove(this._pane);\n  \t\tdelete this._pane;\n  \t},\n\n  \t_resetState: function () {\n  \t\tthis._resetStateTimeout = 0;\n  \t\tthis._moved = false;\n  \t},\n\n  \t_clearDeferredResetState: function () {\n  \t\tif (this._resetStateTimeout !== 0) {\n  \t\t\tclearTimeout(this._resetStateTimeout);\n  \t\t\tthis._resetStateTimeout = 0;\n  \t\t}\n  \t},\n\n  \t_onMouseDown: function (e) {\n  \t\tif (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }\n\n  \t\t// Clear the deferred resetState if it hasn't executed yet, otherwise it\n  \t\t// will interrupt the interaction and orphan a box element in the container.\n  \t\tthis._clearDeferredResetState();\n  \t\tthis._resetState();\n\n  \t\tdisableTextSelection();\n  \t\tdisableImageDrag();\n\n  \t\tthis._startPoint = this._map.mouseEventToContainerPoint(e);\n\n  \t\ton(document, {\n  \t\t\tcontextmenu: stop,\n  \t\t\tmousemove: this._onMouseMove,\n  \t\t\tmouseup: this._onMouseUp,\n  \t\t\tkeydown: this._onKeyDown\n  \t\t}, this);\n  \t},\n\n  \t_onMouseMove: function (e) {\n  \t\tif (!this._moved) {\n  \t\t\tthis._moved = true;\n\n  \t\t\tthis._box = create$1('div', 'leaflet-zoom-box', this._container);\n  \t\t\taddClass(this._container, 'leaflet-crosshair');\n\n  \t\t\tthis._map.fire('boxzoomstart');\n  \t\t}\n\n  \t\tthis._point = this._map.mouseEventToContainerPoint(e);\n\n  \t\tvar bounds = new Bounds(this._point, this._startPoint),\n  \t\t    size = bounds.getSize();\n\n  \t\tsetPosition(this._box, bounds.min);\n\n  \t\tthis._box.style.width  = size.x + 'px';\n  \t\tthis._box.style.height = size.y + 'px';\n  \t},\n\n  \t_finish: function () {\n  \t\tif (this._moved) {\n  \t\t\tremove(this._box);\n  \t\t\tremoveClass(this._container, 'leaflet-crosshair');\n  \t\t}\n\n  \t\tenableTextSelection();\n  \t\tenableImageDrag();\n\n  \t\toff(document, {\n  \t\t\tcontextmenu: stop,\n  \t\t\tmousemove: this._onMouseMove,\n  \t\t\tmouseup: this._onMouseUp,\n  \t\t\tkeydown: this._onKeyDown\n  \t\t}, this);\n  \t},\n\n  \t_onMouseUp: function (e) {\n  \t\tif ((e.which !== 1) && (e.button !== 1)) { return; }\n\n  \t\tthis._finish();\n\n  \t\tif (!this._moved) { return; }\n  \t\t// Postpone to next JS tick so internal click event handling\n  \t\t// still see it as \"moved\".\n  \t\tthis._clearDeferredResetState();\n  \t\tthis._resetStateTimeout = setTimeout(bind(this._resetState, this), 0);\n\n  \t\tvar bounds = new LatLngBounds(\n  \t\t        this._map.containerPointToLatLng(this._startPoint),\n  \t\t        this._map.containerPointToLatLng(this._point));\n\n  \t\tthis._map\n  \t\t\t.fitBounds(bounds)\n  \t\t\t.fire('boxzoomend', {boxZoomBounds: bounds});\n  \t},\n\n  \t_onKeyDown: function (e) {\n  \t\tif (e.keyCode === 27) {\n  \t\t\tthis._finish();\n  \t\t}\n  \t}\n  });\n\n  // @section Handlers\n  // @property boxZoom: Handler\n  // Box (shift-drag with mouse) zoom handler.\n  Map.addInitHook('addHandler', 'boxZoom', BoxZoom);\n\n  /*\n   * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.\n   */\n\n  // @namespace Map\n  // @section Interaction Options\n\n  Map.mergeOptions({\n  \t// @option doubleClickZoom: Boolean|String = true\n  \t// Whether the map can be zoomed in by double clicking on it and\n  \t// zoomed out by double clicking while holding shift. If passed\n  \t// `'center'`, double-click zoom will zoom to the center of the\n  \t//  view regardless of where the mouse was.\n  \tdoubleClickZoom: true\n  });\n\n  var DoubleClickZoom = Handler.extend({\n  \taddHooks: function () {\n  \t\tthis._map.on('dblclick', this._onDoubleClick, this);\n  \t},\n\n  \tremoveHooks: function () {\n  \t\tthis._map.off('dblclick', this._onDoubleClick, this);\n  \t},\n\n  \t_onDoubleClick: function (e) {\n  \t\tvar map = this._map,\n  \t\t    oldZoom = map.getZoom(),\n  \t\t    delta = map.options.zoomDelta,\n  \t\t    zoom = e.originalEvent.shiftKey ? oldZoom - delta : oldZoom + delta;\n\n  \t\tif (map.options.doubleClickZoom === 'center') {\n  \t\t\tmap.setZoom(zoom);\n  \t\t} else {\n  \t\t\tmap.setZoomAround(e.containerPoint, zoom);\n  \t\t}\n  \t}\n  });\n\n  // @section Handlers\n  //\n  // Map properties include interaction handlers that allow you to control\n  // interaction behavior in runtime, enabling or disabling certain features such\n  // as dragging or touch zoom (see `Handler` methods). For example:\n  //\n  // ```js\n  // map.doubleClickZoom.disable();\n  // ```\n  //\n  // @property doubleClickZoom: Handler\n  // Double click zoom handler.\n  Map.addInitHook('addHandler', 'doubleClickZoom', DoubleClickZoom);\n\n  /*\n   * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.\n   */\n\n  // @namespace Map\n  // @section Interaction Options\n  Map.mergeOptions({\n  \t// @option dragging: Boolean = true\n  \t// Whether the map be draggable with mouse/touch or not.\n  \tdragging: true,\n\n  \t// @section Panning Inertia Options\n  \t// @option inertia: Boolean = *\n  \t// If enabled, panning of the map will have an inertia effect where\n  \t// the map builds momentum while dragging and continues moving in\n  \t// the same direction for some time. Feels especially nice on touch\n  \t// devices. Enabled by default unless running on old Android devices.\n  \tinertia: !android23,\n\n  \t// @option inertiaDeceleration: Number = 3000\n  \t// The rate with which the inertial movement slows down, in pixels/second².\n  \tinertiaDeceleration: 3400, // px/s^2\n\n  \t// @option inertiaMaxSpeed: Number = Infinity\n  \t// Max speed of the inertial movement, in pixels/second.\n  \tinertiaMaxSpeed: Infinity, // px/s\n\n  \t// @option easeLinearity: Number = 0.2\n  \teaseLinearity: 0.2,\n\n  \t// TODO refactor, move to CRS\n  \t// @option worldCopyJump: Boolean = false\n  \t// With this option enabled, the map tracks when you pan to another \"copy\"\n  \t// of the world and seamlessly jumps to the original one so that all overlays\n  \t// like markers and vector layers are still visible.\n  \tworldCopyJump: false,\n\n  \t// @option maxBoundsViscosity: Number = 0.0\n  \t// If `maxBounds` is set, this option will control how solid the bounds\n  \t// are when dragging the map around. The default value of `0.0` allows the\n  \t// user to drag outside the bounds at normal speed, higher values will\n  \t// slow down map dragging outside bounds, and `1.0` makes the bounds fully\n  \t// solid, preventing the user from dragging outside the bounds.\n  \tmaxBoundsViscosity: 0.0\n  });\n\n  var Drag = Handler.extend({\n  \taddHooks: function () {\n  \t\tif (!this._draggable) {\n  \t\t\tvar map = this._map;\n\n  \t\t\tthis._draggable = new Draggable(map._mapPane, map._container);\n\n  \t\t\tthis._draggable.on({\n  \t\t\t\tdragstart: this._onDragStart,\n  \t\t\t\tdrag: this._onDrag,\n  \t\t\t\tdragend: this._onDragEnd\n  \t\t\t}, this);\n\n  \t\t\tthis._draggable.on('predrag', this._onPreDragLimit, this);\n  \t\t\tif (map.options.worldCopyJump) {\n  \t\t\t\tthis._draggable.on('predrag', this._onPreDragWrap, this);\n  \t\t\t\tmap.on('zoomend', this._onZoomEnd, this);\n\n  \t\t\t\tmap.whenReady(this._onZoomEnd, this);\n  \t\t\t}\n  \t\t}\n  \t\taddClass(this._map._container, 'leaflet-grab leaflet-touch-drag');\n  \t\tthis._draggable.enable();\n  \t\tthis._positions = [];\n  \t\tthis._times = [];\n  \t},\n\n  \tremoveHooks: function () {\n  \t\tremoveClass(this._map._container, 'leaflet-grab');\n  \t\tremoveClass(this._map._container, 'leaflet-touch-drag');\n  \t\tthis._draggable.disable();\n  \t},\n\n  \tmoved: function () {\n  \t\treturn this._draggable && this._draggable._moved;\n  \t},\n\n  \tmoving: function () {\n  \t\treturn this._draggable && this._draggable._moving;\n  \t},\n\n  \t_onDragStart: function () {\n  \t\tvar map = this._map;\n\n  \t\tmap._stop();\n  \t\tif (this._map.options.maxBounds && this._map.options.maxBoundsViscosity) {\n  \t\t\tvar bounds = toLatLngBounds(this._map.options.maxBounds);\n\n  \t\t\tthis._offsetLimit = toBounds(\n  \t\t\t\tthis._map.latLngToContainerPoint(bounds.getNorthWest()).multiplyBy(-1),\n  \t\t\t\tthis._map.latLngToContainerPoint(bounds.getSouthEast()).multiplyBy(-1)\n  \t\t\t\t\t.add(this._map.getSize()));\n\n  \t\t\tthis._viscosity = Math.min(1.0, Math.max(0.0, this._map.options.maxBoundsViscosity));\n  \t\t} else {\n  \t\t\tthis._offsetLimit = null;\n  \t\t}\n\n  \t\tmap\n  \t\t    .fire('movestart')\n  \t\t    .fire('dragstart');\n\n  \t\tif (map.options.inertia) {\n  \t\t\tthis._positions = [];\n  \t\t\tthis._times = [];\n  \t\t}\n  \t},\n\n  \t_onDrag: function (e) {\n  \t\tif (this._map.options.inertia) {\n  \t\t\tvar time = this._lastTime = +new Date(),\n  \t\t\t    pos = this._lastPos = this._draggable._absPos || this._draggable._newPos;\n\n  \t\t\tthis._positions.push(pos);\n  \t\t\tthis._times.push(time);\n\n  \t\t\tthis._prunePositions(time);\n  \t\t}\n\n  \t\tthis._map\n  \t\t    .fire('move', e)\n  \t\t    .fire('drag', e);\n  \t},\n\n  \t_prunePositions: function (time) {\n  \t\twhile (this._positions.length > 1 && time - this._times[0] > 50) {\n  \t\t\tthis._positions.shift();\n  \t\t\tthis._times.shift();\n  \t\t}\n  \t},\n\n  \t_onZoomEnd: function () {\n  \t\tvar pxCenter = this._map.getSize().divideBy(2),\n  \t\t    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);\n\n  \t\tthis._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;\n  \t\tthis._worldWidth = this._map.getPixelWorldBounds().getSize().x;\n  \t},\n\n  \t_viscousLimit: function (value, threshold) {\n  \t\treturn value - (value - threshold) * this._viscosity;\n  \t},\n\n  \t_onPreDragLimit: function () {\n  \t\tif (!this._viscosity || !this._offsetLimit) { return; }\n\n  \t\tvar offset = this._draggable._newPos.subtract(this._draggable._startPos);\n\n  \t\tvar limit = this._offsetLimit;\n  \t\tif (offset.x < limit.min.x) { offset.x = this._viscousLimit(offset.x, limit.min.x); }\n  \t\tif (offset.y < limit.min.y) { offset.y = this._viscousLimit(offset.y, limit.min.y); }\n  \t\tif (offset.x > limit.max.x) { offset.x = this._viscousLimit(offset.x, limit.max.x); }\n  \t\tif (offset.y > limit.max.y) { offset.y = this._viscousLimit(offset.y, limit.max.y); }\n\n  \t\tthis._draggable._newPos = this._draggable._startPos.add(offset);\n  \t},\n\n  \t_onPreDragWrap: function () {\n  \t\t// TODO refactor to be able to adjust map pane position after zoom\n  \t\tvar worldWidth = this._worldWidth,\n  \t\t    halfWidth = Math.round(worldWidth / 2),\n  \t\t    dx = this._initialWorldOffset,\n  \t\t    x = this._draggable._newPos.x,\n  \t\t    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,\n  \t\t    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,\n  \t\t    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;\n\n  \t\tthis._draggable._absPos = this._draggable._newPos.clone();\n  \t\tthis._draggable._newPos.x = newX;\n  \t},\n\n  \t_onDragEnd: function (e) {\n  \t\tvar map = this._map,\n  \t\t    options = map.options,\n\n  \t\t    noInertia = !options.inertia || this._times.length < 2;\n\n  \t\tmap.fire('dragend', e);\n\n  \t\tif (noInertia) {\n  \t\t\tmap.fire('moveend');\n\n  \t\t} else {\n  \t\t\tthis._prunePositions(+new Date());\n\n  \t\t\tvar direction = this._lastPos.subtract(this._positions[0]),\n  \t\t\t    duration = (this._lastTime - this._times[0]) / 1000,\n  \t\t\t    ease = options.easeLinearity,\n\n  \t\t\t    speedVector = direction.multiplyBy(ease / duration),\n  \t\t\t    speed = speedVector.distanceTo([0, 0]),\n\n  \t\t\t    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),\n  \t\t\t    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),\n\n  \t\t\t    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),\n  \t\t\t    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();\n\n  \t\t\tif (!offset.x && !offset.y) {\n  \t\t\t\tmap.fire('moveend');\n\n  \t\t\t} else {\n  \t\t\t\toffset = map._limitOffset(offset, map.options.maxBounds);\n\n  \t\t\t\trequestAnimFrame(function () {\n  \t\t\t\t\tmap.panBy(offset, {\n  \t\t\t\t\t\tduration: decelerationDuration,\n  \t\t\t\t\t\teaseLinearity: ease,\n  \t\t\t\t\t\tnoMoveStart: true,\n  \t\t\t\t\t\tanimate: true\n  \t\t\t\t\t});\n  \t\t\t\t});\n  \t\t\t}\n  \t\t}\n  \t}\n  });\n\n  // @section Handlers\n  // @property dragging: Handler\n  // Map dragging handler (by both mouse and touch).\n  Map.addInitHook('addHandler', 'dragging', Drag);\n\n  /*\n   * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.\n   */\n\n  // @namespace Map\n  // @section Keyboard Navigation Options\n  Map.mergeOptions({\n  \t// @option keyboard: Boolean = true\n  \t// Makes the map focusable and allows users to navigate the map with keyboard\n  \t// arrows and `+`/`-` keys.\n  \tkeyboard: true,\n\n  \t// @option keyboardPanDelta: Number = 80\n  \t// Amount of pixels to pan when pressing an arrow key.\n  \tkeyboardPanDelta: 80\n  });\n\n  var Keyboard = Handler.extend({\n\n  \tkeyCodes: {\n  \t\tleft:    [37],\n  \t\tright:   [39],\n  \t\tdown:    [40],\n  \t\tup:      [38],\n  \t\tzoomIn:  [187, 107, 61, 171],\n  \t\tzoomOut: [189, 109, 54, 173]\n  \t},\n\n  \tinitialize: function (map) {\n  \t\tthis._map = map;\n\n  \t\tthis._setPanDelta(map.options.keyboardPanDelta);\n  \t\tthis._setZoomDelta(map.options.zoomDelta);\n  \t},\n\n  \taddHooks: function () {\n  \t\tvar container = this._map._container;\n\n  \t\t// make the container focusable by tabbing\n  \t\tif (container.tabIndex <= 0) {\n  \t\t\tcontainer.tabIndex = '0';\n  \t\t}\n\n  \t\ton(container, {\n  \t\t\tfocus: this._onFocus,\n  \t\t\tblur: this._onBlur,\n  \t\t\tmousedown: this._onMouseDown\n  \t\t}, this);\n\n  \t\tthis._map.on({\n  \t\t\tfocus: this._addHooks,\n  \t\t\tblur: this._removeHooks\n  \t\t}, this);\n  \t},\n\n  \tremoveHooks: function () {\n  \t\tthis._removeHooks();\n\n  \t\toff(this._map._container, {\n  \t\t\tfocus: this._onFocus,\n  \t\t\tblur: this._onBlur,\n  \t\t\tmousedown: this._onMouseDown\n  \t\t}, this);\n\n  \t\tthis._map.off({\n  \t\t\tfocus: this._addHooks,\n  \t\t\tblur: this._removeHooks\n  \t\t}, this);\n  \t},\n\n  \t_onMouseDown: function () {\n  \t\tif (this._focused) { return; }\n\n  \t\tvar body = document.body,\n  \t\t    docEl = document.documentElement,\n  \t\t    top = body.scrollTop || docEl.scrollTop,\n  \t\t    left = body.scrollLeft || docEl.scrollLeft;\n\n  \t\tthis._map._container.focus();\n\n  \t\twindow.scrollTo(left, top);\n  \t},\n\n  \t_onFocus: function () {\n  \t\tthis._focused = true;\n  \t\tthis._map.fire('focus');\n  \t},\n\n  \t_onBlur: function () {\n  \t\tthis._focused = false;\n  \t\tthis._map.fire('blur');\n  \t},\n\n  \t_setPanDelta: function (panDelta) {\n  \t\tvar keys = this._panKeys = {},\n  \t\t    codes = this.keyCodes,\n  \t\t    i, len;\n\n  \t\tfor (i = 0, len = codes.left.length; i < len; i++) {\n  \t\t\tkeys[codes.left[i]] = [-1 * panDelta, 0];\n  \t\t}\n  \t\tfor (i = 0, len = codes.right.length; i < len; i++) {\n  \t\t\tkeys[codes.right[i]] = [panDelta, 0];\n  \t\t}\n  \t\tfor (i = 0, len = codes.down.length; i < len; i++) {\n  \t\t\tkeys[codes.down[i]] = [0, panDelta];\n  \t\t}\n  \t\tfor (i = 0, len = codes.up.length; i < len; i++) {\n  \t\t\tkeys[codes.up[i]] = [0, -1 * panDelta];\n  \t\t}\n  \t},\n\n  \t_setZoomDelta: function (zoomDelta) {\n  \t\tvar keys = this._zoomKeys = {},\n  \t\t    codes = this.keyCodes,\n  \t\t    i, len;\n\n  \t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {\n  \t\t\tkeys[codes.zoomIn[i]] = zoomDelta;\n  \t\t}\n  \t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {\n  \t\t\tkeys[codes.zoomOut[i]] = -zoomDelta;\n  \t\t}\n  \t},\n\n  \t_addHooks: function () {\n  \t\ton(document, 'keydown', this._onKeyDown, this);\n  \t},\n\n  \t_removeHooks: function () {\n  \t\toff(document, 'keydown', this._onKeyDown, this);\n  \t},\n\n  \t_onKeyDown: function (e) {\n  \t\tif (e.altKey || e.ctrlKey || e.metaKey) { return; }\n\n  \t\tvar key = e.keyCode,\n  \t\t    map = this._map,\n  \t\t    offset;\n\n  \t\tif (key in this._panKeys) {\n  \t\t\tif (!map._panAnim || !map._panAnim._inProgress) {\n  \t\t\t\toffset = this._panKeys[key];\n  \t\t\t\tif (e.shiftKey) {\n  \t\t\t\t\toffset = toPoint(offset).multiplyBy(3);\n  \t\t\t\t}\n\n  \t\t\t\tmap.panBy(offset);\n\n  \t\t\t\tif (map.options.maxBounds) {\n  \t\t\t\t\tmap.panInsideBounds(map.options.maxBounds);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t} else if (key in this._zoomKeys) {\n  \t\t\tmap.setZoom(map.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[key]);\n\n  \t\t} else if (key === 27 && map._popup && map._popup.options.closeOnEscapeKey) {\n  \t\t\tmap.closePopup();\n\n  \t\t} else {\n  \t\t\treturn;\n  \t\t}\n\n  \t\tstop(e);\n  \t}\n  });\n\n  // @section Handlers\n  // @section Handlers\n  // @property keyboard: Handler\n  // Keyboard navigation handler.\n  Map.addInitHook('addHandler', 'keyboard', Keyboard);\n\n  /*\n   * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.\n   */\n\n  // @namespace Map\n  // @section Interaction Options\n  Map.mergeOptions({\n  \t// @section Mouse wheel options\n  \t// @option scrollWheelZoom: Boolean|String = true\n  \t// Whether the map can be zoomed by using the mouse wheel. If passed `'center'`,\n  \t// it will zoom to the center of the view regardless of where the mouse was.\n  \tscrollWheelZoom: true,\n\n  \t// @option wheelDebounceTime: Number = 40\n  \t// Limits the rate at which a wheel can fire (in milliseconds). By default\n  \t// user can't zoom via wheel more often than once per 40 ms.\n  \twheelDebounceTime: 40,\n\n  \t// @option wheelPxPerZoomLevel: Number = 60\n  \t// How many scroll pixels (as reported by [L.DomEvent.getWheelDelta](#domevent-getwheeldelta))\n  \t// mean a change of one full zoom level. Smaller values will make wheel-zooming\n  \t// faster (and vice versa).\n  \twheelPxPerZoomLevel: 60\n  });\n\n  var ScrollWheelZoom = Handler.extend({\n  \taddHooks: function () {\n  \t\ton(this._map._container, 'wheel', this._onWheelScroll, this);\n\n  \t\tthis._delta = 0;\n  \t},\n\n  \tremoveHooks: function () {\n  \t\toff(this._map._container, 'wheel', this._onWheelScroll, this);\n  \t},\n\n  \t_onWheelScroll: function (e) {\n  \t\tvar delta = getWheelDelta(e);\n\n  \t\tvar debounce = this._map.options.wheelDebounceTime;\n\n  \t\tthis._delta += delta;\n  \t\tthis._lastMousePos = this._map.mouseEventToContainerPoint(e);\n\n  \t\tif (!this._startTime) {\n  \t\t\tthis._startTime = +new Date();\n  \t\t}\n\n  \t\tvar left = Math.max(debounce - (+new Date() - this._startTime), 0);\n\n  \t\tclearTimeout(this._timer);\n  \t\tthis._timer = setTimeout(bind(this._performZoom, this), left);\n\n  \t\tstop(e);\n  \t},\n\n  \t_performZoom: function () {\n  \t\tvar map = this._map,\n  \t\t    zoom = map.getZoom(),\n  \t\t    snap = this._map.options.zoomSnap || 0;\n\n  \t\tmap._stop(); // stop panning and fly animations if any\n\n  \t\t// map the delta with a sigmoid function to -4..4 range leaning on -1..1\n  \t\tvar d2 = this._delta / (this._map.options.wheelPxPerZoomLevel * 4),\n  \t\t    d3 = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(d2)))) / Math.LN2,\n  \t\t    d4 = snap ? Math.ceil(d3 / snap) * snap : d3,\n  \t\t    delta = map._limitZoom(zoom + (this._delta > 0 ? d4 : -d4)) - zoom;\n\n  \t\tthis._delta = 0;\n  \t\tthis._startTime = null;\n\n  \t\tif (!delta) { return; }\n\n  \t\tif (map.options.scrollWheelZoom === 'center') {\n  \t\t\tmap.setZoom(zoom + delta);\n  \t\t} else {\n  \t\t\tmap.setZoomAround(this._lastMousePos, zoom + delta);\n  \t\t}\n  \t}\n  });\n\n  // @section Handlers\n  // @property scrollWheelZoom: Handler\n  // Scroll wheel zoom handler.\n  Map.addInitHook('addHandler', 'scrollWheelZoom', ScrollWheelZoom);\n\n  /*\n   * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.\n   */\n\n  // @namespace Map\n  // @section Interaction Options\n  Map.mergeOptions({\n  \t// @section Touch interaction options\n  \t// @option tap: Boolean = true\n  \t// Enables mobile hacks for supporting instant taps (fixing 200ms click\n  \t// delay on iOS/Android) and touch holds (fired as `contextmenu` events).\n  \ttap: true,\n\n  \t// @option tapTolerance: Number = 15\n  \t// The max number of pixels a user can shift his finger during touch\n  \t// for it to be considered a valid tap.\n  \ttapTolerance: 15\n  });\n\n  var Tap = Handler.extend({\n  \taddHooks: function () {\n  \t\ton(this._map._container, 'touchstart', this._onDown, this);\n  \t},\n\n  \tremoveHooks: function () {\n  \t\toff(this._map._container, 'touchstart', this._onDown, this);\n  \t},\n\n  \t_onDown: function (e) {\n  \t\tif (!e.touches) { return; }\n\n  \t\tpreventDefault(e);\n\n  \t\tthis._fireClick = true;\n\n  \t\t// don't simulate click or track longpress if more than 1 touch\n  \t\tif (e.touches.length > 1) {\n  \t\t\tthis._fireClick = false;\n  \t\t\tclearTimeout(this._holdTimeout);\n  \t\t\treturn;\n  \t\t}\n\n  \t\tvar first = e.touches[0],\n  \t\t    el = first.target;\n\n  \t\tthis._startPos = this._newPos = new Point(first.clientX, first.clientY);\n\n  \t\t// if touching a link, highlight it\n  \t\tif (el.tagName && el.tagName.toLowerCase() === 'a') {\n  \t\t\taddClass(el, 'leaflet-active');\n  \t\t}\n\n  \t\t// simulate long hold but setting a timeout\n  \t\tthis._holdTimeout = setTimeout(bind(function () {\n  \t\t\tif (this._isTapValid()) {\n  \t\t\t\tthis._fireClick = false;\n  \t\t\t\tthis._onUp();\n  \t\t\t\tthis._simulateEvent('contextmenu', first);\n  \t\t\t}\n  \t\t}, this), 1000);\n\n  \t\tthis._simulateEvent('mousedown', first);\n\n  \t\ton(document, {\n  \t\t\ttouchmove: this._onMove,\n  \t\t\ttouchend: this._onUp\n  \t\t}, this);\n  \t},\n\n  \t_onUp: function (e) {\n  \t\tclearTimeout(this._holdTimeout);\n\n  \t\toff(document, {\n  \t\t\ttouchmove: this._onMove,\n  \t\t\ttouchend: this._onUp\n  \t\t}, this);\n\n  \t\tif (this._fireClick && e && e.changedTouches) {\n\n  \t\t\tvar first = e.changedTouches[0],\n  \t\t\t    el = first.target;\n\n  \t\t\tif (el && el.tagName && el.tagName.toLowerCase() === 'a') {\n  \t\t\t\tremoveClass(el, 'leaflet-active');\n  \t\t\t}\n\n  \t\t\tthis._simulateEvent('mouseup', first);\n\n  \t\t\t// simulate click if the touch didn't move too much\n  \t\t\tif (this._isTapValid()) {\n  \t\t\t\tthis._simulateEvent('click', first);\n  \t\t\t}\n  \t\t}\n  \t},\n\n  \t_isTapValid: function () {\n  \t\treturn this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;\n  \t},\n\n  \t_onMove: function (e) {\n  \t\tvar first = e.touches[0];\n  \t\tthis._newPos = new Point(first.clientX, first.clientY);\n  \t\tthis._simulateEvent('mousemove', first);\n  \t},\n\n  \t_simulateEvent: function (type, e) {\n  \t\tvar simulatedEvent = document.createEvent('MouseEvents');\n\n  \t\tsimulatedEvent._simulated = true;\n  \t\te.target._simulatedClick = true;\n\n  \t\tsimulatedEvent.initMouseEvent(\n  \t\t        type, true, true, window, 1,\n  \t\t        e.screenX, e.screenY,\n  \t\t        e.clientX, e.clientY,\n  \t\t        false, false, false, false, 0, null);\n\n  \t\te.target.dispatchEvent(simulatedEvent);\n  \t}\n  });\n\n  // @section Handlers\n  // @property tap: Handler\n  // Mobile touch hacks (quick tap and touch hold) handler.\n  if (touch && (!pointer || safari)) {\n  \tMap.addInitHook('addHandler', 'tap', Tap);\n  }\n\n  /*\n   * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.\n   */\n\n  // @namespace Map\n  // @section Interaction Options\n  Map.mergeOptions({\n  \t// @section Touch interaction options\n  \t// @option touchZoom: Boolean|String = *\n  \t// Whether the map can be zoomed by touch-dragging with two fingers. If\n  \t// passed `'center'`, it will zoom to the center of the view regardless of\n  \t// where the touch events (fingers) were. Enabled for touch-capable web\n  \t// browsers except for old Androids.\n  \ttouchZoom: touch && !android23,\n\n  \t// @option bounceAtZoomLimits: Boolean = true\n  \t// Set it to false if you don't want the map to zoom beyond min/max zoom\n  \t// and then bounce back when pinch-zooming.\n  \tbounceAtZoomLimits: true\n  });\n\n  var TouchZoom = Handler.extend({\n  \taddHooks: function () {\n  \t\taddClass(this._map._container, 'leaflet-touch-zoom');\n  \t\ton(this._map._container, 'touchstart', this._onTouchStart, this);\n  \t},\n\n  \tremoveHooks: function () {\n  \t\tremoveClass(this._map._container, 'leaflet-touch-zoom');\n  \t\toff(this._map._container, 'touchstart', this._onTouchStart, this);\n  \t},\n\n  \t_onTouchStart: function (e) {\n  \t\tvar map = this._map;\n  \t\tif (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }\n\n  \t\tvar p1 = map.mouseEventToContainerPoint(e.touches[0]),\n  \t\t    p2 = map.mouseEventToContainerPoint(e.touches[1]);\n\n  \t\tthis._centerPoint = map.getSize()._divideBy(2);\n  \t\tthis._startLatLng = map.containerPointToLatLng(this._centerPoint);\n  \t\tif (map.options.touchZoom !== 'center') {\n  \t\t\tthis._pinchStartLatLng = map.containerPointToLatLng(p1.add(p2)._divideBy(2));\n  \t\t}\n\n  \t\tthis._startDist = p1.distanceTo(p2);\n  \t\tthis._startZoom = map.getZoom();\n\n  \t\tthis._moved = false;\n  \t\tthis._zooming = true;\n\n  \t\tmap._stop();\n\n  \t\ton(document, 'touchmove', this._onTouchMove, this);\n  \t\ton(document, 'touchend', this._onTouchEnd, this);\n\n  \t\tpreventDefault(e);\n  \t},\n\n  \t_onTouchMove: function (e) {\n  \t\tif (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }\n\n  \t\tvar map = this._map,\n  \t\t    p1 = map.mouseEventToContainerPoint(e.touches[0]),\n  \t\t    p2 = map.mouseEventToContainerPoint(e.touches[1]),\n  \t\t    scale = p1.distanceTo(p2) / this._startDist;\n\n  \t\tthis._zoom = map.getScaleZoom(scale, this._startZoom);\n\n  \t\tif (!map.options.bounceAtZoomLimits && (\n  \t\t\t(this._zoom < map.getMinZoom() && scale < 1) ||\n  \t\t\t(this._zoom > map.getMaxZoom() && scale > 1))) {\n  \t\t\tthis._zoom = map._limitZoom(this._zoom);\n  \t\t}\n\n  \t\tif (map.options.touchZoom === 'center') {\n  \t\t\tthis._center = this._startLatLng;\n  \t\t\tif (scale === 1) { return; }\n  \t\t} else {\n  \t\t\t// Get delta from pinch to center, so centerLatLng is delta applied to initial pinchLatLng\n  \t\t\tvar delta = p1._add(p2)._divideBy(2)._subtract(this._centerPoint);\n  \t\t\tif (scale === 1 && delta.x === 0 && delta.y === 0) { return; }\n  \t\t\tthis._center = map.unproject(map.project(this._pinchStartLatLng, this._zoom).subtract(delta), this._zoom);\n  \t\t}\n\n  \t\tif (!this._moved) {\n  \t\t\tmap._moveStart(true, false);\n  \t\t\tthis._moved = true;\n  \t\t}\n\n  \t\tcancelAnimFrame(this._animRequest);\n\n  \t\tvar moveFn = bind(map._move, map, this._center, this._zoom, {pinch: true, round: false});\n  \t\tthis._animRequest = requestAnimFrame(moveFn, this, true);\n\n  \t\tpreventDefault(e);\n  \t},\n\n  \t_onTouchEnd: function () {\n  \t\tif (!this._moved || !this._zooming) {\n  \t\t\tthis._zooming = false;\n  \t\t\treturn;\n  \t\t}\n\n  \t\tthis._zooming = false;\n  \t\tcancelAnimFrame(this._animRequest);\n\n  \t\toff(document, 'touchmove', this._onTouchMove, this);\n  \t\toff(document, 'touchend', this._onTouchEnd, this);\n\n  \t\t// Pinch updates GridLayers' levels only when zoomSnap is off, so zoomSnap becomes noUpdate.\n  \t\tif (this._map.options.zoomAnimation) {\n  \t\t\tthis._map._animateZoom(this._center, this._map._limitZoom(this._zoom), true, this._map.options.zoomSnap);\n  \t\t} else {\n  \t\t\tthis._map._resetView(this._center, this._map._limitZoom(this._zoom));\n  \t\t}\n  \t}\n  });\n\n  // @section Handlers\n  // @property touchZoom: Handler\n  // Touch zoom handler.\n  Map.addInitHook('addHandler', 'touchZoom', TouchZoom);\n\n  Map.BoxZoom = BoxZoom;\n  Map.DoubleClickZoom = DoubleClickZoom;\n  Map.Drag = Drag;\n  Map.Keyboard = Keyboard;\n  Map.ScrollWheelZoom = ScrollWheelZoom;\n  Map.Tap = Tap;\n  Map.TouchZoom = TouchZoom;\n\n  exports.version = version;\n  exports.Control = Control;\n  exports.control = control;\n  exports.Browser = Browser;\n  exports.Evented = Evented;\n  exports.Mixin = Mixin;\n  exports.Util = Util;\n  exports.Class = Class;\n  exports.Handler = Handler;\n  exports.extend = extend;\n  exports.bind = bind;\n  exports.stamp = stamp;\n  exports.setOptions = setOptions;\n  exports.DomEvent = DomEvent;\n  exports.DomUtil = DomUtil;\n  exports.PosAnimation = PosAnimation;\n  exports.Draggable = Draggable;\n  exports.LineUtil = LineUtil;\n  exports.PolyUtil = PolyUtil;\n  exports.Point = Point;\n  exports.point = toPoint;\n  exports.Bounds = Bounds;\n  exports.bounds = toBounds;\n  exports.Transformation = Transformation;\n  exports.transformation = toTransformation;\n  exports.Projection = index;\n  exports.LatLng = LatLng;\n  exports.latLng = toLatLng;\n  exports.LatLngBounds = LatLngBounds;\n  exports.latLngBounds = toLatLngBounds;\n  exports.CRS = CRS;\n  exports.GeoJSON = GeoJSON;\n  exports.geoJSON = geoJSON;\n  exports.geoJson = geoJson;\n  exports.Layer = Layer;\n  exports.LayerGroup = LayerGroup;\n  exports.layerGroup = layerGroup;\n  exports.FeatureGroup = FeatureGroup;\n  exports.featureGroup = featureGroup;\n  exports.ImageOverlay = ImageOverlay;\n  exports.imageOverlay = imageOverlay;\n  exports.VideoOverlay = VideoOverlay;\n  exports.videoOverlay = videoOverlay;\n  exports.SVGOverlay = SVGOverlay;\n  exports.svgOverlay = svgOverlay;\n  exports.DivOverlay = DivOverlay;\n  exports.Popup = Popup;\n  exports.popup = popup;\n  exports.Tooltip = Tooltip;\n  exports.tooltip = tooltip;\n  exports.Icon = Icon;\n  exports.icon = icon;\n  exports.DivIcon = DivIcon;\n  exports.divIcon = divIcon;\n  exports.Marker = Marker;\n  exports.marker = marker;\n  exports.TileLayer = TileLayer;\n  exports.tileLayer = tileLayer;\n  exports.GridLayer = GridLayer;\n  exports.gridLayer = gridLayer;\n  exports.SVG = SVG;\n  exports.svg = svg$1;\n  exports.Renderer = Renderer;\n  exports.Canvas = Canvas;\n  exports.canvas = canvas$1;\n  exports.Path = Path;\n  exports.CircleMarker = CircleMarker;\n  exports.circleMarker = circleMarker;\n  exports.Circle = Circle;\n  exports.circle = circle;\n  exports.Polyline = Polyline;\n  exports.polyline = polyline;\n  exports.Polygon = Polygon;\n  exports.polygon = polygon;\n  exports.Rectangle = Rectangle;\n  exports.rectangle = rectangle;\n  exports.Map = Map;\n  exports.map = createMap;\n\n  var oldL = window.L;\n  exports.noConflict = function() {\n  \twindow.L = oldL;\n  \treturn this;\n  }\n\n  // Always export us to window global (see #2364)\n  window.L = exports;\n\n})));\n//# sourceMappingURL=leaflet-src.js.map\n","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _templateObject = _taggedTemplateLiteral(['', ''], ['', '']);\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @class TemplateTag\n * @classdesc Consumes a pipeline of composable transformer plugins and produces a template tag.\n */\nvar TemplateTag = function () {\n  /**\n   * constructs a template tag\n   * @constructs TemplateTag\n   * @param  {...Object} [...transformers] - an array or arguments list of transformers\n   * @return {Function}                    - a template tag\n   */\n  function TemplateTag() {\n    var _this = this;\n\n    for (var _len = arguments.length, transformers = Array(_len), _key = 0; _key < _len; _key++) {\n      transformers[_key] = arguments[_key];\n    }\n\n    _classCallCheck(this, TemplateTag);\n\n    this.tag = function (strings) {\n      for (var _len2 = arguments.length, expressions = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        expressions[_key2 - 1] = arguments[_key2];\n      }\n\n      if (typeof strings === 'function') {\n        // if the first argument passed is a function, assume it is a template tag and return\n        // an intermediary tag that processes the template using the aforementioned tag, passing the\n        // result to our tag\n        return _this.interimTag.bind(_this, strings);\n      }\n\n      if (typeof strings === 'string') {\n        // if the first argument passed is a string, just transform it\n        return _this.transformEndResult(strings);\n      }\n\n      // else, return a transformed end result of processing the template with our tag\n      strings = strings.map(_this.transformString.bind(_this));\n      return _this.transformEndResult(strings.reduce(_this.processSubstitutions.bind(_this, expressions)));\n    };\n\n    // if first argument is an array, extrude it as a list of transformers\n    if (transformers.length > 0 && Array.isArray(transformers[0])) {\n      transformers = transformers[0];\n    }\n\n    // if any transformers are functions, this means they are not initiated - automatically initiate them\n    this.transformers = transformers.map(function (transformer) {\n      return typeof transformer === 'function' ? transformer() : transformer;\n    });\n\n    // return an ES2015 template tag\n    return this.tag;\n  }\n\n  /**\n   * Applies all transformers to a template literal tagged with this method.\n   * If a function is passed as the first argument, assumes the function is a template tag\n   * and applies it to the template, returning a template tag.\n   * @param  {(Function|String|Array<String>)} strings        - Either a template tag or an array containing template strings separated by identifier\n   * @param  {...*}                            ...expressions - Optional list of substitution values.\n   * @return {(String|Function)}                              - Either an intermediary tag function or the results of processing the template.\n   */\n\n\n  _createClass(TemplateTag, [{\n    key: 'interimTag',\n\n\n    /**\n     * An intermediary template tag that receives a template tag and passes the result of calling the template with the received\n     * template tag to our own template tag.\n     * @param  {Function}        nextTag          - the received template tag\n     * @param  {Array<String>}   template         - the template to process\n     * @param  {...*}            ...substitutions - `substitutions` is an array of all substitutions in the template\n     * @return {*}                                - the final processed value\n     */\n    value: function interimTag(previousTag, template) {\n      for (var _len3 = arguments.length, substitutions = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        substitutions[_key3 - 2] = arguments[_key3];\n      }\n\n      return this.tag(_templateObject, previousTag.apply(undefined, [template].concat(substitutions)));\n    }\n\n    /**\n     * Performs bulk processing on the tagged template, transforming each substitution and then\n     * concatenating the resulting values into a string.\n     * @param  {Array<*>} substitutions - an array of all remaining substitutions present in this template\n     * @param  {String}   resultSoFar   - this iteration's result string so far\n     * @param  {String}   remainingPart - the template chunk after the current substitution\n     * @return {String}                 - the result of joining this iteration's processed substitution with the result\n     */\n\n  }, {\n    key: 'processSubstitutions',\n    value: function processSubstitutions(substitutions, resultSoFar, remainingPart) {\n      var substitution = this.transformSubstitution(substitutions.shift(), resultSoFar);\n      return ''.concat(resultSoFar, substitution, remainingPart);\n    }\n\n    /**\n     * Iterate through each transformer, applying the transformer's `onString` method to the template\n     * strings before all substitutions are processed.\n     * @param {String}  str - The input string\n     * @return {String}     - The final results of processing each transformer\n     */\n\n  }, {\n    key: 'transformString',\n    value: function transformString(str) {\n      var cb = function cb(res, transform) {\n        return transform.onString ? transform.onString(res) : res;\n      };\n      return this.transformers.reduce(cb, str);\n    }\n\n    /**\n     * When a substitution is encountered, iterates through each transformer and applies the transformer's\n     * `onSubstitution` method to the substitution.\n     * @param  {*}      substitution - The current substitution\n     * @param  {String} resultSoFar  - The result up to and excluding this substitution.\n     * @return {*}                   - The final result of applying all substitution transformations.\n     */\n\n  }, {\n    key: 'transformSubstitution',\n    value: function transformSubstitution(substitution, resultSoFar) {\n      var cb = function cb(res, transform) {\n        return transform.onSubstitution ? transform.onSubstitution(res, resultSoFar) : res;\n      };\n      return this.transformers.reduce(cb, substitution);\n    }\n\n    /**\n     * Iterates through each transformer, applying the transformer's `onEndResult` method to the\n     * template literal after all substitutions have finished processing.\n     * @param  {String} endResult - The processed template, just before it is returned from the tag\n     * @return {String}           - The final results of processing each transformer\n     */\n\n  }, {\n    key: 'transformEndResult',\n    value: function transformEndResult(endResult) {\n      var cb = function cb(res, transform) {\n        return transform.onEndResult ? transform.onEndResult(res) : res;\n      };\n      return this.transformers.reduce(cb, endResult);\n    }\n  }]);\n\n  return TemplateTag;\n}();\n\nexport default TemplateTag;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9UZW1wbGF0ZVRhZy9UZW1wbGF0ZVRhZy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInRyYW5zZm9ybWVycyIsInRhZyIsInN0cmluZ3MiLCJleHByZXNzaW9ucyIsImludGVyaW1UYWciLCJiaW5kIiwidHJhbnNmb3JtRW5kUmVzdWx0IiwibWFwIiwidHJhbnNmb3JtU3RyaW5nIiwicmVkdWNlIiwicHJvY2Vzc1N1YnN0aXR1dGlvbnMiLCJsZW5ndGgiLCJBcnJheSIsImlzQXJyYXkiLCJ0cmFuc2Zvcm1lciIsInByZXZpb3VzVGFnIiwidGVtcGxhdGUiLCJzdWJzdGl0dXRpb25zIiwicmVzdWx0U29GYXIiLCJyZW1haW5pbmdQYXJ0Iiwic3Vic3RpdHV0aW9uIiwidHJhbnNmb3JtU3Vic3RpdHV0aW9uIiwic2hpZnQiLCJjb25jYXQiLCJzdHIiLCJjYiIsInJlcyIsInRyYW5zZm9ybSIsIm9uU3RyaW5nIiwib25TdWJzdGl0dXRpb24iLCJlbmRSZXN1bHQiLCJvbkVuZFJlc3VsdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztJQUlxQkEsVztBQUNuQjs7Ozs7O0FBTUEseUJBQTZCO0FBQUE7O0FBQUEsc0NBQWRDLFlBQWM7QUFBZEEsa0JBQWM7QUFBQTs7QUFBQTs7QUFBQSxTQXVCN0JDLEdBdkI2QixHQXVCdkIsVUFBQ0MsT0FBRCxFQUE2QjtBQUFBLHlDQUFoQkMsV0FBZ0I7QUFBaEJBLG1CQUFnQjtBQUFBOztBQUNqQyxVQUFJLE9BQU9ELE9BQVAsS0FBbUIsVUFBdkIsRUFBbUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsZUFBTyxNQUFLRSxVQUFMLENBQWdCQyxJQUFoQixDQUFxQixLQUFyQixFQUEyQkgsT0FBM0IsQ0FBUDtBQUNEOztBQUVELFVBQUksT0FBT0EsT0FBUCxLQUFtQixRQUF2QixFQUFpQztBQUMvQjtBQUNBLGVBQU8sTUFBS0ksa0JBQUwsQ0FBd0JKLE9BQXhCLENBQVA7QUFDRDs7QUFFRDtBQUNBQSxnQkFBVUEsUUFBUUssR0FBUixDQUFZLE1BQUtDLGVBQUwsQ0FBcUJILElBQXJCLENBQTBCLEtBQTFCLENBQVosQ0FBVjtBQUNBLGFBQU8sTUFBS0Msa0JBQUwsQ0FDTEosUUFBUU8sTUFBUixDQUFlLE1BQUtDLG9CQUFMLENBQTBCTCxJQUExQixDQUErQixLQUEvQixFQUFxQ0YsV0FBckMsQ0FBZixDQURLLENBQVA7QUFHRCxLQXpDNEI7O0FBQzNCO0FBQ0EsUUFBSUgsYUFBYVcsTUFBYixHQUFzQixDQUF0QixJQUEyQkMsTUFBTUMsT0FBTixDQUFjYixhQUFhLENBQWIsQ0FBZCxDQUEvQixFQUErRDtBQUM3REEscUJBQWVBLGFBQWEsQ0FBYixDQUFmO0FBQ0Q7O0FBRUQ7QUFDQSxTQUFLQSxZQUFMLEdBQW9CQSxhQUFhTyxHQUFiLENBQWlCLHVCQUFlO0FBQ2xELGFBQU8sT0FBT08sV0FBUCxLQUF1QixVQUF2QixHQUFvQ0EsYUFBcEMsR0FBb0RBLFdBQTNEO0FBQ0QsS0FGbUIsQ0FBcEI7O0FBSUE7QUFDQSxXQUFPLEtBQUtiLEdBQVo7QUFDRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7QUE0QkE7Ozs7Ozs7OytCQVFXYyxXLEVBQWFDLFEsRUFBNEI7QUFBQSx5Q0FBZkMsYUFBZTtBQUFmQSxxQkFBZTtBQUFBOztBQUNsRCxhQUFPLEtBQUtoQixHQUFaLGtCQUFrQmMsOEJBQVlDLFFBQVosU0FBeUJDLGFBQXpCLEVBQWxCO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7O3lDQVFxQkEsYSxFQUFlQyxXLEVBQWFDLGEsRUFBZTtBQUM5RCxVQUFNQyxlQUFlLEtBQUtDLHFCQUFMLENBQ25CSixjQUFjSyxLQUFkLEVBRG1CLEVBRW5CSixXQUZtQixDQUFyQjtBQUlBLGFBQU8sR0FBR0ssTUFBSCxDQUFVTCxXQUFWLEVBQXVCRSxZQUF2QixFQUFxQ0QsYUFBckMsQ0FBUDtBQUNEOztBQUVEOzs7Ozs7Ozs7b0NBTWdCSyxHLEVBQUs7QUFDbkIsVUFBTUMsS0FBSyxTQUFMQSxFQUFLLENBQUNDLEdBQUQsRUFBTUMsU0FBTjtBQUFBLGVBQ1RBLFVBQVVDLFFBQVYsR0FBcUJELFVBQVVDLFFBQVYsQ0FBbUJGLEdBQW5CLENBQXJCLEdBQStDQSxHQUR0QztBQUFBLE9BQVg7QUFFQSxhQUFPLEtBQUsxQixZQUFMLENBQWtCUyxNQUFsQixDQUF5QmdCLEVBQXpCLEVBQTZCRCxHQUE3QixDQUFQO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7MENBT3NCSixZLEVBQWNGLFcsRUFBYTtBQUMvQyxVQUFNTyxLQUFLLFNBQUxBLEVBQUssQ0FBQ0MsR0FBRCxFQUFNQyxTQUFOO0FBQUEsZUFDVEEsVUFBVUUsY0FBVixHQUNJRixVQUFVRSxjQUFWLENBQXlCSCxHQUF6QixFQUE4QlIsV0FBOUIsQ0FESixHQUVJUSxHQUhLO0FBQUEsT0FBWDtBQUlBLGFBQU8sS0FBSzFCLFlBQUwsQ0FBa0JTLE1BQWxCLENBQXlCZ0IsRUFBekIsRUFBNkJMLFlBQTdCLENBQVA7QUFDRDs7QUFFRDs7Ozs7Ozs7O3VDQU1tQlUsUyxFQUFXO0FBQzVCLFVBQU1MLEtBQUssU0FBTEEsRUFBSyxDQUFDQyxHQUFELEVBQU1DLFNBQU47QUFBQSxlQUNUQSxVQUFVSSxXQUFWLEdBQXdCSixVQUFVSSxXQUFWLENBQXNCTCxHQUF0QixDQUF4QixHQUFxREEsR0FENUM7QUFBQSxPQUFYO0FBRUEsYUFBTyxLQUFLMUIsWUFBTCxDQUFrQlMsTUFBbEIsQ0FBeUJnQixFQUF6QixFQUE2QkssU0FBN0IsQ0FBUDtBQUNEOzs7Ozs7ZUFuSGtCL0IsVyIsImZpbGUiOiJUZW1wbGF0ZVRhZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGNsYXNzIFRlbXBsYXRlVGFnXG4gKiBAY2xhc3NkZXNjIENvbnN1bWVzIGEgcGlwZWxpbmUgb2YgY29tcG9zYWJsZSB0cmFuc2Zvcm1lciBwbHVnaW5zIGFuZCBwcm9kdWNlcyBhIHRlbXBsYXRlIHRhZy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVtcGxhdGVUYWcge1xuICAvKipcbiAgICogY29uc3RydWN0cyBhIHRlbXBsYXRlIHRhZ1xuICAgKiBAY29uc3RydWN0cyBUZW1wbGF0ZVRhZ1xuICAgKiBAcGFyYW0gIHsuLi5PYmplY3R9IFsuLi50cmFuc2Zvcm1lcnNdIC0gYW4gYXJyYXkgb3IgYXJndW1lbnRzIGxpc3Qgb2YgdHJhbnNmb3JtZXJzXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAgICAgICAgICAgICAgICAgICAgLSBhIHRlbXBsYXRlIHRhZ1xuICAgKi9cbiAgY29uc3RydWN0b3IoLi4udHJhbnNmb3JtZXJzKSB7XG4gICAgLy8gaWYgZmlyc3QgYXJndW1lbnQgaXMgYW4gYXJyYXksIGV4dHJ1ZGUgaXQgYXMgYSBsaXN0IG9mIHRyYW5zZm9ybWVyc1xuICAgIGlmICh0cmFuc2Zvcm1lcnMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHRyYW5zZm9ybWVyc1swXSkpIHtcbiAgICAgIHRyYW5zZm9ybWVycyA9IHRyYW5zZm9ybWVyc1swXTtcbiAgICB9XG5cbiAgICAvLyBpZiBhbnkgdHJhbnNmb3JtZXJzIGFyZSBmdW5jdGlvbnMsIHRoaXMgbWVhbnMgdGhleSBhcmUgbm90IGluaXRpYXRlZCAtIGF1dG9tYXRpY2FsbHkgaW5pdGlhdGUgdGhlbVxuICAgIHRoaXMudHJhbnNmb3JtZXJzID0gdHJhbnNmb3JtZXJzLm1hcCh0cmFuc2Zvcm1lciA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHRyYW5zZm9ybWVyID09PSAnZnVuY3Rpb24nID8gdHJhbnNmb3JtZXIoKSA6IHRyYW5zZm9ybWVyO1xuICAgIH0pO1xuXG4gICAgLy8gcmV0dXJuIGFuIEVTMjAxNSB0ZW1wbGF0ZSB0YWdcbiAgICByZXR1cm4gdGhpcy50YWc7XG4gIH1cblxuICAvKipcbiAgICogQXBwbGllcyBhbGwgdHJhbnNmb3JtZXJzIHRvIGEgdGVtcGxhdGUgbGl0ZXJhbCB0YWdnZWQgd2l0aCB0aGlzIG1ldGhvZC5cbiAgICogSWYgYSBmdW5jdGlvbiBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCBhc3N1bWVzIHRoZSBmdW5jdGlvbiBpcyBhIHRlbXBsYXRlIHRhZ1xuICAgKiBhbmQgYXBwbGllcyBpdCB0byB0aGUgdGVtcGxhdGUsIHJldHVybmluZyBhIHRlbXBsYXRlIHRhZy5cbiAgICogQHBhcmFtICB7KEZ1bmN0aW9ufFN0cmluZ3xBcnJheTxTdHJpbmc+KX0gc3RyaW5ncyAgICAgICAgLSBFaXRoZXIgYSB0ZW1wbGF0ZSB0YWcgb3IgYW4gYXJyYXkgY29udGFpbmluZyB0ZW1wbGF0ZSBzdHJpbmdzIHNlcGFyYXRlZCBieSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSAgey4uLip9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmV4cHJlc3Npb25zIC0gT3B0aW9uYWwgbGlzdCBvZiBzdWJzdGl0dXRpb24gdmFsdWVzLlxuICAgKiBAcmV0dXJuIHsoU3RyaW5nfEZ1bmN0aW9uKX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIEVpdGhlciBhbiBpbnRlcm1lZGlhcnkgdGFnIGZ1bmN0aW9uIG9yIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIHRlbXBsYXRlLlxuICAgKi9cbiAgdGFnID0gKHN0cmluZ3MsIC4uLmV4cHJlc3Npb25zKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBzdHJpbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBpZiB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIGlzIGEgZnVuY3Rpb24sIGFzc3VtZSBpdCBpcyBhIHRlbXBsYXRlIHRhZyBhbmQgcmV0dXJuXG4gICAgICAvLyBhbiBpbnRlcm1lZGlhcnkgdGFnIHRoYXQgcHJvY2Vzc2VzIHRoZSB0ZW1wbGF0ZSB1c2luZyB0aGUgYWZvcmVtZW50aW9uZWQgdGFnLCBwYXNzaW5nIHRoZVxuICAgICAgLy8gcmVzdWx0IHRvIG91ciB0YWdcbiAgICAgIHJldHVybiB0aGlzLmludGVyaW1UYWcuYmluZCh0aGlzLCBzdHJpbmdzKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHN0cmluZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBpZiB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIGlzIGEgc3RyaW5nLCBqdXN0IHRyYW5zZm9ybSBpdFxuICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRW5kUmVzdWx0KHN0cmluZ3MpO1xuICAgIH1cblxuICAgIC8vIGVsc2UsIHJldHVybiBhIHRyYW5zZm9ybWVkIGVuZCByZXN1bHQgb2YgcHJvY2Vzc2luZyB0aGUgdGVtcGxhdGUgd2l0aCBvdXIgdGFnXG4gICAgc3RyaW5ncyA9IHN0cmluZ3MubWFwKHRoaXMudHJhbnNmb3JtU3RyaW5nLmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUVuZFJlc3VsdChcbiAgICAgIHN0cmluZ3MucmVkdWNlKHRoaXMucHJvY2Vzc1N1YnN0aXR1dGlvbnMuYmluZCh0aGlzLCBleHByZXNzaW9ucykpLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFuIGludGVybWVkaWFyeSB0ZW1wbGF0ZSB0YWcgdGhhdCByZWNlaXZlcyBhIHRlbXBsYXRlIHRhZyBhbmQgcGFzc2VzIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgdGVtcGxhdGUgd2l0aCB0aGUgcmVjZWl2ZWRcbiAgICogdGVtcGxhdGUgdGFnIHRvIG91ciBvd24gdGVtcGxhdGUgdGFnLlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gICAgICAgIG5leHRUYWcgICAgICAgICAgLSB0aGUgcmVjZWl2ZWQgdGVtcGxhdGUgdGFnXG4gICAqIEBwYXJhbSAge0FycmF5PFN0cmluZz59ICAgdGVtcGxhdGUgICAgICAgICAtIHRoZSB0ZW1wbGF0ZSB0byBwcm9jZXNzXG4gICAqIEBwYXJhbSAgey4uLip9ICAgICAgICAgICAgLi4uc3Vic3RpdHV0aW9ucyAtIGBzdWJzdGl0dXRpb25zYCBpcyBhbiBhcnJheSBvZiBhbGwgc3Vic3RpdHV0aW9ucyBpbiB0aGUgdGVtcGxhdGVcbiAgICogQHJldHVybiB7Kn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gdGhlIGZpbmFsIHByb2Nlc3NlZCB2YWx1ZVxuICAgKi9cbiAgaW50ZXJpbVRhZyhwcmV2aW91c1RhZywgdGVtcGxhdGUsIC4uLnN1YnN0aXR1dGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy50YWdgJHtwcmV2aW91c1RhZyh0ZW1wbGF0ZSwgLi4uc3Vic3RpdHV0aW9ucyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBidWxrIHByb2Nlc3Npbmcgb24gdGhlIHRhZ2dlZCB0ZW1wbGF0ZSwgdHJhbnNmb3JtaW5nIGVhY2ggc3Vic3RpdHV0aW9uIGFuZCB0aGVuXG4gICAqIGNvbmNhdGVuYXRpbmcgdGhlIHJlc3VsdGluZyB2YWx1ZXMgaW50byBhIHN0cmluZy5cbiAgICogQHBhcmFtICB7QXJyYXk8Kj59IHN1YnN0aXR1dGlvbnMgLSBhbiBhcnJheSBvZiBhbGwgcmVtYWluaW5nIHN1YnN0aXR1dGlvbnMgcHJlc2VudCBpbiB0aGlzIHRlbXBsYXRlXG4gICAqIEBwYXJhbSAge1N0cmluZ30gICByZXN1bHRTb0ZhciAgIC0gdGhpcyBpdGVyYXRpb24ncyByZXN1bHQgc3RyaW5nIHNvIGZhclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgcmVtYWluaW5nUGFydCAtIHRoZSB0ZW1wbGF0ZSBjaHVuayBhZnRlciB0aGUgY3VycmVudCBzdWJzdGl0dXRpb25cbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICAgICAgLSB0aGUgcmVzdWx0IG9mIGpvaW5pbmcgdGhpcyBpdGVyYXRpb24ncyBwcm9jZXNzZWQgc3Vic3RpdHV0aW9uIHdpdGggdGhlIHJlc3VsdFxuICAgKi9cbiAgcHJvY2Vzc1N1YnN0aXR1dGlvbnMoc3Vic3RpdHV0aW9ucywgcmVzdWx0U29GYXIsIHJlbWFpbmluZ1BhcnQpIHtcbiAgICBjb25zdCBzdWJzdGl0dXRpb24gPSB0aGlzLnRyYW5zZm9ybVN1YnN0aXR1dGlvbihcbiAgICAgIHN1YnN0aXR1dGlvbnMuc2hpZnQoKSxcbiAgICAgIHJlc3VsdFNvRmFyLFxuICAgICk7XG4gICAgcmV0dXJuICcnLmNvbmNhdChyZXN1bHRTb0Zhciwgc3Vic3RpdHV0aW9uLCByZW1haW5pbmdQYXJ0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggZWFjaCB0cmFuc2Zvcm1lciwgYXBwbHlpbmcgdGhlIHRyYW5zZm9ybWVyJ3MgYG9uU3RyaW5nYCBtZXRob2QgdG8gdGhlIHRlbXBsYXRlXG4gICAqIHN0cmluZ3MgYmVmb3JlIGFsbCBzdWJzdGl0dXRpb25zIGFyZSBwcm9jZXNzZWQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgc3RyIC0gVGhlIGlucHV0IHN0cmluZ1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAtIFRoZSBmaW5hbCByZXN1bHRzIG9mIHByb2Nlc3NpbmcgZWFjaCB0cmFuc2Zvcm1lclxuICAgKi9cbiAgdHJhbnNmb3JtU3RyaW5nKHN0cikge1xuICAgIGNvbnN0IGNiID0gKHJlcywgdHJhbnNmb3JtKSA9PlxuICAgICAgdHJhbnNmb3JtLm9uU3RyaW5nID8gdHJhbnNmb3JtLm9uU3RyaW5nKHJlcykgOiByZXM7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtZXJzLnJlZHVjZShjYiwgc3RyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGVuIGEgc3Vic3RpdHV0aW9uIGlzIGVuY291bnRlcmVkLCBpdGVyYXRlcyB0aHJvdWdoIGVhY2ggdHJhbnNmb3JtZXIgYW5kIGFwcGxpZXMgdGhlIHRyYW5zZm9ybWVyJ3NcbiAgICogYG9uU3Vic3RpdHV0aW9uYCBtZXRob2QgdG8gdGhlIHN1YnN0aXR1dGlvbi5cbiAgICogQHBhcmFtICB7Kn0gICAgICBzdWJzdGl0dXRpb24gLSBUaGUgY3VycmVudCBzdWJzdGl0dXRpb25cbiAgICogQHBhcmFtICB7U3RyaW5nfSByZXN1bHRTb0ZhciAgLSBUaGUgcmVzdWx0IHVwIHRvIGFuZCBleGNsdWRpbmcgdGhpcyBzdWJzdGl0dXRpb24uXG4gICAqIEByZXR1cm4geyp9ICAgICAgICAgICAgICAgICAgIC0gVGhlIGZpbmFsIHJlc3VsdCBvZiBhcHBseWluZyBhbGwgc3Vic3RpdHV0aW9uIHRyYW5zZm9ybWF0aW9ucy5cbiAgICovXG4gIHRyYW5zZm9ybVN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgY29uc3QgY2IgPSAocmVzLCB0cmFuc2Zvcm0pID0+XG4gICAgICB0cmFuc2Zvcm0ub25TdWJzdGl0dXRpb25cbiAgICAgICAgPyB0cmFuc2Zvcm0ub25TdWJzdGl0dXRpb24ocmVzLCByZXN1bHRTb0ZhcilcbiAgICAgICAgOiByZXM7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtZXJzLnJlZHVjZShjYiwgc3Vic3RpdHV0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlcyB0aHJvdWdoIGVhY2ggdHJhbnNmb3JtZXIsIGFwcGx5aW5nIHRoZSB0cmFuc2Zvcm1lcidzIGBvbkVuZFJlc3VsdGAgbWV0aG9kIHRvIHRoZVxuICAgKiB0ZW1wbGF0ZSBsaXRlcmFsIGFmdGVyIGFsbCBzdWJzdGl0dXRpb25zIGhhdmUgZmluaXNoZWQgcHJvY2Vzc2luZy5cbiAgICogQHBhcmFtICB7U3RyaW5nfSBlbmRSZXN1bHQgLSBUaGUgcHJvY2Vzc2VkIHRlbXBsYXRlLCBqdXN0IGJlZm9yZSBpdCBpcyByZXR1cm5lZCBmcm9tIHRoZSB0YWdcbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgLSBUaGUgZmluYWwgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIGVhY2ggdHJhbnNmb3JtZXJcbiAgICovXG4gIHRyYW5zZm9ybUVuZFJlc3VsdChlbmRSZXN1bHQpIHtcbiAgICBjb25zdCBjYiA9IChyZXMsIHRyYW5zZm9ybSkgPT5cbiAgICAgIHRyYW5zZm9ybS5vbkVuZFJlc3VsdCA/IHRyYW5zZm9ybS5vbkVuZFJlc3VsdChyZXMpIDogcmVzO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybWVycy5yZWR1Y2UoY2IsIGVuZFJlc3VsdCk7XG4gIH1cbn1cbiJdfQ==","/**\n * TemplateTag transformer that trims whitespace on the end result of a tagged template\n * @param  {String} side = '' - The side of the string to trim. Can be 'start' or 'end' (alternatively 'left' or 'right')\n * @return {Object}           - a TemplateTag transformer\n */\nvar trimResultTransformer = function trimResultTransformer() {\n  var side = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (side === '') {\n        return endResult.trim();\n      }\n\n      side = side.toLowerCase();\n\n      if (side === 'start' || side === 'left') {\n        return endResult.replace(/^\\s*/, '');\n      }\n\n      if (side === 'end' || side === 'right') {\n        return endResult.replace(/\\s*$/, '');\n      }\n\n      throw new Error('Side not supported: ' + side);\n    }\n  };\n};\n\nexport default trimResultTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90cmltUmVzdWx0VHJhbnNmb3JtZXIvdHJpbVJlc3VsdFRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInNpZGUiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FBS0EsSUFBTUEsd0JBQXdCLFNBQXhCQSxxQkFBd0I7QUFBQSxNQUFDQyxJQUFELHVFQUFRLEVBQVI7QUFBQSxTQUFnQjtBQUM1Q0MsZUFENEMsdUJBQ2hDQyxTQURnQyxFQUNyQjtBQUNyQixVQUFJRixTQUFTLEVBQWIsRUFBaUI7QUFDZixlQUFPRSxVQUFVQyxJQUFWLEVBQVA7QUFDRDs7QUFFREgsYUFBT0EsS0FBS0ksV0FBTCxFQUFQOztBQUVBLFVBQUlKLFNBQVMsT0FBVCxJQUFvQkEsU0FBUyxNQUFqQyxFQUF5QztBQUN2QyxlQUFPRSxVQUFVRyxPQUFWLENBQWtCLE1BQWxCLEVBQTBCLEVBQTFCLENBQVA7QUFDRDs7QUFFRCxVQUFJTCxTQUFTLEtBQVQsSUFBa0JBLFNBQVMsT0FBL0IsRUFBd0M7QUFDdEMsZUFBT0UsVUFBVUcsT0FBVixDQUFrQixNQUFsQixFQUEwQixFQUExQixDQUFQO0FBQ0Q7O0FBRUQsWUFBTSxJQUFJQyxLQUFKLDBCQUFpQ04sSUFBakMsQ0FBTjtBQUNEO0FBakIyQyxHQUFoQjtBQUFBLENBQTlCOztBQW9CQSxlQUFlRCxxQkFBZiIsImZpbGUiOiJ0cmltUmVzdWx0VHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyIHRoYXQgdHJpbXMgd2hpdGVzcGFjZSBvbiB0aGUgZW5kIHJlc3VsdCBvZiBhIHRhZ2dlZCB0ZW1wbGF0ZVxuICogQHBhcmFtICB7U3RyaW5nfSBzaWRlID0gJycgLSBUaGUgc2lkZSBvZiB0aGUgc3RyaW5nIHRvIHRyaW0uIENhbiBiZSAnc3RhcnQnIG9yICdlbmQnIChhbHRlcm5hdGl2ZWx5ICdsZWZ0JyBvciAncmlnaHQnKVxuICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciA9IChzaWRlID0gJycpID0+ICh7XG4gIG9uRW5kUmVzdWx0KGVuZFJlc3VsdCkge1xuICAgIGlmIChzaWRlID09PSAnJykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC50cmltKCk7XG4gICAgfVxuXG4gICAgc2lkZSA9IHNpZGUudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChzaWRlID09PSAnc3RhcnQnIHx8IHNpZGUgPT09ICdsZWZ0Jykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9eXFxzKi8sICcnKTtcbiAgICB9XG5cbiAgICBpZiAoc2lkZSA9PT0gJ2VuZCcgfHwgc2lkZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9cXHMqJC8sICcnKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFNpZGUgbm90IHN1cHBvcnRlZDogJHtzaWRlfWApO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lcjtcbiJdfQ==","function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/**\n * strips indentation from a template literal\n * @param  {String} type = 'initial' - whether to remove all indentation or just leading indentation. can be 'all' or 'initial'\n * @return {Object}                  - a TemplateTag transformer\n */\nvar stripIndentTransformer = function stripIndentTransformer() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'initial';\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (type === 'initial') {\n        // remove the shortest leading indentation from each line\n        var match = endResult.match(/^[^\\S\\n]*(?=\\S)/gm);\n        var indent = match && Math.min.apply(Math, _toConsumableArray(match.map(function (el) {\n          return el.length;\n        })));\n        if (indent) {\n          var regexp = new RegExp('^.{' + indent + '}', 'gm');\n          return endResult.replace(regexp, '');\n        }\n        return endResult;\n      }\n      if (type === 'all') {\n        // remove all indentation from each line\n        return endResult.replace(/^[^\\S\\n]+/gm, '');\n      }\n      throw new Error('Unknown type: ' + type);\n    }\n  };\n};\n\nexport default stripIndentTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudFRyYW5zZm9ybWVyL3N0cmlwSW5kZW50VHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsInR5cGUiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsIm1hdGNoIiwiaW5kZW50IiwiTWF0aCIsIm1pbiIsIm1hcCIsImVsIiwibGVuZ3RoIiwicmVnZXhwIiwiUmVnRXhwIiwicmVwbGFjZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7OztBQUtBLElBQU1BLHlCQUF5QixTQUF6QkEsc0JBQXlCO0FBQUEsTUFBQ0MsSUFBRCx1RUFBUSxTQUFSO0FBQUEsU0FBdUI7QUFDcERDLGVBRG9ELHVCQUN4Q0MsU0FEd0MsRUFDN0I7QUFDckIsVUFBSUYsU0FBUyxTQUFiLEVBQXdCO0FBQ3RCO0FBQ0EsWUFBTUcsUUFBUUQsVUFBVUMsS0FBVixDQUFnQixtQkFBaEIsQ0FBZDtBQUNBLFlBQU1DLFNBQVNELFNBQVNFLEtBQUtDLEdBQUwsZ0NBQVlILE1BQU1JLEdBQU4sQ0FBVTtBQUFBLGlCQUFNQyxHQUFHQyxNQUFUO0FBQUEsU0FBVixDQUFaLEVBQXhCO0FBQ0EsWUFBSUwsTUFBSixFQUFZO0FBQ1YsY0FBTU0sU0FBUyxJQUFJQyxNQUFKLFNBQWlCUCxNQUFqQixRQUE0QixJQUE1QixDQUFmO0FBQ0EsaUJBQU9GLFVBQVVVLE9BQVYsQ0FBa0JGLE1BQWxCLEVBQTBCLEVBQTFCLENBQVA7QUFDRDtBQUNELGVBQU9SLFNBQVA7QUFDRDtBQUNELFVBQUlGLFNBQVMsS0FBYixFQUFvQjtBQUNsQjtBQUNBLGVBQU9FLFVBQVVVLE9BQVYsQ0FBa0IsYUFBbEIsRUFBaUMsRUFBakMsQ0FBUDtBQUNEO0FBQ0QsWUFBTSxJQUFJQyxLQUFKLG9CQUEyQmIsSUFBM0IsQ0FBTjtBQUNEO0FBakJtRCxHQUF2QjtBQUFBLENBQS9COztBQW9CQSxlQUFlRCxzQkFBZiIsImZpbGUiOiJzdHJpcEluZGVudFRyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBzdHJpcHMgaW5kZW50YXRpb24gZnJvbSBhIHRlbXBsYXRlIGxpdGVyYWxcbiAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSA9ICdpbml0aWFsJyAtIHdoZXRoZXIgdG8gcmVtb3ZlIGFsbCBpbmRlbnRhdGlvbiBvciBqdXN0IGxlYWRpbmcgaW5kZW50YXRpb24uIGNhbiBiZSAnYWxsJyBvciAnaW5pdGlhbCdcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAtIGEgVGVtcGxhdGVUYWcgdHJhbnNmb3JtZXJcbiAqL1xuY29uc3Qgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciA9ICh0eXBlID0gJ2luaXRpYWwnKSA9PiAoe1xuICBvbkVuZFJlc3VsdChlbmRSZXN1bHQpIHtcbiAgICBpZiAodHlwZSA9PT0gJ2luaXRpYWwnKSB7XG4gICAgICAvLyByZW1vdmUgdGhlIHNob3J0ZXN0IGxlYWRpbmcgaW5kZW50YXRpb24gZnJvbSBlYWNoIGxpbmVcbiAgICAgIGNvbnN0IG1hdGNoID0gZW5kUmVzdWx0Lm1hdGNoKC9eW15cXFNcXG5dKig/PVxcUykvZ20pO1xuICAgICAgY29uc3QgaW5kZW50ID0gbWF0Y2ggJiYgTWF0aC5taW4oLi4ubWF0Y2gubWFwKGVsID0+IGVsLmxlbmd0aCkpO1xuICAgICAgaWYgKGluZGVudCkge1xuICAgICAgICBjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKGBeLnske2luZGVudH19YCwgJ2dtJyk7XG4gICAgICAgIHJldHVybiBlbmRSZXN1bHQucmVwbGFjZShyZWdleHAsICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbmRSZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnYWxsJykge1xuICAgICAgLy8gcmVtb3ZlIGFsbCBpbmRlbnRhdGlvbiBmcm9tIGVhY2ggbGluZVxuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9eW15cXFNcXG5dKy9nbSwgJycpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZTogJHt0eXBlfWApO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmlwSW5kZW50VHJhbnNmb3JtZXI7XG4iXX0=","/**\n * Replaces tabs, newlines and spaces with the chosen value when they occur in sequences\n * @param  {(String|RegExp)} replaceWhat - the value or pattern that should be replaced\n * @param  {*}               replaceWith - the replacement value\n * @return {Object}                      - a TemplateTag transformer\n */\nvar replaceResultTransformer = function replaceResultTransformer(replaceWhat, replaceWith) {\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (replaceWhat == null || replaceWith == null) {\n        throw new Error('replaceResultTransformer requires at least 2 arguments.');\n      }\n      return endResult.replace(replaceWhat, replaceWith);\n    }\n  };\n};\n\nexport default replaceResultTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIvcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VXaGF0IiwicmVwbGFjZVdpdGgiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsIkVycm9yIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQU1BLElBQU1BLDJCQUEyQixTQUEzQkEsd0JBQTJCLENBQUNDLFdBQUQsRUFBY0MsV0FBZDtBQUFBLFNBQStCO0FBQzlEQyxlQUQ4RCx1QkFDbERDLFNBRGtELEVBQ3ZDO0FBQ3JCLFVBQUlILGVBQWUsSUFBZixJQUF1QkMsZUFBZSxJQUExQyxFQUFnRDtBQUM5QyxjQUFNLElBQUlHLEtBQUosQ0FDSix5REFESSxDQUFOO0FBR0Q7QUFDRCxhQUFPRCxVQUFVRSxPQUFWLENBQWtCTCxXQUFsQixFQUErQkMsV0FBL0IsQ0FBUDtBQUNEO0FBUjZELEdBQS9CO0FBQUEsQ0FBakM7O0FBV0EsZUFBZUYsd0JBQWYiLCJmaWxlIjoicmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXBsYWNlcyB0YWJzLCBuZXdsaW5lcyBhbmQgc3BhY2VzIHdpdGggdGhlIGNob3NlbiB2YWx1ZSB3aGVuIHRoZXkgb2NjdXIgaW4gc2VxdWVuY2VzXG4gKiBAcGFyYW0gIHsoU3RyaW5nfFJlZ0V4cCl9IHJlcGxhY2VXaGF0IC0gdGhlIHZhbHVlIG9yIHBhdHRlcm4gdGhhdCBzaG91bGQgYmUgcmVwbGFjZWRcbiAqIEBwYXJhbSAgeyp9ICAgICAgICAgICAgICAgcmVwbGFjZVdpdGggLSB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciA9IChyZXBsYWNlV2hhdCwgcmVwbGFjZVdpdGgpID0+ICh7XG4gIG9uRW5kUmVzdWx0KGVuZFJlc3VsdCkge1xuICAgIGlmIChyZXBsYWNlV2hhdCA9PSBudWxsIHx8IHJlcGxhY2VXaXRoID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciByZXF1aXJlcyBhdCBsZWFzdCAyIGFyZ3VtZW50cy4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKHJlcGxhY2VXaGF0LCByZXBsYWNlV2l0aCk7XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyO1xuIl19","var replaceSubstitutionTransformer = function replaceSubstitutionTransformer(replaceWhat, replaceWith) {\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      if (replaceWhat == null || replaceWith == null) {\n        throw new Error('replaceSubstitutionTransformer requires at least 2 arguments.');\n      }\n\n      // Do not touch if null or undefined\n      if (substitution == null) {\n        return substitution;\n      } else {\n        return substitution.toString().replace(replaceWhat, replaceWith);\n      }\n    }\n  };\n};\n\nexport default replaceSubstitutionTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIvcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lciIsInJlcGxhY2VXaGF0IiwicmVwbGFjZVdpdGgiLCJvblN1YnN0aXR1dGlvbiIsInN1YnN0aXR1dGlvbiIsInJlc3VsdFNvRmFyIiwiRXJyb3IiLCJ0b1N0cmluZyIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUFBLElBQU1BLGlDQUFpQyxTQUFqQ0EsOEJBQWlDLENBQUNDLFdBQUQsRUFBY0MsV0FBZDtBQUFBLFNBQStCO0FBQ3BFQyxrQkFEb0UsMEJBQ3JEQyxZQURxRCxFQUN2Q0MsV0FEdUMsRUFDMUI7QUFDeEMsVUFBSUosZUFBZSxJQUFmLElBQXVCQyxlQUFlLElBQTFDLEVBQWdEO0FBQzlDLGNBQU0sSUFBSUksS0FBSixDQUNKLCtEQURJLENBQU47QUFHRDs7QUFFRDtBQUNBLFVBQUlGLGdCQUFnQixJQUFwQixFQUEwQjtBQUN4QixlQUFPQSxZQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsZUFBT0EsYUFBYUcsUUFBYixHQUF3QkMsT0FBeEIsQ0FBZ0NQLFdBQWhDLEVBQTZDQyxXQUE3QyxDQUFQO0FBQ0Q7QUFDRjtBQWRtRSxHQUEvQjtBQUFBLENBQXZDOztBQWlCQSxlQUFlRiw4QkFBZiIsImZpbGUiOiJyZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIgPSAocmVwbGFjZVdoYXQsIHJlcGxhY2VXaXRoKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgaWYgKHJlcGxhY2VXaGF0ID09IG51bGwgfHwgcmVwbGFjZVdpdGggPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAncmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyIHJlcXVpcmVzIGF0IGxlYXN0IDIgYXJndW1lbnRzLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIERvIG5vdCB0b3VjaCBpZiBudWxsIG9yIHVuZGVmaW5lZFxuICAgIGlmIChzdWJzdGl0dXRpb24gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHN1YnN0aXR1dGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN1YnN0aXR1dGlvbi50b1N0cmluZygpLnJlcGxhY2UocmVwbGFjZVdoYXQsIHJlcGxhY2VXaXRoKTtcbiAgICB9XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyO1xuIl19","var defaults = {\n  separator: '',\n  conjunction: '',\n  serial: false\n};\n\n/**\n * Converts an array substitution to a string containing a list\n * @param  {String} [opts.separator = ''] - the character that separates each item\n * @param  {String} [opts.conjunction = '']  - replace the last separator with this\n * @param  {Boolean} [opts.serial = false] - include the separator before the conjunction? (Oxford comma use-case)\n *\n * @return {Object}                     - a TemplateTag transformer\n */\nvar inlineArrayTransformer = function inlineArrayTransformer() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaults;\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      // only operate on arrays\n      if (Array.isArray(substitution)) {\n        var arrayLength = substitution.length;\n        var separator = opts.separator;\n        var conjunction = opts.conjunction;\n        var serial = opts.serial;\n        // join each item in the array into a string where each item is separated by separator\n        // be sure to maintain indentation\n        var indent = resultSoFar.match(/(\\n?[^\\S\\n]+)$/);\n        if (indent) {\n          substitution = substitution.join(separator + indent[1]);\n        } else {\n          substitution = substitution.join(separator + ' ');\n        }\n        // if conjunction is set, replace the last separator with conjunction, but only if there is more than one substitution\n        if (conjunction && arrayLength > 1) {\n          var separatorIndex = substitution.lastIndexOf(separator);\n          substitution = substitution.slice(0, separatorIndex) + (serial ? separator : '') + ' ' + conjunction + substitution.slice(separatorIndex + 1);\n        }\n      }\n      return substitution;\n    }\n  };\n};\n\nexport default inlineArrayTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmxpbmVBcnJheVRyYW5zZm9ybWVyL2lubGluZUFycmF5VHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsiZGVmYXVsdHMiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiIsInNlcmlhbCIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJvcHRzIiwib25TdWJzdGl0dXRpb24iLCJzdWJzdGl0dXRpb24iLCJyZXN1bHRTb0ZhciIsIkFycmF5IiwiaXNBcnJheSIsImFycmF5TGVuZ3RoIiwibGVuZ3RoIiwiaW5kZW50IiwibWF0Y2giLCJqb2luIiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsInNsaWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxXQUFXO0FBQ2ZDLGFBQVcsRUFESTtBQUVmQyxlQUFhLEVBRkU7QUFHZkMsVUFBUTtBQUhPLENBQWpCOztBQU1BOzs7Ozs7OztBQVFBLElBQU1DLHlCQUF5QixTQUF6QkEsc0JBQXlCO0FBQUEsTUFBQ0MsSUFBRCx1RUFBUUwsUUFBUjtBQUFBLFNBQXNCO0FBQ25ETSxrQkFEbUQsMEJBQ3BDQyxZQURvQyxFQUN0QkMsV0FEc0IsRUFDVDtBQUN4QztBQUNBLFVBQUlDLE1BQU1DLE9BQU4sQ0FBY0gsWUFBZCxDQUFKLEVBQWlDO0FBQy9CLFlBQU1JLGNBQWNKLGFBQWFLLE1BQWpDO0FBQ0EsWUFBTVgsWUFBWUksS0FBS0osU0FBdkI7QUFDQSxZQUFNQyxjQUFjRyxLQUFLSCxXQUF6QjtBQUNBLFlBQU1DLFNBQVNFLEtBQUtGLE1BQXBCO0FBQ0E7QUFDQTtBQUNBLFlBQU1VLFNBQVNMLFlBQVlNLEtBQVosQ0FBa0IsZ0JBQWxCLENBQWY7QUFDQSxZQUFJRCxNQUFKLEVBQVk7QUFDVk4seUJBQWVBLGFBQWFRLElBQWIsQ0FBa0JkLFlBQVlZLE9BQU8sQ0FBUCxDQUE5QixDQUFmO0FBQ0QsU0FGRCxNQUVPO0FBQ0xOLHlCQUFlQSxhQUFhUSxJQUFiLENBQWtCZCxZQUFZLEdBQTlCLENBQWY7QUFDRDtBQUNEO0FBQ0EsWUFBSUMsZUFBZVMsY0FBYyxDQUFqQyxFQUFvQztBQUNsQyxjQUFNSyxpQkFBaUJULGFBQWFVLFdBQWIsQ0FBeUJoQixTQUF6QixDQUF2QjtBQUNBTSx5QkFDRUEsYUFBYVcsS0FBYixDQUFtQixDQUFuQixFQUFzQkYsY0FBdEIsS0FDQ2IsU0FBU0YsU0FBVCxHQUFxQixFQUR0QixJQUVBLEdBRkEsR0FHQUMsV0FIQSxHQUlBSyxhQUFhVyxLQUFiLENBQW1CRixpQkFBaUIsQ0FBcEMsQ0FMRjtBQU1EO0FBQ0Y7QUFDRCxhQUFPVCxZQUFQO0FBQ0Q7QUE1QmtELEdBQXRCO0FBQUEsQ0FBL0I7O0FBK0JBLGVBQWVILHNCQUFmIiwiZmlsZSI6ImlubGluZUFycmF5VHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkZWZhdWx0cyA9IHtcbiAgc2VwYXJhdG9yOiAnJyxcbiAgY29uanVuY3Rpb246ICcnLFxuICBzZXJpYWw6IGZhbHNlLFxufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhcnJheSBzdWJzdGl0dXRpb24gdG8gYSBzdHJpbmcgY29udGFpbmluZyBhIGxpc3RcbiAqIEBwYXJhbSAge1N0cmluZ30gW29wdHMuc2VwYXJhdG9yID0gJyddIC0gdGhlIGNoYXJhY3RlciB0aGF0IHNlcGFyYXRlcyBlYWNoIGl0ZW1cbiAqIEBwYXJhbSAge1N0cmluZ30gW29wdHMuY29uanVuY3Rpb24gPSAnJ10gIC0gcmVwbGFjZSB0aGUgbGFzdCBzZXBhcmF0b3Igd2l0aCB0aGlzXG4gKiBAcGFyYW0gIHtCb29sZWFufSBbb3B0cy5zZXJpYWwgPSBmYWxzZV0gLSBpbmNsdWRlIHRoZSBzZXBhcmF0b3IgYmVmb3JlIHRoZSBjb25qdW5jdGlvbj8gKE94Zm9yZCBjb21tYSB1c2UtY2FzZSlcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgPSAob3B0cyA9IGRlZmF1bHRzKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgLy8gb25seSBvcGVyYXRlIG9uIGFycmF5c1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN1YnN0aXR1dGlvbikpIHtcbiAgICAgIGNvbnN0IGFycmF5TGVuZ3RoID0gc3Vic3RpdHV0aW9uLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNlcGFyYXRvciA9IG9wdHMuc2VwYXJhdG9yO1xuICAgICAgY29uc3QgY29uanVuY3Rpb24gPSBvcHRzLmNvbmp1bmN0aW9uO1xuICAgICAgY29uc3Qgc2VyaWFsID0gb3B0cy5zZXJpYWw7XG4gICAgICAvLyBqb2luIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgaW50byBhIHN0cmluZyB3aGVyZSBlYWNoIGl0ZW0gaXMgc2VwYXJhdGVkIGJ5IHNlcGFyYXRvclxuICAgICAgLy8gYmUgc3VyZSB0byBtYWludGFpbiBpbmRlbnRhdGlvblxuICAgICAgY29uc3QgaW5kZW50ID0gcmVzdWx0U29GYXIubWF0Y2goLyhcXG4/W15cXFNcXG5dKykkLyk7XG4gICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbiA9IHN1YnN0aXR1dGlvbi5qb2luKHNlcGFyYXRvciArIGluZGVudFsxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJzdGl0dXRpb24gPSBzdWJzdGl0dXRpb24uam9pbihzZXBhcmF0b3IgKyAnICcpO1xuICAgICAgfVxuICAgICAgLy8gaWYgY29uanVuY3Rpb24gaXMgc2V0LCByZXBsYWNlIHRoZSBsYXN0IHNlcGFyYXRvciB3aXRoIGNvbmp1bmN0aW9uLCBidXQgb25seSBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHN1YnN0aXR1dGlvblxuICAgICAgaWYgKGNvbmp1bmN0aW9uICYmIGFycmF5TGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IHN1YnN0aXR1dGlvbi5sYXN0SW5kZXhPZihzZXBhcmF0b3IpO1xuICAgICAgICBzdWJzdGl0dXRpb24gPVxuICAgICAgICAgIHN1YnN0aXR1dGlvbi5zbGljZSgwLCBzZXBhcmF0b3JJbmRleCkgK1xuICAgICAgICAgIChzZXJpYWwgPyBzZXBhcmF0b3IgOiAnJykgK1xuICAgICAgICAgICcgJyArXG4gICAgICAgICAgY29uanVuY3Rpb24gK1xuICAgICAgICAgIHN1YnN0aXR1dGlvbi5zbGljZShzZXBhcmF0b3JJbmRleCArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3Vic3RpdHV0aW9uO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGlubGluZUFycmF5VHJhbnNmb3JtZXI7XG4iXX0=","var splitStringTransformer = function splitStringTransformer(splitBy) {\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      if (splitBy != null && typeof splitBy === 'string') {\n        if (typeof substitution === 'string' && substitution.includes(splitBy)) {\n          substitution = substitution.split(splitBy);\n        }\n      } else {\n        throw new Error('You need to specify a string character to split by.');\n      }\n      return substitution;\n    }\n  };\n};\n\nexport default splitStringTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zcGxpdFN0cmluZ1RyYW5zZm9ybWVyL3NwbGl0U3RyaW5nVHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsic3BsaXRTdHJpbmdUcmFuc2Zvcm1lciIsIm9uU3Vic3RpdHV0aW9uIiwic3Vic3RpdHV0aW9uIiwicmVzdWx0U29GYXIiLCJzcGxpdEJ5IiwiaW5jbHVkZXMiLCJzcGxpdCIsIkVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSx5QkFBeUIsU0FBekJBLHNCQUF5QjtBQUFBLFNBQVk7QUFDekNDLGtCQUR5QywwQkFDMUJDLFlBRDBCLEVBQ1pDLFdBRFksRUFDQztBQUN4QyxVQUFJQyxXQUFXLElBQVgsSUFBbUIsT0FBT0EsT0FBUCxLQUFtQixRQUExQyxFQUFvRDtBQUNsRCxZQUFJLE9BQU9GLFlBQVAsS0FBd0IsUUFBeEIsSUFBb0NBLGFBQWFHLFFBQWIsQ0FBc0JELE9BQXRCLENBQXhDLEVBQXdFO0FBQ3RFRix5QkFBZUEsYUFBYUksS0FBYixDQUFtQkYsT0FBbkIsQ0FBZjtBQUNEO0FBQ0YsT0FKRCxNQUlPO0FBQ0wsY0FBTSxJQUFJRyxLQUFKLENBQVUscURBQVYsQ0FBTjtBQUNEO0FBQ0QsYUFBT0wsWUFBUDtBQUNEO0FBVndDLEdBQVo7QUFBQSxDQUEvQjs7QUFhQSxlQUFlRixzQkFBZiIsImZpbGUiOiJzcGxpdFN0cmluZ1RyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3BsaXRTdHJpbmdUcmFuc2Zvcm1lciA9IHNwbGl0QnkgPT4gKHtcbiAgb25TdWJzdGl0dXRpb24oc3Vic3RpdHV0aW9uLCByZXN1bHRTb0Zhcikge1xuICAgIGlmIChzcGxpdEJ5ICE9IG51bGwgJiYgdHlwZW9mIHNwbGl0QnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIHN1YnN0aXR1dGlvbiA9PT0gJ3N0cmluZycgJiYgc3Vic3RpdHV0aW9uLmluY2x1ZGVzKHNwbGl0QnkpKSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbiA9IHN1YnN0aXR1dGlvbi5zcGxpdChzcGxpdEJ5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBzcGVjaWZ5IGEgc3RyaW5nIGNoYXJhY3RlciB0byBzcGxpdCBieS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1YnN0aXR1dGlvbjtcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyO1xuIl19","var isValidValue = function isValidValue(x) {\n  return x != null && !Number.isNaN(x) && typeof x !== 'boolean';\n};\n\nvar removeNonPrintingValuesTransformer = function removeNonPrintingValuesTransformer() {\n  return {\n    onSubstitution: function onSubstitution(substitution) {\n      if (Array.isArray(substitution)) {\n        return substitution.filter(isValidValue);\n      }\n      if (isValidValue(substitution)) {\n        return substitution;\n      }\n      return '';\n    }\n  };\n};\n\nexport default removeNonPrintingValuesTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyL3JlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsiaXNWYWxpZFZhbHVlIiwieCIsIk51bWJlciIsImlzTmFOIiwicmVtb3ZlTm9uUHJpbnRpbmdWYWx1ZXNUcmFuc2Zvcm1lciIsIm9uU3Vic3RpdHV0aW9uIiwic3Vic3RpdHV0aW9uIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxlQUFlLFNBQWZBLFlBQWU7QUFBQSxTQUNuQkMsS0FBSyxJQUFMLElBQWEsQ0FBQ0MsT0FBT0MsS0FBUCxDQUFhRixDQUFiLENBQWQsSUFBaUMsT0FBT0EsQ0FBUCxLQUFhLFNBRDNCO0FBQUEsQ0FBckI7O0FBR0EsSUFBTUcscUNBQXFDLFNBQXJDQSxrQ0FBcUM7QUFBQSxTQUFPO0FBQ2hEQyxrQkFEZ0QsMEJBQ2pDQyxZQURpQyxFQUNuQjtBQUMzQixVQUFJQyxNQUFNQyxPQUFOLENBQWNGLFlBQWQsQ0FBSixFQUFpQztBQUMvQixlQUFPQSxhQUFhRyxNQUFiLENBQW9CVCxZQUFwQixDQUFQO0FBQ0Q7QUFDRCxVQUFJQSxhQUFhTSxZQUFiLENBQUosRUFBZ0M7QUFDOUIsZUFBT0EsWUFBUDtBQUNEO0FBQ0QsYUFBTyxFQUFQO0FBQ0Q7QUFUK0MsR0FBUDtBQUFBLENBQTNDOztBQVlBLGVBQWVGLGtDQUFmIiwiZmlsZSI6InJlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpc1ZhbGlkVmFsdWUgPSB4ID0+XG4gIHggIT0gbnVsbCAmJiAhTnVtYmVyLmlzTmFOKHgpICYmIHR5cGVvZiB4ICE9PSAnYm9vbGVhbic7XG5cbmNvbnN0IHJlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIgPSAoKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdWJzdGl0dXRpb24pKSB7XG4gICAgICByZXR1cm4gc3Vic3RpdHV0aW9uLmZpbHRlcihpc1ZhbGlkVmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNWYWxpZFZhbHVlKHN1YnN0aXR1dGlvbikpIHtcbiAgICAgIHJldHVybiBzdWJzdGl0dXRpb247XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport splitStringTransformer from '../splitStringTransformer';\nimport removeNonPrintingValuesTransformer from '../removeNonPrintingValuesTransformer';\n\nvar html = new TemplateTag(splitStringTransformer('\\n'), removeNonPrintingValuesTransformer, inlineArrayTransformer, stripIndentTransformer, trimResultTransformer);\n\nexport default html;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9odG1sL2h0bWwuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInNwbGl0U3RyaW5nVHJhbnNmb3JtZXIiLCJyZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyIiwiaHRtbCJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxrQ0FBUCxNQUErQyx1Q0FBL0M7O0FBRUEsSUFBTUMsT0FBTyxJQUFJTixXQUFKLENBQ1hJLHVCQUF1QixJQUF2QixDQURXLEVBRVhDLGtDQUZXLEVBR1hILHNCQUhXLEVBSVhELHNCQUpXLEVBS1hFLHFCQUxXLENBQWI7O0FBUUEsZUFBZUcsSUFBZiIsImZpbGUiOiJodG1sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgc3BsaXRTdHJpbmdUcmFuc2Zvcm1lciBmcm9tICcuLi9zcGxpdFN0cmluZ1RyYW5zZm9ybWVyJztcbmltcG9ydCByZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyIGZyb20gJy4uL3JlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXInO1xuXG5jb25zdCBodG1sID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyKCdcXG4nKSxcbiAgcmVtb3ZlTm9uUHJpbnRpbmdWYWx1ZXNUcmFuc2Zvcm1lcixcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcixcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgaHRtbDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaLists = new TemplateTag(inlineArrayTransformer({ separator: ',' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzL2NvbW1hTGlzdHMuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsImNvbW1hTGlzdHMiLCJzZXBhcmF0b3IiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFdBQVAsTUFBd0IsZ0JBQXhCO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0MscUJBQVAsTUFBa0MsMEJBQWxDOztBQUVBLElBQU1DLGFBQWEsSUFBSUosV0FBSixDQUNqQkUsdUJBQXVCLEVBQUVHLFdBQVcsR0FBYixFQUF2QixDQURpQixFQUVqQkosc0JBRmlCLEVBR2pCRSxxQkFIaUIsQ0FBbkI7O0FBTUEsZUFBZUMsVUFBZiIsImZpbGUiOiJjb21tYUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IGNvbW1hTGlzdHMgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIoeyBzZXBhcmF0b3I6ICcsJyB9KSxcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFMaXN0cztcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaListsAnd = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'and' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaListsAnd;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzQW5kL2NvbW1hTGlzdHNBbmQuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsImNvbW1hTGlzdHNBbmQiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZ0JBQWdCLElBQUlKLFdBQUosQ0FDcEJFLHVCQUF1QixFQUFFRyxXQUFXLEdBQWIsRUFBa0JDLGFBQWEsS0FBL0IsRUFBdkIsQ0FEb0IsRUFFcEJMLHNCQUZvQixFQUdwQkUscUJBSG9CLENBQXRCOztBQU1BLGVBQWVDLGFBQWYiLCJmaWxlIjoiY29tbWFMaXN0c0FuZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBjb21tYUxpc3RzQW5kID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyKHsgc2VwYXJhdG9yOiAnLCcsIGNvbmp1bmN0aW9uOiAnYW5kJyB9KSxcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFMaXN0c0FuZDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaListsOr = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'or' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaListsOr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzT3IvY29tbWFMaXN0c09yLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJjb21tYUxpc3RzT3IiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZUFBZSxJQUFJSixXQUFKLENBQ25CRSx1QkFBdUIsRUFBRUcsV0FBVyxHQUFiLEVBQWtCQyxhQUFhLElBQS9CLEVBQXZCLENBRG1CLEVBRW5CTCxzQkFGbUIsRUFHbkJFLHFCQUhtQixDQUFyQjs7QUFNQSxlQUFlQyxZQUFmIiwiZmlsZSI6ImNvbW1hTGlzdHNPci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBjb21tYUxpc3RzT3IgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIoeyBzZXBhcmF0b3I6ICcsJywgY29uanVuY3Rpb246ICdvcicgfSksXG4gIHN0cmlwSW5kZW50VHJhbnNmb3JtZXIsXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbW1hTGlzdHNPcjtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar stripIndents = new TemplateTag(stripIndentTransformer('all'), trimResultTransformer);\n\nexport default stripIndents;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudHMvc3RyaXBJbmRlbnRzLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInN0cmlwSW5kZW50cyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZUFBZSxJQUFJSCxXQUFKLENBQ25CQyx1QkFBdUIsS0FBdkIsQ0FEbUIsRUFFbkJDLHFCQUZtQixDQUFyQjs7QUFLQSxlQUFlQyxZQUFmIiwiZmlsZSI6InN0cmlwSW5kZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCB0cmltUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vdHJpbVJlc3VsdFRyYW5zZm9ybWVyJztcblxuY29uc3Qgc3RyaXBJbmRlbnRzID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzdHJpcEluZGVudFRyYW5zZm9ybWVyKCdhbGwnKSxcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RyaXBJbmRlbnRzO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport splitStringTransformer from '../splitStringTransformer';\nimport replaceSubstitutionTransformer from '../replaceSubstitutionTransformer';\n\nvar safeHtml = new TemplateTag(splitStringTransformer('\\n'), inlineArrayTransformer, stripIndentTransformer, trimResultTransformer, replaceSubstitutionTransformer(/&/g, '&amp;'), replaceSubstitutionTransformer(/</g, '&lt;'), replaceSubstitutionTransformer(/>/g, '&gt;'), replaceSubstitutionTransformer(/\"/g, '&quot;'), replaceSubstitutionTransformer(/'/g, '&#x27;'), replaceSubstitutionTransformer(/`/g, '&#x60;'));\n\nexport default safeHtml;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zYWZlSHRtbC9zYWZlSHRtbC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwic3BsaXRTdHJpbmdUcmFuc2Zvcm1lciIsInJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lciIsInNhZmVIdG1sIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLDhCQUFQLE1BQTJDLG1DQUEzQzs7QUFFQSxJQUFNQyxXQUFXLElBQUlOLFdBQUosQ0FDZkksdUJBQXVCLElBQXZCLENBRGUsRUFFZkYsc0JBRmUsRUFHZkQsc0JBSGUsRUFJZkUscUJBSmUsRUFLZkUsK0JBQStCLElBQS9CLEVBQXFDLE9BQXJDLENBTGUsRUFNZkEsK0JBQStCLElBQS9CLEVBQXFDLE1BQXJDLENBTmUsRUFPZkEsK0JBQStCLElBQS9CLEVBQXFDLE1BQXJDLENBUGUsRUFRZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBUmUsRUFTZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBVGUsRUFVZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBVmUsQ0FBakI7O0FBYUEsZUFBZUMsUUFBZiIsImZpbGUiOiJzYWZlSHRtbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHNwbGl0U3RyaW5nVHJhbnNmb3JtZXIgZnJvbSAnLi4vc3BsaXRTdHJpbmdUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcic7XG5cbmNvbnN0IHNhZmVIdG1sID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyKCdcXG4nKSxcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcixcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuICByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIoLyYvZywgJyZhbXA7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvPC9nLCAnJmx0OycpLFxuICByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIoLz4vZywgJyZndDsnKSxcbiAgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyKC9cIi9nLCAnJnF1b3Q7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvJy9nLCAnJiN4Mjc7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvYC9nLCAnJiN4NjA7JyksXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBzYWZlSHRtbDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLine = new TemplateTag(replaceResultTransformer(/(?:\\n(?:\\s*))+/g, ' '), trimResultTransformer);\n\nexport default oneLine;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lL29uZUxpbmUuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxVQUFVLElBQUlILFdBQUosQ0FDZEUseUJBQXlCLGlCQUF6QixFQUE0QyxHQUE1QyxDQURjLEVBRWRELHFCQUZjLENBQWhCOztBQUtBLGVBQWVFLE9BQWYiLCJmaWxlIjoib25lTGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IG9uZUxpbmUgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcigvKD86XFxuKD86XFxzKikpKy9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lO1xuIl19","import TemplateTag from '../TemplateTag';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineTrim = new TemplateTag(replaceResultTransformer(/(?:\\n\\s*)/g, ''), trimResultTransformer);\n\nexport default oneLineTrim;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lVHJpbS9vbmVMaW5lVHJpbS5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsIm9uZUxpbmVUcmltIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxjQUFjLElBQUlILFdBQUosQ0FDbEJFLHlCQUF5QixZQUF6QixFQUF1QyxFQUF2QyxDQURrQixFQUVsQkQscUJBRmtCLENBQXBCOztBQUtBLGVBQWVFLFdBQWYiLCJmaWxlIjoib25lTGluZVRyaW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVtcGxhdGVUYWcgZnJvbSAnLi4vVGVtcGxhdGVUYWcnO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lVHJpbSA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXG5cXHMqKS9nLCAnJyksXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IG9uZUxpbmVUcmltO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaLists = new TemplateTag(inlineArrayTransformer({ separator: ',' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0cy9vbmVMaW5lQ29tbWFMaXN0cy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lQ29tbWFMaXN0cyIsInNlcGFyYXRvciJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyx3QkFBUCxNQUFxQyw2QkFBckM7O0FBRUEsSUFBTUMsb0JBQW9CLElBQUlKLFdBQUosQ0FDeEJDLHVCQUF1QixFQUFFSSxXQUFXLEdBQWIsRUFBdkIsQ0FEd0IsRUFFeEJGLHlCQUF5QixVQUF6QixFQUFxQyxHQUFyQyxDQUZ3QixFQUd4QkQscUJBSHdCLENBQTFCOztBQU1BLGVBQWVFLGlCQUFmIiwiZmlsZSI6Im9uZUxpbmVDb21tYUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lQ29tbWFMaXN0cyA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcih7IHNlcGFyYXRvcjogJywnIH0pLFxuICByZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIoLyg/OlxccyspL2csICcgJyksXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IG9uZUxpbmVDb21tYUxpc3RzO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaListsOr = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'or' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaListsOr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0c09yL29uZUxpbmVDb21tYUxpc3RzT3IuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwicmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIiwib25lTGluZUNvbW1hTGlzdHNPciIsInNlcGFyYXRvciIsImNvbmp1bmN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxzQkFBc0IsSUFBSUosV0FBSixDQUMxQkMsdUJBQXVCLEVBQUVJLFdBQVcsR0FBYixFQUFrQkMsYUFBYSxJQUEvQixFQUF2QixDQUQwQixFQUUxQkgseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRjBCLEVBRzFCRCxxQkFIMEIsQ0FBNUI7O0FBTUEsZUFBZUUsbUJBQWYiLCJmaWxlIjoib25lTGluZUNvbW1hTGlzdHNPci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgaW5saW5lQXJyYXlUcmFuc2Zvcm1lciBmcm9tICcuLi9pbmxpbmVBcnJheVRyYW5zZm9ybWVyJztcbmltcG9ydCB0cmltUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vdHJpbVJlc3VsdFRyYW5zZm9ybWVyJztcbmltcG9ydCByZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyJztcblxuY29uc3Qgb25lTGluZUNvbW1hTGlzdHNPciA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcih7IHNlcGFyYXRvcjogJywnLCBjb25qdW5jdGlvbjogJ29yJyB9KSxcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXHMrKS9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lQ29tbWFMaXN0c09yO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaListsAnd = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'and' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaListsAnd;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0c0FuZC9vbmVMaW5lQ29tbWFMaXN0c0FuZC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lQ29tbWFMaXN0c0FuZCIsInNlcGFyYXRvciIsImNvbmp1bmN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyx1QkFBdUIsSUFBSUosV0FBSixDQUMzQkMsdUJBQXVCLEVBQUVJLFdBQVcsR0FBYixFQUFrQkMsYUFBYSxLQUEvQixFQUF2QixDQUQyQixFQUUzQkgseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRjJCLEVBRzNCRCxxQkFIMkIsQ0FBN0I7O0FBTUEsZUFBZUUsb0JBQWYiLCJmaWxlIjoib25lTGluZUNvbW1hTGlzdHNBbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVtcGxhdGVUYWcgZnJvbSAnLi4vVGVtcGxhdGVUYWcnO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IG9uZUxpbmVDb21tYUxpc3RzQW5kID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyKHsgc2VwYXJhdG9yOiAnLCcsIGNvbmp1bmN0aW9uOiAnYW5kJyB9KSxcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXHMrKS9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lQ29tbWFMaXN0c0FuZDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar inlineLists = new TemplateTag(inlineArrayTransformer, stripIndentTransformer, trimResultTransformer);\n\nexport default inlineLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmxpbmVMaXN0cy9pbmxpbmVMaXN0cy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwiaW5saW5lTGlzdHMiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFdBQVAsTUFBd0IsZ0JBQXhCO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0MscUJBQVAsTUFBa0MsMEJBQWxDOztBQUVBLElBQU1DLGNBQWMsSUFBSUosV0FBSixDQUNsQkUsc0JBRGtCLEVBRWxCRCxzQkFGa0IsRUFHbEJFLHFCQUhrQixDQUFwQjs7QUFNQSxlQUFlQyxXQUFmIiwiZmlsZSI6ImlubGluZUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IGlubGluZUxpc3RzID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyLFxuICBzdHJpcEluZGVudFRyYW5zZm9ybWVyLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBpbmxpbmVMaXN0cztcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineInlineLists = new TemplateTag(inlineArrayTransformer, replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineInlineLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lSW5saW5lTGlzdHMvb25lTGluZUlubGluZUxpc3RzLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsIm9uZUxpbmVJbmxpbmVMaXN0cyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyx3QkFBUCxNQUFxQyw2QkFBckM7O0FBRUEsSUFBTUMscUJBQXFCLElBQUlKLFdBQUosQ0FDekJDLHNCQUR5QixFQUV6QkUseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRnlCLEVBR3pCRCxxQkFIeUIsQ0FBM0I7O0FBTUEsZUFBZUUsa0JBQWYiLCJmaWxlIjoib25lTGluZUlubGluZUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lSW5saW5lTGlzdHMgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIsXG4gIHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcigvKD86XFxzKykvZywgJyAnKSxcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgb25lTGluZUlubGluZUxpc3RzO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar stripIndent = new TemplateTag(stripIndentTransformer, trimResultTransformer);\n\nexport default stripIndent;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudC9zdHJpcEluZGVudC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJzdHJpcEluZGVudCJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsY0FBYyxJQUFJSCxXQUFKLENBQ2xCQyxzQkFEa0IsRUFFbEJDLHFCQUZrQixDQUFwQjs7QUFLQSxlQUFlQyxXQUFmIiwiZmlsZSI6InN0cmlwSW5kZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBzdHJpcEluZGVudCA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RyaXBJbmRlbnQ7XG4iXX0=","function corslite(url, callback, cors) {\n    var sent = false;\n\n    if (typeof window.XMLHttpRequest === 'undefined') {\n        return callback(Error('Browser not supported'));\n    }\n\n    if (typeof cors === 'undefined') {\n        var m = url.match(/^\\s*https?:\\/\\/[^\\/]*/);\n        cors = m && (m[0] !== location.protocol + '//' + location.hostname +\n                (location.port ? ':' + location.port : ''));\n    }\n\n    var x = new window.XMLHttpRequest();\n\n    function isSuccessful(status) {\n        return status >= 200 && status < 300 || status === 304;\n    }\n\n    if (cors && !('withCredentials' in x)) {\n        // IE8-9\n        x = new window.XDomainRequest();\n\n        // Ensure callback is never called synchronously, i.e., before\n        // x.send() returns (this has been observed in the wild).\n        // See https://github.com/mapbox/mapbox.js/issues/472\n        var original = callback;\n        callback = function() {\n            if (sent) {\n                original.apply(this, arguments);\n            } else {\n                var that = this, args = arguments;\n                setTimeout(function() {\n                    original.apply(that, args);\n                }, 0);\n            }\n        }\n    }\n\n    function loaded() {\n        if (\n            // XDomainRequest\n            x.status === undefined ||\n            // modern browsers\n            isSuccessful(x.status)) callback.call(x, null, x);\n        else callback.call(x, x, null);\n    }\n\n    // Both `onreadystatechange` and `onload` can fire. `onreadystatechange`\n    // has [been supported for longer](http://stackoverflow.com/a/9181508/229001).\n    if ('onload' in x) {\n        x.onload = loaded;\n    } else {\n        x.onreadystatechange = function readystate() {\n            if (x.readyState === 4) {\n                loaded();\n            }\n        };\n    }\n\n    // Call the callback with the XMLHttpRequest object as an error and prevent\n    // it from ever being called again by reassigning it to `noop`\n    x.onerror = function error(evt) {\n        // XDomainRequest provides no evt parameter\n        callback.call(this, evt || true, null);\n        callback = function() { };\n    };\n\n    // IE9 must have onprogress be set to a unique function.\n    x.onprogress = function() { };\n\n    x.ontimeout = function(evt) {\n        callback.call(this, evt, null);\n        callback = function() { };\n    };\n\n    x.onabort = function(evt) {\n        callback.call(this, evt, null);\n        callback = function() { };\n    };\n\n    // GET is the only supported HTTP Verb by XDomainRequest and is the\n    // only one supported here.\n    x.open('GET', url, true);\n\n    // Send the request. Sending data is not supported.\n    x.send(null);\n    sent = true;\n\n    return x;\n}\n\nif (typeof module !== 'undefined') module.exports = corslite;\n","function objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n]\"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns;\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I, c;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.slice(j + 1, i).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var k = 1;\n        c = text.charCodeAt(I++);\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.slice(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.slice(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && (a = f(a, n++)) == null) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    })).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return text == null ? \"\"\n        : reFormat.test(text += \"\") ? \"\\\"\" + text.replace(/\\\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : text;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatRows: formatRows\n  };\n}\n","import dsv from \"./dsv\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatRows = csv.formatRows;\n","import dsv from \"./dsv\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatRows = tsv.formatRows;\n"],"sourceRoot":""}